{"version":3,"sources":["../node_modules/@popperjs/core/lib/enums.js","../node_modules/@popperjs/core/lib/dom-utils/getNodeName.js","../node_modules/@popperjs/core/lib/dom-utils/getWindow.js","../node_modules/@popperjs/core/lib/dom-utils/instanceOf.js","../node_modules/@popperjs/core/lib/modifiers/applyStyles.js","../node_modules/@popperjs/core/lib/utils/getBasePlacement.js","../node_modules/@popperjs/core/lib/utils/math.js","../node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js","../node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js","../node_modules/@popperjs/core/lib/dom-utils/contains.js","../node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js","../node_modules/@popperjs/core/lib/dom-utils/isTableElement.js","../node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js","../node_modules/@popperjs/core/lib/dom-utils/getParentNode.js","../node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js","../node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js","../node_modules/@popperjs/core/lib/utils/within.js","../node_modules/@popperjs/core/lib/utils/getFreshSideObject.js","../node_modules/@popperjs/core/lib/utils/mergePaddingObject.js","../node_modules/@popperjs/core/lib/utils/expandToHashMap.js","../node_modules/@popperjs/core/lib/modifiers/arrow.js","../node_modules/@popperjs/core/lib/utils/getVariation.js","../node_modules/@popperjs/core/lib/modifiers/computeStyles.js","../node_modules/@popperjs/core/lib/modifiers/eventListeners.js","../node_modules/@popperjs/core/lib/utils/getOppositePlacement.js","../node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js","../node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js","../node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js","../node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js","../node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js","../node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js","../node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js","../node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js","../node_modules/@popperjs/core/lib/utils/rectToClientRect.js","../node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js","../node_modules/@popperjs/core/lib/utils/computeOffsets.js","../node_modules/@popperjs/core/lib/utils/detectOverflow.js","../node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js","../node_modules/@popperjs/core/lib/modifiers/flip.js","../node_modules/@popperjs/core/lib/modifiers/hide.js","../node_modules/@popperjs/core/lib/modifiers/offset.js","../node_modules/@popperjs/core/lib/modifiers/popperOffsets.js","../node_modules/@popperjs/core/lib/utils/getAltAxis.js","../node_modules/@popperjs/core/lib/modifiers/preventOverflow.js","../node_modules/@popperjs/core/lib/modifiers/index.js","../node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js","../node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js","../node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js","../node_modules/@popperjs/core/lib/utils/orderModifiers.js","../node_modules/@popperjs/core/lib/utils/debounce.js","../node_modules/@popperjs/core/lib/utils/format.js","../node_modules/@popperjs/core/lib/utils/validateModifiers.js","../node_modules/@popperjs/core/lib/utils/uniqueBy.js","../node_modules/@popperjs/core/lib/utils/mergeByName.js","../node_modules/@popperjs/core/lib/createPopper.js","../node_modules/@popperjs/core/lib/popper-lite.js","../node_modules/@popperjs/core/lib/popper.js","../node_modules/@popperjs/core/lib/index.js","../../js/src/util/index.js","../../js/src/dom/event-handler.js","../../js/src/dom/data.js","../../js/src/dom/manipulator.js","../../js/src/util/config.js","../../js/src/base-component.js","../../js/src/util/component-functions.js","../../js/src/alert.js","../../js/src/button.js","../../js/src/dom/selector-engine.js","../../js/src/util/swipe.js","../../js/src/carousel.js","../../js/src/collapse.js","../../js/src/dropdown.js","../../js/src/util/scrollbar.js","../../js/src/util/backdrop.js","../../js/src/util/focustrap.js","../../js/src/modal.js","../../js/src/offcanvas.js","../../js/src/util/sanitizer.js","../../js/src/util/template-factory.js","../../js/src/tooltip.js","../../js/src/popover.js","../../js/src/scrollspy.js","../../js/src/tab.js","../../js/src/toast.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/stream-http/lib/capability.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/inherits/inherits_browser.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/process/browser.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/process-nextick-args/index.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/isarray/index.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/events/events.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/readable-stream/lib/internal/streams/stream-browser.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/base64-js/index.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/ieee754/index.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/buffer/index.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/safe-buffer/index.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/core-util-is/lib/util.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/readable-stream/lib/internal/streams/BufferList.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/readable-stream/lib/internal/streams/destroy.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/util-deprecate/browser.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/readable-stream/lib/_stream_writable.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/readable-stream/lib/_stream_duplex.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/readable-stream/node_modules/string_decoder/lib/string_decoder.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/readable-stream/lib/_stream_readable.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/readable-stream/lib/_stream_transform.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/readable-stream/lib/_stream_passthrough.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/readable-stream/readable-browser.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/stream-http/lib/response.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/to-arraybuffer/index.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/stream-http/lib/request.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/xtend/immutable.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/builtin-status-codes/browser.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/punycode/punycode.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/url/util.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/querystring-es3/decode.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/querystring-es3/encode.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/querystring-es3/index.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/url/url.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/stream-http/index.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/path-browserify/index.js","../../src/js/core/CoreFeature.js","../../src/js/core/tools/Helpers.js","../../src/js/core/tools/Popup.js","../../src/js/core/Module.js","../../src/js/modules/Accessor/defaults/accessors.js","../../src/js/modules/Accessor/Accessor.js","../../src/js/modules/Ajax/defaults/config.js","../../src/js/modules/Ajax/defaults/urlGenerator.js","../../src/js/modules/Ajax/defaults/loaderPromise.js","../../src/js/modules/Ajax/defaults/contentTypeFormatters.js","../../src/js/modules/Ajax/Ajax.js","../../src/js/modules/Clipboard/defaults/pasteActions.js","../../src/js/modules/Clipboard/defaults/pasteParsers.js","../../src/js/modules/Clipboard/Clipboard.js","../../src/js/modules/ColumnCalcs/CalcComponent.js","../../src/js/core/cell/CellComponent.js","../../src/js/core/cell/Cell.js","../../src/js/core/column/ColumnComponent.js","../../src/js/core/column/defaults/options.js","../../src/js/core/column/Column.js","../../src/js/core/row/RowComponent.js","../../src/js/core/row/Row.js","../../src/js/modules/ColumnCalcs/defaults/calculations.js","../../src/js/modules/ColumnCalcs/ColumnCalcs.js","../../src/js/modules/DataTree/DataTree.js","../../src/js/modules/Download/defaults/downloaders/csv.js","../../src/js/modules/Download/defaults/downloaders/json.js","../../src/js/modules/Download/defaults/downloaders/pdf.js","../../src/js/modules/Download/defaults/downloaders/xlsx.js","../../src/js/modules/Download/defaults/downloaders/html.js","../../src/js/modules/Download/defaults/downloaders/jsonLines.js","../../src/js/modules/Download/defaults/downloaders.js","../../src/js/modules/Download/Download.js","../../src/js/modules/Edit/inputMask.js","../../src/js/modules/Edit/defaults/editors/input.js","../../src/js/modules/Edit/defaults/editors/textarea.js","../../src/js/modules/Edit/defaults/editors/number.js","../../src/js/modules/Edit/defaults/editors/range.js","../../src/js/modules/Edit/defaults/editors/date.js","../../src/js/modules/Edit/defaults/editors/time.js","../../src/js/modules/Edit/defaults/editors/datetime.js","../../src/js/modules/Edit/List.js","../../src/js/modules/Edit/defaults/editors/select.js","../../src/js/modules/Edit/defaults/editors/list.js","../../src/js/modules/Edit/defaults/editors/autocomplete.js","../../src/js/modules/Edit/defaults/editors/star.js","../../src/js/modules/Edit/defaults/editors/progress.js","../../src/js/modules/Edit/defaults/editors/tickCross.js","../../src/js/modules/Edit/defaults/editors.js","../../src/js/modules/Edit/Edit.js","../../src/js/modules/Export/ExportRow.js","../../src/js/modules/Export/ExportColumn.js","../../src/js/modules/Export/Export.js","../../src/js/modules/Filter/defaults/filters.js","../../src/js/modules/Filter/Filter.js","../../src/js/modules/Format/defaults/formatters/plaintext.js","../../src/js/modules/Format/defaults/formatters/html.js","../../src/js/modules/Format/defaults/formatters/textarea.js","../../src/js/modules/Format/defaults/formatters/money.js","../../src/js/modules/Format/defaults/formatters/link.js","../../src/js/modules/Format/defaults/formatters/image.js","../../src/js/modules/Format/defaults/formatters/tickCross.js","../../src/js/modules/Format/defaults/formatters/datetime.js","../../src/js/modules/Format/defaults/formatters/datetimediff.js","../../src/js/modules/Format/defaults/formatters/lookup.js","../../src/js/modules/Format/defaults/formatters/star.js","../../src/js/modules/Format/defaults/formatters/traffic.js","../../src/js/modules/Format/defaults/formatters/progress.js","../../src/js/modules/Format/defaults/formatters/color.js","../../src/js/modules/Format/defaults/formatters/buttonTick.js","../../src/js/modules/Format/defaults/formatters/buttonCross.js","../../src/js/modules/Format/defaults/formatters/rownum.js","../../src/js/modules/Format/defaults/formatters/handle.js","../../src/js/modules/Format/defaults/formatters/responsiveCollapse.js","../../src/js/modules/Format/defaults/formatters/rowSelection.js","../../src/js/modules/Format/defaults/formatters.js","../../src/js/modules/Format/Format.js","../../src/js/modules/FrozenColumns/FrozenColumns.js","../../src/js/modules/FrozenRows/FrozenRows.js","../../src/js/modules/GroupRows/GroupComponent.js","../../src/js/modules/GroupRows/Group.js","../../src/js/modules/GroupRows/GroupRows.js","../../src/js/modules/History/defaults/undoers.js","../../src/js/modules/History/defaults/redoers.js","../../src/js/modules/History/History.js","../../src/js/modules/HtmlTableImport/HtmlTableImport.js","../../src/js/modules/Import/defaults/importers/csv.js","../../src/js/modules/Import/defaults/importers/json.js","../../src/js/modules/Import/defaults/importers/array.js","../../src/js/modules/Import/defaults/importers.js","../../src/js/modules/Import/Import.js","../../src/js/modules/Interaction/Interaction.js","../../src/js/modules/Keybindings/defaults/bindings.js","../../src/js/modules/Keybindings/defaults/actions.js","../../src/js/modules/Keybindings/Keybindings.js","../../src/js/modules/Menu/Menu.js","../../src/js/modules/MoveColumns/MoveColumns.js","../../src/js/modules/MoveRows/MoveRows.js","../../src/js/modules/Mutator/defaults/mutators.js","../../src/js/modules/Mutator/Mutator.js","../../src/js/modules/Page/defaults/pageCounters/rows.js","../../src/js/modules/Page/defaults/pageCounters/pages.js","../../src/js/modules/Page/defaults/pageCounters.js","../../src/js/modules/Page/Page.js","../../src/js/modules/Persistence/defaults/readers.js","../../src/js/modules/Persistence/defaults/writers.js","../../src/js/modules/Persistence/Persistence.js","../../src/js/modules/Popup/Popup.js","../../src/js/modules/Print/Print.js","../../src/js/modules/ReactiveData/ReactiveData.js","../../src/js/modules/ResizeColumns/ResizeColumns.js","../../src/js/modules/ResizeRows/ResizeRows.js","../../src/js/modules/ResizeTable/ResizeTable.js","../../src/js/modules/ResponsiveLayout/ResponsiveLayout.js","../../src/js/modules/SelectRow/SelectRow.js","../../src/js/modules/Sort/defaults/sorters/number.js","../../src/js/modules/Sort/defaults/sorters/string.js","../../src/js/modules/Sort/defaults/sorters/datetime.js","../../src/js/modules/Sort/defaults/sorters/date.js","../../src/js/modules/Sort/defaults/sorters/time.js","../../src/js/modules/Sort/defaults/sorters/boolean.js","../../src/js/modules/Sort/defaults/sorters/array.js","../../src/js/modules/Sort/defaults/sorters/exists.js","../../src/js/modules/Sort/defaults/sorters/alphanum.js","../../src/js/modules/Sort/defaults/sorters.js","../../src/js/modules/Sort/Sort.js","../../src/js/modules/Tooltip/Tooltip.js","../../src/js/modules/Validate/defaults/validators.js","../../src/js/modules/Validate/Validate.js","../../src/js/core/defaults/options.js","../../src/js/core/tools/OptionsList.js","../../src/js/core/rendering/Renderer.js","../../src/js/core/rendering/renderers/BasicHorizontal.js","../../src/js/core/rendering/renderers/VirtualDomHorizontal.js","../../src/js/core/ColumnManager.js","../../src/js/core/rendering/renderers/BasicVertical.js","../../src/js/core/rendering/renderers/VirtualDomVertical.js","../../src/js/core/RowManager.js","../../src/js/core/FooterManager.js","../../src/js/core/tools/InteractionMonitor.js","../../src/js/core/tools/ComponentFunctionBinder.js","../../src/js/core/tools/DataLoader.js","../../src/js/core/tools/ExternalEventBus.js","../../src/js/core/tools/InternalEventBus.js","../../src/js/core/tools/DeprecationAdvisor.js","../../src/js/core/tools/TableRegistry.js","../../src/js/modules/Layout/defaults/modes/fitData.js","../../src/js/modules/Layout/defaults/modes/fitDataGeneral.js","../../src/js/modules/Layout/defaults/modes/fitDataStretch.js","../../src/js/modules/Layout/defaults/modes/fitColumns.js","../../src/js/modules/Layout/defaults/modes.js","../../src/js/modules/Layout/Layout.js","../../src/js/modules/Localize/defaults/langs.js","../../src/js/modules/Localize/Localize.js","../../src/js/modules/Comms/Comms.js","../../src/js/core/tools/ModuleBinder.js","../../src/js/core/tools/Alert.js","../../src/js/core/Tabulator.js","../../src/js/core/TabulatorFull.js","../../src/js/core/row/PseudoRow.js","index.js"],"names":["top","bottom","right","left","auto","basePlacements","start","end","clippingParents","viewport","popper","reference","variationPlacements","reduce","acc","placement","concat","placements","beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite","modifierPhases","getNodeName","element","nodeName","toLowerCase","getWindow","node","window","toString","ownerDocument","defaultView","isElement","OwnElement","Element","isHTMLElement","HTMLElement","isShadowRoot","ShadowRoot","applyStyles","_ref","state","Object","keys","elements","forEach","name","style","styles","attributes","assign","value","removeAttribute","setAttribute","effect","_ref2","initialStyles","position","options","strategy","margin","arrow","styleProperties","hasOwnProperty","property","attribute","enabled","phase","fn","requires","getBasePlacement","split","max","Math","min","round","getBoundingClientRect","includeScale","rect","scaleX","scaleY","offsetHeight","offsetWidth","width","height","x","y","getLayoutRect","clientRect","abs","offsetLeft","offsetTop","contains","parent","child","rootNode","getRootNode","next","isSameNode","parentNode","host","getComputedStyle","isTableElement","indexOf","getDocumentElement","document","documentElement","getParentNode","assignedSlot","getTrueOffsetParent","offsetParent","getContainingBlock","isFirefox","navigator","userAgent","isIE","elementCss","currentNode","css","transform","perspective","contain","willChange","filter","getOffsetParent","getMainAxisFromPlacement","within","mathMax","mathMin","withinMaxClamp","v","getFreshSideObject","mergePaddingObject","paddingObject","expandToHashMap","hashMap","key","toPaddingObject","padding","rects","_state$modifiersData$","arrowElement","popperOffsets","modifiersData","basePlacement","axis","isVertical","len","arrowRect","minProp","maxProp","endDiff","startDiff","arrowOffsetParent","clientSize","clientHeight","clientWidth","centerToReference","center","offset","axisProp","centerOffset","_options$element","querySelector","console","error","join","requiresIfExists","getVariation","unsetSides","roundOffsetsByDPR","win","dpr","devicePixelRatio","mapToStyles","_Object$assign2","popperRect","variation","offsets","gpuAcceleration","adaptive","roundOffsets","isFixed","_offsets$x","_offsets$y","_ref3","hasX","hasY","sideX","sideY","heightProp","widthProp","offsetY","visualViewport","offsetX","commonStyles","_ref4","_Object$assign","computeStyles","_ref5","_options$gpuAccelerat","_options$adaptive","_options$roundOffsets","transitionProperty","some","warn","data","passive","instance","_options$scroll","scroll","_options$resize","resize","scrollParents","scrollParent","addEventListener","update","removeEventListener","hash","getOppositePlacement","replace","matched","getOppositeVariationPlacement","getWindowScroll","scrollLeft","pageXOffset","scrollTop","pageYOffset","getWindowScrollBarX","getViewportRect","html","test","getDocumentRect","_element$ownerDocumen","winScroll","body","scrollWidth","scrollHeight","direction","isScrollParent","_getComputedStyle","overflow","overflowX","overflowY","getScrollParent","listScrollParents","list","isBody","target","updatedList","rectToClientRect","getInnerBoundingClientRect","clientTop","clientLeft","getClientRectFromMixedType","clippingParent","getClippingParents","canEscapeClipping","clipperElement","getClippingRect","boundary","rootBoundary","mainClippingParents","firstClippingParent","clippingRect","accRect","computeOffsets","commonX","commonY","mainAxis","detectOverflow","_options","_options$placement","_options$boundary","_options$rootBoundary","_options$elementConte","elementContext","_options$altBoundary","altBoundary","_options$padding","altContext","clippingClientRect","contextElement","referenceClientRect","popperClientRect","elementClientRect","overflowOffsets","offsetData","multiply","computeAutoPlacement","flipVariations","_options$allowedAutoP","allowedAutoPlacements","allPlacements","allowedPlacements","length","overflows","sort","a","b","getExpandedFallbackPlacements","oppositePlacement","flip","_skip","_options$mainAxis","checkMainAxis","_options$altAxis","altAxis","checkAltAxis","specifiedFallbackPlacements","fallbackPlacements","_options$flipVariatio","preferredPlacement","isBasePlacement","referenceRect","checksMap","Map","makeFallbackChecks","firstFittingPlacement","i","_basePlacement","isStartVariation","mainVariationSide","altVariationSide","checks","push","every","check","set","numberOfChecks","_loop","_i","fittingPlacement","find","get","slice","_ret","reset","getSideOffsets","preventedOffsets","isAnySideFullyClipped","side","hide","preventOverflow","referenceOverflow","popperAltOverflow","referenceClippingOffsets","popperEscapeOffsets","isReferenceHidden","hasPopperEscaped","distanceAndSkiddingToXY","invertDistance","skidding","distance","_options$offset","_data$state$placement","getAltAxis","_options$tether","tether","_options$tetherOffset","tetherOffset","tetherOffsetValue","normalizedTetherOffsetValue","offsetModifierState","_offsetModifierState$","mainSide","altSide","additive","minLen","maxLen","arrowPaddingObject","arrowPaddingMin","arrowPaddingMax","arrowLen","minOffset","maxOffset","clientOffset","offsetModifierValue","tetherMin","tetherMax","preventedOffset","_offsetModifierState$2","_mainSide","_altSide","_offset","_len","_min","_max","isOriginSide","_offsetModifierValue","_tetherMin","_tetherMax","_preventedOffset","getHTMLElementScroll","getNodeScroll","isElementScaled","getCompositeRect","elementOrVirtualElement","isOffsetParentAnElement","offsetParentIsScaled","order","modifiers","map","visited","Set","result","modifier","add","dep","has","depModifier","orderModifiers","orderedModifiers","debounce","pending","Promise","resolve","then","undefined","format","str","arguments","args","Array","_key","p","c","INVALID_MODIFIER_ERROR","MISSING_DEPENDENCY_ERROR","VALID_PROPERTIES","validateModifiers","index","self","String","isArray","s","requirement","mod","uniqueBy","arr","identifiers","item","identifier","mergeByName","merged","current","existing","INVALID_ELEMENT_ERROR","INFINITE_LOOP_ERROR","DEFAULT_OPTIONS","areValidElements","popperGenerator","generatorOptions","_generatorOptions","_generatorOptions$def","defaultModifiers","_generatorOptions$def2","defaultOptions","createPopper","effectCleanupFns","isDestroyed","setOptions","setOptionsAction","cleanupModifierEffects","m","flipModifier","marginTop","marginRight","marginBottom","marginLeft","parseFloat","runModifierEffects","forceUpdate","_state$elements","__debug_loops__","_state$orderedModifie","_state$orderedModifie2","destroy","onFirstUpdate","_ref3$options","cleanupFn","noopFn","eventListeners","MAX_UID","MILLISECONDS_MULTIPLIER","TRANSITION_END","toType","object","prototype","call","match","getUID","prefix","floor","random","getElementById","getSelector","selector","getAttribute","hrefAttribute","includes","startsWith","trim","getSelectorFromElement","getElementFromSelector","getTransitionDurationFromElement","transitionDuration","transitionDelay","floatTransitionDuration","Number","floatTransitionDelay","triggerTransitionEnd","dispatchEvent","Event","jquery","nodeType","getElement","isVisible","getClientRects","elementIsVisible","getPropertyValue","closedDetails","closest","summary","isDisabled","Node","ELEMENT_NODE","classList","disabled","hasAttribute","findShadowRoot","attachShadow","root","noop","reflow","getjQuery","jQuery","DOMContentLoadedCallbacks","onDOMContentLoaded","callback","readyState","isRTL","dir","defineJQueryPlugin","plugin","$","NAME","JQUERY_NO_CONFLICT","jQueryInterface","Constructor","noConflict","execute","executeAfterTransition","transitionElement","waitForTransition","durationPadding","emulatedDuration","called","handler","setTimeout","getNextActiveElement","activeElement","shouldGetNext","isCycleAllowed","listLength","namespaceRegex","stripNameRegex","stripUidRegex","eventRegistry","uidEvent","customEvents","mouseenter","mouseleave","nativeEvents","makeEventUid","uid","getElementEvents","bootstrapHandler","event","hydrateObj","delegateTarget","oneOff","EventHandler","off","type","apply","bootstrapDelegationHandler","domElements","querySelectorAll","domElement","findHandler","events","callable","delegationSelector","values","normalizeParameters","originalTypeEvent","delegationFunction","isDelegated","typeEvent","getTypeEvent","addHandler","wrapFunction","relatedTarget","handlers","previousFunction","removeHandler","Boolean","removeNamespacedHandlers","namespace","storeElementEvent","handlerKey","on","one","inNamespace","isNamespace","elementEvent","keyHandlers","trigger","jQueryEvent","bubbles","nativeDispatch","defaultPrevented","isPropagationStopped","isImmediatePropagationStopped","isDefaultPrevented","evt","cancelable","preventDefault","obj","meta","entries","defineProperty","configurable","elementMap","instanceMap","size","from","remove","delete","normalizeData","JSON","parse","decodeURIComponent","normalizeDataKey","chr","Manipulator","setDataAttribute","removeDataAttribute","getDataAttributes","bsKeys","dataset","pureKey","charAt","getDataAttribute","Config","Default","DefaultType","Error","_getConfig","config","_mergeConfigObj","_configAfterMerge","_typeCheckConfig","jsonConfig","constructor","configTypes","expectedTypes","valueType","RegExp","TypeError","toUpperCase","VERSION","BaseComponent","_element","_config","Data","DATA_KEY","dispose","EVENT_KEY","propertyName","getOwnPropertyNames","_queueCallback","isAnimated","getInstance","getOrCreateInstance","eventName","enableDismissTrigger","component","method","clickEvent","tagName","EVENT_CLOSE","EVENT_CLOSED","CLASS_NAME_FADE","CLASS_NAME_SHOW","Alert","close","closeEvent","_destroyElement","each","DATA_API_KEY","CLASS_NAME_ACTIVE","SELECTOR_DATA_TOGGLE","EVENT_CLICK_DATA_API","Button","toggle","button","SelectorEngine","findOne","children","matches","parents","ancestor","prev","previous","previousElementSibling","nextElementSibling","focusableChildren","focusables","el","EVENT_TOUCHSTART","EVENT_TOUCHMOVE","EVENT_TOUCHEND","EVENT_POINTERDOWN","EVENT_POINTERUP","POINTER_TYPE_TOUCH","POINTER_TYPE_PEN","CLASS_NAME_POINTER_EVENT","SWIPE_THRESHOLD","endCallback","leftCallback","rightCallback","Swipe","isSupported","_deltaX","_supportPointerEvents","PointerEvent","_initEvents","_start","touches","clientX","_eventIsPointerPenTouch","_end","_handleSwipe","_move","absDeltaX","pointerType","maxTouchPoints","ARROW_LEFT_KEY","ARROW_RIGHT_KEY","TOUCHEVENT_COMPAT_WAIT","ORDER_NEXT","ORDER_PREV","DIRECTION_LEFT","DIRECTION_RIGHT","EVENT_SLIDE","EVENT_SLID","EVENT_KEYDOWN","EVENT_MOUSEENTER","EVENT_MOUSELEAVE","EVENT_DRAG_START","EVENT_LOAD_DATA_API","CLASS_NAME_CAROUSEL","CLASS_NAME_SLIDE","CLASS_NAME_END","CLASS_NAME_START","CLASS_NAME_NEXT","CLASS_NAME_PREV","SELECTOR_ACTIVE","SELECTOR_ITEM","SELECTOR_ACTIVE_ITEM","SELECTOR_ITEM_IMG","SELECTOR_INDICATORS","SELECTOR_DATA_SLIDE","SELECTOR_DATA_RIDE","KEY_TO_DIRECTION","interval","keyboard","pause","ride","touch","wrap","Carousel","_interval","_activeElement","_isSliding","touchTimeout","_swipeHelper","_indicatorsElement","_addEventListeners","cycle","_slide","nextWhenVisible","hidden","_clearInterval","_updateInterval","setInterval","_maybeEnableCycle","to","items","_getItems","activeIndex","_getItemIndex","_getActive","defaultInterval","_keydown","_addTouchEventListeners","img","endCallBack","clearTimeout","swipeConfig","_directionToOrder","_setActiveIndicatorElement","activeIndicator","newActiveIndicator","elementInterval","parseInt","isNext","nextElement","nextElementIndex","triggerEvent","_orderToDirection","slideEvent","isCycling","directionalClassName","orderClassName","completeCallBack","_isAnimated","clearInterval","carousel","slideIndex","carousels","EVENT_SHOW","EVENT_SHOWN","EVENT_HIDE","EVENT_HIDDEN","CLASS_NAME_COLLAPSE","CLASS_NAME_COLLAPSING","CLASS_NAME_COLLAPSED","CLASS_NAME_DEEPER_CHILDREN","CLASS_NAME_HORIZONTAL","WIDTH","HEIGHT","SELECTOR_ACTIVES","Collapse","_isTransitioning","_triggerArray","toggleList","elem","filterElement","foundElement","_initializeChildren","_addAriaAndCollapsedClass","_isShown","show","activeChildren","_getFirstLevelChildren","startEvent","activeInstance","dimension","_getDimension","complete","capitalizedDimension","scrollSize","selected","triggerArray","isOpen","selectorElements","ESCAPE_KEY","TAB_KEY","ARROW_UP_KEY","ARROW_DOWN_KEY","RIGHT_MOUSE_BUTTON","EVENT_KEYDOWN_DATA_API","EVENT_KEYUP_DATA_API","CLASS_NAME_DROPUP","CLASS_NAME_DROPEND","CLASS_NAME_DROPSTART","CLASS_NAME_DROPUP_CENTER","CLASS_NAME_DROPDOWN_CENTER","SELECTOR_DATA_TOGGLE_SHOWN","SELECTOR_MENU","SELECTOR_NAVBAR","SELECTOR_NAVBAR_NAV","SELECTOR_VISIBLE_ITEMS","PLACEMENT_TOP","PLACEMENT_TOPEND","PLACEMENT_BOTTOM","PLACEMENT_BOTTOMEND","PLACEMENT_RIGHT","PLACEMENT_LEFT","PLACEMENT_TOPCENTER","PLACEMENT_BOTTOMCENTER","autoClose","display","popperConfig","Dropdown","_popper","_parent","_menu","_inNavbar","_detectNavbar","showEvent","_createPopper","focus","_completeHide","hideEvent","Popper","referenceElement","_getPopperConfig","_getPlacement","parentDropdown","isEnd","_getOffset","popperData","defaultBsPopperConfig","_selectMenuItem","clearMenus","openToggles","context","composedPath","isMenuTarget","dataApiKeydownHandler","isInput","isEscapeEvent","isUpOrDownEvent","getToggleButton","stopPropagation","SELECTOR_FIXED_CONTENT","SELECTOR_STICKY_CONTENT","PROPERTY_PADDING","PROPERTY_MARGIN","ScrollBarHelper","getWidth","documentWidth","innerWidth","_disableOverFlow","_setElementAttributes","calculatedValue","_resetElementAttributes","isOverflowing","_saveInitialAttribute","styleProperty","scrollbarWidth","manipulationCallBack","setProperty","_applyManipulationCallback","actualValue","removeProperty","callBack","sel","EVENT_MOUSEDOWN","className","clickCallback","rootElement","Backdrop","_isAppended","_append","_getElement","_emulateAnimation","backdrop","createElement","append","EVENT_FOCUSIN","EVENT_KEYDOWN_TAB","TAB_NAV_FORWARD","TAB_NAV_BACKWARD","autofocus","trapElement","FocusTrap","_isActive","_lastTabNavDirection","activate","_handleFocusin","_handleKeydown","deactivate","shiftKey","EVENT_HIDE_PREVENTED","EVENT_RESIZE","EVENT_MOUSEDOWN_DISMISS","EVENT_KEYDOWN_DISMISS","CLASS_NAME_OPEN","CLASS_NAME_STATIC","OPEN_SELECTOR","SELECTOR_DIALOG","SELECTOR_MODAL_BODY","Modal","_dialog","_backdrop","_initializeBackDrop","_focustrap","_initializeFocusTrap","_scrollBar","_adjustDialog","_showElement","_hideModal","htmlElement","handleUpdate","modalBody","transitionComplete","_triggerBackdropTransition","currentTarget","_resetAdjustments","isModalOverflowing","initialOverflowY","isBodyOverflowing","paddingLeft","paddingRight","alreadyOpen","CLASS_NAME_SHOWING","CLASS_NAME_HIDING","CLASS_NAME_BACKDROP","Offcanvas","blur","completeCallback","uriAttributes","ARIA_ATTRIBUTE_PATTERN","SAFE_URL_PATTERN","DATA_URL_PATTERN","allowedAttribute","allowedAttributeList","attributeName","nodeValue","attributeRegex","regex","DefaultAllowlist","area","br","col","code","div","em","hr","h1","h2","h3","h4","h5","h6","li","ol","pre","small","span","sub","sup","strong","u","ul","sanitizeHtml","unsafeHtml","allowList","sanitizeFunction","domParser","DOMParser","createdDocument","parseFromString","elementName","attributeList","allowedAttributes","innerHTML","content","extraClass","sanitize","sanitizeFn","template","DefaultContentType","entry","TemplateFactory","getContent","_resolvePossibleFunction","hasContent","changeContent","_checkContent","toHtml","templateWrapper","_maybeSanitize","text","_setContent","arg","templateElement","_putElementInTemplate","textContent","DISALLOWED_ATTRIBUTES","CLASS_NAME_MODAL","SELECTOR_TOOLTIP_INNER","SELECTOR_MODAL","EVENT_MODAL_HIDE","TRIGGER_HOVER","TRIGGER_FOCUS","TRIGGER_CLICK","TRIGGER_MANUAL","EVENT_INSERTED","EVENT_CLICK","EVENT_FOCUSOUT","AttachmentMap","AUTO","TOP","RIGHT","BOTTOM","LEFT","animation","container","customClass","delay","title","Tooltip","_isEnabled","_timeout","_isHovered","_activeTrigger","_templateFactory","_newContent","tip","_setListeners","enable","disable","toggleEnabled","_initializeOnDelegatedTarget","click","_isWithActiveTrigger","_enter","_leave","_hideModalHandler","_disposePopper","_isWithContent","shadowRoot","isInTheDom","_getTipElement","previousHoverState","_getTitle","_createTipElement","_getContentForTemplate","_getTemplateFactory","tipId","setContent","originalTitle","_getDelegateConfig","attachment","triggers","eventIn","eventOut","_fixTitle","_setTimeout","timeout","dataAttributes","dataAttribute","SELECTOR_TITLE","SELECTOR_CONTENT","Popover","_getContent","EVENT_ACTIVATE","CLASS_NAME_DROPDOWN_ITEM","SELECTOR_DATA_SPY","SELECTOR_TARGET_LINKS","SELECTOR_NAV_LIST_GROUP","SELECTOR_NAV_LINKS","SELECTOR_NAV_ITEMS","SELECTOR_LIST_ITEMS","SELECTOR_LINK_ITEMS","SELECTOR_DROPDOWN","SELECTOR_DROPDOWN_TOGGLE","rootMargin","smoothScroll","ScrollSpy","_targetLinks","_observableSections","_rootElement","_activeTarget","_observer","_previousScrollData","visibleEntryTop","parentScrollTop","refresh","_initializeTargetsAndObservables","_maybeEnableSmoothScroll","disconnect","_getNewObserver","section","observe","observableSection","scrollTo","behavior","threshold","_getRootMargin","IntersectionObserver","_observerCallback","targetElement","id","_process","userScrollsDown","isIntersecting","_clearActiveClass","entryIsLowerThanPrevious","targetLinks","anchor","_activateParents","listGroup","activeNodes","spy","CLASS_DROPDOWN","SELECTOR_DROPDOWN_MENU","SELECTOR_DROPDOWN_ITEM","NOT_SELECTOR_DROPDOWN_TOGGLE","SELECTOR_TAB_PANEL","SELECTOR_OUTER","SELECTOR_INNER","SELECTOR_INNER_ELEM","SELECTOR_DATA_TOGGLE_ACTIVE","Tab","_setInitialAttributes","_getChildren","innerElem","_elemIsActive","active","_getActiveElem","_deactivate","_activate","relatedElem","_toggleDropDown","nextActiveElement","_setAttributeIfNotExists","_setInitialAttributesOnChild","_getInnerElement","isActive","outerElem","_getOuterElement","_setInitialAttributesOnTargetPanel","open","EVENT_MOUSEOVER","EVENT_MOUSEOUT","CLASS_NAME_HIDE","autohide","Toast","_hasMouseInteraction","_hasKeyboardInteraction","_clearTimeout","_maybeScheduleHide","isShown","_onInteraction","isInteracting","process","module","exports","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","e","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","run","nextTick","Item","array","env","argv","version","versions","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","R","Reflect","ReflectApply","receiver","Function","ReflectOwnKeys","ownKeys","getOwnPropertySymbols","ProcessEmitWarning","warning","NumberIsNaN","isNaN","EventEmitter","init","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","enumerable","RangeError","getPrototypeOf","create","setMaxListeners","n","_getMaxListeners","that","getMaxListeners","doError","er","err","message","arrayClone","_addListener","prepend","newListener","unshift","warned","w","emitter","count","onceWrapper","fired","wrapFn","_onceWrap","wrapped","bind","originalListener","shift","spliceOne","_listeners","unwrap","evlistener","unwrapListeners","rawListeners","listenerCount","eventNames","copy","pop","ret","reject","errorListener","resolver","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","flags","wrapListener","pna","require","Writable","WriteReq","chunk","encoding","cb","CorkedRequest","_this","finish","onCorkedFinish","asyncWrite","setImmediate","Duplex","WritableState","util","inherits","internalUtil","deprecate","Stream","Buffer","OurUint8Array","global","Uint8Array","_uint8ArrayToBuffer","_isUint8Array","isBuffer","destroyImpl","nop","stream","isDuplex","objectMode","writableObjectMode","hwm","highWaterMark","writableHwm","writableHighWaterMark","defaultHwm","finalCalled","needDrain","ending","ended","finished","destroyed","noDecode","decodeStrings","defaultEncoding","writing","corked","sync","bufferProcessing","onwrite","writecb","writelen","bufferedRequest","lastBufferedRequest","pendingcb","prefinished","errorEmitted","bufferedRequestCount","corkedRequestsFree","getBuffer","out","_","realHasInstance","Symbol","hasInstance","_writableState","writable","_write","writev","_writev","_destroy","final","_final","pipe","writeAfterEnd","validChunk","valid","isBuf","writeOrBuffer","cork","uncork","clearBuffer","setDefaultEncoding","decodeChunk","newChunk","last","doWrite","onwriteError","finishMaybe","onwriteStateUpdate","needFinish","onwriteDrain","l","buffer","holder","allBuffers","endWritable","callFinal","prefinish","need","corkReq","_undestroy","undestroy","extend","source","prop","qs","sep","eq","regexp","maxKeys","idx","kstr","vstr","k","substr","xs","stringifyPrimitive","isFinite","objectKeys","ks","encodeURIComponent","f","res","decode","encode","stringify","generateParamsList","defaultURLGenerator","List","Edit","textarea","tickCross","datetime","star","progress","csv","json","Popup","number","date","time","RendererVirtualDomHorizontal","RendererBasicHorizontal","RendererVirtualDomVertical","RendererBasicVertical","InteractionMonitor","empty","customer_id","first_name","last_name","capitalizer","attr","appendTo","selectedTweezers","val","prepareObj","phone_number","eye_shape","lash_type","tweezers","brand","reqId","getReqId","row","getData","ID","$userForm","submit","ajax","url","contentType","statusCode","alert","str2","deleteCustomer","deleteApp","updateCustomer","updateApp","tableCreation","tabledata","tableChooser","addClass","table","Tabulator","columns","field","visible","layout","pagination","selectable","paginationSize","paginationInitialPage","rowFormatter","textColor","rowContextMenu","label","action","confirm","separator","appointment_id","lash_style","curl","thickness","glue","bonder","primer","cleanser","table2","compare","customId","fail","$searchForm","searchText","$searchForm2","$userForm2","is"],"mappings":"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CAAvDI;IACAA,YAAY,CAAC8B,EAAb9B,CAAgB,KAAK4F,QAArB5F,EAA+BigB,cAA/BjgB,EAA+CJ,KAAK,IAAI,KAAKspB,cAAL,CAAoBtpB,KAApB,EAA2B,KAA3B,CAAxDI;EACD;;EAED+oB,aAAa,GAAG;IACd3a,YAAY,CAAC,KAAK2S,QAAN,CAAZ3S;IACA,KAAK2S,QAAL,GAAgB,IAAhB;EA1I8B,CAAA,CAAA;;;EA8IV,OAAfjjB,eAAe,CAACgH,MAAD,EAAS;IAC7B,OAAO,KAAKwC,IAAL,CAAU,YAAY;MAC3B,MAAM9e,IAAI,GAAGogC,KAAK,CAACriB,mBAANqiB,CAA0B,IAA1BA,EAAgC9jB,MAAhC8jB,CAAb;;MAEA,IAAI,OAAO9jB,MAAP,KAAkB,QAAtB,EAAgC;QAC9B,IAAI,OAAOtc,IAAI,CAACsc,MAAD,CAAX,KAAwB,WAA5B,EAAyC;UACvC,MAAM,IAAIU,SAAJ,CAAkCV,oBAAAA,MAAO,GAAzC,CAAN;QACD;;QAEDtc,IAAI,CAACsc,MAAD,CAAJtc,CAAa,IAAbA;MACD;IATI,CAAA,CAAP;EAWD;;AA1J+B;AA6JlC;AACA;AACA;;;;AAEAie,oBAAoB,CAACmiB,KAAD,CAApBniB;AAEA;AACA;AACA;;AAEAhJ,kBAAkB,CAACmrB,KAAD,CAAlBnrB;;;;;ACzNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC3BA;AACA,IAAI2rB,OAAO,GAAGC,MAAM,CAACC,OAAP,GAAiB,EAA/B,EAEA;AACA;AACA;AACA;;AAEA,IAAIC,gBAAJ;AACA,IAAIC,kBAAJ;;AAEA,SAASC,gBAAT,GAA4B;EACxB,MAAM,IAAI7kB,KAAJ,CAAU,iCAAV,CAAN;AACH;;AACD,SAAS8kB,mBAAT,GAAgC;EAC5B,MAAM,IAAI9kB,KAAJ,CAAU,mCAAV,CAAN;AACH;;AACA,aAAY;EACT,IAAI;IACA,IAAI,OAAOnG,UAAP,KAAsB,UAA1B,EAAsC;MAClC8qB,gBAAgB,GAAG9qB,UAAnB;IACH,CAFD,MAEO;MACH8qB,gBAAgB,GAAGE,gBAAnB;IACH;EACJ,CAND,CAME,OAAOE,CAAP,EAAU;IACRJ,gBAAgB,GAAGE,gBAAnB;EACH;;EACD,IAAI;IACA,IAAI,OAAOrb,YAAP,KAAwB,UAA5B,EAAwC;MACpCob,kBAAkB,GAAGpb,YAArB;IACH,CAFD,MAEO;MACHob,kBAAkB,GAAGE,mBAArB;IACH;EACJ,CAND,CAME,OAAOC,CAAP,EAAU;IACRH,kBAAkB,GAAGE,mBAArB;EACH;AACJ,CAnBA,GAAD;;AAoBA,SAASE,UAAT,CAAoBC,GAApB,EAAyB;EACrB,IAAIN,gBAAgB,KAAK9qB,UAAzB,EAAqC;IACjC;IACA,OAAOA,UAAU,CAACorB,GAAD,EAAM,CAAN,CAAjB;EACH,CAJoB,CAKrB;;;EACA,IAAI,CAACN,gBAAgB,KAAKE,gBAArB,IAAyC,CAACF,gBAA3C,KAAgE9qB,UAApE,EAAgF;IAC5E8qB,gBAAgB,GAAG9qB,UAAnB;IACA,OAAOA,UAAU,CAACorB,GAAD,EAAM,CAAN,CAAjB;EACH;;EACD,IAAI;IACA;IACA,OAAON,gBAAgB,CAACM,GAAD,EAAM,CAAN,CAAvB;EACH,CAHD,CAGE,OAAMF,CAAN,EAAQ;IACN,IAAI;MACA;MACA,OAAOJ,gBAAgB,CAACpvB,IAAjB,CAAsB,IAAtB,EAA4B0vB,GAA5B,EAAiC,CAAjC,CAAP;IACH,CAHD,CAGE,OAAMF,CAAN,EAAQ;MACN;MACA,OAAOJ,gBAAgB,CAACpvB,IAAjB,CAAsB,IAAtB,EAA4B0vB,GAA5B,EAAiC,CAAjC,CAAP;IACH;EACJ;AAGJ;;AACD,SAASC,eAAT,CAAyBC,MAAzB,EAAiC;EAC7B,IAAIP,kBAAkB,KAAKpb,YAA3B,EAAyC;IACrC;IACA,OAAOA,YAAY,CAAC2b,MAAD,CAAnB;EACH,CAJ4B,CAK7B;;;EACA,IAAI,CAACP,kBAAkB,KAAKE,mBAAvB,IAA8C,CAACF,kBAAhD,KAAuEpb,YAA3E,EAAyF;IACrFob,kBAAkB,GAAGpb,YAArB;IACA,OAAOA,YAAY,CAAC2b,MAAD,CAAnB;EACH;;EACD,IAAI;IACA;IACA,OAAOP,kBAAkB,CAACO,MAAD,CAAzB;EACH,CAHD,CAGE,OAAOJ,CAAP,EAAS;IACP,IAAI;MACA;MACA,OAAOH,kBAAkB,CAACrvB,IAAnB,CAAwB,IAAxB,EAA8B4vB,MAA9B,CAAP;IACH,CAHD,CAGE,OAAOJ,CAAP,EAAS;MACP;MACA;MACA,OAAOH,kBAAkB,CAACrvB,IAAnB,CAAwB,IAAxB,EAA8B4vB,MAA9B,CAAP;IACH;EACJ;AAIJ;;AACD,IAAIC,KAAK,GAAG,EAAZ;AACA,IAAIC,QAAQ,GAAG,KAAf;AACA,IAAIC,YAAJ;AACA,IAAIC,UAAU,GAAG,CAAC,CAAlB;;AAEA,SAASC,eAAT,GAA2B;EACvB,IAAI,CAACH,QAAD,IAAa,CAACC,YAAlB,EAAgC;IAC5B;EACH;;EACDD,QAAQ,GAAG,KAAX;;EACA,IAAIC,YAAY,CAACj8B,MAAjB,EAAyB;IACrB+7B,KAAK,GAAGE,YAAY,CAAC9tC,MAAb,CAAoB4tC,KAApB,CAAR;EACH,CAFD,MAEO;IACHG,UAAU,GAAG,CAAC,CAAd;EACH;;EACD,IAAIH,KAAK,CAAC/7B,MAAV,EAAkB;IACdo8B,UAAU;EACb;AACJ;;AAED,SAASA,UAAT,GAAsB;EAClB,IAAIJ,QAAJ,EAAc;IACV;EACH;;EACD,IAAI9G,OAAO,GAAGyG,UAAU,CAACQ,eAAD,CAAxB;EACAH,QAAQ,GAAG,IAAX;EAEA,IAAIplC,GAAG,GAAGmlC,KAAK,CAAC/7B,MAAhB;;EACA,OAAMpJ,GAAN,EAAW;IACPqlC,YAAY,GAAGF,KAAf;IACAA,KAAK,GAAG,EAAR;;IACA,OAAO,EAAEG,UAAF,GAAetlC,GAAtB,EAA2B;MACvB,IAAIqlC,YAAJ,EAAkB;QACdA,YAAY,CAACC,UAAD,CAAZ,CAAyBG,GAAzB;MACH;IACJ;;IACDH,UAAU,GAAG,CAAC,CAAd;IACAtlC,GAAG,GAAGmlC,KAAK,CAAC/7B,MAAZ;EACH;;EACDi8B,YAAY,GAAG,IAAf;EACAD,QAAQ,GAAG,KAAX;EACAH,eAAe,CAAC3G,OAAD,CAAf;AACH;;AAEDiG,OAAO,CAACmB,QAAR,GAAmB,UAAUV,GAAV,EAAe;EAC9B,IAAI7zB,IAAI,GAAG,IAAIC,KAAJ,CAAUF,SAAS,CAAC9H,MAAV,GAAmB,CAA7B,CAAX;;EACA,IAAI8H,SAAS,CAAC9H,MAAV,GAAmB,CAAvB,EAA0B;IACtB,KAAK,IAAIwB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsG,SAAS,CAAC9H,MAA9B,EAAsCwB,CAAC,EAAvC,EAA2C;MACvCuG,IAAI,CAACvG,CAAC,GAAG,CAAL,CAAJ,GAAcsG,SAAS,CAACtG,CAAD,CAAvB;IACH;EACJ;;EACDu6B,KAAK,CAACj6B,IAAN,CAAW,IAAIy6B,IAAJ,CAASX,GAAT,EAAc7zB,IAAd,CAAX;;EACA,IAAIg0B,KAAK,CAAC/7B,MAAN,KAAiB,CAAjB,IAAsB,CAACg8B,QAA3B,EAAqC;IACjCL,UAAU,CAACS,UAAD,CAAV;EACH;AACJ,CAXD,EAaA;;;AACA,SAASG,IAAT,CAAcX,GAAd,EAAmBY,KAAnB,EAA0B;EACtB,KAAKZ,GAAL,GAAWA,GAAX;EACA,KAAKY,KAAL,GAAaA,KAAb;AACH;;AACDD,IAAI,CAACtwB,SAAL,CAAeowB,GAAf,GAAqB,YAAY;EAC7B,KAAKT,GAAL,CAAS1pB,KAAT,CAAe,IAAf,EAAqB,KAAKsqB,KAA1B;AACH,CAFD;;AAGArB,OAAO,CAACxI,KAAR,GAAgB,SAAhB;AAEAwI,OAAO,CAACsB,GAAR,GAAc,EAAd;AACAtB,OAAO,CAACuB,IAAR,GAAe,EAAf;AACAvB,OAAO,CAACwB,OAAR,GAAkB,EAAlB,EAAsB;;AACtBxB,OAAO,CAACyB,QAAR,GAAmB,EAAnB;;AAEA,SAAS9tB,IAAT,GAAgB,CAAE;;AAElBqsB,OAAO,CAACtnB,EAAR,GAAa/E,IAAb;AACAqsB,OAAO,CAAC0B,WAAR,GAAsB/tB,IAAtB;AACAqsB,OAAO,CAAC2B,IAAR,GAAehuB,IAAf;AACAqsB,OAAO,CAACnpB,GAAR,GAAclD,IAAd;AACAqsB,OAAO,CAAC4B,cAAR,GAAyBjuB,IAAzB;AACAqsB,OAAO,CAAC6B,kBAAR,GAA6BluB,IAA7B;AACAqsB,OAAO,CAAC8B,IAAR,GAAenuB,IAAf;AACAqsB,OAAO,CAAC+B,eAAR,GAA0BpuB,IAA1B;AACAqsB,OAAO,CAACgC,mBAAR,GAA8BruB,IAA9B;;AAEAqsB,OAAO,CAACiC,SAAR,GAAoB,UAAU7sC,IAAV,EAAgB;EAAE,OAAO,EAAP;AAAW,CAAjD;;AAEA4qC,OAAO,CAACkC,OAAR,GAAkB,UAAU9sC,IAAV,EAAgB;EAC9B,MAAM,IAAIomB,KAAJ,CAAU,kCAAV,CAAN;AACH,CAFD;;AAIAwkB,OAAO,CAACmC,GAAR,GAAc,YAAY;EAAE,OAAO,GAAP;AAAY,CAAxC;;AACAnC,OAAO,CAACoC,KAAR,GAAgB,UAAUhuB,GAAV,EAAe;EAC3B,MAAM,IAAIoH,KAAJ,CAAU,gCAAV,CAAN;AACH,CAFD;;AAGAwkB,OAAO,CAACqC,KAAR,GAAgB,YAAW;EAAE,OAAO,CAAP;AAAW,CAAxC;;;ACvLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,IAAIC,CAAC,GAAG,OAAOC,OAAP,KAAmB,QAAnB,GAA8BA,OAA9B,GAAwC,IAAhD;AACA,IAAIC,YAAY,GAAGF,CAAC,IAAI,OAAOA,CAAC,CAACvrB,KAAT,KAAmB,UAAxB,GACfurB,CAAC,CAACvrB,KADa,GAEf,SAASyrB,YAAT,CAAsB1gC,MAAtB,EAA8B2gC,QAA9B,EAAwC71B,IAAxC,EAA8C;EAC9C,OAAO81B,QAAQ,CAAC5xB,SAAT,CAAmBiG,KAAnB,CAAyBhG,IAAzB,CAA8BjP,MAA9B,EAAsC2gC,QAAtC,EAAgD71B,IAAhD,CAAP;AACD,CAJH;AAMA,IAAI+1B,cAAJ;;AACA,IAAIL,CAAC,IAAI,OAAOA,CAAC,CAACM,OAAT,KAAqB,UAA9B,EAA0C;EACxCD,cAAc,GAAGL,CAAC,CAACM,OAAnB;AACD,CAFD,MAEO,IAAI5tC,MAAM,CAAC6tC,qBAAX,EAAkC;EACvCF,cAAc,GAAG,SAASA,cAAT,CAAwB7gC,MAAxB,EAAgC;IAC/C,OAAO9M,MAAM,CAAC+nB,mBAAP,CAA2Bjb,MAA3B,EACJ9O,MADI,CACGgC,MAAM,CAAC6tC,qBAAP,CAA6B/gC,MAA7B,CADH,CAAP;EAED,CAHD;AAID,CALM,MAKA;EACL6gC,cAAc,GAAG,SAASA,cAAT,CAAwB7gC,MAAxB,EAAgC;IAC/C,OAAO9M,MAAM,CAAC+nB,mBAAP,CAA2Bjb,MAA3B,CAAP;EACD,CAFD;AAGD;;AAED,SAASghC,kBAAT,CAA4BC,OAA5B,EAAqC;EACnC,IAAIrmC,OAAO,IAAIA,OAAO,CAACyC,IAAvB,EAA6BzC,OAAO,CAACyC,IAAR,CAAa4jC,OAAb;AAC9B;;AAED,IAAIC,WAAW,GAAG7wB,MAAM,CAAC8wB,KAAP,IAAgB,SAASD,WAAT,CAAqBvtC,KAArB,EAA4B;EAC5D,OAAOA,KAAK,KAAKA,KAAjB;AACD,CAFD;;AAIA,SAASytC,YAAT,GAAwB;EACtBA,YAAY,CAACC,IAAb,CAAkBpyB,IAAlB,CAAuB,IAAvB;AACD;;AACDkvB,MAAM,CAACC,OAAP,GAAiBgD,YAAjB;AACAjD,MAAM,CAACC,OAAP,CAAeyB,IAAf,GAAsBA,IAAtB,EAEA;;AACAuB,YAAY,CAACA,YAAb,GAA4BA,YAA5B;AAEAA,YAAY,CAACpyB,SAAb,CAAuBsyB,OAAvB,GAAiC52B,SAAjC;AACA02B,YAAY,CAACpyB,SAAb,CAAuBuyB,YAAvB,GAAsC,CAAtC;AACAH,YAAY,CAACpyB,SAAb,CAAuBwyB,aAAvB,GAAuC92B,SAAvC,EAEA;AACA;;AACA,IAAI+2B,mBAAmB,GAAG,EAA1B;;AAEA,SAASC,aAAT,CAAuBC,QAAvB,EAAiC;EAC/B,IAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;IAClC,MAAM,IAAIrnB,SAAJ,CAAc,qEAAqE,OAAOqnB,QAA1F,CAAN;EACD;AACF;;AAEDzuC,MAAM,CAAC8kB,cAAP,CAAsBopB,YAAtB,EAAoC,qBAApC,EAA2D;EACzDQ,UAAU,EAAE,IAD6C;EAEzDt8B,GAAG,EAAE,YAAW;IACd,OAAOm8B,mBAAP;EACD,CAJwD;EAKzDz8B,GAAG,EAAE,UAASgvB,GAAT,EAAc;IACjB,IAAI,OAAOA,GAAP,KAAe,QAAf,IAA2BA,GAAG,GAAG,CAAjC,IAAsCkN,WAAW,CAAClN,GAAD,CAArD,EAA4D;MAC1D,MAAM,IAAI6N,UAAJ,CAAe,oGAAoG7N,GAApG,GAA0G,GAAzH,CAAN;IACD;;IACDyN,mBAAmB,GAAGzN,GAAtB;EACD;AAVwD,CAA3D;;AAaAoN,YAAY,CAACC,IAAb,GAAoB,YAAW;EAE7B,IAAI,KAAKC,OAAL,KAAiB52B,SAAjB,IACA,KAAK42B,OAAL,KAAiBpuC,MAAM,CAAC4uC,cAAP,CAAsB,IAAtB,EAA4BR,OADjD,EAC0D;IACxD,KAAKA,OAAL,GAAepuC,MAAM,CAAC6uC,MAAP,CAAc,IAAd,CAAf;IACA,KAAKR,YAAL,GAAoB,CAApB;EACD;;EAED,KAAKC,aAAL,GAAqB,KAAKA,aAAL,IAAsB92B,SAA3C;AACD,CATD,EAWA;AACA;;;AACA02B,YAAY,CAACpyB,SAAb,CAAuBgzB,eAAvB,GAAyC,SAASA,eAAT,CAAyBC,CAAzB,EAA4B;EACnE,IAAI,OAAOA,CAAP,KAAa,QAAb,IAAyBA,CAAC,GAAG,CAA7B,IAAkCf,WAAW,CAACe,CAAD,CAAjD,EAAsD;IACpD,MAAM,IAAIJ,UAAJ,CAAe,kFAAkFI,CAAlF,GAAsF,GAArG,CAAN;EACD;;EACD,KAAKT,aAAL,GAAqBS,CAArB;EACA,OAAO,IAAP;AACD,CAND;;AAQA,SAASC,gBAAT,CAA0BC,IAA1B,EAAgC;EAC9B,IAAIA,IAAI,CAACX,aAAL,KAAuB92B,SAA3B,EACE,OAAO02B,YAAY,CAACK,mBAApB;EACF,OAAOU,IAAI,CAACX,aAAZ;AACD;;AAEDJ,YAAY,CAACpyB,SAAb,CAAuBozB,eAAvB,GAAyC,SAASA,eAAT,GAA2B;EAClE,OAAOF,gBAAgB,CAAC,IAAD,CAAvB;AACD,CAFD;;AAIAd,YAAY,CAACpyB,SAAb,CAAuBgxB,IAAvB,GAA8B,SAASA,IAAT,CAAchrB,IAAd,EAAoB;EAChD,IAAIlK,IAAI,GAAG,EAAX;;EACA,KAAK,IAAIvG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsG,SAAS,CAAC9H,MAA9B,EAAsCwB,CAAC,EAAvC,EAA2CuG,IAAI,CAACjG,IAAL,CAAUgG,SAAS,CAACtG,CAAD,CAAnB;;EAC3C,IAAI89B,OAAO,GAAIrtB,IAAI,KAAK,OAAxB;EAEA,IAAIO,MAAM,GAAG,KAAK+rB,OAAlB;EACA,IAAI/rB,MAAM,KAAK7K,SAAf,EACE23B,OAAO,GAAIA,OAAO,IAAI9sB,MAAM,CAAC1a,KAAP,KAAiB6P,SAAvC,CADF,KAEK,IAAI,CAAC23B,OAAL,EACH,OAAO,KAAP,CAT8C,CAWhD;;EACA,IAAIA,OAAJ,EAAa;IACX,IAAIC,EAAJ;IACA,IAAIx3B,IAAI,CAAC/H,MAAL,GAAc,CAAlB,EACEu/B,EAAE,GAAGx3B,IAAI,CAAC,CAAD,CAAT;;IACF,IAAIw3B,EAAE,YAAY5oB,KAAlB,EAAyB;MACvB;MACA;MACA,MAAM4oB,EAAN,CAHuB,CAGb;IACX,CARU,CASX;;;IACA,IAAIC,GAAG,GAAG,IAAI7oB,KAAJ,CAAU,sBAAsB4oB,EAAE,GAAG,OAAOA,EAAE,CAACE,OAAV,GAAoB,GAAvB,GAA6B,EAArD,CAAV,CAAV;IACAD,GAAG,CAACvY,OAAJ,GAAcsY,EAAd;IACA,MAAMC,GAAN,CAZW,CAYA;EACZ;;EAED,IAAIjvB,OAAO,GAAGiC,MAAM,CAACP,IAAD,CAApB;EAEA,IAAI1B,OAAO,KAAK5I,SAAhB,EACE,OAAO,KAAP;;EAEF,IAAI,OAAO4I,OAAP,KAAmB,UAAvB,EAAmC;IACjCotB,YAAY,CAACptB,OAAD,EAAU,IAAV,EAAgBxI,IAAhB,CAAZ;EACD,CAFD,MAEO;IACL,IAAInR,GAAG,GAAG2Z,OAAO,CAACvQ,MAAlB;IACA,IAAIo9B,SAAS,GAAGsC,UAAU,CAACnvB,OAAD,EAAU3Z,GAAV,CAA1B;;IACA,KAAK,IAAI4K,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG5K,GAApB,EAAyB,EAAE4K,CAA3B,EACEm8B,YAAY,CAACP,SAAS,CAAC57B,CAAD,CAAV,EAAe,IAAf,EAAqBuG,IAArB,CAAZ;EACH;;EAED,OAAO,IAAP;AACD,CA1CD;;AA4CA,SAAS43B,YAAT,CAAsB1iC,MAAtB,EAA8BgV,IAA9B,EAAoC2sB,QAApC,EAA8CgB,OAA9C,EAAuD;EACrD,IAAIn1B,CAAJ;EACA,IAAI+H,MAAJ;EACA,IAAIjJ,QAAJ;EAEAo1B,aAAa,CAACC,QAAD,CAAb;EAEApsB,MAAM,GAAGvV,MAAM,CAACshC,OAAhB;;EACA,IAAI/rB,MAAM,KAAK7K,SAAf,EAA0B;IACxB6K,MAAM,GAAGvV,MAAM,CAACshC,OAAP,GAAiBpuC,MAAM,CAAC6uC,MAAP,CAAc,IAAd,CAA1B;IACA/hC,MAAM,CAACuhC,YAAP,GAAsB,CAAtB;EACD,CAHD,MAGO;IACL;IACA;IACA,IAAIhsB,MAAM,CAACqtB,WAAP,KAAuBl4B,SAA3B,EAAsC;MACpC1K,MAAM,CAACggC,IAAP,CAAY,aAAZ,EAA2BhrB,IAA3B,EACY2sB,QAAQ,CAACA,QAAT,GAAoBA,QAAQ,CAACA,QAA7B,GAAwCA,QADpD,EADoC,CAIpC;MACA;;MACApsB,MAAM,GAAGvV,MAAM,CAACshC,OAAhB;IACD;;IACDh1B,QAAQ,GAAGiJ,MAAM,CAACP,IAAD,CAAjB;EACD;;EAED,IAAI1I,QAAQ,KAAK5B,SAAjB,EAA4B;IAC1B;IACA4B,QAAQ,GAAGiJ,MAAM,CAACP,IAAD,CAAN,GAAe2sB,QAA1B;IACA,EAAE3hC,MAAM,CAACuhC,YAAT;EACD,CAJD,MAIO;IACL,IAAI,OAAOj1B,QAAP,KAAoB,UAAxB,EAAoC;MAClC;MACAA,QAAQ,GAAGiJ,MAAM,CAACP,IAAD,CAAN,GACT2tB,OAAO,GAAG,CAAChB,QAAD,EAAWr1B,QAAX,CAAH,GAA0B,CAACA,QAAD,EAAWq1B,QAAX,CADnC,CAFkC,CAIlC;IACD,CALD,MAKO,IAAIgB,OAAJ,EAAa;MAClBr2B,QAAQ,CAACu2B,OAAT,CAAiBlB,QAAjB;IACD,CAFM,MAEA;MACLr1B,QAAQ,CAACzH,IAAT,CAAc88B,QAAd;IACD,CAVI,CAYL;;;IACAn0B,CAAC,GAAG00B,gBAAgB,CAACliC,MAAD,CAApB;;IACA,IAAIwN,CAAC,GAAG,CAAJ,IAASlB,QAAQ,CAACvJ,MAAT,GAAkByK,CAA3B,IAAgC,CAAClB,QAAQ,CAACw2B,MAA9C,EAAsD;MACpDx2B,QAAQ,CAACw2B,MAAT,GAAkB,IAAlB,CADoD,CAEpD;MACA;;MACA,IAAIC,CAAC,GAAG,IAAIrpB,KAAJ,CAAU,iDACEpN,QAAQ,CAACvJ,MADX,GACoB,GADpB,GAC0B0I,MAAM,CAACuJ,IAAD,CADhC,GACyC,aADzC,GAEE,0CAFF,GAGE,gBAHZ,CAAR;MAIA+tB,CAAC,CAACzvC,IAAF,GAAS,6BAAT;MACAyvC,CAAC,CAACC,OAAF,GAAYhjC,MAAZ;MACA+iC,CAAC,CAAC/tB,IAAF,GAASA,IAAT;MACA+tB,CAAC,CAACE,KAAF,GAAU32B,QAAQ,CAACvJ,MAAnB;MACAi+B,kBAAkB,CAAC+B,CAAD,CAAlB;IACD;EACF;;EAED,OAAO/iC,MAAP;AACD;;AAEDohC,YAAY,CAACpyB,SAAb,CAAuB4wB,WAAvB,GAAqC,SAASA,WAAT,CAAqB5qB,IAArB,EAA2B2sB,QAA3B,EAAqC;EACxE,OAAOe,YAAY,CAAC,IAAD,EAAO1tB,IAAP,EAAa2sB,QAAb,EAAuB,KAAvB,CAAnB;AACD,CAFD;;AAIAP,YAAY,CAACpyB,SAAb,CAAuB4H,EAAvB,GAA4BwqB,YAAY,CAACpyB,SAAb,CAAuB4wB,WAAnD;;AAEAwB,YAAY,CAACpyB,SAAb,CAAuBixB,eAAvB,GACI,SAASA,eAAT,CAAyBjrB,IAAzB,EAA+B2sB,QAA/B,EAAyC;EACvC,OAAOe,YAAY,CAAC,IAAD,EAAO1tB,IAAP,EAAa2sB,QAAb,EAAuB,IAAvB,CAAnB;AACD,CAHL;;AAKA,SAASuB,WAAT,GAAuB;EACrB,IAAI,CAAC,KAAKC,KAAV,EAAiB;IACf,KAAKnjC,MAAL,CAAY8/B,cAAZ,CAA2B,KAAK9qB,IAAhC,EAAsC,KAAKouB,MAA3C;IACA,KAAKD,KAAL,GAAa,IAAb;IACA,IAAIt4B,SAAS,CAAC9H,MAAV,KAAqB,CAAzB,EACE,OAAO,KAAK4+B,QAAL,CAAc1yB,IAAd,CAAmB,KAAKjP,MAAxB,CAAP;IACF,OAAO,KAAK2hC,QAAL,CAAc1sB,KAAd,CAAoB,KAAKjV,MAAzB,EAAiC6K,SAAjC,CAAP;EACD;AACF;;AAED,SAASw4B,SAAT,CAAmBrjC,MAAnB,EAA2BgV,IAA3B,EAAiC2sB,QAAjC,EAA2C;EACzC,IAAI1uC,KAAK,GAAG;IAAEkwC,KAAK,EAAE,KAAT;IAAgBC,MAAM,EAAE14B,SAAxB;IAAmC1K,MAAM,EAAEA,MAA3C;IAAmDgV,IAAI,EAAEA,IAAzD;IAA+D2sB,QAAQ,EAAEA;EAAzE,CAAZ;EACA,IAAI2B,OAAO,GAAGJ,WAAW,CAACK,IAAZ,CAAiBtwC,KAAjB,CAAd;EACAqwC,OAAO,CAAC3B,QAAR,GAAmBA,QAAnB;EACA1uC,KAAK,CAACmwC,MAAN,GAAeE,OAAf;EACA,OAAOA,OAAP;AACD;;AAEDlC,YAAY,CAACpyB,SAAb,CAAuB6wB,IAAvB,GAA8B,SAASA,IAAT,CAAc7qB,IAAd,EAAoB2sB,QAApB,EAA8B;EAC1DD,aAAa,CAACC,QAAD,CAAb;EACA,KAAK/qB,EAAL,CAAQ5B,IAAR,EAAcquB,SAAS,CAAC,IAAD,EAAOruB,IAAP,EAAa2sB,QAAb,CAAvB;EACA,OAAO,IAAP;AACD,CAJD;;AAMAP,YAAY,CAACpyB,SAAb,CAAuBkxB,mBAAvB,GACI,SAASA,mBAAT,CAA6BlrB,IAA7B,EAAmC2sB,QAAnC,EAA6C;EAC3CD,aAAa,CAACC,QAAD,CAAb;EACA,KAAK1B,eAAL,CAAqBjrB,IAArB,EAA2BquB,SAAS,CAAC,IAAD,EAAOruB,IAAP,EAAa2sB,QAAb,CAApC;EACA,OAAO,IAAP;AACD,CALL,EAOA;;;AACAP,YAAY,CAACpyB,SAAb,CAAuB8wB,cAAvB,GACI,SAASA,cAAT,CAAwB9qB,IAAxB,EAA8B2sB,QAA9B,EAAwC;EACtC,IAAI7hC,IAAJ,EAAUyV,MAAV,EAAkBthB,QAAlB,EAA4BsQ,CAA5B,EAA+Bi/B,gBAA/B;EAEA9B,aAAa,CAACC,QAAD,CAAb;EAEApsB,MAAM,GAAG,KAAK+rB,OAAd;EACA,IAAI/rB,MAAM,KAAK7K,SAAf,EACE,OAAO,IAAP;EAEF5K,IAAI,GAAGyV,MAAM,CAACP,IAAD,CAAb;EACA,IAAIlV,IAAI,KAAK4K,SAAb,EACE,OAAO,IAAP;;EAEF,IAAI5K,IAAI,KAAK6hC,QAAT,IAAqB7hC,IAAI,CAAC6hC,QAAL,KAAkBA,QAA3C,EAAqD;IACnD,IAAI,EAAE,KAAKJ,YAAP,KAAwB,CAA5B,EACE,KAAKD,OAAL,GAAepuC,MAAM,CAAC6uC,MAAP,CAAc,IAAd,CAAf,CADF,KAEK;MACH,OAAOxsB,MAAM,CAACP,IAAD,CAAb;MACA,IAAIO,MAAM,CAACuqB,cAAX,EACE,KAAKE,IAAL,CAAU,gBAAV,EAA4BhrB,IAA5B,EAAkClV,IAAI,CAAC6hC,QAAL,IAAiBA,QAAnD;IACH;EACF,CARD,MAQO,IAAI,OAAO7hC,IAAP,KAAgB,UAApB,EAAgC;IACrC7L,QAAQ,GAAG,CAAC,CAAZ;;IAEA,KAAKsQ,CAAC,GAAGzE,IAAI,CAACiD,MAAL,GAAc,CAAvB,EAA0BwB,CAAC,IAAI,CAA/B,EAAkCA,CAAC,EAAnC,EAAuC;MACrC,IAAIzE,IAAI,CAACyE,CAAD,CAAJ,KAAYo9B,QAAZ,IAAwB7hC,IAAI,CAACyE,CAAD,CAAJ,CAAQo9B,QAAR,KAAqBA,QAAjD,EAA2D;QACzD6B,gBAAgB,GAAG1jC,IAAI,CAACyE,CAAD,CAAJ,CAAQo9B,QAA3B;QACA1tC,QAAQ,GAAGsQ,CAAX;QACA;MACD;IACF;;IAED,IAAItQ,QAAQ,GAAG,CAAf,EACE,OAAO,IAAP;IAEF,IAAIA,QAAQ,KAAK,CAAjB,EACE6L,IAAI,CAAC2jC,KAAL,GADF,KAEK;MACHC,SAAS,CAAC5jC,IAAD,EAAO7L,QAAP,CAAT;IACD;IAED,IAAI6L,IAAI,CAACiD,MAAL,KAAgB,CAApB,EACEwS,MAAM,CAACP,IAAD,CAAN,GAAelV,IAAI,CAAC,CAAD,CAAnB;IAEF,IAAIyV,MAAM,CAACuqB,cAAP,KAA0Bp1B,SAA9B,EACE,KAAKs1B,IAAL,CAAU,gBAAV,EAA4BhrB,IAA5B,EAAkCwuB,gBAAgB,IAAI7B,QAAtD;EACH;;EAED,OAAO,IAAP;AACD,CAlDL;;AAoDAP,YAAY,CAACpyB,SAAb,CAAuB+F,GAAvB,GAA6BqsB,YAAY,CAACpyB,SAAb,CAAuB8wB,cAApD;;AAEAsB,YAAY,CAACpyB,SAAb,CAAuB+wB,kBAAvB,GACI,SAASA,kBAAT,CAA4B/qB,IAA5B,EAAkC;EAChC,IAAImrB,SAAJ,EAAe5qB,MAAf,EAAuBhR,CAAvB;EAEAgR,MAAM,GAAG,KAAK+rB,OAAd;EACA,IAAI/rB,MAAM,KAAK7K,SAAf,EACE,OAAO,IAAP,CAL8B,CAOhC;;EACA,IAAI6K,MAAM,CAACuqB,cAAP,KAA0Bp1B,SAA9B,EAAyC;IACvC,IAAIG,SAAS,CAAC9H,MAAV,KAAqB,CAAzB,EAA4B;MAC1B,KAAKu+B,OAAL,GAAepuC,MAAM,CAAC6uC,MAAP,CAAc,IAAd,CAAf;MACA,KAAKR,YAAL,GAAoB,CAApB;IACD,CAHD,MAGO,IAAIhsB,MAAM,CAACP,IAAD,CAAN,KAAiBtK,SAArB,EAAgC;MACrC,IAAI,EAAE,KAAK62B,YAAP,KAAwB,CAA5B,EACE,KAAKD,OAAL,GAAepuC,MAAM,CAAC6uC,MAAP,CAAc,IAAd,CAAf,CADF,KAGE,OAAOxsB,MAAM,CAACP,IAAD,CAAb;IACH;;IACD,OAAO,IAAP;EACD,CAnB+B,CAqBhC;;;EACA,IAAInK,SAAS,CAAC9H,MAAV,KAAqB,CAAzB,EAA4B;IAC1B,IAAI5P,IAAI,GAAGD,MAAM,CAACC,IAAP,CAAYoiB,MAAZ,CAAX;IACA,IAAIvc,GAAJ;;IACA,KAAKuL,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGpR,IAAI,CAAC4P,MAArB,EAA6B,EAAEwB,CAA/B,EAAkC;MAChCvL,GAAG,GAAG7F,IAAI,CAACoR,CAAD,CAAV;MACA,IAAIvL,GAAG,KAAK,gBAAZ,EAA8B;MAC9B,KAAK+mC,kBAAL,CAAwB/mC,GAAxB;IACD;;IACD,KAAK+mC,kBAAL,CAAwB,gBAAxB;IACA,KAAKuB,OAAL,GAAepuC,MAAM,CAAC6uC,MAAP,CAAc,IAAd,CAAf;IACA,KAAKR,YAAL,GAAoB,CAApB;IACA,OAAO,IAAP;EACD;;EAEDpB,SAAS,GAAG5qB,MAAM,CAACP,IAAD,CAAlB;;EAEA,IAAI,OAAOmrB,SAAP,KAAqB,UAAzB,EAAqC;IACnC,KAAKL,cAAL,CAAoB9qB,IAApB,EAA0BmrB,SAA1B;EACD,CAFD,MAEO,IAAIA,SAAS,KAAKz1B,SAAlB,EAA6B;IAClC;IACA,KAAKnG,CAAC,GAAG47B,SAAS,CAACp9B,MAAV,GAAmB,CAA5B,EAA+BwB,CAAC,IAAI,CAApC,EAAuCA,CAAC,EAAxC,EAA4C;MAC1C,KAAKu7B,cAAL,CAAoB9qB,IAApB,EAA0BmrB,SAAS,CAAC57B,CAAD,CAAnC;IACD;EACF;;EAED,OAAO,IAAP;AACD,CAjDL;;AAmDA,SAASo/B,UAAT,CAAoB3jC,MAApB,EAA4BgV,IAA5B,EAAkC4uB,MAAlC,EAA0C;EACxC,IAAIruB,MAAM,GAAGvV,MAAM,CAACshC,OAApB;EAEA,IAAI/rB,MAAM,KAAK7K,SAAf,EACE,OAAO,EAAP;EAEF,IAAIm5B,UAAU,GAAGtuB,MAAM,CAACP,IAAD,CAAvB;EACA,IAAI6uB,UAAU,KAAKn5B,SAAnB,EACE,OAAO,EAAP;EAEF,IAAI,OAAOm5B,UAAP,KAAsB,UAA1B,EACE,OAAOD,MAAM,GAAG,CAACC,UAAU,CAAClC,QAAX,IAAuBkC,UAAxB,CAAH,GAAyC,CAACA,UAAD,CAAtD;EAEF,OAAOD,MAAM,GACXE,eAAe,CAACD,UAAD,CADJ,GACmBpB,UAAU,CAACoB,UAAD,EAAaA,UAAU,CAAC9gC,MAAxB,CAD1C;AAED;;AAEDq+B,YAAY,CAACpyB,SAAb,CAAuBmxB,SAAvB,GAAmC,SAASA,SAAT,CAAmBnrB,IAAnB,EAAyB;EAC1D,OAAO2uB,UAAU,CAAC,IAAD,EAAO3uB,IAAP,EAAa,IAAb,CAAjB;AACD,CAFD;;AAIAosB,YAAY,CAACpyB,SAAb,CAAuB+0B,YAAvB,GAAsC,SAASA,YAAT,CAAsB/uB,IAAtB,EAA4B;EAChE,OAAO2uB,UAAU,CAAC,IAAD,EAAO3uB,IAAP,EAAa,KAAb,CAAjB;AACD,CAFD;;AAIAosB,YAAY,CAAC4C,aAAb,GAA6B,UAAShB,OAAT,EAAkBhuB,IAAlB,EAAwB;EACnD,IAAI,OAAOguB,OAAO,CAACgB,aAAf,KAAiC,UAArC,EAAiD;IAC/C,OAAOhB,OAAO,CAACgB,aAAR,CAAsBhvB,IAAtB,CAAP;EACD,CAFD,MAEO;IACL,OAAOgvB,aAAa,CAAC/0B,IAAd,CAAmB+zB,OAAnB,EAA4BhuB,IAA5B,CAAP;EACD;AACF,CAND;;AAQAosB,YAAY,CAACpyB,SAAb,CAAuBg1B,aAAvB,GAAuCA,aAAvC;;AACA,SAASA,aAAT,CAAuBhvB,IAAvB,EAA6B;EAC3B,IAAIO,MAAM,GAAG,KAAK+rB,OAAlB;;EAEA,IAAI/rB,MAAM,KAAK7K,SAAf,EAA0B;IACxB,IAAIm5B,UAAU,GAAGtuB,MAAM,CAACP,IAAD,CAAvB;;IAEA,IAAI,OAAO6uB,UAAP,KAAsB,UAA1B,EAAsC;MACpC,OAAO,CAAP;IACD,CAFD,MAEO,IAAIA,UAAU,KAAKn5B,SAAnB,EAA8B;MACnC,OAAOm5B,UAAU,CAAC9gC,MAAlB;IACD;EACF;;EAED,OAAO,CAAP;AACD;;AAEDq+B,YAAY,CAACpyB,SAAb,CAAuBi1B,UAAvB,GAAoC,SAASA,UAAT,GAAsB;EACxD,OAAO,KAAK1C,YAAL,GAAoB,CAApB,GAAwBV,cAAc,CAAC,KAAKS,OAAN,CAAtC,GAAuD,EAA9D;AACD,CAFD;;AAIA,SAASmB,UAAT,CAAoB12B,GAApB,EAAyBk2B,CAAzB,EAA4B;EAC1B,IAAIiC,IAAI,GAAG,IAAIn5B,KAAJ,CAAUk3B,CAAV,CAAX;;EACA,KAAK,IAAI19B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG09B,CAApB,EAAuB,EAAE19B,CAAzB,EACE2/B,IAAI,CAAC3/B,CAAD,CAAJ,GAAUwH,GAAG,CAACxH,CAAD,CAAb;;EACF,OAAO2/B,IAAP;AACD;;AAED,SAASR,SAAT,CAAmB5jC,IAAnB,EAAyByL,KAAzB,EAAgC;EAC9B,OAAOA,KAAK,GAAG,CAAR,GAAYzL,IAAI,CAACiD,MAAxB,EAAgCwI,KAAK,EAArC,EACEzL,IAAI,CAACyL,KAAD,CAAJ,GAAczL,IAAI,CAACyL,KAAK,GAAG,CAAT,CAAlB;;EACFzL,IAAI,CAACqkC,GAAL;AACD;;AAED,SAASL,eAAT,CAAyB/3B,GAAzB,EAA8B;EAC5B,IAAIq4B,GAAG,GAAG,IAAIr5B,KAAJ,CAAUgB,GAAG,CAAChJ,MAAd,CAAV;;EACA,KAAK,IAAIwB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6/B,GAAG,CAACrhC,MAAxB,EAAgC,EAAEwB,CAAlC,EAAqC;IACnC6/B,GAAG,CAAC7/B,CAAD,CAAH,GAASwH,GAAG,CAACxH,CAAD,CAAH,CAAOo9B,QAAP,IAAmB51B,GAAG,CAACxH,CAAD,CAA/B;EACD;;EACD,OAAO6/B,GAAP;AACD;;AAED,SAASvE,IAAT,CAAcmD,OAAd,EAAuB1vC,IAAvB,EAA6B;EAC3B,OAAO,IAAIiX,OAAJ,CAAY,UAAUC,OAAV,EAAmB65B,MAAnB,EAA2B;IAC5C,SAASC,aAAT,CAAuB/B,GAAvB,EAA4B;MAC1BS,OAAO,CAAClD,cAAR,CAAuBxsC,IAAvB,EAA6BixC,QAA7B;MACAF,MAAM,CAAC9B,GAAD,CAAN;IACD;;IAED,SAASgC,QAAT,GAAoB;MAClB,IAAI,OAAOvB,OAAO,CAAClD,cAAf,KAAkC,UAAtC,EAAkD;QAChDkD,OAAO,CAAClD,cAAR,CAAuB,OAAvB,EAAgCwE,aAAhC;MACD;;MACD95B,OAAO,CAAC,GAAGjF,KAAH,CAAS0J,IAAT,CAAcpE,SAAd,CAAD,CAAP;IACD;;IAAA;IAED25B,8BAA8B,CAACxB,OAAD,EAAU1vC,IAAV,EAAgBixC,QAAhB,EAA0B;MAAE1E,IAAI,EAAE;IAAR,CAA1B,CAA9B;;IACA,IAAIvsC,IAAI,KAAK,OAAb,EAAsB;MACpBmxC,6BAA6B,CAACzB,OAAD,EAAUsB,aAAV,EAAyB;QAAEzE,IAAI,EAAE;MAAR,CAAzB,CAA7B;IACD;EACF,CAjBM,CAAP;AAkBD;;AAED,SAAS4E,6BAAT,CAAuCzB,OAAvC,EAAgD1vB,OAAhD,EAAyDoxB,KAAzD,EAAgE;EAC9D,IAAI,OAAO1B,OAAO,CAACpsB,EAAf,KAAsB,UAA1B,EAAsC;IACpC4tB,8BAA8B,CAACxB,OAAD,EAAU,OAAV,EAAmB1vB,OAAnB,EAA4BoxB,KAA5B,CAA9B;EACD;AACF;;AAED,SAASF,8BAAT,CAAwCxB,OAAxC,EAAiD1vC,IAAjD,EAAuDquC,QAAvD,EAAiE+C,KAAjE,EAAwE;EACtE,IAAI,OAAO1B,OAAO,CAACpsB,EAAf,KAAsB,UAA1B,EAAsC;IACpC,IAAI8tB,KAAK,CAAC7E,IAAV,EAAgB;MACdmD,OAAO,CAACnD,IAAR,CAAavsC,IAAb,EAAmBquC,QAAnB;IACD,CAFD,MAEO;MACLqB,OAAO,CAACpsB,EAAR,CAAWtjB,IAAX,EAAiBquC,QAAjB;IACD;EACF,CAND,MAMO,IAAI,OAAOqB,OAAO,CAACjlC,gBAAf,KAAoC,UAAxC,EAAoD;IACzD;IACA;IACAilC,OAAO,CAACjlC,gBAAR,CAAyBzK,IAAzB,EAA+B,SAASqxC,YAAT,CAAsB3Q,GAAtB,EAA2B;MACxD;MACA;MACA,IAAI0Q,KAAK,CAAC7E,IAAV,EAAgB;QACdmD,OAAO,CAAC/kC,mBAAR,CAA4B3K,IAA5B,EAAkCqxC,YAAlC;MACD;;MACDhD,QAAQ,CAAC3N,GAAD,CAAR;IACD,CAPD;EAQD,CAXM,MAWA;IACL,MAAM,IAAI1Z,SAAJ,CAAc,wEAAwE,OAAO0oB,OAA7F,CAAN;EACD;AACF;;AChfD;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC7vDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;;AAEA,IAAI4B,GAAG,GAAGC,OAAO,CAAC,sBAAD,CAAjB;AACA;;;AAEA1G,MAAM,CAACC,OAAP,GAAiB0G,QAAjB;AAEA;;AACA,SAASC,QAAT,CAAkBC,KAAlB,EAAyBC,QAAzB,EAAmCC,EAAnC,EAAuC;EACrC,KAAKF,KAAL,GAAaA,KAAb;EACA,KAAKC,QAAL,GAAgBA,QAAhB;EACA,KAAK9yB,QAAL,GAAgB+yB,EAAhB;EACA,KAAKzuC,IAAL,GAAY,IAAZ;AACD,EAED;AACA;;;AACA,SAAS0uC,aAAT,CAAuBlyC,KAAvB,EAA8B;EAC5B,IAAImyC,KAAK,GAAG,IAAZ;;EAEA,KAAK3uC,IAAL,GAAY,IAAZ;EACA,KAAK28B,KAAL,GAAa,IAAb;;EACA,KAAKiS,MAAL,GAAc,YAAY;IACxBC,cAAc,CAACF,KAAD,EAAQnyC,KAAR,CAAd;EACD,CAFD;AAGD;AACD;;AAEA;;;AACA,IAAIsyC,UAAU,GAAG,SAAoB,CAAC,OAAD,EAAU,OAAV,EAAmBxuC,OAAnB,CAA2BmnC,OAAO,CAACwB,OAAR,CAAgBn6B,KAAhB,CAAsB,CAAtB,EAAyB,CAAzB,CAA3B,IAA0D,CAAC,CAA/E,GAAmFigC,YAAnF,GAAkGZ,GAAG,CAACvF,QAAvH;AACA;;AAEA;;AACA,IAAIoG,MAAJ;AACA;;AAEAX,QAAQ,CAACY,aAAT,GAAyBA,aAAzB;AAEA;;AACA,IAAIC,IAAI,GAAGzyC,MAAM,CAAC6uC,MAAP,CAAc8C,OAAO,CAAC,cAAD,CAArB,CAAX;AACAc,IAAI,CAACC,QAAL,GAAgBf,OAAO,CAAC,UAAD,CAAvB;AACA;;AAEA;;AACA,IAAIgB,YAAY,GAAG;EACjBC,SAAS,EAAEjB,OAAO,CAAC,gBAAD;AADD,CAAnB;AAGA;;AAEA;;AACA,IAAIkB,MAAM,GAAGlB,OAAO,CAAC,2BAAD,CAApB;AACA;;AAEA;;;AAEA,IAAImB,MAAM,GAAGnB,OAAO,CAAC,aAAD,CAAP,CAAuBmB,MAApC;;AACA,IAAIC,aAAa,GAAGC,MAAM,CAACC,UAAP,IAAqB,YAAY,CAAE,CAAvD;;AACA,SAASC,mBAAT,CAA6BpB,KAA7B,EAAoC;EAClC,OAAOgB,MAAM,CAAC3tB,IAAP,CAAY2sB,KAAZ,CAAP;AACD;;AACD,SAASqB,aAAT,CAAuBxuB,GAAvB,EAA4B;EAC1B,OAAOmuB,MAAM,CAACM,QAAP,CAAgBzuB,GAAhB,KAAwBA,GAAG,YAAYouB,aAA9C;AACD;AAED;;;AAEA,IAAIM,WAAW,GAAG1B,OAAO,CAAC,4BAAD,CAAzB;;AAEAc,IAAI,CAACC,QAAL,CAAcd,QAAd,EAAwBiB,MAAxB;;AAEA,SAASS,GAAT,GAAe,CAAE;;AAEjB,SAASd,aAAT,CAAuBxxC,OAAvB,EAAgCuyC,MAAhC,EAAwC;EACtChB,MAAM,GAAGA,MAAM,IAAIZ,OAAO,CAAC,kBAAD,CAA1B;EAEA3wC,OAAO,GAAGA,OAAO,IAAI,EAArB,CAHsC,CAKtC;EACA;EACA;EACA;EACA;;EACA,IAAIwyC,QAAQ,GAAGD,MAAM,YAAYhB,MAAjC,CAVsC,CAYtC;EACA;;EACA,KAAKkB,UAAL,GAAkB,CAAC,CAACzyC,OAAO,CAACyyC,UAA5B;EAEA,IAAID,QAAJ,EAAc,KAAKC,UAAL,GAAkB,KAAKA,UAAL,IAAmB,CAAC,CAACzyC,OAAO,CAAC0yC,kBAA/C,CAhBwB,CAkBtC;EACA;EACA;;EACA,IAAIC,GAAG,GAAG3yC,OAAO,CAAC4yC,aAAlB;EACA,IAAIC,WAAW,GAAG7yC,OAAO,CAAC8yC,qBAA1B;EACA,IAAIC,UAAU,GAAG,KAAKN,UAAL,GAAkB,EAAlB,GAAuB,KAAK,IAA7C;EAEA,IAAIE,GAAG,IAAIA,GAAG,KAAK,CAAnB,EAAsB,KAAKC,aAAL,GAAqBD,GAArB,CAAtB,KAAoD,IAAIH,QAAQ,KAAKK,WAAW,IAAIA,WAAW,KAAK,CAApC,CAAZ,EAAoD,KAAKD,aAAL,GAAqBC,WAArB,CAApD,KAA0F,KAAKD,aAAL,GAAqBG,UAArB,CAzBxG,CA2BtC;;EACA,KAAKH,aAAL,GAAqB7xC,IAAI,CAACoa,KAAL,CAAW,KAAKy3B,aAAhB,CAArB,CA5BsC,CA8BtC;;EACA,KAAKI,WAAL,GAAmB,KAAnB,CA/BsC,CAiCtC;;EACA,KAAKC,SAAL,GAAiB,KAAjB,CAlCsC,CAmCtC;;EACA,KAAKC,MAAL,GAAc,KAAd,CApCsC,CAqCtC;;EACA,KAAKC,KAAL,GAAa,KAAb,CAtCsC,CAuCtC;;EACA,KAAKC,QAAL,GAAgB,KAAhB,CAxCsC,CA0CtC;;EACA,KAAKC,SAAL,GAAiB,KAAjB,CA3CsC,CA6CtC;EACA;EACA;;EACA,IAAIC,QAAQ,GAAGtzC,OAAO,CAACuzC,aAAR,KAA0B,KAAzC;EACA,KAAKA,aAAL,GAAqB,CAACD,QAAtB,CAjDsC,CAmDtC;EACA;EACA;;EACA,KAAKE,eAAL,GAAuBxzC,OAAO,CAACwzC,eAAR,IAA2B,MAAlD,CAtDsC,CAwDtC;EACA;EACA;;EACA,KAAK3kC,MAAL,GAAc,CAAd,CA3DsC,CA6DtC;;EACA,KAAK4kC,OAAL,GAAe,KAAf,CA9DsC,CAgEtC;;EACA,KAAKC,MAAL,GAAc,CAAd,CAjEsC,CAmEtC;EACA;EACA;EACA;;EACA,KAAKC,IAAL,GAAY,IAAZ,CAvEsC,CAyEtC;EACA;EACA;;EACA,KAAKC,gBAAL,GAAwB,KAAxB,CA5EsC,CA8EtC;;EACA,KAAKC,OAAL,GAAe,UAAUzF,EAAV,EAAc;IAC3ByF,OAAO,CAACtB,MAAD,EAASnE,EAAT,CAAP;EACD,CAFD,CA/EsC,CAmFtC;;;EACA,KAAK0F,OAAL,GAAe,IAAf,CApFsC,CAsFtC;;EACA,KAAKC,QAAL,GAAgB,CAAhB;EAEA,KAAKC,eAAL,GAAuB,IAAvB;EACA,KAAKC,mBAAL,GAA2B,IAA3B,CA1FsC,CA4FtC;EACA;;EACA,KAAKC,SAAL,GAAiB,CAAjB,CA9FsC,CAgGtC;EACA;;EACA,KAAKC,WAAL,GAAmB,KAAnB,CAlGsC,CAoGtC;;EACA,KAAKC,YAAL,GAAoB,KAApB,CArGsC,CAuGtC;;EACA,KAAKC,oBAAL,GAA4B,CAA5B,CAxGsC,CA0GtC;EACA;;EACA,KAAKC,kBAAL,GAA0B,IAAIrD,aAAJ,CAAkB,IAAlB,CAA1B;AACD;;AAEDO,aAAa,CAAC12B,SAAd,CAAwBy5B,SAAxB,GAAoC,SAASA,SAAT,GAAqB;EACvD,IAAIp8B,OAAO,GAAG,KAAK67B,eAAnB;EACA,IAAIQ,GAAG,GAAG,EAAV;;EACA,OAAOr8B,OAAP,EAAgB;IACdq8B,GAAG,CAAC7jC,IAAJ,CAASwH,OAAT;IACAA,OAAO,GAAGA,OAAO,CAAC5V,IAAlB;EACD;;EACD,OAAOiyC,GAAP;AACD,CARD;;AAUA,CAAC,YAAY;EACX,IAAI;IACFx1C,MAAM,CAAC8kB,cAAP,CAAsB0tB,aAAa,CAAC12B,SAApC,EAA+C,QAA/C,EAAyD;MACvD1J,GAAG,EAAEugC,YAAY,CAACC,SAAb,CAAuB,YAAY;QACtC,OAAO,KAAK2C,SAAL,EAAP;MACD,CAFI,EAEF,uEAAuE,UAFrE,EAEiF,SAFjF;IADkD,CAAzD;EAKD,CAND,CAME,OAAOE,CAAP,EAAU,CAAE;AACf,CARD,KAUA;AACA;;;AACA,IAAIC,eAAJ;;AACA,IAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,WAAvC,IAAsD,OAAOlI,QAAQ,CAAC5xB,SAAT,CAAmB65B,MAAM,CAACC,WAA1B,CAAP,KAAkD,UAA5G,EAAwH;EACtHF,eAAe,GAAGhI,QAAQ,CAAC5xB,SAAT,CAAmB65B,MAAM,CAACC,WAA1B,CAAlB;EACA51C,MAAM,CAAC8kB,cAAP,CAAsB8sB,QAAtB,EAAgC+D,MAAM,CAACC,WAAvC,EAAoD;IAClDn1C,KAAK,EAAE,UAAUob,MAAV,EAAkB;MACvB,IAAI65B,eAAe,CAAC35B,IAAhB,CAAqB,IAArB,EAA2BF,MAA3B,CAAJ,EAAwC,OAAO,IAAP;MACxC,IAAI,SAAS+1B,QAAb,EAAuB,OAAO,KAAP;MAEvB,OAAO/1B,MAAM,IAAIA,MAAM,CAACg6B,cAAP,YAAiCrD,aAAlD;IACD;EANiD,CAApD;AAQD,CAVD,MAUO;EACLkD,eAAe,GAAG,UAAU75B,MAAV,EAAkB;IAClC,OAAOA,MAAM,YAAY,IAAzB;EACD,CAFD;AAGD;;AAED,SAAS+1B,QAAT,CAAkB5wC,OAAlB,EAA2B;EACzBuxC,MAAM,GAAGA,MAAM,IAAIZ,OAAO,CAAC,kBAAD,CAA1B,CADyB,CAGzB;EACA;EACA;EAEA;EACA;EACA;;EACA,IAAI,CAAC+D,eAAe,CAAC35B,IAAhB,CAAqB61B,QAArB,EAA+B,IAA/B,CAAD,IAAyC,EAAE,gBAAgBW,MAAlB,CAA7C,EAAwE;IACtE,OAAO,IAAIX,QAAJ,CAAa5wC,OAAb,CAAP;EACD;;EAED,KAAK60C,cAAL,GAAsB,IAAIrD,aAAJ,CAAkBxxC,OAAlB,EAA2B,IAA3B,CAAtB,CAdyB,CAgBzB;;EACA,KAAK80C,QAAL,GAAgB,IAAhB;;EAEA,IAAI90C,OAAJ,EAAa;IACX,IAAI,OAAOA,OAAO,CAACvC,KAAf,KAAyB,UAA7B,EAAyC,KAAKs3C,MAAL,GAAc/0C,OAAO,CAACvC,KAAtB;IAEzC,IAAI,OAAOuC,OAAO,CAACg1C,MAAf,KAA0B,UAA9B,EAA0C,KAAKC,OAAL,GAAej1C,OAAO,CAACg1C,MAAvB;IAE1C,IAAI,OAAOh1C,OAAO,CAACma,OAAf,KAA2B,UAA/B,EAA2C,KAAK+6B,QAAL,GAAgBl1C,OAAO,CAACma,OAAxB;IAE3C,IAAI,OAAOna,OAAO,CAACm1C,KAAf,KAAyB,UAA7B,EAAyC,KAAKC,MAAL,GAAcp1C,OAAO,CAACm1C,KAAtB;EAC1C;;EAEDtD,MAAM,CAAC92B,IAAP,CAAY,IAAZ;AACD,EAED;;;AACA61B,QAAQ,CAAC91B,SAAT,CAAmBu6B,IAAnB,GAA0B,YAAY;EACpC,KAAKvJ,IAAL,CAAU,OAAV,EAAmB,IAAItmB,KAAJ,CAAU,2BAAV,CAAnB;AACD,CAFD;;AAIA,SAAS8vB,aAAT,CAAuB/C,MAAvB,EAA+BvB,EAA/B,EAAmC;EACjC,IAAI5C,EAAE,GAAG,IAAI5oB,KAAJ,CAAU,iBAAV,CAAT,CADiC,CAEjC;;EACA+sB,MAAM,CAACzG,IAAP,CAAY,OAAZ,EAAqBsC,EAArB;EACAsC,GAAG,CAACvF,QAAJ,CAAa6F,EAAb,EAAiB5C,EAAjB;AACD,EAED;AACA;AACA;;;AACA,SAASmH,UAAT,CAAoBhD,MAApB,EAA4BxzC,KAA5B,EAAmC+xC,KAAnC,EAA0CE,EAA1C,EAA8C;EAC5C,IAAIwE,KAAK,GAAG,IAAZ;EACA,IAAIpH,EAAE,GAAG,KAAT;;EAEA,IAAI0C,KAAK,KAAK,IAAd,EAAoB;IAClB1C,EAAE,GAAG,IAAIhoB,SAAJ,CAAc,qCAAd,CAAL;EACD,CAFD,MAEO,IAAI,OAAO0qB,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,KAAKt6B,SAAvC,IAAoD,CAACzX,KAAK,CAAC0zC,UAA/D,EAA2E;IAChFrE,EAAE,GAAG,IAAIhoB,SAAJ,CAAc,iCAAd,CAAL;EACD;;EACD,IAAIgoB,EAAJ,EAAQ;IACNmE,MAAM,CAACzG,IAAP,CAAY,OAAZ,EAAqBsC,EAArB;IACAsC,GAAG,CAACvF,QAAJ,CAAa6F,EAAb,EAAiB5C,EAAjB;IACAoH,KAAK,GAAG,KAAR;EACD;;EACD,OAAOA,KAAP;AACD;;AAED5E,QAAQ,CAAC91B,SAAT,CAAmBrd,KAAnB,GAA2B,UAAUqzC,KAAV,EAAiBC,QAAjB,EAA2BC,EAA3B,EAA+B;EACxD,IAAIjyC,KAAK,GAAG,KAAK81C,cAAjB;EACA,IAAI3E,GAAG,GAAG,KAAV;;EACA,IAAIuF,KAAK,GAAG,CAAC12C,KAAK,CAAC0zC,UAAP,IAAqBN,aAAa,CAACrB,KAAD,CAA9C;;EAEA,IAAI2E,KAAK,IAAI,CAAC3D,MAAM,CAACM,QAAP,CAAgBtB,KAAhB,CAAd,EAAsC;IACpCA,KAAK,GAAGoB,mBAAmB,CAACpB,KAAD,CAA3B;EACD;;EAED,IAAI,OAAOC,QAAP,KAAoB,UAAxB,EAAoC;IAClCC,EAAE,GAAGD,QAAL;IACAA,QAAQ,GAAG,IAAX;EACD;;EAED,IAAI0E,KAAJ,EAAW1E,QAAQ,GAAG,QAAX,CAAX,KAAoC,IAAI,CAACA,QAAL,EAAeA,QAAQ,GAAGhyC,KAAK,CAACy0C,eAAjB;EAEnD,IAAI,OAAOxC,EAAP,KAAc,UAAlB,EAA8BA,EAAE,GAAGsB,GAAL;EAE9B,IAAIvzC,KAAK,CAACo0C,KAAV,EAAiBmC,aAAa,CAAC,IAAD,EAAOtE,EAAP,CAAb,CAAjB,KAA8C,IAAIyE,KAAK,IAAIF,UAAU,CAAC,IAAD,EAAOx2C,KAAP,EAAc+xC,KAAd,EAAqBE,EAArB,CAAvB,EAAiD;IAC7FjyC,KAAK,CAACm1C,SAAN;IACAhE,GAAG,GAAGwF,aAAa,CAAC,IAAD,EAAO32C,KAAP,EAAc02C,KAAd,EAAqB3E,KAArB,EAA4BC,QAA5B,EAAsCC,EAAtC,CAAnB;EACD;EAED,OAAOd,GAAP;AACD,CAxBD;;AA0BAU,QAAQ,CAAC91B,SAAT,CAAmB66B,IAAnB,GAA0B,YAAY;EACpC,IAAI52C,KAAK,GAAG,KAAK81C,cAAjB;EAEA91C,KAAK,CAAC20C,MAAN;AACD,CAJD;;AAMA9C,QAAQ,CAAC91B,SAAT,CAAmB86B,MAAnB,GAA4B,YAAY;EACtC,IAAI72C,KAAK,GAAG,KAAK81C,cAAjB;;EAEA,IAAI91C,KAAK,CAAC20C,MAAV,EAAkB;IAChB30C,KAAK,CAAC20C,MAAN;IAEA,IAAI,CAAC30C,KAAK,CAAC00C,OAAP,IAAkB,CAAC10C,KAAK,CAAC20C,MAAzB,IAAmC,CAAC30C,KAAK,CAACq0C,QAA1C,IAAsD,CAACr0C,KAAK,CAAC60C,gBAA7D,IAAiF70C,KAAK,CAACi1C,eAA3F,EAA4G6B,WAAW,CAAC,IAAD,EAAO92C,KAAP,CAAX;EAC7G;AACF,CARD;;AAUA6xC,QAAQ,CAAC91B,SAAT,CAAmBg7B,kBAAnB,GAAwC,SAASA,kBAAT,CAA4B/E,QAA5B,EAAsC;EAC5E;EACA,IAAI,OAAOA,QAAP,KAAoB,QAAxB,EAAkCA,QAAQ,GAAGA,QAAQ,CAAChzC,WAAT,EAAX;EAClC,IAAI,EAAE,CAAC,KAAD,EAAQ,MAAR,EAAgB,OAAhB,EAAyB,OAAzB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,MAAtD,EAA8D,OAA9D,EAAuE,SAAvE,EAAkF,UAAlF,EAA8F,KAA9F,EAAqG8E,OAArG,CAA6G,CAACkuC,QAAQ,GAAG,EAAZ,EAAgBhzC,WAAhB,EAA7G,IAA8I,CAAC,CAAjJ,CAAJ,EAAyJ,MAAM,IAAIqoB,SAAJ,CAAc,uBAAuB2qB,QAArC,CAAN;EACzJ,KAAK8D,cAAL,CAAoBrB,eAApB,GAAsCzC,QAAtC;EACA,OAAO,IAAP;AACD,CAND;;AAQA,SAASgF,WAAT,CAAqBh3C,KAArB,EAA4B+xC,KAA5B,EAAmCC,QAAnC,EAA6C;EAC3C,IAAI,CAAChyC,KAAK,CAAC0zC,UAAP,IAAqB1zC,KAAK,CAACw0C,aAAN,KAAwB,KAA7C,IAAsD,OAAOzC,KAAP,KAAiB,QAA3E,EAAqF;IACnFA,KAAK,GAAGgB,MAAM,CAAC3tB,IAAP,CAAY2sB,KAAZ,EAAmBC,QAAnB,CAAR;EACD;;EACD,OAAOD,KAAP;AACD;;AAED9xC,MAAM,CAAC8kB,cAAP,CAAsB8sB,QAAQ,CAAC91B,SAA/B,EAA0C,uBAA1C,EAAmE;EACjE;EACA;EACA;EACA4yB,UAAU,EAAE,KAJqD;EAKjEt8B,GAAG,EAAE,YAAY;IACf,OAAO,KAAKyjC,cAAL,CAAoBjC,aAA3B;EACD;AAPgE,CAAnE,GAUA;AACA;AACA;;AACA,SAAS8C,aAAT,CAAuBnD,MAAvB,EAA+BxzC,KAA/B,EAAsC02C,KAAtC,EAA6C3E,KAA7C,EAAoDC,QAApD,EAA8DC,EAA9D,EAAkE;EAChE,IAAI,CAACyE,KAAL,EAAY;IACV,IAAIO,QAAQ,GAAGD,WAAW,CAACh3C,KAAD,EAAQ+xC,KAAR,EAAeC,QAAf,CAA1B;;IACA,IAAID,KAAK,KAAKkF,QAAd,EAAwB;MACtBP,KAAK,GAAG,IAAR;MACA1E,QAAQ,GAAG,QAAX;MACAD,KAAK,GAAGkF,QAAR;IACD;EACF;;EACD,IAAIvwC,GAAG,GAAG1G,KAAK,CAAC0zC,UAAN,GAAmB,CAAnB,GAAuB3B,KAAK,CAACjiC,MAAvC;EAEA9P,KAAK,CAAC8P,MAAN,IAAgBpJ,GAAhB;EAEA,IAAIyqC,GAAG,GAAGnxC,KAAK,CAAC8P,MAAN,GAAe9P,KAAK,CAAC6zC,aAA/B,CAbgE,CAchE;;EACA,IAAI,CAAC1C,GAAL,EAAUnxC,KAAK,CAACk0C,SAAN,GAAkB,IAAlB;;EAEV,IAAIl0C,KAAK,CAAC00C,OAAN,IAAiB10C,KAAK,CAAC20C,MAA3B,EAAmC;IACjC,IAAIuC,IAAI,GAAGl3C,KAAK,CAACk1C,mBAAjB;IACAl1C,KAAK,CAACk1C,mBAAN,GAA4B;MAC1BnD,KAAK,EAAEA,KADmB;MAE1BC,QAAQ,EAAEA,QAFgB;MAG1B0E,KAAK,EAAEA,KAHmB;MAI1Bx3B,QAAQ,EAAE+yB,EAJgB;MAK1BzuC,IAAI,EAAE;IALoB,CAA5B;;IAOA,IAAI0zC,IAAJ,EAAU;MACRA,IAAI,CAAC1zC,IAAL,GAAYxD,KAAK,CAACk1C,mBAAlB;IACD,CAFD,MAEO;MACLl1C,KAAK,CAACi1C,eAAN,GAAwBj1C,KAAK,CAACk1C,mBAA9B;IACD;;IACDl1C,KAAK,CAACs1C,oBAAN,IAA8B,CAA9B;EACD,CAfD,MAeO;IACL6B,OAAO,CAAC3D,MAAD,EAASxzC,KAAT,EAAgB,KAAhB,EAAuB0G,GAAvB,EAA4BqrC,KAA5B,EAAmCC,QAAnC,EAA6CC,EAA7C,CAAP;EACD;;EAED,OAAOd,GAAP;AACD;;AAED,SAASgG,OAAT,CAAiB3D,MAAjB,EAAyBxzC,KAAzB,EAAgCi2C,MAAhC,EAAwCvvC,GAAxC,EAA6CqrC,KAA7C,EAAoDC,QAApD,EAA8DC,EAA9D,EAAkE;EAChEjyC,KAAK,CAACg1C,QAAN,GAAiBtuC,GAAjB;EACA1G,KAAK,CAAC+0C,OAAN,GAAgB9C,EAAhB;EACAjyC,KAAK,CAAC00C,OAAN,GAAgB,IAAhB;EACA10C,KAAK,CAAC40C,IAAN,GAAa,IAAb;EACA,IAAIqB,MAAJ,EAAYzC,MAAM,CAAC0C,OAAP,CAAenE,KAAf,EAAsB/xC,KAAK,CAAC80C,OAA5B,EAAZ,KAAsDtB,MAAM,CAACwC,MAAP,CAAcjE,KAAd,EAAqBC,QAArB,EAA+BhyC,KAAK,CAAC80C,OAArC;EACtD90C,KAAK,CAAC40C,IAAN,GAAa,KAAb;AACD;;AAED,SAASwC,YAAT,CAAsB5D,MAAtB,EAA8BxzC,KAA9B,EAAqC40C,IAArC,EAA2CvF,EAA3C,EAA+C4C,EAA/C,EAAmD;EACjD,EAAEjyC,KAAK,CAACm1C,SAAR;;EAEA,IAAIP,IAAJ,EAAU;IACR;IACA;IACAjD,GAAG,CAACvF,QAAJ,CAAa6F,EAAb,EAAiB5C,EAAjB,EAHQ,CAIR;IACA;;IACAsC,GAAG,CAACvF,QAAJ,CAAaiL,WAAb,EAA0B7D,MAA1B,EAAkCxzC,KAAlC;IACAwzC,MAAM,CAACsC,cAAP,CAAsBT,YAAtB,GAAqC,IAArC;IACA7B,MAAM,CAACzG,IAAP,CAAY,OAAZ,EAAqBsC,EAArB;EACD,CATD,MASO;IACL;IACA;IACA4C,EAAE,CAAC5C,EAAD,CAAF;IACAmE,MAAM,CAACsC,cAAP,CAAsBT,YAAtB,GAAqC,IAArC;IACA7B,MAAM,CAACzG,IAAP,CAAY,OAAZ,EAAqBsC,EAArB,EALK,CAML;IACA;;IACAgI,WAAW,CAAC7D,MAAD,EAASxzC,KAAT,CAAX;EACD;AACF;;AAED,SAASs3C,kBAAT,CAA4Bt3C,KAA5B,EAAmC;EACjCA,KAAK,CAAC00C,OAAN,GAAgB,KAAhB;EACA10C,KAAK,CAAC+0C,OAAN,GAAgB,IAAhB;EACA/0C,KAAK,CAAC8P,MAAN,IAAgB9P,KAAK,CAACg1C,QAAtB;EACAh1C,KAAK,CAACg1C,QAAN,GAAiB,CAAjB;AACD;;AAED,SAASF,OAAT,CAAiBtB,MAAjB,EAAyBnE,EAAzB,EAA6B;EAC3B,IAAIrvC,KAAK,GAAGwzC,MAAM,CAACsC,cAAnB;EACA,IAAIlB,IAAI,GAAG50C,KAAK,CAAC40C,IAAjB;EACA,IAAI3C,EAAE,GAAGjyC,KAAK,CAAC+0C,OAAf;EAEAuC,kBAAkB,CAACt3C,KAAD,CAAlB;EAEA,IAAIqvC,EAAJ,EAAQ+H,YAAY,CAAC5D,MAAD,EAASxzC,KAAT,EAAgB40C,IAAhB,EAAsBvF,EAAtB,EAA0B4C,EAA1B,CAAZ,CAAR,KAAuD;IACrD;IACA,IAAIoC,QAAQ,GAAGkD,UAAU,CAACv3C,KAAD,CAAzB;;IAEA,IAAI,CAACq0C,QAAD,IAAa,CAACr0C,KAAK,CAAC20C,MAApB,IAA8B,CAAC30C,KAAK,CAAC60C,gBAArC,IAAyD70C,KAAK,CAACi1C,eAAnE,EAAoF;MAClF6B,WAAW,CAACtD,MAAD,EAASxzC,KAAT,CAAX;IACD;;IAED,IAAI40C,IAAJ,EAAU;MACR;MACAtC,UAAU,CAAC3zC,UAAD,EAAa60C,MAAb,EAAqBxzC,KAArB,EAA4Bq0C,QAA5B,EAAsCpC,EAAtC,CAAV;MACA;IACD,CAJD,MAIO;MACLtzC,UAAU,CAAC60C,MAAD,EAASxzC,KAAT,EAAgBq0C,QAAhB,EAA0BpC,EAA1B,CAAV;IACD;EACF;AACF;;AAED,SAAStzC,UAAT,CAAoB60C,MAApB,EAA4BxzC,KAA5B,EAAmCq0C,QAAnC,EAA6CpC,EAA7C,EAAiD;EAC/C,IAAI,CAACoC,QAAL,EAAemD,YAAY,CAAChE,MAAD,EAASxzC,KAAT,CAAZ;EACfA,KAAK,CAACm1C,SAAN;EACAlD,EAAE;EACFoF,WAAW,CAAC7D,MAAD,EAASxzC,KAAT,CAAX;AACD,EAED;AACA;AACA;;;AACA,SAASw3C,YAAT,CAAsBhE,MAAtB,EAA8BxzC,KAA9B,EAAqC;EACnC,IAAIA,KAAK,CAAC8P,MAAN,KAAiB,CAAjB,IAAsB9P,KAAK,CAACk0C,SAAhC,EAA2C;IACzCl0C,KAAK,CAACk0C,SAAN,GAAkB,KAAlB;IACAV,MAAM,CAACzG,IAAP,CAAY,OAAZ;EACD;AACF,EAED;;;AACA,SAAS+J,WAAT,CAAqBtD,MAArB,EAA6BxzC,KAA7B,EAAoC;EAClCA,KAAK,CAAC60C,gBAAN,GAAyB,IAAzB;EACA,IAAI1U,KAAK,GAAGngC,KAAK,CAACi1C,eAAlB;;EAEA,IAAIzB,MAAM,CAAC0C,OAAP,IAAkB/V,KAAlB,IAA2BA,KAAK,CAAC38B,IAArC,EAA2C;IACzC;IACA,IAAIi0C,CAAC,GAAGz3C,KAAK,CAACs1C,oBAAd;IACA,IAAIoC,MAAM,GAAG,IAAI5/B,KAAJ,CAAU2/B,CAAV,CAAb;IACA,IAAIE,MAAM,GAAG33C,KAAK,CAACu1C,kBAAnB;IACAoC,MAAM,CAACxX,KAAP,GAAeA,KAAf;IAEA,IAAI6P,KAAK,GAAG,CAAZ;IACA,IAAI4H,UAAU,GAAG,IAAjB;;IACA,OAAOzX,KAAP,EAAc;MACZuX,MAAM,CAAC1H,KAAD,CAAN,GAAgB7P,KAAhB;MACA,IAAI,CAACA,KAAK,CAACuW,KAAX,EAAkBkB,UAAU,GAAG,KAAb;MAClBzX,KAAK,GAAGA,KAAK,CAAC38B,IAAd;MACAwsC,KAAK,IAAI,CAAT;IACD;;IACD0H,MAAM,CAACE,UAAP,GAAoBA,UAApB;IAEAT,OAAO,CAAC3D,MAAD,EAASxzC,KAAT,EAAgB,IAAhB,EAAsBA,KAAK,CAAC8P,MAA5B,EAAoC4nC,MAApC,EAA4C,EAA5C,EAAgDC,MAAM,CAACvF,MAAvD,CAAP,CAjByC,CAmBzC;IACA;;IACApyC,KAAK,CAACm1C,SAAN;IACAn1C,KAAK,CAACk1C,mBAAN,GAA4B,IAA5B;;IACA,IAAIyC,MAAM,CAACn0C,IAAX,EAAiB;MACfxD,KAAK,CAACu1C,kBAAN,GAA2BoC,MAAM,CAACn0C,IAAlC;MACAm0C,MAAM,CAACn0C,IAAP,GAAc,IAAd;IACD,CAHD,MAGO;MACLxD,KAAK,CAACu1C,kBAAN,GAA2B,IAAIrD,aAAJ,CAAkBlyC,KAAlB,CAA3B;IACD;;IACDA,KAAK,CAACs1C,oBAAN,GAA6B,CAA7B;EACD,CA9BD,MA8BO;IACL;IACA,OAAOnV,KAAP,EAAc;MACZ,IAAI4R,KAAK,GAAG5R,KAAK,CAAC4R,KAAlB;MACA,IAAIC,QAAQ,GAAG7R,KAAK,CAAC6R,QAArB;MACA,IAAIC,EAAE,GAAG9R,KAAK,CAACjhB,QAAf;MACA,IAAIxY,GAAG,GAAG1G,KAAK,CAAC0zC,UAAN,GAAmB,CAAnB,GAAuB3B,KAAK,CAACjiC,MAAvC;MAEAqnC,OAAO,CAAC3D,MAAD,EAASxzC,KAAT,EAAgB,KAAhB,EAAuB0G,GAAvB,EAA4BqrC,KAA5B,EAAmCC,QAAnC,EAA6CC,EAA7C,CAAP;MACA9R,KAAK,GAAGA,KAAK,CAAC38B,IAAd;MACAxD,KAAK,CAACs1C,oBAAN,GARY,CASZ;MACA;MACA;MACA;;MACA,IAAIt1C,KAAK,CAAC00C,OAAV,EAAmB;QACjB;MACD;IACF;;IAED,IAAIvU,KAAK,KAAK,IAAd,EAAoBngC,KAAK,CAACk1C,mBAAN,GAA4B,IAA5B;EACrB;;EAEDl1C,KAAK,CAACi1C,eAAN,GAAwB9U,KAAxB;EACAngC,KAAK,CAAC60C,gBAAN,GAAyB,KAAzB;AACD;;AAEDhD,QAAQ,CAAC91B,SAAT,CAAmBi6B,MAAnB,GAA4B,UAAUjE,KAAV,EAAiBC,QAAjB,EAA2BC,EAA3B,EAA+B;EACzDA,EAAE,CAAC,IAAIxrB,KAAJ,CAAU,6BAAV,CAAD,CAAF;AACD,CAFD;;AAIAorB,QAAQ,CAAC91B,SAAT,CAAmBm6B,OAAnB,GAA6B,IAA7B;;AAEArE,QAAQ,CAAC91B,SAAT,CAAmBve,GAAnB,GAAyB,UAAUu0C,KAAV,EAAiBC,QAAjB,EAA2BC,EAA3B,EAA+B;EACtD,IAAIjyC,KAAK,GAAG,KAAK81C,cAAjB;;EAEA,IAAI,OAAO/D,KAAP,KAAiB,UAArB,EAAiC;IAC/BE,EAAE,GAAGF,KAAL;IACAA,KAAK,GAAG,IAAR;IACAC,QAAQ,GAAG,IAAX;EACD,CAJD,MAIO,IAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;IACzCC,EAAE,GAAGD,QAAL;IACAA,QAAQ,GAAG,IAAX;EACD;;EAED,IAAID,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAKt6B,SAAhC,EAA2C,KAAK/Y,KAAL,CAAWqzC,KAAX,EAAkBC,QAAlB,EAZW,CActD;;EACA,IAAIhyC,KAAK,CAAC20C,MAAV,EAAkB;IAChB30C,KAAK,CAAC20C,MAAN,GAAe,CAAf;IACA,KAAKkC,MAAL;EACD,CAlBqD,CAoBtD;;;EACA,IAAI,CAAC72C,KAAK,CAACm0C,MAAP,IAAiB,CAACn0C,KAAK,CAACq0C,QAA5B,EAAsCwD,WAAW,CAAC,IAAD,EAAO73C,KAAP,EAAciyC,EAAd,CAAX;AACvC,CAtBD;;AAwBA,SAASsF,UAAT,CAAoBv3C,KAApB,EAA2B;EACzB,OAAOA,KAAK,CAACm0C,MAAN,IAAgBn0C,KAAK,CAAC8P,MAAN,KAAiB,CAAjC,IAAsC9P,KAAK,CAACi1C,eAAN,KAA0B,IAAhE,IAAwE,CAACj1C,KAAK,CAACq0C,QAA/E,IAA2F,CAACr0C,KAAK,CAAC00C,OAAzG;AACD;;AACD,SAASoD,SAAT,CAAmBtE,MAAnB,EAA2BxzC,KAA3B,EAAkC;EAChCwzC,MAAM,CAAC6C,MAAP,CAAc,UAAU/G,GAAV,EAAe;IAC3BtvC,KAAK,CAACm1C,SAAN;;IACA,IAAI7F,GAAJ,EAAS;MACPkE,MAAM,CAACzG,IAAP,CAAY,OAAZ,EAAqBuC,GAArB;IACD;;IACDtvC,KAAK,CAACo1C,WAAN,GAAoB,IAApB;IACA5B,MAAM,CAACzG,IAAP,CAAY,WAAZ;IACAsK,WAAW,CAAC7D,MAAD,EAASxzC,KAAT,CAAX;EACD,CARD;AASD;;AACD,SAAS+3C,SAAT,CAAmBvE,MAAnB,EAA2BxzC,KAA3B,EAAkC;EAChC,IAAI,CAACA,KAAK,CAACo1C,WAAP,IAAsB,CAACp1C,KAAK,CAACi0C,WAAjC,EAA8C;IAC5C,IAAI,OAAOT,MAAM,CAAC6C,MAAd,KAAyB,UAA7B,EAAyC;MACvCr2C,KAAK,CAACm1C,SAAN;MACAn1C,KAAK,CAACi0C,WAAN,GAAoB,IAApB;MACAtC,GAAG,CAACvF,QAAJ,CAAa0L,SAAb,EAAwBtE,MAAxB,EAAgCxzC,KAAhC;IACD,CAJD,MAIO;MACLA,KAAK,CAACo1C,WAAN,GAAoB,IAApB;MACA5B,MAAM,CAACzG,IAAP,CAAY,WAAZ;IACD;EACF;AACF;;AAED,SAASsK,WAAT,CAAqB7D,MAArB,EAA6BxzC,KAA7B,EAAoC;EAClC,IAAIg4C,IAAI,GAAGT,UAAU,CAACv3C,KAAD,CAArB;;EACA,IAAIg4C,IAAJ,EAAU;IACRD,SAAS,CAACvE,MAAD,EAASxzC,KAAT,CAAT;;IACA,IAAIA,KAAK,CAACm1C,SAAN,KAAoB,CAAxB,EAA2B;MACzBn1C,KAAK,CAACq0C,QAAN,GAAiB,IAAjB;MACAb,MAAM,CAACzG,IAAP,CAAY,QAAZ;IACD;EACF;;EACD,OAAOiL,IAAP;AACD;;AAED,SAASH,WAAT,CAAqBrE,MAArB,EAA6BxzC,KAA7B,EAAoCiyC,EAApC,EAAwC;EACtCjyC,KAAK,CAACm0C,MAAN,GAAe,IAAf;EACAkD,WAAW,CAAC7D,MAAD,EAASxzC,KAAT,CAAX;;EACA,IAAIiyC,EAAJ,EAAQ;IACN,IAAIjyC,KAAK,CAACq0C,QAAV,EAAoB1C,GAAG,CAACvF,QAAJ,CAAa6F,EAAb,EAApB,KAA0CuB,MAAM,CAAC5G,IAAP,CAAY,QAAZ,EAAsBqF,EAAtB;EAC3C;;EACDjyC,KAAK,CAACo0C,KAAN,GAAc,IAAd;EACAZ,MAAM,CAACuC,QAAP,GAAkB,KAAlB;AACD;;AAED,SAAS1D,cAAT,CAAwB4F,OAAxB,EAAiCj4C,KAAjC,EAAwCsvC,GAAxC,EAA6C;EAC3C,IAAInP,KAAK,GAAG8X,OAAO,CAAC9X,KAApB;EACA8X,OAAO,CAAC9X,KAAR,GAAgB,IAAhB;;EACA,OAAOA,KAAP,EAAc;IACZ,IAAI8R,EAAE,GAAG9R,KAAK,CAACjhB,QAAf;IACAlf,KAAK,CAACm1C,SAAN;IACAlD,EAAE,CAAC3C,GAAD,CAAF;IACAnP,KAAK,GAAGA,KAAK,CAAC38B,IAAd;EACD;;EACD,IAAIxD,KAAK,CAACu1C,kBAAV,EAA8B;IAC5Bv1C,KAAK,CAACu1C,kBAAN,CAAyB/xC,IAAzB,GAAgCy0C,OAAhC;EACD,CAFD,MAEO;IACLj4C,KAAK,CAACu1C,kBAAN,GAA2B0C,OAA3B;EACD;AACF;;AAEDh4C,MAAM,CAAC8kB,cAAP,CAAsB8sB,QAAQ,CAAC91B,SAA/B,EAA0C,WAA1C,EAAuD;EACrD1J,GAAG,EAAE,YAAY;IACf,IAAI,KAAKyjC,cAAL,KAAwBr+B,SAA5B,EAAuC;MACrC,OAAO,KAAP;IACD;;IACD,OAAO,KAAKq+B,cAAL,CAAoBxB,SAA3B;EACD,CANoD;EAOrDviC,GAAG,EAAE,UAAUrR,KAAV,EAAiB;IACpB;IACA;IACA,IAAI,CAAC,KAAKo1C,cAAV,EAA0B;MACxB;IACD,CALmB,CAOpB;IACA;;;IACA,KAAKA,cAAL,CAAoBxB,SAApB,GAAgC5zC,KAAhC;EACD;AAjBoD,CAAvD;AAoBAmxC,QAAQ,CAAC91B,SAAT,CAAmBX,OAAnB,GAA6Bk4B,WAAW,CAACl4B,OAAzC;AACAy2B,QAAQ,CAAC91B,SAAT,CAAmBm8B,UAAnB,GAAgC5E,WAAW,CAAC6E,SAA5C;;AACAtG,QAAQ,CAAC91B,SAAT,CAAmBo6B,QAAnB,GAA8B,UAAU7G,GAAV,EAAe2C,EAAf,EAAmB;EAC/C,KAAKz0C,GAAL;EACAy0C,EAAE,CAAC3C,GAAD,CAAF;AACD,CAHD;;AC3qBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACvSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AChOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvUApE,MAAM,CAACC,OAAP,GAAiBiN,MAAjB;AAEA,IAAI92C,cAAc,GAAGrB,MAAM,CAAC8b,SAAP,CAAiBza,cAAtC;;AAEA,SAAS82C,MAAT,GAAkB;EACd,IAAIrrC,MAAM,GAAG,EAAb;;EAEA,KAAK,IAAIuE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsG,SAAS,CAAC9H,MAA9B,EAAsCwB,CAAC,EAAvC,EAA2C;IACvC,IAAI+mC,MAAM,GAAGzgC,SAAS,CAACtG,CAAD,CAAtB;;IAEA,KAAK,IAAIvL,GAAT,IAAgBsyC,MAAhB,EAAwB;MACpB,IAAI/2C,cAAc,CAAC0a,IAAf,CAAoBq8B,MAApB,EAA4BtyC,GAA5B,CAAJ,EAAsC;QAClCgH,MAAM,CAAChH,GAAD,CAAN,GAAcsyC,MAAM,CAACtyC,GAAD,CAApB;MACH;IACJ;EACJ;;EAED,OAAOgH,MAAP;AACH;;AClBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC5tBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AC9Se,MAAM,WAAN,CAAiB;EAE/B,WAAW,CAAC,KAAD,EAAO;IACjB,KAAK,KAAL,GAAa,KAAb;EACA,CAJ8B,CAMhC;EACA;EACA;;;EAEC,UAAU,CAAC,IAAD,EAAO,MAAP,EAAe,cAAf,EAA8B;IACvC,OAAO,KAAK,KAAL,CAAW,UAAX,CAAsB,IAAtB,CAA2B,IAA3B,EAAiC,SAAjC,EAA4C,SAA5C,EAAuD,SAAvD,EAAkE,MAAlE,EAA0E,cAA1E,CAAP;EACA,CAZ8B,CAchC;EACA;EACA;;;EAEC,QAAQ,GAAE;IACT,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,CAA4B,OAA5B,CAAoC,GAAG,SAAvC,CAAP;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,CAA4B,IAA5B,CAAiC,GAAG,SAApC,CAAP;EACA;;EAED,UAAU,GAAE;IACX,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,CAA4B,SAA5B,CAAsC,GAAG,SAAzC,CAAP;EACA,CA5B8B,CA+BhC;EACA;EACA;;;EAEC,gBAAgB,GAAE;IACjB,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,KAAnB,CAAyB,cAAzB,CAAwC,GAAG,SAA3C,CAAP;EACA;;EAED,SAAS,GAAE;IACV,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,KAAnB,CAAyB,IAAzB,CAA8B,GAAG,SAAjC,CAAP;EACA,CAzC8B,CA2ChC;EACA;EACA;;;EAEC,UAAU,GAAE;IACX,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,CAA0B,OAA1B,EAAP;EACA;;EAED,aAAa,CAAC,KAAD,EAAO;IACnB,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,CAA0B,MAA1B,CAAiC,KAAjC,CAAP;EACA,CArD8B,CAwDhC;EACA;EACA;;;EAEC,SAAS,GAAE;IACV,OAAO,KAAK,KAAL,CAAW,QAAX,CAAoB,SAApB,CAA8B,GAAG,SAAjC,CAAP;EACA;;EAED,WAAW,GAAE;IACZ,OAAO,KAAK,KAAL,CAAW,QAAX,CAAoB,WAApB,CAAgC,GAAG,SAAnC,CAAP;EACA;;EAED,UAAU,CAAC,GAAD,EAAK;IACd,OAAO,KAAK,KAAL,CAAW,QAAX,CAAoB,UAApB,CAA+B,GAA/B,CAAP;EACA;;EAED,kBAAkB,GAAE;IACnB,OAAO,KAAK,KAAL,CAAW,QAAX,CAAoB,kBAApB,CAAuC,GAAG,SAA1C,CAAP;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,KAAL,CAAW,QAAX,CAAoB,QAApB,CAA6B,GAAG,SAAhC,CAAP;EACA;;EAED,KAAK,GAAE;IACN,OAAO,KAAK,KAAL,CAAW,QAAX,CAAoB,KAApB,CAA0B,GAAG,SAA7B,CAAP;EACA;;EAED,OAAO,GAAE;IACR,OAAO,KAAK,KAAL,CAAW,QAAX,CAAoB,OAApB,CAA4B,GAAG,SAA/B,CAAP;EACA;;EAED,gBAAgB,GAAE;IACjB,OAAO,KAAK,KAAL,CAAW,cAAX,CAA0B,QAA1B,CAAmC,GAAG,SAAtC,CAAP;EACA;;EAED,kBAAkB,CAAC,GAAD,EAAK;IACtB,OAAO,KAAK,KAAL,CAAW,cAAX,CAA0B,UAA1B,CAAqC,GAArC,CAAP;EACA;;EAED,0BAA0B,GAAE;IAC3B,OAAO,KAAK,KAAL,CAAW,cAAX,CAA0B,kBAA1B,CAA6C,GAAG,SAAhD,CAAP;EACA,CAlG8B,CAoGhC;EACA;EACA;;;EAEC,OAAO,CAAC,GAAD,EAAK;IACX,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,GAAnB,CAAP;EACA;;EAED,SAAS,CAAC,GAAD,EAAM,KAAN,EAAY;IACpB,IAAG,OAAO,KAAP,KAAiB,WAApB,EAAgC;MAC/B,KAAK,KAAL,CAAW,OAAX,CAAmB,GAAnB,IAA0B,KAA1B;IACA;;IAED,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,GAAnB,CAAP;EACA,CAlH8B,CAoHhC;EACA;EACA;;;EAEC,gBAAgB,CAAC,SAAD,EAAY,SAAZ,EAAsB;IACrC,OAAO,KAAK,KAAL,CAAW,kBAAX,CAA8B,KAA9B,CAAoC,SAApC,EAA+C,SAA/C,CAAP;EACA;;EAED,mBAAmB,CAAC,SAAD,EAAY,GAAZ,EAAgB;IAClC,OAAO,KAAK,KAAL,CAAW,kBAAX,CAA8B,QAA9B,CAAuC,SAAvC,EAAkD,GAAlD,CAAP;EACA;;EAED,cAAc,CAAC,GAAD,EAAK;IAClB,OAAO,KAAK,KAAL,CAAW,kBAAX,CAA8B,GAA9B,CAAkC,GAAlC,CAAP;EACA,CAlI8B,CAmIhC;EACA;EACA;;;EAEC,MAAM,CAAC,GAAD,EAAK;IACV,OAAO,KAAK,KAAL,CAAW,MAAX,CAAkB,GAAlB,CAAP;EACA;;AAzI8B;;ACAjB,MAAM,OAAN,CAAa;EAEX,OAAT,SAAS,CAAC,EAAD,EAAI;IACnB,OAAO,EAAE,EAAE,CAAC,WAAH,IAAkB,CAAlB,IAAuB,EAAE,CAAC,YAAH,IAAmB,CAA5C,CAAP;EACA;;EAEc,OAAR,QAAQ,CAAC,EAAD,EAAI;IAClB,IAAI,GAAG,GAAG,EAAE,CAAC,qBAAH,EAAV;IAEA,OAAO;MACN,GAAG,EAAE,GAAG,CAAC,GAAJ,GAAU,MAAM,CAAC,WAAjB,GAA+B,QAAQ,CAAC,eAAT,CAAyB,SADvD;MAEN,IAAI,EAAE,GAAG,CAAC,IAAJ,GAAW,MAAM,CAAC,WAAlB,GAAgC,QAAQ,CAAC,eAAT,CAAyB;IAFzD,CAAP;EAIA;;EAEe,OAAT,SAAS,CAAC,GAAD,EAAM,KAAN,EAAa,IAAI,GAAG,EAApB,EAAuB;IACtC,IAAI,WAAW,GAAG,GAAG,SAArB;IAAA,IACA,UAAU,GAAG,GAAG,SADhB;;IAGA,IAAI,CAAC,KAAL,EAAW;MACV,KAAK,GAAG,MAAM,CAAC,MAAP,CAAc,KAAK,CAAC,OAAN,CAAc,GAAd,IAAqB,EAArB,GAA0B,EAAxC,EAA4C,GAA5C,CAAR;IACA;;IAED,KAAI,IAAI,CAAR,IAAa,GAAb,EAAkB;MACjB,IAAI,OAAO,GAAG,GAAG,CAAC,CAAD,CAAjB;MAAA,IACA,KADA;MAAA,IACO,IADP;;MAGA,IAAG,OAAO,IAAI,IAAX,IAAmB,OAAO,OAAP,KAAmB,QAAtC,KAAmD,OAAO,CAAC,SAAR,KAAsB,WAAtB,IAAqC,OAAO,CAAC,SAAR,KAAsB,UAA9G,CAAH,EAA6H;QAC5H,KAAK,GAAG,IAAI,CAAC,SAAL,CAAgB,IAAD,IAAU;UAChC,OAAO,IAAI,CAAC,OAAL,KAAiB,OAAxB;QACA,CAFO,CAAR;;QAIA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;UACb,KAAK,CAAC,CAAD,CAAL,GAAW,IAAI,CAAC,KAAD,CAAJ,CAAY,IAAvB;QACA,CAFD,MAEK;UACJ,IAAI,GAAG,MAAM,CAAC,MAAP,CAAc,KAAK,CAAC,OAAN,CAAc,OAAd,IAAyB,EAAzB,GAA8B,EAA5C,EAAgD,OAAhD,CAAP;UAEA,IAAI,CAAC,OAAL,CAAa;YAAC,OAAD;YAAU;UAAV,CAAb;UAEA,KAAK,CAAC,CAAD,CAAL,GAAW,KAAK,SAAL,CAAe,OAAf,EAAwB,IAAxB,EAA8B,IAA9B,CAAX;QACA;MACD;IACD;;IAED,OAAO,KAAP;EACA;;AA7C0B;;ACGb,MAAM,KAAN,SAAoB,WAApB,CAA+B;EAC7C,WAAW,CAAC,KAAD,EAAQ,OAAR,EAAiB,MAAjB,EAAwB;IAClC,MAAM,KAAN;IAEA,KAAK,OAAL,GAAe,OAAf;IACA,KAAK,SAAL,GAAiB,KAAK,gBAAL,EAAjB;IAEA,KAAK,MAAL,GAAc,MAAd;IAEA,KAAK,SAAL,GAAiB,KAAjB;IACA,KAAK,UAAL,GAAkB,IAAlB;IACA,KAAK,QAAL,GAAgB,KAAhB;IACA,KAAK,YAAL,GAAoB,IAApB;IACA,KAAK,gBAAL,GAAwB,IAAxB;IAEA,KAAK,OAAL,GAAe,KAAf;IACA,KAAK,QAAL,GAAgB,IAAhB;IAEA,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,2BAA3B;IAEA,KAAK,SAAL,GAAiB,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,EAAqB,KAArB,CAAjB;IACA,KAAK,QAAL,GAAgB,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAhB;IAEA,KAAK,cAAL,GAAsB,KAAK,cAA3B;IACA,KAAK,SAAL,GAAiB,KAAjB;EACA;;EAED,cAAc,GAAE;IACf,KAAK,SAAL,GAAiB,IAAjB;IACA,KAAK,IAAL,CAAU,IAAV;EACA;;EAED,gBAAgB,GAAE;IACjB,IAAI,SAAS,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAnC;;IAEA,IAAG,OAAO,SAAP,KAAqB,QAAxB,EAAiC;MAChC,SAAS,GAAG,QAAQ,CAAC,aAAT,CAAuB,SAAvB,CAAZ;;MAEA,IAAG,CAAC,SAAJ,EAAc;QACb,OAAO,CAAC,IAAR,CAAa,4DAAb,EAA4E,KAAK,KAAL,CAAW,OAAX,CAAmB,cAA/F,EAAgH,+BAAhH;MACA;IACD,CAND,MAMM,IAAI,SAAS,KAAK,IAAlB,EAAuB;MAC5B,SAAS,GAAG,KAAK,KAAL,CAAW,OAAvB;IACA;;IAED,IAAG,SAAS,IAAI,CAAC,KAAK,uBAAL,CAA6B,SAA7B,CAAjB,EAAyD;MACxD,SAAS,GAAG,KAAZ;MACA,OAAO,CAAC,IAAR,CAAa,6DAAb,EAA6E,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAhG,EAAiH,+BAAjH;IACA;;IAED,IAAG,CAAC,SAAJ,EAAc;MACb,SAAS,GAAG,QAAQ,CAAC,IAArB;IACA;;IAED,OAAO,SAAP;EACA;;EAED,uBAAuB,CAAC,SAAD,EAAY,OAAO,GAAG,KAAK,KAAL,CAAW,OAAjC,EAAyC;IAC/D,IAAG,SAAS,KAAK,OAAjB,EAAyB;MACxB,OAAO,IAAP;IACA,CAFD,MAEK;MACJ,OAAO,OAAO,CAAC,UAAR,GAAqB,KAAK,uBAAL,CAA6B,SAA7B,EAAwC,OAAO,CAAC,UAAhD,CAArB,GAAmF,KAA1F;IACA;EACD;;EAED,cAAc,CAAC,QAAD,EAAU;IACvB,KAAK,gBAAL,GAAwB,QAAxB;EACA;;EAED,oBAAoB,CAAC,CAAD,EAAG;IACtB,IAAI,KAAK,GAAG,EAAE,CAAC,YAAY,UAAf,CAAZ;IAEA,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAAhB,GAAwB,CAAC,CAAC,KAAvC;IACA,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAAhB,GAAwB,CAAC,CAAC,KAAvC;;IAEA,IAAG,KAAK,SAAL,KAAmB,QAAQ,CAAC,IAA/B,EAAoC;MACnC,IAAI,YAAY,GAAG,OAAO,CAAC,QAAR,CAAiB,KAAK,SAAtB,CAAnB;MAEA,CAAC,IAAI,YAAY,CAAC,IAAlB;MACA,CAAC,IAAI,YAAY,CAAC,GAAlB;IACA;;IAED,OAAO;MAAC,CAAD;MAAI;IAAJ,CAAP;EACA;;EAED,qBAAqB,CAAC,OAAD,EAAU,QAAQ,GAAG,OAArB,EAA6B;IACjD,IAAI,MAAM,GAAG,OAAO,CAAC,QAAR,CAAiB,OAAjB,CAAb;IAAA,IACA,eADA;IAAA,IACiB,CADjB;IAAA,IACoB,CADpB;;IAGA,IAAG,KAAK,SAAL,KAAmB,QAAQ,CAAC,IAA/B,EAAoC;MACnC,eAAe,GAAG,OAAO,CAAC,QAAR,CAAiB,KAAK,SAAtB,CAAlB;MAEA,MAAM,CAAC,IAAP,IAAe,eAAe,CAAC,IAA/B;MACA,MAAM,CAAC,GAAP,IAAc,eAAe,CAAC,GAA9B;IACA;;IAED,QAAO,QAAP;MACC,KAAK,OAAL;QACC,CAAC,GAAG,MAAM,CAAC,IAAP,GAAc,OAAO,CAAC,WAA1B;QACA,CAAC,GAAG,MAAM,CAAC,GAAP,GAAa,CAAjB;QACA;;MAED,KAAK,QAAL;QACC,CAAC,GAAG,MAAM,CAAC,IAAX;QACA,CAAC,GAAG,MAAM,CAAC,GAAP,GAAa,OAAO,CAAC,YAAzB;QACA;IATF;;IAYA,OAAO;MAAC,CAAD;MAAI,CAAJ;MAAO;IAAP,CAAP;EACA;;EAED,IAAI,CAAC,MAAD,EAAS,QAAT,EAAkB;IACrB,IAAI,CAAJ,EAAO,CAAP,EAAU,QAAV,EAAoB,YAApB,EAAkC,MAAlC;;IAEA,IAAG,KAAK,SAAL,IAAkB,KAAK,KAAL,CAAW,SAAhC,EAA0C;MACzC,OAAO,IAAP;IACA;;IAED,IAAG,MAAM,YAAY,WAArB,EAAiC;MAChC,QAAQ,GAAG,MAAX;MACA,MAAM,GAAG,KAAK,qBAAL,CAA2B,MAA3B,EAAmC,QAAnC,CAAT;MAEA,YAAY,GAAG,MAAM,CAAC,MAAtB;MACA,CAAC,GAAG,MAAM,CAAC,CAAX;MACA,CAAC,GAAG,MAAM,CAAC,CAAX;IAEA,CARD,MAQM,IAAG,OAAO,MAAP,KAAkB,QAArB,EAA8B;MACnC,YAAY,GAAG;QAAC,GAAG,EAAC,CAAL;QAAQ,IAAI,EAAC;MAAb,CAAf;MACA,CAAC,GAAG,MAAJ;MACA,CAAC,GAAG,QAAJ;IACA,CAJK,MAID;MACJ,MAAM,GAAG,KAAK,oBAAL,CAA0B,MAA1B,CAAT;MAEA,CAAC,GAAG,MAAM,CAAC,CAAX;MACA,CAAC,GAAG,MAAM,CAAC,CAAX;MAEA,KAAK,SAAL,GAAiB,KAAjB;IACA;;IAED,KAAK,OAAL,CAAa,KAAb,CAAmB,GAAnB,GAAyB,CAAC,GAAG,IAA7B;IACA,KAAK,OAAL,CAAa,KAAb,CAAmB,IAAnB,GAA0B,CAAC,GAAG,IAA9B;IAEA,KAAK,SAAL,CAAe,WAAf,CAA2B,KAAK,OAAhC;;IAEA,IAAG,OAAO,KAAK,gBAAZ,KAAiC,UAApC,EAA+C;MAC9C,KAAK,gBAAL;IACA;;IAED,KAAK,YAAL,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,QAAxB,EAAkC,YAAlC,EAAgD,QAAhD;;IAEA,KAAK,OAAL,GAAe,IAAf;IAEA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,cAArC;IAEA,KAAK,OAAL,CAAa,gBAAb,CAA8B,WAA9B,EAA4C,CAAD,IAAO;MACjD,CAAC,CAAC,eAAF;IACA,CAFD;IAIA,OAAO,IAAP;EACA;;EAED,YAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,QAAP,EAAiB,YAAjB,EAA+B,QAA/B,EAAwC;IACnD,IAAI,SAAS,GAAG,KAAK,SAAL,KAAmB,QAAQ,CAAC,IAA5B,GAAmC,QAAQ,CAAC,eAAT,CAAyB,SAA5D,GAAwE,KAAK,SAAL,CAAe,SAAvG,CADmD,CAGrD;;IACE,IAAI,CAAC,GAAG,KAAK,OAAL,CAAa,WAAlB,IAAkC,KAAK,SAAL,CAAe,WAAjD,IAAgE,KAAK,SAAxE,EAAkF;MACjF,KAAK,OAAL,CAAa,KAAb,CAAmB,IAAnB,GAA0B,EAA1B;;MAEA,IAAG,QAAH,EAAY;QACX,KAAK,OAAL,CAAa,KAAb,CAAmB,KAAnB,GAA4B,KAAK,SAAL,CAAe,WAAf,GAA6B,YAAY,CAAC,IAA3C,GAAmD,IAA9E;MACA,CAFD,MAEK;QACJ,KAAK,OAAL,CAAa,KAAb,CAAmB,KAAnB,GAA4B,KAAK,SAAL,CAAe,WAAf,GAA6B,CAA9B,GAAmC,IAA9D;MACA;;MAED,KAAK,SAAL,GAAiB,IAAjB;IACA,CAdkD,CAgBrD;;;IACE,IAAI,CAAC,GAAG,KAAK,OAAL,CAAa,YAAlB,GAAkC,IAAI,CAAC,GAAL,CAAS,KAAK,SAAL,CAAe,YAAxB,EAAsC,SAAS,GAAG,KAAK,SAAL,CAAe,YAAlB,GAAiC,CAAhF,CAArC,EAAyH;MACxH,IAAG,QAAH,EAAY;QACX,QAAO,QAAP;UACC,KAAK,QAAL;YACC,KAAK,OAAL,CAAa,KAAb,CAAmB,GAAnB,GAA0B,QAAQ,CAAC,KAAK,OAAL,CAAa,KAAb,CAAmB,GAApB,CAAR,GAAmC,KAAK,OAAL,CAAa,YAAhD,GAA+D,QAAQ,CAAC,YAAxE,GAAuF,CAAxF,GAA6F,IAAtH;YACA;;UAED;YACC,KAAK,OAAL,CAAa,KAAb,CAAmB,GAAnB,GAA0B,QAAQ,CAAC,KAAK,OAAL,CAAa,KAAb,CAAmB,GAApB,CAAR,GAAmC,KAAK,OAAL,CAAa,YAAhD,GAA+D,QAAQ,CAAC,YAAxE,GAAuF,CAAxF,GAA6F,IAAtH;QANF;MASA,CAVD,MAUK;QACJ,KAAK,OAAL,CAAa,KAAb,CAAmB,GAAnB,GAA0B,QAAQ,CAAC,KAAK,OAAL,CAAa,KAAb,CAAmB,GAApB,CAAR,GAAmC,KAAK,OAAL,CAAa,YAAjD,GAAiE,IAA1F;MACA;IACD;EACD;;EAED,SAAS,GAAE;IACV,OAAO,KAAK,OAAZ;EACA;;EAED,UAAU,CAAC,QAAD,EAAU;IACnB,KAAK,QAAL,GAAgB,IAAhB;;IAEA,IAAG,KAAK,OAAR,EAAgB;MACf,UAAU,CAAC,MAAM;QAChB,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,gBAA9B,CAA+C,QAA/C,EAAyD,KAAK,SAA9D;QACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,SAApC;QACA,QAAQ,CAAC,IAAT,CAAc,gBAAd,CAA+B,OAA/B,EAAwC,KAAK,SAA7C;QACA,QAAQ,CAAC,IAAT,CAAc,gBAAd,CAA+B,aAA/B,EAA8C,KAAK,SAAnD;QACA,QAAQ,CAAC,IAAT,CAAc,gBAAd,CAA+B,WAA/B,EAA4C,KAAK,SAAjD;QACA,MAAM,CAAC,gBAAP,CAAwB,QAAxB,EAAkC,KAAK,SAAvC;QACA,QAAQ,CAAC,IAAT,CAAc,gBAAd,CAA+B,SAA/B,EAA0C,KAAK,QAA/C;MAEA,CATS,EASP,GATO,CAAV;MAWA,KAAK,YAAL,GAAoB,QAApB;IACA;;IAED,OAAO,IAAP;EACA;;EAED,YAAY,CAAC,CAAD,EAAG;IACd,IAAG,CAAC,CAAC,OAAF,IAAa,EAAhB,EAAmB;MAClB,KAAK,IAAL;IACA;EACD;;EAED,SAAS,GAAE;IACV,KAAK,QAAL,GAAgB,KAAhB;EACA;;EAED,WAAW,GAAE;IACZ,KAAK,QAAL,GAAgB,IAAhB;EACA;;EAED,IAAI,CAAC,MAAM,GAAG,KAAV,EAAgB;IACnB,IAAG,KAAK,OAAL,IAAgB,KAAK,QAAxB,EAAiC;MAChC,IAAG,KAAK,QAAR,EAAiB;QAChB,QAAQ,CAAC,IAAT,CAAc,mBAAd,CAAkC,SAAlC,EAA6C,KAAK,QAAlD;QACA,QAAQ,CAAC,IAAT,CAAc,mBAAd,CAAkC,OAAlC,EAA2C,KAAK,SAAhD;QACA,QAAQ,CAAC,IAAT,CAAc,mBAAd,CAAkC,aAAlC,EAAiD,KAAK,SAAtD;QACA,QAAQ,CAAC,IAAT,CAAc,mBAAd,CAAkC,WAAlC,EAA+C,KAAK,SAApD;QACA,MAAM,CAAC,mBAAP,CAA2B,QAA3B,EAAqC,KAAK,SAA1C;QACA,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,mBAA9B,CAAkD,QAAlD,EAA4D,KAAK,SAAjE;QACA,KAAK,WAAL,CAAiB,cAAjB,EAAiC,KAAK,SAAtC;MACA;;MAED,IAAG,KAAK,UAAR,EAAmB;QAClB,KAAK,UAAL,CAAgB,IAAhB;MACA;;MAED,IAAG,KAAK,MAAR,EAAe;QACd,KAAK,MAAL,CAAY,UAAZ,GAAyB,IAAzB;MACA;;MAED,IAAG,KAAK,OAAL,CAAa,UAAhB,EAA2B;QAC1B,KAAK,OAAL,CAAa,UAAb,CAAwB,WAAxB,CAAoC,KAAK,OAAzC;MACA;;MAED,KAAK,OAAL,GAAe,KAAf;;MAEA,IAAG,KAAK,YAAL,IAAqB,CAAC,MAAzB,EAAgC;QAC/B,KAAK,YAAL;MACA;;MAED,KAAK,WAAL,CAAiB,eAAjB,EAAkC,KAAK,cAAvC;IACA;;IAED,OAAO,IAAP;EACA;;EAED,KAAK,CAAC,OAAD,EAAS;IACb,IAAG,KAAK,UAAR,EAAmB;MAClB,KAAK,UAAL,CAAgB,IAAhB;IACA;;IAED,KAAK,UAAL,GAAkB,IAAI,KAAJ,CAAU,KAAK,KAAf,EAAsB,OAAtB,EAA+B,IAA/B,CAAlB;IAEA,OAAO,KAAK,UAAZ;EACA;;AAtR4C;;ACA9C,MAAM,MAAN,SAAqB,WAArB,CAAgC;EAE/B,WAAW,CAAC,KAAD,EAAQ,IAAR,EAAa;IACvB,MAAM,KAAN;IAEA,KAAK,QAAL,GAAgB,IAAhB;EACA;;EAED,UAAU,GAAE,CACb;EACE,CAV8B,CAahC;EACA;EACA;;;EAEC,mBAAmB,CAAC,GAAD,EAAM,KAAN,EAAY;IAC9B,KAAK,KAAL,CAAW,WAAX,CAAuB,QAAvB,CAAgC,GAAhC,EAAqC,KAArC;EACA;;EAED,oBAAoB,CAAC,GAAD,EAAM,KAAN,EAAY;IAC/B,KAAK,KAAL,CAAW,aAAX,CAAyB,WAAzB,CAAqC,QAArC,CAA8C,GAA9C,EAAmD,KAAnD;EACA,CAvB8B,CAyBhC;EACA;EACA;;;EAEC,qBAAqB,CAAC,IAAD,EAAO,IAAP,EAAY;IAChC,IAAG,OAAO,KAAK,KAAL,CAAW,IAAX,CAAP,KAA4B,WAA/B,EAA2C;MAC1C,KAAK,KAAL,CAAW,IAAX,IAAmB,CAAC,GAAG,IAAJ,KAAa;QAC/B,KAAK,KAAL,CAAW,SAAX,CAAqB,IAArB;QAEA,OAAO,IAAI,CAAC,GAAG,IAAJ,CAAX;MACA,CAJD;IAKA,CAND,MAMK;MACJ,OAAO,CAAC,IAAR,CAAa,oDAAb,EAAmE,IAAnE;IACA;EACD;;EAED,yBAAyB,CAAC,SAAD,EAAY,IAAZ,EAAkB,OAAlB,EAA0B;IAClD,OAAO,KAAK,KAAL,CAAW,uBAAX,CAAmC,IAAnC,CAAwC,SAAxC,EAAmD,IAAnD,EAAyD,OAAzD,CAAP;EACA,CA3C8B,CA6ChC;EACA;EACA;;;EAEC,mBAAmB,CAAC,OAAD,EAAU,QAAV,EAAmB;IACrC,KAAK,KAAL,CAAW,UAAX,CAAsB,2BAAtB,CAAkD,OAAlD,EAA2D,QAA3D;IACA,KAAK,QAAL,GAAgB,OAAhB;EACA;;EAED,sBAAsB,CAAC,OAAD,EAAU,QAAV,EAAmB;IACxC,KAAK,KAAL,CAAW,UAAX,CAAsB,8BAAtB,CAAqD,OAArD,EAA8D,QAA9D;IACA,KAAK,QAAL,GAAgB,OAAhB;EACA;;EAED,WAAW,CAAC,gBAAD,EAAmB,OAAnB,EAA2B;IACrC,IAAG,CAAC,OAAJ,EAAY;MACX,OAAO,GAAG,KAAK,QAAf;IACA;;IAED,IAAG,OAAH,EAAW;MACV,KAAK,KAAL,CAAW,UAAX,CAAsB,iBAAtB,CAAwC,OAAxC,EAAiD,KAAjD,EAAwD,gBAAxD;IACA;EACD,CAnE8B,CAqEhC;EACA;EACA;;;EAEC,YAAY,CAAC,OAAD,EAAS;IACpB,OAAO,KAAK,KAAL,CAAW,aAAX,CAAyB,MAAzB,CAAgC,OAAhC,CAAP;EACA;;EAED,aAAa,CAAC,OAAD,EAAS;IACrB,OAAO,KAAK,KAAL,CAAW,aAAX,CAAyB,OAAzB,CAAiC,OAAjC,CAAP;EACA;;EAED,YAAY,CAAC,OAAD,EAAS;IACpB,OAAO,KAAK,KAAL,CAAW,aAAX,CAAyB,MAAzB,CAAgC,OAAhC,CAAP;EACA,CAnF8B,CAqFhC;EACA;EACA;;;EAEC,KAAK,CAAC,MAAD,EAAS,aAAT,EAAuB;IAC3B,OAAO,IAAI,KAAJ,CAAU,KAAK,KAAf,EAAsB,MAAtB,EAA8B,aAA9B,CAAP;EACA,CA3F8B,CA6FhC;EACA;EACA;;;EAEC,KAAK,CAAC,OAAD,EAAU,IAAV,EAAe;IACnB,OAAO,KAAK,KAAL,CAAW,YAAX,CAAwB,KAAxB,CAA8B,OAA9B,EAAuC,IAAvC,CAAP;EACA;;EAED,UAAU,GAAE;IACX,OAAO,KAAK,KAAL,CAAW,YAAX,CAAwB,KAAxB,EAAP;EACA;;AAvG8B;;;ACHhC,IAAA,gBAAA,GAAe,EAAf;;ACKA,MAAM,QAAN,SAAuB,MAAvB,CAA6B;EAE5B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,YAAL,GAAoB,CAAC,EAAD,EAAK,MAAL,EAAa,UAAb,EAAyB,WAAzB,EAAsC,OAAtC,EAA+C,YAA/C,CAApB,CAHiB,CAGgE;;IAEjF,KAAK,oBAAL,CAA0B,UAA1B;IACA,KAAK,oBAAL,CAA0B,gBAA1B;IACA,KAAK,oBAAL,CAA0B,cAA1B;IACA,KAAK,oBAAL,CAA0B,oBAA1B;IACA,KAAK,oBAAL,CAA0B,kBAA1B;IACA,KAAK,oBAAL,CAA0B,wBAA1B;IACA,KAAK,oBAAL,CAA0B,mBAA1B;IACA,KAAK,oBAAL,CAA0B,yBAA1B;IACA,KAAK,oBAAL,CAA0B,eAA1B;IACA,KAAK,oBAAL,CAA0B,qBAA1B;IACA,KAAK,oBAAL,CAA0B,oBAA1B;IACA,KAAK,oBAAL,CAA0B,0BAA1B;EACA;;EAED,UAAU,GAAE;IACX,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAAhC;IACA,KAAK,SAAL,CAAe,mBAAf,EAAoC,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAApC;EACA,CAxB2B,CA0B7B;;;EACC,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAI,KAAK,GAAG,KAAZ;IAAA,IACA,MAAM,GAAG,EADT;IAGA,KAAK,YAAL,CAAkB,OAAlB,CAA2B,IAAD,IAAU;MACnC,IAAI,GAAG,GAAG,cAAc,IAAI,CAAC,MAAL,CAAY,CAAZ,EAAe,WAAf,KAA+B,IAAI,CAAC,KAAL,CAAW,CAAX,CAA7C,CAAV;MAAA,IACA,QADA;;MAGA,IAAG,MAAM,CAAC,UAAP,CAAkB,GAAlB,CAAH,EAA0B;QACzB,QAAQ,GAAG,KAAK,cAAL,CAAoB,MAAM,CAAC,UAAP,CAAkB,GAAlB,CAApB,CAAX;;QAEA,IAAG,QAAH,EAAY;UACX,KAAK,GAAG,IAAR;UAEA,MAAM,CAAC,GAAD,CAAN,GAAc;YACb,QAAQ,EAAC,QADI;YAEb,MAAM,EAAE,MAAM,CAAC,UAAP,CAAkB,GAAG,GAAG,QAAxB,KAAqC;UAFhC,CAAd;QAIA;MACD;IACD,CAhBD;;IAkBA,IAAG,KAAH,EAAS;MACR,MAAM,CAAC,OAAP,CAAe,QAAf,GAA0B,MAA1B;IACA;EACD;;EAED,cAAc,CAAC,KAAD,EAAO;IACpB,IAAI,QAAQ,GAAG,KAAf,CADoB,CAGtB;;IACE,QAAO,OAAO,KAAd;MACC,KAAK,QAAL;QACC,IAAG,QAAQ,CAAC,SAAT,CAAmB,KAAnB,CAAH,EAA6B;UAC5B,QAAQ,GAAG,QAAQ,CAAC,SAAT,CAAmB,KAAnB,CAAX;QACA,CAFD,MAEK;UACJ,OAAO,CAAC,IAAR,CAAa,qDAAb,EAAoE,KAApE;QACA;;QACD;;MAED,KAAK,UAAL;QACC,QAAQ,GAAG,KAAX;QACA;IAXF;;IAcA,OAAO,QAAP;EACA,CAzE2B,CA2E7B;;;EACC,YAAY,CAAC,GAAD,EAAM,IAAN,EAAW;IACtB,IAAI,GAAG,GAAG,cAAc,IAAI,CAAC,MAAL,CAAY,CAAZ,EAAe,WAAf,KAA+B,IAAI,CAAC,KAAL,CAAW,CAAX,CAA7C,CAAV;IAAA,IACA,YAAY,GAAG,GAAG,CAAC,YAAJ,EADf,CADsB,CAIxB;;IACE,IAAI,IAAI,GAAG,OAAO,CAAC,SAAR,CAAkB,GAAG,CAAC,IAAJ,IAAY,EAA9B,CAAX;IAEA,KAAK,KAAL,CAAW,aAAX,CAAyB,QAAzB,CAAkC,UAAS,MAAT,EAAgB;MACjD,IAAI,KAAJ,EAAW,QAAX,EAAqB,MAArB,EAA6B,YAA7B;;MAEA,IAAG,MAAM,CAAC,OAAP,CAAe,QAAlB,EAA2B;QAE1B,QAAQ,GAAG,MAAM,CAAC,OAAP,CAAe,QAAf,CAAwB,GAAxB,KAAgC,MAAM,CAAC,OAAP,CAAe,QAAf,CAAwB,QAAxD,IAAoE,KAA/E;;QAEA,IAAG,QAAH,EAAY;UACX,KAAK,GAAG,MAAM,CAAC,aAAP,CAAqB,IAArB,CAAR;;UAEA,IAAG,KAAK,IAAI,WAAZ,EAAwB;YACvB,YAAY,GAAG,MAAM,CAAC,YAAP,EAAf;YACA,MAAM,GAAG,OAAO,QAAQ,CAAC,MAAhB,KAA2B,UAA3B,GAAwC,QAAQ,CAAC,MAAT,CAAgB,KAAhB,EAAuB,IAAvB,EAA6B,IAA7B,EAAmC,YAAnC,EAAiD,YAAjD,CAAxC,GAAyG,QAAQ,CAAC,MAA3H;YACA,MAAM,CAAC,aAAP,CAAqB,IAArB,EAA2B,QAAQ,CAAC,QAAT,CAAkB,KAAlB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,MAArC,EAA6C,YAA7C,EAA2D,YAA3D,CAA3B;UACA;QACD;MACD;IACD,CAjBD;IAmBA,OAAO,IAAP;EACA;;AAvG2B,EA0G7B;;;;AACA,QAAQ,CAAC,UAAT,GAAsB,UAAtB;AACA,QAAQ,CAAC,SAAT,GAAqB,gBAArB;ACjHA,IAAA,aAAA,GAAe;EACd,MAAM,EAAE;AADM,CAAf;;ACAA,SAAS,kBAAT,CAA4B,IAA5B,EAAkC,MAAlC,EAAyC;EACxC,IAAI,MAAM,GAAG,EAAb;EAEA,MAAM,GAAG,MAAM,IAAI,EAAnB;;EAEA,IAAG,KAAK,CAAC,OAAN,CAAc,IAAd,CAAH,EAAuB;IACtB,IAAI,CAAC,OAAL,CAAa,CAAC,IAAD,EAAO,CAAP,KAAa;MACzB,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,kBAAkB,CAAC,IAAD,EAAO,MAAM,GAAG,MAAM,GAAG,GAAT,GAAe,CAAf,GAAmB,GAAtB,GAA4B,CAAzC,CAAhC,CAAT;IACA,CAFD;EAGA,CAJD,MAIM,IAAI,OAAO,IAAP,KAAgB,QAApB,EAA6B;IAClC,KAAK,IAAI,GAAT,IAAgB,IAAhB,EAAqB;MACpB,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,kBAAkB,CAAC,IAAI,CAAC,GAAD,CAAL,EAAY,MAAM,GAAG,MAAM,GAAG,GAAT,GAAe,GAAf,GAAqB,GAAxB,GAA8B,GAAhD,CAAhC,CAAT;IACA;EACD,CAJK,MAID;IACJ,MAAM,CAAC,IAAP,CAAY;MAAC,GAAG,EAAC,MAAL;MAAa,KAAK,EAAC;IAAnB,CAAZ;EACA;;EAED,OAAO,MAAP;AACA;;AAED,SAAS,eAAT,CAAyB,MAAzB,EAAgC;EAC/B,IAAI,MAAM,GAAG,kBAAkB,CAAC,MAAD,CAA/B;EAAA,IACA,OAAO,GAAG,EADV;EAGA,MAAM,CAAC,OAAP,CAAe,UAAS,IAAT,EAAc;IAC5B,OAAO,CAAC,IAAR,CAAa,kBAAkB,CAAC,IAAI,CAAC,GAAN,CAAlB,GAA+B,GAA/B,GAAqC,kBAAkB,CAAC,IAAI,CAAC,KAAN,CAApE;EACA,CAFD;EAIA,OAAO,OAAO,CAAC,IAAR,CAAa,GAAb,CAAP;AACA;;AAEc,SAAA,UAAA,CAAS,GAAT,EAAc,MAAd,EAAsB,MAAtB,EAA6B;EAC3C,IAAG,GAAH,EAAO;IACN,IAAG,MAAM,IAAI,MAAM,CAAC,IAAP,CAAY,MAAZ,EAAoB,MAAjC,EAAwC;MACvC,IAAG,CAAC,MAAM,CAAC,MAAR,IAAkB,MAAM,CAAC,MAAP,CAAc,WAAd,MAA+B,KAApD,EAA0D;QACzD,MAAM,CAAC,MAAP,GAAgB,KAAhB;QAEA,GAAG,IAAI,CAAC,GAAG,CAAC,QAAJ,CAAa,GAAb,IAAoB,GAApB,GAA0B,GAA3B,IAAkC,eAAe,CAAC,MAAD,CAAxD;MACA;IACD;EACD;;EAED,OAAO,GAAP;AACD;;AC3Ce,SAAA,oBAAA,CAAS,GAAT,EAAc,MAAd,EAAsB,MAAtB,EAA6B;EAC3C,IAAI,WAAJ;EAEA,OAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAqB;IACzC;IACE,GAAG,GAAG,KAAK,YAAL,CAAkB,IAAlB,CAAuB,KAAK,KAA5B,EAAmC,GAAnC,EAAwC,MAAxC,EAAgD,MAAhD,CAAN,CAFuC,CAIzC;;IACE,IAAG,MAAM,CAAC,MAAP,CAAc,WAAd,MAA+B,KAAlC,EAAwC;MACvC,WAAW,GAAG,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,eAA1B,KAA8C,QAA9C,GAA0D,KAAK,KAAL,CAAW,OAAX,CAAmB,eAA7E,GAA+F,KAAK,qBAAL,CAA2B,KAAK,KAAL,CAAW,OAAX,CAAmB,eAA9C,CAA7G;;MACA,IAAG,WAAH,EAAe;QAEd,KAAI,IAAI,GAAR,IAAe,WAAW,CAAC,OAA3B,EAAmC;UAClC,IAAG,CAAC,MAAM,CAAC,OAAX,EAAmB;YAClB,MAAM,CAAC,OAAP,GAAiB,EAAjB;UACA;;UAED,IAAG,OAAO,MAAM,CAAC,OAAP,CAAe,GAAf,CAAP,KAA+B,WAAlC,EAA8C;YAC7C,MAAM,CAAC,OAAP,CAAe,GAAf,IAAsB,WAAW,CAAC,OAAZ,CAAoB,GAApB,CAAtB;UACA;QACD;;QAED,MAAM,CAAC,IAAP,GAAc,WAAW,CAAC,IAAZ,CAAiB,IAAjB,CAAsB,IAAtB,EAA4B,GAA5B,EAAiC,MAAjC,EAAyC,MAAzC,CAAd;MAEA,CAdD,MAcK;QACJ,OAAO,CAAC,IAAR,CAAa,6CAAb,EAA4D,KAAK,KAAL,CAAW,OAAX,CAAmB,eAA/E;MACA;IACD;;IAED,IAAG,GAAH,EAAO;MACT;MACG,IAAG,OAAO,MAAM,CAAC,OAAd,KAA0B,WAA7B,EAAyC;QACxC,MAAM,CAAC,OAAP,GAAiB,EAAjB;MACA;;MAED,IAAG,OAAO,MAAM,CAAC,OAAP,CAAe,MAAtB,KAAiC,WAApC,EAAgD;QAC/C,MAAM,CAAC,OAAP,CAAe,MAAf,GAAwB,kBAAxB;MACA;;MAED,IAAG,OAAO,MAAM,CAAC,OAAP,CAAe,kBAAf,CAAP,KAA8C,WAAjD,EAA6D;QAC5D,MAAM,CAAC,OAAP,CAAe,kBAAf,IAAqC,gBAArC;MACA;;MAED,IAAG,OAAO,MAAM,CAAC,IAAd,KAAuB,WAA1B,EAAsC;QACrC,MAAM,CAAC,IAAP,GAAc,MAAd;MACA;;MAED,IAAG,MAAM,CAAC,IAAP,IAAe,MAAlB,EAAyB;QACxB,IAAG,OAAO,MAAM,CAAC,OAAP,CAAe,QAAf,CAAP,KAAoC,WAAvC,EAAmD;UAClD,MAAM,CAAC,OAAP,CAAe,QAAf,IAA2B,MAAM,CAAC,QAAP,CAAgB,MAA3C;QACA;;QAED,IAAG,OAAO,MAAM,CAAC,WAAd,KAA8B,WAAjC,EAA6C;UAC5C,MAAM,CAAC,WAAP,GAAqB,aAArB;QACA;MACD,CARD,MAQK;QACJ,IAAG,OAAO,MAAM,CAAC,WAAd,KAA8B,WAAjC,EAA6C;UAC5C,MAAM,CAAC,WAAP,GAAqB,SAArB;QACA;MACD,CA9BK,CAgCT;;;MACG,KAAK,CAAC,GAAD,EAAM,MAAN,CAAL,CACE,IADF,CACQ,QAAD,IAAY;QACjB,IAAG,QAAQ,CAAC,EAAZ,EAAgB;UACf,QAAQ,CAAC,IAAT,GACE,IADF,CACQ,IAAD,IAAQ;YACb,OAAO,CAAC,IAAD,CAAP;UACA,CAHF,EAGI,KAHJ,CAGW,KAAD,IAAS;YACjB,MAAM,CAAC,KAAD,CAAN;YACA,OAAO,CAAC,IAAR,CAAa,yCAAb,EAAwD,KAAxD;UACA,CANF;QAOA,CARD,MAQK;UACJ,OAAO,CAAC,KAAR,CAAc,yCAAyC,QAAQ,CAAC,MAAhE,EAAwE,QAAQ,CAAC,UAAjF;UACA,MAAM,CAAC,QAAD,CAAN;QACA;MACD,CAdF,EAeE,KAfF,CAeS,KAAD,IAAS;QACf,OAAO,CAAC,KAAR,CAAc,sCAAd,EAAsD,KAAtD;QACA,MAAM,CAAC,KAAD,CAAN;MACA,CAlBF;IAmBA,CApDD,MAoDK;MACJ,OAAO,CAAC,IAAR,CAAa,8BAAb;MACA,OAAO,CAAC,EAAD,CAAP;IACA;EACD,CAlFM,CAAP;AAmFD;;ACtFA,SAASgI,oBAAT,CAA4B,IAA5B,EAAkC,MAAlC,EAAyC;EACxC,IAAI,MAAM,GAAG,EAAb;EAEA,MAAM,GAAG,MAAM,IAAI,EAAnB;;EAEA,IAAG,KAAK,CAAC,OAAN,CAAc,IAAd,CAAH,EAAuB;IACtB,IAAI,CAAC,OAAL,CAAa,CAAC,IAAD,EAAO,CAAP,KAAa;MACzB,MAAM,GAAG,MAAM,CAAC,MAAP,CAAcA,oBAAkB,CAAC,IAAD,EAAO,MAAM,GAAG,MAAM,GAAG,GAAT,GAAe,CAAf,GAAmB,GAAtB,GAA4B,CAAzC,CAAhC,CAAT;IACA,CAFD;EAGA,CAJD,MAIM,IAAI,OAAO,IAAP,KAAgB,QAApB,EAA6B;IAClC,KAAK,IAAI,GAAT,IAAgB,IAAhB,EAAqB;MACpB,MAAM,GAAG,MAAM,CAAC,MAAP,CAAcA,oBAAkB,CAAC,IAAI,CAAC,GAAD,CAAL,EAAY,MAAM,GAAG,MAAM,GAAG,GAAT,GAAe,GAAf,GAAqB,GAAxB,GAA8B,GAAhD,CAAhC,CAAT;IACA;EACD,CAJK,MAID;IACJ,MAAM,CAAC,IAAP,CAAY;MAAC,GAAG,EAAC,MAAL;MAAa,KAAK,EAAC;IAAnB,CAAZ;EACA;;EAED,OAAO,MAAP;AACA;;AAED,IAAA,4BAAA,GAAe;EACd,QAAO;IACN,OAAO,EAAC;MACP,gBAAgB;IADT,CADF;IAIN,IAAI,EAAC,UAAS,GAAT,EAAc,MAAd,EAAsB,MAAtB,EAA6B;MACjC,OAAO,IAAI,CAAC,SAAL,CAAe,MAAf,CAAP;IACA;EANK,CADO;EASd,QAAO;IACN,OAAO,EAAC,EADF;IAGN,IAAI,EAAC,UAAS,GAAT,EAAc,MAAd,EAAsB,MAAtB,EAA6B;MAEjC,IAAI,MAAM,GAAGA,oBAAkB,CAAC,MAAD,CAA/B;MAAA,IACA,IAAI,GAAG,IAAI,QAAJ,EADP;MAGA,MAAM,CAAC,OAAP,CAAe,UAAS,IAAT,EAAc;QAC5B,IAAI,CAAC,MAAL,CAAY,IAAI,CAAC,GAAjB,EAAsB,IAAI,CAAC,KAA3B;MACA,CAFD;MAIA,OAAO,IAAP;IACA;EAbK;AATO,CAAf;;ACbA,MAAM,IAAN,SAAmB,MAAnB,CAAyB;EAExB,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,MAAL,GAAc,EAAd,CAHiB,CAGA;;IACjB,KAAK,GAAL,GAAW,EAAX,CAJiB,CAIH;;IACd,KAAK,YAAL,GAAoB,KAApB;IACA,KAAK,MAAL,GAAc,KAAd,CANiB,CAMG;;IAEpB,KAAK,aAAL,GAAqB,KAArB;IAEA,KAAK,mBAAL,CAAyB,SAAzB,EAAoC,KAApC,EAViB,CAU0B;;IAC3C,KAAK,mBAAL,CAAyB,kBAAzB,EAA6C,KAA7C;IACA,KAAK,mBAAL,CAAyB,YAAzB,EAAuC,EAAvC,EAZiB,CAY0B;;IAC3C,KAAK,mBAAL,CAAyB,YAAzB,EAAuC,KAAvC,EAbiB,CAa6B;;IAC9C,KAAK,mBAAL,CAAyB,iBAAzB,EAA4C,MAA5C,EAdiB,CAcmC;;IACpD,KAAK,mBAAL,CAAyB,iBAAzB,EAA4C,KAA5C,EAfiB,CAekC;;IAEnD,KAAK,mBAAL,CAAyB,gBAAzB,EAA2C,YAAU,CAAE,CAAvD;IACA,KAAK,mBAAL,CAAyB,cAAzB,EAAyC,KAAzC;IAEA,KAAK,qBAAL,GAA6B,IAAI,CAAC,qBAAlC;EACA,CAvBuB,CAyBzB;;;EACC,UAAU,GAAE;IACX,KAAK,aAAL,GAAqB,KAAK,KAAL,CAAW,OAAX,CAAmB,eAAnB,IAAsC,IAAI,CAAC,oBAAhE;IACA,KAAK,YAAL,GAAoB,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,IAAuC,IAAI,CAAC,mBAAhE;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAtB,EAA8B;MAC7B,KAAK,MAAL,CAAY,KAAK,KAAL,CAAW,OAAX,CAAmB,OAA/B;IACA;;IAGD,KAAK,gBAAL,CAAsB,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAzC;IAEA,KAAK,qBAAL,CAA2B,YAA3B,EAAyC,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAAzC;IAEA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA/B;IACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAA9B;IACA,KAAK,SAAL,CAAe,WAAf,EAA4B,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAA5B;EACA;;EAED,aAAa,CAAC,IAAD,EAAO,MAAP,EAAe,MAAf,EAAuB,MAAvB,EAA8B;IAC1C,IAAI,UAAU,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAApC;;IAEA,IAAG,UAAH,EAAc;MACb,IAAG,OAAO,UAAP,KAAsB,UAAzB,EAAoC;QACnC,UAAU,GAAG,UAAU,CAAC,IAAX,CAAgB,KAAK,KAArB,CAAb;MACA;;MAED,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,MAAd,EAAsB,UAAtB,CAAT;IACA;;IAED,OAAO,MAAP;EACA;;EAED,gBAAgB,CAAC,IAAD,EAAO,MAAP,EAAe,MAAf,EAAuB,MAAvB,EAA8B;IAC7C,OAAO,CAAC,EAAG,CAAC,IAAD,IAAS,KAAK,GAAf,IAAuB,OAAO,IAAP,KAAgB,QAAzC,CAAR;EACA;;EAED,WAAW,CAAC,GAAD,EAAM,MAAN,EAAc,MAAd,EAAsB,MAAtB,EAA8B,YAA9B,EAA2C;IACrD,IAAI,UAAJ;;IAEA,IAAG,CAAC,YAAD,IAAiB,KAAK,gBAAL,CAAsB,GAAtB,CAApB,EAA+C;MAC9C,IAAG,GAAH,EAAO;QACN,KAAK,MAAL,CAAY,GAAZ;MACA;;MAED,UAAU,GAAG,KAAK,cAAL,CAAoB,MAApB,CAAb;MAEA,OAAO,KAAK,WAAL,CAAiB,KAAK,GAAtB,EAA2B,MAA3B,EAAmC,UAAnC,CAAP;IACA,CARD,MAQK;MACJ,OAAO,YAAP;IACA;EACD;;EAED,gBAAgB,CAAC,MAAM,GAAG,EAAV,EAAa;IAC5B,KAAK,MAAL,GAAc,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,IAAI,CAAC,aAAvB,CAAd;;IAEA,IAAG,OAAO,MAAP,IAAiB,QAApB,EAA6B;MAC5B,KAAK,MAAL,CAAY,MAAZ,GAAqB,MAArB;IACA,CAFD,MAEK;MACJ,MAAM,CAAC,MAAP,CAAc,KAAK,MAAnB,EAA2B,MAA3B;IACA;EACD,CAtFuB,CAwFzB;;;EACC,cAAc,CAAC,MAAM,GAAG,EAAV,EAAa;IAC1B,IAAI,UAAU,GAAG,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,KAAK,MAAvB,CAAjB;;IAEA,IAAG,OAAO,MAAP,IAAiB,QAApB,EAA6B;MAC5B,UAAU,CAAC,MAAX,GAAoB,MAApB;IACA,CAFD,MAEK;MACJ,MAAM,CAAC,MAAP,CAAc,UAAd,EAA0B,MAA1B;IACA;;IAED,OAAO,UAAP;EACA,CAnGuB,CAqGzB;;;EACC,MAAM,CAAC,GAAD,EAAK;IACV,KAAK,GAAL,GAAW,GAAX;EACA,CAxGuB,CA0GzB;;;EACC,MAAM,GAAE;IACP,OAAO,KAAK,GAAZ;EACA,CA7GuB,CA+GzB;;;EACC,WAAW,CAAC,GAAD,EAAM,MAAN,EAAc,MAAd,EAAqB;IAC/B,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAnB,CAAkC,IAAlC,CAAuC,KAAK,KAA5C,EAAmD,GAAnD,EAAwD,MAAxD,MAAoE,KAAvE,EAA6E;MAC5E,OAAO,KAAK,aAAL,CAAmB,GAAnB,EAAwB,MAAxB,EAAgC,MAAhC,EACL,IADK,CACC,IAAD,IAAQ;QACb,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAtB,EAAmC;UAClC,IAAI,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAnB,CAAgC,IAAhC,CAAqC,KAAK,KAA1C,EAAiD,GAAjD,EAAsD,MAAtD,EAA8D,IAA9D,CAAP;QACA;;QAED,OAAO,IAAP;MACA,CAPK,CAAP;IAQA,CATD,MASK;MACJ,OAAO,OAAO,CAAC,MAAR,EAAP;IACA;EACD;;AA7HuB;;;AAgIzB,IAAI,CAAC,UAAL,GAAkB,MAAlB,EAEA;;AACA,IAAI,CAAC,aAAL,GAAqB,aAArB;AACA,IAAI,CAAC,mBAAL,GAA2BC,UAA3B;AACA,IAAI,CAAC,oBAAL,GAA4B,oBAA5B;AACA,IAAI,CAAC,qBAAL,GAA6B,4BAA7B;AC7IA,IAAA,mBAAA,GAAe;EACd,OAAO,EAAC,UAAS,IAAT,EAAc;IACrB,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAP;EACA,CAHa;EAId,MAAM,EAAC,UAAS,IAAT,EAAc;IACpB,OAAO,KAAK,KAAL,CAAW,eAAX,CAA2B,IAA3B,CAAP;EACA,CANa;EAOd,MAAM,EAAC,UAAS,IAAT,EAAc;IACpB,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAP;EACA;AATa,CAAf;ACAA,IAAA,mBAAA,GAAe;EACd,KAAK,EAAC,UAAS,SAAT,EAAmB;IACxB,IAAI,IAAI,GAAG,EAAX;IAAA,IACA,iBAAiB,GAAG,IADpB;IAAA,IAEA,OAAO,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,OAFnC;IAAA,IAGA,SAAS,GAAG,EAHZ;IAAA,IAIA,IAAI,GAAG,EAJP,CADwB,CAO1B;;IACE,SAAS,GAAG,SAAS,CAAC,KAAV,CAAgB,IAAhB,CAAZ;IAEA,SAAS,CAAC,OAAV,CAAkB,UAAS,GAAT,EAAa;MAC9B,IAAI,CAAC,IAAL,CAAU,GAAG,CAAC,KAAJ,CAAU,IAAV,CAAV;IACA,CAFD;;IAIA,IAAG,IAAI,CAAC,MAAL,IAAe,EAAE,IAAI,CAAC,MAAL,KAAgB,CAAhB,IAAqB,IAAI,CAAC,CAAD,CAAJ,CAAQ,MAAR,GAAiB,CAAxC,CAAlB,EAA6D;MAE/D;MACG,IAAI,CAAC,CAAD,CAAJ,CAAQ,OAAR,CAAgB,UAAS,KAAT,EAAe;QAC9B,IAAI,MAAM,GAAG,OAAO,CAAC,IAAR,CAAa,UAAS,MAAT,EAAgB;UACzC,OAAO,KAAK,IAAI,MAAM,CAAC,UAAP,CAAkB,KAA3B,IAAoC,KAAK,CAAC,IAAN,EAApC,IAAoD,MAAM,CAAC,UAAP,CAAkB,KAAlB,CAAwB,IAAxB,OAAmC,KAAK,CAAC,IAAN,EAA9F;QACA,CAFY,CAAb;;QAIA,IAAG,MAAH,EAAU;UACT,SAAS,CAAC,IAAV,CAAe,MAAf;QACA,CAFD,MAEK;UACJ,iBAAiB,GAAG,KAApB;QACA;MACD,CAVD,EAH4D,CAe/D;;MACG,IAAG,CAAC,iBAAJ,EAAsB;QACrB,iBAAiB,GAAG,IAApB;QACA,SAAS,GAAG,EAAZ;QAEA,IAAI,CAAC,CAAD,CAAJ,CAAQ,OAAR,CAAgB,UAAS,KAAT,EAAe;UAC9B,IAAI,MAAM,GAAG,OAAO,CAAC,IAAR,CAAa,UAAS,MAAT,EAAgB;YACzC,OAAO,KAAK,IAAI,MAAM,CAAC,KAAhB,IAAyB,KAAK,CAAC,IAAN,EAAzB,IAAyC,MAAM,CAAC,KAAP,CAAa,IAAb,OAAwB,KAAK,CAAC,IAAN,EAAxE;UACA,CAFY,CAAb;;UAIA,IAAG,MAAH,EAAU;YACT,SAAS,CAAC,IAAV,CAAe,MAAf;UACA,CAFD,MAEK;YACJ,iBAAiB,GAAG,KAApB;UACA;QACD,CAVD;;QAYA,IAAG,CAAC,iBAAJ,EAAsB;UACrB,SAAS,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,cAArC;QACA;MACD,CAnC2D,CAqC/D;;;MACG,IAAG,iBAAH,EAAqB;QACpB,IAAI,CAAC,KAAL;MACA;;MAED,IAAI,CAAC,OAAL,CAAa,UAAS,IAAT,EAAc;QAC1B,IAAI,GAAG,GAAG,EAAV;QAEA,IAAI,CAAC,OAAL,CAAa,UAAS,KAAT,EAAgB,CAAhB,EAAkB;UAC9B,IAAG,SAAS,CAAC,CAAD,CAAZ,EAAgB;YACf,GAAG,CAAC,SAAS,CAAC,CAAD,CAAT,CAAa,KAAd,CAAH,GAA0B,KAA1B;UACA;QACD,CAJD;QAMA,IAAI,CAAC,IAAL,CAAU,GAAV;MACA,CAVD;MAYA,OAAO,IAAP;IACA,CAvDD,MAuDK;MACJ,OAAO,KAAP;IACA;EACD;AAzEa,CAAf;;ACKA,MAAM,SAAN,SAAwB,MAAxB,CAA8B;EAE7B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,IAAL,GAAY,IAAZ;;IACA,KAAK,WAAL,GAAmB,YAAU,CAAE,CAA/B;;IACA,KAAK,WAAL,GAAmB,YAAU,CAAE,CAA/B;;IACA,KAAK,eAAL,GAAuB,KAAvB;IACA,KAAK,QAAL,GAAgB,KAAhB;IACA,KAAK,OAAL,GAAe,IAAf,CARiB,CAQG;;IAEpB,KAAK,mBAAL,CAAyB,WAAzB,EAAsC,KAAtC,EAViB,CAU4B;;IAC7C,KAAK,mBAAL,CAAyB,qBAAzB,EAAgD,IAAhD,EAXiB,CAWqC;;IACtD,KAAK,mBAAL,CAAyB,qBAAzB,EAAgD,KAAhD,EAZiB,CAYsC;;IACvD,KAAK,mBAAL,CAAyB,wBAAzB,EAAmD,KAAnD,EAbiB,CAayC;;IAC1D,KAAK,mBAAL,CAAyB,uBAAzB,EAAkD,QAAlD,EAdiB,CAc2C;;IAC5D,KAAK,mBAAL,CAAyB,sBAAzB,EAAiD,OAAjD,EAfiB,CAeyC;;IAC1D,KAAK,mBAAL,CAAyB,sBAAzB,EAAiD,QAAjD,EAhBiB,CAgB0C;;IAE3D,KAAK,oBAAL,CAA0B,WAA1B;IACA,KAAK,oBAAL,CAA0B,gBAA1B;EACA;;EAED,UAAU,GAAE;IACX,KAAK,IAAL,GAAY,KAAK,KAAL,CAAW,OAAX,CAAmB,SAA/B;IAEA,KAAK,QAAL,GAAgB,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAnC;;IAEA,IAAG,KAAK,IAAL,KAAc,IAAd,IAAsB,KAAK,IAAL,KAAc,MAAvC,EAA8C;MAC7C,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,CAAoC,MAApC,EAA6C,CAAD,IAAO;QAClD,IAAI,KAAJ,EAAW,IAAX,EAAiB,IAAjB;;QAEA,IAAG,CAAC,KAAK,OAAT,EAAiB;UAChB,CAAC,CAAC,cAAF;;UAEA,IAAG,KAAK,eAAR,EAAwB;YACvB,KAAK,GAAG,KAAK,eAAb;;YAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,sBAAtB,EAA6C;cAC5C,KAAK,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,sBAAnB,CAA0C,OAA1C,EAAmD,KAAnD,CAAR;YACA;UACD,CAND,MAMK;YAEJ,IAAI,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,CAA0B,kBAA1B,CAA6C,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAAhE,EAAqF,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAAxG,EAA6H,KAAK,QAAlI,EAA4I,WAA5I,CAAP;YAEA,IAAI,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,CAA0B,iBAA1B,CAA4C,IAA5C,CAAP;YACA,KAAK,GAAG,IAAI,GAAG,KAAK,oBAAL,CAA0B,IAA1B,CAAH,GAAqC,EAAjD;;YAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,sBAAtB,EAA6C;cAC5C,KAAK,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,sBAAnB,CAA0C,OAA1C,EAAmD,KAAnD,CAAR;cACA,IAAI,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,sBAAnB,CAA0C,MAA1C,EAAkD,IAAlD,CAAP;YACA;UACD;;UAED,IAAI,MAAM,CAAC,aAAP,IAAwB,MAAM,CAAC,aAAP,CAAqB,OAAjD,EAA0D;YACzD,MAAM,CAAC,aAAP,CAAqB,OAArB,CAA6B,MAA7B,EAAqC,KAArC;UACA,CAFD,MAEO,IAAI,CAAC,CAAC,aAAF,IAAmB,CAAC,CAAC,aAAF,CAAgB,OAAvC,EAAgD;YACtD,CAAC,CAAC,aAAF,CAAgB,OAAhB,CAAwB,YAAxB,EAAsC,KAAtC;;YACA,IAAG,IAAH,EAAQ;cACP,CAAC,CAAC,aAAF,CAAgB,OAAhB,CAAwB,WAAxB,EAAqC,IAArC;YACA;UACD,CALM,MAKA,IAAI,CAAC,CAAC,aAAF,IAAmB,CAAC,CAAC,aAAF,CAAgB,aAAhB,CAA8B,OAArD,EAA8D;YACpE,CAAC,CAAC,aAAF,CAAgB,aAAhB,CAA8B,OAA9B,CAAsC,YAAtC,EAAoD,KAApD;;YACA,IAAG,IAAH,EAAQ;cACP,CAAC,CAAC,aAAF,CAAgB,aAAhB,CAA8B,OAA9B,CAAsC,WAAtC,EAAmD,IAAnD;YACA;UACD;;UAED,KAAK,gBAAL,CAAsB,iBAAtB,EAAyC,KAAzC,EAAgD,IAAhD;UAEA,KAAK,KAAL;QACA;MACD,CA3CD;IA4CA;;IAED,IAAG,KAAK,IAAL,KAAc,IAAd,IAAsB,KAAK,IAAL,KAAc,OAAvC,EAA+C;MAC9C,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,CAAoC,OAApC,EAA8C,CAAD,IAAO;QACnD,KAAK,KAAL,CAAW,CAAX;MACA,CAFD;IAGA;;IAED,KAAK,cAAL,CAAoB,KAAK,KAAL,CAAW,OAAX,CAAmB,oBAAvC;IACA,KAAK,cAAL,CAAoB,KAAK,KAAL,CAAW,OAAX,CAAmB,oBAAvC;IAEA,KAAK,qBAAL,CAA2B,iBAA3B,EAA8C,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,CAA9C;EACA;;EAED,KAAK,GAAE;IACN,KAAK,OAAL,GAAe,IAAf;IACA,KAAK,eAAL,GAAuB,KAAvB;EACA;;EAED,oBAAoB,CAAE,IAAF,EAAQ;IAC3B,IAAI,MAAM,GAAG,EAAb;IAEA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;MACrB,IAAI,OAAO,GAAG,EAAd;MAEA,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAqB,GAAD,IAAS;QAC5B,IAAI,KAAK,GAAG,EAAZ;;QAEA,IAAG,GAAH,EAAO;UAEN,IAAG,GAAG,CAAC,IAAJ,KAAa,OAAhB,EAAwB;YACvB,GAAG,CAAC,KAAJ,GAAY,GAAG,CAAC,SAAJ,CAAc,MAAd,EAAZ;UACA;;UAED,IAAG,GAAG,CAAC,KAAJ,KAAc,IAAjB,EAAsB;YACrB,KAAK,GAAG,EAAR;UACA,CAFD,MAEK;YACJ,QAAO,OAAO,GAAG,CAAC,KAAlB;cACC,KAAK,QAAL;gBACC,KAAK,GAAG,IAAI,CAAC,SAAL,CAAe,GAAG,CAAC,KAAnB,CAAR;gBACA;;cAED,KAAK,WAAL;gBACC,KAAK,GAAG,EAAR;gBACA;;cAED;gBACC,KAAK,GAAG,GAAG,CAAC,KAAZ;YAVF;UAYA;QACD;;QAED,OAAO,CAAC,IAAR,CAAa,KAAb;MACA,CA5BD;MA8BA,MAAM,CAAC,IAAP,CAAY,OAAO,CAAC,IAAR,CAAa,IAAb,CAAZ;IACA,CAlCD;IAoCA,OAAO,MAAM,CAAC,IAAP,CAAY,IAAZ,CAAP;EACA;;EAED,IAAI,CAAE,KAAF,EAAS,QAAT,EAAmB;IACtB,IAAI,GAAJ,EAAS,SAAT;IACA,KAAK,OAAL,GAAe,KAAf;IACA,KAAK,eAAL,GAAuB,KAAvB;;IAEA,IAAI,KAAK,IAAL,KAAc,IAAd,IAAsB,KAAK,IAAL,KAAc,MAAxC,EAAgD;MAE/C,KAAK,QAAL,GAAgB,KAAK,IAAI,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAA5C;;MAEA,IAAI,OAAO,MAAM,CAAC,YAAd,IAA8B,WAA9B,IAA6C,OAAO,QAAQ,CAAC,WAAhB,IAA+B,WAAhF,EAA6F;QAC5F,KAAK,GAAG,QAAQ,CAAC,WAAT,EAAR;QACA,KAAK,CAAC,kBAAN,CAAyB,KAAK,KAAL,CAAW,OAApC;QACA,GAAG,GAAG,MAAM,CAAC,YAAP,EAAN;;QAEA,IAAI,GAAG,CAAC,QAAJ,MAAkB,QAAtB,EAAgC;UAC/B,KAAK,eAAL,GAAuB,GAAG,CAAC,QAAJ,EAAvB;QACA;;QAED,GAAG,CAAC,eAAJ;QACA,GAAG,CAAC,QAAJ,CAAa,KAAb;MACA,CAXD,MAWO,IAAI,OAAO,QAAQ,CAAC,SAAhB,IAA6B,WAA7B,IAA4C,OAAO,QAAQ,CAAC,IAAT,CAAc,eAArB,IAAwC,WAAxF,EAAqG;QAC3G,SAAS,GAAG,QAAQ,CAAC,IAAT,CAAc,eAAd,EAAZ;QACA,SAAS,CAAC,iBAAV,CAA4B,KAAK,KAAL,CAAW,OAAvC;QACA,SAAS,CAAC,MAAV;MACA;;MAED,QAAQ,CAAC,WAAT,CAAqB,MAArB;;MAEA,IAAI,GAAJ,EAAS;QACR,GAAG,CAAC,eAAJ;MACA;IACD;EACD,CAvK4B,CAyK9B;;;EACC,cAAc,CAAC,MAAD,EAAQ;IAErB,QAAO,OAAO,MAAd;MACC,KAAK,QAAL;QACC,KAAK,WAAL,GAAmB,SAAS,CAAC,YAAV,CAAuB,MAAvB,CAAnB;;QAEA,IAAG,CAAC,KAAK,WAAT,EAAqB;UACpB,OAAO,CAAC,IAAR,CAAa,+CAAb,EAA8D,MAA9D;QACA;;QACD;;MAED,KAAK,UAAL;QACC,KAAK,WAAL,GAAmB,MAAnB;QACA;IAXF;EAaA;;EAED,cAAc,CAAC,MAAD,EAAQ;IACrB,QAAO,OAAO,MAAd;MACC,KAAK,QAAL;QACC,KAAK,WAAL,GAAmB,SAAS,CAAC,YAAV,CAAuB,MAAvB,CAAnB;;QAEA,IAAG,CAAC,KAAK,WAAT,EAAqB;UACpB,OAAO,CAAC,IAAR,CAAa,+CAAb,EAA8D,MAA9D;QACA;;QACD;;MAED,KAAK,UAAL;QACC,KAAK,WAAL,GAAmB,MAAnB;QACA;IAXF;EAaA;;EAED,KAAK,CAAC,CAAD,EAAG;IACP,IAAI,IAAJ,EAAU,OAAV,EAAmB,IAAnB;;IAEA,IAAG,KAAK,eAAL,CAAqB,CAArB,CAAH,EAA2B;MAE1B,IAAI,GAAG,KAAK,YAAL,CAAkB,CAAlB,CAAP;MAEA,OAAO,GAAG,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,EAA4B,IAA5B,CAAV;;MAEA,IAAG,OAAH,EAAW;QACV,CAAC,CAAC,cAAF;;QAEA,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,SAArB,CAAH,EAAmC;UAClC,OAAO,GAAG,KAAK,UAAL,CAAgB,OAAhB,CAAV;QACA;;QAED,IAAI,GAAG,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,EAA4B,OAA5B,CAAP;QAEA,KAAK,gBAAL,CAAsB,iBAAtB,EAAyC,IAAzC,EAA+C,OAA/C,EAAwD,IAAxD;MACA,CAVD,MAUK;QACJ,KAAK,gBAAL,CAAsB,qBAAtB,EAA6C,IAA7C;MACA;IACD;EACD;;EAED,UAAU,CAAC,IAAD,EAAM;IACf,IAAI,MAAM,GAAG,EAAb;;IAEA,IAAG,KAAK,CAAC,OAAN,CAAc,IAAd,CAAH,EAAuB;MACtB,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;QACrB,MAAM,CAAC,IAAP,CAAY,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,CAA2B,YAA3B,CAAwC,GAAxC,EAA6C,WAA7C,CAAZ;MACA,CAFD;IAGA,CAJD,MAIK;MACJ,MAAM,GAAG,IAAT;IACA;;IAED,OAAO,MAAP;EACA;;EAGD,eAAe,CAAC,CAAD,EAAG;IACjB,IAAI,KAAK,GAAG,IAAZ;;IAEA,IAAG,CAAC,CAAC,MAAF,CAAS,OAAT,IAAoB,KAApB,IAA6B,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,WAAxD,EAAoE;MACnE,KAAK,GAAG,KAAR;IACA;;IAED,OAAO,KAAP;EACA;;EAED,YAAY,CAAC,CAAD,EAAG;IACd,IAAI,IAAJ;;IAEA,IAAI,MAAM,CAAC,aAAP,IAAwB,MAAM,CAAC,aAAP,CAAqB,OAAjD,EAA0D;MACzD,IAAI,GAAG,MAAM,CAAC,aAAP,CAAqB,OAArB,CAA6B,MAA7B,CAAP;IACA,CAFD,MAEO,IAAI,CAAC,CAAC,aAAF,IAAmB,CAAC,CAAC,aAAF,CAAgB,OAAvC,EAAgD;MACtD,IAAI,GAAG,CAAC,CAAC,aAAF,CAAgB,OAAhB,CAAwB,YAAxB,CAAP;IACA,CAFM,MAEA,IAAI,CAAC,CAAC,aAAF,IAAmB,CAAC,CAAC,aAAF,CAAgB,aAAhB,CAA8B,OAArD,EAA8D;MACpE,IAAI,GAAG,CAAC,CAAC,aAAF,CAAgB,aAAhB,CAA8B,OAA9B,CAAsC,YAAtC,CAAP;IACA;;IAED,OAAO,IAAP;EACA;;AAzQ4B;;;AA4Q9B,SAAS,CAAC,UAAV,GAAuB,WAAvB,EAEA;;AACA,SAAS,CAAC,YAAV,GAAyB,mBAAzB;AACA,SAAS,CAAC,YAAV,GAAyB,mBAAzB;;ACrRA,MAAM,aAAN,CAAmB;EAClB,WAAW,CAAE,GAAF,EAAM;IAChB,KAAK,IAAL,GAAY,GAAZ;IAEA,OAAO,IAAI,KAAJ,CAAU,IAAV,EAAgB;MACtB,GAAG,EAAE,UAAS,MAAT,EAAiB,IAAjB,EAAuB,QAAvB,EAAiC;QACrC,IAAI,OAAO,MAAM,CAAC,IAAD,CAAb,KAAwB,WAA5B,EAAyC;UACxC,OAAO,MAAM,CAAC,IAAD,CAAb;QACA,CAFD,MAEK;UACJ,OAAO,MAAM,CAAC,IAAP,CAAY,KAAZ,CAAkB,uBAAlB,CAA0C,MAA1C,CAAiD,KAAjD,EAAwD,MAAM,CAAC,IAA/D,EAAqE,IAArE,CAAP;QACA;MACD;IAPqB,CAAhB,CAAP;EASA;;EAED,OAAO,CAAC,SAAD,EAAW;IACjB,OAAO,KAAK,IAAL,CAAU,OAAV,CAAkB,SAAlB,CAAP;EACA;;EAED,UAAU,GAAE;IACX,OAAO,KAAK,IAAL,CAAU,UAAV,EAAP;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,IAAL,CAAU,KAAjB;EACA;;EAED,QAAQ,GAAE;IACT,IAAI,KAAK,GAAG,EAAZ;;IAEA,KAAK,IAAL,CAAU,QAAV,GAAqB,OAArB,CAA6B,UAAS,IAAT,EAAc;MAC1C,KAAK,CAAC,IAAN,CAAW,IAAI,CAAC,YAAL,EAAX;IACA,CAFD;;IAIA,OAAO,KAAP;EACA;;EAED,OAAO,CAAC,MAAD,EAAQ;IACd,IAAI,IAAI,GAAG,KAAK,IAAL,CAAU,OAAV,CAAkB,MAAlB,CAAX;;IACA,OAAO,IAAI,GAAG,IAAI,CAAC,YAAL,EAAH,GAAyB,KAApC;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,IAAZ;EACA;;AA5CiB,ECAnB;;;;;AACe,MAAM,aAAN,CAAoB;EAElC,WAAW,CAAE,IAAF,EAAO;IACjB,KAAK,KAAL,GAAa,IAAb;IAEA,OAAO,IAAI,KAAJ,CAAU,IAAV,EAAgB;MACtB,GAAG,EAAE,UAAS,MAAT,EAAiB,IAAjB,EAAuB,QAAvB,EAAiC;QACrC,IAAI,OAAO,MAAM,CAAC,IAAD,CAAb,KAAwB,WAA5B,EAAyC;UACxC,OAAO,MAAM,CAAC,IAAD,CAAb;QACA,CAFD,MAEK;UACJ,OAAO,MAAM,CAAC,KAAP,CAAa,KAAb,CAAmB,uBAAnB,CAA2C,MAA3C,CAAkD,MAAlD,EAA0D,MAAM,CAAC,KAAjE,EAAwE,IAAxE,CAAP;QACA;MACD;IAPqB,CAAhB,CAAP;EASA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,KAAL,CAAW,QAAX,EAAP;EACA;;EAED,WAAW,GAAE;IACZ,OAAO,KAAK,KAAL,CAAW,WAAX,EAAP;EACA;;EAED,eAAe,GAAE;IAChB,OAAO,KAAK,KAAL,CAAW,YAAlB;EACA;;EAED,UAAU,GAAE;IACX,OAAO,KAAK,KAAL,CAAW,UAAX,EAAP;EACA;;EAED,MAAM,GAAE;IACP,OAAO,KAAK,KAAL,CAAW,GAAX,CAAe,YAAf,EAAP;EACA;;EAED,OAAO,GAAE;IACR,OAAO,KAAK,KAAL,CAAW,GAAX,CAAe,OAAf,EAAP;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,KAAL,CAAW,MAAX,CAAkB,QAAlB,EAAP;EACA;;EAED,SAAS,GAAE;IACV,OAAO,KAAK,KAAL,CAAW,MAAX,CAAkB,YAAlB,EAAP;EACA;;EAED,QAAQ,CAAC,KAAD,EAAQ,MAAR,EAAe;IACtB,IAAG,OAAO,MAAP,IAAiB,WAApB,EAAgC;MAC/B,MAAM,GAAG,IAAT;IACA;;IAED,KAAK,KAAL,CAAW,QAAX,CAAoB,KAApB,EAA2B,MAA3B;EACA;;EAED,eAAe,GAAE;IAChB,KAAK,KAAL,CAAW,cAAX,CAA0B,KAAK,KAAL,CAAW,WAAX,EAA1B;EACA;;EAED,mBAAmB,GAAE;IACpB,KAAK,KAAL,CAAW,cAAX,CAA0B,KAAK,KAAL,CAAW,YAArC;EACA;;EAED,WAAW,GAAE;IACZ,KAAK,KAAL,CAAW,WAAX;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,KAAL,CAAW,KAAlB;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,KAAZ;EACA;;AA1EiC;;;;ACEpB,MAAM,IAAN,SAAmB,WAAnB,CAA8B;EAC5C,WAAW,CAAC,MAAD,EAAS,GAAT,EAAa;IACvB,MAAM,MAAM,CAAC,KAAb;IAEA,KAAK,KAAL,GAAa,MAAM,CAAC,KAApB;IACA,KAAK,MAAL,GAAc,MAAd;IACA,KAAK,GAAL,GAAW,GAAX;IACA,KAAK,OAAL,GAAe,IAAf;IACA,KAAK,KAAL,GAAa,IAAb;IACA,KAAK,YAAL;IACA,KAAK,QAAL,GAAgB,IAAhB;IACA,KAAK,OAAL,GAAe,EAAf;IAEA,KAAK,MAAL,GAAc,IAAd;IACA,KAAK,KAAL,GAAa,IAAb;IACA,KAAK,QAAL,GAAgB,IAAhB;IAEA,KAAK,SAAL,GAAiB,IAAjB;IAEA,KAAK,MAAL,GAAc,KAAd,CAlBuB,CAkBH;;IAEpB,KAAK,KAAL;EACA,CAtB2C,CAwB7C;EACA;;;EACC,KAAK,GAAE;IACN,KAAK,eAAL;IAEA,KAAK,QAAL;;IAEA,KAAK,cAAL;;IAEA,KAAK,cAAL,CAAoB,KAAK,MAAL,CAAY,aAAZ,CAA0B,KAAK,GAAL,CAAS,IAAnC,CAApB;IAEA,KAAK,YAAL,GAAoB,KAAK,KAAzB;EACA;;EAED,eAAe,GAAE;IAChB,KAAK,OAAL,GAAe,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAf;IACA,KAAK,OAAL,CAAa,SAAb,GAAyB,gBAAzB;IACA,KAAK,OAAL,CAAa,YAAb,CAA0B,MAA1B,EAAkC,UAAlC;EACA;;EAED,cAAc,GAAE;IACf,IAAI,OAAO,GAAG,KAAK,OAAnB;IAAA,IACA,KAAK,GAAG,KAAK,MAAL,CAAY,QAAZ,EADR;IAAA,IAEA,UAAU,GAAG;MACZ,GAAG,EAAC,YADQ;MAEZ,MAAM,EAAC,UAFK;MAGZ,MAAM,EAAC;IAHK,CAFb;IAAA,IAOA,SAAS,GAAG;MACX,IAAI,EAAC,YADM;MAEX,KAAK,EAAC,UAFK;MAGX,MAAM,EAAC;IAHI,CAPZ,CADe,CAcjB;;IACE,OAAO,CAAC,KAAR,CAAc,SAAd,GAA0B,KAAK,MAAL,CAAY,QAAtC;;IAEA,IAAG,KAAK,MAAL,CAAY,SAAf,EAAyB;MACxB,OAAO,CAAC,KAAR,CAAc,OAAd,GAAwB,aAAxB;MAEA,OAAO,CAAC,KAAR,CAAc,UAAd,GAA2B,UAAU,CAAC,KAAK,MAAL,CAAY,SAAb,CAAV,IAAqC,EAAhE;;MAEA,IAAG,KAAK,MAAL,CAAY,QAAf,EAAwB;QACvB,OAAO,CAAC,KAAR,CAAc,cAAd,GAA+B,SAAS,CAAC,KAAK,MAAL,CAAY,QAAb,CAAT,IAAmC,EAAlE;MACA;IACD;;IAED,IAAG,KAAH,EAAS;MACR,OAAO,CAAC,YAAR,CAAqB,iBAArB,EAAwC,KAAxC;IACA,CA7Bc,CA+BjB;;;IACE,IAAG,KAAK,MAAL,CAAY,UAAZ,CAAuB,QAA1B,EAAmC;MAClC,IAAI,UAAU,GAAG,KAAK,MAAL,CAAY,UAAZ,CAAuB,QAAvB,CAAgC,KAAhC,CAAsC,GAAtC,CAAjB;MACA,UAAU,CAAC,OAAX,CAAoB,SAAD,IAAe;QACjC,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,SAAtB;MACA,CAFD;IAGA;;IAED,KAAK,QAAL,CAAc,WAAd,EAA2B,IAA3B,EAvCe,CAyCjB;;IACE,IAAG,CAAC,KAAK,MAAL,CAAY,OAAhB,EAAwB;MACvB,KAAK,IAAL;IACA;EACD,CAzF2C,CA2F7C;;;EACC,iBAAiB,GAAE;IAClB,IAAI,GAAJ;IAEA,GAAG,GAAG,KAAK,KAAL,CAAW,aAAX,EAA0B,IAA1B,EAAgC,IAAhC,EAAsC,MAAM;MACjD,OAAO,KAAK,OAAL,CAAa,SAAb,GAAyB,KAAK,KAArC;IACA,CAFK,CAAN;;IAIA,QAAO,OAAO,GAAd;MACC,KAAK,QAAL;QACC,IAAG,GAAG,YAAY,IAAlB,EAAuB;UAE3B;UACK,OAAM,KAAK,OAAL,CAAa,UAAnB,EAA+B,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,OAAL,CAAa,UAAtC;;UAE/B,KAAK,OAAL,CAAa,WAAb,CAAyB,GAAzB;QACA,CAND,MAMK;UACJ,KAAK,OAAL,CAAa,SAAb,GAAyB,EAAzB;;UAEA,IAAG,GAAG,IAAI,IAAV,EAAe;YACd,OAAO,CAAC,IAAR,CAAa,gJAAb,EAA+J,GAA/J;UACA;QACD;;QACD;;MACD,KAAK,WAAL;QACC,KAAK,OAAL,CAAa,SAAb,GAAyB,EAAzB;QACA;;MACD;QACC,KAAK,OAAL,CAAa,SAAb,GAAyB,GAAzB;IApBF;EAsBA;;EAED,YAAY,GAAE;IACb,KAAK,QAAL,CAAc,eAAd,EAA+B,IAA/B;EACA,CA7H2C,CA+H7C;;;EACC,UAAU,CAAC,aAAD,EAAe;IACxB,IAAG,CAAC,KAAK,MAAT,EAAgB;MACf,KAAK,MAAL,GAAc,IAAd;;MACA,IAAG,CAAC,aAAJ,EAAkB;QACjB,KAAK,aAAL;MACA;IACD;;IAED,OAAO,KAAK,OAAZ;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,KAAZ;EACA;;EAED,WAAW,GAAE;IACZ,OAAO,KAAK,QAAZ;EACA,CAjJ2C,CAmJ7C;;;EACC,QAAQ,CAAC,KAAD,EAAQ,MAAR,EAAgB,KAAhB,EAAsB;IAC7B,IAAI,OAAO,GAAG,KAAK,mBAAL,CAAyB,KAAzB,EAAgC,MAAhC,EAAwC,KAAxC,CAAd;;IAEA,IAAG,OAAH,EAAW;MACV,KAAK,QAAL,CAAc,oBAAd,EAAoC,IAApC;MAEA,KAAK,YAAL;;MAEA,IAAG,KAAK,MAAL,CAAY,UAAZ,CAAuB,UAA1B,EAAqC;QACpC,KAAK,MAAL,CAAY,UAAZ,CAAuB,UAAvB,CAAkC,IAAlC,CAAuC,KAAK,KAA5C,EAAmD,KAAK,YAAL,EAAnD;MACA;;MAED,KAAK,gBAAL,CAAsB,YAAtB,EAAoC,KAAK,YAAL,EAApC;;MAEA,IAAG,KAAK,kBAAL,CAAwB,aAAxB,CAAH,EAA0C;QACzC,KAAK,gBAAL,CAAsB,aAAtB,EAAqC,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,EAArC;MACA;IACD;EACD;;EAED,mBAAmB,CAAC,KAAD,EAAQ,MAAR,EAAgB,KAAhB,EAAsB;IACxC,IAAI,OAAO,GAAG,KAAd;;IAEA,IAAG,KAAK,KAAL,KAAe,KAAf,IAAwB,KAA3B,EAAiC;MAEhC,OAAO,GAAG,IAAV;;MAEA,IAAG,MAAH,EAAU;QACT,KAAK,GAAG,KAAK,KAAL,CAAW,qBAAX,EAAkC,CAAC,IAAD,EAAO,KAAP,CAAlC,EAAiD,IAAjD,EAAuD,KAAvD,CAAR;MACA;IACD;;IAED,KAAK,cAAL,CAAoB,KAApB;;IAEA,IAAG,OAAH,EAAW;MACV,KAAK,QAAL,CAAc,oBAAd,EAAoC,IAApC;IACA;;IAED,OAAO,OAAP;EACA;;EAED,cAAc,CAAC,KAAD,EAAO;IACpB,KAAK,QAAL,GAAgB,KAAK,KAArB;IAEA,KAAK,KAAL,GAAa,KAAb;IAEA,KAAK,QAAL,CAAc,wBAAd,EAAwC,IAAxC;IAEA,KAAK,MAAL,CAAY,aAAZ,CAA0B,KAAK,GAAL,CAAS,IAAnC,EAAyC,KAAzC;IAEA,KAAK,QAAL,CAAc,uBAAd,EAAuC,IAAvC;;IAEA,IAAG,KAAK,MAAR,EAAe;MACd,KAAK,aAAL;IACA;EACD;;EAED,aAAa,GAAE;IACd,KAAK,iBAAL;;IAEA,KAAK,QAAL,CAAc,aAAd,EAA6B,IAA7B;EACA;;EAED,QAAQ,GAAE;IACT,KAAK,KAAL,GAAa,KAAK,MAAL,CAAY,KAAzB;IACA,KAAK,OAAL,CAAa,KAAb,CAAmB,KAAnB,GAA2B,KAAK,MAAL,CAAY,WAAvC;EACA;;EAED,UAAU,GAAE;IACX,KAAK,KAAL,GAAa,EAAb;IACA,KAAK,OAAL,CAAa,KAAb,CAAmB,KAAnB,GAA2B,EAA3B;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,KAAL,IAAc,KAAK,OAAL,CAAa,WAAlC;EACA;;EAED,WAAW,GAAE;IACZ,KAAK,QAAL,GAAgB,KAAK,MAAL,CAAY,QAA5B;IACA,KAAK,OAAL,CAAa,KAAb,CAAmB,QAAnB,GAA8B,KAAK,MAAL,CAAY,cAA1C;EACA;;EAED,WAAW,GAAE;IACZ,KAAK,QAAL,GAAgB,KAAK,MAAL,CAAY,QAA5B;IACA,KAAK,OAAL,CAAa,KAAb,CAAmB,QAAnB,GAA8B,KAAK,MAAL,CAAY,cAA1C;EACA;;EAED,WAAW,GAAE;IACd;IACE,KAAK,GAAL,CAAS,kBAAT;EACA;;EAED,WAAW,GAAE;IACZ,KAAK,OAAL,CAAa,KAAb,CAAmB,MAAnB,GAA4B,EAA5B;IACA,KAAK,MAAL,GAAc,IAAd;IAEA,KAAK,QAAL,CAAc,aAAd,EAA6B,IAA7B,EAAmC,EAAnC;EACA;;EAED,SAAS,GAAE;IACV,KAAK,MAAL,GAAc,KAAK,GAAL,CAAS,MAAvB;IACA,KAAK,OAAL,CAAa,KAAb,CAAmB,MAAnB,GAA4B,KAAK,GAAL,CAAS,YAArC;IAEA,KAAK,QAAL,CAAc,aAAd,EAA6B,IAA7B,EAAmC,KAAK,GAAL,CAAS,YAA5C;EACA;;EAED,SAAS,GAAE;IACV,OAAO,KAAK,MAAL,IAAe,KAAK,OAAL,CAAa,YAAnC;EACA;;EAED,IAAI,GAAE;IACL,KAAK,OAAL,CAAa,KAAb,CAAmB,OAAnB,GAA6B,KAAK,MAAL,CAAY,SAAZ,GAAwB,aAAxB,GAAwC,EAArE;EACA;;EAED,IAAI,GAAE;IACL,KAAK,OAAL,CAAa,KAAb,CAAmB,OAAnB,GAA6B,MAA7B;EACA;;EAED,MAAM,GAAE;IACP,KAAK,QAAL,CAAc,aAAd,EAA6B,IAA7B;;IAEA,IAAG,CAAC,KAAK,KAAL,CAAW,UAAX,CAAsB,WAAvB,IAAsC,KAAK,OAAL,CAAa,UAAtD,EAAiE;MAChE,KAAK,OAAL,CAAa,UAAb,CAAwB,WAAxB,CAAoC,KAAK,OAAzC;IACA;;IAED,KAAK,OAAL,GAAe,KAAf;IACA,KAAK,MAAL,CAAY,UAAZ,CAAuB,IAAvB;IACA,KAAK,GAAL,CAAS,UAAT,CAAoB,IAApB;IACA,KAAK,KAAL,GAAa,EAAb;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,GAAL,CAAS,YAAT,CAAsB,IAAtB,CAAP;EACA,CAzR2C,CA2R7C;;;EACC,YAAY,GAAE;IACb,IAAG,CAAC,KAAK,SAAT,EAAmB;MAClB,KAAK,SAAL,GAAiB,IAAI,aAAJ,CAAkB,IAAlB,CAAjB;IACA;;IAED,OAAO,KAAK,SAAZ;EACA;;AAlS2C,ECD7C;;;AACe,MAAM,eAAN,CAAsB;EACpC,WAAW,CAAE,MAAF,EAAS;IACnB,KAAK,OAAL,GAAe,MAAf;IACA,KAAK,IAAL,GAAY,iBAAZ;IAEA,OAAO,IAAI,KAAJ,CAAU,IAAV,EAAgB;MACtB,GAAG,EAAE,UAAS,MAAT,EAAiB,IAAjB,EAAuB,QAAvB,EAAiC;QACrC,IAAI,OAAO,MAAM,CAAC,IAAD,CAAb,KAAwB,WAA5B,EAAyC;UACxC,OAAO,MAAM,CAAC,IAAD,CAAb;QACA,CAFD,MAEK;UACJ,OAAO,MAAM,CAAC,OAAP,CAAe,KAAf,CAAqB,uBAArB,CAA6C,MAA7C,CAAoD,QAApD,EAA8D,MAAM,CAAC,OAArE,EAA8E,IAA9E,CAAP;QACA;MACD;IAPqB,CAAhB,CAAP;EASA;;EAED,UAAU,GAAE;IACX,OAAO,KAAK,OAAL,CAAa,UAAb,EAAP;EACA;;EAED,aAAa,GAAE;IACd,OAAO,KAAK,OAAL,CAAa,aAAb,EAAP;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,OAAL,CAAa,QAAb,EAAP;EACA;;EAED,gBAAgB,GAAG;IAClB,OAAO,KAAK,OAAL,CAAa,gBAAb,EAAP;EACA;;EAED,QAAQ,GAAE;IACT,IAAI,KAAK,GAAG,EAAZ;;IAEA,KAAK,OAAL,CAAa,KAAb,CAAmB,OAAnB,CAA2B,UAAS,IAAT,EAAc;MACxC,KAAK,CAAC,IAAN,CAAW,IAAI,CAAC,YAAL,EAAX;IACA,CAFD;;IAIA,OAAO,KAAP;EACA;;EAED,SAAS,GAAE;IACV,OAAO,KAAK,OAAL,CAAa,OAApB;EACA;;EAED,IAAI,GAAE;IACL,IAAG,KAAK,OAAL,CAAa,OAAhB,EAAwB;MACvB,KAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,CAA6B,UAAS,MAAT,EAAgB;QAC5C,MAAM,CAAC,IAAP;MACA,CAFD;IAGA,CAJD,MAIK;MACJ,KAAK,OAAL,CAAa,IAAb;IACA;EACD;;EAED,IAAI,GAAE;IACL,IAAG,KAAK,OAAL,CAAa,OAAhB,EAAwB;MACvB,KAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,CAA6B,UAAS,MAAT,EAAgB;QAC5C,MAAM,CAAC,IAAP;MACA,CAFD;IAGA,CAJD,MAIK;MACJ,KAAK,OAAL,CAAa,IAAb;IACA;EACD;;EAED,MAAM,GAAE;IACP,IAAG,KAAK,OAAL,CAAa,OAAhB,EAAwB;MACvB,KAAK,IAAL;IACA,CAFD,MAEK;MACJ,KAAK,IAAL;IACA;EACD;;EAED,MAAM,GAAE;IACP,OAAO,KAAK,OAAL,CAAa,MAAb,EAAP;EACA;;EAED,aAAa,GAAE;IACd,IAAI,MAAM,GAAG,EAAb;;IAEA,IAAG,KAAK,OAAL,CAAa,OAAb,CAAqB,MAAxB,EAA+B;MAC9B,KAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,CAA6B,UAAS,MAAT,EAAgB;QAC5C,MAAM,CAAC,IAAP,CAAY,MAAM,CAAC,YAAP,EAAZ;MACA,CAFD;IAGA;;IAED,OAAO,MAAP;EACA;;EAED,eAAe,GAAE;IAChB,OAAO,KAAK,OAAL,CAAa,MAAb,YAA+B,MAA/B,GAAwC,KAAK,OAAL,CAAa,MAAb,CAAoB,YAApB,EAAxC,GAA6E,KAApF;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,OAAZ;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,OAAL,CAAa,KAAb,CAAmB,aAAnB,CAAiC,cAAjC,CAAgD,KAAK,OAArD,CAAP;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,OAAL,CAAa,KAApB;EACA;;EAED,IAAI,CAAC,EAAD,EAAK,KAAL,EAAW;IACd,IAAI,QAAQ,GAAG,KAAK,OAAL,CAAa,KAAb,CAAmB,aAAnB,CAAiC,UAAjC,CAA4C,EAA5C,CAAf;;IAEA,IAAG,QAAH,EAAY;MACX,KAAK,OAAL,CAAa,KAAb,CAAmB,aAAnB,CAAiC,UAAjC,CAA4C,KAAK,OAAjD,EAA0D,QAA1D,EAAoE,KAApE;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,wCAAb,EAAuD,QAAvD;IACA;EACD;;EAED,aAAa,GAAE;IACd,IAAI,OAAO,GAAG,KAAK,OAAL,CAAa,UAAb,EAAd;;IAEA,OAAO,OAAO,GAAG,OAAO,CAAC,YAAR,EAAH,GAA4B,KAA1C;EACA;;EAED,aAAa,GAAE;IACd,IAAI,OAAO,GAAG,KAAK,OAAL,CAAa,UAAb,EAAd;;IAEA,OAAO,OAAO,GAAG,OAAO,CAAC,YAAR,EAAH,GAA4B,KAA1C;EACA;;EAED,gBAAgB,CAAC,OAAD,EAAS;IACxB,OAAO,KAAK,OAAL,CAAa,gBAAb,CAA8B,OAA9B,CAAP;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,OAAL,CAAa,QAAb,EAAP;EACA;;EAED,QAAQ,CAAC,KAAD,EAAO;IACd,IAAI,MAAJ;;IAEA,IAAG,KAAK,KAAK,IAAb,EAAkB;MACjB,MAAM,GAAI,KAAK,OAAL,CAAa,iBAAb,CAA+B,IAA/B,CAAV;IACA,CAFD,MAEK;MACJ,MAAM,GAAI,KAAK,OAAL,CAAa,QAAb,CAAsB,KAAtB,CAAV;IACA;;IAED,KAAK,OAAL,CAAa,KAAb,CAAmB,aAAnB,CAAiC,eAAjC,CAAiD,IAAjD;;IAEA,OAAO,MAAP;EACA;;AApJmC;;;ACHrC,IAAA,oBAAA,GAAe;EACd,SAAS,SADK;EAEd,SAAS,SAFK;EAGd,WAAW,SAHG;EAId,WAAW,SAJG;EAKd,YAAY,SALE;EAMd,aAAa,SANC;EAOd,SAAS,SAPK;EAQd,YAAY,EARE;EASd,YAAY,SATE;EAUd,mBAAmB,SAVL;EAWd,YAAY,SAXE;EAYd,kBAAkB,SAZJ;EAad,kBAAkB,SAbJ;EAcd,kBAAkB,SAdJ;EAed,iBAAiB;AAfH,CAAf;;ACMA,MAAM,MAAN,SAAqB,WAArB,CAAgC;EAE/B,WAAW,CAAC,GAAD,EAAM,MAAN,EAAa;IACvB,MAAM,MAAM,CAAC,KAAb;IAEA,KAAK,UAAL,GAAkB,GAAlB,CAHuB,CAGD;;IACtB,KAAK,MAAL,GAAc,MAAd,CAJuB,CAIF;;IACrB,KAAK,IAAL,GAAY,QAAZ,CALuB,CAKF;;IACrB,KAAK,OAAL,GAAe,EAAf,CANuB,CAML;;IAClB,KAAK,KAAL,GAAa,EAAb,CAPuB,CAOP;;IAChB,KAAK,OAAL,GAAe,KAAK,aAAL,EAAf,CARuB,CAQa;;IACpC,KAAK,cAAL,GAAsB,KAAtB;IACA,KAAK,kBAAL,GAA0B,KAA1B;IACA,KAAK,YAAL,GAAoB,KAApB;IACA,KAAK,YAAL,GAAoB,KAAK,kBAAL,EAApB,CAZuB,CAYuB;;IAC9C,KAAK,OAAL,GAAe,KAAf;IACA,KAAK,QAAL,GAAgB,EAAhB,CAduB,CAcJ;;IACnB,KAAK,SAAL,GAAiB,EAAjB,CAfuB,CAeH;IAEtB;;IACE,KAAK,KAAL,GAAY,EAAZ;IACA,KAAK,cAAL,GAAsB,EAAtB;IACA,KAAK,aAAL,GAAqB,EAArB;IACA,KAAK,aAAL,GAAqB,EAArB;IAEA,KAAK,aAAL,GAAqB,IAArB;IACA,KAAK,sBAAL,GAA8B,KAA9B;IAEA,KAAK,cAAL;IAEA,KAAK,QAAL,CAAc,KAAK,UAAL,CAAgB,KAA9B;IAEA,KAAK,OAAL,GAAe,EAAf,CA9BuB,CA8BL;;IAElB,KAAK,KAAL,GAAa,IAAb,CAhCuB,CAgCL;;IAClB,KAAK,WAAL,GAAmB,EAAnB,CAjCuB,CAiCD;;IACtB,KAAK,QAAL,GAAgB,IAAhB,CAlCuB,CAkCF;;IACrB,KAAK,cAAL,GAAsB,EAAtB,CAnCuB,CAmCE;;IACzB,KAAK,eAAL,GAAuB,IAAvB;IACA,KAAK,QAAL,GAAgB,IAAhB,CArCuB,CAqCF;;IACrB,KAAK,cAAL,GAAsB,EAAtB,CAtCuB,CAsCE;;IACzB,KAAK,UAAL,GAAkB,KAAlB,CAvCuB,CAuCC;;IAExB,KAAK,OAAL,GAAe,IAAf,CAzCuB,CAyCH;;IAEpB,KAAK,SAAL,GAAiB,IAAjB,CA3CuB,CA6CzB;;IACE,IAAG,KAAK,UAAL,CAAgB,OAAnB,EAA2B;MAE1B,KAAK,OAAL,GAAe,IAAf;MAEA,KAAK,UAAL,CAAgB,OAAhB,CAAwB,OAAxB,CAAgC,CAAC,GAAD,EAAM,CAAN,KAAY;QAC3C,IAAI,MAAM,GAAG,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAb;QACA,KAAK,YAAL,CAAkB,MAAlB;MACA,CAHD;MAKA,KAAK,qBAAL;IACA,CAVD,MAUK;MACJ,MAAM,CAAC,mBAAP,CAA2B,IAA3B;IACA;;IAED,KAAK,WAAL;EACA;;EAED,aAAa,GAAG;IACf,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;IAEA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,eAAjB;IACA,EAAE,CAAC,YAAH,CAAgB,MAAhB,EAAwB,cAAxB;IACA,EAAE,CAAC,YAAH,CAAgB,WAAhB,EAA6B,MAA7B;;IAEA,QAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAA1B;MACC,KAAK,QAAL;QACC,EAAE,CAAC,KAAH,CAAS,cAAT,GAA0B,QAA1B;QACA;;MACD,KAAK,QAAL;QACC,EAAE,CAAC,KAAH,CAAS,cAAT,GAA0B,UAA1B;QACA;IANF;;IASA,OAAO,EAAP;EACA;;EAED,kBAAkB,GAAG;IACpB,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;IAEA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,0BAAjB;IAEA,OAAO,EAAP;EACA;;EAED,cAAc,GAAE;IACf,IAAI,QAAQ,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAlC,CADe,CAGjB;;IACE,IAAG,QAAH,EAAY;MACX,KAAI,IAAI,GAAR,IAAe,QAAf,EAAwB;QACvB,IAAG,OAAO,KAAK,UAAL,CAAgB,GAAhB,CAAP,KAAgC,WAAnC,EAA+C;UAC9C,KAAK,UAAL,CAAgB,GAAhB,IAAuB,QAAQ,CAAC,GAAD,CAA/B;QACA;MACD;IACD;;IAED,KAAK,UAAL,GAAkB,KAAK,KAAL,CAAW,aAAX,CAAyB,WAAzB,CAAqC,QAArC,CAA8C,MAAM,CAAC,iBAArD,EAAwE,KAAK,UAA7E,CAAlB;EACA;;EAED,eAAe,GAAE;IAChB,MAAM,CAAC,IAAP,CAAY,KAAK,UAAjB,EAA6B,OAA7B,CAAsC,GAAD,IAAS;MAC7C,IAAG,MAAM,CAAC,iBAAP,CAAyB,OAAzB,CAAiC,GAAjC,MAA0C,CAAC,CAA9C,EAAgD;QAC/C,OAAO,CAAC,IAAR,CAAa,2CAA2C,KAAK,KAAL,IAAc,KAAK,UAAL,CAAgB,KAAzE,IAAkF,WAA/F,EAA4G,GAA5G;MACA;IACD,CAJD;EAKA;;EAED,QAAQ,CAAC,KAAD,EAAO;IACd,KAAK,KAAL,GAAa,KAAb;IACA,KAAK,cAAL,GAAsB,KAAK,GAAI,KAAK,KAAL,CAAW,OAAX,CAAmB,oBAAnB,GAA0C,KAAK,CAAC,KAAN,CAAY,KAAK,KAAL,CAAW,OAAX,CAAmB,oBAA/B,CAA1C,GAAiG,CAAC,KAAD,CAArG,GAAgH,EAA3I;IACA,KAAK,aAAL,GAAqB,KAAK,cAAL,CAAoB,MAApB,GAA6B,CAA7B,GAAiC,KAAK,cAAtC,GAAuD,KAAK,YAAjF;IACA,KAAK,aAAL,GAAqB,KAAK,cAAL,CAAoB,MAApB,GAA6B,CAA7B,GAAiC,KAAK,cAAtC,GAAuD,KAAK,YAAjF;EACA,CAxH8B,CA0HhC;;;EACC,sBAAsB,CAAC,MAAD,EAAQ;IAC7B,KAAK,MAAL,CAAY,sBAAZ,CAAmC,MAAnC;EACA,CA7H8B,CA+HhC;;;EACC,mBAAmB,CAAC,MAAD,EAAQ;IAC1B,KAAK,MAAL,CAAY,mBAAZ,CAAgC,MAAhC;EACA,CAlI8B,CAoIhC;;;EACC,kBAAkB,GAAE;IACnB,IAAG,KAAK,OAAR,EAAgB;MACf,KAAK,OAAL,CAAa,OAAb,CAAqB,UAAS,MAAT,EAAgB;QACpC,MAAM,CAAC,kBAAP;MACA,CAFD;IAGA,CAJD,MAIK;MACJ,KAAK,sBAAL,CAA4B,IAA5B;IACA;EACD,CA7I8B,CA+IhC;;;EACC,WAAW,GAAE;IACZ,IAAI,GAAG,GAAG,KAAK,UAAf;;IAEA,OAAM,KAAK,OAAL,CAAa,UAAnB,EAA+B,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,OAAL,CAAa,UAAtC;;IAE/B,IAAG,GAAG,CAAC,cAAP,EAAsB;MACrB,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,wBAA3B;;MAEA,IAAG,GAAG,CAAC,cAAJ,KAAuB,MAA1B,EAAiC;QAChC,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,6BAA3B;MACA;IACD;;IAED,KAAK,cAAL,GAAsB,KAAK,yBAAL,EAAtB;IAEA,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,cAA9B;;IAEA,IAAG,KAAK,OAAR,EAAgB;MACf,KAAK,iBAAL;IACA,CAFD,MAEK;MACJ,KAAK,kBAAL;IACA;;IAED,KAAK,QAAL,CAAc,aAAd,EAA6B,IAA7B;EACA,CAxK8B,CA0KhC;;;EACC,kBAAkB,GAAE;IACnB,IAAI,GAAG,GAAG,KAAK,UAAf;IAEA,KAAK,QAAL,CAAc,eAAd,EAA+B,IAA/B,EAHmB,CAKrB;;IACE,IAAG,OAAO,GAAG,CAAC,OAAX,IAAsB,WAAzB,EAAqC;MACpC,IAAG,GAAG,CAAC,OAAP,EAAe;QACd,KAAK,IAAL,CAAU,IAAV;MACA,CAFD,MAEK;QACJ,KAAK,IAAL,CAAU,IAAV;MACA;IACD,CAZkB,CAcrB;;;IACE,IAAG,GAAG,CAAC,QAAP,EAAgB;MACf,IAAI,UAAU,GAAG,GAAG,CAAC,QAAJ,CAAa,KAAb,CAAmB,GAAnB,CAAjB;MACA,UAAU,CAAC,OAAX,CAAoB,SAAD,IAAe;QACjC,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,SAA3B;MACA,CAFD;IAGA;;IAED,IAAG,GAAG,CAAC,KAAP,EAAa;MACZ,KAAK,OAAL,CAAa,YAAb,CAA0B,iBAA1B,EAA6C,GAAG,CAAC,KAAjD;IACA,CAxBkB,CA0BrB;;;IACE,KAAK,WAAL,CAAiB,QAAQ,CAAC,GAAG,CAAC,QAAL,CAAzB;;IAEA,IAAI,GAAG,CAAC,eAAR,EAAyB;MACxB,KAAK,eAAL,GAAuB,QAAQ,CAAC,GAAG,CAAC,eAAL,CAA/B;IACA;;IAED,IAAG,GAAG,CAAC,QAAP,EAAgB;MACf,KAAK,WAAL,CAAiB,QAAQ,CAAC,GAAG,CAAC,QAAL,CAAzB;IACA;;IAED,KAAK,iBAAL,GArCmB,CAuCrB;;IACE,KAAK,QAAL,GAAgB,KAAK,UAAL,CAAgB,QAAhC;IACA,KAAK,SAAL,GAAiB,KAAK,UAAL,CAAgB,SAAjC;IAEA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,SAAxB,GAAoC,KAAK,UAAL,CAAgB,cAApD;EACA;;EAED,yBAAyB,GAAE;IAC1B,IAAI,cAAc,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAArB;IACA,cAAc,CAAC,SAAf,CAAyB,GAAzB,CAA6B,uBAA7B;IAEA,KAAK,kBAAL,GAA0B,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAA1B;IACA,KAAK,kBAAL,CAAwB,SAAxB,CAAkC,GAAlC,CAAsC,4BAAtC;IAEA,cAAc,CAAC,WAAf,CAA2B,KAAK,kBAAhC;IAEA,KAAK,YAAL,GAAoB,KAAK,uBAAL,EAApB;IAEA,KAAK,kBAAL,CAAwB,WAAxB,CAAoC,KAAK,YAAzC;IAEA,OAAO,cAAP;EACA,CAvO8B,CAyOhC;;;EACC,uBAAuB,GAAE;IACxB,IAAI,GAAG,GAAG,KAAK,UAAf;IAEA,IAAI,kBAAkB,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAzB;IACA,kBAAkB,CAAC,SAAnB,CAA6B,GAA7B,CAAiC,qBAAjC;;IAEA,IAAG,GAAG,CAAC,aAAP,EAAqB;MACpB,IAAI,YAAY,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAnB;MACA,YAAY,CAAC,SAAb,CAAuB,GAAvB,CAA2B,wBAA3B;MAEA,YAAY,CAAC,gBAAb,CAA8B,OAA9B,EAAwC,CAAD,IAAO;QAC7C,CAAC,CAAC,eAAF;QACA,YAAY,CAAC,KAAb;MACA,CAHD;MAKA,YAAY,CAAC,gBAAb,CAA8B,QAA9B,EAAwC,MAAM;QAC7C,GAAG,CAAC,KAAJ,GAAY,YAAY,CAAC,KAAzB;QACA,KAAK,gBAAL,CAAsB,oBAAtB,EAA4C,KAAK,YAAL,EAA5C;MACA,CAHD;MAKA,kBAAkB,CAAC,WAAnB,CAA+B,YAA/B;;MAEA,IAAG,GAAG,CAAC,KAAP,EAAa;QACZ,KAAK,QAAL,CAAc,aAAa,GAAG,CAAC,KAA/B,EAAuC,IAAD,IAAU;UAC/C,YAAY,CAAC,KAAb,GAAqB,IAAI,IAAK,GAAG,CAAC,KAAJ,IAAa,QAA3C;QACA,CAFD;MAGA,CAJD,MAIK;QACJ,YAAY,CAAC,KAAb,GAAsB,GAAG,CAAC,KAAJ,IAAa,QAAnC;MACA;IAED,CAxBD,MAwBK;MACJ,IAAG,GAAG,CAAC,KAAP,EAAa;QACZ,KAAK,QAAL,CAAc,aAAa,GAAG,CAAC,KAA/B,EAAuC,IAAD,IAAU;UAC/C,KAAK,wBAAL,CAA8B,kBAA9B,EAAkD,IAAI,IAAK,GAAG,CAAC,KAAJ,IAAa,QAAxE;QACA,CAFD;MAGA,CAJD,MAIK;QACJ,KAAK,wBAAL,CAA8B,kBAA9B,EAAkD,GAAG,CAAC,KAAJ,IAAa,QAA/D;MACA;IACD;;IAED,OAAO,kBAAP;EACA;;EAED,wBAAwB,CAAC,EAAD,EAAK,KAAL,EAAW;IAClC,IAAI,QAAQ,GAAG,KAAK,KAAL,CAAW,eAAX,EAA4B,CAAC,IAAD,EAAO,KAAP,EAAc,EAAd,CAA5B,EAA+C,IAA/C,EAAqD,MAAM;MACzE,OAAO,KAAP;IACA,CAFc,CAAf;;IAIA,QAAO,OAAO,QAAd;MACC,KAAK,QAAL;QACC,IAAG,QAAQ,YAAY,IAAvB,EAA4B;UAC3B,EAAE,CAAC,WAAH,CAAe,QAAf;QACA,CAFD,MAEK;UACJ,EAAE,CAAC,SAAH,GAAe,EAAf;UACA,OAAO,CAAC,IAAR,CAAa,sJAAb,EAAqK,QAArK;QACA;;QACD;;MACD,KAAK,WAAL;QACC,EAAE,CAAC,SAAH,GAAe,EAAf;QACA;;MACD;QACC,EAAE,CAAC,SAAH,GAAe,QAAf;IAbF;EAeA,CAzS8B,CA2ShC;;;EACC,iBAAiB,GAAE;IAClB,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,qBAA3B;IACA,KAAK,OAAL,CAAa,YAAb,CAA0B,MAA1B,EAAkC,aAAlC;IACA,KAAK,OAAL,CAAa,YAAb,CAA0B,YAA1B,EAAwC,KAAK,UAAL,CAAgB,KAAxD,EAHkB,CAKpB;;IACE,IAAG,KAAK,UAAL,CAAgB,QAAnB,EAA4B;MAC3B,IAAI,UAAU,GAAG,KAAK,UAAL,CAAgB,QAAhB,CAAyB,KAAzB,CAA+B,GAA/B,CAAjB;MACA,UAAU,CAAC,OAAX,CAAoB,SAAD,IAAe;QACjC,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,SAA3B;MACA,CAFD;IAGA;;IAED,KAAK,YAAL,CAAkB,KAAlB,CAAwB,SAAxB,GAAoC,KAAK,UAAL,CAAgB,cAApD;IAEA,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,YAA9B;EACA,CA5T8B,CA8ThC;;;EACC,YAAY,CAAC,IAAD,EAAM;IACjB,OAAO,IAAI,CAAC,KAAK,KAAN,CAAX;EACA,CAjU8B,CAmUhC;;;EACC,cAAc,CAAC,IAAD,EAAM;IACnB,IAAI,OAAO,GAAG,IAAd;IAAA,IACA,SAAS,GAAG,KAAK,cADjB;IAAA,IAEA,MAAM,GAAG,SAAS,CAAC,MAFnB;IAAA,IAGA,MAHA;;IAKA,KAAI,IAAI,CAAC,GAAG,CAAZ,EAAe,CAAC,GAAG,MAAnB,EAA2B,CAAC,EAA5B,EAA+B;MAE9B,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAD,CAAV,CAAjB;MAEA,MAAM,GAAG,OAAT;;MAEA,IAAG,CAAC,OAAJ,EAAY;QACX;MACA;IACD;;IAED,OAAO,MAAP;EACA,CAtV8B,CAwVhC;;;EACC,YAAY,CAAC,IAAD,EAAO,KAAP,EAAa;IACxB,IAAG,KAAK,KAAR,EAAc;MACb,IAAI,CAAC,KAAK,KAAN,CAAJ,GAAmB,KAAnB;IACA;EACD,CA7V8B,CA+VhC;;;EACC,cAAc,CAAC,IAAD,EAAO,KAAP,EAAa;IAC1B,IAAI,OAAO,GAAG,IAAd;IAAA,IACA,SAAS,GAAG,KAAK,cADjB;IAAA,IAEA,MAAM,GAAG,SAAS,CAAC,MAFnB;;IAIA,KAAI,IAAI,CAAC,GAAG,CAAZ,EAAe,CAAC,GAAG,MAAnB,EAA2B,CAAC,EAA5B,EAA+B;MAE9B,IAAG,CAAC,IAAI,MAAM,GAAE,CAAhB,EAAkB;QACjB,OAAO,CAAC,SAAS,CAAC,CAAD,CAAV,CAAP,GAAwB,KAAxB;MACA,CAFD,MAEK;QACJ,IAAG,CAAC,OAAO,CAAC,SAAS,CAAC,CAAD,CAAV,CAAX,EAA0B;UACzB,IAAG,OAAO,KAAP,KAAiB,WAApB,EAAgC;YAC/B,OAAO,CAAC,SAAS,CAAC,CAAD,CAAV,CAAP,GAAwB,EAAxB;UACA,CAFD,MAEK;YACJ;UACA;QACD;;QAED,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAD,CAAV,CAAjB;MACA;IACD;EACD,CArX8B,CAuXhC;;;EACC,YAAY,CAAC,MAAD,EAAQ;IACnB,IAAG,KAAK,YAAR,EAAqB;MACpB,KAAK,OAAL,CAAa,IAAb,CAAkB,MAAlB;MACA,KAAK,YAAL,CAAkB,WAAlB,CAA8B,MAAM,CAAC,UAAP,EAA9B;MAEA,MAAM,CAAC,cAAP;IACA,CALD,MAKK;MACJ,OAAO,CAAC,IAAR,CAAa,kFAAb;IACA;EACD,CAjY8B,CAmYhC;;;EACC,aAAa,CAAC,SAAD,EAAY,MAAZ,EAAmB;IAEjC;IACE,IAAI,YAAY,GAAG,KAAK,MAAL,CAAY,OAAZ,GAAsB,KAAK,MAAL,CAAY,eAAZ,GAA8B,YAApD,GAAoE,MAAM,IAAI,KAAK,MAAL,CAAY,iBAAZ,GAAgC,YAAjI,CAH+B,CAIjC;;IAEE,KAAK,OAAL,CAAa,KAAb,CAAmB,MAAnB,GAA4B,YAAY,GAAG,IAA3C;IAEA,KAAK,QAAL,CAAc,eAAd,EAA+B,IAA/B,EAAqC,KAAK,OAAL,CAAa,KAAb,CAAmB,MAAxD;;IAEA,IAAG,KAAK,OAAR,EAAgB;MACf,KAAK,YAAL,CAAkB,KAAlB,CAAwB,SAAxB,GAAqC,YAAY,GAAG,KAAK,cAAL,CAAoB,YAApC,GAAoD,IAAxF;IACA,CAZ8B,CAcjC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;;IAEE,KAAK,OAAL,CAAa,OAAb,CAAqB,UAAS,MAAT,EAAgB;MACpC,MAAM,CAAC,aAAP,CAAqB,SAArB;IACA,CAFD;EAGA,CA9Z8B,CAgahC;;;EACC,kBAAkB,GAAE;IACnB,KAAK,OAAL,CAAa,KAAb,CAAmB,UAAnB,GAAgC,EAAhC;IACA,KAAK,OAAL,CAAa,KAAb,CAAmB,MAAnB,GAA4B,EAA5B;IACA,KAAK,OAAL,CAAa,KAAb,CAAmB,SAAnB,GAA+B,EAA/B;IACA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,SAAxB,GAAoC,EAApC;IAEA,KAAK,OAAL,CAAa,OAAb,CAAqB,UAAS,MAAT,EAAgB;MACpC,MAAM,CAAC,kBAAP;IACA,CAFD;IAIA,KAAK,QAAL,CAAc,eAAd,EAA+B,IAA/B,EAAqC,EAArC;EACA,CA5a8B,CA8ahC;EACA;;;EACC,UAAU,GAAE;IACX,OAAO,KAAK,OAAZ;EACA,CAlb8B,CAobhC;;;EACC,eAAe,GAAE;IAChB,OAAO,KAAK,YAAZ;EACA,CAvb8B,CAybhC;;;EACC,QAAQ,GAAE;IACT,OAAO,KAAK,KAAZ;EACA;;EAED,gBAAgB,GAAG;IAClB,OAAO,KAAK,aAAZ;EACA,CAhc8B,CAkchC;;;EACC,cAAc,GAAE;IACf,IAAG,CAAC,KAAK,OAAT,EAAiB;MAChB,OAAO,IAAP;IACA,CAFD,MAEK;MACJ,IAAG,KAAK,OAAL,CAAa,MAAhB,EAAuB;QACtB,OAAO,KAAK,OAAL,CAAa,CAAb,EAAgB,cAAhB,EAAP;MACA,CAFD,MAEK;QACJ,OAAO,KAAP;MACA;IACD;EACD,CA7c8B,CA+chC;;;EACC,aAAa,GAAE;IACd,IAAG,CAAC,KAAK,OAAT,EAAiB;MAChB,OAAO,IAAP;IACA,CAFD,MAEK;MACJ,IAAG,KAAK,OAAL,CAAa,MAAhB,EAAuB;QACtB,OAAO,KAAK,OAAL,CAAa,KAAK,OAAL,CAAa,MAAb,GAAqB,CAAlC,EAAqC,aAArC,EAAP;MACA,CAFD,MAEK;QACJ,OAAO,KAAP;MACA;IACD;EACD,CA1d8B,CA4dhC;;;EACC,UAAU,CAAC,QAAD,EAAU;IACnB,IAAI,OAAO,GAAG,EAAd;;IAEA,IAAG,QAAH,EAAY;MACX,KAAK,OAAL,CAAa,OAAb,CAAsB,MAAD,IAAY;QAChC,OAAO,CAAC,IAAR,CAAa,MAAb;QAEA,OAAO,GAAG,OAAO,CAAC,MAAR,CAAe,MAAM,CAAC,UAAP,CAAkB,IAAlB,CAAf,CAAV;MACA,CAJD;IAKA,CAND,MAMK;MACJ,OAAO,GAAG,KAAK,OAAf;IACA;;IAED,OAAO,OAAP;EACA,CA3e8B,CA6ehC;;;EACC,QAAQ,GAAE;IACT,OAAO,KAAK,KAAZ;EACA,CAhf8B,CAkfhC;;;EACC,YAAY,GAAE;IACb,IAAG,KAAK,MAAL,CAAY,OAAf,EAAuB;MACtB,OAAO,KAAK,MAAL,CAAY,YAAZ,EAAP;IACA,CAFD,MAEK;MACJ,OAAO,IAAP;IACA;EACD,CAzf8B,CA2fhC;;;EACC,aAAa,CAAC,cAAD,EAAgB;IAC5B,IAAI,OAAO,GAAG,EAAd;;IAEA,IAAG,KAAK,OAAL,IAAgB,cAAnB,EAAkC;MACjC,KAAK,OAAL,CAAa,OAAb,CAAqB,UAAS,MAAT,EAAgB;QACpC,OAAO,CAAC,IAAR,CAAa,MAAM,CAAC,aAAP,CAAqB,IAArB,CAAb;MACA,CAFD;MAIA,KAAK,UAAL,CAAgB,OAAhB,GAA0B,OAA1B;IACA;;IAED,OAAO,KAAK,UAAZ;EACA,CAxgB8B,CA0gBhC;;;EACC,qBAAqB,GAAE;IACtB,IAAI,OAAO,GAAG,KAAd;IAEA,KAAK,OAAL,CAAa,OAAb,CAAqB,UAAS,MAAT,EAAgB;MACpC,IAAG,MAAM,CAAC,OAAV,EAAkB;QACjB,OAAO,GAAG,IAAV;MACA;IACD,CAJD;;IAMA,IAAG,OAAH,EAAW;MACV,KAAK,IAAL;MACA,KAAK,gBAAL,CAAsB,yBAAtB,EAAiD,KAAK,YAAL,EAAjD,EAAsE,KAAtE;IACA,CAHD,MAGK;MACJ,KAAK,IAAL;IACA;EACD,CA1hB8B,CA4hBhC;;;EACC,IAAI,CAAC,MAAD,EAAS,gBAAT,EAA0B;IAC7B,IAAG,CAAC,KAAK,OAAT,EAAiB;MAChB,KAAK,OAAL,GAAe,IAAf;MAEA,KAAK,OAAL,CAAa,KAAb,CAAmB,OAAnB,GAA6B,EAA7B;;MAEA,IAAG,KAAK,MAAL,CAAY,OAAf,EAAuB;QACtB,KAAK,MAAL,CAAY,qBAAZ;MACA;;MAED,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAS,IAAT,EAAc;QAChC,IAAI,CAAC,IAAL;MACA,CAFD;;MAIA,IAAG,CAAC,KAAK,OAAN,IAAiB,KAAK,KAAL,KAAe,IAAnC,EAAwC;QACvC,KAAK,iBAAL;MACA;;MAED,KAAK,KAAL,CAAW,aAAX,CAAyB,oBAAzB;MAEA,KAAK,QAAL,CAAc,aAAd,EAA6B,IAA7B,EAAmC,gBAAnC;;MAEA,IAAG,CAAC,MAAJ,EAAW;QACV,KAAK,gBAAL,CAAsB,yBAAtB,EAAiD,KAAK,YAAL,EAAjD,EAAsE,IAAtE;MACA;;MAED,IAAG,KAAK,MAAL,CAAY,OAAf,EAAuB;QACtB,KAAK,MAAL,CAAY,gBAAZ;MACA;;MAED,IAAG,CAAC,KAAK,MAAT,EAAgB;QACf,KAAK,KAAL,CAAW,aAAX,CAAyB,eAAzB;MACA;IACD;EACD,CA/jB8B,CAikBhC;;;EACC,IAAI,CAAC,MAAD,EAAS,gBAAT,EAA0B;IAC7B,IAAG,KAAK,OAAR,EAAgB;MACf,KAAK,OAAL,GAAe,KAAf;MAEA,KAAK,OAAL,CAAa,KAAb,CAAmB,OAAnB,GAA6B,MAA7B;MAEA,KAAK,KAAL,CAAW,aAAX,CAAyB,oBAAzB;;MAEA,IAAG,KAAK,MAAL,CAAY,OAAf,EAAuB;QACtB,KAAK,MAAL,CAAY,qBAAZ;MACA;;MAED,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAS,IAAT,EAAc;QAChC,IAAI,CAAC,IAAL;MACA,CAFD;MAIA,KAAK,QAAL,CAAc,aAAd,EAA6B,IAA7B,EAAmC,gBAAnC;;MAEA,IAAG,CAAC,MAAJ,EAAW;QACV,KAAK,gBAAL,CAAsB,yBAAtB,EAAiD,KAAK,YAAL,EAAjD,EAAsE,KAAtE;MACA;;MAED,IAAG,KAAK,MAAL,CAAY,OAAf,EAAuB;QACtB,KAAK,MAAL,CAAY,gBAAZ;MACA;;MAED,IAAG,CAAC,KAAK,MAAT,EAAgB;QACf,KAAK,KAAL,CAAW,aAAX,CAAyB,eAAzB;MACA;IACD;EACD;;EAED,gBAAgB,GAAE;IACjB,IAAI,UAAU,GAAG,CAAjB;;IAEA,IAAG,KAAK,cAAL,IAAuB,KAAK,OAAL,CAAa,MAAvC,EAA8C;MAC7C,KAAK,OAAL,CAAa,OAAb,CAAqB,UAAS,MAAT,EAAgB;QACpC,IAAG,MAAM,CAAC,OAAV,EAAkB;UACjB,UAAU,IAAI,MAAM,CAAC,QAAP,EAAd;QACA;MACD,CAJD;MAMA,KAAK,cAAL,CAAoB,KAApB,CAA0B,QAA1B,GAAsC,UAAU,GAAG,CAAd,GAAmB,IAAxD;;MAEA,IAAG,KAAK,MAAL,CAAY,OAAf,EAAuB;QACtB,KAAK,MAAL,CAAY,gBAAZ;MACA;IACD;EACD;;EAED,WAAW,CAAC,KAAD,EAAO;IACjB,IAAI,KAAK,GAAG,KAAK,OAAL,CAAa,OAAb,CAAqB,KAArB,CAAZ;;IAEA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;MACb,KAAK,OAAL,CAAa,MAAb,CAAoB,KAApB,EAA2B,CAA3B;IACA;;IAED,IAAG,CAAC,KAAK,OAAL,CAAa,MAAjB,EAAwB;MACvB,KAAK,MAAL;IACA;EACD;;EAED,QAAQ,CAAC,KAAD,EAAO;IACd,KAAK,UAAL,GAAkB,IAAlB;IACA,KAAK,cAAL,CAAoB,KAApB;EACA;;EAED,cAAc,CAAC,KAAD,EAAO;IACpB,IAAG,KAAK,CAAC,KAAD,CAAR,EAAgB;MACf,KAAK,GAAG,IAAI,CAAC,KAAL,CAAY,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,GAA+B,GAAhC,GAAuC,QAAQ,CAAC,KAAD,CAA1D,CAAR;IACA;;IAED,KAAK,GAAG,IAAI,CAAC,GAAL,CAAS,KAAK,QAAd,EAAwB,KAAxB,CAAR;;IAEA,IAAG,KAAK,QAAR,EAAiB;MAChB,KAAK,GAAG,IAAI,CAAC,GAAL,CAAS,KAAK,QAAd,EAAwB,KAAxB,CAAR;IACA;;IAED,KAAK,KAAL,GAAa,KAAb;IACA,KAAK,WAAL,GAAmB,KAAK,GAAG,KAAK,GAAG,IAAX,GAAkB,EAA1C;IAEA,KAAK,OAAL,CAAa,KAAb,CAAmB,KAAnB,GAA2B,KAAK,WAAhC;;IAEA,IAAG,CAAC,KAAK,OAAT,EAAiB;MAChB,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAS,IAAT,EAAc;QAChC,IAAI,CAAC,QAAL;MACA,CAFD;IAGA;;IAED,IAAG,KAAK,MAAL,CAAY,OAAf,EAAuB;MACtB,KAAK,MAAL,CAAY,gBAAZ;IACA;;IAED,KAAK,QAAL,CAAc,cAAd,EAA8B,IAA9B;EACA;;EAED,gBAAgB,GAAE;IACjB,IAAI,IAAI,GAAG,EAAX;IAEA,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAS,IAAT,EAAc;MAChC,IAAG,IAAI,CAAC,GAAL,CAAS,iBAAZ,EAA8B;QAC7B,IAAG,IAAI,CAAC,GAAL,CAAS,UAAT,GAAsB,YAAtB,KAAuC,IAA1C,EAA+C;UAC9C,IAAI,CAAC,IAAL,CAAU,IAAI,CAAC,GAAf;UACA,IAAI,CAAC,GAAL,CAAS,eAAT;QACA,CAHD,MAGK;UACJ,IAAI,CAAC,GAAL,CAAS,iBAAT,GAA6B,KAA7B;QACA;MACD;IACD,CATD;IAWA,IAAI,CAAC,OAAL,CAAa,UAAS,GAAT,EAAa;MACzB,GAAG,CAAC,UAAJ;IACA,CAFD;IAIA,IAAI,CAAC,OAAL,CAAa,UAAS,GAAT,EAAa;MACzB,GAAG,CAAC,aAAJ;IACA,CAFD;EAGA;;EAED,QAAQ,GAAE;IACT,IAAI,KAAK,GAAG,CAAZ;;IAEA,IAAG,KAAK,OAAR,EAAgB;MACf,KAAK,OAAL,CAAa,OAAb,CAAqB,UAAS,MAAT,EAAgB;QACpC,IAAG,MAAM,CAAC,OAAV,EAAkB;UACjB,KAAK,IAAI,MAAM,CAAC,QAAP,EAAT;QACA;MACD,CAJD;IAKA,CAND,MAMK;MACJ,KAAK,GAAG,KAAK,KAAb;IACA;;IAED,OAAO,KAAP;EACA;;EAED,SAAS,GAAE;IACV,OAAO,IAAI,CAAC,IAAL,CAAU,KAAK,OAAL,CAAa,qBAAb,GAAqC,MAA/C,CAAP;EACA;;EAED,WAAW,CAAC,QAAD,EAAU;IACpB,IAAG,KAAK,QAAL,IAAiB,QAAQ,GAAG,KAAK,QAApC,EAA6C;MAC5C,QAAQ,GAAG,KAAK,QAAhB;MAEA,OAAO,CAAC,IAAR,CAAa,mBAAkB,QAAlB,GAA6B,kBAA7B,GAAkD,KAAK,KAAvD,GAA+D,wCAA/D,GAAyG,KAAK,cAA9G,GAA+H,GAA5I;IACA;;IAED,KAAK,QAAL,GAAgB,QAAhB;IACA,KAAK,cAAL,GAAsB,QAAQ,GAAG,QAAQ,GAAG,IAAd,GAAqB,EAAnD;IAEA,KAAK,OAAL,CAAa,KAAb,CAAmB,QAAnB,GAA8B,KAAK,cAAnC;IAEA,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAS,IAAT,EAAc;MAChC,IAAI,CAAC,WAAL;IACA,CAFD;EAGA;;EAED,WAAW,CAAC,QAAD,EAAU;IACpB,IAAG,KAAK,QAAL,IAAiB,QAAQ,GAAG,KAAK,QAApC,EAA6C;MAC5C,QAAQ,GAAG,KAAK,QAAhB;MAEA,OAAO,CAAC,IAAR,CAAa,mBAAkB,QAAlB,GAA6B,kBAA7B,GAAkD,KAAK,KAAvD,GAA+D,yCAA/D,GAA0G,KAAK,cAA/G,GAAgI,GAA7I;IACA;;IAED,KAAK,QAAL,GAAgB,QAAhB;IACA,KAAK,cAAL,GAAsB,QAAQ,GAAG,QAAQ,GAAG,IAAd,GAAqB,EAAnD;IAEA,KAAK,OAAL,CAAa,KAAb,CAAmB,QAAnB,GAA8B,KAAK,cAAnC;IAEA,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAS,IAAT,EAAc;MAChC,IAAI,CAAC,WAAL;IACA,CAFD;EAGA;;EAED,MAAM,GAAE;IACP,OAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAqB;MACvC,IAAG,KAAK,OAAR,EAAgB;QACf,KAAK,OAAL,CAAa,OAAb,CAAqB,UAAS,MAAT,EAAgB;UACpC,MAAM,CAAC,MAAP;QACA,CAFD;MAGA;;MAED,KAAK,QAAL,CAAc,eAAd,EAA+B,IAA/B;MAEA,IAAI,SAAS,GAAG,KAAK,KAAL,CAAW,MAA3B;;MAEA,KAAI,IAAI,CAAC,GAAG,CAAZ,EAAe,CAAC,GAAG,SAAnB,EAA8B,CAAC,EAA/B,EAAkC;QACjC,KAAK,KAAL,CAAW,CAAX,EAAc,MAAd;MACA;;MAED,IAAG,KAAK,OAAL,CAAa,UAAhB,EAA2B;QAC1B,KAAK,OAAL,CAAa,UAAb,CAAwB,WAAxB,CAAoC,KAAK,OAAzC;MACA;;MAED,KAAK,OAAL,GAAe,KAAf;MACA,KAAK,cAAL,GAAsB,KAAtB;MACA,KAAK,YAAL,GAAoB,KAApB;MACA,KAAK,YAAL,GAAoB,KAApB;;MAEA,IAAG,KAAK,MAAL,CAAY,OAAf,EAAuB;QACtB,KAAK,MAAL,CAAY,WAAZ,CAAwB,IAAxB;MACA;;MAED,KAAK,KAAL,CAAW,aAAX,CAAyB,gBAAzB,CAA0C,IAA1C;MAEA,KAAK,KAAL,CAAW,aAAX,CAAyB,eAAzB,CAAyC,IAAzC;MAEA,OAAO;IACP,CAjCM,CAAP;EAkCA;;EAED,cAAc,GAAE;IACf,IAAG,KAAK,sBAAR,EAA+B;MAC9B,KAAK,sBAAL;IACA;;IAED,KAAK,QAAL,CAAc,iBAAd,EAAiC,IAAjC;EACA,CA1xB8B,CA4xBhC;EACA;;;EACC,YAAY,CAAC,GAAD,EAAK;IAChB,IAAI,IAAI,GAAG,IAAI,IAAJ,CAAS,IAAT,EAAe,GAAf,CAAX;IAEA,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB;IAEA,OAAO,IAAP;EACA;;EAED,UAAU,GAAE;IACX,IAAI,KAAK,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,eAAzB,CAAyC,IAAzC,CAAZ;IACA,OAAO,KAAK,GAAG,CAAC,CAAT,GAAa,KAAK,kBAAL,CAAwB,KAAK,GAAG,CAAhC,CAAb,GAAkD,KAAzD;EACA;;EAED,kBAAkB,CAAC,KAAD,EAAO;IACxB,IAAI,MAAM,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,gBAAzB,CAA0C,KAA1C,CAAb;IACA,OAAO,CAAC,MAAD,IAAW,MAAM,CAAC,OAAlB,GAA4B,MAA5B,GAAqC,KAAK,kBAAL,CAAwB,KAAK,GAAG,CAAhC,CAA5C;EACA;;EAED,UAAU,GAAE;IACX,IAAI,KAAK,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,eAAzB,CAAyC,IAAzC,CAAZ;IACA,OAAO,KAAK,GAAG,CAAC,CAAT,GAAa,KAAK,kBAAL,CAAwB,KAAK,GAAG,CAAhC,CAAb,GAAkD,KAAzD;EACA;;EAED,kBAAkB,CAAC,KAAD,EAAO;IACxB,IAAI,MAAM,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,gBAAzB,CAA0C,KAA1C,CAAb;IACA,OAAO,CAAC,MAAD,IAAW,MAAM,CAAC,OAAlB,GAA4B,MAA5B,GAAqC,KAAK,kBAAL,CAAwB,KAAK,GAAG,CAAhC,CAA5C;EACA;;EAED,iBAAiB,CAAC,KAAD,EAAO;IACvB,KAAK,UAAL,GAAkB,KAAlB,CADuB,CAGzB;;IACE,IAAG,OAAO,KAAK,UAAL,CAAgB,KAAvB,KAAiC,WAAjC,IAAgD,CAAC,KAApD,EAA0D;MAC5D;MACG,KAAK,QAAL,CAAc,KAAK,UAAL,CAAgB,KAA9B;IACA;;IAED,KAAK,QAAL,CAAc,yBAAd,EAAyC,IAAzC;IAEA,KAAK,SAAL,CAAe,KAAf;IAEA,KAAK,QAAL,CAAc,wBAAd,EAAwC,IAAxC;EACA,CAx0B8B,CA00BhC;;;EACC,SAAS,CAAC,KAAD,EAAO;IACf,IAAG,KAAK,OAAR,EAAgB;MACf;IACA;;IAED,IAAG,CAAC,KAAK,UAAT,EAAoB;MACnB,KAAK,OAAL,CAAa,KAAb,CAAmB,KAAnB,GAA2B,EAA3B;MAEA,KAAK,KAAL,CAAW,OAAX,CAAoB,IAAD,IAAU;QAC5B,IAAI,CAAC,UAAL;MACA,CAFD;IAGA;;IAED,IAAI,QAAQ,GAAG,KAAK,OAAL,CAAa,WAA5B;;IAEA,IAAG,CAAC,KAAK,KAAN,IAAe,CAAC,KAAK,UAAxB,EAAmC;MAClC,KAAK,KAAL,CAAW,OAAX,CAAoB,IAAD,IAAU;QAC5B,IAAI,KAAK,GAAG,IAAI,CAAC,QAAL,EAAZ;;QAEA,IAAG,KAAK,GAAG,QAAX,EAAoB;UACnB,QAAQ,GAAG,KAAX;QACA;MACD,CAND;;MAQA,IAAG,QAAH,EAAY;QACX,IAAI,KAAK,GAAG,QAAQ,GAAG,CAAvB;;QACA,IAAI,KAAK,eAAL,IAAwB,CAAC,KAA7B,EAAoC;UACnC,KAAK,GAAG,IAAI,CAAC,GAAL,CAAS,KAAT,EAAgB,KAAK,eAArB,CAAR;QACA;;QACD,KAAK,cAAL,CAAoB,KAApB;MACA;IACD;EACD;;EAED,gBAAgB,CAAC,OAAD,EAAS;IACxB,IAAI,UAAJ;;IAEA,IAAG,CAAC,KAAK,OAAT,EAAiB;MAChB,IAAG,CAAC,KAAK,MAAL,CAAY,OAAhB,EAAwB;QACvB,UAAU,GAAG,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,KAAK,aAAL,EAAlB,CAAb;QACA,UAAU,GAAG,MAAM,CAAC,MAAP,CAAc,UAAd,EAA0B,OAA1B,CAAb;QAEA,OAAO,KAAK,KAAL,CAAW,aAAX,CAAyB,SAAzB,CAAmC,UAAnC,EAA+C,KAA/C,EAAsD,IAAtD,EACL,IADK,CACC,MAAD,IAAY;UAEjB,IAAG,UAAU,CAAC,KAAX,IAAoB,KAAK,KAA5B,EAAkC;YACjC,KAAK,KAAL,GAAa,KAAb,CADiC,CACd;UACnB;;UAED,OAAO,KAAK,MAAL,GACL,IADK,CACA,MAAM;YACX,OAAO,MAAM,CAAC,YAAP,EAAP;UACA,CAHK,CAAP;QAKA,CAZK,CAAP;MAaA,CAjBD,MAiBK;QACJ,OAAO,CAAC,KAAR,CAAc,4FAAd;QACA,OAAO,OAAO,CAAC,MAAR,CAAe,qGAAf,CAAP;MACA;IACD,CAtBD,MAsBK;MACJ,OAAO,CAAC,KAAR,CAAc,4FAAd;MACA,OAAO,OAAO,CAAC,MAAR,CAAe,qGAAf,CAAP;IACA;EACD;;EAED,UAAU,CAAC,IAAD,EAAM;IACf,IAAI,KAAK,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAZ;;IAEA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;MACb,KAAK,KAAL,CAAW,MAAX,CAAkB,KAAlB,EAAyB,CAAzB;IACA;EACD,CAl5B8B,CAo5BhC;;;EACC,YAAY,GAAE;IACb,IAAG,CAAC,KAAK,SAAT,EAAmB;MAClB,KAAK,SAAL,GAAiB,IAAI,eAAJ,CAAoB,IAApB,CAAjB;IACA;;IAED,OAAO,KAAK,SAAZ;EACA;;AA35B8B;;AA85BhC,MAAM,CAAC,iBAAP,GAA2B7/B,oBAA3B,ECp6BA;;AACe,MAAM,YAAN,CAAmB;EAEjC,WAAW,CAAE,GAAF,EAAM;IAChB,KAAK,IAAL,GAAY,GAAZ;IAEA,OAAO,IAAI,KAAJ,CAAU,IAAV,EAAgB;MACtB,GAAG,EAAE,UAAS,MAAT,EAAiB,IAAjB,EAAuB,QAAvB,EAAiC;QACrC,IAAI,OAAO,MAAM,CAAC,IAAD,CAAb,KAAwB,WAA5B,EAAyC;UACxC,OAAO,MAAM,CAAC,IAAD,CAAb;QACA,CAFD,MAEK;UACJ,OAAO,MAAM,CAAC,IAAP,CAAY,KAAZ,CAAkB,uBAAlB,CAA0C,MAA1C,CAAiD,KAAjD,EAAwD,MAAM,CAAC,IAA/D,EAAqE,IAArE,CAAP;QACA;MACD;IAPqB,CAAhB,CAAP;EASA;;EAED,OAAO,CAAC,SAAD,EAAW;IACjB,OAAO,KAAK,IAAL,CAAU,OAAV,CAAkB,SAAlB,CAAP;EACA;;EAED,UAAU,GAAE;IACX,OAAO,KAAK,IAAL,CAAU,UAAV,EAAP;EACA;;EAED,QAAQ,GAAE;IACT,IAAI,KAAK,GAAG,EAAZ;;IAEA,KAAK,IAAL,CAAU,QAAV,GAAqB,OAArB,CAA6B,UAAS,IAAT,EAAc;MAC1C,KAAK,CAAC,IAAN,CAAW,IAAI,CAAC,YAAL,EAAX;IACA,CAFD;;IAIA,OAAO,KAAP;EACA;;EAED,OAAO,CAAC,MAAD,EAAQ;IACd,IAAI,IAAI,GAAG,KAAK,IAAL,CAAU,OAAV,CAAkB,MAAlB,CAAX;;IACA,OAAO,IAAI,GAAG,IAAI,CAAC,YAAL,EAAH,GAAyB,KAApC;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,IAAL,CAAU,OAAV,CAAkB,MAAlB,EAA0B,KAAK,IAAL,CAAU,KAAV,CAAgB,OAAhB,CAAwB,KAAlD,CAAP;EACA;;EAED,WAAW,GAAE;IACZ,OAAO,KAAK,IAAL,CAAU,WAAV,EAAP;EACA;;EAED,aAAa,CAAC,QAAD,EAAU;IACtB,OAAO,KAAK,IAAL,CAAU,aAAV,CAAwB,QAAxB,CAAP;EACA;;EAED,MAAM,GAAE;IACP,OAAO,KAAK,IAAL,CAAU,MAAV,EAAP;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,IAAL,CAAU,KAAV,CAAgB,UAAhB,CAA2B,WAA3B,CAAuC,KAAK,IAA5C,CAAP;EACA;;EAED,IAAI,CAAC,EAAD,EAAK,KAAL,EAAW;IACd,KAAK,IAAL,CAAU,SAAV,CAAoB,EAApB,EAAwB,KAAxB;EACA;;EAED,MAAM,CAAC,IAAD,EAAM;IACX,OAAO,KAAK,IAAL,CAAU,UAAV,CAAqB,IAArB,CAAP;EACA;;EAED,eAAe,GAAE;IAChB,KAAK,IAAL,CAAU,eAAV,CAA0B,IAA1B;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,IAAZ;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,IAAL,CAAU,YAAV,EAAP;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,IAAL,CAAU,KAAjB;EACA;;EAED,UAAU,GAAE;IACX,IAAI,GAAG,GAAG,KAAK,IAAL,CAAU,OAAV,EAAV;;IACA,OAAO,GAAG,GAAG,GAAG,CAAC,YAAJ,EAAH,GAAwB,GAAlC;EACA;;EAED,UAAU,GAAE;IACX,IAAI,GAAG,GAAG,KAAK,IAAL,CAAU,OAAV,EAAV;;IACA,OAAO,GAAG,GAAG,GAAG,CAAC,YAAJ,EAAH,GAAwB,GAAlC;EACA;;AA3FgC;;;;ACGnB,MAAM,GAAN,SAAkB,WAAlB,CAA6B;EAC3C,WAAW,CAAE,IAAF,EAAQ,MAAR,EAAgB,IAAI,GAAG,KAAvB,EAA6B;IACvC,MAAM,MAAM,CAAC,KAAb;IAEA,KAAK,MAAL,GAAc,MAAd;IACA,KAAK,IAAL,GAAY,EAAZ;IACA,KAAK,IAAL,GAAY,IAAZ,CALuC,CAKtB;;IACjB,KAAK,OAAL,GAAe,KAAf;IACA,KAAK,OAAL,GAAe,EAAf,CAPuC,CAOrB;;IAClB,KAAK,KAAL,GAAa,EAAb;IACA,KAAK,MAAL,GAAc,CAAd,CATuC,CASvB;;IAChB,KAAK,YAAL,GAAoB,EAApB,CAVuC,CAUhB;;IACvB,KAAK,YAAL,GAAoB,KAApB,CAXuC,CAWb;;IAC1B,KAAK,WAAL,GAAmB,CAAnB,CAZuC,CAYlB;;IACrB,KAAK,WAAL,GAAmB,KAAnB,CAbuC,CAad;;IACzB,KAAK,iBAAL,GAAyB,KAAzB,CAduC,CAcR;;IAC/B,KAAK,QAAL,GAAgB,CAAhB,CAfuC,CAerB;;IAClB,KAAK,gBAAL,GAAwB,EAAxB;IAEA,KAAK,SAAL,GAAiB,IAAjB;IAEA,KAAK,OAAL,GAAe,KAAf;IAEA,KAAK,OAAL,CAAa,IAAb;EACA;;EAED,MAAM,GAAE;IACP,IAAG,CAAC,KAAK,OAAT,EAAiB;MAChB,KAAK,OAAL,GAAe,IAAf;MACA,KAAK,eAAL;IACA;EACD;;EAED,aAAa,GAAG;IACf,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;IAEA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,eAAjB;IACA,EAAE,CAAC,YAAH,CAAgB,MAAhB,EAAwB,KAAxB;IAEA,KAAK,OAAL,GAAe,EAAf;EACA;;EAED,UAAU,GAAE;IACX,KAAK,MAAL;IACA,OAAO,KAAK,OAAZ;EACA;;EAED,aAAa,GAAE;IACd,IAAI,KAAK,OAAL,IAAgB,KAAK,OAAL,CAAa,UAAjC,EAA4C;MAC3C,KAAK,OAAL,CAAa,UAAb,CAAwB,WAAxB,CAAoC,KAAK,OAAzC;IACA;EACD;;EAED,eAAe,GAAE;IAChB,KAAK,aAAL;IACA,KAAK,QAAL,CAAc,UAAd,EAA0B,IAA1B;EACA;;EAED,aAAa,GAAE;IACd,KAAK,KAAL,GAAa,KAAK,KAAL,CAAW,aAAX,CAAyB,aAAzB,CAAuC,IAAvC,CAAb;EACA,CA5D0C,CA8D5C;;;EACC,UAAU,CAAC,KAAD,EAAO;IAChB,KAAK,MAAL;;IAEA,IAAG,CAAC,KAAK,WAAN,IAAqB,KAAxB,EAA8B;MAE7B,KAAK,WAAL;;MAEA,OAAM,KAAK,OAAL,CAAa,UAAnB,EAA+B,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,OAAL,CAAa,UAAtC;;MAE/B,KAAK,QAAL,CAAc,mBAAd,EAAmC,IAAnC;MAEA,KAAK,aAAL;MAEA,KAAK,WAAL,GAAmB,IAAnB;MAEA,KAAK,KAAL,CAAW,aAAX,CAAyB,QAAzB,CAAkC,cAAlC,CAAiD,IAAjD;;MAEA,IAAG,KAAH,EAAS;QACR,KAAK,eAAL;MACA;;MAED,KAAK,QAAL,CAAc,YAAd,EAA4B,IAA5B;;MAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAtB,EAAmC;QAClC,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAnB,CAAgC,KAAK,YAAL,EAAhC;MACA;;MAED,KAAK,QAAL,CAAc,kBAAd,EAAkC,IAAlC;IACA,CAzBD,MAyBK;MACJ,KAAK,KAAL,CAAW,aAAX,CAAyB,QAAzB,CAAkC,gBAAlC,CAAmD,IAAnD;IACA;EACD;;EAED,kBAAkB,GAAE;IACnB,KAAK,iBAAL,GAAyB,KAAzB;;IAEA,IAAG,KAAK,OAAL,IAAgB,KAAK,OAAL,CAAa,YAAb,KAA8B,IAAjD,EAAsD;MACrD,KAAK,eAAL,CAAqB,IAArB;IACA;EACD;;EAED,YAAY,GAAE;IACb,KAAK,WAAL,GAAmB,KAAnB;EACA;;EAED,kBAAkB,GAAE;IACnB,KAAK,iBAAL,GAAyB,KAAzB;EACA;;EAED,YAAY,CAAC,QAAD,EAAU;IACrB,KAAK,WAAL,GAAmB,KAAnB;IACA,KAAK,iBAAL,GAAyB,KAAzB;;IAEA,IAAG,CAAC,KAAK,YAAT,EAAsB;MACrB,KAAK,MAAL,GAAc,CAAd;MACA,KAAK,YAAL,GAAoB,EAApB;IACA;;IAED,IAAG,KAAK,OAAL,IAAgB,KAAK,OAAL,CAAa,YAAb,KAA8B,IAAjD,EAAsD;MACrD,KAAK,UAAL,CAAgB,IAAhB;IACA;;IAED,KAAK,QAAL,CAAc,cAAd,EAA8B,IAA9B;EACA,CA9H0C,CAgI5C;;;EACC,UAAU,CAAC,KAAD,EAAO;IAChB,IAAI,SAAS,GAAG,CAAhB;IAAA,IACA,SADA;;IAGA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAtB,EAAgC;MAC/B,KAAK,MAAL,GAAc,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAjC;IACA,CAFD,MAEK;MACJ,SAAS,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,GAAmC,KAAK,OAAL,CAAa,YAAhD,GAA+D,CAA3E;MAEA,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAS,IAAT,EAAc;QAChC,IAAI,MAAM,GAAG,IAAI,CAAC,SAAL,EAAb;;QACA,IAAG,MAAM,GAAG,SAAZ,EAAsB;UACrB,SAAS,GAAG,MAAZ;QACA;MACD,CALD;;MAOA,IAAG,KAAH,EAAS;QACR,KAAK,MAAL,GAAc,IAAI,CAAC,GAAL,CAAS,SAAT,EAAoB,SAApB,CAAd;MACA,CAFD,MAEK;QACJ,KAAK,MAAL,GAAc,KAAK,YAAL,GAAoB,KAAK,MAAzB,GAAkC,IAAI,CAAC,GAAL,CAAS,SAAT,EAAoB,SAApB,CAAhD;MACA;IACD;;IAED,KAAK,YAAL,GAAoB,KAAK,MAAL,GAAc,KAAK,MAAL,GAAc,IAA5B,GAAmC,EAAvD;IACA,KAAK,WAAL,GAAmB,KAAK,OAAL,CAAa,YAAhC;EACA,CA1J0C,CA4J5C;;;EACC,aAAa,GAAE;IACd,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAS,IAAT,EAAc;MAChC,IAAI,CAAC,SAAL;IACA,CAFD;IAIA,KAAK,iBAAL,GAAyB,IAAzB;EACA;;EAED,eAAe,GAAE;IAChB,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAS,IAAT,EAAc;MAChC,IAAI,CAAC,WAAL;IACA,CAFD;EAGA,CAzK0C,CA2K5C;;;EACC,eAAe,CAAC,KAAD,EAAO;IACrB,IAAG,KAAK,IAAI,CAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAhC,EAA0C;MACzC,KAAK,eAAL;IACA;;IAED,KAAK,UAAL,CAAgB,KAAhB;IAEA,KAAK,aAAL;EACA,CApL0C,CAsL5C;;;EACC,SAAS,CAAC,MAAD,EAAS,KAAT,EAAe;IACvB,IAAG,KAAK,MAAL,IAAe,MAAf,IAAyB,KAA5B,EAAkC;MAEjC,KAAK,YAAL,GAAoB,IAApB;MAEA,KAAK,MAAL,GAAc,MAAd;MACA,KAAK,YAAL,GAAoB,MAAM,GAAG,MAAM,GAAG,IAAZ,GAAmB,EAA7C;MAEA,KAAK,aAAL,GAPiC,CASpC;;MACG,KAAK,WAAL,GAAmB,KAAK,OAAL,CAAa,YAAhC;IACA;EACD,CApM0C,CAsM5C;;;EACC,SAAS,GAAE;IACV,OAAO,KAAK,WAAZ;EACA,CAzM0C,CA2M5C;;;EACC,QAAQ,GAAE;IACT,OAAO,KAAK,OAAL,CAAa,WAApB;EACA,CA9M0C,CAgN5C;;;EACC,UAAU,CAAC,IAAD,EAAM;IACf,IAAI,KAAK,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAZ;;IAEA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;MACb,KAAK,KAAL,CAAW,MAAX,CAAkB,KAAlB,EAAyB,CAAzB;IACA;EACD,CAvN0C,CAyN5C;;;EACC,OAAO,CAAC,IAAD,EAAM;IACZ,KAAK,IAAL,GAAY,KAAK,KAAL,CAAW,sBAAX,EAAmC,CAAC,IAAD,EAAO,IAAP,CAAnC,EAAiD,SAAjD,EAA4D,IAA5D,CAAZ;IAEA,KAAK,QAAL,CAAc,qBAAd,EAAqC,IAArC;EACA,CA9N0C,CAgO5C;;;EACC,UAAU,CAAC,WAAD,EAAa;IACtB,IAAI,OAAO,GAAG,KAAK,OAAL,IAAgB,OAAO,CAAC,SAAR,CAAkB,KAAK,OAAvB,CAA9B;IAAA,IACA,QAAQ,GAAG,EADX;IAAA,IAEA,UAFA;IAIA,OAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAqB;MAEvC,IAAG,OAAO,WAAP,KAAuB,QAA1B,EAAmC;QAClC,WAAW,GAAG,IAAI,CAAC,KAAL,CAAW,WAAX,CAAd;MACA;;MAED,KAAK,QAAL,CAAc,sBAAd,EAAsC,IAAtC;;MAEA,IAAG,KAAK,UAAL,CAAgB,mBAAhB,CAAH,EAAwC;QACvC,QAAQ,GAAG,MAAM,CAAC,MAAP,CAAc,QAAd,EAAwB,KAAK,IAA7B,CAAX;QACA,QAAQ,GAAG,MAAM,CAAC,MAAP,CAAc,QAAd,EAAwB,WAAxB,CAAX;MACA;;MAED,UAAU,GAAG,KAAK,KAAL,CAAW,mBAAX,EAAgC,CAAC,IAAD,EAAO,QAAP,EAAiB,WAAjB,CAAhC,EAA+D,IAA/D,EAAqE,WAArE,CAAb,CAbuC,CAe1C;;MACG,KAAK,IAAI,QAAT,IAAqB,UAArB,EAAiC;QAChC,KAAK,IAAL,CAAU,QAAV,IAAsB,UAAU,CAAC,QAAD,CAAhC;MACA;;MAED,KAAK,QAAL,CAAc,qBAAd,EAAqC,IAArC,EApBuC,CAsB1C;;MACG,KAAK,IAAI,QAAT,IAAqB,WAArB,EAAkC;QAEjC,IAAI,OAAO,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,qBAAzB,CAA+C,QAA/C,CAAd;QAEA,OAAO,CAAC,OAAR,CAAiB,MAAD,IAAY;UAC3B,IAAI,IAAI,GAAG,KAAK,OAAL,CAAa,MAAM,CAAC,QAAP,EAAb,CAAX;;UAEA,IAAG,IAAH,EAAQ;YACP,IAAI,KAAK,GAAG,MAAM,CAAC,aAAP,CAAqB,UAArB,CAAZ;;YACA,IAAG,IAAI,CAAC,QAAL,MAAmB,KAAtB,EAA4B;cAC3B,IAAI,CAAC,mBAAL,CAAyB,KAAzB;;cAEA,IAAG,OAAH,EAAW;gBACV,IAAI,CAAC,YAAL;cACA;YACD;UACD;QACD,CAbD;MAcA,CAzCsC,CA2C1C;;;MACG,IAAG,OAAH,EAAW;QACV,KAAK,eAAL,CAAqB,IAArB;;QAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAtB,EAAmC;UAClC,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAnB,CAAgC,KAAK,YAAL,EAAhC;QACA;MACD,CAND,MAMK;QACJ,KAAK,WAAL,GAAmB,KAAnB;QACA,KAAK,MAAL,GAAc,CAAd;QACA,KAAK,YAAL,GAAoB,EAApB;MACA;;MAED,KAAK,QAAL,CAAc,kBAAd,EAAkC,IAAlC,EAAwC,OAAxC,EAAiD,WAAjD,EAxDuC,CA0D1C;;MAEG,KAAK,gBAAL,CAAsB,YAAtB,EAAoC,KAAK,YAAL,EAApC;;MAEA,IAAG,KAAK,kBAAL,CAAwB,aAAxB,CAAH,EAA0C;QACzC,KAAK,gBAAL,CAAsB,aAAtB,EAAqC,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,EAArC;MACA;;MAED,OAAO;IACP,CAnEM,CAAP;EAoEA;;EAED,OAAO,CAAC,SAAD,EAAW;IACjB,IAAG,SAAH,EAAa;MACZ,OAAO,KAAK,KAAL,CAAW,mBAAX,EAAgC,CAAC,IAAD,EAAO,SAAP,CAAhC,EAAmD,IAAnD,EAAyD,KAAK,IAA9D,CAAP;IACA;;IAED,OAAO,KAAK,IAAZ;EACA;;EAED,OAAO,CAAC,MAAD,EAAQ;IACd,IAAI,KAAK,GAAG,KAAZ;IAEA,MAAM,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzB,CAAoC,MAApC,CAAT;;IAEA,IAAG,CAAC,KAAK,WAAT,EAAqB;MACpB,KAAK,aAAL;IACA;;IAED,KAAK,GAAG,KAAK,KAAL,CAAW,IAAX,CAAgB,UAAS,IAAT,EAAc;MACrC,OAAO,IAAI,CAAC,MAAL,KAAgB,MAAvB;IACA,CAFO,CAAR;IAIA,OAAO,KAAP;EACA;;EAED,YAAY,CAAC,QAAD,EAAU;IACrB,OAAO,KAAK,KAAL,CAAW,SAAX,CAAqB,UAAS,IAAT,EAAc;MACzC,OAAO,IAAI,KAAK,QAAhB;IACA,CAFM,CAAP;EAGA;;EAED,QAAQ,CAAC,OAAD,EAAS;IAChB,OAAO,KAAK,KAAL,CAAW,IAAX,CAAiB,IAAD,IAAU;MAChC,OAAO,IAAI,CAAC,OAAL,KAAiB,OAAxB;IACA,CAFM,CAAP;EAGA;;EAED,QAAQ,GAAE;IACT,IAAG,CAAC,KAAK,WAAT,EAAqB;MACpB,KAAK,aAAL;IACA;;IAED,OAAO,KAAK,KAAZ;EACA;;EAED,OAAO,GAAE;IACR,IAAI,GAAG,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,IAArC,EAA2C,IAA3C,CAAV;IACA,OAAO,GAAG,IAAI,KAAd;EACA;;EAED,OAAO,GAAE;IACR,IAAI,GAAG,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,IAArC,EAA2C,IAA3C,CAAV;IACA,OAAO,GAAG,IAAI,KAAd;EACA;;EAED,SAAS,CAAC,EAAD,EAAK,MAAL,EAAY;IACpB,IAAI,KAAK,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,EAA9B,CAAZ;;IAEA,IAAG,KAAH,EAAS;MACR,KAAK,KAAL,CAAW,UAAX,CAAsB,aAAtB,CAAoC,IAApC,EAA0C,KAA1C,EAAiD,CAAC,MAAlD;MACA,KAAK,KAAL,CAAW,UAAX,CAAsB,iBAAtB,CAAwC,SAAxC,EAAmD,KAAnD,EAA0D,IAA1D;IACA,CAHD,MAGK;MACJ,OAAO,CAAC,IAAR,CAAa,qCAAb,EAAoD,EAApD;IACA;EACD,CA3W0C,CA6W5C;;;EACC,MAAM,GAAE;IACP,KAAK,QAAL,CAAc,YAAd,EAA4B,IAA5B;IAEA,KAAK,YAAL;IAEA,OAAO,OAAO,CAAC,OAAR,EAAP;EACA;;EAED,YAAY,CAAC,WAAD,EAAa;IACxB,KAAK,aAAL;IAEA,KAAK,KAAL,CAAW,UAAX,CAAsB,SAAtB,CAAgC,IAAhC,EAAsC,WAAtC;IAEA,KAAK,WAAL;IAEA,KAAK,WAAL,GAAmB,KAAnB;IACA,KAAK,iBAAL,GAAyB,KAAzB;IACA,KAAK,OAAL,GAAe,KAAf;IAEA,KAAK,QAAL,CAAc,aAAd,EAA6B,IAA7B;EACA;;EAED,aAAa,GAAE;IACd,KAAK,QAAL,CAAc,cAAd,EAA8B,IAA9B;EACA;;EAED,WAAW,GAAE;IACZ,IAAI,SAAS,GAAG,KAAK,KAAL,CAAW,MAA3B;;IAEA,KAAI,IAAI,CAAC,GAAG,CAAZ,EAAe,CAAC,GAAG,SAAnB,EAA8B,CAAC,EAA/B,EAAkC;MACjC,KAAK,KAAL,CAAW,CAAX,EAAc,MAAd;IACA;EACD;;EAED,IAAI,GAAE;IACL,KAAK,aAAL;IACA,KAAK,WAAL;;IAEA,IAAG,KAAK,OAAR,EAAgB;MACf,OAAM,KAAK,OAAL,CAAa,UAAnB,EAA+B,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,OAAL,CAAa,UAAtC;;MAE/B,IAAG,KAAK,OAAL,CAAa,UAAhB,EAA2B;QAC1B,KAAK,OAAL,CAAa,UAAb,CAAwB,WAAxB,CAAoC,KAAK,OAAzC;MACA;IACD;;IAED,KAAK,OAAL,GAAe,KAAf;IACA,KAAK,OAAL,GAAe,EAAf;EACA;;EAED,WAAW,GAAE;IACZ,OAAO,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,GAAuC,QAAvC,CAAgD,IAAhD,CAAP;EACA;;EAED,WAAW,GAAE;IACZ,OAAO,KAAK,WAAL,KAAqB,KAAK,QAA1B,GAAqC,KAA5C;EACA;;EAED,WAAW,CAAC,QAAD,EAAU;IACpB,IAAG,QAAQ,IAAI,KAAK,QAApB,EAA6B;MAC5B,KAAK,QAAL,GAAgB,QAAhB;MAEA,KAAK,gBAAL,CAAsB,OAAtB,CAA+B,QAAD,IAAc;QAC3C,QAAQ,CAAC,KAAK,QAAN,CAAR;MACA,CAFD;IAGA;EACD;;EAED,aAAa,CAAC,QAAD,EAAU;IACtB,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,QAA3B;IAEA,QAAQ,CAAC,KAAK,QAAN,CAAR;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,OAAL,CAAa,KAAb,IAAsB,KAA7B;EACA,CA1b0C,CA4b5C;;;EACC,YAAY,GAAE;IACb,IAAG,CAAC,KAAK,SAAT,EAAmB;MAClB,KAAK,SAAL,GAAiB,IAAI,YAAJ,CAAiB,IAAjB,CAAjB;IACA;;IAED,OAAO,KAAK,SAAZ;EACA;;AAnc0C;;ACJ5C,IAAA,mBAAA,GAAe;EACd,OAAM,UAAS,MAAT,EAAiB,IAAjB,EAAuB,UAAvB,EAAkC;IACvC,IAAI,MAAM,GAAG,CAAb;IAAA,IACA,SAAS,GAAG,OAAO,UAAU,CAAC,SAAlB,KAAgC,WAAhC,GAA8C,UAAU,CAAC,SAAzD,GAAqE,CADjF;;IAGA,IAAG,MAAM,CAAC,MAAV,EAAiB;MAChB,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,UAAS,GAAT,EAAc,KAAd,EAAoB;QAC1C,OAAO,MAAM,CAAC,GAAD,CAAN,GAAc,MAAM,CAAC,KAAD,CAA3B;MACA,CAFQ,CAAT;MAIA,MAAM,GAAG,MAAM,GAAG,MAAM,CAAC,MAAzB;MAEA,MAAM,GAAG,SAAS,KAAK,KAAd,GAAsB,MAAM,CAAC,OAAP,CAAe,SAAf,CAAtB,GAAkD,MAA3D;IACA;;IAED,OAAO,UAAU,CAAC,MAAD,CAAV,CAAmB,QAAnB,EAAP;EACA,CAhBa;EAiBd,OAAM,UAAS,MAAT,EAAiB,IAAjB,EAAuB,UAAvB,EAAkC;IACvC,IAAI,MAAM,GAAG,IAAb;IAAA,IACA,SAAS,GAAG,OAAO,UAAU,CAAC,SAAlB,KAAgC,WAAhC,GAA8C,UAAU,CAAC,SAAzD,GAAqE,KADjF;IAGA,MAAM,CAAC,OAAP,CAAe,UAAS,KAAT,EAAe;MAE7B,KAAK,GAAG,MAAM,CAAC,KAAD,CAAd;;MAEA,IAAG,KAAK,GAAG,MAAR,IAAkB,MAAM,KAAK,IAAhC,EAAqC;QACpC,MAAM,GAAG,KAAT;MACA;IACD,CAPD;IASA,OAAO,MAAM,KAAK,IAAX,GAAmB,SAAS,KAAK,KAAd,GAAsB,MAAM,CAAC,OAAP,CAAe,SAAf,CAAtB,GAAkD,MAArE,GAA+E,EAAtF;EACA,CA/Ba;EAgCd,OAAM,UAAS,MAAT,EAAiB,IAAjB,EAAuB,UAAvB,EAAkC;IACvC,IAAI,MAAM,GAAG,IAAb;IAAA,IACA,SAAS,GAAG,OAAO,UAAU,CAAC,SAAlB,KAAgC,WAAhC,GAA8C,UAAU,CAAC,SAAzD,GAAqE,KADjF;IAGA,MAAM,CAAC,OAAP,CAAe,UAAS,KAAT,EAAe;MAE7B,KAAK,GAAG,MAAM,CAAC,KAAD,CAAd;;MAEA,IAAG,KAAK,GAAG,MAAR,IAAkB,MAAM,KAAK,IAAhC,EAAqC;QACpC,MAAM,GAAG,KAAT;MACA;IACD,CAPD;IASA,OAAO,MAAM,KAAK,IAAX,GAAmB,SAAS,KAAK,KAAd,GAAsB,MAAM,CAAC,OAAP,CAAe,SAAf,CAAtB,GAAkD,MAArE,GAA+E,EAAtF;EACA,CA9Ca;EA+Cd,OAAM,UAAS,MAAT,EAAiB,IAAjB,EAAuB,UAAvB,EAAkC;IACvC,IAAI,MAAM,GAAG,CAAb;IAAA,IACA,SAAS,GAAG,OAAO,UAAU,CAAC,SAAlB,KAAgC,WAAhC,GAA8C,UAAU,CAAC,SAAzD,GAAqE,KADjF;;IAGA,IAAG,MAAM,CAAC,MAAV,EAAiB;MAChB,MAAM,CAAC,OAAP,CAAe,UAAS,KAAT,EAAe;QAC7B,KAAK,GAAG,MAAM,CAAC,KAAD,CAAd;QAEA,MAAM,IAAI,CAAC,KAAK,CAAC,KAAD,CAAN,GAAgB,MAAM,CAAC,KAAD,CAAtB,GAAgC,CAA1C;MACA,CAJD;IAKA;;IAED,OAAO,SAAS,KAAK,KAAd,GAAsB,MAAM,CAAC,OAAP,CAAe,SAAf,CAAtB,GAAkD,MAAzD;EACA,CA5Da;EA6Dd,UAAS,UAAS,MAAT,EAAiB,IAAjB,EAAuB,UAAvB,EAAkC;IAC1C,IAAI,MAAM,GAAG,CAAb;;IAEA,IAAG,MAAM,CAAC,MAAV,EAAiB;MAChB,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,UAAS,GAAT,EAAc,KAAd,EAAoB;QAC1C,OAAO,MAAM,CAAC,GAAD,CAAN,GAAc,MAAM,CAAC,KAAD,CAA3B;MACA,CAFQ,CAAT;IAGA;;IAED,OAAO,MAAP;EACA,CAvEa;EAwEd,SAAQ,UAAS,MAAT,EAAiB,IAAjB,EAAuB,UAAvB,EAAkC;IACzC,IAAI,MAAM,GAAG,CAAb;;IAEA,IAAG,MAAM,CAAC,MAAV,EAAiB;MAChB,MAAM,CAAC,OAAP,CAAe,UAAS,KAAT,EAAe;QAC7B,IAAG,KAAH,EAAS;UACR,MAAM;QACN;MACD,CAJD;IAKA;;IAED,OAAO,MAAP;EACA;AApFa,CAAf;;ACUA,MAAM,WAAN,SAA0B,MAA1B,CAAgC;EAE/B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,QAAL,GAAgB,EAAhB;IACA,KAAK,QAAL,GAAgB,EAAhB;IACA,KAAK,SAAL,GAAiB,KAAjB;IACA,KAAK,UAAL,GAAkB,KAAK,aAAL,EAAlB;IACA,KAAK,UAAL,GAAkB,KAAK,aAAL,EAAlB;IACA,KAAK,MAAL,GAAc,KAAd;IACA,KAAK,MAAL,GAAc,KAAd;IACA,KAAK,cAAL,GAAsB,KAAtB;IACA,KAAK,cAAL,GAAsB,KAAtB;IAEA,KAAK,mBAAL,CAAyB,aAAzB,EAAwC,IAAxC;IAEA,KAAK,oBAAL,CAA0B,SAA1B;IACA,KAAK,oBAAL,CAA0B,eAA1B;IACA,KAAK,oBAAL,CAA0B,kBAA1B;IACA,KAAK,oBAAL,CAA0B,wBAA1B;IACA,KAAK,oBAAL,CAA0B,YAA1B;IACA,KAAK,oBAAL,CAA0B,kBAA1B;IACA,KAAK,oBAAL,CAA0B,qBAA1B;IACA,KAAK,oBAAL,CAA0B,2BAA1B;EACA;;EAED,aAAa,GAAG;IACf,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;IACA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,wBAAjB;IACA,OAAO,EAAP;EACA;;EAED,UAAU,GAAE;IACX,KAAK,SAAL,GAAiB,IAAI,MAAJ,CAAW;MAAC,KAAK,EAAC;IAAP,CAAX,EAA4B,IAA5B,CAAjB;IAEA,KAAK,SAAL,CAAe,oBAAf,EAAqC,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAArC;IACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,qBAAL,CAA2B,IAA3B,CAAgC,IAAhC,CAA9B;IACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAA9B;IACA,KAAK,SAAL,CAAe,mBAAf,EAAoC,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAApC;IACA,KAAK,SAAL,CAAe,WAAf,EAA4B,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAA5B;IACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA/B;IACA,KAAK,SAAL,CAAe,YAAf,EAA6B,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA7B;IACA,KAAK,SAAL,CAAe,gBAAf,EAAiC,KAAK,uBAAL,CAA6B,IAA7B,CAAkC,IAAlC,CAAjC;IACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAA/B;IACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAA/B;IAEA,KAAK,qBAAL,CAA2B,gBAA3B,EAA6C,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAA7C;IACA,KAAK,qBAAL,CAA2B,QAA3B,EAAqC,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAArC;EACA;;EAED,WAAW,CAAC,KAAD,EAAO;IACjB,KAAK,MAAL,CAAY,KAAK,KAAL,CAAW,UAAX,CAAsB,UAAlC;;IAEA,IAAG,KAAH,EAAS;MACR,KAAK,MAAL;IACA;EACD,CAzD8B,CA4DhC;EACA;EACA;;;EACC,UAAU,GAAE;IACX,KAAK,MAAL,CAAY,KAAK,KAAL,CAAW,UAAX,CAAsB,UAAlC;EACA,CAjE8B,CAmEhC;EACA;EACA;;;EAEC,WAAW,CAAC,QAAD,EAAW,IAAX,EAAgB;IAC1B,IAAG,KAAK,MAAR,EAAe;MACd,IAAI,CAAC,OAAL,CAAa,KAAK,MAAlB;IACA;;IAED,IAAG,KAAK,MAAR,EAAe;MACd,IAAI,CAAC,IAAL,CAAU,KAAK,MAAf;IACA;;IAED,OAAO,IAAP;EACA;;EAED,WAAW,CAAC,GAAD,EAAK;IACf,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAtB,EAA8B;MAC7B,KAAK,cAAL,CAAoB,GAApB;IACA,CAFD,MAEK;MACJ,KAAK,gBAAL;IACA;EACD;;EAED,uBAAuB,GAAE;IACxB,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,IAA8B,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAjD,IAA0E,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAhG,EAAyG;MACxG,KAAK,SAAL;IACA,CAFD,MAEK;MACJ,KAAK,gBAAL;IACA;EACD;;EAED,gBAAgB,GAAE;IACjB,KAAK,MAAL,CAAY,KAAK,KAAL,CAAW,UAAX,CAAsB,UAAlC;EACA;;EAED,gBAAgB,CAAC,IAAD,EAAM;IACrB,IAAG,IAAI,CAAC,MAAL,CAAY,UAAZ,CAAuB,OAAvB,IAAkC,IAAI,CAAC,MAAL,CAAY,UAAZ,CAAuB,UAA5D,EAAuE;MACtE,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAtB,EAA8B;QAC7B,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,IAAkC,OAAlC,IAA6C,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,IAAkC,MAAlF,EAAyF;UACxF,KAAK,gBAAL;QACA;;QAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,IAAkC,OAArC,EAA6C;UAC5C,KAAK,cAAL,CAAoB,IAAI,CAAC,GAAzB;QACA;MACD,CARD,MAQK;QACJ,KAAK,gBAAL;MACA;IACD;EACD;;EAED,qBAAqB,CAAC,MAAD,EAAQ;IAC5B,IAAG,MAAM,CAAC,UAAP,CAAkB,OAAlB,IAA6B,MAAM,CAAC,UAAP,CAAkB,UAAlD,EAA6D;MAC5D,KAAK,gBAAL,CAAsB,MAAtB;IACA;EACD,CA3H8B,CA6HhC;;;EACC,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAI,GAAG,GAAG,MAAM,CAAC,UAAjB;IAEA,IAAI,MAAM,GAAG;MACZ,aAAa,EAAC,GAAG,CAAC,aAAJ,IAAqB,EADvB;MAEZ,aAAa,EAAC,GAAG,CAAC,gBAAJ,IAAwB;IAF1B,CAAb;;IAKA,IAAG,GAAG,CAAC,OAAP,EAAe;MAEd,QAAO,OAAO,GAAG,CAAC,OAAlB;QACC,KAAK,QAAL;UACC,IAAG,WAAW,CAAC,YAAZ,CAAyB,GAAG,CAAC,OAA7B,CAAH,EAAyC;YACxC,MAAM,CAAC,OAAP,GAAiB,WAAW,CAAC,YAAZ,CAAyB,GAAG,CAAC,OAA7B,CAAjB;UACA,CAFD,MAEK;YACJ,OAAO,CAAC,IAAR,CAAa,2DAAb,EAA0E,GAAG,CAAC,OAA9E;UACA;;UACD;;QAED,KAAK,UAAL;UACC,MAAM,CAAC,OAAP,GAAiB,GAAG,CAAC,OAArB;UACA;MAXF;;MAeA,IAAG,MAAM,CAAC,OAAV,EAAkB;QACjB,MAAM,CAAC,OAAP,CAAe,WAAf,GAA6B,MAA7B;QACA,KAAK,QAAL,CAAc,IAAd,CAAmB,MAAnB;;QAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,IAAkC,OAArC,EAA6C;UAC5C,KAAK,gBAAL;QACA;MACD;IAED;;IAED,IAAG,GAAG,CAAC,UAAP,EAAkB;MACjB,QAAO,OAAO,GAAG,CAAC,UAAlB;QACC,KAAK,QAAL;UACC,IAAG,WAAW,CAAC,YAAZ,CAAyB,GAAG,CAAC,UAA7B,CAAH,EAA4C;YAC3C,MAAM,CAAC,OAAP,GAAiB,WAAW,CAAC,YAAZ,CAAyB,GAAG,CAAC,UAA7B,CAAjB;UACA,CAFD,MAEK;YACJ,OAAO,CAAC,IAAR,CAAa,2DAAb,EAA0E,GAAG,CAAC,UAA9E;UACA;;UACD;;QAED,KAAK,UAAL;UACC,MAAM,CAAC,OAAP,GAAiB,GAAG,CAAC,UAArB;UACA;MAXF;;MAeA,IAAG,MAAM,CAAC,OAAV,EAAkB;QACjB,MAAM,CAAC,OAAP,CAAe,WAAf,GAA6B,MAA7B;QACA,KAAK,QAAL,CAAc,IAAd,CAAmB,MAAnB;;QAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,IAAkC,OAArC,EAA6C;UAC5C,KAAK,mBAAL;QACA;MACD;IACD;EAED,CA5L8B,CA8LhC;;;EACC,mBAAmB,GAAE,CAAE;;EAEvB,WAAW,GAAE;IACZ,IAAI,OAAO,GAAG,KAAd;;IAEA,IAAG,KAAK,cAAR,EAAuB;MACtB,KAAK,cAAL,GAAsB,KAAtB;MACA,KAAK,UAAL,CAAgB,UAAhB,CAA2B,WAA3B,CAAuC,KAAK,UAA5C;MACA,OAAO,GAAG,IAAV;IACA;;IAED,IAAG,KAAK,cAAR,EAAuB;MACtB,KAAK,cAAL,GAAsB,KAAtB;MACA,KAAK,YAAL,CAAkB,KAAK,UAAvB;MACA,OAAO,GAAG,IAAV;IACA;;IAED,IAAG,OAAH,EAAW;MACV,KAAK,KAAL,CAAW,UAAX,CAAsB,eAAtB;IACA;EACD;;EAED,gBAAgB,GAAE;IACjB,IAAG,CAAC,KAAK,cAAT,EAAwB;MACvB,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzB,GAAsC,YAAtC,CAAmD,KAAK,UAAxD,EAAoE,KAAK,KAAL,CAAW,aAAX,CAAyB,cAAzB,CAAwC,WAA5G;MACA,KAAK,cAAL,GAAsB,IAAtB;IACA;EACD;;EAED,mBAAmB,GAAE;IACpB,IAAG,CAAC,KAAK,cAAT,EAAwB;MACvB,KAAK,aAAL,CAAmB,KAAK,UAAxB;MACA,KAAK,cAAL,GAAsB,IAAtB;IACA;EACD;;EAED,gBAAgB,CAAC,IAAD,EAAM;IACrB,IAAG,KAAK,cAAL,IAAuB,KAAK,MAA/B,EAAsC;MACrC,IAAG,KAAK,KAAL,CAAW,GAAd,EAAkB;QACjB,KAAK,MAAL,CAAY,UAAZ,GAAyB,KAAzB,CAA+B,WAA/B,GAA8C,IAAD,GAAS,IAAtD;MACA,CAFD,MAEK;QACJ,KAAK,MAAL,CAAY,UAAZ,GAAyB,KAAzB,CAA+B,UAA/B,GAA6C,CAAC,IAAF,GAAU,IAAtD;MACA;IACD;EACD;;EAED,MAAM,CAAC,IAAD,EAAM;IACX,IAAI,IAAJ,EAAU,GAAV;;IAEA,IAAG,KAAK,cAAL,IAAuB,KAAK,cAA/B,EAA8C;MAC7C,IAAI,GAAG,KAAK,UAAL,CAAgB,IAAhB,CAAP;;MAEA,IAAG,KAAK,cAAR,EAAuB;QACtB,IAAG,KAAK,MAAR,EAAe;UACd,KAAK,MAAL,CAAY,WAAZ;QACA;;QAED,GAAG,GAAG,KAAK,WAAL,CAAiB,KAAjB,EAAwB,IAAxB,CAAN;QACA,KAAK,MAAL,GAAc,GAAd;;QACA,OAAM,KAAK,UAAL,CAAgB,UAAtB,EAAkC,KAAK,UAAL,CAAgB,WAAhB,CAA4B,KAAK,UAAL,CAAgB,UAA5C;;QAClC,KAAK,UAAL,CAAgB,WAAhB,CAA4B,GAAG,CAAC,UAAJ,EAA5B;QACA,GAAG,CAAC,UAAJ,CAAe,IAAf;MACA;;MAED,IAAG,KAAK,cAAR,EAAuB;QACtB,IAAG,KAAK,MAAR,EAAe;UACd,KAAK,MAAL,CAAY,WAAZ;QACA;;QAED,GAAG,GAAG,KAAK,WAAL,CAAiB,QAAjB,EAA2B,IAA3B,CAAN;QACA,KAAK,MAAL,GAAc,GAAd;;QACA,OAAM,KAAK,UAAL,CAAgB,UAAtB,EAAkC,KAAK,UAAL,CAAgB,WAAhB,CAA4B,KAAK,UAAL,CAAgB,UAA5C;;QAClC,KAAK,UAAL,CAAgB,WAAhB,CAA4B,GAAG,CAAC,UAAJ,EAA5B;QACA,GAAG,CAAC,UAAJ,CAAe,IAAf;MACA;;MAED,KAAK,KAAL,CAAW,UAAX,CAAsB,eAAtB,GA3B6C,CA6BhD;;MACG,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,eAArB,CAAH,EAAyC;QACxC,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAiC,MAAjC;MACA;IACD;EACD;;EAED,cAAc,CAAC,GAAD,EAAK;IAClB,KAAK,WAAL,CAAiB,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,WAA7B,CAAyC,GAAzC,CAAjB;EACA;;EAED,SAAS,GAAE;IACV,IAAG,KAAK,QAAL,CAAc,MAAd,IAAwB,KAAK,QAAL,CAAc,MAAzC,EAAgD;MAC/C,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,KAAmC,OAAtC,EAA8C;QAC7C,KAAK,gBAAL;MACA;;MAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,IAA8B,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,KAAmC,OAApE,EAA4E;QAE3E,IAAI,MAAM,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,cAA7B,EAAb;QAEA,MAAM,CAAC,OAAP,CAAgB,KAAD,IAAW;UACzB,KAAK,WAAL,CAAiB,KAAjB;QACA,CAFD;MAGA;IACD;EACD;;EAED,WAAW,CAAC,KAAD,EAAO;IACjB,IAAI,IAAJ,EAAU,OAAV;;IAEA,IAAG,KAAH,EAAS;MACR,IAAG,KAAK,CAAC,KAAT,EAAe;QACd,IAAG,KAAK,CAAC,KAAN,CAAY,MAAf,EAAsB;UACrB,IAAI,GAAG,KAAK,UAAL,CAAgB,KAAK,CAAC,IAAtB,CAAP;UACA,OAAO,GAAG,KAAK,eAAL,CAAqB,QAArB,EAA+B,IAA/B,CAAV;UAEA,KAAK,CAAC,KAAN,CAAY,MAAZ,CAAmB,UAAnB,CAA8B,OAA9B;UACA,KAAK,CAAC,KAAN,CAAY,MAAZ,CAAmB,YAAnB;QACA;;QAED,IAAG,KAAK,CAAC,KAAN,CAAY,GAAf,EAAmB;UAClB,IAAI,GAAG,KAAK,UAAL,CAAgB,KAAK,CAAC,IAAtB,CAAP;UACA,OAAO,GAAG,KAAK,eAAL,CAAqB,KAArB,EAA4B,IAA5B,CAAV;UAEA,KAAK,CAAC,KAAN,CAAY,GAAZ,CAAgB,UAAhB,CAA2B,OAA3B;UACA,KAAK,CAAC,KAAN,CAAY,GAAZ,CAAgB,YAAhB;QACA;MACD;IACD;EACD,CA/T8B,CAiUhC;;;EACC,cAAc,CAAC,IAAD,EAAM;IACnB,OAAO,KAAK,WAAL,CAAiB,KAAjB,EAAwB,KAAK,UAAL,CAAgB,IAAhB,CAAxB,CAAP;EACA,CApU8B,CAqUhC;;;EACC,iBAAiB,CAAC,IAAD,EAAM;IACtB,OAAO,KAAK,WAAL,CAAiB,QAAjB,EAA2B,KAAK,UAAL,CAAgB,IAAhB,CAA3B,CAAP;EACA;;EAED,UAAU,CAAC,IAAD,EAAM;IACf,IAAI,IAAI,GAAG,EAAX;IAEA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;MACrB,IAAI,CAAC,IAAL,CAAU,GAAG,CAAC,OAAJ,EAAV;;MAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,IAA+B,KAAK,KAAL,CAAW,OAAX,CAAmB,wBAArD,EAA8E;QAC7E,IAAG,GAAG,CAAC,OAAJ,CAAY,QAAZ,IAAwB,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,IAAhD,EAAqD;UACpD,IAAI,QAAQ,GAAG,KAAK,UAAL,CAAgB,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,CAA4B,uBAA5B,CAAoD,GAApD,CAAhB,CAAf;UACA,IAAI,GAAG,IAAI,CAAC,MAAL,CAAY,QAAZ,CAAP;QACA;MACD;IACD,CATD;IAWA,OAAO,IAAP;EACA,CAzV8B,CA2VhC;;;EACC,WAAW,CAAC,GAAD,EAAM,IAAN,EAAW;IACrB,IAAI,OAAO,GAAG,KAAK,eAAL,CAAqB,GAArB,EAA0B,IAA1B,CAAd;IAAA,IACA,GADA;;IAGA,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,SAArB,CAAH,EAAmC;MAClC,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,CAA2B,OAA3B;IACA;;IAED,GAAG,GAAG,IAAI,GAAJ,CAAQ,OAAR,EAAiB,IAAjB,EAAuB,MAAvB,CAAN;;IAEA,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,SAArB,CAAH,EAAmC;MAClC,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,CAA2B,MAA3B;IACA;;IAED,GAAG,CAAC,UAAJ,GAAiB,SAAjB,CAA2B,GAA3B,CAA+B,iBAA/B,EAAkD,qBAAqB,GAAvE;IAEA,GAAG,CAAC,SAAJ,GAAgB,KAAhB;;IAEA,GAAG,CAAC,YAAJ,GAAmB,MAAM;MACxB,IAAG,CAAC,GAAG,CAAC,SAAR,EAAkB;QACjB,GAAG,CAAC,SAAJ,GAAgB,IAAI,aAAJ,CAAkB,GAAlB,CAAhB;MACA;;MAED,OAAO,GAAG,CAAC,SAAX;IACA,CAND;;IAQA,GAAG,CAAC,aAAJ,GAAoB,MAAM;MAEzB,IAAI,KAAK,GAAG,EAAZ;MAEA,KAAK,KAAL,CAAW,aAAX,CAAyB,cAAzB,CAAwC,OAAxC,CAAiD,MAAD,IAAY;QAE/D;QACI,KAAK,SAAL,CAAe,QAAf,CAAwB,MAAM,CAAC,QAAP,EAAxB;QACA,KAAK,SAAL,CAAe,QAAf,GAA0B,MAAM,CAAC,QAAjC;;QAEA,IAAG,MAAM,CAAC,UAAP,CAAkB,GAAG,GAAG,eAAxB,KAA4C,KAAK,KAAL,CAAW,SAAX,CAAqB,QAArB,CAA/C,EAA8E;UAC7E,KAAK,SAAL,CAAe,OAAf,CAAuB,MAAvB,GAAgC;YAC/B,SAAS,EAAE,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,CAA0B,YAA1B,CAAuC,MAAM,CAAC,UAAP,CAAkB,GAAG,GAAG,eAAxB,CAAvC,CADoB;YAE/B,MAAM,EAAE,MAAM,CAAC,UAAP,CAAkB,GAAG,GAAG,qBAAxB,KAAkD;UAF3B,CAAhC;QAIA,CALD,MAKK;UACJ,KAAK,SAAL,CAAe,OAAf,CAAuB,MAAvB,GAAgC;YAC/B,SAAS,EAAE,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,CAA0B,YAA1B,CAAuC,WAAvC,CADoB;YAE/B,MAAM,EAAC;UAFwB,CAAhC;QAIA,CAhB0D,CAkB/D;;;QACI,KAAK,SAAL,CAAe,UAAf,CAA0B,QAA1B,GAAqC,MAAM,CAAC,UAAP,CAAkB,QAAvD,CAnB2D,CAqB/D;;QACI,IAAI,IAAI,GAAG,IAAI,IAAJ,CAAS,KAAK,SAAd,EAAyB,GAAzB,CAAX;QACA,IAAI,CAAC,UAAL;QACA,IAAI,CAAC,MAAL,GAAc,MAAd;QACA,IAAI,CAAC,QAAL;QAEA,MAAM,CAAC,KAAP,CAAa,IAAb,CAAkB,IAAlB;QACA,KAAK,CAAC,IAAN,CAAW,IAAX;;QAEA,IAAG,CAAC,MAAM,CAAC,OAAX,EAAmB;UAClB,IAAI,CAAC,IAAL;QACA;MACD,CAjCD;MAmCA,GAAG,CAAC,KAAJ,GAAY,KAAZ;IACA,CAxCD;;IA0CA,OAAO,GAAP;EACA,CAja8B,CAmahC;;;EACC,eAAe,CAAC,GAAD,EAAM,IAAN,EAAW;IACzB,IAAI,OAAO,GAAG,EAAd;IAAA,IACA,KAAK,GAAG,GAAG,IAAI,KAAP,GAAe,KAAK,QAApB,GAA+B,KAAK,QAD5C;IAAA,IAEA,IAAI,GAAG,GAAG,IAAI,KAAP,GAAe,SAAf,GAA2B,SAFlC;IAAA,IAGA,MAHA;IAAA,IAGQ,QAHR;IAKA,KAAK,CAAC,OAAN,CAAc,UAAS,MAAT,EAAgB;MAC7B,IAAI,MAAM,GAAG,EAAb;;MAEA,IAAG,MAAM,CAAC,OAAP,CAAe,WAAf,IAA8B,MAAM,CAAC,OAAP,CAAe,WAAf,CAA2B,IAA3B,CAAjC,EAAkE;QACjE,IAAI,CAAC,OAAL,CAAa,UAAS,IAAT,EAAc;UAC1B,MAAM,CAAC,IAAP,CAAY,MAAM,CAAC,aAAP,CAAqB,IAArB,CAAZ;QACA,CAFD;QAIA,QAAQ,GAAG,IAAI,GAAG,QAAlB;QACA,MAAM,GAAG,OAAO,MAAM,CAAC,OAAP,CAAe,WAAf,CAA2B,QAA3B,CAAP,KAAgD,UAAhD,GAA6D,MAAM,CAAC,OAAP,CAAe,WAAf,CAA2B,QAA3B,EAAqC,MAArC,EAA6C,IAA7C,CAA7D,GAAkH,MAAM,CAAC,OAAP,CAAe,WAAf,CAA2B,QAA3B,CAA3H;QAEA,MAAM,CAAC,aAAP,CAAqB,OAArB,EAA8B,MAAM,CAAC,OAAP,CAAe,WAAf,CAA2B,IAA3B,EAAiC,MAAjC,EAAyC,IAAzC,EAA+C,MAA/C,CAA9B;MACA;IACD,CAbD;IAeA,OAAO,OAAP;EACA;;EAED,WAAW,GAAE;IACZ,OAAO,CAAC,CAAE,KAAK,QAAL,CAAc,MAAxB;EACA;;EAED,cAAc,GAAE;IACf,OAAO,CAAC,CAAE,KAAK,QAAL,CAAc,MAAxB;EACA,CAlc8B,CAochC;;;EACC,MAAM,GAAE;IACP,IAAG,KAAK,MAAR,EAAe;MACd,KAAK,MAAL,CAAY,eAAZ,CAA4B,IAA5B;IACA;;IACD,IAAG,KAAK,MAAR,EAAe;MACd,KAAK,MAAL,CAAY,eAAZ,CAA4B,IAA5B;IACA;EACD,CA5c8B,CA8chC;;;EACC,UAAU,GAAE;IACX,IAAI,OAAO,GAAG,EAAd;IAAA,IACA,MADA;;IAGA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,IAA8B,KAAK,KAAL,CAAW,SAAX,CAAqB,WAArB,CAAjC,EAAmE;MAClE,MAAM,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,SAA7B,CAAuC,IAAvC,CAAT;MAEA,MAAM,CAAC,OAAP,CAAgB,KAAD,IAAW;QACzB,OAAO,CAAC,KAAK,CAAC,MAAN,EAAD,CAAP,GAA0B,KAAK,eAAL,CAAqB,KAArB,CAA1B;MACA,CAFD;IAGA,CAND,MAMK;MACJ,OAAO,GAAG;QACT,GAAG,EAAE,KAAK,MAAL,GAAc,KAAK,MAAL,CAAY,OAAZ,EAAd,GAAsC,EADlC;QAET,MAAM,EAAE,KAAK,MAAL,GAAc,KAAK,MAAL,CAAY,OAAZ,EAAd,GAAsC;MAFrC,CAAV;IAIA;;IAED,OAAO,OAAP;EACA,CAje8B,CAmehC;;;EACC,eAAe,CAAC,KAAD,EAAO;IACrB,IAAI,QAAQ,GAAG,KAAK,CAAC,QAAN,EAAf;IAAA,IACA,SAAS,GAAG,KAAK,CAAC,YAAN,EADZ;IAAA,IAEA,eAAe,GAAG,EAFlB;IAAA,IAGA,OAAO,GAAG,EAHV;;IAKA,SAAS,CAAC,OAAV,CAAmB,QAAD,IAAc;MAC/B,eAAe,CAAC,QAAQ,CAAC,MAAT,EAAD,CAAf,GAAqC,KAAK,eAAL,CAAqB,QAArB,CAArC;IACA,CAFD;IAIA,OAAO,GAAG;MACT,GAAG,EAAE,QAAQ,CAAC,KAAT,CAAe,GAAf,GAAqB,QAAQ,CAAC,KAAT,CAAe,GAAf,CAAmB,OAAnB,EAArB,GAAoD,EADhD;MAET,MAAM,EAAE,QAAQ,CAAC,KAAT,CAAe,MAAf,GAAwB,QAAQ,CAAC,KAAT,CAAe,MAAf,CAAsB,OAAtB,EAAxB,GAA0D,EAFzD;MAGT,MAAM,EAAE;IAHC,CAAV;IAMA,OAAO,OAAP;EACA;;AArf8B;;;AAwfhC,WAAW,CAAC,UAAZ,GAAyB,aAAzB,EAEA;;AACA,WAAW,CAAC,YAAZ,GAA2B,mBAA3B;;AC/fA,MAAM,QAAN,SAAuB,MAAvB,CAA6B;EAE5B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,MAAL,GAAc,EAAd;IACA,KAAK,KAAL,GAAa,EAAb;IACA,KAAK,UAAL,GAAkB,IAAlB;IACA,KAAK,QAAL,GAAgB,IAAhB;IACA,KAAK,QAAL,GAAgB,IAAhB;IACA,KAAK,YAAL,GAAoB,KAApB;;IAEA,KAAK,SAAL,GAAiB,YAAU,CAAE,CAA7B;;IAEA,KAAK,YAAL,GAAoB,CAApB;IAEA,KAAK,mBAAL,CAAyB,UAAzB,EAAqC,KAArC,EAdiB,CAc2B;;IAC5C,KAAK,mBAAL,CAAyB,gBAAzB,EAA2C,IAA3C,EAfiB,CAegC;;IACjD,KAAK,mBAAL,CAAyB,cAAzB,EAAyC,IAAzC,EAhBiB,CAgB8B;;IAC/C,KAAK,mBAAL,CAAyB,uBAAzB,EAAkD,KAAlD;IACA,KAAK,mBAAL,CAAyB,uBAAzB,EAAkD,IAAlD,EAlBiB,CAkBuC;;IACxD,KAAK,mBAAL,CAAyB,qBAAzB,EAAgD,CAAhD,EAnBiB,CAmBkC;;IACnD,KAAK,mBAAL,CAAyB,oBAAzB,EAA+C,WAA/C,EApBiB,CAoB2C;;IAC5D,KAAK,mBAAL,CAAyB,yBAAzB,EAAoD,KAApD,EArBiB,CAqB0C;;IAC3D,KAAK,mBAAL,CAAyB,uBAAzB,EAAkD,KAAlD,EAtBiB,CAsBwC;;IACzD,KAAK,mBAAL,CAAyB,uBAAzB,EAAkD,KAAlD;IACA,KAAK,mBAAL,CAAyB,0BAAzB,EAAqD,KAArD,EAxBiB,CAwB2C;;IAC5D,KAAK,mBAAL,CAAyB,yBAAzB,EAAoD,KAApD,EAzBiB,CAyB0C;IAE7D;;IACE,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,cAAtC,EAAsD,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAtD;IACA,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,YAAtC,EAAoD,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAApD;IACA,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,YAAtC,EAAoD,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAApD;IACA,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,eAAtC,EAAuD,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAvD;IACA,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,iBAAtC,EAAyD,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAAzD;IACA,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,cAAtC,EAAsD,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAAtD;IACA,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,gBAAtC,EAAwD,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAxD;EACA;;EAED,UAAU,GAAE;IACX,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAtB,EAA+B;MAC9B,IAAI,OAAO,GAAG,IAAd;MAAA,IACA,OAAO,GAAG,KAAK,KAAL,CAAW,OADrB;MAGA,KAAK,KAAL,GAAa,OAAO,CAAC,kBAArB;MACA,KAAK,MAAL,GAAc,OAAO,CAAC,mBAAtB;;MAEA,IAAG,KAAK,OAAL,CAAa,aAAb,CAAH,EAA+B;QAC9B,OAAO,CAAC,IAAR,CAAa,4HAAb;MACA;;MAED,IAAG,OAAO,CAAC,qBAAX,EAAiC;QAEhC,IAAG,OAAO,CAAC,qBAAR,KAAkC,IAArC,EAA0C;UACzC,KAAK,QAAL,GAAgB,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAhB;UACA,KAAK,QAAL,CAAc,SAAd,CAAwB,GAAxB,CAA4B,4BAA5B;QACA,CAHD,MAGK;UACJ,IAAG,OAAO,OAAO,CAAC,qBAAf,KAAyC,QAA5C,EAAqD;YACpD,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAV;YACA,OAAO,CAAC,SAAR,GAAoB,OAAO,CAAC,qBAA5B;YACA,KAAK,QAAL,GAAgB,OAAO,CAAC,UAAxB;UACA,CAJD,MAIK;YACJ,KAAK,QAAL,GAAgB,OAAO,CAAC,qBAAxB;UACA;QACD;MACD;;MAED,IAAG,OAAO,CAAC,uBAAX,EAAmC;QAClC,IAAG,OAAO,OAAO,CAAC,uBAAf,KAA2C,QAA9C,EAAuD;UACtD,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAV;UACA,OAAO,CAAC,SAAR,GAAoB,OAAO,CAAC,uBAA5B;UACA,KAAK,UAAL,GAAkB,OAAO,CAAC,UAA1B;QACA,CAJD,MAIK;UACJ,KAAK,UAAL,GAAkB,OAAO,CAAC,uBAA1B;QACA;MACD,CARD,MAQK;QACJ,KAAK,UAAL,GAAkB,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAlB;QACA,KAAK,UAAL,CAAgB,SAAhB,CAA0B,GAA1B,CAA8B,6BAA9B;QACA,KAAK,UAAL,CAAgB,QAAhB,GAA2B,CAA3B;QACA,KAAK,UAAL,CAAgB,SAAhB,GAA4B,0DAA5B;MACA;;MAED,IAAG,OAAO,CAAC,qBAAX,EAAiC;QAChC,IAAG,OAAO,OAAO,CAAC,qBAAf,KAAyC,QAA5C,EAAqD;UACpD,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAV;UACA,OAAO,CAAC,SAAR,GAAoB,OAAO,CAAC,qBAA5B;UACA,KAAK,QAAL,GAAgB,OAAO,CAAC,UAAxB;QACA,CAJD,MAIK;UACJ,KAAK,QAAL,GAAgB,OAAO,CAAC,qBAAxB;QACA;MACD,CARD,MAQK;QACJ,KAAK,QAAL,GAAgB,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAhB;QACA,KAAK,QAAL,CAAc,SAAd,CAAwB,GAAxB,CAA4B,6BAA5B;QACA,KAAK,QAAL,CAAc,QAAd,GAAyB,CAAzB;QACA,KAAK,QAAL,CAAc,SAAd,GAA0B,wDAA1B;MACA;;MAGD,QAAO,OAAO,OAAO,CAAC,qBAAtB;QACC,KAAK,SAAL;UACC,KAAK,SAAL,GAAiB,UAAS,GAAT,EAAc,KAAd,EAAoB;YACpC,OAAO,OAAO,CAAC,qBAAf;UACA,CAFD;;UAGA;;QAED,KAAK,UAAL;UACC,KAAK,SAAL,GAAiB,OAAO,CAAC,qBAAzB;UACA;;QAED;UACC,KAAK,SAAL,GAAiB,UAAS,GAAT,EAAc,KAAd,EAAoB;YACpC,OAAO,OAAO,CAAC,qBAAR,CAA8B,KAA9B,CAAP;UACA,CAFD;;UAGA;MAfF;;MAkBA,KAAK,SAAL,CAAe,UAAf,EAA2B,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAA3B;MACA,KAAK,SAAL,CAAe,kBAAf,EAAmC,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAAnC;MACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAA9B,EAAwD,CAAxD;MACA,KAAK,SAAL,CAAe,kBAAf,EAAmC,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAAnC,EAAmE,EAAnE;MACA,KAAK,SAAL,CAAe,oBAAf,EAAqC,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAArC;MACA,KAAK,SAAL,CAAe,gBAAf,EAAiC,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAAjC;MACA,KAAK,SAAL,CAAe,oBAAf,EAAqC,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAArC;MACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,sBAAL,CAA4B,IAA5B,CAAiC,IAAjC,CAA9B;MACA,KAAK,SAAL,CAAe,iBAAf,EAAkC,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAAlC;MAEA,KAAK,sBAAL,CAA4B,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAA5B,EAAqD,EAArD;IACA;EACD;;EAED,cAAc,CAAC,KAAD,EAAO;IACpB,IAAI,IAAJ;;IAEA,IAAG,KAAH,EAAS;MACR,IAAI,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,EAAP;MAEA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;QACrB,KAAK,uBAAL,CAA6B,GAA7B;MACA,CAFD;IAGA;EACD;;EAED,sBAAsB,GAAE;IACvB,IAAI,QAAQ,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,qBAAzB,EAAf;IAEA,KAAK,YAAL,GAAoB,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAnB,KAA6C,QAAQ,GAAG,QAAQ,CAAC,KAAZ,GAAoB,KAAzE,CAApB;EACA;;EAED,cAAc,CAAC,GAAD,EAAK;IAClB,OAAO,KAAK,eAAL,CAAqB,GAArB,EAA0B,IAA1B,CAAP;EACA;;EAED,YAAY,GAAE;IACb,IAAI,IAAI,GAAG,EAAX;IAEA,KAAK,KAAL,CAAW,UAAX,CAAsB,IAAtB,CAA2B,OAA3B,CAAoC,GAAD,IAAS;MAC3C,IAAI,GAAG,IAAI,CAAC,MAAL,CAAY,KAAK,eAAL,CAAqB,GAArB,EAA0B,KAA1B,EAAiC,IAAjC,CAAZ,CAAP;IACA,CAFD;IAIA,OAAO,IAAP;EACA;;EAED,cAAc,CAAC,GAAD,EAAM,OAAN,EAAe,WAAf,EAA2B;IACxC,IAAG,KAAK,YAAL,CAAkB,WAAlB,CAAH,EAAkC;MACjC,KAAK,aAAL,CAAmB,GAAnB;;MAEA,IAAG,OAAH,EAAW;QACV,KAAK,SAAL,CAAe,GAAf;QACA,KAAK,WAAL,CAAiB,IAAjB;MACA;IACD;EACD;;EAED,gBAAgB,CAAC,IAAD,EAAM;IACrB,IAAI,KAAK,GAAG,IAAI,CAAC,MAAL,CAAY,QAAZ,EAAZ;;IAEA,IAAG,KAAK,KAAK,KAAK,YAAlB,EAA+B;MAC9B,KAAK,SAAL,CAAe,IAAI,CAAC,GAApB;IACA;EACD;;EAED,aAAa,CAAC,GAAD,EAAK;IACjB,IAAI,UAAU,GAAG,GAAG,CAAC,OAAJ,GAAc,KAAK,KAAnB,CAAjB;IACA,IAAI,OAAO,GAAG,KAAK,CAAC,OAAN,CAAc,UAAd,CAAd;IAEA,IAAI,QAAQ,GAAG,OAAO,IAAK,CAAC,OAAD,IAAY,OAAO,UAAP,KAAsB,QAAlC,IAA8C,UAAU,KAAK,IAAxF;;IAEA,IAAG,CAAC,QAAD,IAAa,GAAG,CAAC,OAAJ,CAAY,QAAzB,IAAqC,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,QAA7D,EAAsE;MACrE,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,QAArB,CAA8B,UAA9B,CAAyC,WAAzC,CAAqD,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,QAA1E;IACA;;IAED,IAAG,CAAC,QAAD,IAAa,GAAG,CAAC,OAAJ,CAAY,QAAzB,IAAqC,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,SAA7D,EAAuE;MACtE,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,SAArB,CAA+B,UAA/B,CAA0C,WAA1C,CAAsD,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,SAA3E;IACA;;IAED,GAAG,CAAC,OAAJ,CAAY,QAAZ,GAAuB;MACtB,KAAK,EAAE,GAAG,CAAC,OAAJ,CAAY,QAAZ,GAAuB,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,KAA5C,GAAoD,CADrC;MAEtB,IAAI,EAAE,QAAQ,GAAI,GAAG,CAAC,OAAJ,CAAY,QAAZ,GAAuB,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,IAA5C,GAAmD,KAAK,SAAL,CAAe,GAAG,CAAC,YAAJ,EAAf,EAAmC,CAAnC,CAAvD,GAAgG,KAFxF;MAGtB,SAAS,EAAE,GAAG,CAAC,OAAJ,CAAY,QAAZ,IAAwB,QAAxB,GAAmC,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,SAAxD,GAAoE,KAHzD;MAItB,QAAQ,EAAE,GAAG,CAAC,OAAJ,CAAY,QAAZ,IAAwB,QAAxB,GAAmC,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,QAAxD,GAAmE,KAJvD;MAKtB,MAAM,EAAE,GAAG,CAAC,OAAJ,CAAY,QAAZ,GAAuB,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,MAA5C,GAAqD,KALvC;MAMtB,QAAQ,EAAC;IANa,CAAvB;EAQA;;EAED,uBAAuB,CAAC,GAAD,EAAK;IAC3B,IAAI,QAAQ,GAAG,KAAK,eAAL,CAAqB,GAArB,EAA0B,KAA1B,EAAiC,IAAjC,CAAf;IAEA,QAAQ,CAAC,OAAT,CAAiB,UAAS,KAAT,EAAe;MAC/B,KAAK,CAAC,YAAN,CAAmB,IAAnB;IACA,CAFD;EAGA;;EAED,SAAS,CAAC,GAAD,EAAK;IACb,IAAI,IAAI,GAAG,KAAK,YAAL,GAAoB,GAAG,CAAC,OAAJ,CAAY,KAAK,YAAjB,CAApB,GAAqD,GAAG,CAAC,QAAJ,GAAe,CAAf,CAAhE;IAAA,IACA,EAAE,GAAG,IAAI,CAAC,UAAL,EADL;IAAA,IAEA,MAAM,GAAG,GAAG,CAAC,OAAJ,CAAY,QAFrB;;IAIA,IAAG,MAAM,CAAC,QAAV,EAAmB;MAClB,IAAG,MAAM,CAAC,QAAP,CAAgB,UAAnB,EAA8B;QAC7B,MAAM,CAAC,QAAP,CAAgB,UAAhB,CAA2B,WAA3B,CAAuC,MAAM,CAAC,QAA9C;MACA;;MACD,MAAM,CAAC,QAAP,GAAkB,KAAlB;IACA;;IAED,IAAG,MAAM,CAAC,SAAV,EAAoB;MACnB,IAAG,MAAM,CAAC,SAAP,CAAiB,UAApB,EAA+B;QAC9B,MAAM,CAAC,SAAP,CAAiB,UAAjB,CAA4B,WAA5B,CAAwC,MAAM,CAAC,SAA/C;MACA;;MACD,MAAM,CAAC,SAAP,GAAmB,KAAnB;IACA;;IAED,KAAK,sBAAL,CAA4B,GAA5B,EAAiC,EAAjC;IAEA,GAAG,CAAC,UAAJ,GAAiB,SAAjB,CAA2B,GAA3B,CAA+B,0BAA0B,MAAM,CAAC,KAAhE;;IAEA,IAAG,MAAM,CAAC,KAAV,EAAgB;MACf,IAAG,KAAK,QAAR,EAAiB;QAChB,MAAM,CAAC,QAAP,GAAkB,KAAK,QAAL,CAAc,SAAd,CAAwB,IAAxB,CAAlB;QACA,EAAE,CAAC,YAAH,CAAgB,MAAM,CAAC,QAAvB,EAAiC,EAAE,CAAC,UAApC;;QAEA,IAAG,KAAK,KAAL,CAAW,GAAd,EAAkB;UACjB,MAAM,CAAC,QAAP,CAAgB,KAAhB,CAAsB,WAAtB,GAAsC,CAAC,MAAM,CAAC,QAAP,CAAgB,WAAhB,GAA8B,MAAM,CAAC,QAAP,CAAgB,KAAhB,CAAsB,UAArD,KAAoE,MAAM,CAAC,KAAP,GAAe,CAAnF,CAAD,GAA2F,MAAM,CAAC,KAAP,GAAe,KAAK,MAAhH,GAA2H,IAA/J;QACA,CAFD,MAEK;UACJ,MAAM,CAAC,QAAP,CAAgB,KAAhB,CAAsB,UAAtB,GAAqC,CAAC,MAAM,CAAC,QAAP,CAAgB,WAAhB,GAA8B,MAAM,CAAC,QAAP,CAAgB,KAAhB,CAAsB,WAArD,KAAqE,MAAM,CAAC,KAAP,GAAe,CAApF,CAAD,GAA4F,MAAM,CAAC,KAAP,GAAe,KAAK,MAAjH,GAA4H,IAA/J;QACA;MACD,CATD,MASK;QAEJ,IAAG,KAAK,KAAL,CAAW,GAAd,EAAkB;UACjB,EAAE,CAAC,KAAH,CAAS,YAAT,GAAwB,QAAQ,CAAC,MAAM,CAAC,gBAAP,CAAwB,EAAxB,EAA4B,IAA5B,EAAkC,gBAAlC,CAAmD,eAAnD,CAAD,CAAR,GAAiF,MAAM,CAAC,KAAP,GAAe,KAAK,MAArG,GAA+G,IAAvI;QACA,CAFD,MAEK;UACJ,EAAE,CAAC,KAAH,CAAS,WAAT,GAAuB,QAAQ,CAAC,MAAM,CAAC,gBAAP,CAAwB,EAAxB,EAA4B,IAA5B,EAAkC,gBAAlC,CAAmD,cAAnD,CAAD,CAAR,GAAgF,MAAM,CAAC,KAAP,GAAe,KAAK,MAApG,GAA8G,IAArI;QACA;MACD;IACD;EACD;;EAED,sBAAsB,CAAC,GAAD,EAAM,EAAN,EAAS;IAC9B,IAAI,MAAM,GAAG,GAAG,CAAC,OAAJ,CAAY,QAAzB;IAAA,IACA,UAAU,GAAG,MAAM,CAAC,SADpB;IAGA,EAAE,GAAG,EAAE,IAAI,GAAG,CAAC,QAAJ,GAAe,CAAf,EAAkB,UAAlB,EAAX;;IAEA,IAAG,MAAM,CAAC,QAAP,KAAoB,KAAvB,EAA6B;MAE5B,IAAG,MAAM,CAAC,IAAV,EAAe;QACd,MAAM,CAAC,SAAP,GAAmB,KAAK,UAAL,CAAgB,SAAhB,CAA0B,IAA1B,CAAnB;QACA,MAAM,CAAC,SAAP,CAAiB,gBAAjB,CAAkC,OAAlC,EAA4C,CAAD,IAAO;UACjD,CAAC,CAAC,eAAF;UACA,KAAK,WAAL,CAAiB,GAAjB;QACA,CAHD;MAIA,CAND,MAMK;QACJ,MAAM,CAAC,SAAP,GAAmB,KAAK,QAAL,CAAc,SAAd,CAAwB,IAAxB,CAAnB;QACA,MAAM,CAAC,SAAP,CAAiB,gBAAjB,CAAkC,OAAlC,EAA4C,CAAD,IAAO;UACjD,CAAC,CAAC,eAAF;UACA,KAAK,SAAL,CAAe,GAAf;QACA,CAHD;MAIA;;MAED,MAAM,CAAC,SAAP,CAAiB,gBAAjB,CAAkC,WAAlC,EAAgD,CAAD,IAAO;QACrD,CAAC,CAAC,eAAF;MACA,CAFD;;MAIA,IAAG,UAAU,IAAI,UAAU,CAAC,UAAX,KAA0B,EAA3C,EAA8C;QAC7C,UAAU,CAAC,UAAX,CAAsB,YAAtB,CAAmC,MAAM,CAAC,SAA1C,EAAoD,UAApD;MACA,CAFD,MAEK;QACJ,EAAE,CAAC,YAAH,CAAgB,MAAM,CAAC,SAAvB,EAAkC,EAAE,CAAC,UAArC;MACA;IACD;EACD;;EAED,eAAe,CAAE,KAAF,EAAS;IACvB,KAAK,YAAL,GAAoB,KAApB;EACA;;EAED,eAAe,GAAI;IAClB,OAAO,KAAK,YAAZ;EACA;;EAED,OAAO,CAAC,IAAD,EAAM;IACZ,IAAI,MAAM,GAAG,EAAb;IAEA,IAAI,CAAC,OAAL,CAAa,CAAC,GAAD,EAAM,CAAN,KAAY;MACxB,IAAI,MAAJ,EAAY,QAAZ;MAEA,MAAM,CAAC,IAAP,CAAY,GAAZ;;MAEA,IAAG,GAAG,YAAY,GAAlB,EAAsB;QAErB,GAAG,CAAC,MAAJ;QAEA,MAAM,GAAG,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,QAA9B;;QAEA,IAAG,CAAC,MAAM,CAAC,KAAR,IAAiB,MAAM,CAAC,QAAP,KAAoB,KAAxC,EAA8C;UAC7C,QAAQ,GAAG,KAAK,WAAL,CAAiB,GAAjB,CAAX;UAEA,QAAQ,CAAC,OAAT,CAAkB,KAAD,IAAW;YAC3B,KAAK,CAAC,MAAN;YACA,MAAM,CAAC,IAAP,CAAY,KAAZ;UACA,CAHD;QAIA;MACD;IACD,CApBD;IAsBA,OAAO,MAAP;EACA;;EAED,WAAW,CAAC,GAAD,EAAM,WAAN,EAAkB;IAC5B,IAAI,MAAM,GAAG,GAAG,CAAC,OAAJ,CAAY,QAAzB;IAAA,IACA,QAAQ,GAAG,EADX;IAAA,IAEA,MAAM,GAAG,EAFT;;IAIA,IAAG,MAAM,CAAC,QAAP,KAAoB,KAApB,KAA8B,MAAM,CAAC,IAAP,IAAe,WAA7C,CAAH,EAA6D;MAC5D,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,MAAM,CAAC,QAArB,CAAJ,EAAmC;QAClC,MAAM,CAAC,QAAP,GAAkB,KAAK,gBAAL,CAAsB,GAAtB,CAAlB;MACA;;MAED,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,QAArB,KAAkC,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAxD,EAAuE;QACtE,QAAQ,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,CAA0B,MAA1B,CAAiC,MAAM,CAAC,QAAxC,CAAX;MACA,CAFD,MAEK;QACJ,QAAQ,GAAG,MAAM,CAAC,QAAlB;MACA;;MAED,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,MAArB,KAAgC,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAtD,EAAmE;QAClE,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,IAAxB,CAA6B,QAA7B;MACA;;MAED,QAAQ,CAAC,OAAT,CAAkB,KAAD,IAAW;QAC3B,MAAM,CAAC,IAAP,CAAY,KAAZ;QAEA,IAAI,WAAW,GAAG,KAAK,WAAL,CAAiB,KAAjB,CAAlB;QAEA,WAAW,CAAC,OAAZ,CAAqB,GAAD,IAAS;UAC5B,MAAM,CAAC,IAAP,CAAY,GAAZ;QACA,CAFD;MAGA,CARD;IASA;;IAED,OAAO,MAAP;EACA;;EAED,gBAAgB,CAAC,GAAD,EAAK;IACpB,IAAI,QAAQ,GAAG,EAAf;IAEA,IAAI,UAAU,GAAG,GAAG,CAAC,OAAJ,GAAc,KAAK,KAAnB,CAAjB;;IAEA,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,UAAd,CAAJ,EAA8B;MAC7B,UAAU,GAAG,CAAC,UAAD,CAAb;IACA;;IAED,UAAU,CAAC,OAAX,CAAoB,SAAD,IAAe;MACjC,IAAI,QAAQ,GAAG,IAAI,GAAJ,CAAQ,SAAS,IAAI,EAArB,EAAyB,KAAK,KAAL,CAAW,UAApC,CAAf;MAEA,QAAQ,CAAC,MAAT;MAEA,QAAQ,CAAC,OAAT,CAAiB,QAAjB,CAA0B,KAA1B,GAAkC,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,KAArB,GAA6B,CAA/D;MACA,QAAQ,CAAC,OAAT,CAAiB,QAAjB,CAA0B,MAA1B,GAAmC,GAAnC;;MAEA,IAAG,QAAQ,CAAC,OAAT,CAAiB,QAAjB,CAA0B,QAA7B,EAAsC;QACrC,QAAQ,CAAC,OAAT,CAAiB,QAAjB,CAA0B,IAA1B,GAAiC,KAAK,SAAL,CAAe,QAAQ,CAAC,YAAT,EAAf,EAAwC,QAAQ,CAAC,OAAT,CAAiB,QAAjB,CAA0B,KAAlE,CAAjC;MACA;;MACD,QAAQ,CAAC,IAAT,CAAc,QAAd;IACA,CAZD;IAcA,OAAO,QAAP;EACA;;EAED,SAAS,CAAC,GAAD,EAAM,MAAN,EAAa;IACrB,IAAI,MAAM,GAAG,GAAG,CAAC,OAAJ,CAAY,QAAzB;;IAEA,IAAG,MAAM,CAAC,QAAP,KAAoB,KAAvB,EAA6B;MAC5B,MAAM,CAAC,IAAP,GAAc,IAAd;MAEA,GAAG,CAAC,YAAJ;MAEA,KAAK,WAAL,CAAiB,IAAjB;MAEA,KAAK,gBAAL,CAAsB,qBAAtB,EAA6C,GAAG,CAAC,YAAJ,EAA7C,EAAiE,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,KAAtF;IACA;EACD;;EAED,WAAW,CAAC,GAAD,EAAK;IACf,IAAI,MAAM,GAAG,GAAG,CAAC,OAAJ,CAAY,QAAzB;;IAEA,IAAG,MAAM,CAAC,QAAP,KAAoB,KAAvB,EAA6B;MAC5B,MAAM,CAAC,IAAP,GAAc,KAAd;MAEA,GAAG,CAAC,YAAJ;MAEA,KAAK,WAAL,CAAiB,IAAjB;MAEA,KAAK,gBAAL,CAAsB,sBAAtB,EAA8C,GAAG,CAAC,YAAJ,EAA9C,EAAkE,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,KAAvF;IACA;EACD;;EAED,SAAS,CAAC,GAAD,EAAK;IACb,IAAI,MAAM,GAAG,GAAG,CAAC,OAAJ,CAAY,QAAzB;;IAEA,IAAG,MAAM,CAAC,QAAP,KAAoB,KAAvB,EAA6B;MAC5B,IAAG,MAAM,CAAC,IAAV,EAAe;QACd,KAAK,WAAL,CAAiB,GAAjB;MACA,CAFD,MAEK;QACJ,KAAK,SAAL,CAAe,GAAf;MACA;IACD;EACD;;EAED,aAAa,CAAC,GAAD,EAAK;IACjB,OAAO,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,IAA5B;EACA;;EAED,aAAa,CAAC,GAAD,EAAK;IACjB,OAAO,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,MAArB,GAA8B,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,MAArB,CAA4B,YAA5B,EAA9B,GAA2E,KAAlF;EACA;;EAED,iBAAiB,CAAC,GAAD,EAAK;IACrB,OAAO,GAAG,CAAC,OAAJ,CAAY,QAAZ,IAAwB,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,MAA7C,GAAsD,KAAK,iBAAL,CAAuB,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,MAA5C,CAAtD,GAA4G,GAAnH;EACA;;EAED,uBAAuB,CAAC,GAAD,EAAK;IAC3B,IAAI,MAAM,GAAG,GAAG,CAAC,OAAJ,CAAY,QAAzB;IAAA,IACA,MAAM,GAAG,EADT;IAAA,IACa,QADb;;IAGA,IAAG,MAAM,CAAC,QAAV,EAAmB;MAElB,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,MAAM,CAAC,QAArB,CAAJ,EAAmC;QAClC,MAAM,CAAC,QAAP,GAAkB,KAAK,gBAAL,CAAsB,GAAtB,CAAlB;MACA;;MAED,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,QAArB,KAAkC,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAxD,EAAuE;QACtE,QAAQ,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,CAA0B,MAA1B,CAAiC,MAAM,CAAC,QAAxC,CAAX;MACA,CAFD,MAEK;QACJ,QAAQ,GAAG,MAAM,CAAC,QAAlB;MACA;;MAED,QAAQ,CAAC,OAAT,CAAkB,QAAD,IAAc;QAC9B,IAAG,QAAQ,YAAY,GAAvB,EAA2B;UAC1B,MAAM,CAAC,IAAP,CAAY,QAAZ;QACA;MACD,CAJD;IAKA;;IAED,OAAO,MAAP;EACA;;EAED,SAAS,CAAC,GAAD,EAAK;IACb,IAAI,MAAM,GAAG,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,MAAlC;IAAA,IACA,UADA;;IAGA,IAAG,MAAH,EAAU;MACT,UAAU,GAAG,KAAK,cAAL,CAAoB,GAApB,EAAyB,MAAzB,CAAb;;MAEA,IAAG,UAAU,KAAK,KAAlB,EAAwB;QACvB,MAAM,CAAC,IAAP,CAAY,KAAK,KAAjB,EAAwB,MAAxB,CAA+B,UAA/B,EAA2C,CAA3C;MACA;;MAED,IAAG,CAAC,MAAM,CAAC,IAAP,CAAY,KAAK,KAAjB,EAAwB,MAA5B,EAAmC;QAClC,OAAO,MAAM,CAAC,IAAP,CAAY,KAAK,KAAjB,CAAP;MACA;;MAED,KAAK,aAAL,CAAmB,MAAnB;MACA,KAAK,SAAL,CAAe,MAAf;IACA;;IAED,KAAK,WAAL,CAAiB,IAAjB;EACA;;EAED,eAAe,CAAC,GAAD,EAAM,IAAN,EAAY,GAAZ,EAAiB,KAAjB,EAAuB;IACrC,IAAI,UAAU,GAAG,KAAjB;;IAEA,IAAG,OAAO,IAAP,KAAgB,QAAnB,EAA4B;MAC3B,IAAI,GAAG,IAAI,CAAC,KAAL,CAAW,IAAX,CAAP;IACA;;IAED,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,GAAG,CAAC,IAAJ,CAAS,KAAK,KAAd,CAAd,CAAJ,EAAwC;MACvC,GAAG,CAAC,IAAJ,CAAS,KAAK,KAAd,IAAuB,EAAvB;MAEA,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,IAArB,GAA4B,KAAK,SAAL,CAAe,GAAG,CAAC,YAAJ,EAAf,EAAmC,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,KAAxD,CAA5B;IACA;;IAED,IAAG,OAAO,KAAP,KAAiB,WAApB,EAAgC;MAC/B,UAAU,GAAG,KAAK,cAAL,CAAoB,KAApB,EAA2B,GAA3B,CAAb;;MAEA,IAAG,UAAU,KAAK,KAAlB,EAAwB;QACvB,GAAG,CAAC,IAAJ,CAAS,KAAK,KAAd,EAAqB,MAArB,CAA6B,GAAG,GAAG,UAAH,GAAgB,UAAU,GAAG,CAA7D,EAAiE,CAAjE,EAAoE,IAApE;MACA;IACD;;IAED,IAAG,UAAU,KAAK,KAAlB,EAAwB;MACvB,IAAG,GAAH,EAAO;QACN,GAAG,CAAC,IAAJ,CAAS,KAAK,KAAd,EAAqB,OAArB,CAA6B,IAA7B;MACA,CAFD,MAEK;QACJ,GAAG,CAAC,IAAJ,CAAS,KAAK,KAAd,EAAqB,IAArB,CAA0B,IAA1B;MACA;IACD;;IAED,KAAK,aAAL,CAAmB,GAAnB;IACA,KAAK,SAAL,CAAe,GAAf;IAEA,KAAK,WAAL,CAAiB,IAAjB;EACA;;EAED,cAAc,CAAC,OAAD,EAAU,MAAV,EAAiB;IAC9B,IAAI,KAAK,GAAG,KAAZ;;IAEA,IAAG,OAAO,OAAP,IAAkB,QAArB,EAA8B;MAE7B,IAAG,OAAO,YAAY,GAAtB,EAA0B;QAC7B;QACI,KAAK,GAAG,OAAO,CAAC,IAAhB;MACA,CAHD,MAGM,IAAG,OAAO,YAAY,YAAtB,EAAmC;QAC5C;QACI,KAAK,GAAG,OAAO,CAAC,QAAR,GAAmB,IAA3B;MACA,CAHK,MAGA,IAAG,OAAO,WAAP,KAAuB,WAAvB,IAAsC,OAAO,YAAY,WAA5D,EAAwE;QAC7E,IAAG,MAAM,CAAC,OAAP,CAAe,QAAlB,EAA2B;UAC1B,KAAK,GAAG,MAAM,CAAC,OAAP,CAAe,QAAf,CAAwB,QAAxB,CAAiC,IAAjC,CAAuC,QAAD,IAAc;YAC3D,OAAO,QAAQ,YAAY,GAApB,GAA0B,QAAQ,CAAC,OAAT,KAAqB,OAA/C,GAAyD,KAAhE;UACA,CAFO,CAAR;;UAIA,IAAG,KAAH,EAAS;YACR,KAAK,GAAG,KAAK,CAAC,IAAd;UACA;QACD;MACD,CAVK,MAUA,IAAG,OAAO,KAAK,IAAf,EAAoB;QACzB,KAAK,GAAG,KAAR;MACA;IAED,CAtBD,MAsBM,IAAG,OAAO,OAAP,IAAkB,WAArB,EAAiC;MACtC,KAAK,GAAG,KAAR;IACA,CAFK,MAED;MACP;MACG,KAAK,GAAG,MAAM,CAAC,IAAP,CAAY,KAAK,KAAjB,EAAwB,IAAxB,CAA8B,GAAD,IAAS;QAC7C,OAAO,GAAG,CAAC,IAAJ,CAAS,KAAK,KAAL,CAAW,OAAX,CAAmB,KAA5B,KAAsC,OAA7C;MACA,CAFO,CAAR;IAGA;;IAED,IAAG,KAAH,EAAS;MAER,IAAG,KAAK,CAAC,OAAN,CAAc,MAAM,CAAC,IAAP,CAAY,KAAK,KAAjB,CAAd,CAAH,EAA0C;QACzC,KAAK,GAAG,MAAM,CAAC,IAAP,CAAY,KAAK,KAAjB,EAAwB,OAAxB,CAAgC,KAAhC,CAAR;MACA;;MAED,IAAG,KAAK,IAAI,CAAC,CAAb,EAAe;QACd,KAAK,GAAG,KAAR;MACA;IACD,CA3C6B,CA6ChC;;;IAEE,OAAO,KAAP;EACA;;EAED,eAAe,CAAC,GAAD,EAAM,SAAN,EAAiB,OAAjB,EAAyB;IACvC,IAAI,MAAM,GAAG,GAAG,CAAC,OAAJ,CAAY,QAAzB;IAAA,IACA,MAAM,GAAG,EADT;;IAGA,IAAG,MAAM,CAAC,QAAV,EAAmB;MAElB,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,MAAM,CAAC,QAArB,CAAJ,EAAmC;QAClC,MAAM,CAAC,QAAP,GAAkB,KAAK,gBAAL,CAAsB,GAAtB,CAAlB;MACA;;MAED,MAAM,CAAC,QAAP,CAAgB,OAAhB,CAAyB,QAAD,IAAc;QACrC,IAAG,QAAQ,YAAY,GAAvB,EAA2B;UAC1B,MAAM,CAAC,IAAP,CAAY,SAAS,GAAG,QAAQ,CAAC,YAAT,EAAH,GAA6B,QAAlD;;UAEA,IAAG,OAAH,EAAW;YACV,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,KAAK,eAAL,CAAqB,QAArB,EAA+B,SAA/B,EAA0C,OAA1C,CAAd,CAAT;UACA;QACD;MACD,CARD;IASA;;IAED,OAAO,MAAP;EACA;;EAED,aAAa,GAAE;IACd,OAAO,KAAK,KAAZ;EACA;;EAED,YAAY,CAAC,IAAD,EAAM;IACjB,OAAO,CAAC,KAAK,KAAL,GAAa,OAAO,IAAI,CAAC,KAAK,KAAN,CAAX,KAA4B,WAAzC,GAAuD,KAAxD,MAAmE,KAAK,YAAL,GAAoB,OAAO,IAAI,CAAC,KAAK,YAAN,CAAX,KAAmC,WAAvD,GAAqE,KAAxI,CAAP;EACA;;AA1lB2B;;;AA6lB7B,QAAQ,CAAC,UAAT,GAAsB,UAAtB;;ACnmBe,SAAA,GAAA,CAAS,IAAT,EAAe,OAAO,GAAG,EAAzB,EAA6B,eAA7B,EAA6C;EAC3D,IAAI,SAAS,GAAG,OAAO,CAAC,SAAR,GAAoB,OAAO,CAAC,SAA5B,GAAwC,GAAxD;EAAA,IACA,YAAY,GAAG,EADf;EAAA,IAEA,OAAO,GAAG,EAFV;EAIA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;IACrB,IAAI,IAAI,GAAG,EAAX;;IAEA,QAAO,GAAG,CAAC,IAAX;MACC,KAAK,OAAL;QACC,OAAO,CAAC,IAAR,CAAa,6DAAb;QACA;;MAED,KAAK,MAAL;QACC,OAAO,CAAC,IAAR,CAAa,sEAAb;QACA;;MAED,KAAK,QAAL;QACC,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAoB,CAAC,GAAD,EAAM,CAAN,KAAY;UAC/B,IAAG,GAAG,IAAI,GAAG,CAAC,KAAJ,KAAc,CAAxB,EAA0B;YACzB,OAAO,CAAC,CAAD,CAAP,GAAa,OAAO,GAAG,CAAC,KAAX,IAAoB,WAApB,IAAoC,GAAG,CAAC,KAAJ,KAAc,IAAlD,GAAyD,EAAzD,GAA+D,MAAM,MAAM,CAAC,GAAG,CAAC,KAAL,CAAN,CAAkB,KAAlB,CAAwB,GAAxB,EAA6B,IAA7B,CAAkC,IAAlC,CAAN,GAAgD,GAA5H;UACA;QACD,CAJD;QAKA;;MAED,KAAK,KAAL;QACC,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAqB,GAAD,IAAS;UAE5B,IAAG,GAAH,EAAO;YAEN,QAAO,OAAO,GAAG,CAAC,KAAlB;cACC,KAAK,QAAL;gBACC,GAAG,CAAC,KAAJ,GAAY,GAAG,CAAC,KAAJ,KAAc,IAAd,GAAqB,IAAI,CAAC,SAAL,CAAe,GAAG,CAAC,KAAnB,CAArB,GAAiD,EAA7D;gBACA;;cAED,KAAK,WAAL;gBACC,GAAG,CAAC,KAAJ,GAAY,EAAZ;gBACA;YAPF;;YAUA,IAAI,CAAC,IAAL,CAAU,MAAM,MAAM,CAAC,GAAG,CAAC,KAAL,CAAN,CAAkB,KAAlB,CAAwB,GAAxB,EAA6B,IAA7B,CAAkC,IAAlC,CAAN,GAAgD,GAA1D;UACA;QACD,CAhBD;QAkBA,YAAY,CAAC,IAAb,CAAkB,IAAI,CAAC,IAAL,CAAU,SAAV,CAAlB;QACA;IArCF;EAuCA,CA1CD;;EA4CA,IAAG,OAAO,CAAC,MAAX,EAAkB;IACjB,YAAY,CAAC,OAAb,CAAqB,OAAO,CAAC,IAAR,CAAa,SAAb,CAArB;EACA;;EAED,YAAY,GAAG,YAAY,CAAC,IAAb,CAAkB,IAAlB,CAAf;;EAEA,IAAG,OAAO,CAAC,GAAX,EAAe;IACd,YAAY,GAAG,WAAW,YAA1B;EACA;;EAED,eAAe,CAAC,YAAD,EAAe,UAAf,CAAf;AACD;;AC5De,SAAA,IAAA,CAAS,IAAT,EAAe,OAAf,EAAwB,eAAxB,EAAwC;EACtD,IAAI,YAAY,GAAG,EAAnB;EAEA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;IACrB,IAAI,IAAI,GAAG,EAAX;;IAEA,QAAO,GAAG,CAAC,IAAX;MACC,KAAK,QAAL;QACC;;MAED,KAAK,OAAL;QACC,OAAO,CAAC,IAAR,CAAa,8DAAb;QACA;;MAED,KAAK,MAAL;QACC,OAAO,CAAC,IAAR,CAAa,uEAAb;QACA;;MAED,KAAK,KAAL;QACC,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAqB,GAAD,IAAS;UAC5B,IAAG,GAAH,EAAO;YACN,IAAI,CAAC,GAAG,CAAC,SAAJ,CAAc,gBAAd,MAAoC,GAAG,CAAC,SAAJ,CAAc,QAAd,EAArC,CAAJ,GAAqE,GAAG,CAAC,KAAzE;UACA;QACD,CAJD;QAMA,YAAY,CAAC,IAAb,CAAkB,IAAlB;QACA;IApBF;EAsBA,CAzBD;EA2BA,YAAY,GAAG,IAAI,CAAC,SAAL,CAAe,YAAf,EAA6B,IAA7B,EAAmC,IAAnC,CAAf;EAEA,eAAe,CAAC,YAAD,EAAe,kBAAf,CAAf;AACD;;ACjCe,SAAA,GAAA,CAAS,IAAT,EAAe,OAAO,GAAG,EAAzB,EAA6B,eAA7B,EAA6C;EAC3D,IAAI,MAAM,GAAG,EAAb;EAAA,IACA,IAAI,GAAG,EADP;EAAA,IAEA,eAAe,GAAG,EAFlB;EAAA,IAGA,cAAc,GAAG,OAAO,CAAC,cAAR,IAA0B;IAC1C,SAAS,EAAE,MAD+B;IAE1C,QAAQ,EAAE,EAFgC;IAG1C,WAAW,EAAE,CAH6B;IAI1C,SAAS,EAAE;EAJ+B,CAH3C;EAAA,IASA,aAAa,GAAG,OAAO,CAAC,aAAR,IAAyB;IACxC,SAAS,EAAE,MAD6B;IAExC,QAAQ,EAAE,EAF8B;IAGxC,WAAW,EAAE,CAH2B;IAIxC,SAAS,EAAE;EAJ6B,CATzC;EAAA,IAeA,WAAW,GAAG,OAAO,CAAC,KAAR,IAAiB,EAf/B;EAAA,IAgBA,KAAK,GAAG,OAAO,CAAC,KAAR,GAAgB,OAAO,CAAC,KAAxB,GAAgC,EAhBxC;;EAkBA,IAAG,CAAC,WAAW,CAAC,WAAhB,EAA4B;IAC3B,WAAW,CAAC,WAAZ,GAA0B,OAAO,CAAC,WAAR,IAAuB,WAAjD;EACA;;EAED,IAAG,CAAC,WAAW,CAAC,IAAhB,EAAqB;IACpB,WAAW,CAAC,IAAZ,GAAmB,IAAnB;EACA,CAzB0D,CA2B5D;;;EACC,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;IACrB,QAAO,GAAG,CAAC,IAAX;MACC,KAAK,QAAL;QACC,MAAM,CAAC,IAAP,CAAY,QAAQ,CAAC,GAAD,CAApB;QACA;;MAED,KAAK,OAAL;QACC,IAAI,CAAC,IAAL,CAAU,QAAQ,CAAC,GAAD,EAAM,cAAN,CAAlB;QACA;;MAED,KAAK,MAAL;QACC,IAAI,CAAC,IAAL,CAAU,QAAQ,CAAC,GAAD,EAAM,aAAN,CAAlB;QACA;;MAED,KAAK,KAAL;QACC,IAAI,CAAC,IAAL,CAAU,QAAQ,CAAC,GAAD,CAAlB;QACA;IAfF;EAiBA,CAlBD;;EAoBA,SAAS,QAAT,CAAkB,GAAlB,EAAuB,MAAvB,EAA8B;IAC7B,IAAI,OAAO,GAAG,EAAd;IAEA,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAqB,GAAD,IAAQ;MAC3B,IAAI,IAAJ;;MAEA,IAAG,GAAH,EAAO;QACN,QAAO,OAAO,GAAG,CAAC,KAAlB;UACC,KAAK,QAAL;YACC,GAAG,CAAC,KAAJ,GAAY,GAAG,CAAC,KAAJ,KAAc,IAAd,GAAqB,IAAI,CAAC,SAAL,CAAe,GAAG,CAAC,KAAnB,CAArB,GAAiD,EAA7D;YACA;;UAED,KAAK,WAAL;YACC,GAAG,CAAC,KAAJ,GAAY,EAAZ;YACA;QAPF;;QAUA,IAAI,GAAG;UACN,OAAO,EAAC,GAAG,CAAC,KADN;UAEN,OAAO,EAAC,GAAG,CAAC,KAFN;UAGN,OAAO,EAAC,GAAG,CAAC;QAHN,CAAP;;QAMA,IAAG,MAAH,EAAU;UACT,IAAI,CAAC,MAAL,GAAc,MAAd;QACA;;QAED,OAAO,CAAC,IAAR,CAAa,IAAb;MACA;IACD,CA1BD;IA4BA,OAAO,OAAP;EACA,CAhF0D,CAmF5D;;;EACC,IAAI,GAAG,GAAG,IAAI,KAAK,CAAC,KAAV,CAAgB,WAAhB,CAAV,CApF2D,CAoFpB;;EAEvC,IAAG,OAAO,CAAC,SAAX,EAAqB;IACpB,IAAG,OAAO,OAAO,CAAC,SAAf,KAA6B,UAAhC,EAA2C;MAC1C,eAAe,GAAG,OAAO,CAAC,SAAR,CAAkB,GAAlB,KAA0B,EAA5C;IACA,CAFD,MAEK;MACJ,eAAe,GAAG,OAAO,CAAC,SAA1B;IACA;EACD;;EAED,IAAG,KAAH,EAAS;IACR,eAAe,CAAC,WAAhB,GAA8B,UAAS,IAAT,EAAe;MAC5C,GAAG,CAAC,IAAJ,CAAS,KAAT,EAAgB,EAAhB,EAAoB,EAApB;IACA,CAFD;EAGA;;EAED,eAAe,CAAC,IAAhB,GAAuB,MAAvB;EACA,eAAe,CAAC,IAAhB,GAAuB,IAAvB;EAEA,GAAG,CAAC,SAAJ,CAAc,eAAd;;EAEA,IAAG,OAAO,CAAC,kBAAX,EAA8B;IAC7B,OAAO,CAAC,kBAAR,CAA2B,GAA3B;EACA;;EAED,eAAe,CAAC,GAAG,CAAC,MAAJ,CAAW,aAAX,CAAD,EAA4B,iBAA5B,CAAf;AACD;;AC5Ge,SAAA,IAAA,CAAS,IAAT,EAAe,OAAf,EAAwB,eAAxB,EAAwC;EACtD,IAAI,IAAI,GAAG,IAAX;EAAA,IACA,SAAS,GAAG,OAAO,CAAC,SAAR,IAAqB,QADjC;EAAA,IAEA,QAAQ,GAAG,IAAI,CAAC,KAAL,CAAW,QAAX,EAFX;EAAA,IAGA,aAAa,GAAG,IAAI,WAAJ,CAAgB,IAAhB,CAHhB;EAAA,IAIA,MAJA;EAMA,QAAQ,CAAC,UAAT,GAAsB,EAAtB;EACA,QAAQ,CAAC,MAAT,GAAkB,EAAlB;;EAEA,SAAS,aAAT,GAAwB;IACvB,IAAI,IAAI,GAAG,EAAX;IAAA,IACA,MAAM,GAAG,EADT;IAAA,IAEA,SAAS,GAAG,EAFZ;IAAA,IAGA,KAAK,GAAG;MAAC,CAAC,EAAE;QAAC,CAAC,EAAC,CAAH;QAAM,CAAC,EAAC;MAAR,CAAJ;MAAgB,CAAC,EAAE;QAAC,CAAC,EAAE,IAAI,CAAC,CAAD,CAAJ,GAAU,IAAI,CAAC,CAAD,CAAJ,CAAQ,OAAR,CAAgB,MAAhB,CAAuB,CAAC,CAAD,EAAI,CAAJ,KAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,KAAP,GAAe,CAAC,CAAC,KAAjB,GAAyB,CAA7B,CAAlC,EAAmE,CAAnE,CAAV,GAAkF,CAAtF;QAA0F,CAAC,EAAC,IAAI,CAAC;MAAjG;IAAnB,CAHR,CADuB,CAMzB;;IACE,IAAI,CAAC,OAAL,CAAa,CAAC,GAAD,EAAM,CAAN,KAAY;MACxB,IAAI,OAAO,GAAG,EAAd;MAEA,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAoB,UAAS,GAAT,EAAc,CAAd,EAAgB;QAEnC,IAAG,GAAH,EAAO;UACN,OAAO,CAAC,IAAR,CAAa,EAAE,GAAG,CAAC,KAAJ,YAAqB,IAAvB,KAAgC,OAAO,GAAG,CAAC,KAAX,KAAqB,QAArD,GAAgE,IAAI,CAAC,SAAL,CAAe,GAAG,CAAC,KAAnB,CAAhE,GAA4F,GAAG,CAAC,KAA7G;;UAEA,IAAG,GAAG,CAAC,KAAJ,GAAY,CAAZ,IAAiB,GAAG,CAAC,MAAJ,GAAa,CAAC,CAAlC,EAAoC;YACnC,IAAG,GAAG,CAAC,MAAJ,GAAa,CAAb,IAAkB,GAAG,CAAC,KAAJ,GAAY,CAAjC,EAAmC;cAClC,MAAM,CAAC,IAAP,CAAY;gBAAC,CAAC,EAAC;kBAAC,CAAC,EAAC,CAAH;kBAAK,CAAC,EAAC;gBAAP,CAAH;gBAAa,CAAC,EAAC;kBAAC,CAAC,EAAC,CAAC,GAAG,GAAG,CAAC,MAAR,GAAiB,CAApB;kBAAsB,CAAC,EAAC,CAAC,GAAG,GAAG,CAAC,KAAR,GAAgB;gBAAxC;cAAf,CAAZ;YACA;UACD;QACD,CARD,MAQK;UACJ,OAAO,CAAC,IAAR,CAAa,EAAb;QACA;MACD,CAbD;MAeA,IAAI,CAAC,IAAL,CAAU,OAAV;IACA,CAnBD,EAPuB,CA4BzB;;IACE,IAAI,CAAC,KAAL,CAAW,aAAX,CAAyB,SAAzB,EAAoC,IAApC;IAEA,SAAS,CAAC,MAAD,CAAT,GAAoB,IAAI,CAAC,KAAL,CAAW,YAAX,CAAwB,KAAxB,CAApB;;IAEA,IAAG,MAAM,CAAC,MAAV,EAAiB;MAChB,SAAS,CAAC,SAAD,CAAT,GAAuB,MAAvB;IACA;;IAED,OAAO,SAAP;EACA;;EAED,IAAG,OAAO,CAAC,SAAX,EAAqB;IACpB,eAAe,CAAC,aAAa,EAAd,CAAf;IACA;EACA;;EAED,IAAG,OAAO,CAAC,MAAX,EAAkB;IACjB,KAAI,IAAI,KAAR,IAAiB,OAAO,CAAC,MAAzB,EAAgC;MAE/B,IAAG,OAAO,CAAC,MAAR,CAAe,KAAf,MAA0B,IAA7B,EAAkC;QACjC,QAAQ,CAAC,UAAT,CAAoB,IAApB,CAAyB,KAAzB;QACA,QAAQ,CAAC,MAAT,CAAgB,KAAhB,IAAyB,aAAa,EAAtC;MACA,CAHD,MAGK;QAEJ,QAAQ,CAAC,UAAT,CAAoB,IAApB,CAAyB,KAAzB;QAEA,aAAa,CAAC,SAAd,CAAwB,OAAO,CAAC,MAAR,CAAe,KAAf,CAAxB,EAA+C,UAA/C,EAA2D,WAA3D,EAAuE;UACtE,IAAI,EAAC,MADiE;UAEtE,OAAO,EAAC;YAAC,SAAS,EAAC;UAAX,CAF8D;UAGtE,MAAM,EAAC,IAAI,CAAC,MAH0D;UAItE,SAAS,EAAC,UAAS,IAAT,EAAc;YACvB,QAAQ,CAAC,MAAT,CAAgB,KAAhB,IAAyB,IAAzB;UACA;QANqE,CAAvE;MAQA;IACD;EACD,CApBD,MAoBK;IACJ,QAAQ,CAAC,UAAT,CAAoB,IAApB,CAAyB,SAAzB;IACA,QAAQ,CAAC,MAAT,CAAgB,SAAhB,IAA6B,aAAa,EAA1C;EACA;;EAED,IAAG,OAAO,CAAC,kBAAX,EAA8B;IAC7B,QAAQ,GAAG,OAAO,CAAC,kBAAR,CAA2B,QAA3B,CAAX;EACA,CAlFqD,CAoFvD;;;EACC,SAAS,IAAT,CAAc,CAAd,EAAiB;IAChB,IAAI,GAAG,GAAG,IAAI,WAAJ,CAAgB,CAAC,CAAC,MAAlB,CAAV;IACA,IAAI,IAAI,GAAG,IAAI,UAAJ,CAAe,GAAf,CAAX;;IACA,KAAK,IAAI,CAAC,GAAC,CAAX,EAAc,CAAC,IAAE,CAAC,CAAC,MAAnB,EAA2B,EAAE,CAA7B,EAAgC,IAAI,CAAC,CAAD,CAAJ,GAAU,CAAC,CAAC,UAAF,CAAa,CAAb,IAAkB,IAA5B;;IAChC,OAAO,GAAP;EACA;;EAED,MAAM,GAAG,IAAI,CAAC,KAAL,CAAW,QAAX,EAAqB;IAAC,QAAQ,EAAC,MAAV;IAAkB,OAAO,EAAC,IAA1B;IAAgC,IAAI,EAAE;EAAtC,CAArB,CAAT;EAEA,eAAe,CAAC,IAAI,CAAC,MAAD,CAAL,EAAe,0BAAf,CAAf;AACD;;ACjGe,SAAA,IAAA,CAAS,IAAT,EAAe,OAAf,EAAwB,eAAxB,EAAwC;EACtD,IAAG,KAAK,SAAL,CAAe,QAAf,EAAyB,IAAzB,CAAH,EAAkC;IACjC,eAAe,CAAC,KAAK,OAAL,CAAa,MAAb,CAAoB,iBAApB,CAAsC,IAAtC,CAAD,EAA8C,WAA9C,CAAf;EACA;AACF;;ACJe,SAAA,SAAA,CAAU,IAAV,EAAgB,OAAhB,EAAyB,eAAzB,EAA0C;EACxD,MAAM,YAAY,GAAG,EAArB;EAEA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;IACrB,MAAM,IAAI,GAAG,EAAb;;IAEA,QAAQ,GAAG,CAAC,IAAZ;MACC,KAAK,QAAL;QACC;;MAED,KAAK,OAAL;QACC,OAAO,CAAC,IAAR,CAAa,8DAAb;QACA;;MAED,KAAK,MAAL;QACC,OAAO,CAAC,IAAR,CAAa,uEAAb;QACA;;MAED,KAAK,KAAL;QACC,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAqB,GAAD,IAAS;UAC5B,IAAI,GAAJ,EAAS;YACR,IAAI,CAAC,GAAG,CAAC,SAAJ,CAAc,gBAAd,MAAoC,GAAG,CAAC,SAAJ,CAAc,QAAd,EAArC,CAAJ,GAAqE,GAAG,CAAC,KAAzE;UACA;QACD,CAJD;QAMA,YAAY,CAAC,IAAb,CAAkB,IAAI,CAAC,SAAL,CAAe,IAAf,CAAlB;QACA;IApBF;EAsBA,CAzBD;EA2BA,eAAe,CAAC,YAAY,CAAC,IAAb,CAAkB,IAAlB,CAAD,EAA0B,sBAA1B,CAAf;AACD;;ACxBA,IAAA,kBAAA,GAAe;EACd,GAAG,EAAC,GADU;EAEd,IAAI,EAAC,IAFS;EAGd,SAAS,EAAC,SAHI;EAId,GAAG,EAAC,GAJU;EAKd,IAAI,EAAC,IALS;EAMd,IAAI,EAAC;AANS,CAAf;;ACHA,MAAM,QAAN,SAAuB,MAAvB,CAA6B;EAE5B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,mBAAL,CAAyB,iBAAzB,EAA4C,UAAS,IAAT,EAAe,QAAf,EAAwB;MACnE,OAAO,IAAI,IAAJ,CAAS,CAAC,IAAD,CAAT,EAAgB;QAAC,IAAI,EAAC;MAAN,CAAhB,CAAP;IACA,CAFD,EAHiB,CAKd;;IACH,KAAK,mBAAL,CAAyB,eAAzB,EAA0C,SAA1C,EANiB,CAMoC;;IACrD,KAAK,mBAAL,CAAyB,gBAAzB,EAA2C,EAA3C,EAPiB,CAO8B;;IAC/C,KAAK,mBAAL,CAAyB,kBAAzB,EAA6C,QAA7C,EARiB,CAQsC;;IAEvD,KAAK,oBAAL,CAA0B,UAA1B;IACA,KAAK,oBAAL,CAA0B,eAA1B;EACA;;EAED,UAAU,GAAE;IACX,KAAK,sBAAL;IAEA,KAAK,qBAAL,CAA2B,UAA3B,EAAuC,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAAvC;IACA,KAAK,qBAAL,CAA2B,eAA3B,EAA4C,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAA5C;EACA;;EAED,sBAAsB,GAAE;IACvB,KAAK,gBAAL,CAAsB,eAAtB,EAAuC,iBAAvC;EACA,CAzB2B,CA2B7B;EACA;EACA;;;EAEC,aAAa,CAAC,IAAD,EAAO,QAAP,EAAiB,OAAjB,EAA0B,MAA1B,EAAiC;IAC7C,KAAK,QAAL,CAAc,IAAd,EAAoB,QAApB,EAA8B,OAA9B,EAAuC,MAAvC,EAA+C,IAA/C;EACA,CAjC2B,CAmC7B;EACA;EACA;EAEA;;;EACC,QAAQ,CAAC,IAAD,EAAO,QAAP,EAAiB,OAAjB,EAA0B,KAA1B,EAAiC,iBAAjC,EAAmD;IAC1D,IAAI,YAAY,GAAG,KAAnB;;IAEA,SAAS,SAAT,CAAmB,IAAnB,EAAyB,IAAzB,EAA8B;MAC7B,IAAG,iBAAH,EAAqB;QACpB,IAAG,iBAAiB,KAAK,IAAzB,EAA8B;UAC7B,KAAK,eAAL,CAAqB,IAArB,EAA2B,IAA3B,EAAiC,IAAjC,EAAuC,QAAvC,EAAiD,IAAjD;QACA,CAFD,MAEK;UACJ,iBAAiB,CAAC,IAAD,CAAjB;QACA;MAED,CAPD,MAOK;QACJ,KAAK,eAAL,CAAqB,IAArB,EAA2B,IAA3B,EAAiC,IAAjC,EAAuC,QAAvC;MACA;IACD;;IAED,IAAG,OAAO,IAAP,IAAe,UAAlB,EAA6B;MAC5B,YAAY,GAAG,IAAf;IACA,CAFD,MAEK;MACJ,IAAG,QAAQ,CAAC,WAAT,CAAqB,IAArB,CAAH,EAA8B;QAC7B,YAAY,GAAG,QAAQ,CAAC,WAAT,CAAqB,IAArB,CAAf;MACA,CAFD,MAEK;QACJ,OAAO,CAAC,IAAR,CAAa,gDAAb,EAA+D,IAA/D;MACA;IACD;;IAED,IAAG,YAAH,EAAgB;MACf,IAAI,IAAI,GAAG,KAAK,kBAAL,CAAwB,KAAxB,CAAX;MAEA,YAAY,CAAC,IAAb,CAAkB,KAAK,KAAvB,EAA8B,IAA9B,EAAqC,OAAO,IAAI,EAAhD,EAAoD,SAAS,CAAC,IAAV,CAAe,IAAf,CAApD;IACA;EACD;;EAED,kBAAkB,CAAC,KAAD,EAAO;IACxB,IAAI,IAAI,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,CAA0B,kBAA1B,CAA6C,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAhE,EAAgF,KAAhF,EAAuF,KAAK,IAAI,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnH,EAAqI,UAArI,CAAX,CADwB,CAG1B;;IACE,IAAI,WAAW,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAArC;;IAEA,IAAG,WAAW,IAAI,CAAC,KAAK,CAAC,OAAN,CAAc,WAAd,CAAnB,EAA8C;MAC7C,WAAW,GAAG,CAAC,WAAD,CAAd;IACA;;IAED,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;MACrB,IAAI,KAAJ;;MAEA,IAAG,GAAG,CAAC,IAAJ,KAAa,OAAhB,EAAwB;QACvB,KAAK,GAAG,GAAG,CAAC,OAAJ,CAAY,CAAZ,CAAR;;QAEA,IAAG,WAAW,IAAI,WAAW,CAAC,GAAG,CAAC,MAAL,CAA7B,EAA0C;UACzC,KAAK,CAAC,KAAN,GAAc,WAAW,CAAC,GAAG,CAAC,MAAL,CAAX,CAAwB,KAAK,CAAC,KAA9B,EAAqC,GAAG,CAAC,SAAJ,CAAc,MAAd,CAAqB,WAArB,EAArC,EAAyE,GAAG,CAAC,SAAJ,CAAc,MAAd,CAAqB,OAArB,EAAzE,EAAyG,GAAG,CAAC,SAA7G,CAAd;QACA;MACD;IACD,CAVD;IAYA,OAAO,IAAP;EACA;;EAED,eAAe,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,QAAnB,EAA6B,MAA7B,EAAoC;IAClD,IAAI,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAd;IAAA,IACA,IAAI,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,eAAnB,CAAmC,IAAnC,EAAyC,IAAzC,CADP;;IAGA,IAAG,IAAH,EAAQ;MACP,IAAG,MAAH,EAAU;QACT,MAAM,CAAC,IAAP,CAAY,MAAM,CAAC,GAAP,CAAW,eAAX,CAA2B,IAA3B,CAAZ;MACA,CAFD,MAEK;QACJ,QAAQ,GAAG,QAAQ,IAAI,gBAAgB,OAAO,IAAP,KAAgB,UAAhB,GAA6B,KAA7B,GAAqC,IAArD,CAAvB;;QAEA,IAAG,SAAS,CAAC,gBAAb,EAA8B;UAC7B,SAAS,CAAC,gBAAV,CAA2B,IAA3B,EAAiC,QAAjC;QACA,CAFD,MAEK;UACJ,OAAO,CAAC,YAAR,CAAqB,MAArB,EAA6B,MAAM,CAAC,GAAP,CAAW,eAAX,CAA2B,IAA3B,CAA7B,EADI,CAGT;;UACK,OAAO,CAAC,YAAR,CAAqB,UAArB,EAAiC,QAAjC,EAJI,CAMT;;UACK,OAAO,CAAC,KAAR,CAAc,OAAd,GAAwB,MAAxB;UACA,QAAQ,CAAC,IAAT,CAAc,WAAd,CAA0B,OAA1B;UACA,OAAO,CAAC,KAAR,GATI,CAWT;;UACK,QAAQ,CAAC,IAAT,CAAc,WAAd,CAA0B,OAA1B;QACA;MACD;;MAED,KAAK,gBAAL,CAAsB,kBAAtB;IACA;EACD;;EAED,aAAa,CAAC,KAAD,EAAQ,MAAR,EAAgB,IAAhB,EAAqB;IACjC,QAAO,MAAP;MACC,KAAK,WAAL;QACC,KAAK,QAAL,CAAc,IAAI,CAAC,IAAnB,EAAyB,EAAzB,EAA6B,IAAI,CAAC,OAAlC,EAA2C,IAAI,CAAC,MAAhD,EAAwD,IAAI,CAAC,SAA7D;QACA;IAHF;EAKA;;AAxI2B;;;AA2I7B,QAAQ,CAAC,UAAT,GAAsB,UAAtB,EAEA;;AACA,QAAQ,CAAC,WAAT,GAAuB,kBAAvB;;AClJe,SAAS,SAAT,CAAmB,EAAnB,EAAuB,OAAvB,EAA+B;EAC7C,IAAI,IAAI,GAAG,OAAO,CAAC,IAAnB;EAAA,IACA,UAAU,GAAG,OAAO,OAAO,CAAC,cAAf,KAAkC,WAAlC,GAAgD,OAAO,CAAC,cAAxD,GAAyE,GADtF;EAAA,IAEA,UAAU,GAAG,OAAO,OAAO,CAAC,cAAf,KAAkC,WAAlC,GAAgD,OAAO,CAAC,cAAxD,GAAyE,GAFtF;EAAA,IAGA,YAAY,GAAG,OAAO,OAAO,CAAC,gBAAf,KAAoC,WAApC,GAAkD,OAAO,CAAC,gBAA1D,GAA6E,GAH5F;;EAKA,SAAS,WAAT,CAAqB,KAArB,EAA2B;IAC1B,IAAI,MAAM,GAAG,IAAI,CAAC,KAAD,CAAjB;;IACA,IAAG,OAAO,MAAP,KAAkB,WAAlB,IAAiC,MAAM,KAAK,YAA5C,IAA4D,MAAM,KAAK,UAAvE,IAAqF,MAAM,KAAK,UAAnG,EAA8G;MAC7G,EAAE,CAAC,KAAH,GAAW,EAAE,CAAC,KAAH,GAAW,EAAX,GAAgB,MAA3B;MACA,WAAW,CAAC,KAAK,GAAC,CAAP,CAAX;IACA;EACD;;EAED,EAAE,CAAC,gBAAH,CAAoB,SAApB,EAAgC,CAAD,IAAO;IACrC,IAAI,KAAK,GAAG,EAAE,CAAC,KAAH,CAAS,MAArB;IAAA,IACA,IAAI,GAAG,CAAC,CAAC,GADT;;IAGA,IAAG,CAAC,CAAC,OAAF,GAAY,EAAf,EAAkB;MACjB,IAAG,KAAK,IAAI,IAAI,CAAC,MAAjB,EAAwB;QACvB,CAAC,CAAC,cAAF;QACA,CAAC,CAAC,eAAF;QACA,OAAO,KAAP;MACA,CAJD,MAIK;QACJ,QAAO,IAAI,CAAC,KAAD,CAAX;UACC,KAAK,UAAL;YACC,IAAG,IAAI,CAAC,WAAL,MAAsB,IAAI,CAAC,WAAL,EAAzB,EAA4C;cAC3C,CAAC,CAAC,cAAF;cACA,CAAC,CAAC,eAAF;cACA,OAAO,KAAP;YACA;;YACD;;UAED,KAAK,UAAL;YACC,IAAG,KAAK,CAAC,IAAD,CAAR,EAAe;cACd,CAAC,CAAC,cAAF;cACA,CAAC,CAAC,eAAF;cACA,OAAO,KAAP;YACA;;YACD;;UAED,KAAK,YAAL;YACC;;UAED;YACC,IAAG,IAAI,KAAK,IAAI,CAAC,KAAD,CAAhB,EAAwB;cACvB,CAAC,CAAC,cAAF;cACA,CAAC,CAAC,eAAF;cACA,OAAO,KAAP;YACA;;QAzBH;MA2BA;IACD;;IAED;EACA,CAzCD;EA2CA,EAAE,CAAC,gBAAH,CAAoB,OAApB,EAA8B,CAAD,IAAO;IACnC,IAAG,CAAC,CAAC,OAAF,GAAY,EAAf,EAAkB;MACjB,IAAG,OAAO,CAAC,YAAX,EAAwB;QACvB,WAAW,CAAC,EAAE,CAAC,KAAH,CAAS,MAAV,CAAX;MACA;IACD;EACD,CAND;;EASA,IAAG,CAAC,EAAE,CAAC,WAAP,EAAmB;IAClB,EAAE,CAAC,WAAH,GAAiB,IAAjB;EACA;;EAED,IAAG,OAAO,CAAC,YAAX,EAAwB;IACvB,WAAW,CAAC,EAAE,CAAC,KAAH,CAAS,MAAV,CAAX;EACA;AACF,ECvEA;;;AACe,SAAA,KAAA,CAAS,IAAT,EAAe,UAAf,EAA2B,OAA3B,EAAoC,MAApC,EAA4C,YAA5C,EAAyD;EACxE;EACC,IAAI,SAAS,GAAG,IAAI,CAAC,QAAL,EAAhB;EAAA,IACA,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CADR;EAGA,KAAK,CAAC,YAAN,CAAmB,MAAnB,EAA2B,YAAY,CAAC,MAAb,GAAsB,QAAtB,GAAiC,MAA5D;EAEA,KAAK,CAAC,KAAN,CAAY,OAAZ,GAAsB,KAAtB;EACA,KAAK,CAAC,KAAN,CAAY,KAAZ,GAAoB,MAApB;EACA,KAAK,CAAC,KAAN,CAAY,SAAZ,GAAwB,YAAxB;;EAEA,IAAG,YAAY,CAAC,iBAAb,IAAkC,OAAO,YAAY,CAAC,iBAApB,IAAyC,QAA9E,EAAuF;IACtF,KAAK,IAAI,GAAT,IAAgB,YAAY,CAAC,iBAA7B,EAA+C;MAC9C,IAAG,GAAG,CAAC,MAAJ,CAAW,CAAX,KAAiB,GAApB,EAAwB;QACvB,GAAG,GAAG,GAAG,CAAC,KAAJ,CAAU,CAAV,CAAN;QACA,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,KAAK,CAAC,YAAN,CAAmB,GAAnB,IAA0B,YAAY,CAAC,iBAAb,CAA+B,MAAM,GAArC,CAAlD;MACA,CAHD,MAGK;QACJ,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,YAAY,CAAC,iBAAb,CAA+B,GAA/B,CAAxB;MACA;IACD;EACD;;EAED,KAAK,CAAC,KAAN,GAAc,OAAO,SAAP,KAAqB,WAArB,GAAmC,SAAnC,GAA+C,EAA7D;EAEA,UAAU,CAAC,YAAU;IACpB,KAAK,CAAC,KAAN,CAAY;MAAC,aAAa,EAAE;IAAhB,CAAZ;IACA,KAAK,CAAC,KAAN,CAAY,MAAZ,GAAqB,MAArB;;IAEA,IAAG,YAAY,CAAC,cAAhB,EAA+B;MAC9B,KAAK,CAAC,MAAN;IACA;EACD,CAPS,CAAV;;EASA,SAAS,QAAT,CAAkB,CAAlB,EAAoB;IACnB,IAAI,CAAC,SAAS,KAAK,IAAd,IAAsB,OAAO,SAAP,KAAqB,WAA5C,KAA4D,KAAK,CAAC,KAAN,KAAgB,EAA7E,IAAoF,KAAK,CAAC,KAAN,KAAgB,SAAvG,EAAiH;MAChH,IAAG,OAAO,CAAC,KAAK,CAAC,KAAP,CAAV,EAAwB;QACvB,SAAS,GAAG,KAAK,CAAC,KAAlB,CADuB,CACC;MACxB;IACD,CAJD,MAIK;MACJ,MAAM;IACN;EACD,CAzCsE,CA2CxE;;;EACC,KAAK,CAAC,gBAAN,CAAuB,QAAvB,EAAiC,QAAjC;EACA,KAAK,CAAC,gBAAN,CAAuB,MAAvB,EAA+B,QAA/B,EA7CuE,CA+CxE;;EACC,KAAK,CAAC,gBAAN,CAAuB,SAAvB,EAAkC,UAAS,CAAT,EAAW;IAC5C,QAAO,CAAC,CAAC,OAAT;MACF;MACG,KAAK,EAAL;QACC,QAAQ;QACR;;MAED,KAAK,EAAL;QACC,MAAM;QACN;;MAED,KAAK,EAAL;MACA,KAAK,EAAL;QACC,CAAC,CAAC,eAAF;QACA;IAbF;EAeA,CAhBD;;EAkBA,IAAG,YAAY,CAAC,IAAhB,EAAqB;IACpB,SAAS,CAAC,KAAD,EAAQ,YAAR,CAAT;EACA;;EAED,OAAO,KAAP;AACD,ECxEA;;;AACe,SAAA,QAAA,CAAS,IAAT,EAAe,UAAf,EAA2B,OAA3B,EAAoC,MAApC,EAA4C,YAA5C,EAAyD;EACvE,IAAI,SAAS,GAAG,IAAI,CAAC,QAAL,EAAhB;EAAA,IACA,OAAO,GAAG,YAAY,CAAC,kBAAb,IAAmC,QAD7C;EAAA,IAEA,KAAK,GAAG,MAAM,CAAC,SAAS,KAAK,IAAd,IAAsB,OAAO,SAAP,KAAqB,WAA3C,GAA0D,SAA1D,GAAsE,EAAvE,CAFd;EAAA,IAGA,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,UAAvB,CAHR;EAAA,IAIA,YAAY,GAAG,CAJf,CADuE,CAOxE;;EACC,KAAK,CAAC,KAAN,CAAY,OAAZ,GAAsB,OAAtB;EACA,KAAK,CAAC,KAAN,CAAY,OAAZ,GAAsB,KAAtB;EACA,KAAK,CAAC,KAAN,CAAY,MAAZ,GAAqB,MAArB;EACA,KAAK,CAAC,KAAN,CAAY,KAAZ,GAAoB,MAApB;EACA,KAAK,CAAC,KAAN,CAAY,SAAZ,GAAwB,YAAxB;EACA,KAAK,CAAC,KAAN,CAAY,UAAZ,GAAyB,UAAzB;EACA,KAAK,CAAC,KAAN,CAAY,MAAZ,GAAqB,MAArB;;EAEA,IAAG,YAAY,CAAC,iBAAb,IAAkC,OAAO,YAAY,CAAC,iBAApB,IAAyC,QAA9E,EAAuF;IACtF,KAAK,IAAI,GAAT,IAAgB,YAAY,CAAC,iBAA7B,EAA+C;MAC9C,IAAG,GAAG,CAAC,MAAJ,CAAW,CAAX,KAAiB,GAApB,EAAwB;QACvB,GAAG,GAAG,GAAG,CAAC,KAAJ,CAAU,CAAV,CAAN;QACA,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,KAAK,CAAC,YAAN,CAAmB,GAAnB,IAA0B,YAAY,CAAC,iBAAb,CAA+B,MAAM,GAArC,CAAlD;MACA,CAHD,MAGK;QACJ,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,YAAY,CAAC,iBAAb,CAA+B,GAA/B,CAAxB;MACA;IACD;EACD;;EAED,KAAK,CAAC,KAAN,GAAc,KAAd;EAEA,UAAU,CAAC,YAAU;IACpB,KAAK,CAAC,KAAN,CAAY;MAAC,aAAa,EAAE;IAAhB,CAAZ;IACA,KAAK,CAAC,KAAN,CAAY,MAAZ,GAAqB,MAArB;IAEA,KAAK,CAAC,YAAN;IACA,KAAK,CAAC,KAAN,CAAY,MAAZ,GAAqB,KAAK,CAAC,YAAN,GAAqB,IAA1C;IACA,IAAI,CAAC,MAAL,GAAc,eAAd;;IAEA,IAAG,YAAY,CAAC,cAAhB,EAA+B;MAC9B,KAAK,CAAC,MAAN;IACA;EACD,CAXS,CAAV;;EAaA,SAAS,QAAT,CAAkB,CAAlB,EAAoB;IAEnB,IAAI,CAAC,SAAS,KAAK,IAAd,IAAsB,OAAO,SAAP,KAAqB,WAA5C,KAA4D,KAAK,CAAC,KAAN,KAAgB,EAA7E,IAAoF,KAAK,CAAC,KAAN,KAAgB,SAAvG,EAAiH;MAEhH,IAAG,OAAO,CAAC,KAAK,CAAC,KAAP,CAAV,EAAwB;QACvB,SAAS,GAAG,KAAK,CAAC,KAAlB,CADuB,CACC;MACxB;;MAED,UAAU,CAAC,YAAU;QACpB,IAAI,CAAC,MAAL,GAAc,eAAd;MACA,CAFS,EAER,GAFQ,CAAV;IAGA,CATD,MASK;MACJ,MAAM;IACN;EACD,CAxDsE,CA0DxE;;;EACC,KAAK,CAAC,gBAAN,CAAuB,QAAvB,EAAiC,QAAjC;EACA,KAAK,CAAC,gBAAN,CAAuB,MAAvB,EAA+B,QAA/B;EAEA,KAAK,CAAC,gBAAN,CAAuB,OAAvB,EAAgC,YAAU;IAEzC,KAAK,CAAC,KAAN,CAAY,MAAZ,GAAqB,EAArB;IAEA,IAAI,SAAS,GAAG,KAAK,CAAC,YAAtB;IAEA,KAAK,CAAC,KAAN,CAAY,MAAZ,GAAqB,SAAS,GAAG,IAAjC;;IAEA,IAAG,SAAS,IAAI,YAAhB,EAA6B;MAC5B,YAAY,GAAG,SAAf;MACA,IAAI,CAAC,MAAL,GAAc,eAAd;IACA;EACD,CAZD;EAcA,KAAK,CAAC,gBAAN,CAAuB,SAAvB,EAAkC,UAAS,CAAT,EAAW;IAE5C,QAAO,CAAC,CAAC,OAAT;MAEC,KAAK,EAAL;QACC,IAAG,CAAC,CAAC,QAAF,IAAc,YAAY,CAAC,gBAA9B,EAA+C;UAC9C,QAAQ;QACR;;QACD;;MAED,KAAK,EAAL;QACC,MAAM;QACN;;MAED,KAAK,EAAL;QAAO;QACN,IAAG,OAAO,IAAI,QAAX,IAAwB,OAAO,IAAI,QAAX,IAAuB,KAAK,CAAC,cAAxD,EAAwE;UACvE,CAAC,CAAC,wBAAF;UACA,CAAC,CAAC,eAAF;QACA;;QAED;;MAED,KAAK,EAAL;QAAO;QACN,IAAG,OAAO,IAAI,QAAX,IAAwB,OAAO,IAAI,QAAX,IAAuB,KAAK,CAAC,cAAN,KAAyB,KAAK,CAAC,KAAN,CAAY,MAAvF,EAA+F;UAC9F,CAAC,CAAC,wBAAF;UACA,CAAC,CAAC,eAAF;QACA;;QACD;;MAED,KAAK,EAAL;MACA,KAAK,EAAL;QACC,CAAC,CAAC,eAAF;QACA;IA9BF;EAgCA,CAlCD;;EAoCA,IAAG,YAAY,CAAC,IAAhB,EAAqB;IACpB,SAAS,CAAC,KAAD,EAAQ,YAAR,CAAT;EACA;;EAED,OAAO,KAAP;AACD,ECtHA;;;AACe,SAAA,MAAA,CAAS,IAAT,EAAe,UAAf,EAA2B,OAA3B,EAAoC,MAApC,EAA4C,YAA5C,EAAyD;EACvE,IAAI,SAAS,GAAG,IAAI,CAAC,QAAL,EAAhB;EAAA,IACA,OAAO,GAAG,YAAY,CAAC,kBAAb,IAAmC,QAD7C;EAAA,IAEA,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAFR;EAIA,KAAK,CAAC,YAAN,CAAmB,MAAnB,EAA2B,QAA3B;;EAEA,IAAG,OAAO,YAAY,CAAC,GAApB,IAA2B,WAA9B,EAA0C;IACzC,KAAK,CAAC,YAAN,CAAmB,KAAnB,EAA0B,YAAY,CAAC,GAAvC;EACA;;EAED,IAAG,OAAO,YAAY,CAAC,GAApB,IAA2B,WAA9B,EAA0C;IACzC,KAAK,CAAC,YAAN,CAAmB,KAAnB,EAA0B,YAAY,CAAC,GAAvC;EACA;;EAED,IAAG,OAAO,YAAY,CAAC,IAApB,IAA4B,WAA/B,EAA2C;IAC1C,KAAK,CAAC,YAAN,CAAmB,MAAnB,EAA2B,YAAY,CAAC,IAAxC;EACA,CAjBsE,CAmBxE;;;EACC,KAAK,CAAC,KAAN,CAAY,OAAZ,GAAsB,KAAtB;EACA,KAAK,CAAC,KAAN,CAAY,KAAZ,GAAoB,MAApB;EACA,KAAK,CAAC,KAAN,CAAY,SAAZ,GAAwB,YAAxB;;EAEA,IAAG,YAAY,CAAC,iBAAb,IAAkC,OAAO,YAAY,CAAC,iBAApB,IAAyC,QAA9E,EAAuF;IACtF,KAAK,IAAI,GAAT,IAAgB,YAAY,CAAC,iBAA7B,EAA+C;MAC9C,IAAG,GAAG,CAAC,MAAJ,CAAW,CAAX,KAAiB,GAApB,EAAwB;QACvB,GAAG,GAAG,GAAG,CAAC,KAAJ,CAAU,CAAV,CAAN;QACA,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,KAAK,CAAC,YAAN,CAAmB,GAAnB,IAA0B,YAAY,CAAC,iBAAb,CAA+B,MAAM,GAArC,CAAlD;MACA,CAHD,MAGK;QACJ,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,YAAY,CAAC,iBAAb,CAA+B,GAA/B,CAAxB;MACA;IACD;EACD;;EAED,KAAK,CAAC,KAAN,GAAc,SAAd;;EAEA,IAAI,QAAQ,GAAG,UAAS,CAAT,EAAW;IACzB,QAAQ;EACR,CAFD;;EAIA,UAAU,CAAC,YAAY;IACxB;IACE,KAAK,CAAC,mBAAN,CAA0B,MAA1B,EAAkC,QAAlC;IAEA,KAAK,CAAC,KAAN,CAAY;MAAC,aAAa,EAAE;IAAhB,CAAZ;IACA,KAAK,CAAC,KAAN,CAAY,MAAZ,GAAqB,MAArB,CALsB,CAOxB;;IACE,KAAK,CAAC,gBAAN,CAAuB,MAAvB,EAA+B,QAA/B;;IAEA,IAAG,YAAY,CAAC,cAAhB,EAA+B;MAC9B,KAAK,CAAC,MAAN;IACA;EACD,CAbS,CAAV;;EAeA,SAAS,QAAT,GAAmB;IAClB,IAAI,KAAK,GAAG,KAAK,CAAC,KAAlB;;IAEA,IAAG,CAAC,KAAK,CAAC,KAAD,CAAN,IAAiB,KAAK,KAAI,EAA7B,EAAgC;MAC/B,KAAK,GAAG,MAAM,CAAC,KAAD,CAAd;IACA;;IAED,IAAG,KAAK,KAAK,SAAb,EAAuB;MACtB,IAAG,OAAO,CAAC,KAAD,CAAV,EAAkB;QACjB,SAAS,GAAG,KAAZ,CADiB,CACC;MAClB;IACD,CAJD,MAIK;MACJ,MAAM;IACN;EACD,CAtEsE,CAwExE;;;EACC,KAAK,CAAC,gBAAN,CAAuB,SAAvB,EAAkC,UAAS,CAAT,EAAW;IAC5C,QAAO,CAAC,CAAC,OAAT;MACC,KAAK,EAAL;QACH;QACI,QAAQ;QACR;;MAED,KAAK,EAAL;QACC,MAAM;QACN;;MAED,KAAK,EAAL,CAVD,CAUS;;MACR,KAAK,EAAL;QAAO;QACN,IAAG,OAAO,IAAI,QAAd,EAAuB;UACtB,CAAC,CAAC,wBAAF;UACA,CAAC,CAAC,eAAF;QACA;;QACD;;MAED,KAAK,EAAL;MACA,KAAK,EAAL;QACC,CAAC,CAAC,eAAF;QACA;IArBF;EAuBA,CAxBD;;EA0BA,IAAG,YAAY,CAAC,IAAhB,EAAqB;IACpB,SAAS,CAAC,KAAD,EAAQ,YAAR,CAAT;EACA;;EAED,OAAO,KAAP;AACD,EC3GA;;;AACe,SAAA,KAAA,CAAS,IAAT,EAAe,UAAf,EAA2B,OAA3B,EAAoC,MAApC,EAA4C,YAA5C,EAAyD;EACvE,IAAI,SAAS,GAAG,IAAI,CAAC,QAAL,EAAhB;EAAA,IACA,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CADR;EAGA,KAAK,CAAC,YAAN,CAAmB,MAAnB,EAA2B,OAA3B;;EAEA,IAAI,OAAO,YAAY,CAAC,GAApB,IAA2B,WAA/B,EAA4C;IAC3C,KAAK,CAAC,YAAN,CAAmB,KAAnB,EAA0B,YAAY,CAAC,GAAvC;EACA;;EAED,IAAI,OAAO,YAAY,CAAC,GAApB,IAA2B,WAA/B,EAA4C;IAC3C,KAAK,CAAC,YAAN,CAAmB,KAAnB,EAA0B,YAAY,CAAC,GAAvC;EACA;;EAED,IAAI,OAAO,YAAY,CAAC,IAApB,IAA4B,WAAhC,EAA6C;IAC5C,KAAK,CAAC,YAAN,CAAmB,MAAnB,EAA2B,YAAY,CAAC,IAAxC;EACA,CAhBsE,CAkBxE;;;EACC,KAAK,CAAC,KAAN,CAAY,OAAZ,GAAsB,KAAtB;EACA,KAAK,CAAC,KAAN,CAAY,KAAZ,GAAoB,MAApB;EACA,KAAK,CAAC,KAAN,CAAY,SAAZ,GAAwB,YAAxB;;EAEA,IAAG,YAAY,CAAC,iBAAb,IAAkC,OAAO,YAAY,CAAC,iBAApB,IAAyC,QAA9E,EAAuF;IACtF,KAAK,IAAI,GAAT,IAAgB,YAAY,CAAC,iBAA7B,EAA+C;MAC9C,IAAG,GAAG,CAAC,MAAJ,CAAW,CAAX,KAAiB,GAApB,EAAwB;QACvB,GAAG,GAAG,GAAG,CAAC,KAAJ,CAAU,CAAV,CAAN;QACA,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,KAAK,CAAC,YAAN,CAAmB,GAAnB,IAA0B,YAAY,CAAC,iBAAb,CAA+B,MAAM,GAArC,CAAlD;MACA,CAHD,MAGK;QACJ,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,YAAY,CAAC,iBAAb,CAA+B,GAA/B,CAAxB;MACA;IACD;EACD;;EAED,KAAK,CAAC,KAAN,GAAc,SAAd;EAEA,UAAU,CAAC,YAAY;IACtB,KAAK,CAAC,KAAN,CAAY;MAAC,aAAa,EAAE;IAAhB,CAAZ;IACA,KAAK,CAAC,KAAN,CAAY,MAAZ,GAAqB,MAArB;EACA,CAHS,CAAV;;EAKA,SAAS,QAAT,GAAmB;IAClB,IAAI,KAAK,GAAG,KAAK,CAAC,KAAlB;;IAEA,IAAG,CAAC,KAAK,CAAC,KAAD,CAAN,IAAiB,KAAK,KAAI,EAA7B,EAAgC;MAC/B,KAAK,GAAG,MAAM,CAAC,KAAD,CAAd;IACA;;IAED,IAAG,KAAK,IAAI,SAAZ,EAAsB;MACrB,IAAG,OAAO,CAAC,KAAD,CAAV,EAAkB;QACjB,SAAS,GAAG,KAAZ,CADiB,CACC;MAClB;IACD,CAJD,MAIK;MACJ,MAAM;IACN;EACD,CAvDsE,CAyDxE;;;EACC,KAAK,CAAC,gBAAN,CAAuB,MAAvB,EAA+B,UAAS,CAAT,EAAW;IACzC,QAAQ;EACR,CAFD,EA1DuE,CA8DxE;;EACC,KAAK,CAAC,gBAAN,CAAuB,SAAvB,EAAkC,UAAS,CAAT,EAAW;IAC5C,QAAO,CAAC,CAAC,OAAT;MACC,KAAK,EAAL;QACH;QACI,QAAQ;QACR;;MAED,KAAK,EAAL;QACC,MAAM;QACN;IARF;EAUA,CAXD;EAaA,OAAO,KAAP;AACD,EC9EA;;;AACe,SAAA,IAAA,CAAS,IAAT,EAAe,UAAf,EAA2B,OAA3B,EAAoC,MAApC,EAA4C,YAA5C,EAAyD;EACvE,IAAI,WAAW,GAAG,YAAY,CAAC,MAA/B;EAAA,IACA,EAAE,GAAG,WAAW,GAAI,MAAM,CAAC,QAAP,IAAmB,KAAK,CAAC,QAA7B,GAAyC,IADzD,CADuE,CAIxE;;EACC,IAAI,SAAS,GAAG,IAAI,CAAC,QAAL,EAAhB;EAAA,IACA,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CADR;;EAGA,SAAS,WAAT,CAAqB,KAArB,EAA2B;IAC1B,IAAI,WAAJ;;IAEA,IAAG,EAAE,CAAC,UAAH,CAAc,KAAd,CAAH,EAAwB;MACvB,WAAW,GAAG,KAAd;IACA,CAFD,MAEM,IAAG,WAAW,KAAK,KAAnB,EAAyB;MAC9B,WAAW,GAAG,EAAE,CAAC,OAAH,CAAW,MAAM,CAAC,KAAD,CAAjB,CAAd;IACA,CAFK,MAED;MACJ,WAAW,GAAG,EAAE,CAAC,UAAH,CAAc,MAAM,CAAC,KAAD,CAApB,EAA6B,WAA7B,CAAd;IACA;;IAED,OAAO,WAAW,CAAC,QAAZ,CAAqB,YAArB,CAAP;EACA;;EAED,KAAK,CAAC,IAAN,GAAa,MAAb;EACA,KAAK,CAAC,KAAN,CAAY,OAAZ,GAAsB,KAAtB;EACA,KAAK,CAAC,KAAN,CAAY,KAAZ,GAAoB,MAApB;EACA,KAAK,CAAC,KAAN,CAAY,SAAZ,GAAwB,YAAxB;;EAEA,IAAG,YAAY,CAAC,GAAhB,EAAoB;IACnB,KAAK,CAAC,YAAN,CAAmB,KAAnB,EAA0B,WAAW,GAAG,WAAW,CAAC,YAAY,CAAC,GAAd,CAAd,GAAmC,YAAY,CAAC,GAArF;EACA;;EAED,IAAG,YAAY,CAAC,GAAhB,EAAoB;IACnB,KAAK,CAAC,YAAN,CAAmB,KAAnB,EAA0B,WAAW,GAAG,WAAW,CAAC,YAAY,CAAC,GAAd,CAAd,GAAmC,YAAY,CAAC,GAArF;EACA;;EAED,IAAG,YAAY,CAAC,iBAAb,IAAkC,OAAO,YAAY,CAAC,iBAApB,IAAyC,QAA9E,EAAuF;IACtF,KAAK,IAAI,GAAT,IAAgB,YAAY,CAAC,iBAA7B,EAA+C;MAC9C,IAAG,GAAG,CAAC,MAAJ,CAAW,CAAX,KAAiB,GAApB,EAAwB;QACvB,GAAG,GAAG,GAAG,CAAC,KAAJ,CAAU,CAAV,CAAN;QACA,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,KAAK,CAAC,YAAN,CAAmB,GAAnB,IAA0B,YAAY,CAAC,iBAAb,CAA+B,MAAM,GAArC,CAAlD;MACA,CAHD,MAGK;QACJ,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,YAAY,CAAC,iBAAb,CAA+B,GAA/B,CAAxB;MACA;IACD;EACD;;EAED,SAAS,GAAG,OAAO,SAAP,KAAqB,WAArB,GAAmC,SAAnC,GAA+C,EAA3D;;EAEA,IAAG,WAAH,EAAe;IACd,IAAG,EAAH,EAAM;MACL,SAAS,GAAG,WAAW,CAAC,SAAD,CAAvB;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,KAAR,CAAc,2EAAd;IACA;EACD;;EAED,KAAK,CAAC,KAAN,GAAc,SAAd;EAEA,UAAU,CAAC,YAAU;IACpB,KAAK,CAAC,KAAN,CAAY;MAAC,aAAa,EAAE;IAAhB,CAAZ;IACA,KAAK,CAAC,KAAN,CAAY,MAAZ,GAAqB,MAArB;;IAEA,IAAG,YAAY,CAAC,cAAhB,EAA+B;MAC9B,KAAK,CAAC,MAAN;IACA;EACD,CAPS,CAAV;;EASA,SAAS,QAAT,CAAkB,CAAlB,EAAoB;IACnB,IAAI,KAAK,GAAG,KAAK,CAAC,KAAlB;;IAEA,IAAI,CAAC,SAAS,KAAK,IAAd,IAAsB,OAAO,SAAP,KAAqB,WAA5C,KAA4D,KAAK,KAAK,EAAvE,IAA8E,KAAK,KAAK,SAA3F,EAAqG;MAEpG,IAAG,KAAK,IAAI,WAAZ,EAAwB;QACvB,KAAK,GAAG,EAAE,CAAC,UAAH,CAAc,MAAM,CAAC,KAAD,CAApB,EAA6B,YAA7B,EAA2C,QAA3C,CAAoD,WAApD,CAAR;MACA;;MAED,IAAG,OAAO,CAAC,KAAD,CAAV,EAAkB;QACjB,SAAS,GAAG,KAAK,CAAC,KAAlB,CADiB,CACO;MACxB;IACD,CATD,MASK;MACJ,MAAM;IACN;EACD,CAlFsE,CAoFxE;;;EACC,KAAK,CAAC,gBAAN,CAAuB,QAAvB,EAAiC,QAAjC;EACA,KAAK,CAAC,gBAAN,CAAuB,MAAvB,EAA+B,QAA/B,EAtFuE,CAwFxE;;EACC,KAAK,CAAC,gBAAN,CAAuB,SAAvB,EAAkC,UAAS,CAAT,EAAW;IAC5C,QAAO,CAAC,CAAC,OAAT;MACF;MACG,KAAK,EAAL;QACC,QAAQ;QACR;;MAED,KAAK,EAAL;QACC,MAAM;QACN;;MAED,KAAK,EAAL;MACA,KAAK,EAAL;QACC,CAAC,CAAC,eAAF;QACA;IAbF;EAeA,CAhBD;EAkBA,OAAO,KAAP;AACD,EC7GA;;;AACe,SAAA,IAAA,CAAS,IAAT,EAAe,UAAf,EAA2B,OAA3B,EAAoC,MAApC,EAA4C,YAA5C,EAAyD;EACvE,IAAI,WAAW,GAAG,YAAY,CAAC,MAA/B;EAAA,IACA,EAAE,GAAG,WAAW,GAAI,MAAM,CAAC,QAAP,IAAmB,KAAK,CAAC,QAA7B,GAAyC,IADzD;EAAA,IAEA,WAFA,CADuE,CAKxE;;EACC,IAAI,SAAS,GAAG,IAAI,CAAC,QAAL,EAAhB;EAAA,IACA,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CADR;EAGA,KAAK,CAAC,IAAN,GAAa,MAAb;EACA,KAAK,CAAC,KAAN,CAAY,OAAZ,GAAsB,KAAtB;EACA,KAAK,CAAC,KAAN,CAAY,KAAZ,GAAoB,MAApB;EACA,KAAK,CAAC,KAAN,CAAY,SAAZ,GAAwB,YAAxB;;EAEA,IAAG,YAAY,CAAC,iBAAb,IAAkC,OAAO,YAAY,CAAC,iBAApB,IAAyC,QAA9E,EAAuF;IACtF,KAAK,IAAI,GAAT,IAAgB,YAAY,CAAC,iBAA7B,EAA+C;MAC9C,IAAG,GAAG,CAAC,MAAJ,CAAW,CAAX,KAAiB,GAApB,EAAwB;QACvB,GAAG,GAAG,GAAG,CAAC,KAAJ,CAAU,CAAV,CAAN;QACA,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,KAAK,CAAC,YAAN,CAAmB,GAAnB,IAA0B,YAAY,CAAC,iBAAb,CAA+B,MAAM,GAArC,CAAlD;MACA,CAHD,MAGK;QACJ,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,YAAY,CAAC,iBAAb,CAA+B,GAA/B,CAAxB;MACA;IACD;EACD;;EAED,SAAS,GAAG,OAAO,SAAP,KAAqB,WAArB,GAAmC,SAAnC,GAA+C,EAA3D;;EAEA,IAAG,WAAH,EAAe;IACd,IAAG,EAAH,EAAM;MACL,IAAG,EAAE,CAAC,UAAH,CAAc,SAAd,CAAH,EAA4B;QAC3B,WAAW,GAAG,SAAd;MACA,CAFD,MAEM,IAAG,WAAW,KAAK,KAAnB,EAAyB;QAC9B,WAAW,GAAG,EAAE,CAAC,OAAH,CAAW,MAAM,CAAC,SAAD,CAAjB,CAAd;MACA,CAFK,MAED;QACJ,WAAW,GAAG,EAAE,CAAC,UAAH,CAAc,MAAM,CAAC,SAAD,CAApB,EAAiC,WAAjC,CAAd;MACA;;MAED,SAAS,GAAG,WAAW,CAAC,QAAZ,CAAqB,OAArB,CAAZ;IAEA,CAXD,MAWK;MACJ,OAAO,CAAC,KAAR,CAAc,2EAAd;IACA;EACD;;EAED,KAAK,CAAC,KAAN,GAAc,SAAd;EAEA,UAAU,CAAC,YAAU;IACpB,KAAK,CAAC,KAAN,CAAY;MAAC,aAAa,EAAE;IAAhB,CAAZ;IACA,KAAK,CAAC,KAAN,CAAY,MAAZ,GAAqB,MAArB;;IAEA,IAAG,YAAY,CAAC,cAAhB,EAA+B;MAC9B,KAAK,CAAC,MAAN;IACA;EACD,CAPS,CAAV;;EASA,SAAS,QAAT,CAAkB,CAAlB,EAAoB;IACnB,IAAI,KAAK,GAAG,KAAK,CAAC,KAAlB;;IAEA,IAAI,CAAC,SAAS,KAAK,IAAd,IAAsB,OAAO,SAAP,KAAqB,WAA5C,KAA4D,KAAK,KAAK,EAAvE,IAA8E,KAAK,KAAK,SAA3F,EAAqG;MAEpG,IAAG,KAAK,IAAI,WAAZ,EAAwB;QACvB,KAAK,GAAG,EAAE,CAAC,UAAH,CAAc,MAAM,CAAC,KAAD,CAApB,EAA6B,OAA7B,EAAsC,QAAtC,CAA+C,WAA/C,CAAR;MACA;;MAED,IAAG,OAAO,CAAC,KAAD,CAAV,EAAkB;QACjB,SAAS,GAAG,KAAK,CAAC,KAAlB,CADiB,CACO;MACxB;IACD,CATD,MASK;MACJ,MAAM;IACN;EACD,CAtEsE,CAwExE;;;EACC,KAAK,CAAC,gBAAN,CAAuB,QAAvB,EAAiC,QAAjC;EACA,KAAK,CAAC,gBAAN,CAAuB,MAAvB,EAA+B,QAA/B,EA1EuE,CA4ExE;;EACC,KAAK,CAAC,gBAAN,CAAuB,SAAvB,EAAkC,UAAS,CAAT,EAAW;IAC5C,QAAO,CAAC,CAAC,OAAT;MACF;MACG,KAAK,EAAL;QACC,QAAQ;QACR;;MAED,KAAK,EAAL;QACC,MAAM;QACN;;MAED,KAAK,EAAL;MACA,KAAK,EAAL;QACC,CAAC,CAAC,eAAF;QACA;IAbF;EAeA,CAhBD;EAkBA,OAAO,KAAP;AACD,ECjGA;;;AACe,SAAA,QAAA,CAAS,IAAT,EAAe,UAAf,EAA2B,OAA3B,EAAoC,MAApC,EAA4C,YAA5C,EAAyD;EACvE,IAAI,WAAW,GAAG,YAAY,CAAC,MAA/B;EAAA,IACA,EAAE,GAAG,WAAW,GAAI,MAAM,CAAC,QAAP,IAAmB,KAAK,CAAC,QAA7B,GAAyC,IADzD;EAAA,IAEA,WAFA,CADuE,CAKxE;;EACC,IAAI,SAAS,GAAG,IAAI,CAAC,QAAL,EAAhB;EAAA,IACA,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CADR;EAGA,KAAK,CAAC,IAAN,GAAa,gBAAb;EACA,KAAK,CAAC,KAAN,CAAY,OAAZ,GAAsB,KAAtB;EACA,KAAK,CAAC,KAAN,CAAY,KAAZ,GAAoB,MAApB;EACA,KAAK,CAAC,KAAN,CAAY,SAAZ,GAAwB,YAAxB;;EAEA,IAAG,YAAY,CAAC,iBAAb,IAAkC,OAAO,YAAY,CAAC,iBAApB,IAAyC,QAA9E,EAAuF;IACtF,KAAK,IAAI,GAAT,IAAgB,YAAY,CAAC,iBAA7B,EAA+C;MAC9C,IAAG,GAAG,CAAC,MAAJ,CAAW,CAAX,KAAiB,GAApB,EAAwB;QACvB,GAAG,GAAG,GAAG,CAAC,KAAJ,CAAU,CAAV,CAAN;QACA,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,KAAK,CAAC,YAAN,CAAmB,GAAnB,IAA0B,YAAY,CAAC,iBAAb,CAA+B,MAAM,GAArC,CAAlD;MACA,CAHD,MAGK;QACJ,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,YAAY,CAAC,iBAAb,CAA+B,GAA/B,CAAxB;MACA;IACD;EACD;;EAED,SAAS,GAAG,OAAO,SAAP,KAAqB,WAArB,GAAmC,SAAnC,GAA+C,EAA3D;;EAEA,IAAG,WAAH,EAAe;IACd,IAAG,EAAH,EAAM;MACL,IAAG,EAAE,CAAC,UAAH,CAAc,SAAd,CAAH,EAA4B;QAC3B,WAAW,GAAG,SAAd;MACA,CAFD,MAEM,IAAG,WAAW,KAAK,KAAnB,EAAyB;QAC9B,WAAW,GAAG,EAAE,CAAC,OAAH,CAAW,MAAM,CAAC,SAAD,CAAjB,CAAd;MACA,CAFK,MAED;QACJ,WAAW,GAAG,EAAE,CAAC,UAAH,CAAc,MAAM,CAAC,SAAD,CAApB,EAAiC,WAAjC,CAAd;MACA;;MAED,SAAS,GAAG,WAAW,CAAC,QAAZ,CAAqB,YAArB,IAAsC,GAAtC,GAA4C,WAAW,CAAC,QAAZ,CAAqB,OAArB,CAAxD;IACA,CAVD,MAUK;MACJ,OAAO,CAAC,KAAR,CAAc,2EAAd;IACA;EACD;;EAED,KAAK,CAAC,KAAN,GAAc,SAAd;EAEA,UAAU,CAAC,YAAU;IACpB,KAAK,CAAC,KAAN,CAAY;MAAC,aAAa,EAAE;IAAhB,CAAZ;IACA,KAAK,CAAC,KAAN,CAAY,MAAZ,GAAqB,MAArB;;IAEA,IAAG,YAAY,CAAC,cAAhB,EAA+B;MAC9B,KAAK,CAAC,MAAN;IACA;EACD,CAPS,CAAV;;EASA,SAAS,QAAT,CAAkB,CAAlB,EAAoB;IACnB,IAAI,KAAK,GAAG,KAAK,CAAC,KAAlB;;IAEA,IAAI,CAAC,SAAS,KAAK,IAAd,IAAsB,OAAO,SAAP,KAAqB,WAA5C,KAA4D,KAAK,KAAK,EAAvE,IAA8E,KAAK,KAAK,SAA3F,EAAqG;MAEpG,IAAG,KAAK,IAAI,WAAZ,EAAwB;QACvB,KAAK,GAAG,EAAE,CAAC,OAAH,CAAW,MAAM,CAAC,KAAD,CAAjB,EAA0B,QAA1B,CAAmC,WAAnC,CAAR;MACA;;MAED,IAAG,OAAO,CAAC,KAAD,CAAV,EAAkB;QACjB,SAAS,GAAG,KAAK,CAAC,KAAlB,CADiB,CACO;MACxB;IACD,CATD,MASK;MACJ,MAAM;IACN;EACD,CArEsE,CAuExE;;;EACC,KAAK,CAAC,gBAAN,CAAuB,QAAvB,EAAiC,QAAjC;EACA,KAAK,CAAC,gBAAN,CAAuB,MAAvB,EAA+B,QAA/B,EAzEuE,CA2ExE;;EACC,KAAK,CAAC,gBAAN,CAAuB,SAAvB,EAAkC,UAAS,CAAT,EAAW;IAC5C,QAAO,CAAC,CAAC,OAAT;MACF;MACG,KAAK,EAAL;QACC,QAAQ;QACR;;MAED,KAAK,EAAL;QACC,MAAM;QACN;;MAED,KAAK,EAAL;MACA,KAAK,EAAL;QACC,CAAC,CAAC,eAAF;QACA;IAbF;EAeA,CAhBD;EAkBA,OAAO,KAAP;AACD;;AC7Fe,MAAM,IAAN,CAAU;EACxB,WAAW,CAAC,MAAD,EAAS,IAAT,EAAe,UAAf,EAA2B,OAA3B,EAAoC,MAApC,EAA4C,YAA5C,EAAyD;IACnE,KAAK,IAAL,GAAY,MAAZ;IACA,KAAK,KAAL,GAAa,MAAM,CAAC,KAApB;IACA,KAAK,IAAL,GAAY,IAAZ;IACA,KAAK,MAAL,GAAc,KAAK,iBAAL,CAAuB,YAAvB,CAAd;IAEA,KAAK,IAAL,GAAY,EAAZ;IACA,KAAK,YAAL,GAAoB,EAApB;IACA,KAAK,YAAL,GAAoB,EAApB;IACA,KAAK,WAAL,GAAmB,IAAnB;IAEA,KAAK,KAAL,GAAa,KAAK,mBAAL,EAAb;IACA,KAAK,MAAL,GAAc,KAAK,kBAAL,EAAd;IAEA,KAAK,aAAL,GAAqB,IAArB;IAEA,KAAK,QAAL,GAAgB,CAAC,IAAI,CAAC,QAAtB;IAEA,KAAK,aAAL,GAAqB,IAArB;IACA,KAAK,QAAL,GAAgB,KAAhB;IACA,KAAK,MAAL,GAAc,KAAd;IAEA,KAAK,MAAL,GAAc,EAAd;IACA,KAAK,KAAL,GAAa,IAAb;IAEA,KAAK,aAAL,GAAqB,CAArB;IAEA,KAAK,UAAL,GAAgB,EAAhB;IAEA,KAAK,QAAL,GAAgB,IAAhB;IAEA,KAAK,OAAL,GAAe;MACd,OAAO,EAAC,OADM;MAEd,MAAM,EAAC;IAFO,CAAf;;IAKA,KAAK,uBAAL;;IACA,KAAK,gBAAL;;IAEA,UAAU,CAAC,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAD,CAAV;EACA;;EAED,uBAAuB,GAAE;IACxB,IAAG,KAAK,MAAL,CAAY,iBAAf,EAAiC;MAChC,KAAK,IAAL,CAAU,QAAV,GAAqB,kBAArB,CAAwC,GAAxC,CAA4C,wHAA5C;IACA;;IAED,IAAG,KAAK,MAAL,CAAY,cAAf,EAA8B;MAC7B,KAAK,IAAL,CAAU,QAAV,GAAqB,kBAArB,CAAwC,GAAxC,CAA4C,qHAA5C;IACA;;IAED,IAAG,KAAK,MAAL,CAAY,UAAf,EAA0B;MACzB,KAAK,IAAL,CAAU,QAAV,GAAqB,kBAArB,CAAwC,GAAxC,CAA4C,iHAA5C;IACA;;IAED,IAAG,KAAK,MAAL,CAAY,oBAAf,EAAoC;MACnC,KAAK,IAAL,CAAU,QAAV,GAAqB,kBAArB,CAAwC,GAAxC,CAA4C,2HAA5C;IACA;EACD;;EAED,gBAAgB,GAAE;IACjB,IAAI,YAAY,GAAG,KAAK,IAAL,CAAU,QAAV,EAAnB;;IAEA,IAAG,OAAO,YAAP,KAAwB,WAAxB,IAAuC,OAAO,KAAK,MAAL,CAAY,YAAnB,KAAoC,WAA9E,EAA0F;MACzF,YAAY,GAAG,KAAK,MAAL,CAAY,YAA3B;IACA;;IAED,KAAK,aAAL,GAAqB,KAAK,MAAL,CAAY,WAAZ,GAA0B,YAA1B,GAAyC,CAAC,YAAD,CAA9D;;IAEA,IAAG,KAAK,QAAR,EAAiB;MAChB,KAAK,KAAL,CAAW,KAAX,GAAmB,KAAK,aAAL,GAAqB,KAAK,aAAL,CAAmB,IAAnB,CAAwB,GAAxB,CAArB,GAAoD,EAAvE;MACA,KAAK,0BAAL;IACA;EACD;;EAED,WAAW,GAAE;IACZ,IAAI,MAAM,GAAG,KAAK,IAAL,CAAU,UAAV,EAAb;;IAEA,SAAS,SAAT,CAAmB,CAAnB,EAAqB;MACpB,CAAC,CAAC,eAAF;IACA;;IAED,KAAK,KAAL,CAAW,KAAX,CAAiB,MAAjB,GAA0B,MAA1B;IACA,KAAK,KAAL,CAAW,KAAX,CAAiB;MAAC,aAAa,EAAE;IAAhB,CAAjB;IAGA,MAAM,CAAC,gBAAP,CAAwB,OAAxB,EAAiC,SAAjC;IAEA,UAAU,CAAC,MAAM;MAChB,MAAM,CAAC,mBAAP,CAA2B,OAA3B,EAAoC,SAApC;IACA,CAFS,EAEP,IAFO,CAAV;IAIA,KAAK,KAAL,CAAW,gBAAX,CAA4B,WAA5B,EAAyC,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,IAA5B,CAAzC;EACA;;EAED,kBAAkB,GAAE;IACnB,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAb;IACA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,qBAArB;IAEA,MAAM,CAAC,gBAAP,CAAwB,WAAxB,EAAqC,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAArC;IACA,MAAM,CAAC,gBAAP,CAAwB,SAAxB,EAAmC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAnC;IAEA,OAAO,MAAP;EACA;;EAED,aAAa,GAAE;IACd,IAAI,OAAO,GAAG,KAAK,QAAL,GAAgB,KAAK,KAArB,GAA6B,KAAK,IAAL,CAAU,UAAV,EAA3C;IAEA,KAAK,MAAL,CAAY,KAAZ,CAAkB,QAAlB,GAA6B,OAAO,CAAC,WAAR,GAAsB,IAAnD;;IAEA,IAAG,KAAK,MAAL,CAAY,QAAf,EAAwB;MACvB,IAAG,KAAK,MAAL,CAAY,QAAZ,KAAyB,IAA5B,EAAiC;QAChC,KAAK,MAAL,CAAY,KAAZ,CAAkB,QAAlB,GAA6B,OAAO,CAAC,WAAR,GAAsB,IAAnD;MACA,CAFD,MAEM,IAAG,OAAO,KAAK,MAAL,CAAY,QAAnB,KAAgC,QAAnC,EAA4C;QACjD,KAAK,MAAL,CAAY,KAAZ,CAAkB,QAAlB,GAA6B,KAAK,MAAL,CAAY,QAAZ,GAAuB,IAApD;MACA,CAFK,MAED;QACJ,KAAK,MAAL,CAAY,KAAZ,CAAkB,QAAlB,GAA6B,KAAK,MAAL,CAAY,QAAzC;MACA;IACD;EAED;;EAED,mBAAmB,GAAE;IACpB,IAAI,OAAO,GAAG,KAAK,MAAL,CAAY,iBAA1B;IACA,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAZ;IAEA,KAAK,CAAC,YAAN,CAAmB,MAAnB,EAA2B,KAAK,MAAL,CAAY,SAAZ,GAAwB,QAAxB,GAAmC,MAA9D;IAEA,KAAK,CAAC,KAAN,CAAY,OAAZ,GAAsB,KAAtB;IACA,KAAK,CAAC,KAAN,CAAY,KAAZ,GAAoB,MAApB;IACA,KAAK,CAAC,KAAN,CAAY,SAAZ,GAAwB,YAAxB;;IAEA,IAAG,CAAC,KAAK,MAAL,CAAY,YAAhB,EAA6B;MAC5B,KAAK,CAAC,KAAN,CAAY,MAAZ,GAAqB,SAArB;MACA,KAAK,CAAC,KAAN,CAAY,UAAZ,GAAyB,aAAzB,CAF4B,CAG/B;IACG;;IAED,IAAG,OAAO,IAAI,OAAO,OAAP,IAAkB,QAAhC,EAAyC;MACxC,KAAK,IAAI,GAAT,IAAgB,OAAhB,EAAwB;QACvB,IAAG,GAAG,CAAC,MAAJ,CAAW,CAAX,KAAiB,GAApB,EAAwB;UACvB,GAAG,GAAG,GAAG,CAAC,KAAJ,CAAU,CAAV,CAAN;UACA,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,KAAK,CAAC,YAAN,CAAmB,GAAnB,IAA0B,OAAO,CAAC,MAAM,GAAP,CAAzD;QACA,CAHD,MAGK;UACJ,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,OAAO,CAAC,GAAD,CAA/B;QACA;MACD;IACD;;IAED,IAAG,KAAK,MAAL,CAAY,IAAf,EAAoB;MACnB,SAAS,CAAC,KAAD,EAAQ,KAAK,MAAb,CAAT;IACA;;IAED,KAAK,gBAAL,CAAsB,KAAtB;;IAEA,OAAO,KAAP;EACA;;EAED,iBAAiB,CAAC,MAAD,EAAQ;IACxB,IAAI,SAAS,GAAG,CAAC,QAAD,EAAW,WAAX,EAAwB,cAAxB,CAAhB;IAAA,IACA,UADA;IAGA,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,MAAlB,CAAT;IAEA,MAAM,CAAC,kBAAP,GAA4B,MAAM,CAAC,kBAAP,IAA6B,QAAzD;IACA,MAAM,CAAC,kBAAP,GAA4B,OAAO,MAAM,CAAC,kBAAd,KAAqC,WAArC,GAAmD,eAAnD,GAAqE,MAAM,CAAC,kBAAxG;IACA,MAAM,CAAC,gBAAP,GAA0B,OAAO,MAAM,CAAC,gBAAd,KAAmC,WAAnC,GAAiD,kBAAjD,GAAsE,MAAM,CAAC,gBAAvG;IACA,MAAM,CAAC,WAAP,GAAqB,OAAO,MAAM,CAAC,WAAd,KAA8B,WAA9B,GAA4C,GAA5C,GAAkD,MAAM,CAAC,WAA9E;IAEA,MAAM,CAAC,UAAP,GAAoB,MAAM,CAAC,IAAP,CAAY,MAAZ,EAAoB,QAApB,CAA6B,YAA7B,IAA6C,MAAM,CAAC,UAApD,GAAiE,EAArF;IAEA,UAAU,GAAG,MAAM,CAAC,IAAP,CAAY,MAAZ,EAAoB,MAApB,CAA2B,GAAG,IAAI,SAAS,CAAC,QAAV,CAAmB,GAAnB,CAAlC,EAA2D,MAAxE;;IAEA,IAAG,CAAC,UAAJ,EAAe;MACd,OAAO,CAAC,IAAR,CAAa,6FAAb;IACA,CAFD,MAEM,IAAG,UAAU,GAAG,CAAhB,EAAkB;MACvB,OAAO,CAAC,IAAR,CAAa,qHAAb;IACA;;IAED,IAAG,MAAM,CAAC,YAAV,EAAuB;MACtB,IAAG,MAAM,CAAC,WAAV,EAAsB;QACrB,MAAM,CAAC,WAAP,GAAqB,KAArB;QACA,OAAO,CAAC,IAAR,CAAa,6FAAb;MACA;IACD,CALD,MAKK;MACJ,IAAG,MAAM,CAAC,QAAV,EAAmB;QAClB,MAAM,CAAC,QAAP,GAAkB,KAAlB;QACA,OAAO,CAAC,IAAR,CAAa,2FAAb;MACA;;MAED,IAAG,MAAM,CAAC,UAAV,EAAqB;QACpB,MAAM,CAAC,UAAP,GAAoB,KAApB;QACA,OAAO,CAAC,IAAR,CAAa,6FAAb;MACA;;MAED,IAAG,MAAM,CAAC,YAAV,EAAuB;QACtB,MAAM,CAAC,YAAP,GAAsB,KAAtB;QACA,OAAO,CAAC,IAAR,CAAa,+FAAb;MACA;;MAED,IAAG,MAAM,CAAC,IAAV,EAAe;QACd,MAAM,CAAC,IAAP,GAAc,KAAd;QACA,OAAO,CAAC,IAAR,CAAa,uFAAb;MACA;;MAED,IAAG,MAAM,CAAC,UAAV,EAAqB;QACpB,MAAM,CAAC,UAAP,GAAoB,KAApB;QACA,OAAO,CAAC,IAAR,CAAa,6FAAb;MACA;;MAED,IAAG,MAAM,CAAC,WAAV,EAAsB;QACrB,MAAM,CAAC,WAAP,GAAqB,KAArB;QACA,OAAO,CAAC,IAAR,CAAa,8FAAb;MACA;IACD;;IAED,IAAG,MAAM,CAAC,YAAP,IAAuB,EAAE,OAAO,MAAM,CAAC,YAAd,KAA+B,UAA/B,IAA6C,MAAM,CAAC,SAAtD,CAA1B,EAA2F;MAC1F,MAAM,CAAC,YAAP,GAAsB,KAAtB;MACA,OAAO,CAAC,IAAR,CAAa,uHAAb;IACA;;IACD,OAAO,MAAP;EACA,CA9NuB,CA+NzB;EACA;EACA;;;EAEC,gBAAgB,CAAC,KAAD,EAAO;IACtB,KAAK,CAAC,gBAAN,CAAuB,OAAvB,EAAgC,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAhC;IACA,KAAK,CAAC,gBAAN,CAAuB,OAAvB,EAAgC,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAhC;IACA,KAAK,CAAC,gBAAN,CAAuB,MAAvB,EAA+B,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAA/B;IACA,KAAK,CAAC,gBAAN,CAAuB,SAAvB,EAAkC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAlC;IACA,KAAK,CAAC,gBAAN,CAAuB,QAAvB,EAAiC,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAjC;;IAEA,IAAG,KAAK,MAAL,CAAY,YAAf,EAA4B;MAC3B,KAAK,CAAC,gBAAN,CAAuB,OAAvB,EAAgC,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAhC;IACA;EACD;;EAGD,WAAW,CAAC,CAAD,EAAG;IACb,KAAK,kBAAL;EACA;;EAED,OAAO,GAAE;IACR,IAAG,KAAK,MAAL,CAAY,YAAf,EAA4B;MAC3B,YAAY,CAAC,KAAK,aAAN,CAAZ;MAEA,KAAK,aAAL,GAAqB,UAAU,CAAC,MAAM;QACrC,KAAK,kBAAL;MACA,CAF8B,EAE5B,KAAK,MAAL,CAAY,WAFgB,CAA/B;IAGA,CAND,MAMK;MACJ,KAAK,WAAL;IACA;EACD;;EAED,WAAW,CAAC,CAAD,EAAG;IACb,CAAC,CAAC,eAAF;EACA;;EAED,UAAU,CAAC,CAAD,EAAG;IACZ,IAAG,KAAK,QAAR,EAAiB;MAChB,IAAG,KAAK,KAAR,EAAc;QACb,KAAK,KAAL,CAAW,IAAX;MACA,CAFD,MAEK;QACJ,KAAK,aAAL,CAAmB,IAAnB;MACA;IACD;EACD;;EAED,YAAY,GAAE;IACb,KAAK,aAAL;EACA;;EAED,aAAa,CAAC,CAAD,EAAG;IACf,QAAO,CAAC,CAAC,OAAT;MAEC,KAAK,EAAL;QAAO;QACN,KAAK,MAAL,CAAY,CAAZ;;QACA;;MAED,KAAK,EAAL;QAAO;QACN,KAAK,QAAL,CAAc,CAAd;;QACA;;MAED,KAAK,EAAL,CAVD,CAUS;;MACR,KAAK,EAAL;QAAO;QACN,KAAK,QAAL,CAAc,CAAd;;QACA;;MAED,KAAK,EAAL;QAAO;QACN,KAAK,SAAL;;QACA;;MAED,KAAK,EAAL;QAAO;QACN,KAAK,OAAL;;QACA;;MAED,KAAK,EAAL,CAvBD,CAuBS;;MACR,KAAK,EAAL;QAAO;QACN,KAAK,WAAL,CAAiB,CAAjB;;QACA;;MAED,KAAK,CAAL;QAAM;QACL;;MAED;QACC,KAAK,gBAAL,CAAsB,CAAtB;;IAhCF;EAkCA;;EAED,WAAW,CAAC,CAAD,EAAG;IACb,QAAO,CAAC,CAAC,OAAT;MACC,KAAK,EAAL,CADD,CACS;;MACR,KAAK,EAAL,CAFD,CAES;;MACR,KAAK,EAAL,CAHD,CAGS;;MACR,KAAK,EAAL,CAJD,CAIS;;MACR,KAAK,EAAL,CALD,CAKS;;MACR,KAAK,EAAL;QAAO;QACN;;MAED;QACC,KAAK,kBAAL,CAAwB,CAAxB;;IAVF;EAYA;;EAED,iBAAiB,GAAE;IAClB,IAAG,KAAK,KAAR,EAAc;MACb,KAAK,KAAL,CAAW,SAAX;IACA;;IAED,UAAU,CAAC,MAAK;MACf,IAAG,KAAK,KAAR,EAAc;QACb,KAAK,KAAL,CAAW,WAAX;MACA;IACD,CAJS,EAIP,EAJO,CAAV;EAKA;;EAED,YAAY,GAAE;IACb,KAAK,QAAL,GAAgB,KAAhB;IAEA,UAAU,CAAC,MAAK;MACf,KAAK,QAAL,GAAgB,IAAhB;IACA,CAFS,EAEP,EAFO,CAAV;EAGA,CAxVuB,CA0VzB;EACA;EACA;;;EAEC,MAAM,CAAC,CAAD,EAAG;IACR,IAAI,KAAK,GAAG,KAAK,YAAL,CAAkB,OAAlB,CAA0B,KAAK,WAA/B,CAAZ;;IAEA,IAAG,KAAK,MAAL,CAAY,kBAAZ,IAAkC,QAAlC,IAA+C,KAAK,MAAL,CAAY,kBAAZ,IAAkC,QAAlC,IAA8C,KAAhG,EAAuG;MACtG,CAAC,CAAC,wBAAF;MACA,CAAC,CAAC,eAAF;MACA,CAAC,CAAC,cAAF;;MAEA,IAAG,KAAK,GAAG,CAAX,EAAa;QACZ,KAAK,UAAL,CAAgB,KAAK,YAAL,CAAkB,KAAK,GAAG,CAA1B,CAAhB;MACA;IACD;EACD;;EAED,QAAQ,CAAC,CAAD,EAAG;IACV,IAAI,KAAK,GAAG,KAAK,YAAL,CAAkB,OAAlB,CAA0B,KAAK,WAA/B,CAAZ;;IAEA,IAAG,KAAK,MAAL,CAAY,kBAAZ,IAAkC,QAAlC,IAA+C,KAAK,MAAL,CAAY,kBAAZ,IAAkC,QAAlC,IAA8C,KAAK,GAAG,KAAK,YAAL,CAAkB,MAAlB,GAA2B,CAAnI,EAAsI;MACrI,CAAC,CAAC,wBAAF;MACA,CAAC,CAAC,eAAF;MACA,CAAC,CAAC,cAAF;;MAEA,IAAG,KAAK,GAAG,KAAK,YAAL,CAAkB,MAAlB,GAA2B,CAAtC,EAAwC;QACvC,IAAG,KAAK,IAAI,CAAC,CAAb,EAAe;UACd,KAAK,UAAL,CAAgB,KAAK,YAAL,CAAkB,CAAlB,CAAhB;QACA,CAFD,MAEK;UACJ,KAAK,UAAL,CAAgB,KAAK,YAAL,CAAkB,KAAK,GAAG,CAA1B,CAAhB;QACA;MACD;IACD;EACD;;EAED,QAAQ,CAAC,CAAD,EAAG;IACV,CAAC,CAAC,wBAAF;IACA,CAAC,CAAC,eAAF;IACA,CAAC,CAAC,cAAF;EACA;;EAED,SAAS,CAAC,CAAD,EAAG;IACX,IAAG,KAAK,MAAL,CAAY,YAAZ,IAA4B,KAAK,UAAL,KAAoB,QAAnD,EAA4D;MAC3D,KAAK,aAAL,CAAmB,IAAnB;IACA,CAFD,MAEK;MACJ,IAAG,KAAK,WAAR,EAAoB;QACnB,KAAK,WAAL,CAAiB,KAAK,WAAtB;MACA;IACD;EACD;;EAED,OAAO,CAAC,CAAD,EAAG;IACT,KAAK,OAAL;EACA;;EAED,WAAW,CAAC,CAAD,EAAG;IACb,IAAG,KAAK,MAAL,CAAY,YAAf,EAA4B;MAC9B;MACG,CAAC,CAAC,wBAAF;IACA;EACD;;EAED,gBAAgB,CAAC,CAAD,EAAG;IAClB,IAAG,CAAC,KAAK,MAAL,CAAY,YAAhB,EAA6B;MAC/B;MACG,CAAC,CAAC,cAAF,GAF4B,CAG/B;;MAEG,IAAG,CAAC,CAAC,OAAF,IAAa,EAAb,IAAmB,CAAC,CAAC,OAAF,IAAa,EAAnC,EAAsC;QACrC,KAAK,cAAL,CAAoB,CAAC,CAAC,OAAtB;MACA;IACD;EACD;;EAED,kBAAkB,CAAC,CAAD,EAAG;IACpB,KAAK,OAAL;;IACA,KAAK,UAAL,GAAkB,QAAlB;IACA,KAAK,MAAL,GAAc,IAAd;EACA;;EAGD,cAAc,CAAC,IAAD,EAAM;IACnB,YAAY,CAAC,KAAK,aAAN,CAAZ;IAEA,IAAI,SAAS,GAAG,MAAM,CAAC,YAAP,CAAoB,IAApB,EAA0B,WAA1B,EAAhB;IACA,KAAK,UAAL,IAAmB,SAAS,CAAC,WAAV,EAAnB;IAEA,IAAI,KAAK,GAAG,KAAK,YAAL,CAAkB,IAAlB,CAAwB,IAAD,IAAU;MAC5C,OAAO,OAAO,IAAI,CAAC,KAAZ,KAAsB,WAAtB,IAAqC,IAAI,CAAC,KAAL,CAAW,WAAX,GAAyB,UAAzB,CAAoC,KAAK,UAAzC,CAA5C;IACA,CAFW,CAAZ;;IAIA,IAAG,KAAH,EAAS;MACR,KAAK,UAAL,CAAgB,KAAhB;IACA;;IAED,KAAK,aAAL,GAAqB,UAAU,CAAC,MAAM;MACrC,KAAK,UAAL,GAAkB,EAAlB;IACA,CAF8B,EAE5B,GAF4B,CAA/B;EAGA;;EAED,UAAU,CAAC,IAAD,EAAM;IACf,KAAK,UAAL,GAAkB,OAAlB;;IAEA,IAAG,KAAK,WAAL,IAAoB,KAAK,WAAL,CAAiB,OAAxC,EAAgD;MAC/C,KAAK,WAAL,CAAiB,OAAjB,CAAyB,SAAzB,CAAmC,MAAnC,CAA0C,SAA1C;IACA;;IAED,KAAK,WAAL,GAAmB,IAAnB;;IAEA,IAAG,IAAI,IAAI,IAAI,CAAC,OAAhB,EAAwB;MACvB,IAAI,CAAC,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,SAA3B;MACA,IAAI,CAAC,OAAL,CAAa,cAAb,CAA4B;QAAC,QAAQ,EAAE,QAAX;QAAqB,KAAK,EAAE,SAA5B;QAAuC,MAAM,EAAE;MAA/C,CAA5B;IACA;EACD,CA5cuB,CA+czB;EACA;EACA;;;EACC,0BAA0B,GAAE;IAC3B,KAAK,gBAAL,CAAsB,IAAtB;EACA;;EAED,kBAAkB,GAAE;IACnB,KAAK,gBAAL,GACE,IADF,CACO,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CADP,EAEE,IAFF,CAEO,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAFP,EAGE,IAHF,CAGO,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAHP,EAIE,KAJF,CAIS,CAAD,IAAO;MACb,IAAG,CAAC,MAAM,CAAC,SAAP,CAAiB,CAAjB,CAAJ,EAAwB;QACvB,OAAO,CAAC,KAAR,CAAc,uBAAd,EAAuC,CAAvC;MACA;IACD,CARF;EASA;;EAED,WAAW,GAAE;IACZ,KAAK,UAAL,CAAgB,KAAK,cAAL,EAAhB;;IACA,KAAK,SAAL;EACA;;EAED,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAI,MAAM,GAAG,EAAb;IACA,IAAI,SAAS,GAAG,EAAG,KAAK,aAAxB;IAEA,KAAK,QAAL,GAAgB,KAAhB;;IAEA,IAAG,KAAK,MAAL,CAAY,MAAf,EAAsB;MACrB,MAAM,GAAG,KAAK,MAAL,CAAY,MAArB;IACA,CAFD,MAEM,IAAI,KAAK,MAAL,CAAY,SAAhB,EAA0B;MAC/B,MAAM,GAAG,KAAK,YAAL,CAAkB,KAAK,MAAL,CAAY,SAA9B,EAAyC,KAAK,KAAL,CAAW,KAApD,CAAT;IACA,CAFK,MAED;MACJ,IAAG,OAAO,KAAK,MAAL,CAAY,YAAnB,KAAoC,UAAvC,EAAkD;QACjD,MAAM,GAAG,KAAK,MAAL,CAAY,YAAZ,CAAyB,KAAK,IAA9B,EAAoC,KAAK,KAAL,CAAW,KAA/C,CAAT;MACA,CAFD,MAEM,IAAG,KAAK,MAAL,CAAY,YAAf,EAA4B;QACjC,MAAM,GAAG,KAAK,mBAAL,CAAyB,KAAK,MAAL,CAAY,iBAArC,CAAT;MACA;IACD;;IAED,IAAG,MAAM,YAAY,OAArB,EAA6B;MAC5B,IAAG,CAAC,MAAJ,EAAW;QACV,KAAK,eAAL,CAAqB,KAAK,MAAL,CAAY,kBAAjC;MACA;;MAED,OAAO,MAAM,CAAC,IAAP,GACL,IADK,CACC,cAAD,IAAoB;QACzB,IAAG,KAAK,aAAL,KAAuB,SAA1B,EAAoC;UACnC,OAAO,KAAK,UAAL,CAAgB,cAAhB,CAAP;QACA,CAFD,MAEK;UACJ,OAAO,OAAO,CAAC,MAAR,CAAe,SAAf,CAAP;QACA;MACD,CAPK,CAAP;IAQA,CAbD,MAaK;MACJ,OAAO,OAAO,CAAC,OAAR,CAAgB,KAAK,UAAL,CAAgB,MAAhB,CAAhB,CAAP;IACA;EACD;;EAED,eAAe,CAAC,QAAD,EAAU;IACxB,IAAI,WAAW,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAlB;;IAEA,IAAG,OAAO,QAAP,KAAoB,UAAvB,EAAkC;MACjC,QAAQ,GAAG,QAAQ,CAAC,KAAK,IAAL,CAAU,YAAV,EAAD,EAA2B,KAAK,MAAhC,CAAnB;IACA;;IAED,IAAG,QAAH,EAAY;MACX,KAAK,UAAL;;MAEA,IAAG,QAAQ,YAAY,WAAvB,EAAmC;QAClC,WAAW,GAAG,QAAd;MACA,CAFD,MAEK;QACJ,WAAW,CAAC,SAAZ,CAAsB,GAAtB,CAA0B,iCAA1B;QACA,WAAW,CAAC,SAAZ,GAAwB,QAAxB;MACA;;MAED,KAAK,MAAL,CAAY,WAAZ,CAAwB,WAAxB;;MAEA,KAAK,SAAL;IACA;EACD;;EAED,YAAY,CAAC,GAAD,EAAM,IAAN,EAAW;IACtB,IAAI,MAAM,GAAG,KAAK,MAAL,CAAY,YAAZ,GAA2B;MAAC,IAAI,EAAC;IAAN,CAA3B,GAAyC,EAAtD;IACA,GAAG,GAAG,UAAU,CAAC,GAAD,EAAM,EAAN,EAAU,MAAV,CAAhB;IAEA,OAAO,KAAK,CAAC,GAAD,CAAL,CACL,IADK,CACC,QAAD,IAAY;MACjB,IAAG,QAAQ,CAAC,EAAZ,EAAgB;QACf,OAAO,QAAQ,CAAC,IAAT,GACL,KADK,CACE,KAAD,IAAS;UACf,OAAO,CAAC,IAAR,CAAa,8CAAb,EAA6D,KAA7D;UACA,OAAO,OAAO,CAAC,MAAR,CAAe,KAAf,CAAP;QACA,CAJK,CAAP;MAKA,CAND,MAMK;QACJ,OAAO,CAAC,KAAR,CAAc,8CAA8C,QAAQ,CAAC,MAArE,EAA6E,QAAQ,CAAC,UAAtF;QACA,OAAO,OAAO,CAAC,MAAR,CAAe,QAAf,CAAP;MACA;IACD,CAZK,EAaL,KAbK,CAaE,KAAD,IAAS;MACf,OAAO,CAAC,KAAR,CAAc,2CAAd,EAA2D,KAA3D;MACA,OAAO,OAAO,CAAC,MAAR,CAAe,KAAf,CAAP;IACA,CAhBK,CAAP;EAiBA;;EAED,mBAAmB,CAAC,KAAD,EAAO;IACzB,IAAI,MAAM,GAAG,EAAb;IAAA,IACA,IAAI,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,KAAK,MAAL,CAAY,YAA/B,CADP;IAAA,IAEA,MAFA;;IAIA,IAAG,KAAH,EAAS;MACR,MAAM,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,gBAAzB,CAA0C,KAA1C,CAAT;IACA,CAFD,MAEK;MACJ,MAAM,GAAG,KAAK,IAAL,CAAU,SAAV,GAAsB,QAAtB,EAAT;IACA;;IAED,IAAG,MAAH,EAAU;MACT,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;QACrB,IAAI,GAAG,GAAG,MAAM,CAAC,aAAP,CAAqB,GAArB,CAAV;;QAEA,IAAG,GAAG,KAAK,IAAR,IAAgB,OAAO,GAAP,KAAe,WAA/B,IAA8C,GAAG,KAAK,EAAzD,EAA4D;UAC3D,MAAM,CAAC,GAAD,CAAN,GAAc,IAAd;QACA;MACD,CAND;IAOA,CARD,MAQK;MACJ,OAAO,CAAC,IAAR,CAAa,8DAAb,EAA6E,KAA7E;MACA,MAAM,GAAG,EAAT;IACA;;IAED,OAAO,MAAM,CAAC,IAAP,CAAY,MAAZ,CAAP;EACA;;EAGD,UAAU,CAAC,WAAD,EAAa;IACtB,IAAI,IAAI,GAAG,EAAX;;IAEA,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,WAAd,CAAJ,EAA+B;MAC9B,WAAW,GAAG,MAAM,CAAC,OAAP,CAAe,WAAf,EAA4B,GAA5B,CAAgC,CAAC,CAAC,GAAD,EAAM,KAAN,CAAD,KAAkB;QAC/D,OAAO;UACN,KAAK,EAAC,KADA;UAEN,KAAK,EAAC;QAFA,CAAP;MAIA,CALa,CAAd;IAMA;;IAED,WAAW,CAAC,OAAZ,CAAqB,KAAD,IAAW;MAC9B,IAAG,OAAO,KAAP,KAAiB,QAApB,EAA6B;QAC5B,KAAK,GAAG;UACP,KAAK,EAAC,KADC;UAEP,KAAK,EAAC;QAFC,CAAR;MAIA;;MAED,KAAK,cAAL,CAAoB,KAApB,EAA2B,IAA3B,EAAiC,CAAjC;IACA,CATD;;IAWA,IAAG,CAAC,KAAK,YAAL,CAAkB,MAAnB,IAA6B,KAAK,MAAL,CAAY,QAA5C,EAAqD;MACpD,KAAK,KAAL,CAAW,KAAX,GAAmB,KAAK,aAAxB;MACA,KAAK,MAAL,GAAc,IAAd;MACA,KAAK,UAAL,GAAkB,QAAlB;IACA;;IAED,KAAK,IAAL,GAAY,IAAZ;IAEA,OAAO,IAAP;EACA;;EAED,cAAc,CAAC,MAAD,EAAS,IAAT,EAAe,KAAf,EAAqB;IAClC,IAAI,IAAI,GAAG,EAAX;;IAEA,IAAG,MAAM,CAAC,OAAV,EAAkB;MACjB,IAAI,GAAG,KAAK,eAAL,CAAqB,MAArB,EAA6B,KAAK,GAAG,CAArC,CAAP;IACA,CAFD,MAEK;MACJ,IAAI,GAAG;QACN,KAAK,EAAC,MAAM,CAAC,KADP;QAEN,KAAK,EAAC,MAAM,CAAC,KAFP;QAGN,UAAU,EAAC,MAAM,CAAC,UAHZ;QAIN,iBAAiB,EAAE,MAAM,CAAC,iBAJpB;QAKN,OAAO,EAAC,KALF;QAMN,QAAQ,EAAC,KANH;QAON,OAAO,EAAC,IAPF;QAQN,KAAK,EAAC,KARA;QASN,QAAQ,EAAC;MATH,CAAP;;MAYA,IAAG,KAAK,aAAL,IAAsB,KAAK,aAAL,CAAmB,OAAnB,CAA2B,MAAM,CAAC,KAAlC,IAA2C,CAAC,CAArE,EAAuE;QACtE,KAAK,WAAL,CAAiB,IAAjB,EAAuB,IAAvB;MACA;IACD;;IAED,IAAI,CAAC,IAAL,CAAU,IAAV;EACA;;EAED,eAAe,CAAC,MAAD,EAAS,KAAT,EAAe;IAC7B,IAAI,IAAI,GAAG;MACV,KAAK,EAAC,MAAM,CAAC,KADH;MAEV,KAAK,EAAC,IAFI;MAGV,UAAU,EAAC,MAAM,CAAC,UAHR;MAIV,iBAAiB,EAAC,MAAM,CAAC,iBAJf;MAKV,OAAO,EAAC,KALE;MAMV,OAAO,EAAC,IANE;MAOV,KAAK,EAAC,KAPI;MAQV,OAAO,EAAC,EARE;MASV,QAAQ,EAAC;IATC,CAAX;IAYA,MAAM,CAAC,OAAP,CAAe,OAAf,CAAwB,KAAD,IAAW;MACjC,KAAK,cAAL,CAAoB,KAApB,EAA2B,IAAI,CAAC,OAAhC,EAAyC,KAAzC;IACA,CAFD;IAIA,OAAO,IAAP;EACA;;EAED,YAAY,CAAC,OAAD,EAAS;IACpB,IAAI,MAAJ;;IAEA,IAAG,KAAK,MAAL,CAAY,IAAf,EAAoB;MACnB,MAAM,GAAG,OAAO,KAAK,MAAL,CAAY,IAAnB,KAA4B,UAA5B,GAAyC,KAAK,MAAL,CAAY,IAArD,GAA4D,KAAK,oBAAL,CAA0B,IAA1B,CAA+B,IAA/B,CAArE;;MAEA,KAAK,UAAL,CAAgB,MAAhB,EAAwB,OAAxB;IACA;;IAED,OAAO,OAAP;EACA;;EAED,UAAU,CAAC,MAAD,EAAS,OAAT,EAAiB;IAC1B,OAAO,CAAC,IAAR,CAAa,CAAC,CAAD,EAAG,CAAH,KAAS;MACrB,OAAO,MAAM,CAAC,CAAC,CAAC,KAAH,EAAU,CAAC,CAAC,KAAZ,EAAmB,CAAC,CAAC,KAArB,EAA4B,CAAC,CAAC,KAA9B,EAAqC,CAAC,CAAC,QAAvC,EAAiD,CAAC,CAAC,QAAnD,CAAb;IACA,CAFD;IAIA,OAAO,CAAC,OAAR,CAAiB,MAAD,IAAY;MAC3B,IAAG,MAAM,CAAC,KAAV,EAAgB;QACf,KAAK,UAAL,CAAgB,MAAhB,EAAwB,MAAM,CAAC,OAA/B;MACA;IACD,CAJD;EAKA;;EAED,oBAAoB,CAAC,EAAD,EAAK,EAAL,EAAQ;IAC3B,IAAI,CAAJ;IAAA,IAAO,CAAP;IAAA,IAAU,EAAV;IAAA,IAAc,EAAd;IAAA,IAAkB,CAAC,GAAE,CAArB;IAAA,IAAwB,CAAxB;IAAA,IAA2B,EAAE,GAAG,cAAhC;IAAA,IAAgD,EAAE,GAAG,IAArD;IACA,IAAI,UAAU,GAAG,CAAjB;;IAEA,IAAG,KAAK,MAAL,CAAY,IAAZ,KAAqB,MAAxB,EAA+B;MAC9B,CAAC,EAAD,EAAK,EAAL,IAAW,CAAC,EAAD,EAAK,EAAL,CAAX;IACA,CAN0B,CAQ7B;;;IACE,IAAG,CAAC,EAAD,IAAO,EAAE,KAAI,CAAhB,EAAkB;MACjB,UAAU,GAAI,CAAC,EAAD,IAAO,EAAE,KAAI,CAAb,GAAiB,CAAjB,GAAqB,CAAC,CAApC;IACA,CAFD,MAEM,IAAG,CAAC,EAAD,IAAO,EAAE,KAAI,CAAhB,EAAkB;MACvB,UAAU,GAAI,CAAd;IACA,CAFK,MAED;MACJ,IAAG,QAAQ,CAAC,EAAD,CAAR,IAAgB,QAAQ,CAAC,EAAD,CAA3B,EAAiC,OAAO,EAAE,GAAG,EAAZ;MACjC,CAAC,GAAG,MAAM,CAAC,EAAD,CAAN,CAAW,WAAX,EAAJ;MACA,CAAC,GAAG,MAAM,CAAC,EAAD,CAAN,CAAW,WAAX,EAAJ;MACA,IAAG,CAAC,KAAK,CAAT,EAAY,OAAO,CAAP;MACZ,IAAG,EAAE,EAAE,CAAC,IAAH,CAAQ,CAAR,KAAc,EAAE,CAAC,IAAH,CAAQ,CAAR,CAAhB,CAAH,EAAgC,OAAO,CAAC,GAAG,CAAJ,GAAQ,CAAR,GAAY,CAAC,CAApB;MAChC,CAAC,GAAG,CAAC,CAAC,KAAF,CAAQ,EAAR,CAAJ;MACA,CAAC,GAAG,CAAC,CAAC,KAAF,CAAQ,EAAR,CAAJ;MACA,CAAC,GAAG,CAAC,CAAC,MAAF,GAAW,CAAC,CAAC,MAAb,GAAsB,CAAC,CAAC,MAAxB,GAAiC,CAAC,CAAC,MAAvC;;MACA,OAAM,CAAC,GAAG,CAAV,EAAY;QACX,EAAE,GAAE,CAAC,CAAC,CAAD,CAAL;QACA,EAAE,GAAE,CAAC,CAAC,CAAC,EAAF,CAAL;;QACA,IAAG,EAAE,KAAK,EAAV,EAAa;UACZ,IAAG,QAAQ,CAAC,EAAD,CAAR,IAAgB,QAAQ,CAAC,EAAD,CAA3B,EAAgC;YAC/B,IAAG,EAAE,CAAC,MAAH,CAAU,CAAV,MAAiB,GAApB,EAAyB,EAAE,GAAG,MAAM,EAAX;YACzB,IAAG,EAAE,CAAC,MAAH,CAAU,CAAV,MAAiB,GAApB,EAAyB,EAAE,GAAG,MAAM,EAAX;YACzB,OAAO,EAAE,GAAG,EAAZ;UACA,CAJD,MAKK,OAAO,EAAE,GAAG,EAAL,GAAU,CAAV,GAAc,CAAC,CAAtB;QACL;MACD;;MAED,OAAO,CAAC,CAAC,MAAF,GAAW,CAAC,CAAC,MAApB;IACA;;IAED,OAAO,UAAP;EACA;;EAED,cAAc,GAAE;IACf,IAAI,UAAU,GAAG,KAAK,MAAL,CAAY,UAAZ,IAA0B,KAAK,kBAAhD;IAAA,IACA,IAAI,GAAG,KAAK,KAAL,CAAW,KADlB;;IAGA,IAAG,IAAH,EAAQ;MACP,KAAK,QAAL,GAAgB,IAAhB;MAEA,KAAK,IAAL,CAAU,OAAV,CAAmB,IAAD,IAAU;QAC3B,KAAK,WAAL,CAAiB,UAAjB,EAA6B,IAA7B,EAAmC,IAAnC;MACA,CAFD;IAGA,CAND,MAMK;MACJ,KAAK,QAAL,GAAgB,KAAhB;IACA;;IAED,OAAO,KAAK,IAAZ;EACA;;EAED,WAAW,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAkB;IAC5B,IAAI,OAAO,GAAG,KAAd;;IAEA,IAAG,CAAC,IAAI,CAAC,KAAT,EAAe;MACd,IAAI,CAAC,OAAL,GAAe,IAAI,CAAC,IAAD,EAAO,IAAI,CAAC,KAAZ,EAAmB,IAAI,CAAC,KAAxB,EAA+B,IAAI,CAAC,QAApC,CAAnB;IACA,CAFD,MAEK;MACJ,IAAI,CAAC,OAAL,CAAa,OAAb,CAAsB,MAAD,IAAY;QAChC,IAAG,KAAK,WAAL,CAAiB,IAAjB,EAAuB,IAAvB,EAA6B,MAA7B,CAAH,EAAwC;UACvC,OAAO,GAAG,IAAV;QACA;MACD,CAJD;MAMA,IAAI,CAAC,OAAL,GAAe,OAAf;IACA;;IAED,OAAO,IAAI,CAAC,OAAZ;EACA;;EAED,kBAAkB,CAAC,IAAD,EAAO,KAAP,EAAc,KAAd,EAAqB,IAArB,EAA0B;IAC3C,IAAI,GAAG,MAAM,CAAC,IAAD,CAAN,CAAa,WAAb,EAAP;;IAEA,IAAG,KAAK,KAAK,IAAV,IAAkB,OAAO,KAAP,KAAiB,WAAtC,EAAkD;MACjD,IAAG,MAAM,CAAC,KAAD,CAAN,CAAc,WAAd,GAA4B,OAA5B,CAAoC,IAApC,IAA4C,CAAC,CAA7C,IAAkD,MAAM,CAAC,KAAD,CAAN,CAAc,WAAd,GAA4B,OAA5B,CAAoC,IAApC,IAA4C,CAAC,CAAlG,EAAoG;QACnG,OAAO,IAAP;MACA;IACD;;IAED,OAAO,KAAP;EACA,CAnxBuB,CAqxBzB;EACA;EACA;;;EAEC,UAAU,GAAE;IACX,OAAM,KAAK,MAAL,CAAY,UAAlB,EAA8B,KAAK,MAAL,CAAY,WAAZ,CAAwB,KAAK,MAAL,CAAY,UAApC;;IAE9B,KAAK,YAAL,GAAoB,EAApB;EACA;;EAED,UAAU,CAAC,IAAD,EAAM;IACf,KAAK,UAAL;;IAEA,IAAI,CAAC,OAAL,CAAc,MAAD,IAAY;MACxB,KAAK,UAAL,CAAgB,MAAhB;IACA,CAFD;;IAIA,IAAG,CAAC,KAAK,YAAL,CAAkB,MAAtB,EAA6B;MAC5B,KAAK,eAAL,CAAqB,KAAK,MAAL,CAAY,gBAAjC;IACA;EACD;;EAED,UAAU,CAAC,IAAD,EAAM;IACf,IAAI,EAAE,GAAG,IAAI,CAAC,OAAd;IAAA,IACA,QADA;;IAGA,IAAG,CAAC,KAAK,QAAN,IAAkB,IAAI,CAAC,OAA1B,EAAkC;MAEjC,IAAG,CAAC,EAAJ,EAAO;QACN,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAL;QACA,EAAE,CAAC,QAAH,GAAc,CAAd;QAEA,QAAQ,GAAG,KAAK,MAAL,CAAY,aAAZ,GAA4B,KAAK,MAAL,CAAY,aAAZ,CAA0B,IAAI,CAAC,KAA/B,EAAsC,IAAI,CAAC,KAA3C,EAAkD,IAAI,CAAC,QAAvD,EAAiE,EAAjE,CAA5B,GAAmG,IAAI,CAAC,KAAnH;;QAEA,IAAG,QAAQ,YAAY,WAAvB,EAAmC;UAClC,EAAE,CAAC,WAAH,CAAe,QAAf;QACA,CAFD,MAEK;UACJ,EAAE,CAAC,SAAH,GAAe,QAAf;QACA;;QAED,IAAG,IAAI,CAAC,KAAR,EAAc;UACb,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,2BAAjB;QACA,CAFD,MAEK;UACJ,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,0BAAjB;QACA;;QAED,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,qCAAqC,IAAI,CAAC,KAA3D;;QAEA,IAAG,IAAI,CAAC,iBAAL,IAA0B,OAAO,IAAI,CAAC,iBAAZ,IAAiC,QAA9D,EAAuE;UACtE,KAAK,IAAI,GAAT,IAAgB,IAAI,CAAC,iBAArB,EAAuC;YACtC,IAAG,GAAG,CAAC,MAAJ,CAAW,CAAX,KAAiB,GAApB,EAAwB;cACvB,GAAG,GAAG,GAAG,CAAC,KAAJ,CAAU,CAAV,CAAN;cACA,EAAE,CAAC,YAAH,CAAgB,GAAhB,EAAqB,KAAK,KAAL,CAAW,YAAX,CAAwB,GAAxB,IAA+B,IAAI,CAAC,iBAAL,CAAuB,MAAM,GAA7B,CAApD;YACA,CAHD,MAGK;cACJ,EAAE,CAAC,YAAH,CAAgB,GAAhB,EAAqB,IAAI,CAAC,iBAAL,CAAuB,GAAvB,CAArB;YACA;UACD;QACD;;QAED,IAAG,IAAI,CAAC,KAAR,EAAc;UACb,EAAE,CAAC,gBAAH,CAAoB,OAApB,EAA6B,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,EAA4B,IAA5B,CAA7B;QACA,CAFD,MAEK;UACJ,EAAE,CAAC,gBAAH,CAAoB,OAApB,EAA6B,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,EAA2B,IAA3B,CAA7B;QACA;;QAED,EAAE,CAAC,gBAAH,CAAoB,WAApB,EAAiC,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAjC;QAEA,IAAI,CAAC,OAAL,GAAe,EAAf;MACA;;MAED,KAAK,UAAL,CAAgB,IAAhB;;MAEA,KAAK,MAAL,CAAY,WAAZ,CAAwB,EAAxB;;MAEA,IAAG,IAAI,CAAC,KAAR,EAAc;QACb,IAAI,CAAC,OAAL,CAAa,OAAb,CAAsB,MAAD,IAAY;UAChC,KAAK,UAAL,CAAgB,MAAhB;QACA,CAFD;MAGA,CAJD,MAIK;QACJ,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB;MACA;IACD;EACD;;EAED,SAAS,GAAE;IACV,IAAI,QAAQ,GAAG,KAAK,KAAL,IAAc,KAAK,KAAL,CAAW,SAAX,EAA7B;;IAEA,IAAG,KAAK,KAAL,CAAW,UAAd,EAAyB;MACxB,IAAG,KAAK,MAAL,CAAY,YAAZ,IAA4B,KAAK,KAAL,CAAW,KAAX,KAAqB,EAAjD,IAAuD,CAAC,KAAK,MAAL,CAAY,WAAvE,EAAmF;QAClF,IAAG,KAAK,KAAR,EAAc;UACb,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB;QACA;;QACD;MACA;;MAED,KAAK,aAAL;;MAEA,IAAG,CAAC,KAAK,KAAT,EAAe;QACd,KAAK,KAAL,GAAa,KAAK,IAAL,CAAU,KAAV,CAAgB,KAAK,MAArB,CAAb;MACA;;MAED,KAAK,KAAL,CAAW,IAAX,CAAgB,KAAK,IAAL,CAAU,UAAV,EAAhB,EAAwC,QAAxC;;MAEA,IAAG,CAAC,QAAJ,EAAa;QACZ,UAAU,CAAC,MAAM;UAChB,KAAK,KAAL,CAAW,UAAX,CAAsB,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,EAA8B,IAA9B,CAAtB;QACA,CAFS,EAEP,EAFO,CAAV;MAGA;IACD;EACD;;EAED,UAAU,CAAC,IAAD,EAAM;IACf,IAAG,IAAI,IAAI,IAAI,CAAC,OAAhB,EAAwB;MACvB,IAAG,IAAI,CAAC,QAAR,EAAiB;QAChB,IAAI,CAAC,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,QAA3B;MACA,CAFD,MAEK;QACJ,IAAI,CAAC,OAAL,CAAa,SAAb,CAAuB,MAAvB,CAA8B,QAA9B;MACA;IACD;EACD,CA54BuB,CA84BzB;EACA;EACA;;;EAEC,UAAU,CAAC,IAAD,EAAO,CAAP,EAAS;IAClB,CAAC,CAAC,eAAF;;IAEA,KAAK,WAAL,CAAiB,IAAjB;EACA;;EAED,WAAW,CAAC,IAAD,EAAO,CAAP,EAAS;IACnB,CAAC,CAAC,eAAF;EACA,CA15BuB,CA65BzB;EACA;EACA;;;EAEC,OAAO,GAAE;IACR,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB;IACA,KAAK,OAAL,CAAa,MAAb;EACA;;EAED,aAAa,GAAE;IACd,KAAK,MAAL,GAAc,IAAd;IAEA,KAAK,YAAL,CAAkB,OAAlB,CAA2B,IAAD,IAAU;MACnC,IAAI,CAAC,QAAL,GAAgB,KAAhB;;MACA,KAAK,UAAL,CAAgB,IAAhB;IACA,CAHD;IAKA,KAAK,YAAL,GAAoB,EAApB;IAEA,KAAK,WAAL,GAAmB,IAAnB;EACA;;EAED,WAAW,CAAC,IAAD,EAAO,MAAP,EAAc;IACxB,IAAI,KAAJ;IAEA,KAAK,MAAL,GAAc,KAAd;;IAEA,IAAG,KAAK,MAAL,CAAY,WAAf,EAA2B;MAC1B,KAAK,GAAG,KAAK,YAAL,CAAkB,OAAlB,CAA0B,IAA1B,CAAR;;MAEA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;QACb,KAAK,YAAL,CAAkB,MAAlB,CAAyB,KAAzB,EAAgC,CAAhC;QACA,IAAI,CAAC,QAAL,GAAgB,KAAhB;MACA,CAHD,MAGK;QACJ,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB;QACA,IAAI,CAAC,QAAL,GAAgB,IAAhB;MACA;;MAED,KAAK,KAAL,CAAW,KAAX,GAAmB,KAAK,YAAL,CAAkB,GAAlB,CAAsB,IAAI,IAAI,IAAI,CAAC,KAAnC,EAA0C,IAA1C,CAA+C,GAA/C,CAAnB;;MAEA,KAAK,UAAL,CAAgB,IAAhB;IAEA,CAfD,MAeK;MACJ,KAAK,YAAL,GAAoB,CAAC,IAAD,CAApB;MACA,IAAI,CAAC,QAAL,GAAgB,IAAhB;MAEA,KAAK,KAAL,CAAW,KAAX,GAAmB,IAAI,CAAC,KAAxB;;MAEA,KAAK,UAAL,CAAgB,IAAhB;;MAEA,IAAG,CAAC,MAAJ,EAAW;QACV,KAAK,aAAL;MACA;IACD;;IAED,KAAK,UAAL,CAAgB,IAAhB;EACA;;EAED,aAAa,CAAC,IAAD,EAAM;IAClB,IAAI,MAAJ,EAAY,YAAZ;;IAEA,IAAG,KAAK,KAAR,EAAc;MACb,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB;IACA;;IAED,IAAG,KAAK,MAAL,CAAY,WAAf,EAA2B;MAC1B,MAAM,GAAG,KAAK,YAAL,CAAkB,GAAlB,CAAsB,IAAI,IAAI,IAAI,CAAC,KAAnC,CAAT;IACA,CAFD,MAEK;MACJ,IAAG,IAAI,IAAI,KAAK,MAAL,CAAY,YAApB,IAAoC,KAAK,MAA5C,EAAmD;QAClD,IAAG,KAAK,MAAL,CAAY,QAAZ,IAAyB,KAAK,MAAL,CAAY,UAAZ,IAA0B,KAAK,KAAL,CAAW,KAAX,KAAqB,EAA3E,EAA+E;UAC9E,MAAM,GAAG,KAAK,KAAL,CAAW,KAApB;QACA,CAFD,MAEK;UACJ,KAAK,OAAL,CAAa,MAAb;UACA;QACA;MACD,CAPD,MAOK;QACJ,IAAG,KAAK,YAAL,CAAkB,CAAlB,CAAH,EAAwB;UACvB,MAAM,GAAG,KAAK,YAAL,CAAkB,CAAlB,EAAqB,KAA9B;QACA,CAFD,MAEK;UACJ,YAAY,GAAG,KAAK,aAAL,CAAmB,CAAnB,CAAf;;UAEA,IAAG,YAAY,KAAK,IAAjB,IAAyB,OAAO,YAAP,KAAwB,WAAjD,IAAgE,YAAY,KAAK,EAApF,EAAuF;YACtF,MAAM,GAAG,YAAT;UACA,CAFD,MAEK;YACJ,MAAM,GAAG,KAAK,MAAL,CAAY,UAArB;UACA;QACD;MAED;IACD;;IAED,IAAG,MAAM,KAAK,EAAd,EAAiB;MAChB,MAAM,GAAG,KAAK,MAAL,CAAY,UAArB;IACA;;IAED,KAAK,OAAL,CAAa,OAAb,CAAqB,MAArB;;IAEA,IAAG,KAAK,QAAR,EAAiB;MAChB,KAAK,aAAL,GAAqB,MAAM,IAAI,CAAC,KAAK,CAAC,OAAN,CAAc,MAAd,CAAX,GAAmC,CAAC,MAAD,CAAnC,GAA8C,MAAnE;MACA,KAAK,YAAL,GAAoB,EAApB;IACA;EACD;;AAlgCuB;;ACDV,SAAA,MAAA,CAAS,IAAT,EAAe,UAAf,EAA2B,OAA3B,EAAoC,MAApC,EAA4C,YAA5C,EAAyD;EAEvE,KAAK,cAAL,CAAoB,uEAApB;EAEA,IAAI,IAAI,GAAG,IAAI8/B,IAAJ,CAAS,IAAT,EAAe,IAAf,EAAqB,UAArB,EAAiC,OAAjC,EAA0C,MAA1C,EAAkD,YAAlD,CAAX;EAEA,OAAO,IAAI,CAAC,KAAZ;AACD;;ACPe,SAAA,IAAA,CAAS,IAAT,EAAe,UAAf,EAA2B,OAA3B,EAAoC,MAApC,EAA4C,YAA5C,EAAyD;EACvE,IAAI,IAAI,GAAG,IAAIA,IAAJ,CAAS,IAAT,EAAe,IAAf,EAAqB,UAArB,EAAiC,OAAjC,EAA0C,MAA1C,EAAkD,YAAlD,CAAX;EAEA,OAAO,IAAI,CAAC,KAAZ;AACD;;ACJe,SAAA,YAAA,CAAS,IAAT,EAAe,UAAf,EAA2B,OAA3B,EAAoC,MAApC,EAA4C,YAA5C,EAAyD;EAEvE,KAAK,cAAL,CAAoB,iHAApB;EAEA,YAAY,CAAC,YAAb,GAA4B,IAA5B;EAEA,IAAI,IAAI,GAAG,IAAIA,IAAJ,CAAS,IAAT,EAAe,IAAf,EAAqB,UAArB,EAAiC,OAAjC,EAA0C,MAA1C,EAAkD,YAAlD,CAAX;EAEA,OAAO,IAAI,CAAC,KAAZ;AACD,ECXA;;;AACe,SAAA,IAAA,CAAS,IAAT,EAAe,UAAf,EAA2B,OAA3B,EAAoC,MAApC,EAA4C,YAA5C,EAAyD;EACvE,IAAI,IAAI,GAAG,IAAX;EAAA,IACA,OAAO,GAAG,IAAI,CAAC,UAAL,EADV;EAAA,IAEA,KAAK,GAAG,IAAI,CAAC,QAAL,EAFR;EAAA,IAGA,QAAQ,GAAG,OAAO,CAAC,oBAAR,CAA6B,KAA7B,EAAoC,MAApC,IAA8C,CAHzD;EAAA,IAIA,IAAI,GAAG,OAAO,CAAC,oBAAR,CAA6B,KAA7B,EAAoC,CAApC,IAAyC,OAAO,CAAC,oBAAR,CAA6B,KAA7B,EAAoC,CAApC,EAAuC,YAAvC,CAAoD,OAApD,CAAzC,GAAwG,EAJ/G;EAAA,IAKA,KAAK,GAAG,EALR;EAAA,IAMA,WAAW,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CANd;EAAA,IAOA,IAAI,GAAG,QAAQ,CAAC,eAAT,CAAyB,4BAAzB,EAAuD,KAAvD,CAPP,CADuE,CAWxE;;EACC,SAAS,UAAT,CAAoB,GAApB,EAAwB;IACvB,KAAK,CAAC,OAAN,CAAc,UAAS,IAAT,EAAe,CAAf,EAAiB;MAC9B,IAAG,CAAC,GAAG,GAAP,EAAW;QACV,IAAG,IAAI,CAAC,KAAL,CAAW,OAAX,IAAsB,IAAzB,EAA8B;UAC7B,IAAI,CAAC,YAAL,CAAkB,OAAlB,EAA2B,uBAA3B;QACA,CAFD,MAEK;UACJ,IAAI,CAAC,SAAL,CAAe,OAAf,CAAuB,yBAAvB,EAAkD,uBAAlD;QACA;;QAED,IAAI,CAAC,SAAL,GAAiB,ySAAjB;MACA,CARD,MAQK;QACJ,IAAG,IAAI,CAAC,KAAL,CAAW,OAAX,IAAsB,IAAzB,EAA8B;UAC7B,IAAI,CAAC,YAAL,CAAkB,OAAlB,EAA2B,yBAA3B;QACA,CAFD,MAEK;UACJ,IAAI,CAAC,SAAL,CAAe,OAAf,CAAuB,uBAAvB,EAAgD,yBAAhD;QACA;;QAED,IAAI,CAAC,SAAL,GAAiB,ySAAjB;MACA;IACD,CAlBD;EAmBA,CAhCsE,CAkCxE;;;EACC,SAAS,SAAT,CAAmB,CAAnB,EAAqB;IAEpB,IAAI,UAAU,GAAI,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAlB;IACA,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAL,CAAe,IAAf,CAAf;IAEA,KAAK,CAAC,IAAN,CAAW,QAAX;IAEA,UAAU,CAAC,gBAAX,CAA4B,YAA5B,EAA0C,UAAS,CAAT,EAAW;MACpD,CAAC,CAAC,eAAF;MACA,CAAC,CAAC,wBAAF;MACA,UAAU,CAAC,CAAD,CAAV;IACA,CAJD;IAMA,UAAU,CAAC,gBAAX,CAA4B,WAA5B,EAAyC,UAAS,CAAT,EAAW;MACnD,CAAC,CAAC,eAAF;MACA,CAAC,CAAC,wBAAF;IACA,CAHD;IAKA,UAAU,CAAC,gBAAX,CAA4B,OAA5B,EAAqC,UAAS,CAAT,EAAW;MAC/C,CAAC,CAAC,eAAF;MACA,CAAC,CAAC,wBAAF;MACA,OAAO,CAAC,CAAD,CAAP;MACA,OAAO,CAAC,IAAR;IACA,CALD;IAOA,UAAU,CAAC,WAAX,CAAuB,QAAvB;IACA,WAAW,CAAC,WAAZ,CAAwB,UAAxB;EAEA,CA/DsE,CAiExE;;;EACC,SAAS,WAAT,CAAqB,GAArB,EAAyB;IACxB,KAAK,GAAG,GAAR;IACA,UAAU,CAAC,GAAD,CAAV;EACA,CArEsE,CAuExE;;;EACC,OAAO,CAAC,KAAR,CAAc,UAAd,GAA2B,QAA3B;EACA,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,QAAzB;EACA,OAAO,CAAC,KAAR,CAAc,YAAd,GAA6B,UAA7B,CA1EuE,CA4ExE;;EACC,WAAW,CAAC,KAAZ,CAAkB,aAAlB,GAAkC,QAAlC;EACA,WAAW,CAAC,KAAZ,CAAkB,OAAlB,GAA4B,cAA5B;EACA,WAAW,CAAC,KAAZ,CAAkB,OAAlB,GAA4B,KAA5B,CA/EuE,CAiFxE;;EACC,IAAI,CAAC,YAAL,CAAkB,OAAlB,EAA2B,IAA3B;EACA,IAAI,CAAC,YAAL,CAAkB,QAAlB,EAA4B,IAA5B;EACA,IAAI,CAAC,YAAL,CAAkB,SAAlB,EAA6B,aAA7B;EACA,IAAI,CAAC,YAAL,CAAkB,WAAlB,EAA+B,UAA/B;EACA,IAAI,CAAC,KAAL,CAAW,OAAX,GAAqB,OAArB;;EAEA,IAAG,YAAY,CAAC,iBAAb,IAAkC,OAAO,YAAY,CAAC,iBAApB,IAAyC,QAA9E,EAAuF;IACtF,KAAK,IAAI,GAAT,IAAgB,YAAY,CAAC,iBAA7B,EAA+C;MAC9C,IAAG,GAAG,CAAC,MAAJ,CAAW,CAAX,KAAiB,GAApB,EAAwB;QACvB,GAAG,GAAG,GAAG,CAAC,KAAJ,CAAU,CAAV,CAAN;QACA,WAAW,CAAC,YAAZ,CAAyB,GAAzB,EAA8B,WAAW,CAAC,YAAZ,CAAyB,GAAzB,IAAgC,YAAY,CAAC,iBAAb,CAA+B,MAAM,GAArC,CAA9D;MACA,CAHD,MAGK;QACJ,WAAW,CAAC,YAAZ,CAAyB,GAAzB,EAA8B,YAAY,CAAC,iBAAb,CAA+B,GAA/B,CAA9B;MACA;IACD;EACD,CAjGsE,CAmGxE;;;EACC,KAAI,IAAI,CAAC,GAAC,CAAV,EAAY,CAAC,IAAG,QAAhB,EAAyB,CAAC,EAA1B,EAA6B;IAC5B,SAAS,CAAC,CAAD,CAAT;EACA,CAtGsE,CAwGxE;;;EACC,KAAK,GAAG,IAAI,CAAC,GAAL,CAAS,QAAQ,CAAC,KAAD,CAAjB,EAA0B,QAA1B,CAAR,CAzGuE,CA2GxE;;EACC,UAAU,CAAC,KAAD,CAAV;EAEA,WAAW,CAAC,gBAAZ,CAA6B,WAA7B,EAA0C,UAAS,CAAT,EAAW;IACpD,UAAU,CAAC,CAAD,CAAV;EACA,CAFD;EAIA,WAAW,CAAC,gBAAZ,CAA6B,OAA7B,EAAsC,UAAS,CAAT,EAAW;IAChD,OAAO,CAAC,CAAD,CAAP;EACA,CAFD;EAIA,OAAO,CAAC,gBAAR,CAAyB,MAAzB,EAAiC,UAAS,CAAT,EAAW;IAC3C,MAAM;EACN,CAFD,EAtHuE,CA0HxE;;EACC,OAAO,CAAC,gBAAR,CAAyB,SAAzB,EAAoC,UAAS,CAAT,EAAW;IAC9C,QAAO,CAAC,CAAC,OAAT;MACC,KAAK,EAAL;QAAO;QACN,WAAW,CAAC,KAAK,GAAG,CAAT,CAAX;QACA;;MAED,KAAK,EAAL;QAAO;QACN,WAAW,CAAC,KAAK,GAAG,CAAT,CAAX;QACA;;MAED,KAAK,EAAL;QAAO;QACN,OAAO,CAAC,KAAD,CAAP;QACA;;MAED,KAAK,EAAL;QAAO;QACN,MAAM;QACN;IAfF;EAiBA,CAlBD;EAoBA,OAAO,WAAP;AACD,ECjJA;;;AACe,SAAA,QAAA,CAAS,IAAT,EAAe,UAAf,EAA2B,OAA3B,EAAoC,MAApC,EAA4C,YAA5C,EAAyD;EACvE,IAAI,OAAO,GAAG,IAAI,CAAC,UAAL,EAAd;EAAA,IACA,GAAG,GAAG,OAAO,YAAY,CAAC,GAApB,KAA4B,WAA5B,GAA4C,OAAO,CAAC,oBAAR,CAA6B,KAA7B,EAAoC,CAApC,KAA0C,OAAO,CAAC,oBAAR,CAA6B,KAA7B,EAAoC,CAApC,EAAuC,YAAvC,CAAoD,KAApD,CAA3C,IAA0G,GAArJ,GAA4J,YAAY,CAAC,GAD/K;EAAA,IAEA,GAAG,GAAG,OAAO,YAAY,CAAC,GAApB,KAA4B,WAA5B,GAA4C,OAAO,CAAC,oBAAR,CAA6B,KAA7B,EAAoC,CAApC,KAA0C,OAAO,CAAC,oBAAR,CAA6B,KAA7B,EAAoC,CAApC,EAAuC,YAAvC,CAAoD,KAApD,CAA3C,IAA0G,CAArJ,GAA0J,YAAY,CAAC,GAF7K;EAAA,IAGA,OAAO,GAAG,CAAC,GAAG,GAAG,GAAP,IAAc,GAHxB;EAAA,IAIA,KAAK,GAAG,IAAI,CAAC,QAAL,MAAmB,CAJ3B;EAAA,IAKA,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CALT;EAAA,IAMA,GAAG,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CANN;EAAA,IAOA,SAPA;EAAA,IAOW,cAPX,CADuE,CAUxE;;EACC,SAAS,WAAT,GAAsB;IACrB,IAAI,KAAK,GAAG,MAAM,CAAC,gBAAP,CAAwB,OAAxB,EAAiC,IAAjC,CAAZ;IAEA,IAAI,OAAO,GAAI,OAAO,GAAG,IAAI,CAAC,KAAL,CAAW,GAAG,CAAC,WAAJ,IAAmB,CAAC,OAAO,CAAC,WAAR,GAAsB,QAAQ,CAAC,KAAK,CAAC,gBAAN,CAAuB,cAAvB,CAAD,CAA9B,GAAyE,QAAQ,CAAC,KAAK,CAAC,gBAAN,CAAuB,eAAvB,CAAD,CAAlF,IAA6H,GAAhJ,CAAX,CAAX,GAA+K,GAA7L;IACA,OAAO,CAAC,OAAD,CAAP;IACA,OAAO,CAAC,YAAR,CAAqB,eAArB,EAAsC,OAAtC;IACA,OAAO,CAAC,YAAR,CAAqB,YAArB,EAAmC,KAAnC;EACA,CAlBsE,CAoBxE;;;EACC,MAAM,CAAC,KAAP,CAAa,QAAb,GAAwB,UAAxB;EACA,MAAM,CAAC,KAAP,CAAa,KAAb,GAAqB,GAArB;EACA,MAAM,CAAC,KAAP,CAAa,GAAb,GAAmB,GAAnB;EACA,MAAM,CAAC,KAAP,CAAa,MAAb,GAAsB,GAAtB;EACA,MAAM,CAAC,KAAP,CAAa,KAAb,GAAqB,KAArB;EACA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,2BAArB,EA1BuE,CA4BxE;;EACC,GAAG,CAAC,KAAJ,CAAU,OAAV,GAAoB,cAApB;EACA,GAAG,CAAC,KAAJ,CAAU,QAAV,GAAqB,UAArB,CA9BuE,CA+BxE;EACA;EACA;EACA;;EACC,GAAG,CAAC,KAAJ,CAAU,MAAV,GAAmB,MAAnB;EACA,GAAG,CAAC,KAAJ,CAAU,eAAV,GAA4B,SAA5B;EACA,GAAG,CAAC,KAAJ,CAAU,QAAV,GAAqB,MAArB;EACA,GAAG,CAAC,KAAJ,CAAU,QAAV,GAAqB,IAArB;;EAEA,IAAG,YAAY,CAAC,iBAAb,IAAkC,OAAO,YAAY,CAAC,iBAApB,IAAyC,QAA9E,EAAuF;IACtF,KAAK,IAAI,GAAT,IAAgB,YAAY,CAAC,iBAA7B,EAA+C;MAC9C,IAAG,GAAG,CAAC,MAAJ,CAAW,CAAX,KAAiB,GAApB,EAAwB;QACvB,GAAG,GAAG,GAAG,CAAC,KAAJ,CAAU,CAAV,CAAN;QACA,GAAG,CAAC,YAAJ,CAAiB,GAAjB,EAAsB,GAAG,CAAC,YAAJ,CAAiB,GAAjB,IAAwB,YAAY,CAAC,iBAAb,CAA+B,MAAM,GAArC,CAA9C;MACA,CAHD,MAGK;QACJ,GAAG,CAAC,YAAJ,CAAiB,GAAjB,EAAsB,YAAY,CAAC,iBAAb,CAA+B,GAA/B,CAAtB;MACA;IACD;EACD,CAjDsE,CAmDxE;;;EACC,OAAO,CAAC,KAAR,CAAc,OAAd,GAAwB,SAAxB,CApDuE,CAsDxE;;EACC,KAAK,GAAG,IAAI,CAAC,GAAL,CAAS,UAAU,CAAC,KAAD,CAAnB,EAA4B,GAA5B,CAAR;EACA,KAAK,GAAG,IAAI,CAAC,GAAL,CAAS,UAAU,CAAC,KAAD,CAAnB,EAA4B,GAA5B,CAAR,CAxDuE,CA0DxE;;EACC,KAAK,GAAG,IAAI,CAAC,KAAL,CAAW,CAAC,KAAK,GAAG,GAAT,IAAgB,OAA3B,CAAR,CA3DuE,CA4DxE;;EACC,GAAG,CAAC,KAAJ,CAAU,KAAV,GAAkB,KAAK,GAAG,GAA1B;EAEA,OAAO,CAAC,YAAR,CAAqB,eAArB,EAAsC,GAAtC;EACA,OAAO,CAAC,YAAR,CAAqB,eAArB,EAAsC,GAAtC;EAEA,GAAG,CAAC,WAAJ,CAAgB,MAAhB;EAEA,MAAM,CAAC,gBAAP,CAAwB,WAAxB,EAAqC,UAAS,CAAT,EAAW;IAC/C,SAAS,GAAG,CAAC,CAAC,OAAd;IACA,cAAc,GAAG,GAAG,CAAC,WAArB;EACA,CAHD;EAKA,MAAM,CAAC,gBAAP,CAAwB,WAAxB,EAAqC,YAAU;IAC9C,MAAM,CAAC,KAAP,CAAa,MAAb,GAAsB,WAAtB;EACA,CAFD;EAIA,OAAO,CAAC,gBAAR,CAAyB,WAAzB,EAAsC,UAAS,CAAT,EAAW;IAChD,IAAG,SAAH,EAAa;MACZ,GAAG,CAAC,KAAJ,CAAU,KAAV,GAAmB,cAAc,GAAG,CAAC,CAAC,OAAnB,GAA6B,SAA9B,GAA2C,IAA7D;IACA;EACD,CAJD;EAMA,OAAO,CAAC,gBAAR,CAAyB,SAAzB,EAAoC,UAAS,CAAT,EAAW;IAC9C,IAAG,SAAH,EAAa;MACZ,CAAC,CAAC,eAAF;MACA,CAAC,CAAC,wBAAF;MAEA,SAAS,GAAG,KAAZ;MACA,cAAc,GAAG,KAAjB;MAEA,WAAW;IACX;EACD,CAVD,EAnFuE,CA+FxE;;EACC,OAAO,CAAC,gBAAR,CAAyB,SAAzB,EAAoC,UAAS,CAAT,EAAW;IAC9C,QAAO,CAAC,CAAC,OAAT;MACC,KAAK,EAAL;QAAO;QACN,CAAC,CAAC,cAAF;QACA,GAAG,CAAC,KAAJ,CAAU,KAAV,GAAmB,GAAG,CAAC,WAAJ,GAAkB,OAAO,CAAC,WAAR,GAAoB,GAAvC,GAA8C,IAAhE;QACA;;MAED,KAAK,EAAL;QAAO;QACN,CAAC,CAAC,cAAF;QACA,GAAG,CAAC,KAAJ,CAAU,KAAV,GAAmB,GAAG,CAAC,WAAJ,GAAkB,OAAO,CAAC,WAAR,GAAoB,GAAvC,GAA8C,IAAhE;QACA;;MAED,KAAK,CAAL,CAXD,CAWQ;;MACP,KAAK,EAAL;QAAO;QACN,WAAW;QACX;;MAED,KAAK,EAAL;QAAO;QACN,MAAM;QACN;IAlBF;EAqBA,CAtBD;EAwBA,OAAO,CAAC,gBAAR,CAAyB,MAAzB,EAAiC,YAAU;IAC1C,MAAM;EACN,CAFD;EAIA,OAAO,GAAP;AACD,EC9HA;;;AACe,SAAA,SAAA,CAAS,IAAT,EAAe,UAAf,EAA2B,OAA3B,EAAoC,MAApC,EAA4C,YAA5C,EAAyD;EACvE,IAAI,KAAK,GAAG,IAAI,CAAC,QAAL,EAAZ;EAAA,IACA,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CADR;EAAA,IAEA,QAAQ,GAAG,YAAY,CAAC,QAFxB;EAAA,IAGA,aAAa,GAAG,OAAO,YAAY,CAAC,kBAApB,KAA2C,WAA3C,GAAyD,IAAzD,GAAgE,YAAY,CAAC,kBAH7F;EAAA,IAIA,aAAa,GAAG,KAJhB;EAAA,IAKA,YAAY,GAAG,MAAM,CAAC,IAAP,CAAY,YAAZ,EAA0B,QAA1B,CAAmC,WAAnC,CALf;EAAA,IAMA,aAAa,GAAG,MAAM,CAAC,IAAP,CAAY,YAAZ,EAA0B,QAA1B,CAAmC,YAAnC,CANhB;EAQA,KAAK,CAAC,YAAN,CAAmB,MAAnB,EAA2B,UAA3B;EACA,KAAK,CAAC,KAAN,CAAY,SAAZ,GAAwB,KAAxB;EACA,KAAK,CAAC,KAAN,CAAY,SAAZ,GAAwB,YAAxB;;EAEA,IAAG,YAAY,CAAC,iBAAb,IAAkC,OAAO,YAAY,CAAC,iBAApB,IAAyC,QAA9E,EAAuF;IACtF,KAAK,IAAI,GAAT,IAAgB,YAAY,CAAC,iBAA7B,EAA+C;MAC9C,IAAG,GAAG,CAAC,MAAJ,CAAW,CAAX,KAAiB,GAApB,EAAwB;QACvB,GAAG,GAAG,GAAG,CAAC,KAAJ,CAAU,CAAV,CAAN;QACA,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,KAAK,CAAC,YAAN,CAAmB,GAAnB,IAA0B,YAAY,CAAC,iBAAb,CAA+B,MAAM,GAArC,CAAlD;MACA,CAHD,MAGK;QACJ,KAAK,CAAC,YAAN,CAAmB,GAAnB,EAAwB,YAAY,CAAC,iBAAb,CAA+B,GAA/B,CAAxB;MACA;IACD;EACD;;EAED,KAAK,CAAC,KAAN,GAAc,KAAd;;EAEA,IAAG,QAAQ,KAAK,OAAO,KAAP,KAAiB,WAAjB,IAAgC,KAAK,KAAK,aAA1C,IAA2D,KAAK,KAAK,EAA1E,CAAX,EAAyF;IACxF,aAAa,GAAG,IAAhB;IACA,KAAK,CAAC,aAAN,GAAsB,IAAtB;EACA;;EAED,IAAG,KAAK,KAAL,CAAW,OAAX,IAAsB,SAAzB,EAAmC;IAAA;IAClC,UAAU,CAAC,YAAU;MACpB,KAAK,CAAC,KAAN,CAAY;QAAC,aAAa,EAAE;MAAhB,CAAZ;IACA,CAFS,CAAV;EAGA;;EAED,KAAK,CAAC,OAAN,GAAgB,YAAY,GAAG,KAAK,KAAK,YAAY,CAAC,SAA1B,GAAuC,KAAK,KAAK,IAAV,IAAkB,KAAK,KAAK,MAA5B,IAAsC,KAAK,KAAK,MAAhD,IAA0D,KAAK,KAAK,CAAvI;EAEA,UAAU,CAAC,YAAU;IACpB,KAAK,CAAC,KAAN;EACA,CAFS,CAAV;;EAIA,SAAS,QAAT,CAAkB,IAAlB,EAAuB;IACtB,IAAI,YAAY,GAAG,KAAK,CAAC,OAAzB;;IAEA,IAAG,YAAY,IAAI,YAAnB,EAAgC;MAC/B,YAAY,GAAG,YAAY,CAAC,SAA5B;IACA,CAFD,MAEM,IAAG,aAAa,IAAI,CAAC,YAArB,EAAkC;MACvC,YAAY,GAAG,YAAY,CAAC,UAA5B;IACA;;IAED,IAAG,QAAH,EAAY;MACX,IAAG,CAAC,IAAJ,EAAS;QACR,IAAG,KAAK,CAAC,OAAN,IAAiB,CAAC,aAArB,EAAmC;UAClC,KAAK,CAAC,OAAN,GAAgB,KAAhB;UACA,KAAK,CAAC,aAAN,GAAsB,IAAtB;UACA,aAAa,GAAG,IAAhB;UACA,OAAO,aAAP;QACA,CALD,MAKK;UACJ,aAAa,GAAG,KAAhB;UACA,OAAO,YAAP;QACA;MACD,CAVD,MAUK;QACJ,IAAG,aAAH,EAAiB;UAChB,OAAO,aAAP;QACA,CAFD,MAEK;UACJ,OAAO,YAAP;QACA;MACD;IACD,CAlBD,MAkBK;MACJ,OAAO,YAAP;IACA;EACD,CAzEsE,CA2ExE;;;EACC,KAAK,CAAC,gBAAN,CAAuB,QAAvB,EAAiC,UAAS,CAAT,EAAW;IAC3C,OAAO,CAAC,QAAQ,EAAT,CAAP;EACA,CAFD;EAIA,KAAK,CAAC,gBAAN,CAAuB,MAAvB,EAA+B,UAAS,CAAT,EAAW;IACzC,OAAO,CAAC,QAAQ,CAAC,IAAD,CAAT,CAAP;EACA,CAFD,EAhFuE,CAoFxE;;EACC,KAAK,CAAC,gBAAN,CAAuB,SAAvB,EAAkC,UAAS,CAAT,EAAW;IAC5C,IAAG,CAAC,CAAC,OAAF,IAAa,EAAhB,EAAmB;MAClB,OAAO,CAAC,QAAQ,EAAT,CAAP;IACA;;IACD,IAAG,CAAC,CAAC,OAAF,IAAa,EAAhB,EAAmB;MAClB,MAAM;IACN;EACD,CAPD;EASA,OAAO,KAAP;AACD;;AClFA,IAAA,cAAA,GAAe;EACd,KAAK,EAAC,KADQ;EAEd,QAAQ,EAAC,QAFK;EAGd,MAAM,EAAC,MAHO;EAId,KAAK,EAAC,KAJQ;EAKd,IAAI,EAAC,IALS;EAMd,IAAI,EAAC,IANS;EAOd,QAAQ,EAAC,QAPK;EAQd,MAAM,EAAC,MARO;EASd,IAAI,EAAC,IATS;EAUd,YAAY,EAAC,YAVC;EAWd,IAAI,EAAC,IAXS;EAYd,QAAQ,EAAC,QAZK;EAad,SAAS,EAAC;AAbI,CAAf;;ACTA,MAAMC,MAAN,SAAmB,MAAnB,CAAyB;EAExB,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,WAAL,GAAmB,KAAnB,CAHiB,CAGQ;;IACzB,KAAK,UAAL,GAAkB,KAAlB,CAJiB,CAIO;;IACxB,KAAK,cAAL,GAAsB,KAAtB,CALiB,CAKW;;IAC5B,KAAK,WAAL,GAAmB,KAAnB;IACA,KAAK,WAAL,GAAmB,EAAnB;IAEA,KAAK,OAAL,GAAeA,MAAI,CAAC,OAApB;IAEA,KAAK,oBAAL,CAA0B,UAA1B;IACA,KAAK,oBAAL,CAA0B,QAA1B;IACA,KAAK,oBAAL,CAA0B,cAA1B;IAEA,KAAK,oBAAL,CAA0B,aAA1B;IACA,KAAK,oBAAL,CAA0B,YAA1B;IACA,KAAK,oBAAL,CAA0B,mBAA1B;IAEA,KAAK,qBAAL,CAA2B,gBAA3B,EAA6C,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAA7C;IACA,KAAK,qBAAL,CAA2B,iBAA3B,EAA8C,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAA9C;IACA,KAAK,qBAAL,CAA2B,cAA3B,EAA2C,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAA3C;IACA,KAAK,qBAAL,CAA2B,cAA3B,EAA2C,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAA3C;IACA,KAAK,qBAAL,CAA2B,cAA3B,EAA2C,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAA3C;IACA,KAAK,qBAAL,CAA2B,eAA3B,EAA4C,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAA5C;IACA,KAAK,qBAAL,CAA2B,YAA3B,EAAyC,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAAzC;IACA,KAAK,qBAAL,CAA2B,cAA3B,EAA2C,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAA3C;IAEA,KAAK,yBAAL,CAA+B,MAA/B,EAAuC,UAAvC,EAAmD,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAnD;IACA,KAAK,yBAAL,CAA+B,MAA/B,EAAuC,aAAvC,EAAsD,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAtD;IACA,KAAK,yBAAL,CAA+B,MAA/B,EAAuC,MAAvC,EAA+C,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAA/C;IACA,KAAK,yBAAL,CAA+B,MAA/B,EAAuC,YAAvC,EAAqD,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAArD;IAEA,KAAK,yBAAL,CAA+B,MAA/B,EAAuC,cAAvC,EAAuD,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAvD;IACA,KAAK,yBAAL,CAA+B,MAA/B,EAAuC,cAAvC,EAAuD,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAvD;IACA,KAAK,yBAAL,CAA+B,MAA/B,EAAuC,cAAvC,EAAuD,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAvD;IACA,KAAK,yBAAL,CAA+B,MAA/B,EAAuC,eAAvC,EAAwD,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAxD;IACA,KAAK,yBAAL,CAA+B,MAA/B,EAAuC,YAAvC,EAAqD,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAArD;IACA,KAAK,yBAAL,CAA+B,MAA/B,EAAuC,cAAvC,EAAuD,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAvD;EACA;;EAED,UAAU,GAAE;IACX,KAAK,SAAL,CAAe,WAAf,EAA4B,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAA5B;IACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAA9B;IACA,KAAK,SAAL,CAAe,oBAAf,EAAqC,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAArC;IACA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,qBAAL,CAA2B,IAA3B,CAAgC,IAAhC,CAAhC;IACA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,IAA5B,CAAhC;IACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAA/B;IACA,KAAK,SAAL,CAAe,iBAAf,EAAkC,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAAlC;IAEA,KAAK,SAAL,CAAe,qBAAf,EAAsC,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,EAA6B,SAA7B,CAAtC;IACA,KAAK,SAAL,CAAe,qBAAf,EAAsC,KAAK,sBAAL,CAA4B,IAA5B,CAAiC,IAAjC,CAAtC;IACA,KAAK,SAAL,CAAe,qBAAf,EAAsC,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,EAA6B,SAA7B,CAAtC;IACA,KAAK,SAAL,CAAe,sBAAf,EAAuC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,EAA8B,SAA9B,CAAvC;IACA,KAAK,SAAL,CAAe,mBAAf,EAAoC,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,EAA2B,SAA3B,CAApC;IACA,KAAK,SAAL,CAAe,qBAAf,EAAsC,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,EAA6B,SAA7B,CAAtC;EACA,CA1DuB,CA6DzB;EACA;EACA;;;EAEC,sBAAsB,CAAC,CAAD,EAAG;IACxB,IAAI,IAAI,GAAG,KAAK,WAAhB;IAAA,IACA,MAAM,GAAG,KAAK,OAAL,CAAa,cAAb,CADT;;IAGA,IAAG,IAAH,EAAQ;MACP,IAAG,CAAC,KAAK,YAAL,CAAkB,IAAlB,EAAwB,CAAxB,CAAJ,EAA+B;QAC9B,IAAG,MAAH,EAAU;UACT,IAAI,CAAC,UAAL,GAAkB,UAAlB,CAA6B,IAA7B;;UAEA,IAAG,MAAM,KAAK,IAAd,EAAmB;YAClB,MAAM,GAAG,KAAK,KAAL,CAAW,MAAX,CAAkB,EAAlB,CAAT;UACA,CAFD,MAEK;YACJ,IAAG,OAAO,MAAP,IAAiB,UAApB,EAA+B;cAC9B,MAAM,GAAG,KAAK,KAAL,CAAW,MAAX,CAAkB,MAAM,CAAC,IAAI,CAAC,GAAL,CAAS,YAAT,EAAD,CAAxB,CAAT;YACA,CAFD,MAEK;cACJ,MAAM,GAAG,KAAK,KAAL,CAAW,MAAX,CAAkB,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,MAAlB,CAAlB,CAAT;YACA;UACD;;UAED,MAAM,CAAC,IAAP,CAAY,MAAM;YACjB,UAAU,CAAC,MAAM;cAChB,IAAI,CAAC,YAAL,GAAoB,YAApB;YACA,CAFS,CAAV;UAGA,CAJD;QAKA;MACD;IACD;EACD,CA5FuB,CA8FzB;EACA;EACA;;;EAEC,YAAY,CAAC,IAAD,EAAM;IACjB,OAAO,CAAC,CAAE,IAAI,CAAC,OAAL,CAAa,IAAhB,IAAwB,IAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,MAAjD;EACA;;EAED,cAAc,CAAC,IAAD,EAAM;IACnB,IAAG,IAAI,KAAK,KAAK,WAAjB,EAA6B;MAC5B,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,UAAxB;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,gEAAb;IACA;EACD,CA5GuB,CA+GzB;EACA;EACA;;;EACC,eAAe,CAAC,IAAD,EAAM;IACpB,IAAG,KAAK,SAAL,CAAe,IAAf,CAAH,EAAyB;MACxB,IAAI,CAAC,UAAL,GAAkB,SAAlB,CAA4B,GAA5B,CAAgC,oBAAhC;IACA,CAFD,MAGK;MACJ,IAAI,CAAC,UAAL,GAAkB,SAAlB,CAA4B,MAA5B,CAAmC,oBAAnC;IACA;EACD;;EAED,eAAe,CAAC,KAAD,EAAO;IACrB,IAAG,CAAC,KAAJ,EAAU;MACT,KAAK,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,cAAxB,EAAR;IACA;;IAED,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,KAAd,CAAJ,EAAyB;MACxB,KAAK,GAAG,CAAC,KAAD,CAAR;IACA;;IAED,KAAK,CAAC,OAAN,CAAe,IAAD,IAAU;MACvB,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,WAAxB,CAAoC,IAAI,CAAC,QAAL,EAApC;IACA,CAFD;EAGA;;EAED,YAAY,CAAC,IAAI,GAAG,KAAK,WAAb,EAA0B,CAA1B,EAA4B;IACvC,IAAI,QAAJ,EAAc,OAAd;;IAEA,IAAG,IAAH,EAAQ;MAEP,IAAG,CAAH,EAAK;QACJ,CAAC,CAAC,cAAF;MACA;;MAED,QAAQ,GAAG,KAAK,YAAL,EAAX;;MAEA,IAAG,QAAH,EAAY;QACX,OAAO,IAAP;MACA,CAFD,MAEK;QACJ,OAAO,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,IAAI,CAAC,GAA1C,EAA+C,IAA/C,CAAV;;QAEA,IAAG,OAAH,EAAW;UACV,QAAQ,GAAG,KAAK,oBAAL,CAA0B,OAA1B,EAAmC,OAAO,CAAC,KAAR,CAAc,MAAjD,CAAX;;UAEA,IAAG,QAAH,EAAY;YACX,QAAQ,CAAC,YAAT,GAAwB,IAAxB;YACA,OAAO,IAAP;UACA;QACD;MACD;IACD;;IAED,OAAO,KAAP;EACA;;EAED,YAAY,CAAC,IAAI,GAAG,KAAK,WAAb,EAA0B,CAA1B,EAA4B;IACvC,IAAI,QAAJ,EAAc,OAAd;;IAEA,IAAG,IAAH,EAAQ;MAEP,IAAG,CAAH,EAAK;QACJ,CAAC,CAAC,cAAF;MACA;;MAED,QAAQ,GAAG,KAAK,aAAL,EAAX;;MAEA,IAAG,QAAH,EAAY;QACX,OAAO,IAAP;MACA,CAFD,MAEK;QACJ,OAAO,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,IAAI,CAAC,GAA1C,EAA+C,IAA/C,CAAV;;QAEA,IAAG,OAAH,EAAW;UACV,QAAQ,GAAG,KAAK,oBAAL,CAA0B,OAA1B,EAAmC,CAAC,CAApC,CAAX;;UAEA,IAAG,QAAH,EAAY;YACX,QAAQ,CAAC,YAAT,GAAwB,IAAxB;YACA,OAAO,IAAP;UACA;QACD;MACD;IACD;;IAED,OAAO,KAAP;EACA;;EAED,YAAY,CAAC,IAAI,GAAG,KAAK,WAAb,EAA0B,CAA1B,EAA4B;IACvC,IAAI,KAAJ,EAAW,QAAX;;IAEA,IAAG,IAAH,EAAQ;MAEP,IAAG,CAAH,EAAK;QACJ,CAAC,CAAC,cAAF;MACA;;MAED,KAAK,GAAG,IAAI,CAAC,QAAL,EAAR;MACA,QAAQ,GAAG,KAAK,oBAAL,CAA0B,IAAI,CAAC,GAA/B,EAAoC,KAApC,CAAX;;MAEA,IAAG,QAAH,EAAY;QACX,QAAQ,CAAC,YAAT,GAAwB,IAAxB;QACA,OAAO,IAAP;MACA;IACD;;IAED,OAAO,KAAP;EACA;;EAED,aAAa,CAAC,IAAI,GAAG,KAAK,WAAb,EAA0B,CAA1B,EAA4B;IACxC,IAAI,KAAJ,EAAW,QAAX;;IAEA,IAAG,IAAH,EAAQ;MAEP,IAAG,CAAH,EAAK;QACJ,CAAC,CAAC,cAAF;MACA;;MAED,KAAK,GAAG,IAAI,CAAC,QAAL,EAAR;MACA,QAAQ,GAAG,KAAK,oBAAL,CAA0B,IAAI,CAAC,GAA/B,EAAoC,KAApC,CAAX;;MAEA,IAAG,QAAH,EAAY;QACX,QAAQ,CAAC,YAAT,GAAwB,IAAxB;QACA,OAAO,IAAP;MACA;IACD;;IAED,OAAO,KAAP;EACA;;EAED,UAAU,CAAC,IAAI,GAAG,KAAK,WAAb,EAA0B,CAA1B,EAA4B;IACrC,IAAI,KAAJ,EAAW,OAAX;;IAEA,IAAG,IAAH,EAAQ;MAEP,IAAG,CAAH,EAAK;QACJ,CAAC,CAAC,cAAF;MACA;;MAED,KAAK,GAAG,IAAI,CAAC,QAAL,EAAR;MACA,OAAO,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,IAAI,CAAC,GAA1C,EAA+C,IAA/C,CAAV;;MAEA,IAAG,OAAH,EAAW;QACV,OAAO,CAAC,KAAR,CAAc,KAAd,EAAqB,YAArB,GAAoC,IAApC;QACA,OAAO,IAAP;MACA;IACD;;IAED,OAAO,KAAP;EACA;;EAED,YAAY,CAAC,IAAI,GAAG,KAAK,WAAb,EAA0B,CAA1B,EAA4B;IACvC,IAAI,KAAJ,EAAW,OAAX;;IAEA,IAAG,IAAH,EAAQ;MAEP,IAAG,CAAH,EAAK;QACJ,CAAC,CAAC,cAAF;MACA;;MAED,KAAK,GAAG,IAAI,CAAC,QAAL,EAAR;MACA,OAAO,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,IAAI,CAAC,GAA1C,EAA+C,IAA/C,CAAV;;MAEA,IAAG,OAAH,EAAW;QACV,OAAO,CAAC,KAAR,CAAc,KAAd,EAAqB,YAArB,GAAoC,IAApC;QACA,OAAO,IAAP;MACA;IACD;;IAED,OAAO,KAAP;EACA;;EAED,oBAAoB,CAAC,GAAD,EAAM,KAAN,EAAY;IAC/B,IAAI,QAAQ,GAAG,KAAf;;IAEA,IAAG,KAAK,GAAG,GAAG,CAAC,KAAJ,CAAU,MAAV,GAAiB,CAA5B,EAA8B;MAC7B,KAAI,IAAI,CAAC,GAAG,KAAK,GAAC,CAAlB,EAAqB,CAAC,GAAG,GAAG,CAAC,KAAJ,CAAU,MAAnC,EAA2C,CAAC,EAA5C,EAA+C;QAC9C,IAAI,IAAI,GAAG,GAAG,CAAC,KAAJ,CAAU,CAAV,CAAX;;QAEA,IAAG,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,IAApB,IAA4B,OAAO,CAAC,SAAR,CAAkB,IAAI,CAAC,UAAL,EAAlB,CAA/B,EAAoE;UACnE,IAAI,SAAS,GAAG,KAAK,SAAL,CAAe,IAAf,CAAhB;;UAEA,IAAG,SAAH,EAAa;YACZ,QAAQ,GAAG,IAAX;YACA;UACA;QACD;MACD;IACD;;IAED,OAAO,QAAP;EACA;;EAED,oBAAoB,CAAC,GAAD,EAAM,KAAN,EAAY;IAC/B,IAAI,QAAQ,GAAG,KAAf;;IAEA,IAAG,KAAK,GAAG,CAAX,EAAa;MACZ,KAAI,IAAI,CAAC,GAAG,KAAK,GAAC,CAAlB,EAAqB,CAAC,IAAI,CAA1B,EAA6B,CAAC,EAA9B,EAAiC;QAChC,IAAI,IAAI,GAAG,GAAG,CAAC,KAAJ,CAAU,CAAV,CAAX;;QAEA,IAAG,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,IAApB,IAA4B,OAAO,CAAC,SAAR,CAAkB,IAAI,CAAC,UAAL,EAAlB,CAA/B,EAAoE;UACnE,IAAI,SAAS,GAAG,KAAK,SAAL,CAAe,IAAf,CAAhB;;UAEA,IAAG,SAAH,EAAa;YACZ,QAAQ,GAAG,IAAX;YACA;UACA;QACD;MACD;IACD;;IAED,OAAO,QAAP;EACA,CAjUuB,CAmUzB;EACA;EACA;;;EAEC,qBAAqB,CAAC,MAAD,EAAQ;IAC5B,IAAG,OAAO,MAAM,CAAC,UAAP,CAAkB,MAAzB,KAAoC,WAAvC,EAAmD;MAClD,KAAK,gBAAL,CAAsB,MAAtB;IACA;EACD;;EAED,iBAAiB,CAAC,MAAD,EAAQ;IACxB,IAAG,KAAK,WAAL,IAAoB,KAAK,WAAL,CAAiB,MAAjB,KAA4B,MAAnD,EAA0D;MACzD,KAAK,UAAL;IACA;EACD;;EAED,cAAc,CAAC,GAAD,EAAK;IAClB,IAAG,KAAK,WAAL,IAAoB,KAAK,WAAL,CAAiB,GAAjB,KAAyB,GAAhD,EAAoD;MACnD,KAAK,UAAL;IACA;EACD,CAvVuB,CAyVzB;;;EACC,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAI,MAAM,GAAG;MACZ,MAAM,EAAC,KADK;MAEZ,OAAO,EAAC,KAFI;MAGZ,KAAK,EAAC,MAAM,CAAC,UAAP,CAAkB,QAHZ;MAIZ,MAAM,EAAC,MAAM,CAAC,UAAP,CAAkB,YAAlB,IAAkC;IAJ7B,CAAb,CADuB,CAQzB;;IACE,QAAO,OAAO,MAAM,CAAC,UAAP,CAAkB,MAAhC;MACC,KAAK,QAAL;QACC,IAAG,KAAK,OAAL,CAAa,MAAM,CAAC,UAAP,CAAkB,MAA/B,CAAH,EAA0C;UACzC,MAAM,CAAC,MAAP,GAAgB,KAAK,OAAL,CAAa,MAAM,CAAC,UAAP,CAAkB,MAA/B,CAAhB;QACA,CAFD,MAEK;UACJ,OAAO,CAAC,IAAR,CAAa,uCAAb,EAAsD,MAAM,CAAC,UAAP,CAAkB,MAAxE;QACA;;QACD;;MAED,KAAK,UAAL;QACC,MAAM,CAAC,MAAP,GAAgB,MAAM,CAAC,UAAP,CAAkB,MAAlC;QACA;;MAED,KAAK,SAAL;QACC,IAAG,MAAM,CAAC,UAAP,CAAkB,MAAlB,KAA6B,IAAhC,EAAqC;UACpC,IAAG,OAAO,MAAM,CAAC,UAAP,CAAkB,SAAzB,KAAuC,UAA1C,EAAqD;YACpD,IAAG,KAAK,OAAL,CAAa,MAAM,CAAC,UAAP,CAAkB,SAA/B,CAAH,EAA6C;cAC5C,MAAM,CAAC,MAAP,GAAgB,KAAK,OAAL,CAAa,MAAM,CAAC,UAAP,CAAkB,SAA/B,CAAhB;YACA,CAFD,MAEK;cACJ,MAAM,CAAC,MAAP,GAAgB,KAAK,OAAL,CAAa,OAAb,CAAhB;YACA;UACD,CAND,MAMK;YACJ,OAAO,CAAC,IAAR,CAAa,mEAAb,EAAkF,MAAM,CAAC,UAAP,CAAkB,SAApG;UACA;QACD;;QACD;IAzBF;;IA4BA,IAAG,MAAM,CAAC,MAAV,EAAiB;MAChB,MAAM,CAAC,OAAP,CAAe,IAAf,GAAsB,MAAtB;IACA;EACD;;EAED,cAAc,GAAE;IACf,OAAO,KAAK,WAAL,GAAmB,KAAK,WAAL,CAAiB,YAAjB,EAAnB,GAAqD,KAA5D;EACA;;EAED,WAAW,CAAC,MAAD,EAAQ;IAClB,IAAI,IAAI,GAAG,KAAK,WAAhB;IAAA,IACA,MADA;IAGA,KAAK,WAAL,GAAmB,KAAnB;;IAEA,IAAG,IAAH,EAAQ;MACP,KAAK,WAAL,GAAmB,KAAnB;MAEA,MAAM,GAAG,IAAI,CAAC,UAAL,EAAT;MAEA,KAAK,QAAL,CAAc,mBAAd,EAAmC,IAAnC,EAAyC,MAAzC;MAEA,MAAM,CAAC,SAAP,CAAiB,MAAjB,CAAwB,mBAAxB;;MAEA,OAAM,MAAM,CAAC,UAAb,EAAyB,MAAM,CAAC,WAAP,CAAmB,MAAM,CAAC,UAA1B;;MAEzB,IAAI,CAAC,GAAL,CAAS,UAAT,GAAsB,SAAtB,CAAgC,MAAhC,CAAuC,mBAAvC;MAEA,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,MAA7B,CAAoC,mBAApC;IACA;EACD;;EAED,UAAU,GAAE;IACX,IAAG,KAAK,WAAR,EAAoB;MACnB,IAAI,IAAI,GAAG,KAAK,WAAhB;MACA,IAAI,SAAS,GAAG,KAAK,WAAL,CAAiB,YAAjB,EAAhB;MAEA,KAAK,WAAL,CAAiB,IAAjB;MACA,IAAI,CAAC,cAAL,CAAoB,IAAI,CAAC,QAAL,EAApB;MACA,IAAI,CAAC,YAAL;;MAEA,IAAG,IAAI,CAAC,MAAL,CAAY,UAAZ,CAAuB,MAAvB,IAAiC,UAAjC,IAA+C,IAAI,CAAC,MAAL,CAAY,UAAZ,CAAuB,cAAzE,EAAwF;QACvF,IAAI,CAAC,GAAL,CAAS,eAAT,CAAyB,IAAzB;MACA;;MAED,IAAG,IAAI,CAAC,MAAL,CAAY,UAAZ,CAAuB,iBAA1B,EAA4C;QAC3C,IAAI,CAAC,MAAL,CAAY,UAAZ,CAAuB,iBAAvB,CAAyC,IAAzC,CAA8C,KAAK,KAAnD,EAA0D,SAA1D;MACA;;MAED,KAAK,QAAL,CAAc,gBAAd,EAAgC,IAAhC;MACA,KAAK,gBAAL,CAAsB,mBAAtB,EAA2C,SAA3C;IACA;EACD,CAnbuB,CAqbzB;;;EACC,UAAU,CAAC,IAAD,EAAM;IACf,IAAG,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,IAAvB,EAA4B;MAC3B,IAAI,IAAI,GAAG,IAAX;MAAA,IACA,OAAO,GAAG,IAAI,CAAC,UAAL,CAAgB,IAAhB,CADV;MAGA,KAAK,eAAL,CAAqB,IAArB;MACA,OAAO,CAAC,YAAR,CAAqB,UAArB,EAAiC,CAAjC;MAEA,OAAO,CAAC,gBAAR,CAAyB,OAAzB,EAAkC,UAAS,CAAT,EAAW;QAC5C,IAAG,CAAC,OAAO,CAAC,SAAR,CAAkB,QAAlB,CAA2B,mBAA3B,CAAJ,EAAoD;UACnD,OAAO,CAAC,KAAR,CAAc;YAAC,aAAa,EAAE;UAAhB,CAAd;QACA;MACD,CAJD;MAMA,OAAO,CAAC,gBAAR,CAAyB,WAAzB,EAAsC,UAAS,CAAT,EAAW;QAChD,IAAI,CAAC,CAAC,MAAF,KAAa,CAAjB,EAAoB;UACnB,CAAC,CAAC,cAAF;QACA,CAFD,MAEK;UACJ,IAAI,CAAC,UAAL,GAAkB,IAAlB;QACA;MACD,CAND;MAQA,OAAO,CAAC,gBAAR,CAAyB,OAAzB,EAAkC,UAAS,CAAT,EAAW;QAC5C,IAAG,CAAC,IAAI,CAAC,cAAT,EAAwB;UACvB,IAAI,CAAC,IAAL,CAAU,IAAV,EAAgB,CAAhB,EAAmB,KAAnB;QACA;MACD,CAJD;IAKA;EACD;;EAED,gBAAgB,CAAC,IAAD,EAAO,KAAP,EAAa;IAC5B,KAAK,cAAL,GAAsB,IAAtB;;IAEA,IAAG,EAAE,KAAK,IAAI,KAAK,KAAL,CAAW,OAAX,KAAuB,IAAlC,CAAH,EAA2C;MAC1C,IAAI,CAAC,UAAL,GAAkB,KAAlB,CAAwB;QAAC,aAAa,EAAE;MAAhB,CAAxB;IACA;;IAED,KAAK,cAAL,GAAsB,KAAtB;EACA;;EAED,QAAQ,CAAC,IAAD,EAAO,SAAP,EAAiB;IACxB,KAAK,gBAAL,CAAsB,IAAtB;IACA,KAAK,IAAL,CAAU,IAAV,EAAgB,KAAhB,EAAuB,SAAvB;EACA;;EAED,iBAAiB,CAAC,IAAD,EAAM;IACtB,IAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,aAAtB,MAAyC,SAA5C,EAAsD;MACrD,IAAI,OAAO,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,SAA5C;MAAA,IACA,UAAU,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,YAA9B,GAA6C,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,SADxF;MAAA,IAEA,KAAK,GAAG,IAAI,CAAC,GAAL,CAAS,UAAT,EAFR;;MAIA,IAAG,KAAK,CAAC,SAAN,GAAkB,OAArB,EAA6B;QAC5B,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,SAA9B,IAA4C,OAAO,GAAG,KAAK,CAAC,SAA5D;MACA,CAFD,MAEK;QACJ,IAAG,KAAK,CAAC,SAAN,GAAkB,KAAK,CAAC,YAAxB,GAAwC,UAA3C,EAAsD;UACrD,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,SAA9B,IAA4C,KAAK,CAAC,SAAN,GAAkB,KAAK,CAAC,YAAxB,GAAuC,UAAnF;QACA;MACD;;MAED,IAAI,QAAQ,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,UAA7C;MAAA,IACA,SAAS,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,WAA9B,GAA4C,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,UADtF;MAAA,IAEA,MAAM,GAAG,IAAI,CAAC,UAAL,EAFT;;MAIA,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,eAArB,CAAH,EAAyC;QACxC,QAAQ,IAAI,QAAQ,CAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAiC,UAAlC,CAApB;QACA,SAAS,IAAI,QAAQ,CAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAiC,WAAlC,CAArB;MACA;;MAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,KAAwC,SAA3C,EAAqD;QACpD,QAAQ,IAAI,QAAQ,CAAC,KAAK,KAAL,CAAW,aAAX,CAAyB,QAAzB,CAAkC,WAAnC,CAApB;QACA,SAAS,IAAI,QAAQ,CAAC,KAAK,KAAL,CAAW,aAAX,CAAyB,QAAzB,CAAkC,WAAnC,CAArB;MACA;;MAED,IAAG,MAAM,CAAC,UAAP,GAAoB,QAAvB,EAAgC;QAE/B,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,UAA9B,IAA6C,QAAQ,GAAG,MAAM,CAAC,UAA/D;MACA,CAHD,MAGK;QACJ,IAAG,MAAM,CAAC,UAAP,GAAoB,MAAM,CAAC,WAA3B,GAA0C,SAA7C,EAAuD;UACtD,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,UAA9B,IAA6C,MAAM,CAAC,UAAP,GAAoB,MAAM,CAAC,WAA3B,GAAyC,SAAtF;QACA;MACD;IACD;EACD;;EAED,SAAS,CAAC,IAAD,EAAO;IACf,IAAI,KAAK,GAAG,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,IAApB,GAA2B,IAA3B,GAAkC,KAA9C;;IAEA,IAAG,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,IAAvB,EAA4B;MAC3B,QAAO,OAAO,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,IAApB,CAAyB,KAAvC;QACC,KAAK,UAAL;UACC,KAAK,GAAG,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,IAApB,CAAyB,KAAzB,CAA+B,IAAI,CAAC,YAAL,EAA/B,CAAR;UACA;;QAED,KAAK,QAAL;UACC,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,GAAL,CAAS,IAAT,CAAc,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,IAApB,CAAyB,KAAvC,CAAV;UACA;;QAED,KAAK,SAAL;UACC,KAAK,GAAG,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,IAApB,CAAyB,KAAjC;UACA;MAXF;IAaA;;IAED,OAAO,KAAP;EACA;;EAED,IAAI,CAAC,IAAD,EAAO,CAAP,EAAU,SAAV,EAAoB;IACvB,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,SAAS,GAAG,IADZ;IAAA,IAEA,QAAQ,GAAG,YAAU,CAAE,CAFvB;IAAA,IAGA,OAAO,GAAG,IAAI,CAAC,UAAL,EAHV;IAAA,IAIA,UAJA;IAAA,IAIY,SAJZ;IAAA,IAIuB,MAJvB,CADuB,CAOzB;;;IACE,IAAG,KAAK,WAAR,EAAoB;MACnB,IAAG,CAAC,KAAK,WAAT,EAAqB;QACpB,KAAK,UAAL;MACA;;MACD;IACA,CAbsB,CAezB;;;IACE,SAAS,OAAT,CAAiB,KAAjB,EAAuB;MACtB,IAAG,IAAI,CAAC,WAAL,KAAqB,IAAxB,EAA6B;QAC5B,IAAI,KAAK,GAAG,IAAI,CAAC,KAAL,CAAW,cAAX,EAA2B,CAAC,IAAD,EAAO,KAAP,CAA3B,EAA0C,IAA1C,EAAgD,IAAhD,CAAZ;;QAEA,IAAG,KAAK,KAAK,IAAV,IAAkB,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,cAAnB,KAAsC,WAA3D,EAAuE;UACtE,IAAI,CAAC,WAAL;;UAGA,IAAG,CAAC,IAAI,CAAC,OAAL,CAAa,IAAjB,EAAsB;YACrB,IAAI,CAAC,OAAL,CAAa,IAAb,GAAoB,EAApB;UACA;;UAED,IAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,MAAlB,GAA2B,IAA3B;;UAEA,IAAG,IAAI,CAAC,WAAL,CAAiB,OAAjB,CAAyB,IAAzB,KAAkC,CAAC,CAAtC,EAAwC;YACvC,IAAI,CAAC,WAAL,CAAiB,IAAjB,CAAsB,IAAtB;UACA;;UAED,IAAI,CAAC,QAAL,CAAc,KAAd,EAAqB,IAArB;UAEA,OAAO,KAAK,KAAK,IAAjB;QACA,CAjBD,MAiBK;UACJ,IAAI,CAAC,WAAL,GAAmB,IAAnB;UACA,IAAI,CAAC,gBAAL,CAAsB,IAAtB,EAA4B,IAA5B;UACA,QAAQ;UACR,OAAO,KAAP;QACA;MAGD;IACD,CA9CsB,CAgDzB;;;IACE,SAAS,MAAT,GAAiB;MAChB,IAAG,IAAI,CAAC,WAAL,KAAqB,IAAxB,EAA6B;QAC5B,IAAI,CAAC,UAAL;MAGA;IACD;;IAED,SAAS,UAAT,CAAoB,QAApB,EAA6B;MAC5B,QAAQ,GAAG,QAAX;IACA;;IAED,IAAG,CAAC,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,IAApB,CAAyB,OAA7B,EAAqC;MACpC,IAAG,CAAH,EAAK;QACJ,CAAC,CAAC,eAAF;MACA;;MAED,SAAS,GAAG,KAAK,SAAL,CAAe,IAAf,CAAZ;;MAEA,IAAG,SAAS,IAAI,SAAhB,EAA0B;QAEzB,IAAI,CAAC,UAAL;QAEA,IAAI,CAAC,WAAL,GAAmB,IAAnB;QAEA,KAAK,iBAAL,CAAuB,IAAvB;QAEA,SAAS,GAAG,IAAI,CAAC,YAAL,EAAZ;;QAEA,IAAG,KAAK,UAAR,EAAmB;UAClB,KAAK,UAAL,GAAkB,KAAlB;;UAEA,IAAG,IAAI,CAAC,MAAL,CAAY,UAAZ,CAAuB,SAA1B,EAAoC;YACnC,IAAI,CAAC,MAAL,CAAY,UAAZ,CAAuB,SAAvB,CAAiC,IAAjC,CAAsC,KAAK,KAA3C,EAAkD,CAAlD,EAAqD,SAArD;UACA;QACD;;QAED,IAAG,IAAI,CAAC,MAAL,CAAY,UAAZ,CAAuB,WAA1B,EAAsC;UACrC,IAAI,CAAC,MAAL,CAAY,UAAZ,CAAuB,WAAvB,CAAmC,IAAnC,CAAwC,KAAK,KAA7C,EAAoD,SAApD;QACA;;QAED,KAAK,QAAL,CAAc,cAAd,EAA8B,IAA9B;QACA,KAAK,gBAAL,CAAsB,aAAtB,EAAqC,SAArC;QAEA,MAAM,GAAG,OAAO,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,IAApB,CAAyB,MAAhC,KAA2C,UAA3C,GAAwD,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,IAApB,CAAyB,MAAzB,CAAgC,SAAhC,CAAxD,GAAqG,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,IAApB,CAAyB,MAAvI;QAEA,UAAU,GAAG,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,IAApB,CAAyB,MAAzB,CAAgC,IAAhC,CAAqC,IAArC,EAA2C,SAA3C,EAAsD,UAAtD,EAAkE,OAAlE,EAA2E,MAA3E,EAAmF,MAAnF,CAAb,CA3ByB,CA6B7B;;QACI,IAAG,UAAU,KAAK,KAAlB,EAAwB;UAEvB,IAAG,UAAU,YAAY,IAAzB,EAA8B;YAC7B,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,mBAAtB;YACA,IAAI,CAAC,GAAL,CAAS,UAAT,GAAsB,SAAtB,CAAgC,GAAhC,CAAoC,mBAApC;YACA,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,GAA7B,CAAiC,mBAAjC;;YACA,OAAM,OAAO,CAAC,UAAd,EAA0B,OAAO,CAAC,WAAR,CAAoB,OAAO,CAAC,UAA5B;;YAC1B,OAAO,CAAC,WAAR,CAAoB,UAApB,EAL6B,CAOnC;;YACM,QAAQ,GARqB,CAUnC;;YACM,IAAI,QAAQ,GAAG,OAAO,CAAC,QAAvB;;YAEA,KAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,QAAQ,CAAC,MAA7B,EAAqC,CAAC,EAAtC,EAA0C;cACzC,QAAQ,CAAC,CAAD,CAAR,CAAY,gBAAZ,CAA6B,OAA7B,EAAsC,UAAS,CAAT,EAAW;gBAChD,CAAC,CAAC,eAAF;cACA,CAFD;YAGA;UACD,CAlBD,MAkBK;YACJ,OAAO,CAAC,IAAR,CAAa,6EAAb,EAA4F,UAA5F;YACA,OAAO,CAAC,IAAR;YACA,OAAO,KAAP;UACA;QAED,CA1BD,MA0BK;UACJ,OAAO,CAAC,IAAR;UACA,OAAO,KAAP;QACA;;QAED,OAAO,IAAP;MACA,CA9DD,MA8DK;QACJ,KAAK,UAAL,GAAkB,KAAlB;QACA,OAAO,CAAC,IAAR;QACA,OAAO,KAAP;MACA;IACD,CA1ED,MA0EK;MACJ,KAAK,UAAL,GAAkB,KAAlB;MACA,OAAO,CAAC,IAAR;MACA,OAAO,KAAP;IACA;EACD;;EAED,cAAc,GAAE;IACf,IAAI,MAAM,GAAG,EAAb;IAEA,KAAK,WAAL,CAAiB,OAAjB,CAA0B,IAAD,IAAU;MAClC,MAAM,CAAC,IAAP,CAAY,IAAI,CAAC,YAAL,EAAZ;IACA,CAFD;IAIA,OAAO,MAAP;EACA;;EAED,WAAW,CAAC,IAAD,EAAM;IAChB,IAAI,SAAJ;;IAEA,IAAG,IAAI,CAAC,OAAL,CAAa,IAAb,IAAqB,IAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,MAA1C,EAAiD;MAChD,IAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,MAAlB,GAA2B,KAA3B;MAEA,KAAK,QAAL,CAAc,mBAAd,EAAmC,IAAnC;IACA;;IAED,SAAS,GAAG,KAAK,WAAL,CAAiB,OAAjB,CAAyB,IAAzB,CAAZ;;IAEA,IAAG,SAAS,GAAG,CAAC,CAAhB,EAAkB;MACjB,KAAK,WAAL,CAAiB,MAAjB,CAAwB,SAAxB,EAAmC,CAAnC;IACA;EACD;;AAtsBuB;;;AAysBzBA,MAAI,CAAC,UAALA,GAAkB,MAAlBA,EAEA;;AACAA,MAAI,CAAC,OAALA,GAAe,cAAfA;;ACjtBA,MAAM,SAAN,CAAe;EACd,WAAW,CAAC,IAAD,EAAO,OAAP,EAAgB,SAAhB,EAA2B,MAA3B,EAAkC;IAC5C,KAAK,IAAL,GAAY,IAAZ;IACA,KAAK,OAAL,GAAe,OAAf;IACA,KAAK,SAAL,GAAiB,SAAS,IAAI,KAA9B;IACA,KAAK,MAAL,GAAc,MAAM,IAAI,CAAxB;EACA;;AANa;;ACAf,MAAM,YAAN,CAAkB;EACjB,WAAW,CAAC,KAAD,EAAQ,SAAR,EAAmB,KAAnB,EAA0B,MAA1B,EAAkC,KAAlC,EAAwC;IAClD,KAAK,KAAL,GAAa,KAAb;IACA,KAAK,SAAL,GAAiB,SAAS,IAAI,KAA9B;IACA,KAAK,KAAL,GAAa,KAAb;IACA,KAAK,MAAL,GAAc,MAAd;IACA,KAAK,KAAL,GAAa,KAAb;EACA;;AAPgB;;ACKlB,MAAM,MAAN,SAAqB,MAArB,CAA2B;EAE1B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,MAAL,GAAc,EAAd;IACA,KAAK,eAAL,GAAuB,IAAvB;IACA,KAAK,UAAL,GAAkB,EAAlB;IAEA,KAAK,mBAAL,CAAyB,kBAAzB,EAA6C,KAA7C,EAPiB,CAOmC;;IAEpD,KAAK,oBAAL,CAA0B,YAA1B;IACA,KAAK,oBAAL,CAA0B,iBAA1B;EACA;;EAED,UAAU,GAAE;IACX,KAAK,qBAAL,CAA2B,SAA3B,EAAsC,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAtC;EACA,CAjByB,CAmB3B;EACA;EACA;EAGA;EACA;EACA;;;EAEC,kBAAkB,CAAC,MAAD,EAAS,KAAT,EAAgB,KAAhB,EAAuB,UAAvB,EAAkC;IACnD,KAAK,eAAL,GAAuB,KAAvB;IACA,KAAK,MAAL,GAAc,MAAM,IAAI,EAAxB;IACA,KAAK,UAAL,GAAkB,UAAlB;IAEA,IAAI,OAAO,GAAG,KAAK,MAAL,CAAY,aAAZ,KAA8B,KAA9B,GAAsC,KAAK,mBAAL,CAAyB,KAAK,0BAAL,EAAzB,CAAtC,GAAoG,EAAlH;IACA,IAAI,IAAI,GAAG,KAAK,gBAAL,CAAsB,KAAK,SAAL,CAAe,KAAf,CAAtB,CAAX;IAEA,OAAO,OAAO,CAAC,MAAR,CAAe,IAAf,CAAP;EACA;;EAED,aAAa,CAAC,MAAD,EAAS,KAAT,EAAgB,KAAhB,EAAuB,UAAvB,EAAkC;IAC9C,IAAI,IAAI,GAAG,KAAK,kBAAL,CAAwB,MAAxB,EAAgC,KAAhC,EAAuC,KAAvC,EAA8C,UAA9C,CAAX;IAEA,OAAO,KAAK,oBAAL,CAA0B,IAA1B,CAAP;EACA;;EAED,SAAS,CAAC,KAAD,EAAO;IACf,IAAI,IAAI,GAAG,EAAX;;IAEA,IAAG,OAAO,KAAP,IAAgB,UAAnB,EAA8B;MAC7B,KAAK,CAAC,IAAN,CAAW,KAAK,KAAhB,EAAuB,OAAvB,CAAgC,GAAD,IAAQ;QACtC,GAAG,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,GAA9B,CAAN;;QAEA,IAAG,GAAH,EAAO;UACN,IAAI,CAAC,IAAL,CAAU,GAAV;QACA;MACD,CAND;IAOA,CARD,MAQK;MACJ,QAAO,KAAP;QACC,KAAK,IAAL;QACA,KAAK,SAAL;UACC,IAAI,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,KAArC,EAA4C,IAA5C,CAAP;UACA;;QAED,KAAK,KAAL;UACC,IAAI,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,IAA7B;UACA;;QAED,KAAK,UAAL;UACC,IAAI,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,YAApC;UACA;;QAED,KAAK,QAAL;QACA;UACC,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAtB,EAAiC;YAChC,IAAI,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,KAAK,KAAL,CAAW,UAAX,CAAsB,WAAtB,CAAkC,MAAlC,GAA2C,CAAhF,CAAP;UACA,CAFD,MAEK;YACJ,IAAI,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,EAAP;UACA;;MApBH;IAsBA;;IAED,OAAO,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,IAAlB,CAAP;EACA;;EAED,0BAA0B,GAAE;IAC3B,IAAI,MAAM,GAAG,EAAb;IAEA,IAAI,OAAO,GAAG,KAAK,MAAL,CAAY,YAAZ,KAA6B,KAA7B,GAAqC,KAAK,KAAL,CAAW,aAAX,CAAyB,OAA9D,GAAwE,KAAK,KAAL,CAAW,aAAX,CAAyB,cAA/G;IAEA,OAAO,CAAC,OAAR,CAAiB,MAAD,IAAY;MAC3B,IAAI,OAAO,GAAG,KAAK,kBAAL,CAAwB,MAAxB,CAAd;;MAEA,IAAG,OAAH,EAAW;QACV,MAAM,CAAC,IAAP,CAAY,OAAZ;MACA;IACD,CAND;IAQA,OAAO,MAAP;EACA;;EAED,kBAAkB,CAAC,MAAD,EAAQ;IACzB,IAAI,SAAS,GAAG,MAAM,CAAC,OAAvB;IAAA,IACA,QAAQ,GAAG,CADX;IAAA,IAEA,KAAK,GAAG,MAAM,CAAC,UAAP,CAAkB,WAAW,KAAK,UAAL,CAAgB,MAAhB,CAAuB,CAAvB,EAA0B,WAA1B,KAA0C,KAAK,UAAL,CAAgB,KAAhB,CAAsB,CAAtB,CAArD,CAAlB,KAAqG,MAAM,CAAC,UAAP,CAAkB,KAF/H;IAIA,IAAI,SAAS,GAAG;MACf,KAAK,EAAC,KADS;MAEf,MAAM,EAAC,MAFQ;MAGf,KAAK,EAAC;IAHS,CAAhB;;IAMA,IAAG,SAAS,CAAC,MAAb,EAAoB;MACnB,SAAS,CAAC,SAAV,GAAsB,EAAtB;MACA,SAAS,CAAC,KAAV,GAAkB,CAAlB;MAEA,SAAS,CAAC,OAAV,CAAmB,QAAD,IAAc;QAC/B,IAAI,YAAY,GAAG,KAAK,kBAAL,CAAwB,QAAxB,CAAnB;;QAEA,IAAG,YAAH,EAAgB;UACf,SAAS,CAAC,KAAV,IAAmB,YAAY,CAAC,KAAhC;UACA,SAAS,CAAC,SAAV,CAAoB,IAApB,CAAyB,YAAzB;;UAEA,IAAG,YAAY,CAAC,KAAb,GAAqB,QAAxB,EAAiC;YAChC,QAAQ,GAAG,YAAY,CAAC,KAAxB;UACA;QACD;MACD,CAXD;MAaA,SAAS,CAAC,KAAV,IAAmB,QAAnB;;MAEA,IAAG,CAAC,SAAS,CAAC,KAAd,EAAoB;QACnB,OAAO,KAAP;MACA;IACD,CAtBD,MAsBK;MACJ,IAAG,KAAK,cAAL,CAAoB,MAApB,CAAH,EAA+B;QAC9B,SAAS,CAAC,KAAV,GAAkB,CAAlB;MACA,CAFD,MAEK;QACJ,OAAO,KAAP;MACA;IACD;;IAED,OAAO,SAAP;EACA;;EAED,cAAc,CAAC,MAAD,EAAQ;IACrB,IAAI,OAAO,GAAG,MAAM,CAAC,UAAP,CAAkB,KAAK,UAAvB,CAAd;;IAEA,IAAG,OAAO,OAAP,KAAmB,UAAtB,EAAiC;MAChC,OAAO,GAAG,OAAO,CAAC,IAAR,CAAa,KAAK,KAAlB,EAAyB,MAAM,CAAC,YAAP,EAAzB,CAAV;IACA;;IAED,OAAO,OAAO,KAAK,KAAZ,KAAsB,MAAM,CAAC,OAAP,IAAmB,CAAC,MAAM,CAAC,OAAR,IAAmB,OAA5D,CAAP;EACA;;EAED,mBAAmB,CAAC,OAAD,EAAS;IAC3B,IAAI,OAAO,GAAG,EAAd;IAAA,IACA,WAAW,GAAG,CADd;IAAA,IAEA,UAAU,GAAG,EAFb;;IAIA,SAAS,gBAAT,CAA0B,MAA1B,EAAkC,KAAlC,EAAwC;MAEvC,IAAI,KAAK,GAAG,WAAW,GAAG,KAA1B;;MAEA,IAAG,OAAO,OAAO,CAAC,KAAD,CAAd,KAA0B,WAA7B,EAAyC;QACxC,OAAO,CAAC,KAAD,CAAP,GAAiB,EAAjB;MACA;;MAED,MAAM,CAAC,MAAP,GAAgB,MAAM,CAAC,SAAP,GAAmB,CAAnB,GAAwB,KAAK,GAAG,MAAM,CAAC,KAAhB,GAAyB,CAAhE;MAEA,OAAO,CAAC,KAAD,CAAP,CAAe,IAAf,CAAoB,MAApB;;MAEA,IAAG,MAAM,CAAC,MAAP,GAAgB,CAAnB,EAAqB;QACpB,KAAI,IAAI,CAAC,GAAG,CAAZ,EAAe,CAAC,GAAG,MAAM,CAAC,MAA1B,EAAkC,CAAC,EAAnC,EAAuC;UAEtC,IAAG,OAAO,OAAO,CAAC,KAAK,GAAG,CAAT,CAAd,KAA8B,WAAjC,EAA6C;YAC5C,OAAO,CAAC,KAAK,GAAG,CAAT,CAAP,GAAqB,EAArB;UACA;;UAED,OAAO,CAAC,KAAK,GAAG,CAAT,CAAP,CAAmB,IAAnB,CAAwB,KAAxB;QACA;MACD;;MAED,IAAG,MAAM,CAAC,KAAP,GAAe,CAAlB,EAAoB;QACnB,KAAI,IAAI,CAAC,GAAG,CAAZ,EAAe,CAAC,GAAG,MAAM,CAAC,KAA1B,EAAiC,CAAC,EAAlC,EAAsC;UACrC,OAAO,CAAC,KAAD,CAAP,CAAe,IAAf,CAAoB,KAApB;QACA;MACD;;MAED,IAAG,MAAM,CAAC,SAAV,EAAoB;QACnB,MAAM,CAAC,SAAP,CAAiB,OAAjB,CAAyB,UAAS,QAAT,EAAkB;UAC1C,gBAAgB,CAAC,QAAD,EAAW,KAAK,GAAC,CAAjB,CAAhB;QACA,CAFD;MAGA;IACD,CAvC0B,CAyC7B;;;IACE,OAAO,CAAC,OAAR,CAAgB,UAAS,MAAT,EAAgB;MAC/B,IAAG,MAAM,CAAC,KAAP,GAAe,WAAlB,EAA8B;QAC7B,WAAW,GAAG,MAAM,CAAC,KAArB;MACA;IACD,CAJD;IAMA,OAAO,CAAC,OAAR,CAAgB,UAAS,MAAT,EAAgB;MAC/B,gBAAgB,CAAC,MAAD,EAAQ,CAAR,CAAhB;IACA,CAFD;IAIA,OAAO,CAAC,OAAR,CAAiB,MAAD,IAAY;MAC3B,IAAI,OAAO,GAAG,EAAd;MAEA,MAAM,CAAC,OAAP,CAAgB,GAAD,IAAS;QACvB,IAAG,GAAH,EAAO;UACN,IAAI,KAAK,GAAG,OAAO,GAAG,CAAC,KAAX,KAAqB,WAArB,GAAmC,EAAnC,GAAwC,GAAG,CAAC,KAAxD;UACA,OAAO,CAAC,IAAR,CAAa,IAAI,YAAJ,CAAiB,KAAjB,EAAwB,GAAG,CAAC,MAAJ,CAAW,YAAX,EAAxB,EAAmD,GAAG,CAAC,KAAvD,EAA8D,GAAG,CAAC,MAAlE,EAA0E,GAAG,CAAC,KAA9E,CAAb;QACA,CAHD,MAGK;UACJ,OAAO,CAAC,IAAR,CAAa,IAAb;QACA;MACD,CAPD;MASA,UAAU,CAAC,IAAX,CAAgB,IAAI,SAAJ,CAAc,QAAd,EAAwB,OAAxB,CAAhB;IACA,CAbD;IAeA,OAAO,UAAP;EACA;;EAED,gBAAgB,CAAC,IAAD,EAAM;IAErB,IAAI,OAAO,GAAG,EAAd;IACA,IAAI,UAAU,GAAG,EAAjB;IAEA,KAAK,KAAL,CAAW,aAAX,CAAyB,cAAzB,CAAwC,OAAxC,CAAiD,MAAD,IAAY;MAC3D,IAAI,KAAK,cAAL,CAAoB,MAApB,CAAJ,EAAiC;QAChC,OAAO,CAAC,IAAR,CAAa,MAAM,CAAC,YAAP,EAAb;MACA;IACD,CAJD;;IAMA,IAAG,KAAK,MAAL,CAAY,WAAZ,KAA4B,KAA5B,IAAqC,KAAK,KAAL,CAAW,SAAX,CAAqB,aAArB,CAAxC,EAA4E;MAC3E,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,cAAlC,EAAiD;QAChD,IAAI,CAAC,OAAL,CAAa,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,MAA5C;MACA;;MAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,cAAlC,EAAiD;QAChD,IAAI,CAAC,IAAL,CAAU,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,MAAzC;MACA;IACD;;IAED,IAAI,GAAG,IAAI,CAAC,MAAL,CAAa,GAAD,IAAS;MAC3B,QAAO,GAAG,CAAC,IAAX;QACC,KAAK,OAAL;UACC,OAAO,KAAK,MAAL,CAAY,SAAZ,KAA0B,KAAjC;;QAED,KAAK,MAAL;UACC,OAAO,KAAK,MAAL,CAAY,WAAZ,KAA4B,KAAnC;;QAED,KAAK,KAAL;UACC,OAAO,EAAE,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,IAA+B,KAAK,MAAL,CAAY,QAAZ,KAAyB,KAAxD,IAAiE,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,MAAxF,CAAP;MARF;;MAWA,OAAO,IAAP;IACA,CAbM,CAAP;IAeA,IAAI,CAAC,OAAL,CAAa,CAAC,GAAD,EAAM,CAAN,KAAY;MACxB,IAAI,OAAO,GAAG,GAAG,CAAC,OAAJ,CAAY,KAAK,UAAjB,CAAd;MACA,IAAI,UAAU,GAAG,EAAjB;MACA,IAAI,MAAM,GAAG,CAAb;;MAEA,QAAO,GAAG,CAAC,IAAX;QACC,KAAK,OAAL;UACC,MAAM,GAAG,GAAG,CAAC,KAAb;UACA,UAAU,CAAC,IAAX,CAAgB,IAAI,YAAJ,CAAiB,GAAG,CAAC,GAArB,EAA0B,GAAG,CAAC,YAAJ,EAA1B,EAA8C,OAAO,CAAC,MAAtD,EAA8D,CAA9D,CAAhB;UACA;;QAED,KAAK,MAAL;QACA,KAAK,KAAL;UACC,OAAO,CAAC,OAAR,CAAiB,GAAD,IAAS;YACxB,UAAU,CAAC,IAAX,CAAgB,IAAI,YAAJ,CAAiB,GAAG,CAAC,OAAJ,CAAY,aAAZ,CAA0B,OAA1B,CAAjB,EAAqD,GAArD,EAA0D,CAA1D,EAA6D,CAA7D,CAAhB;UACA,CAFD;;UAIA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,IAA+B,KAAK,MAAL,CAAY,QAAZ,KAAyB,KAA3D,EAAiE;YAChE,MAAM,GAAG,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,KAA9B;UACA;;UACD;MAfF;;MAkBA,UAAU,CAAC,IAAX,CAAgB,IAAI,SAAJ,CAAc,GAAG,CAAC,IAAlB,EAAwB,UAAxB,EAAoC,GAAG,CAAC,YAAJ,EAApC,EAAwD,MAAxD,CAAhB;IACA,CAxBD;IA0BA,OAAO,UAAP;EACA;;EAED,oBAAoB,CAAC,IAAD,EAAM;IACzB,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAZ;IAAA,IACA,QAAQ,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CADX;IAAA,IAEA,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAFT;IAAA,IAGA,MAAM,GAAG,KAAK,iBAAL,EAHT;IAAA,IAIA,YAAY,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,kBAAkB,KAAK,UAAL,CAAgB,MAAhB,CAAuB,CAAvB,EAA0B,WAA1B,KAA0C,KAAK,UAAL,CAAgB,KAAhB,CAAsB,CAAtB,CAA5D,CAAnB,CAJf;IAAA,IAKA,KAAK,GAAG,EALR;IAOA,KAAK,CAAC,YAAN,GAAqB,YAAY,KAAK,IAAjB,GAAwB,YAAxB,GAAuC,KAAK,KAAL,CAAW,OAAX,CAAmB,YAA/E;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,IAA8B,KAAK,MAAL,CAAY,QAAZ,KAAyB,KAAvD,IAAgE,KAAK,KAAL,CAAW,SAAX,CAAqB,aAArB,CAAnE,EAAuG;MACtG,KAAK,CAAC,gBAAN,GAAyB,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,CAA4B,YAArD;IACA,CAZwB,CAc3B;;;IACE,KAAK,CAAC,WAAN,GAAoB,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAiB,KAAK,UAAL,CAAgB,MAAhB,CAAuB,CAAvB,EAA0B,WAA1B,KAA0C,KAAK,UAAL,CAAgB,KAAhB,CAAsB,CAAtB,CAA3D,CAAnB,CAApB;;IAEA,IAAG,KAAK,CAAC,WAAN,IAAqB,CAAC,KAAK,CAAC,OAAN,CAAc,KAAK,CAAC,WAApB,CAAzB,EAA0D;MACzD,KAAK,CAAC,WAAN,GAAoB,CAAC,KAAK,CAAC,WAAP,CAApB;IACA;;IAED,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,uBAApB;IAEA,KAAK,gBAAL,CAAsB,KAAK,KAAL,CAAW,aAAX,CAAyB,iBAAzB,EAAtB,EAAoE,QAApE,EAA8E,CAAC,YAAD,EAAe,aAAf,EAA8B,cAA9B,EAA8C,eAA9C,EAA+D,kBAA/D,EAAmF,OAAnF,EAA4F,aAA5F,EAA2G,aAA3G,EAA0H,WAA1H,CAA9E;;IAGA,IAAG,IAAI,CAAC,MAAL,GAAc,IAAjB,EAAsB;MACrB,OAAO,CAAC,IAAR,CAAa,0EAAb;IACA;;IAED,IAAI,CAAC,OAAL,CAAa,CAAC,GAAD,EAAM,CAAN,KAAY;MACxB,IAAI,KAAJ;;MAEA,QAAO,GAAG,CAAC,IAAX;QACC,KAAK,QAAL;UACC,QAAQ,CAAC,WAAT,CAAqB,KAAK,qBAAL,CAA2B,GAA3B,EAAgC,KAAhC,EAAuC,MAAvC,CAArB;UACA;;QAED,KAAK,OAAL;UACC,MAAM,CAAC,WAAP,CAAmB,KAAK,oBAAL,CAA0B,GAA1B,EAA+B,KAA/B,EAAsC,MAAtC,CAAnB;UACA;;QAED,KAAK,MAAL;UACC,MAAM,CAAC,WAAP,CAAmB,KAAK,mBAAL,CAAyB,GAAzB,EAA8B,KAA9B,EAAqC,MAArC,CAAnB;UACA;;QAED,KAAK,KAAL;UACC,KAAK,GAAG,KAAK,kBAAL,CAAwB,GAAxB,EAA6B,KAA7B,EAAoC,MAApC,CAAR;UAEA,KAAK,gBAAL,CAAwB,CAAC,GAAG,CAAL,IAAW,MAAM,CAAC,OAAnB,GAA8B,MAAM,CAAC,OAArC,GAA+C,MAAM,CAAC,MAA5E,EAAoF,KAApF,EAA2F,CAAC,YAAD,EAAe,aAAf,EAA8B,cAA9B,EAA8C,eAA9C,EAA+D,OAA/D,EAAwE,aAAxE,EAAuF,aAAvF,EAAsG,WAAtG,EAAmH,kBAAnH,CAA3F;UACA,MAAM,CAAC,WAAP,CAAmB,KAAnB;UACA;MAlBF;IAoBA,CAvBD;;IAyBA,IAAG,QAAQ,CAAC,SAAZ,EAAsB;MACrB,KAAK,CAAC,WAAN,CAAkB,QAAlB;IACA;;IAED,KAAK,CAAC,WAAN,CAAkB,MAAlB;IAGA,KAAK,gBAAL,CAAsB,KAAK,KAAL,CAAW,OAAjC,EAA0C,KAA1C,EAAiD,CAAC,YAAD,EAAe,aAAf,EAA8B,cAA9B,EAA8C,eAA9C,CAAjD;IACA,OAAO,KAAP;EACA;;EAED,iBAAiB,GAAE;IAClB,IAAI,MAAM,GAAG,EAAb,CADkB,CAGpB;;IACE,IAAG,KAAK,eAAL,IAAwB,MAAM,CAAC,gBAAlC,EAAmD;MAClD,MAAM,CAAC,MAAP,GAAgB,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAiC,gEAAjC,CAAhB;MACA,MAAM,CAAC,OAAP,GAAiB,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAiC,iEAAjC,CAAjB;MACA,MAAM,CAAC,OAAP,GAAiB,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAiC,gCAAjC,CAAjB;MACA,MAAM,CAAC,QAAP,GAAkB,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAiC,4DAAjC,CAAlB;MACA,MAAM,CAAC,UAAP,GAAoB,KAAK,KAAL,CAAW,OAAX,CAAmB,sBAAnB,CAA0C,iBAA1C,EAA6D,CAA7D,CAApB;;MAEA,IAAG,MAAM,CAAC,QAAV,EAAmB;QAClB,MAAM,CAAC,UAAP,GAAoB,MAAM,CAAC,QAAP,CAAgB,sBAAhB,CAAuC,gBAAvC,CAApB;QACA,MAAM,CAAC,SAAP,GAAmB,MAAM,CAAC,UAAP,CAAkB,CAAlB,CAAnB;QACA,MAAM,CAAC,QAAP,GAAkB,MAAM,CAAC,UAAP,CAAkB,MAAM,CAAC,UAAP,CAAkB,MAAlB,GAA2B,CAA7C,CAAlB;MACA;IACD;;IAED,OAAO,MAAP;EACA;;EAED,qBAAqB,CAAC,GAAD,EAAM,KAAN,EAAa,MAAb,EAAoB;IACxC,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAZ;IAEA,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAqB,MAAD,IAAY;MAC/B,IAAG,MAAH,EAAU;QACT,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAb;QACA,IAAI,UAAU,GAAG,MAAM,CAAC,SAAP,CAAiB,OAAjB,CAAyB,UAAzB,CAAoC,QAApC,GAA+C,MAAM,CAAC,SAAP,CAAiB,OAAjB,CAAyB,UAAzB,CAAoC,QAApC,CAA6C,KAA7C,CAAmD,GAAnD,CAA/C,GAAyG,EAA1H;QAEA,MAAM,CAAC,OAAP,GAAiB,MAAM,CAAC,KAAxB;QACA,MAAM,CAAC,OAAP,GAAiB,MAAM,CAAC,MAAxB;QAEA,MAAM,CAAC,SAAP,GAAmB,MAAM,CAAC,KAA1B;;QAEA,IAAG,KAAK,eAAR,EAAwB;UACvB,MAAM,CAAC,KAAP,CAAa,SAAb,GAAyB,YAAzB;QACA;;QAED,UAAU,CAAC,OAAX,CAAmB,UAAS,SAAT,EAAoB;UACtC,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,SAArB;QACA,CAFD;QAIA,KAAK,gBAAL,CAAsB,MAAM,CAAC,SAAP,CAAiB,UAAjB,EAAtB,EAAqD,MAArD,EAA6D,CAAC,YAAD,EAAe,YAAf,EAA6B,aAA7B,EAA4C,cAA5C,EAA4D,eAA5D,EAA6E,kBAA7E,EAAiG,OAAjG,EAA0G,aAA1G,EAAyH,aAAzH,EAAwI,WAAxI,CAA7D;QACA,KAAK,gBAAL,CAAsB,MAAM,CAAC,SAAP,CAAiB,OAAjB,CAAyB,cAA/C,EAA+D,MAA/D,EAAuE,CAAC,aAAD,EAAgB,cAAhB,EAAgC,eAAhC,EAAiD,gBAAjD,CAAvE;;QAEA,IAAG,MAAM,CAAC,SAAP,CAAiB,OAAjB,CAAyB,OAA5B,EAAoC;UACnC,KAAK,gBAAL,CAAsB,MAAM,CAAC,SAAP,CAAiB,UAAjB,EAAtB,EAAqD,MAArD,EAA6D,CAAC,OAAD,CAA7D;QACA,CAFD,MAEK;UACJ,IAAG,MAAM,CAAC,SAAP,CAAiB,OAAjB,CAAyB,UAAzB,CAAoC,KAAvC,EAA6C;YAC5C,MAAM,CAAC,KAAP,CAAa,KAAb,GAAqB,MAAM,CAAC,SAAP,CAAiB,OAAjB,CAAyB,UAAzB,CAAoC,KAApC,GAA4C,IAAjE;UACA;QACD;;QAED,IAAG,MAAM,CAAC,SAAP,CAAiB,OAAjB,CAAyB,MAA5B,EAAmC;UAClC,KAAK,gBAAL,CAAsB,MAAM,CAAC,SAAP,CAAiB,OAAjB,CAAyB,MAAzB,CAAgC,YAAtD,EAAoE,MAApE,EAA4E,CAAC,YAAD,CAA5E;QACA;;QAED,KAAK,CAAC,WAAN,CAAkB,MAAlB;MACA;IACD,CAnCD;IAqCA,OAAO,KAAP;EACA;;EAED,oBAAoB,CAAC,GAAD,EAAM,KAAN,EAAa,MAAb,EAAoB;IAEvC,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAZ;IAAA,IACA,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CADT;IAAA,IAEA,KAAK,GAAG,GAAG,CAAC,OAAJ,CAAY,CAAZ,CAFR;IAIA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,2BAApB;;IAEA,IAAG,KAAK,CAAC,WAAN,IAAqB,KAAK,CAAC,WAAN,CAAkB,GAAG,CAAC,MAAtB,CAAxB,EAAsD;MACrD,KAAK,CAAC,KAAN,GAAc,KAAK,CAAC,WAAN,CAAkB,GAAG,CAAC,MAAtB,EAA8B,KAAK,CAAC,KAApC,EAA2C,GAAG,CAAC,SAAJ,CAAc,MAAd,CAAqB,WAArB,EAA3C,EAA+E,GAAG,CAAC,SAAJ,CAAc,MAAd,CAAqB,OAArB,EAA/E,EAA+G,GAAG,CAAC,SAAnH,CAAd;IACA,CAFD,MAEK;MACJ,IAAG,KAAK,CAAC,WAAN,KAAsB,KAAzB,EAA+B;QAC9B,KAAK,CAAC,KAAN,GAAc,GAAG,CAAC,SAAJ,CAAc,MAAd,CAAqB,SAArB,CAA+B,KAAK,CAAC,KAArC,EAA4C,GAAG,CAAC,SAAJ,CAAc,MAAd,CAAqB,WAArB,EAA5C,EAAgF,GAAG,CAAC,SAAJ,CAAc,MAAd,CAAqB,OAArB,EAAhF,EAAgH,GAAG,CAAC,SAApH,CAAd;MACA;IACD;;IAED,MAAM,CAAC,OAAP,GAAiB,KAAK,CAAC,KAAvB;IACA,MAAM,CAAC,SAAP,GAAmB,KAAK,CAAC,KAAzB;IAEA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,6BAApB;IACA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,2BAA2B,GAAG,CAAC,MAAnD;;IAEA,IAAG,KAAK,CAAC,SAAN,CAAgB,SAAhB,EAAH,EAA+B;MAC9B,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,yBAApB;IACA;;IAED,KAAK,gBAAL,CAAsB,MAAM,CAAC,UAA7B,EAAyC,KAAzC,EAAgD,CAAC,YAAD,EAAe,aAAf,EAA8B,cAA9B,EAA8C,eAA9C,EAA+D,OAA/D,EAAwE,aAAxE,EAAuF,aAAvF,EAAsG,WAAtG,EAAmH,kBAAnH,CAAhD;IACA,KAAK,gBAAL,CAAsB,MAAM,CAAC,UAA7B,EAAyC,MAAzC,EAAiD,CAAC,aAAD,EAAgB,cAAhB,EAAgC,eAAhC,EAAiD,gBAAjD,CAAjD;IAEA,KAAK,CAAC,WAAN,CAAkB,MAAlB;IAEA,OAAO,KAAP;EACA;;EAED,mBAAmB,CAAC,GAAD,EAAM,KAAN,EAAa,MAAb,EAAoB;IACtC,IAAI,KAAK,GAAG,KAAK,kBAAL,CAAwB,GAAxB,EAA6B,KAA7B,EAAoC,MAApC,CAAZ;IAEA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,6BAApB;IACA,KAAK,gBAAL,CAAsB,MAAM,CAAC,OAA7B,EAAsC,KAAtC,EAA6C,CAAC,YAAD,EAAe,aAAf,EAA8B,cAA9B,EAA8C,eAA9C,EAA+D,OAA/D,EAAwE,aAAxE,EAAuF,aAAvF,EAAsG,WAAtG,EAAmH,kBAAnH,CAA7C;IAEA,OAAO,KAAP;EACA;;EAED,kBAAkB,CAAC,GAAD,EAAM,KAAN,EAAa,MAAb,EAAoB;IACrC,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAZ;IAEA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,2BAApB;IAEA,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAoB,CAAC,GAAD,EAAM,CAAN,KAAY;MAC/B,IAAG,GAAH,EAAO;QACN,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAb;QAAA,IACA,MAAM,GAAG,GAAG,CAAC,SAAJ,CAAc,OADvB;QAAA,IAEA,KAAK,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,eAAzB,CAAyC,MAAzC,CAFR;QAAA,IAGA,KAAK,GAAG,GAAG,CAAC,KAHZ;QAAA,IAIA,SAJA;QAMA,IAAI,WAAW,GAAG;UACjB,OAAO,EAAC,EADS;UAEjB,QAAQ,EAAC,YAAU;YAClB,OAAO,KAAP;UACA,CAJgB;UAKjB,QAAQ,EAAC,YAAU;YAClB,OAAO,MAAM,CAAC,UAAP,CAAkB,KAAzB;UACA,CAPgB;UAQjB,UAAU,EAAC,YAAU;YACpB,OAAO,MAAP;UACA,CAVgB;UAWjB,SAAS,EAAC,YAAU;YACnB,OAAO,MAAM,CAAC,YAAP,EAAP;UACA,CAbgB;UAcjB,OAAO,EAAC,YAAU;YACjB,OAAO,GAAG,CAAC,SAAJ,CAAc,OAAd,EAAP;UACA,CAhBgB;UAiBjB,MAAM,EAAC,YAAU;YAChB,OAAO,GAAG,CAAC,SAAX;UACA,CAnBgB;UAoBjB,YAAY,EAAC,YAAU;YACtB,OAAO,WAAP;UACA,CAtBgB;UAuBjB,MAAM,EAAC;QAvBU,CAAlB;QA0BA,IAAI,UAAU,GAAG,MAAM,CAAC,UAAP,CAAkB,QAAlB,GAA6B,MAAM,CAAC,UAAP,CAAkB,QAAlB,CAA2B,KAA3B,CAAiC,GAAjC,CAA7B,GAAqE,EAAtF;QAEA,UAAU,CAAC,OAAX,CAAmB,UAAS,SAAT,EAAoB;UACtC,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,SAArB;QACA,CAFD;;QAIA,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,QAArB,KAAkC,KAAK,MAAL,CAAY,WAAZ,KAA4B,KAAjE,EAAuE;UACtE,KAAK,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,CAA0B,iBAA1B,CAA4C,WAA5C,EAAyD,KAAK,UAA9D,CAAR;QACA,CAFD,MAEK;UACJ,QAAO,OAAO,KAAd;YACC,KAAK,QAAL;cACC,KAAK,GAAG,KAAK,KAAK,IAAV,GAAiB,IAAI,CAAC,SAAL,CAAe,KAAf,CAAjB,GAAyC,EAAjD;cACA;;YAED,KAAK,WAAL;cACC,KAAK,GAAG,EAAR;cACA;UAPF;QASA;;QAED,IAAG,KAAK,YAAY,IAApB,EAAyB;UACxB,MAAM,CAAC,WAAP,CAAmB,KAAnB;QACA,CAFD,MAEK;UACJ,MAAM,CAAC,SAAP,GAAmB,KAAnB;QACA;;QAED,SAAS,GAAG,MAAM,CAAC,UAAP,IAAqB,MAAM,CAAC,UAAP,CAAkB,KAAlB,CAArB,GAAgD,MAAM,CAAC,UAAP,CAAkB,KAAlB,CAAhD,GAA2E,MAAM,CAAC,SAA9F;;QAEA,IAAG,SAAH,EAAa;UACZ,KAAK,gBAAL,CAAsB,SAAtB,EAAiC,MAAjC,EAAyC,CAAC,aAAD,EAAgB,cAAhB,EAAgC,eAAhC,EAAiD,gBAAjD,EAAmE,YAAnE,EAAiF,aAAjF,EAAgG,cAAhG,EAAgH,eAAhH,EAAiI,OAAjI,EAA0I,aAA1I,EAAyJ,aAAzJ,EAAwK,WAAxK,EAAqL,YAArL,CAAzC;;UAEA,IAAG,MAAM,CAAC,UAAP,CAAkB,KAArB,EAA2B;YAC1B,MAAM,CAAC,KAAP,CAAa,SAAb,GAAyB,MAAM,CAAC,UAAP,CAAkB,KAA3C;UACA;QACD;;QAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,IAA+B,KAAK,MAAL,CAAY,QAAZ,KAAyB,KAA3D,EAAiE;UAChE,IAAI,KAAK,CAAC,gBAAN,IAA0B,KAAK,CAAC,gBAAN,IAA0B,MAAM,CAAC,KAA5D,IAAuE,CAAC,KAAK,CAAC,gBAAP,IAA2B,CAAC,IAAI,CAA1G,EAA6G;YAC5G,IAAG,GAAG,CAAC,SAAJ,CAAc,IAAd,CAAmB,OAAnB,CAA2B,QAA3B,CAAoC,SAAvC,EAAiD;cAChD,MAAM,CAAC,YAAP,CAAoB,GAAG,CAAC,SAAJ,CAAc,IAAd,CAAmB,OAAnB,CAA2B,QAA3B,CAAoC,SAApC,CAA8C,SAA9C,CAAwD,IAAxD,CAApB,EAAmF,MAAM,CAAC,UAA1F;YACA;;YACD,IAAG,GAAG,CAAC,SAAJ,CAAc,IAAd,CAAmB,OAAnB,CAA2B,QAA3B,CAAoC,QAAvC,EAAgD;cAC/C,MAAM,CAAC,YAAP,CAAoB,GAAG,CAAC,SAAJ,CAAc,IAAd,CAAmB,OAAnB,CAA2B,QAA3B,CAAoC,QAApC,CAA6C,SAA7C,CAAuD,IAAvD,CAApB,EAAkF,MAAM,CAAC,UAAzF;YACA;UACD;QACD;;QAED,KAAK,CAAC,WAAN,CAAkB,MAAlB;;QAEA,IAAG,WAAW,CAAC,OAAZ,CAAoB,MAApB,IAA8B,WAAW,CAAC,OAAZ,CAAoB,MAApB,CAA2B,gBAA5D,EAA6E;UAC5E,WAAW,CAAC,OAAZ,CAAoB,MAApB,CAA2B,gBAA3B;QACA;;QAED,IAAG,KAAK,CAAC,YAAN,IAAsB,KAAK,MAAL,CAAY,WAAZ,KAA4B,KAArD,EAA2D;UAC1D,KAAK,CAAC,YAAN,CAAmB,GAAG,CAAC,SAAvB;QACA;MACD;IACD,CA3FD;IA6FA,OAAO,KAAP;EACA;;EAED,iBAAiB,CAAC,IAAD,EAAM;IACtB,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAb;IAEA,MAAM,CAAC,WAAP,CAAmB,KAAK,oBAAL,CAA0B,IAA1B,CAAnB;IAEA,OAAO,MAAM,CAAC,SAAd;EACA;;EAED,OAAO,CAAC,OAAD,EAAU,KAAV,EAAiB,MAAjB,EAAyB,UAAzB,EAAoC;IAC1C,IAAI,IAAI,GAAG,KAAK,kBAAL,CAAwB,MAAM,IAAI,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAArD,EAAuE,KAAvE,EAA8E,OAA9E,EAAuF,UAAU,IAAI,YAArG,CAAX;IAEA,OAAO,KAAK,iBAAL,CAAuB,IAAvB,CAAP;EACA;;EAED,gBAAgB,CAAC,IAAD,EAAO,EAAP,EAAW,KAAX,EAAiB;IAChC,IAAG,KAAK,eAAL,IAAwB,IAAxB,IAAgC,EAAnC,EAAsC;MAErC,IAAI,MAAM,GAAG;QACZ,oBAAqB,iBADT;QAEZ,SAAU,WAFE;QAGZ,SAAU,OAHE;QAIZ,eAAgB,YAJJ;QAKZ,eAAgB,YALJ;QAMZ,aAAc,UANF;QAOZ,cAAe,WAPH;QAQZ,cAAe,WARH;QASZ,eAAgB,YATJ;QAUZ,gBAAiB,aAVL;QAWZ,iBAAkB,cAXN;QAYZ,eAAgB,YAZJ;QAaZ,gBAAiB,aAbL;QAcZ,iBAAkB,cAdN;QAeZ,kBAAmB;MAfP,CAAb;;MAkBA,IAAG,MAAM,CAAC,gBAAV,EAA2B;QAC1B,IAAI,SAAS,GAAG,MAAM,CAAC,gBAAP,CAAwB,IAAxB,CAAhB;QAEA,KAAK,CAAC,OAAN,CAAc,UAAS,IAAT,EAAc;UAC3B,EAAE,CAAC,KAAH,CAAS,MAAM,CAAC,IAAD,CAAf,IAAyB,SAAS,CAAC,gBAAV,CAA2B,IAA3B,CAAzB;QACA,CAFD;MAGA;IACD;EACD;;AA9lByB;;;AAimB3B,MAAM,CAAC,UAAP,GAAoB,QAApB;ACtmBA,IAAA,cAAA,GAAe;EAEf;EACC,KAAI,UAAS,SAAT,EAAoB,MAApB,EAA4B,OAA5B,EAAqC,YAArC,EAAkD;IACrD,OAAO,MAAM,IAAI,SAAV,GAAsB,IAAtB,GAA6B,KAApC;EACA,CALa;EAOf;EACC,KAAI,UAAS,SAAT,EAAoB,MAApB,EAA4B,OAA5B,EAAqC,YAArC,EAAkD;IACrD,OAAO,MAAM,GAAG,SAAT,GAAqB,IAArB,GAA4B,KAAnC;EACA,CAVa;EAYf;EACC,MAAK,UAAS,SAAT,EAAoB,MAApB,EAA4B,OAA5B,EAAqC,YAArC,EAAkD;IACtD,OAAO,MAAM,IAAI,SAAV,GAAsB,IAAtB,GAA6B,KAApC;EACA,CAfa;EAiBf;EACC,KAAI,UAAS,SAAT,EAAoB,MAApB,EAA4B,OAA5B,EAAqC,YAArC,EAAkD;IACrD,OAAO,MAAM,GAAG,SAAT,GAAqB,IAArB,GAA4B,KAAnC;EACA,CApBa;EAsBf;EACC,MAAK,UAAS,SAAT,EAAoB,MAApB,EAA4B,OAA5B,EAAqC,YAArC,EAAkD;IACtD,OAAO,MAAM,IAAI,SAAV,GAAsB,IAAtB,GAA6B,KAApC;EACA,CAzBa;EA2Bf;EACC,MAAK,UAAS,SAAT,EAAoB,MAApB,EAA4B,OAA5B,EAAqC,YAArC,EAAkD;IACtD,OAAO,MAAM,IAAI,SAAV,GAAsB,IAAtB,GAA6B,KAApC;EACA,CA9Ba;EAgCd,SAAQ,UAAS,SAAT,EAAoB,MAApB,EAA4B,OAA5B,EAAqC,YAArC,EAAkD;IAEzD,IAAG,OAAO,SAAP,IAAoB,QAAvB,EAAgC;MAC/B,SAAS,GAAG,IAAI,MAAJ,CAAW,SAAX,CAAZ;IACA;;IAED,OAAO,SAAS,CAAC,IAAV,CAAe,MAAf,CAAP;EACA,CAvCa;EAyCf;EACC,QAAO,UAAS,SAAT,EAAoB,MAApB,EAA4B,OAA5B,EAAqC,YAArC,EAAkD;IACxD,IAAG,SAAS,KAAK,IAAd,IAAsB,OAAO,SAAP,KAAqB,WAA9C,EAA0D;MACzD,OAAO,MAAM,KAAK,SAAX,GAAuB,IAAvB,GAA8B,KAArC;IACA,CAFD,MAEK;MACJ,IAAG,OAAO,MAAP,KAAkB,WAAlB,IAAiC,MAAM,KAAK,IAA/C,EAAoD;QACnD,OAAO,MAAM,CAAC,MAAD,CAAN,CAAe,WAAf,GAA6B,OAA7B,CAAqC,SAAS,CAAC,WAAV,EAArC,IAAgE,CAAC,CAAxE;MACA,CAFD,MAGI;QACH,OAAO,KAAP;MACA;IACD;EACD,CArDa;EAuDf;EACC,YAAW,UAAS,SAAT,EAAoB,MAApB,EAA4B,OAA5B,EAAqC,YAArC,EAAkD;IAC5D,IAAI,QAAQ,GAAG,SAAS,CAAC,WAAV,GAAwB,KAAxB,CAA8B,OAAO,YAAY,CAAC,SAApB,KAAkC,WAAlC,GAAgD,GAAhD,GAAsD,YAAY,CAAC,SAAjG,CAAf;IAAA,IACA,KAAK,GAAG,MAAM,CAAC,MAAM,KAAK,IAAX,IAAmB,OAAO,MAAP,KAAkB,WAArC,GAAmD,EAAnD,GAAwD,MAAzD,CAAN,CAAuE,WAAvE,EADR;IAAA,IAEA,OAAO,GAAG,EAFV;IAIA,QAAQ,CAAC,OAAT,CAAkB,OAAD,IAAY;MAC5B,IAAG,KAAK,CAAC,QAAN,CAAe,OAAf,CAAH,EAA2B;QAC1B,OAAO,CAAC,IAAR,CAAa,IAAb;MACA;IACD,CAJD;IAMA,OAAO,YAAY,CAAC,QAAb,GAAwB,OAAO,CAAC,MAAR,KAAmB,QAAQ,CAAC,MAApD,GAA6D,CAAC,CAAC,OAAO,CAAC,MAA9E;EACA,CApEa;EAsEf;EACC,UAAS,UAAS,SAAT,EAAoB,MAApB,EAA4B,OAA5B,EAAqC,YAArC,EAAkD;IAC1D,IAAG,SAAS,KAAK,IAAd,IAAsB,OAAO,SAAP,KAAqB,WAA9C,EAA0D;MACzD,OAAO,MAAM,KAAK,SAAX,GAAuB,IAAvB,GAA8B,KAArC;IACA,CAFD,MAEK;MACJ,IAAG,OAAO,MAAP,KAAkB,WAAlB,IAAiC,MAAM,KAAK,IAA/C,EAAoD;QACnD,OAAO,MAAM,CAAC,MAAD,CAAN,CAAe,WAAf,GAA6B,UAA7B,CAAwC,SAAS,CAAC,WAAV,EAAxC,CAAP;MACA,CAFD,MAGI;QACH,OAAO,KAAP;MACA;IACD;EACD,CAlFa;EAoFf;EACC,QAAO,UAAS,SAAT,EAAoB,MAApB,EAA4B,OAA5B,EAAqC,YAArC,EAAkD;IACxD,IAAG,SAAS,KAAK,IAAd,IAAsB,OAAO,SAAP,KAAqB,WAA9C,EAA0D;MACzD,OAAO,MAAM,KAAK,SAAX,GAAuB,IAAvB,GAA8B,KAArC;IACA,CAFD,MAEK;MACJ,IAAG,OAAO,MAAP,KAAkB,WAAlB,IAAiC,MAAM,KAAK,IAA/C,EAAoD;QACnD,OAAO,MAAM,CAAC,MAAD,CAAN,CAAe,WAAf,GAA6B,QAA7B,CAAsC,SAAS,CAAC,WAAV,EAAtC,CAAP;MACA,CAFD,MAGI;QACH,OAAO,KAAP;MACA;IACD;EACD,CAhGa;EAkGf;EACC,MAAK,UAAS,SAAT,EAAoB,MAApB,EAA4B,OAA5B,EAAqC,YAArC,EAAkD;IACtD,IAAG,KAAK,CAAC,OAAN,CAAc,SAAd,CAAH,EAA4B;MAC3B,OAAO,SAAS,CAAC,MAAV,GAAmB,SAAS,CAAC,OAAV,CAAkB,MAAlB,IAA4B,CAAC,CAAhD,GAAoD,IAA3D;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,8CAAb,EAA6D,SAA7D;MACA,OAAO,KAAP;IACA;EACD;AA1Ga,CAAf;;ACIA,MAAM,MAAN,SAAqB,MAArB,CAA2B;EAE1B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,UAAL,GAAkB,EAAlB,CAHiB,CAGI;;IACrB,KAAK,aAAL,GAAqB,EAArB,CAJiB,CAIO;;IACxB,KAAK,mBAAL,GAA2B,EAA3B,CALiB,CAKa;;IAE9B,KAAK,2BAAL,GAAmC,EAAnC;IACA,KAAK,2BAAL,GAAmC,IAAnC;IAEA,KAAK,OAAL,GAAe,KAAf,CAViB,CAUI;;IACrB,KAAK,gBAAL,GAAwB,KAAxB;IAEA,KAAK,mBAAL,CAAyB,YAAzB,EAAuC,OAAvC,EAbiB,CAa+B;;IAEhD,KAAK,mBAAL,CAAyB,eAAzB,EAA0C,KAA1C,EAfiB,CAegC;;IACjD,KAAK,mBAAL,CAAyB,qBAAzB,EAAgD,KAAhD,EAhBiB,CAgBsC;;IACvD,KAAK,mBAAL,CAAyB,6BAAzB,EAAwD,GAAxD,EAjBiB,CAiB4C;;IAE7D,KAAK,oBAAL,CAA0B,cAA1B;IACA,KAAK,oBAAL,CAA0B,yBAA1B;IACA,KAAK,oBAAL,CAA0B,oBAA1B;IACA,KAAK,oBAAL,CAA0B,wBAA1B;IACA,KAAK,oBAAL,CAA0B,kBAA1B;IACA,KAAK,oBAAL,CAA0B,wBAA1B;IACA,KAAK,oBAAL,CAA0B,wBAA1B;IAEA,KAAK,qBAAL,CAA2B,YAA3B,EAAyC,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAAzC;IACA,KAAK,qBAAL,CAA2B,YAA3B,EAAyC,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAAzC;IAEA,KAAK,qBAAL,CAA2B,WAA3B,EAAwC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAxC;IACA,KAAK,qBAAL,CAA2B,eAA3B,EAA4C,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,IAA5B,CAA5C;IACA,KAAK,qBAAL,CAA2B,WAA3B,EAAwC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAxC;IACA,KAAK,qBAAL,CAA2B,YAA3B,EAAyC,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAAzC;IACA,KAAK,qBAAL,CAA2B,sBAA3B,EAAmD,KAAK,wBAAL,CAA8B,IAA9B,CAAmC,IAAnC,CAAnD;IACA,KAAK,qBAAL,CAA2B,sBAA3B,EAAmD,KAAK,wBAAL,CAA8B,IAA9B,CAAmC,IAAnC,CAAnD;IACA,KAAK,qBAAL,CAA2B,sBAA3B,EAAmD,KAAK,wBAAL,CAA8B,IAA9B,CAAmC,IAAnC,CAAnD;IACA,KAAK,qBAAL,CAA2B,kBAA3B,EAA+C,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA/C;IACA,KAAK,qBAAL,CAA2B,cAA3B,EAA2C,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA3C;IACA,KAAK,qBAAL,CAA2B,aAA3B,EAA0C,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAA1C;IACA,KAAK,qBAAL,CAA2B,mBAA3B,EAAgD,KAAK,qBAAL,CAA2B,IAA3B,CAAgC,IAAhC,CAAhD;IAEA,KAAK,yBAAL,CAA+B,QAA/B,EAAyC,mBAAzC,EAA8D,KAAK,oBAAL,CAA0B,IAA1B,CAA+B,IAA/B,CAA9D;IACA,KAAK,yBAAL,CAA+B,QAA/B,EAAyC,oBAAzC,EAA+D,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAA/D;IACA,KAAK,yBAAL,CAA+B,QAA/B,EAAyC,sBAAzC,EAAiE,KAAK,oBAAL,CAA0B,IAA1B,CAA+B,IAA/B,CAAjE;IACA,KAAK,yBAAL,CAA+B,QAA/B,EAAyC,sBAAzC,EAAiE,KAAK,oBAAL,CAA0B,IAA1B,CAA+B,IAA/B,CAAjE;EACA;;EAED,UAAU,GAAE;IACX,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,4BAAL,CAAkC,IAAlC,CAAuC,IAAvC,CAA9B;IACA,KAAK,SAAL,CAAe,yBAAf,EAA0C,KAAK,wBAAL,CAA8B,IAA9B,CAAmC,IAAnC,CAA1C;IACA,KAAK,SAAL,CAAe,wBAAf,EAAyC,KAAK,wBAAL,CAA8B,IAA9B,CAAmC,IAAnC,CAAzC;IACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAA9B;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAnB,KAAkC,QAArC,EAA8C;MAC7C,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAA9B;IACA;;IAED,KAAK,mBAAL,CAAyB,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAAzB,EAAiD,EAAjD;EACA;;EAED,UAAU,GAAE;IACX,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAtB,EAAoC;MACnC,KAAK,SAAL,CAAe,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAlC;IACA;;IAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAAtB,EAA0C;MACzC,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAAnB,CAAuC,OAAvC,CAAgD,IAAD,IAAU;QAExD,IAAI,MAAM,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzB,CAAoC,IAAI,CAAC,KAAzC,CAAb;;QAEA,IAAG,MAAH,EAAU;UACT,KAAK,oBAAL,CAA0B,MAA1B,EAAkC,IAAI,CAAC,KAAvC;QACA,CAFD,MAEK;UACJ,OAAO,CAAC,IAAR,CAAa,iDAAb,EAAgE,IAAI,CAAC,KAArE;UACA,OAAO,KAAP;QACA;MACD,CAVD;IAWA;;IAED,KAAK,gBAAL,GAAwB,IAAxB;EACA;;EAED,kBAAkB,CAAC,IAAD,EAAO,MAAP,EAAe,MAAf,EAAuB,MAAvB,EAA8B;IAC/C,MAAM,CAAC,MAAP,GAAgB,KAAK,UAAL,CAAgB,IAAhB,EAAsB,IAAtB,CAAhB;IACA,OAAO,MAAP;EACA,CAxFyB,CA0F3B;EACA;EACA;EAEA;;;EACC,aAAa,CAAC,KAAD,EAAQ,IAAR,EAAc,KAAd,EAAqB,MAArB,EAA4B;IACxC,KAAK,SAAL,CAAe,KAAf,EAAsB,IAAtB,EAA4B,KAA5B,EAAmC,MAAnC;IACA,KAAK,aAAL;EACA,CAlGyB,CAoG3B;;;EACC,iBAAiB,GAAE;IAClB,KAAK,aAAL;EACA,CAvGyB,CAyG3B;;;EACC,aAAa,CAAC,KAAD,EAAQ,IAAR,EAAc,KAAd,EAAqB,MAArB,EAA4B;IACxC,KAAK,SAAL,CAAe,KAAf,EAAsB,IAAtB,EAA4B,KAA5B,EAAmC,MAAnC;IACA,KAAK,aAAL;EACA;;EAED,wBAAwB,CAAC,KAAD,EAAO;IAC9B,IAAI,MAAM,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzB,CAAoC,KAApC,CAAb;;IAEA,IAAG,MAAH,EAAU;MACT,KAAK,oBAAL,CAA0B,MAA1B;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,uDAAb,EAAsE,KAAtE;MACA,OAAO,KAAP;IACA;EACD;;EAED,wBAAwB,CAAC,KAAD,EAAQ;IAC/B,IAAI,MAAM,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzB,CAAoC,KAApC,CAAb;;IAEA,IAAG,MAAH,EAAU;MACT,OAAO,KAAK,oBAAL,CAA0B,MAA1B,CAAP;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,iDAAb,EAAgE,KAAhE;IACA;EACD;;EAED,wBAAwB,CAAC,KAAD,EAAQ,KAAR,EAAc;IACrC,IAAI,MAAM,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzB,CAAoC,KAApC,CAAb;;IAEA,IAAG,MAAH,EAAU;MACT,KAAK,oBAAL,CAA0B,MAA1B,EAAkC,KAAlC;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,iDAAb,EAAgE,KAAhE;MACA,OAAO,KAAP;IACA;EACD,CA7IyB,CA+I3B;;;EACC,gBAAgB,CAAC,KAAD,EAAQ,IAAR,EAAc,KAAd,EAAoB;IACnC,KAAK,YAAL,CAAkB,KAAlB,EAAyB,IAAzB,EAA+B,KAA/B;IACA,KAAK,aAAL;EACA,CAnJyB,CAqJ3B;;;EACC,eAAe,CAAC,GAAD,EAAK;IACnB,KAAK,WAAL,CAAiB,GAAjB;IACA,KAAK,aAAL;EACA,CAzJyB,CA2J3B;;;EACC,qBAAqB,GAAE;IACtB,KAAK,iBAAL;IACA,KAAK,aAAL;EACA,CA/JyB,CAkK3B;;;EACC,UAAU,CAAC,KAAD,EAAQ,IAAR,EAAc,KAAd,EAAoB;IAC7B,OAAO,KAAK,MAAL,CAAY,MAAZ,EAAoB,KAApB,EAA2B,IAA3B,EAAiC,KAAjC,CAAP;EACA,CArKyB,CAuK3B;;;EACC,UAAU,CAAC,KAAD,EAAQ,IAAR,EAAc,KAAd,EAAoB;IAC7B,OAAO,KAAK,MAAL,CAAY,MAAZ,EAAoB,KAApB,EAA2B,IAA3B,EAAiC,KAAjC,CAAP;EACA,CA1KyB,CA4K3B;EACA;EACA;;;EAEC,4BAA4B,CAAC,MAAD,EAAQ;IACnC,IAAI,GAAG,GAAG,MAAM,CAAC,UAAjB;;IAEA,IAAG,GAAG,CAAC,YAAP,EAAoB;MAEnB,IAAG,OAAO,GAAG,CAAC,uBAAX,KAAuC,WAAvC,IAAsD,GAAG,CAAC,KAA7D,EAAmE;QAClE,KAAK,MAAL,CAAY,UAAZ,EAAwB,gCAAxB,CAAyD,GAAG,CAAC,KAA7D,EAAoE,GAAG,CAAC,uBAAxE;MACA;;MAED,KAAK,gBAAL,CAAsB,MAAtB;IACA;EACD,CA3LyB,CA6L3B;;;EACC,gBAAgB,CAAC,MAAD,EAAS,KAAT,EAAe;IAC9B,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,KAAK,GAAG,MAAM,CAAC,QAAP,EADR,CAD8B,CAIhC;;IACE,SAAS,OAAT,CAAiB,KAAjB,EAAuB;MACtB,IAAI,UAAU,GAAI,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,OAAtB,IAAiC,OAAjC,IAA4C,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,QAAtB,IAAkC,MAA/E,IAA0F,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,OAAtB,IAAiC,UAA3H,GAAwI,SAAxI,GAAoJ,OAArK;MAAA,IACA,IAAI,GAAG,EADP;MAAA,IAEA,iBAAiB,GAAG,EAFpB;MAAA,IAGA,UAHA;;MAKA,IAAG,OAAO,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,WAA7B,KAA6C,WAA7C,IAA4D,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,WAAtB,KAAsC,KAArG,EAA2G;QAE1G,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,WAAtB,GAAoC,KAApC;;QAEA,IAAG,CAAC,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,SAAtB,CAAgC,KAAhC,CAAJ,EAA2C;UAC1C,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,KAAtB,GAA8B,KAA9B;;UAEA,QAAO,OAAO,MAAM,CAAC,UAAP,CAAkB,gBAAhC;YACC,KAAK,QAAL;cACC,IAAG,MAAM,CAAC,OAAP,CAAe,MAAM,CAAC,UAAP,CAAkB,gBAAjC,CAAH,EAAsD;gBACrD,IAAI,GAAG,MAAM,CAAC,UAAP,CAAkB,gBAAzB;;gBACA,UAAU,GAAG,UAAS,IAAT,EAAc;kBAC1B,IAAI,MAAM,GAAG,MAAM,CAAC,UAAP,CAAkB,sBAAlB,IAA4C,EAAzD;kBACA,IAAI,QAAQ,GAAG,MAAM,CAAC,aAAP,CAAqB,IAArB,CAAf;kBAEA,MAAM,GAAG,OAAO,MAAP,KAAkB,UAAlB,GAA+B,MAAM,CAAC,KAAD,EAAQ,QAAR,EAAkB,IAAlB,CAArC,GAA+D,MAAxE;kBAEA,OAAO,MAAM,CAAC,OAAP,CAAe,MAAM,CAAC,UAAP,CAAkB,gBAAjC,EAAmD,KAAnD,EAA0D,QAA1D,EAAoE,IAApE,EAA0E,MAA1E,CAAP;gBACA,CAPD;cAQA,CAVD,MAUK;gBACJ,OAAO,CAAC,IAAR,CAAa,4DAAb,EAA2E,MAAM,CAAC,UAAP,CAAkB,gBAA7F;cACA;;cACD;;YAED,KAAK,UAAL;cACC,UAAU,GAAG,UAAS,IAAT,EAAc;gBAC1B,IAAI,MAAM,GAAG,MAAM,CAAC,UAAP,CAAkB,sBAAlB,IAA4C,EAAzD;gBACA,IAAI,QAAQ,GAAG,MAAM,CAAC,aAAP,CAAqB,IAArB,CAAf;gBAEA,MAAM,GAAG,OAAO,MAAP,KAAkB,UAAlB,GAA+B,MAAM,CAAC,KAAD,EAAQ,QAAR,EAAkB,IAAlB,CAArC,GAA+D,MAAxE;gBAEA,OAAO,MAAM,CAAC,UAAP,CAAkB,gBAAlB,CAAmC,KAAnC,EAA0C,QAA1C,EAAoD,IAApD,EAA0D,MAA1D,CAAP;cACA,CAPD;;cASA,IAAI,GAAG,UAAP;cACA;UA5BF;;UA+BA,IAAG,CAAC,UAAJ,EAAe;YACd,QAAO,UAAP;cACC,KAAK,SAAL;gBACC,UAAU,GAAG,UAAS,IAAT,EAAc;kBAC1B,IAAI,MAAM,GAAG,MAAM,CAAC,aAAP,CAAqB,IAArB,CAAb;;kBAEA,IAAG,OAAO,MAAP,KAAkB,WAAlB,IAAiC,MAAM,KAAK,IAA/C,EAAoD;oBACnD,OAAO,MAAM,CAAC,MAAD,CAAN,CAAe,WAAf,GAA6B,OAA7B,CAAqC,MAAM,CAAC,KAAD,CAAN,CAAc,WAAd,EAArC,IAAoE,CAAC,CAA5E;kBACA,CAFD,MAEK;oBACJ,OAAO,KAAP;kBACA;gBACD,CARD;;gBASA,IAAI,GAAG,MAAP;gBACA;;cAED;gBACC,UAAU,GAAG,UAAS,IAAT,EAAc;kBAC1B,OAAO,MAAM,CAAC,aAAP,CAAqB,IAArB,KAA8B,KAArC;gBACA,CAFD;;gBAGA,IAAI,GAAG,GAAP;YAlBF;UAoBA;;UAED,IAAI,CAAC,aAAL,CAAmB,KAAnB,IAA4B;YAAC,KAAK,EAAC,KAAP;YAAc,IAAI,EAAC,UAAnB;YAA+B,IAAI,EAAC;UAApC,CAA5B;QACA,CA1DD,MA0DK;UACJ,OAAO,IAAI,CAAC,aAAL,CAAmB,KAAnB,CAAP;QACA;;QAED,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,KAAtB,GAA8B,KAA9B;QAEA,iBAAiB,GAAG,IAAI,CAAC,SAAL,CAAe,IAAI,CAAC,aAApB,CAApB;;QAEA,IAAG,IAAI,CAAC,2BAAL,KAAqC,iBAAxC,EAA0D;UACzD,IAAI,CAAC,2BAAL,GAAmC,iBAAnC;UAEA,IAAI,CAAC,YAAL;UACA,IAAI,CAAC,aAAL;QACA;MACD;;MAED,OAAO,IAAP;IACA;;IAED,MAAM,CAAC,OAAP,CAAe,MAAf,GAAwB;MACvB,OAAO,EAAC,OADe;MAEvB,QAAQ,EAAC,KAFc;MAGvB,OAAO,EAAC,KAHe;MAIvB,SAAS,EAAC;IAJa,CAAxB;IAOA,KAAK,2BAAL,CAAiC,MAAjC;EACA;;EAED,2BAA2B,CAAC,MAAD,EAAS,YAAT,EAAuB,YAAvB,EAAoC;IAC9D,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,OAAO,GAAG,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,OADhC;IAAA,IAEA,KAAK,GAAG,MAAM,CAAC,QAAP,EAFR;IAAA,IAGA,aAHA;IAAA,IAGe,MAHf;IAAA,IAGuB,aAHvB;IAAA,IAGsC,WAHtC;IAAA,IAGmD,WAHnD;IAAA,IAGgE,aAHhE;IAAA,IAG+E,MAH/E;IAKA,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,KAAtB,GAA8B,YAA9B,CAN8D,CAQhE;;IACE,SAAS,MAAT,GAAiB,CAAE;;IAEnB,IAAG,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,aAAtB,IAAuC,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,aAAtB,CAAoC,UAA9E,EAAyF;MACxF,MAAM,CAAC,cAAP,CAAsB,WAAtB,CAAkC,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,aAAtB,CAAoC,UAAtE;IACA;;IAED,IAAG,KAAH,EAAS;MAEX;MACG,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,SAAtB,GAAkC,MAAM,CAAC,UAAP,CAAkB,sBAAlB,IAA4C,UAAS,KAAT,EAAe;QAC5F,OAAO,CAAC,KAAD,IAAU,KAAK,KAAK,CAA3B;MACA,CAFD;;MAIA,aAAa,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAhB;MACA,aAAa,CAAC,SAAd,CAAwB,GAAxB,CAA4B,yBAA5B,EARQ,CAUX;;MACG,QAAO,OAAO,MAAM,CAAC,UAAP,CAAkB,YAAhC;QACC,KAAK,QAAL;UACC,IAAG,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,OAAxB,CAAgC,MAAM,CAAC,UAAP,CAAkB,YAAlD,CAAH,EAAmE;YAClE,MAAM,GAAG,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,OAAxB,CAAgC,MAAM,CAAC,UAAP,CAAkB,YAAlD,CAAT;;YAEA,IAAG,CAAC,MAAM,CAAC,UAAP,CAAkB,YAAlB,KAAmC,MAAnC,IAA6C,MAAM,CAAC,UAAP,CAAkB,YAAlB,KAAmC,WAAjF,KAAiG,CAAC,MAAM,CAAC,UAAP,CAAkB,sBAAvH,EAA8I;cAC7I,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,SAAtB,GAAkC,UAAS,KAAT,EAAe;gBAChD,OAAO,KAAK,KAAK,IAAV,IAAkB,KAAK,KAAK,KAAnC;cACA,CAFD;YAGA;UACD,CARD,MAQK;YACJ,OAAO,CAAC,IAAR,CAAa,mEAAb,EAAkF,MAAM,CAAC,UAAP,CAAkB,MAApG;UACA;;UACD;;QAED,KAAK,UAAL;UACC,MAAM,GAAG,MAAM,CAAC,UAAP,CAAkB,YAA3B;UACA;;QAED,KAAK,SAAL;UACC,IAAG,MAAM,CAAC,OAAP,CAAe,IAAf,IAAuB,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,MAA9C,EAAqD;YACpD,MAAM,GAAG,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,MAA7B;UACA,CAFD,MAEK;YACJ,IAAG,MAAM,CAAC,UAAP,CAAkB,SAAlB,IAA+B,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,OAAxB,CAAgC,MAAM,CAAC,UAAP,CAAkB,SAAlD,CAAlC,EAA+F;cAC9F,MAAM,GAAG,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,OAAxB,CAAgC,MAAM,CAAC,UAAP,CAAkB,SAAlD,CAAT;;cAEA,IAAG,CAAC,MAAM,CAAC,UAAP,CAAkB,SAAlB,KAAgC,MAAhC,IAA0C,MAAM,CAAC,UAAP,CAAkB,SAAlB,KAAgC,WAA3E,KAA2F,CAAC,MAAM,CAAC,UAAP,CAAkB,sBAAjH,EAAwI;gBACvI,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,SAAtB,GAAkC,UAAS,KAAT,EAAe;kBAChD,OAAO,KAAK,KAAK,IAAV,IAAkB,KAAK,KAAK,KAAnC;gBACA,CAFD;cAGA;YACD,CARD,MAQK;cACJ,MAAM,GAAG,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,OAAxB,CAAgC,OAAhC,CAAT;YACA;UACD;;UACD;MAnCF;;MAsCA,IAAG,MAAH,EAAU;QAET,WAAW,GAAG;UACb,QAAQ,EAAC,YAAU;YAClB,OAAO,OAAO,YAAP,KAAwB,WAAxB,GAAsC,YAAtC,GAAqD,EAA5D;UACA,CAHY;UAIb,QAAQ,EAAC,YAAU;YAClB,OAAO,MAAM,CAAC,UAAP,CAAkB,KAAzB;UACA,CANY;UAOb,UAAU,EAAC,YAAU;YACpB,OAAO,aAAP;UACA,CATY;UAUb,SAAS,EAAC,YAAU;YACnB,OAAO,MAAM,CAAC,YAAP,EAAP;UACA,CAZY;UAab,QAAQ,EAAC,MAAM;YACd,OAAO,KAAK,KAAZ;UACA,CAfY;UAgBb,MAAM,EAAC,YAAU;YAChB,OAAO;cACN,eAAe,EAAC,YAAU,CAEzB;YAHK,CAAP;UAKA;QAtBY,CAAd;QAyBA,MAAM,GAAG,MAAM,CAAC,UAAP,CAAkB,kBAAlB,IAAwC,EAAjD;QAEA,MAAM,GAAG,OAAO,MAAP,KAAkB,UAAlB,GAA+B,MAAM,CAAC,IAAP,CAAY,IAAI,CAAC,KAAjB,EAAwB,WAAxB,CAA/B,GAAsE,MAA/E;QAEA,aAAa,GAAG,MAAM,CAAC,IAAP,CAAY,KAAK,KAAL,CAAW,OAAX,CAAmB,IAA/B,EAAqC,WAArC,EAAkD,YAAU,CAAE,CAA9D,EAAgE,OAAhE,EAAyE,MAAzE,EAAiF,MAAjF,CAAhB;;QAEA,IAAG,CAAC,aAAJ,EAAkB;UACjB,OAAO,CAAC,IAAR,CAAa,yCAAyC,KAAzC,GAAiD,2CAA9D;UACA;QACA;;QAED,IAAG,EAAE,aAAa,YAAY,IAA3B,CAAH,EAAoC;UACnC,OAAO,CAAC,IAAR,CAAa,yCAAyC,KAAzC,GAAiD,yEAA9D,EAAyI,aAAzI;UACA;QACA,CAzCQ,CA2Cb;;;QACI,IAAI,CAAC,QAAL,CAAc,2BAA2B,MAAM,CAAC,UAAP,CAAkB,KAA3D,EAAkE,UAAS,KAAT,EAAe;UAChF,aAAa,CAAC,YAAd,CAA2B,aAA3B,EAA0C,OAAO,KAAP,KAAiB,WAAjB,IAAgC,KAAhC,GAAwC,KAAxC,GAAgD,IAAI,CAAC,QAAL,CAAc,uBAAd,CAA1F;QACA,CAFD,EA5CS,CAgDb;;QACI,aAAa,CAAC,gBAAd,CAA+B,OAA/B,EAAwC,UAAS,CAAT,EAAW;UAClD,CAAC,CAAC,eAAF;UACA,aAAa,CAAC,KAAd;QACA,CAHD;QAKA,aAAa,CAAC,gBAAd,CAA+B,OAA/B,EAAyC,CAAD,IAAO;UAC9C,IAAI,IAAI,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,OAAzB,CAAiC,UAA5C;UAEA,IAAI,SAAS,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,UAA9B,GAA2C,QAAQ,CAAC,KAAK,KAAL,CAAW,aAAX,CAAyB,OAAzB,CAAiC,KAAjC,CAAuC,UAAxC,CAAnE;;UAEA,IAAG,IAAI,KAAK,SAAZ,EAAsB;YACrB,KAAK,KAAL,CAAW,UAAX,CAAsB,gBAAtB,CAAuC,IAAvC;YACA,KAAK,KAAL,CAAW,aAAX,CAAyB,gBAAzB,CAA0C,IAA1C;UACA;QACD,CATD,EAtDS,CAiEb;;QACI,WAAW,GAAG,KAAd;;QAEA,aAAa,GAAG,UAAS,CAAT,EAAW;UAC1B,IAAG,WAAH,EAAe;YACd,YAAY,CAAC,WAAD,CAAZ;UACA;;UAED,WAAW,GAAG,UAAU,CAAC,YAAU;YAClC,OAAO,CAAC,aAAa,CAAC,KAAf,CAAP;UACA,CAFuB,EAEtB,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,2BAFG,CAAxB;QAGA,CARD;;QAUA,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,aAAtB,GAAsC,aAAtC;QACA,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,QAAtB,GAAiC,aAAa,CAAC,YAAd,CAA2B,MAA3B,IAAqC,aAAa,CAAC,YAAd,CAA2B,MAA3B,EAAmC,WAAnC,EAArC,GAAwF,EAAzH;QACA,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,OAAtB,GAAgC,aAAa,CAAC,OAAd,CAAsB,WAAtB,EAAhC;;QAEA,IAAG,MAAM,CAAC,UAAP,CAAkB,sBAAlB,KAA6C,KAAhD,EAAsD;UAErD,IACC,EACC,MAAM,CAAC,UAAP,CAAkB,YAAlB,KAAmC,cAAnC,IACA,MAAM,CAAC,UAAP,CAAkB,YAAlB,KAAmC,WADnC,IAEC,CAAC,MAAM,CAAC,UAAP,CAAkB,MAAlB,KAA6B,cAA7B,IACD,MAAM,CAAC,UAAP,CAAkB,MAAlB,KAA6B,WAD7B,KAED,MAAM,CAAC,UAAP,CAAkB,YAAlB,KAAmC,IALpC,CADD,EAQE;YACD,aAAa,CAAC,gBAAd,CAA+B,OAA/B,EAAwC,aAAxC;YACA,aAAa,CAAC,gBAAd,CAA+B,QAA/B,EAAyC,aAAzC,EAFC,CAKP;;YACM,IAAG,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,QAAtB,IAAkC,QAArC,EAA8C;cAC7C,aAAa,CAAC,gBAAd,CAA+B,QAA/B,EAAyC,UAAS,CAAT,EAAW;gBACnD,OAAO,CAAC,aAAa,CAAC,KAAf,CAAP;cACA,CAFD;YAGA,CAVA,CAYP;;;YACM,IAAG,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,QAAtB,IAAkC,MAAlC,IAA4C,KAAK,KAAL,CAAW,OAAX,KAAuB,IAAtE,EAA2E;cAC1E,aAAa,CAAC,YAAd,CAA2B,MAA3B,EAAmC,QAAnC,EAD0E,CAEjF;YACO;UAED,CA5BoD,CA8B1D;;;UACK,IAAG,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,OAAtB,IAAiC,OAAjC,IAA4C,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,OAAtB,IAAiC,QAA7E,IAAyF,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,OAAtB,IAAiC,UAA7H,EAAwI;YACvI,aAAa,CAAC,gBAAd,CAA+B,WAA/B,EAA2C,UAAS,CAAT,EAAW;cACrD,CAAC,CAAC,eAAF;YACA,CAFD;UAGA;QACD;;QAED,aAAa,CAAC,WAAd,CAA0B,aAA1B;QAEA,MAAM,CAAC,cAAP,CAAsB,WAAtB,CAAkC,aAAlC;;QAEA,IAAG,CAAC,YAAJ,EAAiB;UAChB,IAAI,CAAC,mBAAL,CAAyB,IAAzB,CAA8B,MAA9B;QACA;MACD;IACD,CAjLD,MAiLK;MACJ,OAAO,CAAC,IAAR,CAAa,mEAAb,EAAkF,MAAM,CAAC,UAAP,CAAkB,KAApG;IACA;EACD,CAveyB,CAye3B;;;EACC,wBAAwB,GAAE;IACzB,KAAK,mBAAL,CAAyB,OAAzB,CAAiC,UAAS,MAAT,EAAgB;MAChD,IAAG,MAAM,CAAC,OAAP,CAAe,MAAf,IAAyB,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,aAAlD,EAAgE;QAC/D,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,aAAtB,CAAoC,KAApC,CAA0C,OAA1C,GAAoD,MAApD;MACA;IACD,CAJD;EAKA,CAhfyB,CAkf3B;;;EACC,wBAAwB,GAAE;IACzB,KAAK,mBAAL,CAAyB,OAAzB,CAAiC,UAAS,MAAT,EAAgB;MAChD,IAAG,MAAM,CAAC,OAAP,CAAe,MAAf,IAAyB,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,aAAlD,EAAgE;QAC/D,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,aAAtB,CAAoC,KAApC,CAA0C,OAA1C,GAAoD,EAApD;MACA;IACD,CAJD;EAKA,CAzfyB,CA2f3B;;;EACC,oBAAoB,CAAC,MAAD,EAAQ;IAC3B,IAAG,MAAM,CAAC,OAAP,CAAe,MAAf,IAAyB,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,aAAlD,EAAgE;MAC/D,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,aAAtB,CAAoC,KAApC;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,6DAAb,EAA4E,MAAM,CAAC,QAAP,EAA5E;IACA;EACD,CAlgByB,CAogB3B;;;EACC,oBAAoB,CAAC,MAAD,EAAQ;IAC3B,IAAG,MAAM,CAAC,OAAP,CAAe,MAAf,IAAyB,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,aAAlD,EAAgE;MAC/D,OAAO,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,KAA7B;IACA,CAFD,MAEO;MACN,OAAO,CAAC,IAAR,CAAa,uDAAb,EAAsE,MAAM,CAAC,QAAP,EAAtE;IACA;EACD,CA3gByB,CA6gB3B;;;EACC,oBAAoB,CAAC,MAAD,EAAS,KAAT,EAAe;IAClC,IAAI,MAAJ,EAAW;MACV,IAAG,MAAM,CAAC,OAAP,CAAe,MAAf,IAAyB,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,aAAlD,EAAgE;QAC/D,KAAK,2BAAL,CAAiC,MAAjC,EAAyC,KAAzC,EAAgD,IAAhD;QACA,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,OAAtB,CAA8B,KAA9B;MACA,CAHD,MAGK;QACJ,OAAO,CAAC,IAAR,CAAa,uDAAb,EAAsE,MAAM,CAAC,QAAP,EAAtE;MACA;IACD;EACD;;EAED,kBAAkB,CAAC,MAAD,EAAQ;IACzB,IAAI,MAAJ,EAAW;MACV,IAAG,MAAM,CAAC,OAAP,CAAe,MAAf,IAAyB,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,aAAlD,EAAgE;QAC/D,KAAK,2BAAL,CAAiC,MAAjC,EAAyC,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,KAA/D,EAAsE,IAAtE;MACA,CAFD,MAEK;QACJ,OAAO,CAAC,IAAR,CAAa,uDAAb,EAAsE,MAAM,CAAC,QAAP,EAAtE;MACA;IACD;EACD;;EAED,aAAa,GAAE;IACd,IAAG,KAAK,gBAAR,EAAyB;MACxB,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAnB,KAAkC,QAArC,EAA8C;QAC7C,KAAK,UAAL,CAAgB,IAAhB,EAAsB,KAAtB,EAA6B,KAA7B;MACA,CAFD,MAEK;QACJ,KAAK,WAAL,CAAiB,IAAjB;MACA;IACD,CAPa,CAShB;IACA;IACA;;EACE,CA/iByB,CAijB3B;;;EACC,YAAY,GAAE;IACb,KAAK,OAAL,GAAe,IAAf;IACA,KAAK,QAAL,CAAc,gBAAd;EACA,CArjByB,CAujB3B;;;EACC,UAAU,GAAE;IACX,IAAI,OAAO,GAAG,KAAK,OAAnB;IACA,KAAK,OAAL,GAAe,KAAf;IACA,OAAO,OAAP;EACA,CA5jByB,CA8jB3B;;;EACC,SAAS,CAAC,KAAD,EAAQ,IAAR,EAAc,KAAd,EAAqB,MAArB,EAA4B;IACpC,KAAK,UAAL,GAAkB,EAAlB;;IAEA,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,KAAd,CAAJ,EAAyB;MACxB,KAAK,GAAG,CAAC;QAAC,KAAK,EAAC,KAAP;QAAc,IAAI,EAAC,IAAnB;QAAyB,KAAK,EAAC,KAA/B;QAAsC,MAAM,EAAC;MAA7C,CAAD,CAAR;IACA;;IAED,KAAK,SAAL,CAAe,KAAf;EACA,CAvkByB,CAykB3B;;;EACC,SAAS,CAAC,KAAD,EAAQ,IAAR,EAAc,KAAd,EAAqB,MAArB,EAA4B;IACpC,IAAI,OAAO,GAAG,KAAd;;IAEA,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,KAAd,CAAJ,EAAyB;MACxB,KAAK,GAAG,CAAC;QAAC,KAAK,EAAC,KAAP;QAAc,IAAI,EAAC,IAAnB;QAAyB,KAAK,EAAC,KAA/B;QAAsC,MAAM,EAAC;MAA7C,CAAD,CAAR;IACA;;IAED,KAAK,CAAC,OAAN,CAAe,MAAD,IAAY;MACzB,MAAM,GAAG,KAAK,UAAL,CAAgB,MAAhB,CAAT;;MAEA,IAAG,MAAH,EAAU;QACT,KAAK,UAAL,CAAgB,IAAhB,CAAqB,MAArB;QACA,OAAO,GAAG,IAAV;MACA;IACD,CAPD;;IASA,IAAG,OAAH,EAAW;MACV,KAAK,YAAL;IACA;EACD;;EAED,UAAU,CAAC,MAAD,EAAQ;IACjB,IAAI,MAAJ;;IAEA,IAAG,KAAK,CAAC,OAAN,CAAc,MAAd,CAAH,EAAyB;MACxB,OAAO,KAAK,cAAL,CAAoB,MAApB,CAAP;IACA;;IAED,IAAI,UAAU,GAAG,KAAjB;;IAEA,IAAG,OAAO,MAAM,CAAC,KAAd,IAAuB,UAA1B,EAAqC;MACpC,UAAU,GAAG,UAAS,IAAT,EAAc;QAC1B,OAAO,MAAM,CAAC,KAAP,CAAa,IAAb,EAAmB,MAAM,CAAC,IAAP,IAAe,EAAlC,CAAP,CAD0B,CACmB;MAC7C,CAFD;IAGA,CAJD,MAIK;MAEJ,IAAG,MAAM,CAAC,OAAP,CAAe,MAAM,CAAC,IAAtB,CAAH,EAA+B;QAE9B,MAAM,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,gBAAzB,CAA0C,MAAM,CAAC,KAAjD,CAAT;;QAEA,IAAG,MAAH,EAAU;UACT,UAAU,GAAG,UAAS,IAAT,EAAc;YAC1B,OAAO,MAAM,CAAC,OAAP,CAAe,MAAM,CAAC,IAAtB,EAA4B,MAAM,CAAC,KAAnC,EAA0C,MAAM,CAAC,aAAP,CAAqB,IAArB,CAA1C,EAAsE,IAAtE,EAA4E,MAAM,CAAC,MAAP,IAAiB,EAA7F,CAAP;UACA,CAFD;QAGA,CAJD,MAIK;UACJ,UAAU,GAAG,UAAS,IAAT,EAAc;YAC1B,OAAO,MAAM,CAAC,OAAP,CAAe,MAAM,CAAC,IAAtB,EAA4B,MAAM,CAAC,KAAnC,EAA0C,IAAI,CAAC,MAAM,CAAC,KAAR,CAA9C,EAA8D,IAA9D,EAAoE,MAAM,CAAC,MAAP,IAAiB,EAArF,CAAP;UACA,CAFD;QAGA;MAGD,CAfD,MAeK;QACJ,OAAO,CAAC,IAAR,CAAa,sDAAb,EAAqE,MAAM,CAAC,IAA5E;MACA;IACD;;IAED,MAAM,CAAC,IAAP,GAAc,UAAd;IAEA,OAAO,MAAM,CAAC,IAAP,GAAc,MAAd,GAAuB,KAA9B;EACA;;EAED,cAAc,CAAC,OAAD,EAAS;IACtB,IAAI,MAAM,GAAG,EAAb;IAEA,OAAO,CAAC,OAAR,CAAiB,MAAD,IAAY;MAC3B,MAAM,GAAG,KAAK,UAAL,CAAgB,MAAhB,CAAT;;MAEA,IAAG,MAAH,EAAU;QACT,MAAM,CAAC,IAAP,CAAY,MAAZ;MACA;IACD,CAND;IAQA,OAAO,MAAM,CAAC,MAAP,GAAgB,MAAhB,GAAyB,KAAhC;EACA,CAnpByB,CAqpB3B;;;EACC,UAAU,CAAC,GAAD,EAAM,IAAN,EAAW;IACpB,IAAI,MAAM,GAAG,EAAb;;IAEA,IAAG,GAAH,EAAO;MACN,MAAM,GAAG,KAAK,gBAAL,EAAT;IACA;;IAED,IAAG,IAAH,EAAQ;MACP,MAAM,CAAC,OAAP,CAAe,UAAS,IAAT,EAAc;QAC5B,IAAG,OAAO,IAAI,CAAC,IAAZ,IAAoB,UAAvB,EAAkC;UACjC,IAAI,CAAC,IAAL,GAAY,UAAZ;QACA;MACD,CAJD;IAKA;;IAED,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,KAAK,cAAL,CAAoB,KAAK,UAAzB,EAAqC,IAArC,CAAd,CAAT;IAEA,OAAO,MAAP;EACA,CAxqByB,CA0qB3B;;;EACC,cAAc,CAAC,UAAD,EAAa,IAAb,EAAkB;IAC/B,IAAI,MAAM,GAAG,EAAb;IAEA,UAAU,CAAC,OAAX,CAAoB,MAAD,IAAY;MAC9B,IAAI,IAAJ;;MAEA,IAAG,KAAK,CAAC,OAAN,CAAc,MAAd,CAAH,EAAyB;QACxB,MAAM,CAAC,IAAP,CAAY,KAAK,cAAL,CAAoB,MAApB,EAA4B,IAA5B,CAAZ;MACA,CAFD,MAEK;QACJ,IAAI,GAAG;UAAC,KAAK,EAAC,MAAM,CAAC,KAAd;UAAqB,IAAI,EAAC,MAAM,CAAC,IAAjC;UAAuC,KAAK,EAAC,MAAM,CAAC;QAApD,CAAP;;QAEA,IAAG,IAAH,EAAQ;UACP,IAAG,OAAO,IAAI,CAAC,IAAZ,IAAoB,UAAvB,EAAkC;YACjC,IAAI,CAAC,IAAL,GAAY,UAAZ;UACA;QACD;;QAED,MAAM,CAAC,IAAP,CAAY,IAAZ;MACA;IACD,CAhBD;IAkBA,OAAO,MAAP;EACA,CAjsByB,CAmsB3B;;;EACC,gBAAgB,GAAE;IACjB,IAAI,MAAM,GAAG,EAAb;;IAEA,KAAI,IAAI,GAAR,IAAe,KAAK,aAApB,EAAkC;MACjC,MAAM,CAAC,IAAP,CAAY;QAAC,KAAK,EAAC,GAAP;QAAY,IAAI,EAAC,KAAK,aAAL,CAAmB,GAAnB,EAAwB,IAAzC;QAA+C,KAAK,EAAC,KAAK,aAAL,CAAmB,GAAnB,EAAwB;MAA7E,CAAZ;IACA;;IAED,OAAO,MAAP;EACA,CA5sByB,CA8sB3B;;;EACC,YAAY,CAAC,KAAD,EAAQ,IAAR,EAAc,KAAd,EAAoB;IAC/B,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,KAAd,CAAJ,EAAyB;MACxB,KAAK,GAAG,CAAC;QAAC,KAAK,EAAC,KAAP;QAAc,IAAI,EAAC,IAAnB;QAAyB,KAAK,EAAC;MAA/B,CAAD,CAAR;IACA;;IAED,KAAK,CAAC,OAAN,CAAe,MAAD,IAAY;MACzB,IAAI,KAAK,GAAG,CAAC,CAAb;;MAEA,IAAG,OAAO,MAAM,CAAC,KAAd,IAAuB,QAA1B,EAAmC;QAClC,KAAK,GAAG,KAAK,UAAL,CAAgB,SAAhB,CAA2B,OAAD,IAAa;UAC9C,OAAO,MAAM,KAAK,OAAlB;QACA,CAFO,CAAR;MAGA,CAJD,MAIK;QACJ,KAAK,GAAG,KAAK,UAAL,CAAgB,SAAhB,CAA2B,OAAD,IAAa;UAC9C,OAAO,MAAM,CAAC,KAAP,KAAiB,OAAO,CAAC,KAAzB,IAAkC,MAAM,CAAC,IAAP,KAAgB,OAAO,CAAC,IAA1D,IAAmE,MAAM,CAAC,KAAP,KAAiB,OAAO,CAAC,KAAnG;QACA,CAFO,CAAR;MAGA;;MAED,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;QACb,KAAK,UAAL,CAAgB,MAAhB,CAAuB,KAAvB,EAA8B,CAA9B;MACA,CAFD,MAEK;QACJ,OAAO,CAAC,IAAR,CAAa,0DAAb,EAAyE,MAAM,CAAC,IAAhF;MACA;IACD,CAlBD;IAoBA,KAAK,YAAL;EACA,CAzuByB,CA2uB3B;;;EACC,WAAW,CAAC,GAAD,EAAK;IACf,KAAK,UAAL,GAAkB,EAAlB;;IAEA,IAAG,GAAH,EAAO;MACN,KAAK,iBAAL;IACA;;IAED,KAAK,YAAL;EACA,CApvByB,CAsvB3B;;;EACC,iBAAiB,GAAE;IAClB,KAAK,aAAL,GAAqB,EAArB;IACA,KAAK,2BAAL,GAAmC,IAAnC;IAEA,KAAK,mBAAL,CAAyB,OAAzB,CAAkC,MAAD,IAAY;MAC5C,IAAG,OAAO,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,KAA7B,KAAuC,WAA1C,EAAsD;QACrD,OAAO,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,KAA7B;MACA;;MACD,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,WAAtB,GAAoC,SAApC;MACA,KAAK,kBAAL,CAAwB,MAAxB;IACA,CAND;IAQA,KAAK,YAAL;EACA,CApwByB,CAswB3B;;;EACC,MAAM,CAAE,UAAF,EAAc,KAAd,EAAqB,IAArB,EAA2B,KAA3B,EAAiC;IACtC,IAAI,UAAU,GAAG,EAAjB;IAAA,IACA,UAAU,GAAG,EADb;;IAGA,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,KAAd,CAAJ,EAAyB;MACxB,KAAK,GAAG,CAAC;QAAC,KAAK,EAAC,KAAP;QAAc,IAAI,EAAC,IAAnB;QAAyB,KAAK,EAAC;MAA/B,CAAD,CAAR;IACA;;IAED,KAAK,CAAC,OAAN,CAAe,MAAD,IAAY;MACzB,MAAM,GAAG,KAAK,UAAL,CAAgB,MAAhB,CAAT;;MAEA,IAAG,MAAH,EAAU;QACT,UAAU,CAAC,IAAX,CAAgB,MAAhB;MACA;IACD,CAND;IAQA,KAAK,KAAL,CAAW,UAAX,CAAsB,IAAtB,CAA2B,OAA3B,CAAoC,GAAD,IAAS;MAC3C,IAAI,KAAK,GAAG,IAAZ;MAEA,UAAU,CAAC,OAAX,CAAoB,MAAD,IAAY;QAC9B,IAAG,CAAC,KAAK,aAAL,CAAmB,MAAnB,EAA2B,GAAG,CAAC,OAAJ,EAA3B,CAAJ,EAA8C;UAC7C,KAAK,GAAG,KAAR;QACA;MACD,CAJD;;MAMA,IAAG,KAAH,EAAS;QACR,UAAU,CAAC,IAAX,CAAgB,UAAU,KAAK,MAAf,GAAwB,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAxB,GAA8C,GAAG,CAAC,YAAJ,EAA9D;MACA;IAED,CAbD;IAeA,OAAO,UAAP;EACA,CAvyByB,CAyyB3B;;;EACC,MAAM,CAAC,OAAD,EAAU,OAAV,EAAkB;IACvB,IAAI,UAAU,GAAG,EAAjB;IAAA,IACA,mBAAmB,GAAG,EADtB;;IAGA,IAAG,KAAK,kBAAL,CAAwB,eAAxB,CAAH,EAA4C;MAC3C,KAAK,gBAAL,CAAsB,eAAtB,EAAuC,KAAK,UAAL,CAAgB,IAAhB,CAAvC;IACA;;IAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAnB,KAAkC,QAAlC,KAA+C,KAAK,UAAL,CAAgB,MAAhB,IAA0B,MAAM,CAAC,IAAP,CAAY,KAAK,aAAjB,EAAgC,MAAzG,CAAH,EAAoH;MAEnH,OAAO,CAAC,OAAR,CAAiB,GAAD,IAAS;QACxB,IAAG,KAAK,SAAL,CAAe,GAAf,CAAH,EAAuB;UACtB,UAAU,CAAC,IAAX,CAAgB,GAAhB;QACA;MACD,CAJD;IAMA,CARD,MAQK;MACJ,UAAU,GAAG,OAAO,CAAC,KAAR,CAAc,CAAd,CAAb;IACA;;IAED,IAAG,KAAK,kBAAL,CAAwB,cAAxB,CAAH,EAA2C;MAE1C,UAAU,CAAC,OAAX,CAAoB,GAAD,IAAS;QAC3B,mBAAmB,CAAC,IAApB,CAAyB,GAAG,CAAC,YAAJ,EAAzB;MACA,CAFD;MAIA,KAAK,gBAAL,CAAsB,cAAtB,EAAsC,KAAK,UAAL,CAAgB,IAAhB,CAAtC,EAA6D,mBAA7D;IACA;;IAED,OAAO,UAAP;EACA,CAx0ByB,CA00B3B;;;EACC,SAAS,CAAC,GAAD,EAAM,OAAN,EAAc;IACtB,IAAI,KAAK,GAAG,IAAZ;IAAA,IACA,IAAI,GAAG,GAAG,CAAC,OAAJ,EADP;IAGA,KAAK,UAAL,CAAgB,OAAhB,CAAyB,MAAD,IAAY;MACnC,IAAG,CAAC,KAAK,aAAL,CAAmB,MAAnB,EAA2B,IAA3B,CAAJ,EAAqC;QACpC,KAAK,GAAG,KAAR;MACA;IACD,CAJD;;IAOA,KAAI,IAAI,KAAR,IAAiB,KAAK,aAAtB,EAAoC;MACnC,IAAG,CAAC,KAAK,aAAL,CAAmB,KAAnB,EAA0B,IAA1B,CAA+B,IAA/B,CAAJ,EAAyC;QACxC,KAAK,GAAG,KAAR;MACA;IACD;;IAED,OAAO,KAAP;EACA;;EAED,aAAa,CAAC,MAAD,EAAS,IAAT,EAAc;IAC1B,IAAI,KAAK,GAAG,KAAZ;;IAEA,IAAG,KAAK,CAAC,OAAN,CAAc,MAAd,CAAH,EAAyB;MACxB,MAAM,CAAC,OAAP,CAAgB,SAAD,IAAe;QAC7B,IAAG,KAAK,aAAL,CAAmB,SAAnB,EAA8B,IAA9B,CAAH,EAAuC;UACtC,KAAK,GAAG,IAAR;QACA;MACD,CAJD;IAKA,CAND,MAMK;MACJ,KAAK,GAAG,MAAM,CAAC,IAAP,CAAY,IAAZ,CAAR;IACA;;IAED,OAAO,KAAP;EACA;;AA72ByB;;;AAg3B3B,MAAM,CAAC,UAAP,GAAoB,QAApB,EAEA;;AACA,MAAM,CAAC,OAAP,GAAiB,cAAjB;;ACv3Be,SAAA,SAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,OAAO,KAAK,YAAL,CAAkB,KAAK,YAAL,CAAkB,IAAI,CAAC,QAAL,EAAlB,CAAlB,CAAP;AACD;;ACFe,SAAA,MAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,OAAO,IAAI,CAAC,QAAL,EAAP;AACD;;ACFe,SAAA,UAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,IAAI,CAAC,UAAL,GAAkB,KAAlB,CAAwB,UAAxB,GAAqC,UAArC;EACA,OAAO,KAAK,YAAL,CAAkB,KAAK,YAAL,CAAkB,IAAI,CAAC,QAAL,EAAlB,CAAlB,CAAP;AACD;;ACHe,SAAA,KAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,IAAI,QAAQ,GAAG,UAAU,CAAC,IAAI,CAAC,QAAL,EAAD,CAAzB;EAAA,IACA,IAAI,GAAG,EADP;EAAA,IAEA,MAFA;EAAA,IAEQ,OAFR;EAAA,IAEiB,OAFjB;EAAA,IAE0B,GAF1B;EAIA,IAAI,UAAU,GAAG,eAAe,CAAC,OAAhB,IAA2B,GAA5C;EACA,IAAI,WAAW,GAAG,eAAe,CAAC,QAAhB,IAA4B,GAA9C;EACA,IAAI,YAAY,GAAG,eAAe,CAAC,YAAhB,IAAgC,GAAnD;EACA,IAAI,MAAM,GAAG,eAAe,CAAC,MAAhB,IAA0B,EAAvC;EACA,IAAI,KAAK,GAAG,CAAC,CAAC,eAAe,CAAC,WAA9B;EACA,IAAI,SAAS,GAAG,OAAO,eAAe,CAAC,SAAvB,KAAqC,WAArC,GAAmD,eAAe,CAAC,SAAnE,GAA+E,CAA/F;;EAEA,IAAG,KAAK,CAAC,QAAD,CAAR,EAAmB;IAClB,OAAO,KAAK,YAAL,CAAkB,KAAK,YAAL,CAAkB,IAAI,CAAC,QAAL,EAAlB,CAAlB,CAAP;EACA;;EAED,IAAG,QAAQ,GAAG,CAAd,EAAgB;IACf,QAAQ,GAAG,IAAI,CAAC,GAAL,CAAS,QAAT,CAAX;IACA,IAAI,GAAG,YAAP;EACA;;EAED,MAAM,GAAG,SAAS,KAAK,KAAd,GAAsB,QAAQ,CAAC,OAAT,CAAiB,SAAjB,CAAtB,GAAoD,QAA7D;EACA,MAAM,GAAG,MAAM,CAAC,MAAD,CAAN,CAAe,KAAf,CAAqB,GAArB,CAAT;EAEA,OAAO,GAAG,MAAM,CAAC,CAAD,CAAhB;EACA,OAAO,GAAG,MAAM,CAAC,MAAP,GAAgB,CAAhB,GAAoB,UAAU,GAAG,MAAM,CAAC,CAAD,CAAvC,GAA6C,EAAvD;;EAEA,IAAI,eAAe,CAAC,QAAhB,KAA6B,KAAjC,EAAwC;IACvC,GAAG,GAAG,cAAN;;IAEA,OAAO,GAAG,CAAC,IAAJ,CAAS,OAAT,CAAP,EAAyB;MACxB,OAAO,GAAG,OAAO,CAAC,OAAR,CAAgB,GAAhB,EAAqB,OAAO,WAAP,GAAqB,IAA1C,CAAV;IACA;EACD;;EAED,OAAO,KAAK,GAAG,IAAI,GAAG,OAAP,GAAiB,OAAjB,GAA2B,MAA9B,GAAuC,IAAI,GAAG,MAAP,GAAgB,OAAhB,GAA0B,OAA7E;AACD;;ACpCe,SAAA,IAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,IAAI,KAAK,GAAG,IAAI,CAAC,QAAL,EAAZ;EAAA,IACA,SAAS,GAAG,eAAe,CAAC,SAAhB,IAA6B,EADzC;EAAA,IAEA,QAAQ,GAAG,eAAe,CAAC,QAF3B;EAAA,IAGA,KAAK,GAAG,KAHR;EAAA,IAIA,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAJL;EAAA,IAKA,IALA;;EAOA,SAAS,aAAT,CAAuB,IAAvB,EAA6B,IAA7B,EAAkC;IACjC,IAAI,IAAI,GAAG,IAAI,CAAC,KAAL,EAAX;IAAA,IACA,KAAK,GAAG,IAAI,CAAC,IAAD,CADZ;;IAGA,IAAG,IAAI,CAAC,MAAL,IAAe,OAAO,KAAP,KAAiB,QAAnC,EAA4C;MAC3C,OAAO,aAAa,CAAC,IAAD,EAAO,KAAP,CAApB;IACA;;IAED,OAAO,KAAP;EACA;;EAED,IAAG,eAAe,CAAC,UAAnB,EAA8B;IAC7B,IAAI,GAAG,IAAI,CAAC,OAAL,EAAP;IACA,KAAK,GAAG,aAAa,CAAC,eAAe,CAAC,UAAhB,CAA2B,KAA3B,CAAiC,KAAK,KAAL,CAAW,OAAX,CAAmB,oBAApD,CAAD,EAA4E,IAA5E,CAArB;EACA;;EAED,IAAG,eAAe,CAAC,KAAnB,EAAyB;IACxB,QAAO,OAAO,eAAe,CAAC,KAA9B;MACC,KAAK,QAAL;QACC,KAAK,GAAG,eAAe,CAAC,KAAxB;QACA;;MAED,KAAK,UAAL;QACC,KAAK,GAAG,eAAe,CAAC,KAAhB,CAAsB,IAAtB,CAAR;QACA;IAPF;EASA;;EAED,IAAG,KAAH,EAAS;IACR,IAAG,eAAe,CAAC,QAAnB,EAA4B;MAC3B,IAAI,GAAG,IAAI,CAAC,OAAL,EAAP;MACA,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,QAAjB,CAAZ;IACA;;IAED,IAAG,eAAe,CAAC,GAAnB,EAAuB;MACtB,QAAO,OAAO,eAAe,CAAC,GAA9B;QACC,KAAK,QAAL;UACC,KAAK,GAAG,eAAe,CAAC,GAAxB;UACA;;QAED,KAAK,UAAL;UACC,KAAK,GAAG,eAAe,CAAC,GAAhB,CAAoB,IAApB,CAAR;UACA;MAPF;IASA;;IAED,EAAE,CAAC,YAAH,CAAgB,MAAhB,EAAwB,SAAS,GAAG,KAApC;;IAEA,IAAG,eAAe,CAAC,MAAnB,EAA0B;MACzB,EAAE,CAAC,YAAH,CAAgB,QAAhB,EAA0B,eAAe,CAAC,MAA1C;IACA;;IAED,IAAG,eAAe,CAAC,QAAnB,EAA4B;MAE3B,IAAG,OAAO,QAAP,IAAmB,UAAtB,EAAiC;QAChC,QAAQ,GAAG,QAAQ,CAAC,IAAD,CAAnB;MACA,CAFD,MAEK;QACJ,QAAQ,GAAG,QAAQ,KAAK,IAAb,GAAoB,EAApB,GAAyB,QAApC;MACA;;MAED,EAAE,CAAC,YAAH,CAAgB,UAAhB,EAA4B,QAA5B;IACA;;IAED,EAAE,CAAC,SAAH,GAAe,KAAK,YAAL,CAAkB,KAAK,YAAL,CAAkB,KAAlB,CAAlB,CAAf;IAEA,OAAO,EAAP;EACA,CAtCD,MAsCK;IACJ,OAAO,QAAP;EACA;AACF;;AC7Ee,SAAA,KAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;EAAA,IACA,GAAG,GAAG,IAAI,CAAC,QAAL,EADN;;EAGA,IAAG,eAAe,CAAC,SAAnB,EAA6B;IAC5B,GAAG,GAAG,eAAe,CAAC,SAAhB,GAA4B,IAAI,CAAC,QAAL,EAAlC;EACA;;EAED,IAAG,eAAe,CAAC,SAAnB,EAA6B;IAC5B,GAAG,GAAG,GAAG,GAAG,eAAe,CAAC,SAA5B;EACA;;EAED,EAAE,CAAC,YAAH,CAAgB,KAAhB,EAAuB,GAAvB;;EAEA,QAAO,OAAO,eAAe,CAAC,MAA9B;IACC,KAAK,QAAL;MACC,EAAE,CAAC,KAAH,CAAS,MAAT,GAAkB,eAAe,CAAC,MAAhB,GAAyB,IAA3C;MACA;;IAED,KAAK,QAAL;MACC,EAAE,CAAC,KAAH,CAAS,MAAT,GAAkB,eAAe,CAAC,MAAlC;MACA;EAPF;;EAUA,QAAO,OAAO,eAAe,CAAC,KAA9B;IACC,KAAK,QAAL;MACC,EAAE,CAAC,KAAH,CAAS,KAAT,GAAiB,eAAe,CAAC,KAAhB,GAAwB,IAAzC;MACA;;IAED,KAAK,QAAL;MACC,EAAE,CAAC,KAAH,CAAS,KAAT,GAAiB,eAAe,CAAC,KAAjC;MACA;EAPF;;EAUA,EAAE,CAAC,gBAAH,CAAoB,MAApB,EAA4B,YAAU;IACrC,IAAI,CAAC,MAAL,GAAc,eAAd;EACA,CAFD;EAIA,OAAO,EAAP;AACD;;ACvCe,SAAA,WAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,IAAI,KAAK,GAAG,IAAI,CAAC,QAAL,EAAZ;EAAA,IACA,OAAO,GAAG,IAAI,CAAC,UAAL,EADV;EAAA,IAEA,KAAK,GAAG,eAAe,CAAC,UAFxB;EAAA,IAGA,MAAM,GAAG,eAAe,CAAC,WAHzB;EAAA,IAIA,YAAY,GAAG,MAAM,CAAC,IAAP,CAAY,eAAZ,EAA6B,QAA7B,CAAsC,WAAtC,CAJf;EAAA,IAKA,IAAI,GAAG,OAAO,eAAe,CAAC,WAAvB,KAAuC,WAAvC,GAAqD,eAAe,CAAC,WAArE,GAAmF,okBAL1F;EAAA,IAMA,KAAK,GAAG,OAAO,eAAe,CAAC,YAAvB,KAAwC,WAAxC,GAAsD,eAAe,CAAC,YAAtE,GAAqF,2rBAN7F;;EAQA,IAAI,YAAY,IAAI,KAAK,KAAK,eAAe,CAAC,SAA3C,IAA0D,CAAC,YAAD,KAAmB,MAAM,IAAI,KAAX,IAAsB,KAAK,KAAK,IAAV,IAAkB,KAAK,KAAK,MAA5B,IAAsC,KAAK,KAAK,MAAhD,IAA0D,KAAK,KAAK,CAApE,IAAyE,KAAK,KAAK,GAA3H,CAA7D,EAA+L;IAC9L,OAAO,CAAC,YAAR,CAAqB,cAArB,EAAqC,IAArC;IACA,OAAO,IAAI,IAAI,EAAf;EACA,CAHD,MAGK;IACJ,IAAG,KAAK,KAAK,KAAK,KAAK,MAAV,IAAoB,KAAK,KAAK,EAA9B,IAAoC,KAAK,KAAK,IAA9C,IAAsD,OAAO,KAAP,KAAiB,WAA5E,CAAR,EAAiG;MAChG,OAAO,CAAC,YAAR,CAAqB,cAArB,EAAqC,OAArC;MACA,OAAO,EAAP;IACA,CAHD,MAGK;MACJ,OAAO,CAAC,YAAR,CAAqB,cAArB,EAAqC,KAArC;MACA,OAAO,KAAK,IAAI,EAAhB;IACA;EACD;AACF;;ACrBe,SAAA,UAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,IAAI,EAAE,GAAG,MAAM,CAAC,QAAP,IAAmB,KAAK,CAAC,QAAlC;EACA,IAAI,WAAW,GAAG,eAAe,CAAC,WAAhB,IAA+B,qBAAjD;EACA,IAAI,YAAY,GAAG,eAAe,CAAC,YAAhB,IAAgC,qBAAnD;EACA,IAAI,OAAO,GAAG,OAAO,eAAe,CAAC,kBAAvB,KAA8C,WAA9C,GAA4D,eAAe,CAAC,kBAA5E,GAAiG,EAA/G;EACA,IAAI,KAAK,GAAG,IAAI,CAAC,QAAL,EAAZ;;EAEA,IAAG,OAAO,EAAP,IAAa,WAAhB,EAA4B;IAC3B,IAAI,WAAJ;;IAEA,IAAG,EAAE,CAAC,UAAH,CAAc,KAAd,CAAH,EAAwB;MACvB,WAAW,GAAG,KAAd;IACA,CAFD,MAEM,IAAG,WAAW,KAAK,KAAnB,EAAyB;MAC9B,WAAW,GAAG,EAAE,CAAC,OAAH,CAAW,MAAM,CAAC,KAAD,CAAjB,CAAd;IACA,CAFK,MAED;MACJ,WAAW,GAAG,EAAE,CAAC,UAAH,CAAc,MAAM,CAAC,KAAD,CAApB,EAA6B,WAA7B,CAAd;IACA;;IAED,IAAG,WAAW,CAAC,OAAf,EAAuB;MACtB,IAAG,eAAe,CAAC,QAAnB,EAA4B;QAC3B,WAAW,GAAG,WAAW,CAAC,OAAZ,CAAoB,eAAe,CAAC,QAApC,CAAd;MACA;;MAED,OAAO,WAAW,CAAC,QAAZ,CAAqB,YAArB,CAAP;IACA,CAND,MAMK;MACJ,IAAG,OAAO,KAAK,IAAZ,IAAoB,CAAC,KAAxB,EAA8B;QAC7B,OAAO,KAAP;MACA,CAFD,MAEM,IAAG,OAAO,OAAP,KAAmB,UAAtB,EAAiC;QACtC,OAAO,OAAO,CAAC,KAAD,CAAd;MACA,CAFK,MAED;QACJ,OAAO,OAAP;MACA;IACD;EACD,CA1BD,MA0BK;IACJ,OAAO,CAAC,KAAR,CAAc,8DAAd;EACA;AACF;;ACpCe,SAAA,YAAA,CAAU,IAAV,EAAgB,eAAhB,EAAiC,UAAjC,EAA6C;EAC3D,IAAI,EAAE,GAAG,MAAM,CAAC,QAAP,IAAmB,KAAK,CAAC,QAAlC;EACA,IAAI,WAAW,GAAG,eAAe,CAAC,WAAhB,IAA+B,qBAAjD;EACA,IAAI,OAAO,GAAG,OAAO,eAAe,CAAC,kBAAvB,KAA8C,WAA9C,GAA4D,eAAe,CAAC,kBAA5E,GAAiG,EAA/G;EACA,IAAI,MAAM,GAAG,OAAO,eAAe,CAAC,MAAvB,KAAkC,WAAlC,GAAgD,eAAe,CAAC,MAAhE,GAAyE,KAAtF;EACA,IAAI,IAAI,GAAG,OAAO,eAAe,CAAC,IAAvB,KAAgC,WAAhC,GAA8C,eAAe,CAAC,IAA9D,GAAqE,MAAhF;EACA,IAAI,QAAQ,GAAG,OAAO,eAAe,CAAC,QAAvB,KAAoC,WAApC,GAAkD,eAAe,CAAC,QAAlE,GAA6E,KAA5F;EACA,IAAI,IAAI,GAAG,OAAO,eAAe,CAAC,IAAvB,KAAgC,WAAhC,GAA8C,eAAe,CAAC,IAA9D,GAAqE,EAAE,CAAC,GAAH,EAAhF;EACA,IAAI,KAAK,GAAG,IAAI,CAAC,QAAL,EAAZ;;EAEA,IAAG,OAAO,EAAP,IAAa,WAAhB,EAA4B;IAC3B,IAAI,WAAJ;;IAEA,IAAG,EAAE,CAAC,UAAH,CAAc,KAAd,CAAH,EAAwB;MACvB,WAAW,GAAG,KAAd;IACA,CAFD,MAEM,IAAG,WAAW,KAAK,KAAnB,EAAyB;MAC9B,WAAW,GAAG,EAAE,CAAC,OAAH,CAAW,MAAM,CAAC,KAAD,CAAjB,CAAd;IACA,CAFK,MAED;MACJ,WAAW,GAAG,EAAE,CAAC,UAAH,CAAc,MAAM,CAAC,KAAD,CAApB,EAA6B,WAA7B,CAAd;IACA;;IAED,IAAI,WAAW,CAAC,OAAhB,EAAwB;MACvB,IAAG,QAAH,EAAY;QACX,OAAO,WAAW,CAAC,IAAZ,CAAiB,IAAjB,EAAuB,IAAvB,EAA6B,OAA7B,MAA2C,MAAM,GAAG,MAAM,MAAT,GAAkB,EAAnE,CAAP;MACA,CAFD,MAEK;QACJ,OAAO,QAAQ,CAAC,WAAW,CAAC,IAAZ,CAAiB,IAAjB,EAAuB,IAAvB,EAA6B,IAA7B,CAAD,CAAR,IAAgD,MAAM,GAAG,MAAM,MAAT,GAAkB,EAAxE,CAAP;MACA;IACD,CAND,MAMO;MAEN,IAAI,OAAO,KAAK,IAAhB,EAAsB;QACrB,OAAO,KAAP;MACA,CAFD,MAEO,IAAI,OAAO,OAAP,KAAmB,UAAvB,EAAmC;QACzC,OAAO,OAAO,CAAC,KAAD,CAAd;MACA,CAFM,MAEA;QACN,OAAO,OAAP;MACA;IACD;EACD,CA3BD,MA2BK;IACJ,OAAO,CAAC,KAAR,CAAc,kEAAd;EACA;AACF;;ACxCe,SAAA,MAAA,CAAU,IAAV,EAAgB,eAAhB,EAAiC,UAAjC,EAA6C;EAC3D,IAAI,KAAK,GAAG,IAAI,CAAC,QAAL,EAAZ;;EAEA,IAAI,OAAO,eAAe,CAAC,KAAD,CAAtB,KAAkC,WAAtC,EAAmD;IAClD,OAAO,CAAC,IAAR,CAAa,+BAA+B,KAA5C;IACA,OAAO,KAAP;EACA;;EAED,OAAO,eAAe,CAAC,KAAD,CAAtB;AACD;;ACTe,SAAA,MAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,IAAI,KAAK,GAAG,IAAI,CAAC,QAAL,EAAZ;EAAA,IACA,OAAO,GAAG,IAAI,CAAC,UAAL,EADV;EAAA,IAEA,QAAQ,GAAG,eAAe,IAAI,eAAe,CAAC,KAAnC,GAA2C,eAAe,CAAC,KAA3D,GAAmE,CAF9E;EAAA,IAGA,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAHR;EAAA,IAIA,IAAI,GAAG,QAAQ,CAAC,eAAT,CAAyB,4BAAzB,EAAuD,KAAvD,CAJP;EAAA,IAKA,UAAU,GAAG,ySALb;EAAA,IAMA,YAAY,GAAG,ySANf,CADyD,CAS1D;;EACC,KAAK,CAAC,KAAN,CAAY,aAAZ,GAA4B,QAA5B,CAVyD,CAY1D;;EACC,IAAI,CAAC,YAAL,CAAkB,OAAlB,EAA2B,IAA3B;EACA,IAAI,CAAC,YAAL,CAAkB,QAAlB,EAA4B,IAA5B;EACA,IAAI,CAAC,YAAL,CAAkB,SAAlB,EAA6B,aAA7B;EACA,IAAI,CAAC,YAAL,CAAkB,WAAlB,EAA+B,UAA/B;EACA,IAAI,CAAC,KAAL,CAAW,OAAX,GAAqB,OAArB;EAEA,KAAK,GAAG,KAAK,IAAI,CAAC,KAAK,CAAC,KAAD,CAAf,GAAyB,QAAQ,CAAC,KAAD,CAAjC,GAA2C,CAAnD;EAEA,KAAK,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,IAAI,CAAC,GAAL,CAAS,KAAT,EAAgB,QAAhB,CAAZ,CAAR;;EAEA,KAAI,IAAI,CAAC,GAAC,CAAV,EAAY,CAAC,IAAG,QAAhB,EAAyB,CAAC,EAA1B,EAA6B;IAC5B,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAL,CAAe,IAAf,CAAf;IACA,QAAQ,CAAC,SAAT,GAAqB,CAAC,IAAI,KAAL,GAAa,UAAb,GAA0B,YAA/C;IAEA,KAAK,CAAC,WAAN,CAAkB,QAAlB;EACA;;EAED,OAAO,CAAC,KAAR,CAAc,UAAd,GAA2B,QAA3B;EACA,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,QAAzB;EACA,OAAO,CAAC,KAAR,CAAc,YAAd,GAA6B,UAA7B;EAEA,OAAO,CAAC,YAAR,CAAqB,YAArB,EAAmC,KAAnC;EAEA,OAAO,KAAP;AACD;;ACrCe,SAAA,OAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,IAAI,KAAK,GAAG,KAAK,YAAL,CAAkB,IAAI,CAAC,QAAL,EAAlB,KAAsC,CAAlD;EAAA,IACA,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CADL;EAAA,IAEA,GAAG,GAAG,eAAe,IAAI,eAAe,CAAC,GAAnC,GAAyC,eAAe,CAAC,GAAzD,GAA+D,GAFrE;EAAA,IAGA,GAAG,GAAG,eAAe,IAAI,eAAe,CAAC,GAAnC,GAAyC,eAAe,CAAC,GAAzD,GAA+D,CAHrE;EAAA,IAIA,MAAM,GAAG,eAAe,IAAI,OAAO,eAAe,CAAC,KAAvB,KAAiC,WAApD,GAAkE,eAAe,CAAC,KAAlF,GAA0F,CAAC,KAAD,EAAQ,QAAR,EAAkB,OAAlB,CAJnG;EAAA,IAKA,KAAK,GAAG,SALR;EAAA,IAMA,OANA;EAAA,IAMS,YANT;;EAQA,IAAG,KAAK,CAAC,KAAD,CAAL,IAAgB,OAAO,IAAI,CAAC,QAAL,EAAP,KAA2B,WAA9C,EAA0D;IACzD;EACA;;EAED,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,yBAAjB,EAbyD,CAe1D;;EACC,YAAY,GAAG,UAAU,CAAC,KAAD,CAAV,IAAqB,GAArB,GAA2B,UAAU,CAAC,KAAD,CAArC,GAA+C,GAA9D;EACA,YAAY,GAAG,UAAU,CAAC,YAAD,CAAV,IAA4B,GAA5B,GAAkC,UAAU,CAAC,YAAD,CAA5C,GAA6D,GAA5E,CAjByD,CAmB1D;;EACC,OAAO,GAAG,CAAC,GAAG,GAAG,GAAP,IAAc,GAAxB;EACA,YAAY,GAAG,IAAI,CAAC,KAAL,CAAW,CAAC,YAAY,GAAG,GAAhB,IAAuB,OAAlC,CAAf,CArByD,CAuB1D;;EACC,QAAO,OAAO,MAAd;IACC,KAAK,QAAL;MACC,KAAK,GAAG,MAAR;MACA;;IACD,KAAK,UAAL;MACC,KAAK,GAAG,MAAM,CAAC,KAAD,CAAd;MACA;;IACD,KAAK,QAAL;MACC,IAAG,KAAK,CAAC,OAAN,CAAc,MAAd,CAAH,EAAyB;QACxB,IAAI,IAAI,GAAG,MAAM,MAAM,CAAC,MAAxB;QACA,IAAI,KAAK,GAAG,IAAI,CAAC,KAAL,CAAW,YAAY,GAAG,IAA1B,CAAZ;QAEA,KAAK,GAAG,IAAI,CAAC,GAAL,CAAS,KAAT,EAAgB,MAAM,CAAC,MAAP,GAAgB,CAAhC,CAAR;QACA,KAAK,GAAG,IAAI,CAAC,GAAL,CAAS,KAAT,EAAgB,CAAhB,CAAR;QACA,KAAK,GAAG,MAAM,CAAC,KAAD,CAAd;QACA;MACA;;EAhBH;;EAmBA,EAAE,CAAC,KAAH,CAAS,eAAT,GAA2B,KAA3B;EAEA,OAAO,EAAP;AACD;;AC5Ce,SAAA,UAAA,CAAS,IAAT,EAAe,eAAe,GAAG,EAAjC,EAAqC,UAArC,EAAgD;EAAA;EAC9D,IAAI,KAAK,GAAG,KAAK,YAAL,CAAkB,IAAI,CAAC,QAAL,EAAlB,KAAsC,CAAlD;EAAA,IACA,OAAO,GAAG,IAAI,CAAC,UAAL,EADV;EAAA,IAEA,GAAG,GAAG,eAAe,CAAC,GAAhB,GAAsB,eAAe,CAAC,GAAtC,GAA4C,GAFlD;EAAA,IAGA,GAAG,GAAG,eAAe,CAAC,GAAhB,GAAsB,eAAe,CAAC,GAAtC,GAA4C,CAHlD;EAAA,IAIA,WAAW,GAAG,eAAe,CAAC,WAAhB,GAA8B,eAAe,CAAC,WAA9C,GAA4D,QAJ1E;EAAA,IAKA,OALA;EAAA,IAKS,YALT;EAAA,IAKuB,KALvB;EAAA,IAK8B,MAL9B;EAAA,IAKsC,WALtC,CAD8D,CAQ/D;;EACC,YAAY,GAAG,UAAU,CAAC,KAAD,CAAV,IAAqB,GAArB,GAA2B,UAAU,CAAC,KAAD,CAArC,GAA+C,GAA9D;EACA,YAAY,GAAG,UAAU,CAAC,YAAD,CAAV,IAA4B,GAA5B,GAAkC,UAAU,CAAC,YAAD,CAA5C,GAA6D,GAA5E,CAV8D,CAY/D;;EACC,OAAO,GAAG,CAAC,GAAG,GAAG,GAAP,IAAc,GAAxB;EACA,YAAY,GAAG,IAAI,CAAC,KAAL,CAAW,CAAC,YAAY,GAAG,GAAhB,IAAuB,OAAlC,CAAf,CAd8D,CAgB/D;;EACC,QAAO,OAAO,eAAe,CAAC,KAA9B;IACC,KAAK,QAAL;MACC,KAAK,GAAG,eAAe,CAAC,KAAxB;MACA;;IACD,KAAK,UAAL;MACC,KAAK,GAAG,eAAe,CAAC,KAAhB,CAAsB,KAAtB,CAAR;MACA;;IACD,KAAK,QAAL;MACC,IAAG,KAAK,CAAC,OAAN,CAAc,eAAe,CAAC,KAA9B,CAAH,EAAwC;QACvC,IAAI,IAAI,GAAG,MAAM,eAAe,CAAC,KAAhB,CAAsB,MAAvC;QACA,IAAI,KAAK,GAAG,IAAI,CAAC,KAAL,CAAW,YAAY,GAAG,IAA1B,CAAZ;QAEA,KAAK,GAAG,IAAI,CAAC,GAAL,CAAS,KAAT,EAAgB,eAAe,CAAC,KAAhB,CAAsB,MAAtB,GAA+B,CAA/C,CAAR;QACA,KAAK,GAAG,IAAI,CAAC,GAAL,CAAS,KAAT,EAAgB,CAAhB,CAAR;QACA,KAAK,GAAG,eAAe,CAAC,KAAhB,CAAsB,KAAtB,CAAR;QACA;MACA;;IACF;MACC,KAAK,GAAG,SAAR;EAlBF,CAjB8D,CAsC/D;;;EACC,QAAO,OAAO,eAAe,CAAC,MAA9B;IACC,KAAK,QAAL;MACC,MAAM,GAAG,eAAe,CAAC,MAAzB;MACA;;IACD,KAAK,UAAL;MACC,MAAM,GAAG,eAAe,CAAC,MAAhB,CAAuB,KAAvB,CAAT;MACA;;IACD,KAAK,SAAL;MACC,MAAM,GAAG,KAAT;MACA;;IACD;MACC,MAAM,GAAG,KAAT;EAXF,CAvC8D,CAqD/D;;;EACC,QAAO,OAAO,eAAe,CAAC,WAA9B;IACC,KAAK,QAAL;MACC,WAAW,GAAG,eAAe,CAAC,WAA9B;MACA;;IACD,KAAK,UAAL;MACC,WAAW,GAAG,eAAe,CAAC,WAAhB,CAA4B,KAA5B,CAAd;MACA;;IACD,KAAK,QAAL;MACC,IAAG,KAAK,CAAC,OAAN,CAAc,eAAe,CAAC,WAA9B,CAAH,EAA8C;QAC7C,IAAI,IAAI,GAAG,MAAM,eAAe,CAAC,WAAhB,CAA4B,MAA7C;QACA,IAAI,KAAK,GAAG,IAAI,CAAC,KAAL,CAAW,YAAY,GAAG,IAA1B,CAAZ;QAEA,KAAK,GAAG,IAAI,CAAC,GAAL,CAAS,KAAT,EAAgB,eAAe,CAAC,WAAhB,CAA4B,MAA5B,GAAqC,CAArD,CAAR;QACA,KAAK,GAAG,IAAI,CAAC,GAAL,CAAS,KAAT,EAAgB,CAAhB,CAAR;QACA,WAAW,GAAG,eAAe,CAAC,WAAhB,CAA4B,KAA5B,CAAd;MACA;;MACD;;IACD;MACC,WAAW,GAAG,MAAd;EAlBF;;EAqBA,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,MAAzB;EACA,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,UAAzB;EAEA,OAAO,CAAC,YAAR,CAAqB,YAArB,EAAmC,YAAnC;EAEA,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAZ;EACA,KAAK,CAAC,KAAN,CAAY,OAAZ,GAAsB,cAAtB;EACA,KAAK,CAAC,KAAN,CAAY,KAAZ,GAAoB,YAAY,GAAG,GAAnC;EACA,KAAK,CAAC,KAAN,CAAY,eAAZ,GAA8B,KAA9B;EACA,KAAK,CAAC,KAAN,CAAY,MAAZ,GAAqB,MAArB;EAEA,KAAK,CAAC,YAAN,CAAmB,UAAnB,EAA+B,GAA/B;EACA,KAAK,CAAC,YAAN,CAAmB,UAAnB,EAA+B,GAA/B;EAEA,IAAI,YAAY,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAnB;EACA,YAAY,CAAC,KAAb,CAAmB,QAAnB,GAA8B,UAA9B;EACA,YAAY,CAAC,KAAb,CAAmB,KAAnB,GAA2B,MAA3B;EACA,YAAY,CAAC,KAAb,CAAmB,MAAnB,GAA4B,MAA5B;;EAEA,IAAG,MAAH,EAAU;IACT,IAAI,QAAQ,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAf;IACA,QAAQ,CAAC,KAAT,CAAe,QAAf,GAA0B,UAA1B;IACA,QAAQ,CAAC,KAAT,CAAe,GAAf,GAAqB,CAArB;IACA,QAAQ,CAAC,KAAT,CAAe,IAAf,GAAsB,CAAtB;IACA,QAAQ,CAAC,KAAT,CAAe,SAAf,GAA2B,WAA3B;IACA,QAAQ,CAAC,KAAT,CAAe,KAAf,GAAuB,MAAvB;IACA,QAAQ,CAAC,KAAT,CAAe,KAAf,GAAuB,WAAvB;IACA,QAAQ,CAAC,SAAT,GAAqB,MAArB;EACA;;EAED,UAAU,CAAC,YAAU;IAEtB;IACE,IAAG,EAAE,IAAI,YAAY,aAAlB,CAAH,EAAoC;MACnC,IAAI,QAAQ,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAf;MACA,QAAQ,CAAC,KAAT,CAAe,QAAf,GAA0B,UAA1B;MACA,QAAQ,CAAC,KAAT,CAAe,GAAf,GAAqB,KAArB;MACA,QAAQ,CAAC,KAAT,CAAe,MAAf,GAAwB,KAAxB;MACA,QAAQ,CAAC,KAAT,CAAe,IAAf,GAAsB,KAAtB;MACA,QAAQ,CAAC,KAAT,CAAe,KAAf,GAAuB,KAAvB;MAEA,OAAO,CAAC,WAAR,CAAoB,QAApB;MAEA,OAAO,GAAG,QAAV;IACA;;IAED,OAAO,CAAC,WAAR,CAAoB,YAApB;IACA,YAAY,CAAC,WAAb,CAAyB,KAAzB;;IAEA,IAAG,MAAH,EAAU;MACT,YAAY,CAAC,WAAb,CAAyB,QAAzB;IACA;EACD,CAtBS,CAAV;EAwBA,OAAO,EAAP;AACD;;ACpIe,SAAA,KAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,IAAI,CAAC,UAAL,GAAkB,KAAlB,CAAwB,eAAxB,GAA0C,KAAK,YAAL,CAAkB,IAAI,CAAC,QAAL,EAAlB,CAA1C;EACA,OAAO,EAAP;AACD;;ACHe,SAAA,UAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,OAAO,okBAAP;AACD;;ACFe,SAAA,WAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,OAAO,0rBAAP;AACD;;ACFe,SAAA,MAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,IAAI,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAd;EACA,IAAI,GAAG,GAAG,IAAI,CAAC,MAAL,EAAV;EAEA,GAAG,CAAC,aAAJ,CAAmB,QAAD,IAAc;IAC/B,OAAO,CAAC,SAAR,GAAoB,QAApB;EACA,CAFD;EAIA,OAAO,OAAP;AACD;;ACTe,SAAA,MAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,IAAI,CAAC,UAAL,GAAkB,SAAlB,CAA4B,GAA5B,CAAgC,sBAAhC;EACA,OAAO,kLAAP;AACD;;ACHe,SAAA,kBAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;EAAA,IACA,MAAM,GAAG,IAAI,CAAC,MAAL,GAAc,IAAd,CAAmB,OAAnB,CAA2B,gBADpC;;EAGA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,sCAAjB;EACA,EAAE,CAAC,SAAH,GAAe,mIAAf;EAEA,IAAI,CAAC,UAAL,GAAkB,SAAlB,CAA4B,GAA5B,CAAgC,sBAAhC;;EAEA,SAAS,UAAT,CAAoB,MAApB,EAA2B;IAC1B,IAAI,UAAU,GAAG,MAAM,CAAC,OAAxB;IAEA,MAAM,CAAC,IAAP,GAAc,MAAd;;IAEA,IAAG,UAAH,EAAc;MAEb,IAAG,MAAM,CAAC,IAAV,EAAe;QACd,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,MAAjB;QACA,UAAU,CAAC,KAAX,CAAiB,OAAjB,GAA2B,EAA3B;MACA,CAHD,MAGK;QACJ,EAAE,CAAC,SAAH,CAAa,MAAb,CAAoB,MAApB;QACA,UAAU,CAAC,KAAX,CAAiB,OAAjB,GAA2B,MAA3B;MACA;IACD;EACD;;EAED,EAAE,CAAC,gBAAH,CAAoB,OAApB,EAA6B,UAAS,CAAT,EAAW;IACvC,CAAC,CAAC,wBAAF;IACA,UAAU,CAAC,CAAC,MAAM,CAAC,IAAT,CAAV;IACA,IAAI,CAAC,QAAL,GAAgB,UAAhB,CAA2B,eAA3B;EACA,CAJD;EAMA,UAAU,CAAC,MAAM,CAAC,IAAR,CAAV;EAEA,OAAO,EAAP;AACD;;ACjCe,SAAA,YAAA,CAAS,IAAT,EAAe,eAAf,EAAgC,UAAhC,EAA2C;EACzD,IAAI,QAAQ,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAf;EACA,IAAI,OAAO,GAAG,KAAd;EAEA,QAAQ,CAAC,IAAT,GAAgB,UAAhB;EAEA,QAAQ,CAAC,YAAT,CAAsB,YAAtB,EAAoC,YAApC;;EAEA,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,WAArB,EAAkC,IAAlC,CAAH,EAA2C;IAE1C,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,EAAoC,CAAD,IAAO;MACzC,CAAC,CAAC,eAAF;IACA,CAFD;;IAIA,IAAG,OAAO,IAAI,CAAC,MAAZ,IAAsB,UAAzB,EAAoC;MACnC,IAAI,GAAG,GAAG,IAAI,CAAC,MAAL,EAAV;;MAEA,IAAG,GAAG,YAAY,YAAlB,EAA+B;QAE9B,QAAQ,CAAC,gBAAT,CAA0B,QAA1B,EAAqC,CAAD,IAAO;UAC1C,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAAnB,KAA2C,OAA9C,EAAsD;YACrD,IAAG,CAAC,OAAJ,EAAY;cACX,GAAG,CAAC,YAAJ;YACA,CAFD,MAEK;cACJ,OAAO,GAAG,KAAV;YACA;UACD,CAND,MAMK;YACJ,GAAG,CAAC,YAAJ;UACA;QACD,CAVD;;QAYA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAAnB,KAA2C,OAA9C,EAAsD;UACrD,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,EAAoC,CAAD,IAAO;YACzC,OAAO,GAAG,IAAV;YACA,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,qBAA7B,CAAmD,GAAG,CAAC,IAAvD,EAA6D,CAA7D;UACA,CAHD;QAIA;;QAED,QAAQ,CAAC,OAAT,GAAmB,GAAG,CAAC,UAAJ,IAAkB,GAAG,CAAC,UAAJ,EAArC;QACA,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,yBAA7B,CAAuD,GAAvD,EAA4D,QAA5D;MACA,CAvBD,MAuBK;QACJ,QAAQ,GAAG,EAAX;MACA;IACD,CA7BD,MA6BM;MACL,QAAQ,CAAC,gBAAT,CAA0B,QAA1B,EAAqC,CAAD,IAAO;QAC1C,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,YAA7B,CAA0C,MAA7C,EAAoD;UACnD,KAAK,KAAL,CAAW,WAAX;QACA,CAFD,MAEM;UACL,KAAK,KAAL,CAAW,SAAX,CAAqB,eAAe,CAAC,QAArC;QACA;MACD,CAND;MAQA,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,4BAA7B,CAA0D,QAA1D;IACA;EACD;;EAED,OAAO,QAAP;AACD;;ACtCA,IAAA,iBAAA,GAAe;EACd,SAAS,EAAC,SADI;EAEd,IAAI,EAACluC,MAFS;EAGd,QAAQ,EAACmuC,UAHK;EAId,KAAK,EAAC,KAJQ;EAKd,IAAI,EAAC,IALS;EAMd,KAAK,EAAC,KANQ;EAOd,SAAS,EAACC,WAPI;EAQd,QAAQ,EAACC,UARK;EASd,YAAY,EAAC,YATC;EAUd,MAAM,EAAC,MAVO;EAWd,IAAI,EAACC,MAXS;EAYd,OAAO,EAAC,OAZM;EAad,QAAQ,EAACC,UAbK;EAcd,KAAK,EAAC,KAdQ;EAed,UAAU,EAAC,UAfG;EAgBd,WAAW,EAAC,WAhBE;EAiBd,MAAM,EAAC,MAjBO;EAkBd,MAAM,EAAC,MAlBO;EAmBd,kBAAkB,EAAC,kBAnBL;EAoBd,YAAY,EAAC;AApBC,CAAf;;ACjBA,MAAM,MAAN,SAAqB,MAArB,CAA2B;EAE1B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,oBAAL,CAA0B,WAA1B;IACA,KAAK,oBAAL,CAA0B,iBAA1B;IAEA,KAAK,oBAAL,CAA0B,gBAA1B;IACA,KAAK,oBAAL,CAA0B,sBAA1B;IACA,KAAK,oBAAL,CAA0B,oBAA1B;IACA,KAAK,oBAAL,CAA0B,0BAA1B;IACA,KAAK,oBAAL,CAA0B,qBAA1B;IACA,KAAK,oBAAL,CAA0B,2BAA1B;IACA,KAAK,oBAAL,CAA0B,gBAA1B;IACA,KAAK,oBAAL,CAA0B,sBAA1B;EACA;;EAED,UAAU,GAAE;IACX,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAA9B;IACA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAhC;IACA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAAhC;IACA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAhC;EACA,CAvByB,CAyB3B;;;EACC,gBAAgB,CAAC,MAAD,EAAQ;IACvB,MAAM,CAAC,OAAP,CAAe,MAAf,GAAwB,KAAK,eAAL,CAAqB,MAArB,EAA6B,EAA7B,CAAxB;;IAEA,IAAG,OAAO,MAAM,CAAC,UAAP,CAAkB,cAAzB,KAA4C,WAA/C,EAA2D;MAC1D,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,KAAtB,GAA8B,KAAK,eAAL,CAAqB,MAArB,EAA6B,OAA7B,CAA9B;IACA;;IAED,IAAG,OAAO,MAAM,CAAC,UAAP,CAAkB,kBAAzB,KAAgD,WAAnD,EAA+D;MAC9D,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,SAAtB,GAAkC,KAAK,eAAL,CAAqB,MAArB,EAA6B,WAA7B,CAAlC;IACA;;IAED,IAAG,OAAO,MAAM,CAAC,UAAP,CAAkB,mBAAzB,KAAiD,WAApD,EAAgE;MAC/D,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,UAAtB,GAAmC,KAAK,eAAL,CAAqB,MAArB,EAA6B,YAA7B,CAAnC;IACA;EACD;;EAED,eAAe,CAAC,MAAD,EAAS,IAAT,EAAc;IAC5B,IAAI,MAAM,GAAG;MAAC,MAAM,EAAC,MAAM,CAAC,UAAP,CAAkB,cAAc,IAAd,GAAqB,QAAvC,KAAoD;IAA5D,CAAb;IAAA,IACA,SAAS,GAAG,MAAM,CAAC,UAAP,CAAkB,cAAc,IAAhC,CADZ,CAD4B,CAI9B;;IACE,QAAO,OAAO,SAAd;MACC,KAAK,QAAL;QACC,IAAG,MAAM,CAAC,UAAP,CAAkB,SAAlB,CAAH,EAAgC;UAC/B,MAAM,CAAC,SAAP,GAAmB,MAAM,CAAC,UAAP,CAAkB,SAAlB,CAAnB;QACA,CAFD,MAEK;UACJ,OAAO,CAAC,IAAR,CAAa,6CAAb,EAA4D,SAA5D;UACA,MAAM,CAAC,SAAP,GAAmB,MAAM,CAAC,UAAP,CAAkB,SAArC;QACA;;QACD;;MAED,KAAK,UAAL;QACC,MAAM,CAAC,SAAP,GAAmB,SAAnB;QACA;;MAED;QACC,MAAM,CAAC,SAAP,GAAmB,MAAM,CAAC,UAAP,CAAkB,SAArC;QACA;IAhBF;;IAmBA,OAAO,MAAP;EACA;;EAED,YAAY,CAAC,IAAD,EAAM;IACjB,IAAG,IAAI,CAAC,OAAL,CAAa,MAAb,IAAuB,IAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,gBAA3C,IAA+D,CAAC,IAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,QAAvF,EAAgG;MAC/F,IAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,gBAApB;MACA,IAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,QAApB,GAA+B,IAA/B;IACA;EACD,CA1EyB,CA4E3B;;;EACC,YAAY,CAAC,MAAD,EAAS,KAAT,EAAgB,EAAhB,EAAmB;IAC9B,IAAI,SAAJ,EAAe,MAAf,EAAuB,UAAvB,EAAmC,QAAnC;;IAEA,IAAG,MAAM,CAAC,UAAP,CAAkB,cAArB,EAAoC;MACnC,SAAS,GAAG,KAAK,YAAL,CAAkB,MAAM,CAAC,UAAP,CAAkB,cAApC,CAAZ;;MAEA,UAAU,GAAI,QAAD,IAAc;QAC1B,MAAM,CAAC,sBAAP,GAAgC,QAAhC;MACA,CAFD;;MAIA,QAAQ,GAAG;QACV,QAAQ,EAAC,YAAU;UAClB,OAAO,KAAP;QACA,CAHS;QAIV,UAAU,EAAC,YAAU;UACpB,OAAO,EAAP;QACA;MANS,CAAX;MASA,MAAM,GAAG,MAAM,CAAC,UAAP,CAAkB,oBAAlB,IAA0C,EAAnD;MAEA,MAAM,GAAG,OAAO,MAAP,KAAkB,UAAlB,GAA+B,MAAM,EAArC,GAA0C,MAAnD;MAEA,OAAO,SAAS,CAAC,IAAV,CAAe,IAAf,EAAqB,QAArB,EAA+B,MAA/B,EAAuC,UAAvC,CAAP;IACA,CArBD,MAqBK;MACJ,OAAO,KAAP;IACA;EACD,CAxGyB,CA2G3B;;;EACC,WAAW,CAAC,IAAD,EAAM;IAChB,IAAI,SAAS,GAAG,IAAI,CAAC,YAAL,EAAhB;IAAA,IACA,MAAM,GAAG,OAAO,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,MAApB,CAA2B,MAAlC,KAA6C,UAA7C,GAA0D,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,MAApB,CAA2B,MAA3B,CAAkC,SAAlC,CAA1D,GAAyG,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,MAApB,CAA2B,MAD7I;;IAGA,SAAS,UAAT,CAAoB,QAApB,EAA6B;MAC5B,IAAG,CAAC,IAAI,CAAC,OAAL,CAAa,MAAjB,EAAwB;QACvB,IAAI,CAAC,OAAL,CAAa,MAAb,GAAsB,EAAtB;MACA;;MAED,IAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,gBAApB,GAAuC,QAAvC;MACA,IAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,QAApB,GAA+B,KAA/B;IACA;;IAED,OAAO,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,MAApB,CAA2B,SAA3B,CAAqC,IAArC,CAA0C,IAA1C,EAAgD,SAAhD,EAA2D,MAA3D,EAAmE,UAAnE,CAAP;EACA;;EAED,iBAAiB,CAAC,IAAD,EAAO,IAAP,EAAY;IAC5B,IAAI,SAAS,GAAG,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,MAApB,CAA2B,IAA3B,CAAhB;IAAA,IACA,MADA;;IAGA,IAAG,SAAH,EAAa;MACZ,MAAM,GAAG,OAAO,SAAS,CAAC,MAAjB,KAA4B,UAA5B,GAAyC,SAAS,CAAC,MAAV,CAAiB,IAAI,CAAC,YAAL,EAAjB,CAAzC,GAAiF,SAAS,CAAC,MAApG;;MAEA,SAAS,UAAT,CAAoB,QAApB,EAA6B;QAC5B,IAAG,CAAC,IAAI,CAAC,OAAL,CAAa,MAAjB,EAAwB;UACvB,IAAI,CAAC,OAAL,CAAa,MAAb,GAAsB,EAAtB;QACA;;QAED,IAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,gBAApB,GAAuC,QAAvC;QACA,IAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,QAApB,GAA+B,KAA/B;MACA;;MAED,OAAO,SAAS,CAAC,SAAV,CAAoB,IAApB,CAAyB,IAAzB,EAA+B,IAAI,CAAC,YAAL,EAA/B,EAAoD,MAApD,EAA4D,UAA5D,CAAP;IAEA,CAdD,MAcK;MACJ,OAAO,KAAK,WAAL,CAAiB,IAAjB,CAAP;IACA;EACD;;EAED,YAAY,CAAC,KAAD,EAAO;IAClB,IAAG,KAAH,EAAS;MACR,IAAI,SAAS,GAAG;QACf,KAAK,OADU;QAEf,KAAK,MAFU;QAGf,KAAK,MAHU;QAIf,KAAK,QAJU;QAKf,KAAK,OALU;QAMf,KAAK,QANU;QAOf,KAAK,QAPU;QAQf,KAAK;MARU,CAAhB;MAWA,OAAO,MAAM,CAAC,KAAD,CAAN,CAAc,OAAd,CAAsB,aAAtB,EAAqC,UAAU,CAAV,EAAa;QACxD,OAAO,SAAS,CAAC,CAAD,CAAhB;MACA,CAFM,CAAP;IAGA,CAfD,MAeK;MACJ,OAAO,KAAP;IACA;EACD;;EAED,YAAY,CAAC,KAAD,EAAO;IAClB,OAAO,KAAK,KAAK,IAAV,IAAkB,OAAO,KAAP,KAAiB,WAAnC,IAAkD,KAAK,KAAK,EAA5D,GAAiE,QAAjE,GAA4E,KAAnF;EACA,CA1KyB,CA4K3B;;;EACC,YAAY,CAAC,SAAD,EAAW;IACtB,QAAO,OAAO,SAAd;MACC,KAAK,QAAL;QACC,IAAG,MAAM,CAAC,UAAP,CAAkB,SAAlB,CAAH,EAAgC;UAC/B,SAAS,GAAG,MAAM,CAAC,UAAP,CAAkB,SAAlB,CAAZ;QACA,CAFD,MAEK;UACJ,OAAO,CAAC,IAAR,CAAa,6CAAb,EAA4D,SAA5D;UACA,SAAS,GAAG,MAAM,CAAC,UAAP,CAAkB,SAA9B;QACA;;QACD;;MAED,KAAK,UAAL;QACH;QACI;;MAED;QACC,SAAS,GAAG,MAAM,CAAC,UAAP,CAAkB,SAA9B;QACA;IAhBF;;IAmBA,OAAO,SAAP;EACA;;AAlMyB;;;AAqM3B,MAAM,CAAC,UAAP,GAAoB,QAApB,EAEA;;AACA,MAAM,CAAC,UAAP,GAAoB,iBAApB;;AC1MA,MAAM,aAAN,SAA4B,MAA5B,CAAkC;EAEjC,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,WAAL,GAAmB,EAAnB;IACA,KAAK,YAAL,GAAoB,EAApB;IACA,KAAK,UAAL,GAAkB,CAAlB;IACA,KAAK,WAAL,GAAmB,CAAnB;IACA,KAAK,YAAL,GAAoB,CAApB;IACA,KAAK,kBAAL,GAA0B,MAA1B;IACA,KAAK,MAAL,GAAc,KAAd;IACA,KAAK,OAAL,GAAe,IAAf;IAEA,KAAK,oBAAL,CAA0B,QAA1B;EACA,CAfgC,CAiBlC;;;EACC,KAAK,GAAE;IACN,KAAK,kBAAL,GAA0B,MAA1B;IACA,KAAK,WAAL,GAAmB,EAAnB;IACA,KAAK,YAAL,GAAoB,EAApB;IACA,KAAK,UAAL,GAAkB,CAAlB;IACA,KAAK,WAAL,GAAmB,CAAnB;IACA,KAAK,WAAL,GAAmB,CAAnB;IACA,KAAK,MAAL,GAAc,KAAd;IAEA,KAAK,KAAL,CAAW,aAAX,CAAyB,cAAzB,CAAwC,KAAxC,CAA8C,UAA9C,GAA2D,CAA3D;IACA,KAAK,KAAL,CAAW,aAAX,CAAyB,OAAzB,CAAiC,KAAjC,CAAuC,YAAvC,GAAsD,CAAtD;EACA;;EAED,UAAU,GAAE;IACX,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAA9B;IACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA9B;IACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAA/B;IACA,KAAK,SAAL,CAAe,kBAAf,EAAmC,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAAnC;IACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAA/B;IACA,KAAK,SAAL,CAAe,mBAAf,EAAoC,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAApC;IACA,KAAK,SAAL,CAAe,mBAAf,EAAoC,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAApC;IACA,KAAK,SAAL,CAAe,iBAAf,EAAkC,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB,CAAlC;IAEA,KAAK,SAAL,CAAe,YAAf,EAA6B,KAAK,mBAAL,CAAyB,IAAzB,CAA8B,IAA9B,CAA7B;IACA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,mBAAL,CAAyB,IAAzB,CAA8B,IAA9B,CAAhC;IAEA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAA/B;IACA,KAAK,SAAL,CAAe,mBAAf,EAAoC,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAApC;IACA,KAAK,SAAL,CAAe,kBAAf,EAAmC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAnC;EACA;;EAED,WAAW,GAAE;IACZ,KAAK,OAAL,GAAe,IAAf;EACA;;EAED,aAAa,GAAE;IACd,KAAK,OAAL,GAAe,KAAf;EACA;;EAED,UAAU,CAAC,IAAD,EAAM;IACf,KAAK,aAAL,CAAmB,IAAI,CAAC,OAAxB,EAAiC,IAAI,CAAC,MAAtC;EACA;;EAED,mBAAmB,GAAE;IACpB,KAAK,KAAL;IAEA,KAAK,KAAL,CAAW,aAAX,CAAyB,cAAzB,CAAwC,OAAxC,CAAiD,MAAD,IAAY;MAC3D,KAAK,gBAAL,CAAsB,MAAtB;IACA,CAFD;EAGA,CAnEgC,CAqElC;;;EACC,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAI,MAAM,GAAG;MAAC,MAAM,EAAC,CAAR;MAAW,IAAI,EAAC;IAAhB,CAAb;;IAEA,IAAG,CAAC,MAAM,CAAC,OAAX,EAAmB;MAElB,IAAG,KAAK,WAAL,CAAiB,MAAjB,CAAH,EAA4B;QAE3B,MAAM,CAAC,QAAP,GAAkB,KAAK,kBAAvB;;QAEA,IAAG,KAAK,kBAAL,IAA2B,MAA9B,EAAqC;UACpC,KAAK,WAAL,CAAiB,IAAjB,CAAsB,MAAtB;QACA,CAFD,MAEK;UACJ,KAAK,YAAL,CAAkB,OAAlB,CAA0B,MAA1B;QACA;;QAED,KAAK,MAAL,GAAc,IAAd;QAEA,MAAM,CAAC,OAAP,CAAe,MAAf,GAAwB,MAAxB;MACA,CAbD,MAaK;QACJ,KAAK,kBAAL,GAA0B,OAA1B;MACA;IACD;EACD;;EAED,WAAW,CAAC,MAAD,EAAQ;IAClB,IAAG,MAAM,CAAC,MAAP,CAAc,OAAd,IAAyB,MAAM,CAAC,UAAP,CAAkB,MAA9C,EAAqD;MACpD,OAAO,CAAC,IAAR,CAAa,uGAAb;IACA;;IAED,IAAG,MAAM,CAAC,MAAP,CAAc,OAAjB,EAAyB;MACxB,OAAO,KAAK,WAAL,CAAiB,MAAM,CAAC,MAAxB,CAAP;IACA,CAFD,MAEK;MACJ,OAAO,MAAM,CAAC,UAAP,CAAkB,MAAzB;IACA;EACD,CAxGgC,CA0GlC;;;EACC,gBAAgB,GAAE;IACjB,IAAG,KAAK,MAAR,EAAe;MACd,KAAK,WAAL,CAAiB,IAAjB;MAEA,KAAK,oBAAL;MAEA,KAAK,cAAL;MAEA,KAAK,gBAAL;IACA;EACD,CArHgC,CAuHlC;;;EACC,WAAW,CAAC,MAAD,EAAQ;IAElB,IAAG,CAAC,MAAJ,EAAW;MACV,KAAK,UAAL,GAAkB,KAAK,UAAL,CAAgB,KAAK,WAArB,EAAkC,KAAK,WAAL,CAAiB,MAAnD,IAA6D,IAA/E;MACA,KAAK,WAAL,GAAmB,KAAK,UAAL,CAAgB,KAAK,YAArB,EAAmC,KAAK,YAAL,CAAkB,MAArD,IAA+D,IAAlF;MACA,KAAK,KAAL,CAAW,UAAX,CAAsB,YAAtB,CAAmC,KAAnC,CAAyC,WAAzC,GAAuD,KAAK,WAA5D;IACA,CANiB,CAQpB;;;IACE,KAAK,YAAL,GAAoB,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,WAA9B,GAA4C,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzF;EACA,CAlIgC,CAoIlC;;;EACC,cAAc,GAAE;IACf,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,aAArB,CAAH,EAAuC;MACtC,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,cAA/B,IAAiD,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,MAAnF,EAA0F;QACzF,KAAK,SAAL,CAAe,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,MAA9C;MACA;;MAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,cAA/B,IAAiD,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,MAAnF,EAA0F;QACzF,KAAK,SAAL,CAAe,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,MAA9C;MACA;;MAED,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,WAArB,CAAH,EAAqC;QACpC,KAAK,gBAAL,CAAsB,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,SAA7B,EAAtB;MACA;IACD;EACD;;EAED,gBAAgB,CAAC,MAAD,EAAQ;IACvB,MAAM,CAAC,OAAP,CAAgB,KAAD,IAAW;MACzB,IAAG,KAAK,CAAC,KAAN,CAAY,GAAf,EAAmB;QAClB,KAAK,SAAL,CAAe,KAAK,CAAC,KAAN,CAAY,GAA3B;MACA;;MAED,IAAG,KAAK,CAAC,KAAN,CAAY,MAAf,EAAsB;QACrB,KAAK,SAAL,CAAe,KAAK,CAAC,KAAN,CAAY,MAA3B;MACA;;MAED,IAAG,KAAK,CAAC,SAAN,IAAmB,KAAK,CAAC,SAAN,CAAgB,MAAtC,EAA6C;QAC5C,KAAK,gBAAL,CAAsB,KAAK,CAAC,SAA5B;MACA;IACD,CAZD;EAaA,CAnKgC,CAqKlC;;;EACC,oBAAoB,CAAC,QAAD,EAAU;IAC7B,IAAI,WAAW,GAAG,EAAlB;IAEA,IAAI,UAAU,GAAG,CAAjB;IACA,IAAI,WAAW,GAAG,CAAlB;IAEA,KAAK,KAAL,CAAW,aAAX,CAAyB,cAAzB,CAAwC,KAAxC,CAA8C,UAA9C,GAA2D,KAAK,UAAhE;IACA,KAAK,KAAL,CAAW,aAAX,CAAyB,OAAzB,CAAiC,KAAjC,CAAuC,YAAvC,GAAsD,KAAK,WAA3D;IAEA,KAAK,WAAL,CAAiB,OAAjB,CAAyB,CAAC,MAAD,EAAS,CAAT,KAAe;MACvC,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,WAAtB,GAAoC,UAAU,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,UAA1E;MACA,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,MAAtB,GAA+B,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,WAAtB,GAAoC,IAAnE;;MAEA,IAAG,MAAM,CAAC,OAAV,EAAkB;QACjB,UAAU,IAAI,MAAM,CAAC,QAAP,EAAd;MACA;;MAED,IAAG,CAAC,IAAI,KAAK,WAAL,CAAiB,MAAjB,GAA0B,CAAlC,EAAoC;QACnC,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,IAAtB,GAA6B,IAA7B;MACA,CAFD,MAEK;QACJ,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,IAAtB,GAA6B,KAA7B;MACA;;MAED,IAAG,MAAM,CAAC,MAAP,CAAc,OAAjB,EAAyB;QACxB,IAAI,QAAQ,GAAG,KAAK,wBAAL,CAA8B,MAA9B,CAAf;;QACA,IAAG,CAAC,WAAW,CAAC,QAAZ,CAAqB,QAArB,CAAJ,EAAmC;UAClC,KAAK,aAAL,CAAmB,QAAnB,EAA6B,MAA7B;UACA,WAAW,CAAC,IAAZ,CAAiB,QAAjB;QACA;;QAED,IAAG,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,IAAzB,EAA8B;UAC7B,QAAQ,CAAC,SAAT,CAAmB,GAAnB,CAAuB,sBAAsB,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,QAAnE;QACA;MACD,CAVD,MAUK;QACJ,KAAK,aAAL,CAAmB,MAAM,CAAC,UAAP,EAAnB,EAAwC,MAAxC;MACA;;MAED,IAAG,QAAH,EAAY;QACX,MAAM,CAAC,KAAP,CAAa,OAAb,CAAsB,IAAD,IAAU;UAC9B,KAAK,aAAL,CAAmB,IAAI,CAAC,UAAL,CAAgB,IAAhB,CAAnB,EAA0C,MAA1C;QACA,CAFD;MAGA;IACD,CAjCD;IAmCA,KAAK,YAAL,CAAkB,OAAlB,CAA0B,CAAC,MAAD,EAAS,CAAT,KAAe;MAExC,IAAG,MAAM,CAAC,OAAV,EAAkB;QACjB,WAAW,IAAI,MAAM,CAAC,QAAP,EAAf;MACA;;MAED,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,WAAtB,GAAoC,KAAK,YAAL,GAAoB,WAAxD;MACA,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,MAAtB,GAA+B,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,WAAtB,GAAoC,IAAnE;;MAEA,IAAG,CAAC,IAAI,KAAK,YAAL,CAAkB,MAAlB,GAA2B,CAAnC,EAAqC;QACpC,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,IAAtB,GAA6B,IAA7B;MACA,CAFD,MAEK;QACJ,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,IAAtB,GAA6B,KAA7B;MACA;;MAGD,IAAG,MAAM,CAAC,MAAP,CAAc,OAAjB,EAAyB;QACxB,KAAK,aAAL,CAAmB,KAAK,wBAAL,CAA8B,MAA9B,CAAnB,EAA0D,MAA1D;MACA,CAFD,MAEK;QACJ,KAAK,aAAL,CAAmB,MAAM,CAAC,UAAP,EAAnB,EAAwC,MAAxC;MACA;;MAED,IAAG,QAAH,EAAY;QACX,MAAM,CAAC,KAAP,CAAa,OAAb,CAAsB,IAAD,IAAU;UAC9B,KAAK,aAAL,CAAmB,IAAI,CAAC,UAAL,CAAgB,IAAhB,CAAnB,EAA0C,MAA1C;QACA,CAFD;MAGA;IACD,CA3BD;EA4BA;;EAED,wBAAwB,CAAC,MAAD,EAAQ;IAC/B,OAAO,MAAM,CAAC,MAAP,CAAc,OAAd,GAAwB,KAAK,wBAAL,CAA8B,MAAM,CAAC,MAArC,CAAxB,GAAuE,MAAM,CAAC,UAAP,EAA9E;EACA,CAlPgC,CAoPlC;;;EACC,MAAM,GAAE;IACP,IAAG,KAAK,MAAL,IAAe,CAAC,KAAK,OAAxB,EAAgC;MAClC;MACG,KAAK,WAAL,GAF+B,CAIlC;;MACG,KAAK,oBAAL;MAEA,KAAK,gBAAL;MAEA,KAAK,cAAL;IACA;EACD;;EAED,gBAAgB,GAAE;IACjB,IAAI,WAAW,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,IAArC,CAAlB;IACA,IAAI,SAAS,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,GAAgC,MAAhC,CAAuC,GAAG,IAAI,CAAC,WAAW,CAAC,QAAZ,CAAqB,GAArB,CAA/C,CAAhB;IAEA,SAAS,CAAC,OAAV,CAAmB,GAAD,IAAQ;MACzB,GAAG,CAAC,YAAJ;IACA,CAFD;IAIA,WAAW,CAAC,OAAZ,CAAqB,GAAD,IAAQ;MAC3B,IAAG,GAAG,CAAC,IAAJ,KAAa,KAAhB,EAAsB;QACrB,KAAK,SAAL,CAAe,GAAf;MACA;IACD,CAJD;EAKA;;EAED,SAAS,CAAC,GAAD,EAAK;IACf;IACE,IAAI,KAAK,GAAG,GAAG,CAAC,UAAJ,EAAZ;IAEA,KAAK,CAAC,KAAN,CAAY,WAAZ,GAA0B,KAAK,UAA/B;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,KAA8B,aAA9B,IAA+C,KAAK,YAAL,CAAkB,MAApE,EAA2E;MAC1E,KAAK,KAAL,CAAW,UAAX,CAAsB,eAAtB,GAAwC,KAAxC,CAA8C,QAA9C,GAAyD,iBAAiB,KAAK,WAAtB,GAAoC,GAA7F;IACA;;IAED,KAAK,WAAL,CAAiB,OAAjB,CAA0B,MAAD,IAAY;MACpC,IAAI,IAAI,GAAG,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAX;;MAEA,IAAG,IAAH,EAAQ;QACP,KAAK,aAAL,CAAmB,IAAI,CAAC,UAAL,CAAgB,IAAhB,CAAnB,EAA0C,MAA1C;MACA;IACD,CAND;IAQA,KAAK,YAAL,CAAkB,OAAlB,CAA2B,MAAD,IAAY;MACrC,IAAI,IAAI,GAAG,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAX;;MAEA,IAAG,IAAH,EAAQ;QACP,KAAK,aAAL,CAAmB,IAAI,CAAC,UAAL,CAAgB,IAAhB,CAAnB,EAA0C,MAA1C;MACA;IACD,CAND;EAOA;;EAED,aAAa,CAAC,OAAD,EAAU,MAAV,EAAiB;IAE7B,IAAG,MAAM,CAAC,OAAP,CAAe,MAAlB,EAAyB;MACxB,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,UAAzB;MACA,OAAO,CAAC,KAAR,CAAc,IAAd,GAAqB,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,MAA3C;MAEA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,kBAAtB;;MAEA,IAAG,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,IAAzB,EAA8B;QAC7B,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,sBAAsB,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,QAAlE;MACA;IACD;EACD;;EAED,UAAU,CAAC,OAAD,EAAU,KAAV,EAAgB;IACzB,IAAI,KAAK,GAAG,CAAZ;;IAEA,KAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAApB,EAA2B,CAAC,EAA5B,EAA+B;MAC9B,IAAG,OAAO,CAAC,CAAD,CAAP,CAAW,OAAd,EAAsB;QACrB,KAAK,IAAI,OAAO,CAAC,CAAD,CAAP,CAAW,QAAX,EAAT;MACA;IACD;;IAED,OAAO,KAAP;EACA;;AArUgC;;;AAwUlC,aAAa,CAAC,UAAd,GAA2B,eAA3B;;ACxUA,MAAM,UAAN,SAAyB,MAAzB,CAA+B;EAE9B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,UAAL,GAAkB,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAlB;IACA,KAAK,IAAL,GAAY,EAAZ,CAJiB,CAMnB;;IACE,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,QAAtC,EAAgD,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAAhD;IACA,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,UAAtC,EAAkD,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAlD;IACA,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,UAAtC,EAAkD,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAlD,EATiB,CAWnB;;IACE,KAAK,mBAAL,CAAyB,iBAAzB,EAA4C,IAA5C,EAZiB,CAYiC;;IAClD,KAAK,mBAAL,CAAyB,YAAzB,EAAuC,KAAvC,EAbiB,CAa6B;EAC9C;;EAED,UAAU,GAAE;IACX,KAAK,IAAL,GAAY,EAAZ;IAEA,KAAK,UAAL,CAAgB,SAAhB,CAA0B,GAA1B,CAA8B,8BAA9B,EAHW,CAKb;;IACE,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzB,GAAsC,YAAtC,CAAmD,KAAK,UAAxD,EAAoE,KAAK,KAAL,CAAW,aAAX,CAAyB,cAAzB,CAAwC,WAA5G;IAEA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAA/B;IACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAA/B;IAEA,KAAK,sBAAL,CAA4B,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAA5B,EAAqD,EAArD;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAtB,EAAiC;MAChC,KAAK,SAAL,CAAe,gBAAf,EAAiC,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAAjC;MACA,KAAK,SAAL,CAAe,WAAf,EAA4B,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAA5B;IACA;EACD;;EAED,cAAc,GAAE;IACf,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,GAAgC,OAAhC,CAAyC,GAAD,IAAS;MAChD,KAAK,aAAL,CAAmB,GAAnB;IACA,CAFD;EAGA;;EAED,aAAa,CAAC,GAAD,EAAK;IACjB,IAAI,UAAU,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAApC;IAAA,IACA,OAAO,GAAG,OAAO,UADjB;;IAGA,IAAG,OAAO,KAAK,QAAf,EAAwB;MACvB,IAAG,GAAG,CAAC,WAAJ,MAAsB,GAAG,CAAC,WAAJ,KAAoB,KAAK,IAAL,CAAU,MAA/B,IAA0C,UAAlE,EAA6E;QAC5E,KAAK,SAAL,CAAe,GAAf;MACA;IACD,CAJD,MAIM,IAAG,OAAO,KAAK,UAAf,EAA0B;MAC/B,IAAG,UAAU,CAAC,IAAX,CAAgB,KAAK,KAArB,EAA4B,GAAG,CAAC,YAAJ,EAA5B,CAAH,EAAmD;QAClD,KAAK,SAAL,CAAe,GAAf;MACA;IACD,CAJK,MAIA,IAAG,KAAK,CAAC,OAAN,CAAc,UAAd,CAAH,EAA6B;MAClC,IAAG,UAAU,CAAC,QAAX,CAAoB,GAAG,CAAC,IAAJ,CAAS,KAAK,OAAL,CAAa,iBAAb,CAAT,CAApB,CAAH,EAAkE;QACjE,KAAK,SAAL,CAAe,GAAf;MACA;IACD;EACD;;EAED,WAAW,CAAC,GAAD,EAAK;IACf,IAAI,KAAK,GAAG,KAAK,IAAL,CAAU,OAAV,CAAkB,GAAlB,CAAZ;IACA,OAAO,KAAK,GAAG,CAAC,CAAhB;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,CAAC,CAAC,KAAK,IAAL,CAAU,MAAnB;EACA;;EAED,WAAW,CAAC,QAAD,EAAW,IAAX,EAAgB;IAC1B,KAAK,IAAL,CAAU,OAAV,CAAmB,GAAD,IAAS;MAC1B,IAAI,CAAC,IAAL,CAAU,GAAV;IACA,CAFD;IAIA,OAAO,IAAP;EACA,CA7E6B,CA+E/B;;;EACC,OAAO,CAAC,IAAD,EAAM;IACZ,IAAI,MAAM,GAAG,IAAI,CAAC,KAAL,CAAW,CAAX,CAAb;IAEA,KAAK,IAAL,CAAU,OAAV,CAAkB,UAAS,GAAT,EAAa;MAC9B,IAAI,KAAK,GAAG,MAAM,CAAC,OAAP,CAAe,GAAf,CAAZ;;MAEA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;QACb,MAAM,CAAC,MAAP,CAAc,KAAd,EAAqB,CAArB;MACA;IACD,CAND;IAQA,OAAO,MAAP;EACA;;EAED,SAAS,CAAC,GAAD,EAAK;IACb,IAAG,CAAC,GAAG,CAAC,OAAJ,CAAY,MAAhB,EAAuB;MACtB,GAAG,CAAC,OAAJ,CAAY,MAAZ,GAAqB,IAArB;MACA,KAAK,UAAL,CAAgB,WAAhB,CAA4B,GAAG,CAAC,UAAJ,EAA5B;MACA,GAAG,CAAC,UAAJ;MACA,GAAG,CAAC,eAAJ;MACA,KAAK,KAAL,CAAW,UAAX,CAAsB,eAAtB;MAEA,KAAK,IAAL,CAAU,IAAV,CAAe,GAAf;MAEA,KAAK,WAAL,CAAiB,KAAjB,EAAwB,SAAxB;MAEA,KAAK,SAAL;IAEA,CAbD,MAaK;MACJ,OAAO,CAAC,IAAR,CAAa,sCAAb;IACA;EACD;;EAED,WAAW,CAAC,GAAD,EAAK;IACf,IAAG,GAAG,CAAC,OAAJ,CAAY,MAAf,EAAsB;MAErB,GAAG,CAAC,OAAJ,CAAY,MAAZ,GAAqB,KAArB;MAEA,KAAK,SAAL,CAAe,GAAf;MAEA,KAAK,KAAL,CAAW,UAAX,CAAsB,eAAtB;MAEA,KAAK,WAAL,CAAiB,KAAjB,EAAwB,SAAxB;;MAEA,IAAG,KAAK,IAAL,CAAU,MAAb,EAAoB;QACnB,KAAK,SAAL;MACA;IAED,CAdD,MAcK;MACJ,OAAO,CAAC,IAAR,CAAa,wCAAb;IACA;EACD;;EAED,SAAS,CAAC,GAAD,EAAK;IACb,IAAI,KAAK,GAAG,KAAK,IAAL,CAAU,OAAV,CAAkB,GAAlB,CAAZ;;IAEA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;MACb,IAAI,KAAK,GAAG,GAAG,CAAC,UAAJ,EAAZ;;MAEA,IAAG,KAAK,CAAC,UAAT,EAAoB;QACnB,KAAK,CAAC,UAAN,CAAiB,WAAjB,CAA6B,KAA7B;MACA;;MAED,KAAK,IAAL,CAAU,MAAV,CAAiB,KAAjB,EAAwB,CAAxB;IACA;EACD;;EAED,SAAS,CAAC,GAAD,EAAK;IACb,KAAK,IAAL,CAAU,OAAV,CAAkB,CAAC,GAAD,EAAM,CAAN,KAAY;MAC7B,KAAK,KAAL,CAAW,UAAX,CAAsB,QAAtB,CAA+B,GAA/B,EAAoC,CAApC;IACA,CAFD;EAGA;;AAvJ6B;;;AA0J/B,UAAU,CAAC,UAAX,GAAwB,YAAxB,EC5JA;;AACA,MAAM,cAAN,CAAqB;EACpB,WAAW,CAAE,KAAF,EAAQ;IAClB,KAAK,MAAL,GAAc,KAAd;IACA,KAAK,IAAL,GAAY,gBAAZ;IAEA,OAAO,IAAI,KAAJ,CAAU,IAAV,EAAgB;MACtB,GAAG,EAAE,UAAS,MAAT,EAAiB,IAAjB,EAAuB,QAAvB,EAAiC;QACrC,IAAI,OAAO,MAAM,CAAC,IAAD,CAAb,KAAwB,WAA5B,EAAyC;UACxC,OAAO,MAAM,CAAC,IAAD,CAAb;QACA,CAFD,MAEK;UACJ,OAAO,MAAM,CAAC,MAAP,CAAc,YAAd,CAA2B,KAA3B,CAAiC,uBAAjC,CAAyD,MAAzD,CAAgE,KAAhE,EAAuE,MAAM,CAAC,MAA9E,EAAsF,IAAtF,CAAP;QACA;MACD;IAPqB,CAAhB,CAAP;EASA;;EAED,MAAM,GAAE;IACP,OAAO,KAAK,MAAL,CAAY,GAAnB;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,MAAL,CAAY,KAAnB;EACA;;EAED,UAAU,GAAE;IACX,OAAO,KAAK,MAAL,CAAY,OAAnB;EACA;;EAED,OAAO,GAAE;IACR,OAAO,KAAK,MAAL,CAAY,OAAZ,CAAoB,IAApB,CAAP;EACA;;EAED,YAAY,GAAE;IACb,OAAO,KAAK,MAAL,CAAY,YAAZ,CAAyB,IAAzB,CAAP;EACA;;EAED,cAAc,GAAE;IACf,OAAO,KAAK,MAAL,CAAY,MAAZ,GAAqB,KAAK,MAAL,CAAY,MAAZ,CAAmB,YAAnB,EAArB,GAAyD,KAAhE;EACA;;EAED,SAAS,GAAE;IACV,OAAO,KAAK,MAAL,CAAY,OAAnB;EACA;;EAED,IAAI,GAAE;IACL,KAAK,MAAL,CAAY,IAAZ;EACA;;EAED,IAAI,GAAE;IACL,KAAK,MAAL,CAAY,IAAZ;EACA;;EAED,MAAM,GAAE;IACP,KAAK,MAAL,CAAY,gBAAZ;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,MAAZ;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,KAAK,MAAL,CAAY,YAAZ,CAAyB,KAAhC;EACA;;AA9DmB,ECErB;;;;;AACA,MAAM,KAAN,CAAW;EAEV,WAAW,CAAC,YAAD,EAAe,MAAf,EAAuB,KAAvB,EAA8B,GAA9B,EAAmC,KAAnC,EAA0C,SAA1C,EAAqD,QAArD,EAA8D;IACxE,KAAK,YAAL,GAAoB,YAApB;IACA,KAAK,MAAL,GAAc,MAAd;IACA,KAAK,GAAL,GAAW,GAAX;IACA,KAAK,KAAL,GAAa,KAAb;IACA,KAAK,KAAL,GAAa,KAAb;IACA,KAAK,YAAL,GAAoB,KAAK,GAAI,YAAY,CAAC,cAAb,CAA4B,MAA5B,GAAqC,CAAlE;IACA,KAAK,MAAL,GAAc,KAAK,YAAL,GAAoB,KAAK,cAAzB,GAA0C,KAAK,OAA7D;IACA,KAAK,IAAL,GAAY,OAAZ,CARwE,CAQpD;;IACpB,KAAK,GAAL,GAAW,QAAX;IACA,KAAK,IAAL,GAAY,EAAZ;IACA,KAAK,MAAL,GAAc,EAAd;IACA,KAAK,SAAL,GAAiB,EAAjB;IACA,KAAK,SAAL,GAAiB,SAAjB;IACA,KAAK,OAAL,GAAe,KAAf;IACA,KAAK,eAAL,GAAuB,KAAvB;IACA,KAAK,MAAL,GAAc,CAAd;IACA,KAAK,WAAL,GAAmB,CAAnB;IACA,KAAK,WAAL,GAAmB,KAAnB;IACA,KAAK,KAAL,GAAa,EAAb;IACA,KAAK,WAAL,GAAmB,KAAnB;IACA,KAAK,OAAL,GAAe,EAAf;IACA,KAAK,YAAL,GAAoB,KAApB;IAEA,KAAK,OAAL,GAAe,QAAQ,GAAG,QAAQ,CAAC,OAAZ,GAAuB,OAAO,YAAY,CAAC,SAAb,CAAuB,KAAvB,CAAP,KAAyC,WAAzC,GAAuD,YAAY,CAAC,SAAb,CAAuB,KAAvB,CAAvD,GAAuF,YAAY,CAAC,SAAb,CAAuB,CAAvB,CAArI;IAEA,KAAK,SAAL,GAAiB,IAAjB;IAEA,KAAK,cAAL;IACA,KAAK,WAAL;IAEA,KAAK,iBAAL;EACA;;EAED,IAAI,GAAE;IACL,IAAG,KAAK,SAAL,CAAe,MAAlB,EAAyB;MACxB,KAAK,SAAL,CAAe,OAAf,CAAuB,UAAS,KAAT,EAAe;QACrC,KAAK,CAAC,IAAN;MACA,CAFD;IAGA,CAJD,MAIK;MACJ,KAAK,IAAL,CAAU,OAAV,CAAmB,GAAD,IAAS;QAC1B,IAAG,GAAG,CAAC,OAAP,EAAe;UACd,OAAO,GAAG,CAAC,OAAJ,CAAY,KAAnB;QACA;MACD,CAJD;IAKA;;IAED,KAAK,OAAL,GAAe,KAAf;IACA,KAAK,YAAL,GAAoB,KAApB;IACA,KAAK,eAAL,GAAuB,KAAvB;EACA;;EAED,cAAc,GAAE;IACf,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAZ;IACA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,iBAApB;IAEA,KAAK,OAAL,GAAe,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAf;IACA,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,eAA3B;IACA,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,iBAA3B;IACA,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,2BAA2B,KAAK,KAA3D;IACA,KAAK,OAAL,CAAa,YAAb,CAA0B,MAA1B,EAAkC,UAAlC;IAEA,KAAK,YAAL,GAAoB,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAApB;IACA,KAAK,YAAL,CAAkB,SAAlB,CAA4B,GAA5B,CAAgC,wBAAhC;IACA,KAAK,YAAL,CAAkB,WAAlB,CAA8B,KAA9B,EAZe,CAcjB;;IACE,IAAG,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAhC,KAAgD,KAAhD,IAAyD,KAAK,YAAL,CAAkB,KAAlB,CAAwB,SAAxB,CAAkC,SAAlC,CAA5D,EAAyG;MACxG,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,OAAhC,CAAwC,qBAAxC,CAA8D,IAA9D;IACA;EACD;;EAED,iBAAiB,GAAE;IAClB,IAAI,KAAK,GAAG,KAAK,KAAL,GAAa,CAAzB;;IACA,IAAG,KAAK,YAAL,CAAkB,aAAlB,IAAmC,KAAK,YAAL,CAAkB,aAAlB,CAAgC,KAAhC,CAAtC,EAA6E;MAC5E,KAAK,YAAL,CAAkB,aAAlB,CAAgC,KAAhC,EAAuC,OAAvC,CAAgD,KAAD,IAAW;QACzD,KAAK,YAAL,CAAkB,KAAlB,EAAyB,KAAzB;MACA,CAFD;IAGA;EACD;;EAED,WAAW,GAAE;IACZ,IAAI,aAAJ;;IAEA,IAAG,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,kBAAnC,EAAsD;MACrD,aAAa,GAAG,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,kBAAhC,IAAsD,OAAtD,GAAgE,KAAK,YAArE,GAAoF,KAAK,OAAzG;MAEA,aAAa,CAAC,gBAAd,CAA+B,OAA/B,EAAyC,CAAD,IAAO;QAC9C,CAAC,CAAC,eAAF;QACA,CAAC,CAAC,wBAAF;QACA,KAAK,gBAAL;MACA,CAJD;IAKA;EACD;;EAED,YAAY,CAAC,OAAD,EAAU,KAAV,EAAgB;IAC3B,IAAI,QAAQ,GAAG,KAAK,GAAG,GAAR,GAAc,OAA7B;IACA,IAAI,KAAK,GAAG,IAAI,KAAJ,CAAU,KAAK,YAAf,EAA6B,IAA7B,EAAmC,KAAnC,EAA0C,OAA1C,EAAoD,KAAK,YAAL,CAAkB,cAAlB,CAAiC,KAAjC,EAAwC,KAA5F,EAAmG,KAAK,YAAL,CAAkB,eAAlB,CAAkC,KAAlC,KAA4C,KAAK,YAAL,CAAkB,eAAlB,CAAkC,CAAlC,CAA/I,EAAqL,KAAK,GAAL,GAAW,KAAK,GAAL,CAAS,MAAT,CAAgB,QAAhB,CAAX,GAAuC,KAA5N,CAAZ;IAEA,KAAK,MAAL,CAAY,QAAZ,IAAwB,KAAxB;IACA,KAAK,SAAL,CAAe,IAAf,CAAoB,KAApB;EACA;;EAED,cAAc,CAAC,GAAD,EAAK;IAElB,IAAI,KAAK,GAAG,KAAK,KAAL,GAAa,CAAzB;;IAEA,IAAG,KAAK,YAAR,EAAqB;MACpB,IAAI,OAAO,GAAG,KAAK,YAAL,CAAkB,cAAlB,CAAiC,KAAjC,EAAwC,IAAxC,CAA6C,GAAG,CAAC,OAAJ,EAA7C,CAAd;MAAA,IACA,QAAQ,GAAG,KAAK,GAAG,GAAR,GAAc,OADzB;;MAGA,IAAG,KAAK,YAAL,CAAkB,aAAlB,IAAmC,KAAK,YAAL,CAAkB,aAAlB,CAAgC,KAAhC,CAAtC,EAA6E;QAC5E,IAAG,KAAK,MAAL,CAAY,QAAZ,CAAH,EAAyB;UACxB,KAAK,MAAL,CAAY,QAAZ,EAAsB,MAAtB,CAA6B,GAA7B;QACA;MACD,CAJD,MAIK;QACJ,IAAG,CAAC,KAAK,MAAL,CAAY,QAAZ,CAAJ,EAA0B;UACzB,KAAK,YAAL,CAAkB,OAAlB,EAA2B,KAA3B;QACA;;QAED,KAAK,MAAL,CAAY,QAAZ,EAAsB,MAAtB,CAA6B,GAA7B;MACA;IACD;EACD;;EAED,OAAO,CAAC,GAAD,EAAK;IACX,KAAK,IAAL,CAAU,IAAV,CAAe,GAAf;IACA,GAAG,CAAC,OAAJ,CAAY,KAAZ,GAAoB,IAApB;EACA;;EAED,SAAS,CAAC,GAAD,EAAM,EAAN,EAAU,KAAV,EAAgB;IACxB,IAAI,IAAI,GAAG,KAAK,cAAL,CAAoB,EAApB,CAAX;IAEA,GAAG,CAAC,UAAJ,CAAe,IAAf;IAEA,IAAI,OAAO,GAAG,KAAK,IAAL,CAAU,OAAV,CAAkB,EAAlB,CAAd;;IAEA,IAAG,OAAO,GAAG,CAAC,CAAd,EAAgB;MACf,IAAG,KAAH,EAAS;QACR,KAAK,IAAL,CAAU,MAAV,CAAiB,OAAO,GAAC,CAAzB,EAA4B,CAA5B,EAA+B,GAA/B;MACA,CAFD,MAEK;QACJ,KAAK,IAAL,CAAU,MAAV,CAAiB,OAAjB,EAA0B,CAA1B,EAA6B,GAA7B;MACA;IACD,CAND,MAMK;MACJ,IAAG,KAAH,EAAS;QACR,KAAK,IAAL,CAAU,IAAV,CAAe,GAAf;MACA,CAFD,MAEK;QACJ,KAAK,IAAL,CAAU,OAAV,CAAkB,GAAlB;MACA;IACD;;IAED,GAAG,CAAC,OAAJ,CAAY,KAAZ,GAAoB,IAApB;IAEA,KAAK,2BAAL;;IAEA,IAAG,KAAK,YAAL,CAAkB,KAAlB,CAAwB,SAAxB,CAAkC,aAAlC,KAAoD,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAhC,IAA+C,OAAtG,EAA8G;MAC7G,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAhC,CAA4C,WAA5C,CAAwD,IAAxD;IACA;;IAED,KAAK,YAAL,CAAkB,eAAlB,CAAkC,IAAlC;EACA;;EAED,YAAY,CAAC,IAAD,EAAM;IACjB,IAAG,KAAK,YAAR,EAAqB;MACpB,KAAK,YAAL,CAAkB,KAAlB,CAAwB,UAAxB,GAAqC,IAArC;MAEA,KAAK,SAAL,CAAe,OAAf,CAAuB,UAAS,KAAT,EAAe;QACrC,KAAK,CAAC,YAAN,CAAmB,IAAnB;MACA,CAFD;IAGA;EACD;;EAED,WAAW,CAAC,GAAD,EAAK,CAAE,CA9KR,CAgLX;;;EACC,cAAc,CAAC,IAAD,EAAM;IACnB,IAAG,KAAK,KAAR,EAAc;MACb,IAAI,CAAC,KAAK,KAAN,CAAJ,GAAmB,KAAK,GAAxB;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,6FAAb;IACA;;IAED,IAAG,KAAK,MAAR,EAAe;MACd,IAAI,GAAG,KAAK,MAAL,CAAY,cAAZ,CAA2B,IAA3B,CAAP;IACA;;IAED,OAAO,IAAP;EACA;;EAED,SAAS,CAAC,GAAD,EAAK;IACb,IAAI,KAAK,GAAG,KAAK,IAAL,CAAU,OAAV,CAAkB,GAAlB,CAAZ;IACA,IAAI,EAAE,GAAG,GAAG,CAAC,UAAJ,EAAT;;IAGA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;MACb,KAAK,IAAL,CAAU,MAAV,CAAiB,KAAjB,EAAwB,CAAxB;IACA;;IAED,IAAG,CAAC,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAjC,IAAgD,CAAC,KAAK,IAAL,CAAU,MAA9D,EAAqE;MACpE,IAAG,KAAK,MAAR,EAAe;QACd,KAAK,MAAL,CAAY,WAAZ,CAAwB,IAAxB;MACA,CAFD,MAEK;QACJ,KAAK,YAAL,CAAkB,WAAlB,CAA8B,IAA9B;MACA;;MAED,KAAK,YAAL,CAAkB,eAAlB,CAAkC,IAAlC;IACA,CARD,MAQK;MAEJ,IAAG,EAAE,CAAC,UAAN,EAAiB;QAChB,EAAE,CAAC,UAAH,CAAc,WAAd,CAA0B,EAA1B;MACA;;MAED,KAAK,2BAAL;;MAEA,IAAG,KAAK,YAAL,CAAkB,KAAlB,CAAwB,SAAxB,CAAkC,aAAlC,KAAoD,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAhC,IAA+C,OAAtG,EAA8G;QAC7G,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAhC,CAA4C,WAA5C,CAAwD,IAAxD;MACA;IAED;EACD;;EAED,WAAW,CAAC,KAAD,EAAO;IACjB,IAAI,QAAQ,GAAG,KAAK,CAAC,KAAN,GAAc,GAAd,GAAoB,KAAK,CAAC,GAAzC;IAAA,IACA,KADA;;IAGA,IAAG,KAAK,MAAL,CAAY,QAAZ,CAAH,EAAyB;MACxB,OAAO,KAAK,MAAL,CAAY,QAAZ,CAAP;MAEA,KAAK,GAAG,KAAK,SAAL,CAAe,OAAf,CAAuB,KAAvB,CAAR;;MAEA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;QACb,KAAK,SAAL,CAAe,MAAf,CAAsB,KAAtB,EAA6B,CAA7B;MACA;;MAED,IAAG,CAAC,KAAK,SAAL,CAAe,MAAnB,EAA0B;QACzB,IAAG,KAAK,MAAR,EAAe;UACd,KAAK,MAAL,CAAY,WAAZ,CAAwB,IAAxB;QACA,CAFD,MAEK;UACJ,KAAK,YAAL,CAAkB,WAAlB,CAA8B,IAA9B;QACA;MACD;IACD;EACD;;EAED,iBAAiB,CAAC,MAAD,EAAQ;IACxB,IAAI,MAAM,GAAG,EAAb;IAEA,MAAM,CAAC,IAAP,CAAY,IAAZ;;IAEA,KAAK,OAAL;;IAEA,IAAG,KAAK,OAAR,EAAgB;MACf,IAAG,KAAK,SAAL,CAAe,MAAlB,EAAyB;QACxB,KAAK,SAAL,CAAe,OAAf,CAAuB,UAAS,KAAT,EAAe;UACrC,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,KAAK,CAAC,iBAAN,CAAwB,MAAxB,CAAd,CAAT;QACA,CAFD;MAIA,CALD,MAKK;QACJ,IAAG,CAAC,MAAD,IAAW,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAhC,IAA+C,OAA1D,IAAqE,KAAK,YAAL,CAAkB,KAAlB,CAAwB,SAAxB,CAAkC,aAAlC,CAArE,IAAyH,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAhC,CAA4C,WAA5C,EAA5H,EAAsL;UACrL,IAAG,KAAK,KAAL,CAAW,GAAd,EAAkB;YACjB,KAAK,KAAL,CAAW,GAAX,CAAe,aAAf;YACA,KAAK,KAAL,CAAW,GAAX,CAAe,WAAf;UACA;;UAED,KAAK,KAAL,CAAW,GAAX,GAAiB,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAhC,CAA4C,cAA5C,CAA2D,KAAK,IAAhE,CAAjB;UACA,MAAM,CAAC,IAAP,CAAY,KAAK,KAAL,CAAW,GAAvB;QACA;;QAED,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,KAAK,IAAnB,CAAT;;QAEA,IAAG,CAAC,MAAD,IAAW,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAhC,IAA+C,OAA1D,IAAsE,KAAK,YAAL,CAAkB,KAAlB,CAAwB,SAAxB,CAAkC,aAAlC,CAAtE,IAA0H,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAhC,CAA4C,cAA5C,EAA7H,EAA0L;UACzL,IAAG,KAAK,KAAL,CAAW,MAAd,EAAqB;YACpB,KAAK,KAAL,CAAW,MAAX,CAAkB,aAAlB;YACA,KAAK,KAAL,CAAW,MAAX,CAAkB,WAAlB;UACA;;UAED,KAAK,KAAL,CAAW,MAAX,GAAoB,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAhC,CAA4C,iBAA5C,CAA8D,KAAK,IAAnE,CAApB;UACA,MAAM,CAAC,IAAP,CAAY,KAAK,KAAL,CAAW,MAAvB;QACA;MACD;IACD,CA7BD,MA6BK;MACJ,IAAG,CAAC,KAAK,SAAL,CAAe,MAAhB,IAA0B,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAhC,IAA+C,OAA5E,EAAoF;QAEnF,IAAG,KAAK,YAAL,CAAkB,KAAlB,CAAwB,SAAxB,CAAkC,aAAlC,CAAH,EAAoD;UAEnD,IAAG,CAAC,MAAD,IAAW,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAhC,CAA4C,WAA5C,EAAd,EAAwE;YACvE,IAAG,KAAK,KAAL,CAAW,GAAd,EAAkB;cACjB,KAAK,KAAL,CAAW,GAAX,CAAe,aAAf;cACA,KAAK,KAAL,CAAW,GAAX,CAAe,WAAf;YACA;;YAED,IAAG,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,oBAAnC,EAAwD;cACvD,KAAK,KAAL,CAAW,GAAX,GAAiB,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAhC,CAA4C,cAA5C,CAA2D,KAAK,IAAhE,CAAjB;cACA,MAAM,CAAC,IAAP,CAAY,KAAK,KAAL,CAAW,GAAvB;YACA;UACD;;UAED,IAAG,CAAC,MAAD,IAAW,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAhC,CAA4C,cAA5C,EAAd,EAA2E;YAC1E,IAAG,KAAK,KAAL,CAAW,MAAd,EAAqB;cACpB,KAAK,KAAL,CAAW,MAAX,CAAkB,aAAlB;cACA,KAAK,KAAL,CAAW,MAAX,CAAkB,WAAlB;YACA;;YAED,IAAG,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,oBAAnC,EAAwD;cACvD,KAAK,KAAL,CAAW,MAAX,GAAoB,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,WAAhC,CAA4C,iBAA5C,CAA8D,KAAK,IAAnE,CAApB;cACA,MAAM,CAAC,IAAP,CAAY,KAAK,KAAL,CAAW,MAAvB;YACA;UACD;QACD;MACD;IAED;;IAED,OAAO,MAAP;EACA;;EAED,OAAO,CAAC,OAAD,EAAU,SAAV,EAAoB;IAC1B,IAAI,MAAM,GAAG,EAAb;;IAEA,KAAK,OAAL;;IAEA,IAAG,CAAC,OAAD,IAAa,OAAO,IAAI,KAAK,OAAhC,EAAyC;MACxC,KAAK,IAAL,CAAU,OAAV,CAAmB,GAAD,IAAS;QAC1B,MAAM,CAAC,IAAP,CAAY,GAAG,CAAC,OAAJ,CAAY,SAAS,IAAI,MAAzB,CAAZ;MACA,CAFD;IAGA;;IAED,OAAO,MAAP;EACA;;EAED,WAAW,GAAE;IACZ,IAAI,KAAK,GAAG,CAAZ;;IAEA,IAAG,KAAK,SAAL,CAAe,MAAlB,EAAyB;MACxB,KAAK,SAAL,CAAe,OAAf,CAAwB,KAAD,IAAW;QACjC,KAAK,IAAI,KAAK,CAAC,WAAN,EAAT;MACA,CAFD;IAGA,CAJD,MAIK;MACJ,KAAK,GAAG,KAAK,IAAL,CAAU,MAAlB;IACA;;IACD,OAAO,KAAP;EACA;;EAED,gBAAgB,GAAE;IACjB,IAAG,KAAK,OAAR,EAAgB;MACf,KAAK,IAAL;IACA,CAFD,MAEK;MACJ,KAAK,IAAL;IACA;EACD;;EAED,IAAI,GAAE;IACL,KAAK,OAAL,GAAe,KAAf;;IAEA,IAAG,KAAK,YAAL,CAAkB,KAAlB,CAAwB,UAAxB,CAAmC,aAAnC,MAAsD,OAAtD,IAAiE,CAAC,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,UAArG,EAAgH;MAE/G,KAAK,OAAL,CAAa,SAAb,CAAuB,MAAvB,CAA8B,yBAA9B;;MAEA,IAAG,KAAK,SAAL,CAAe,MAAlB,EAAyB;QACxB,KAAK,SAAL,CAAe,OAAf,CAAwB,KAAD,IAAW;UAEjC,IAAI,IAAI,GAAG,KAAK,CAAC,iBAAN,EAAX;UAEA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;YACrB,GAAG,CAAC,aAAJ;UACA,CAFD;QAGA,CAPD;MASA,CAVD,MAUK;QACJ,KAAK,IAAL,CAAU,OAAV,CAAmB,GAAD,IAAS;UAC1B,IAAI,KAAK,GAAG,GAAG,CAAC,UAAJ,EAAZ;UACA,KAAK,CAAC,UAAN,CAAiB,WAAjB,CAA6B,KAA7B;QACA,CAHD;MAIA;;MAED,KAAK,YAAL,CAAkB,KAAlB,CAAwB,UAAxB,CAAmC,cAAnC,CAAkD,KAAK,YAAL,CAAkB,eAAlB,EAAlD,EAAuF,KAAK,YAAL,CAAkB,eAAlB,EAAvF;MAEA,KAAK,YAAL,CAAkB,8BAAlB;IAEA,CAzBD,MAyBK;MACJ,KAAK,YAAL,CAAkB,eAAlB,CAAkC,IAAlC;IACA;;IAED,KAAK,YAAL,CAAkB,KAAlB,CAAwB,cAAxB,CAAuC,QAAvC,CAAgD,wBAAhD,EAA0E,KAAK,YAAL,EAA1E,EAA+F,KAA/F;EACA;;EAED,IAAI,GAAE;IACL,KAAK,OAAL,GAAe,IAAf;;IAEA,IAAG,KAAK,YAAL,CAAkB,KAAlB,CAAwB,UAAxB,CAAmC,aAAnC,MAAsD,OAAtD,IAAiE,CAAC,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,CAAgC,UAArG,EAAgH;MAE/G,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,yBAA3B;MAEA,IAAI,IAAI,GAAG,KAAK,eAAL,EAAX;;MAEA,IAAG,KAAK,SAAL,CAAe,MAAlB,EAAyB;QACxB,KAAK,SAAL,CAAe,OAAf,CAAwB,KAAD,IAAW;UACjC,IAAI,IAAI,GAAG,KAAK,CAAC,iBAAN,EAAX;UAEA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;YACrB,IAAI,KAAK,GAAG,GAAG,CAAC,UAAJ,EAAZ;YACA,IAAI,CAAC,UAAL,CAAgB,YAAhB,CAA6B,KAA7B,EAAoC,IAAI,CAAC,WAAzC;YACA,GAAG,CAAC,UAAJ;YACA,IAAI,GAAG,KAAP;UACA,CALD;QAMA,CATD;MAWA,CAZD,MAYK;QACJ,KAAK,IAAL,CAAU,OAAV,CAAmB,GAAD,IAAS;UAC1B,IAAI,KAAK,GAAG,GAAG,CAAC,UAAJ,EAAZ;UACA,IAAI,CAAC,UAAL,CAAgB,YAAhB,CAA6B,KAA7B,EAAoC,IAAI,CAAC,WAAzC;UACA,GAAG,CAAC,UAAJ;UACA,IAAI,GAAG,KAAP;QACA,CALD;MAMA;;MAED,KAAK,YAAL,CAAkB,KAAlB,CAAwB,UAAxB,CAAmC,cAAnC,CAAkD,KAAK,YAAL,CAAkB,eAAlB,EAAlD,EAAuF,KAAK,YAAL,CAAkB,eAAlB,EAAvF;MAEA,KAAK,YAAL,CAAkB,8BAAlB;IACA,CA9BD,MA8BK;MACJ,KAAK,YAAL,CAAkB,eAAlB,CAAkC,IAAlC;IACA;;IAED,KAAK,YAAL,CAAkB,KAAlB,CAAwB,cAAxB,CAAuC,QAAvC,CAAgD,wBAAhD,EAA0E,KAAK,YAAL,EAA1E,EAA+F,IAA/F;EACA;;EAED,OAAO,GAAE;IACR,IAAI,IAAI,GAAG,EAAX;;IAEA,IAAG,OAAO,KAAK,OAAZ,IAAuB,UAA1B,EAAqC;MAEpC,KAAK,IAAL,CAAU,OAAV,CAAkB,UAAS,GAAT,EAAa;QAC9B,IAAI,CAAC,IAAL,CAAU,GAAG,CAAC,OAAJ,EAAV;MACA,CAFD;MAIA,KAAK,OAAL,GAAe,KAAK,OAAL,CAAa,KAAK,GAAlB,EAAuB,KAAK,WAAL,EAAvB,EAA2C,IAA3C,EAAiD,KAAK,YAAL,EAAjD,CAAf;IACA;EACD;;EAED,WAAW,CAAC,GAAD,EAAK;IACf,IAAI,KAAK,GAAG,KAAZ;;IACA,IAAG,KAAK,SAAL,CAAe,MAAlB,EAAyB;MACxB,KAAK,SAAL,CAAe,OAAf,CAAuB,UAAS,KAAT,EAAe;QACrC,IAAI,MAAM,GAAG,KAAK,CAAC,WAAN,CAAkB,GAAlB,CAAb;;QAEA,IAAG,MAAH,EAAU;UACT,KAAK,GAAG,MAAR;QACA;MACD,CAND;IAOA,CARD,MAQK;MACJ,IAAG,KAAK,IAAL,CAAU,IAAV,CAAe,UAAS,IAAT,EAAc;QAC/B,OAAO,IAAI,KAAK,GAAhB;MACA,CAFE,CAAH,EAEG;QACF,KAAK,GAAG,IAAR;MACA;IACD;;IAED,OAAO,KAAP;EACA;;EAED,YAAY,CAAC,SAAD,EAAW;IACtB,IAAI,MAAM,GAAG,EAAb;IAEA,KAAK,SAAL,CAAe,OAAf,CAAuB,UAAS,KAAT,EAAe;MACrC,MAAM,CAAC,IAAP,CAAY,SAAS,GAAG,KAAK,CAAC,YAAN,EAAH,GAA0B,KAA/C;IACA,CAFD;IAIA,OAAO,MAAP;EACA;;EAED,OAAO,CAAC,SAAD,EAAW;IACjB,IAAI,MAAM,GAAG,EAAb;IAEA,KAAK,IAAL,CAAU,OAAV,CAAkB,UAAS,GAAT,EAAa;MAC9B,MAAM,CAAC,IAAP,CAAY,SAAS,GAAG,GAAG,CAAC,YAAJ,EAAH,GAAwB,GAA7C;IACA,CAFD;IAIA,OAAO,MAAP;EACA;;EAED,2BAA2B,GAAE;IAC5B,IAAI,IAAI,GAAG,EAAX;IAEA,KAAK,IAAL,CAAU,OAAV,CAAkB,UAAS,GAAT,EAAa;MAC9B,IAAI,CAAC,IAAL,CAAU,GAAG,CAAC,OAAJ,EAAV;IACA,CAFD;IAIA,KAAK,eAAL,GAAuB,KAAK,SAAL,CAAe,KAAK,GAApB,EAAyB,KAAK,WAAL,EAAzB,EAA6C,IAA7C,EAAmD,KAAK,YAAL,EAAnD,CAAvB;;IAEA,OAAM,KAAK,OAAL,CAAa,UAAnB,EAA+B,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,OAAL,CAAa,UAAtC;;IAE/B,IAAG,OAAO,KAAK,eAAZ,KAAgC,QAAnC,EAA4C;MAC3C,KAAK,OAAL,CAAa,SAAb,GAAyB,KAAK,eAA9B;IACA,CAFD,MAEK;MACJ,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,eAA9B;IACA;;IAED,KAAK,OAAL,CAAa,YAAb,CAA0B,KAAK,YAA/B,EAA6C,KAAK,OAAL,CAAa,UAA1D;EACA;;EAED,OAAO,CAAC,IAAI,GAAG,EAAR,EAAY;IAClB,IAAI,CAAC,OAAL,CAAa,KAAK,GAAlB;;IACA,IAAG,KAAK,MAAR,EAAgB;MACf,KAAK,MAAL,CAAY,OAAZ,CAAoB,IAApB;IACA;;IACD,OAAO,IAAP;EACA,CA5fS,CA8fX;;;EAEC,UAAU,GAAE;IACX,OAAO,KAAK,eAAL,GAAuB,KAAK,OAA5B,GAAsC,KAAK,eAAL,EAA7C;EACA;;EAED,eAAe,GAAE;IAChB,KAAK,WAAL,GAAmB,KAAnB;;IAEA,KAAK,OAAL;;IAEA,IAAG,KAAK,OAAR,EAAgB;MACf,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,yBAA3B;IACA,CAFD,MAEK;MACJ,KAAK,OAAL,CAAa,SAAb,CAAuB,MAAvB,CAA8B,yBAA9B;IACA;;IAED,KAAI,IAAI,CAAC,GAAG,CAAZ,EAAe,CAAC,GAAG,KAAK,OAAL,CAAa,UAAb,CAAwB,MAA3C,EAAmD,EAAE,CAArD,EAAuD;MACtD,KAAK,OAAL,CAAa,UAAb,CAAwB,CAAxB,EAA2B,UAA3B,CAAsC,WAAtC,CAAkD,KAAK,OAAL,CAAa,UAAb,CAAwB,CAAxB,CAAlD;IACA;;IAED,KAAK,2BAAL,GAfgB,CAiBlB;;IAEE,OAAO,KAAK,OAAZ;EACA;;EAED,aAAa,GAAE;IACd,IAAI,KAAK,OAAL,IAAgB,KAAK,OAAL,CAAa,UAAjC,EAA4C;MAC3C,KAAK,OAAL,CAAa,UAAb,CAAwB,WAAxB,CAAoC,KAAK,OAAzC;IACA;EACD,CA9hBS,CAgiBX;;;EACC,eAAe,GAAE;IAChB,KAAK,SAAL,CAAe,KAAK,OAAL,CAAa,YAA5B;EACA;;EAED,UAAU,CAAC,KAAD,EAAO;IAChB,IAAG,CAAC,KAAK,WAAN,IAAqB,KAAxB,EAA8B;MAC7B,KAAK,eAAL;MACA,KAAK,WAAL,GAAmB,IAAnB;IACA;EACD;;EAED,YAAY,GAAE;IACb,KAAK,WAAL,GAAmB,KAAnB;IACA,KAAK,MAAL,GAAc,CAAd;;IAEA,IAAG,OAAO,CAAC,SAAR,CAAkB,KAAK,OAAvB,CAAH,EAAmC;MAClC,KAAK,UAAL,CAAgB,IAAhB;IACA;EACD;;EAED,SAAS,CAAC,MAAD,EAAQ;IAChB,IAAG,KAAK,MAAL,IAAe,MAAlB,EAAyB;MACxB,KAAK,MAAL,GAAc,MAAd;MACA,KAAK,WAAL,GAAmB,KAAK,OAAL,CAAa,YAAhC;IACA;EACD,CA1jBS,CA4jBX;;;EACC,SAAS,GAAE;IACV,OAAO,KAAK,WAAZ;EACA;;EAED,QAAQ,GAAE;IACT,OAAO,IAAP;EACA;;EAED,kBAAkB,GAAE,CAAE;;EAEtB,UAAU,GAAE,CAAE;;EAEd,aAAa,GAAE,CAAE;;EAEjB,eAAe,GAAE,CAAE;;EAEnB,kBAAkB,GAAE,CAAE,CA7kBZ,CA+kBX;;;EACC,YAAY,GAAE;IACb,IAAG,CAAC,KAAK,SAAT,EAAmB;MAClB,KAAK,SAAL,GAAiB,IAAI,cAAJ,CAAmB,IAAnB,CAAjB;IACA;;IAED,OAAO,KAAK,SAAZ;EACA;;AAtlBS;;ACAX,MAAM,SAAN,SAAwB,MAAxB,CAA8B;EAE7B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,cAAL,GAAsB,KAAtB,CAHiB,CAGW;;IAC5B,KAAK,SAAL,GAAiB,CAAC,YAAU;MAAC,OAAO,KAAP;IAAc,CAA1B,CAAjB,CAJiB,CAI4B;;IAC7C,KAAK,eAAL,GAAuB,CAAC,YAAU;MAAC,OAAO,EAAP;IAAW,CAAvB,CAAvB;IACA,KAAK,SAAL,GAAiB,EAAjB,CANiB,CAMG;;IACpB,KAAK,aAAL,GAAqB,KAArB;IACA,KAAK,MAAL,GAAc,EAAd,CARiB,CAQA;;IACjB,KAAK,YAAL,GAAoB,CAApB,CATiB,CASK;;IAEtB,KAAK,cAAL,GAAsB,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAtB,CAXiB,CAanB;;IACE,KAAK,mBAAL,CAAyB,SAAzB,EAAoC,KAApC,EAdiB,CAc0B;;IAC3C,KAAK,mBAAL,CAAyB,gBAAzB,EAA2C,IAA3C,EAfiB,CAegC;;IACjD,KAAK,mBAAL,CAAyB,aAAzB,EAAwC,KAAxC;IACA,KAAK,mBAAL,CAAyB,uBAAzB,EAAkD,KAAlD;IACA,KAAK,mBAAL,CAAyB,aAAzB,EAAwC,KAAxC,EAlBiB,CAkB8B;;IAC/C,KAAK,mBAAL,CAAyB,kBAAzB,EAA6C,IAA7C;IACA,KAAK,mBAAL,CAAyB,sBAAzB,EAAiD,IAAjD;IACA,KAAK,mBAAL,CAAyB,uBAAzB,EAAkD,IAAlD;IACA,KAAK,mBAAL,CAAyB,qBAAzB,EAAgD,IAAhD;IACA,KAAK,mBAAL,CAAyB,oBAAzB,EAA+C,OAA/C;IACA,KAAK,mBAAL,CAAyB,sBAAzB,EAAiD,KAAjD,EAxBiB,CA0BnB;;IACE,KAAK,qBAAL,CAA2B,YAA3B,EAAyC,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAAzC;IACA,KAAK,qBAAL,CAA2B,gBAA3B,EAA6C,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAA7C;IACA,KAAK,qBAAL,CAA2B,mBAA3B,EAAgD,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,IAA5B,CAAhD;IACA,KAAK,qBAAL,CAA2B,gBAA3B,EAA6C,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAA7C;IACA,KAAK,qBAAL,CAA2B,WAA3B,EAAwC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAxC;IACA,KAAK,qBAAL,CAA2B,gBAA3B,EAA6C,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAA7C,EAhCiB,CAkCnB;;IACE,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,UAAtC,EAAkD,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAlD;EACA,CAtC4B,CAwC9B;;;EACC,UAAU,GAAE;IACX,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAtB,EAA8B;MAC7B,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAtB,EAA4C;QAC3C,KAAK,SAAL,CAAe,oBAAf,EAAqC,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAArC;QACA,KAAK,SAAL,CAAe,kBAAf,EAAmC,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAAnC,EAAuE,CAAvE;MACA;;MAED,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,mBAAL,CAAyB,IAAzB,CAA8B,IAA9B,CAA9B;MAEA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAA/B;MACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAA9B;MACA,KAAK,SAAL,CAAe,mBAAf,EAAoC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAApC;MACA,KAAK,SAAL,CAAe,WAAf,EAA4B,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,CAA5B;MACA,KAAK,SAAL,CAAe,YAAf,EAA6B,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAA7B;MACA,KAAK,SAAL,CAAe,YAAf,EAA6B,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAA7B;MACA,KAAK,SAAL,CAAe,kBAAf,EAAmC,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAAnC;MAEA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAA9B;MAEA,KAAK,SAAL,CAAe,qBAAf,EAAsC,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,IAA5B,CAAtC;MAEA,KAAK,sBAAL,CAA4B,KAAK,cAAjC,EAAiD,EAAjD;MAEA,KAAK,WAAL,GAAmB,IAAnB;IACA;EACD;;EAED,mBAAmB,GAAE;IACpB,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAtB,EAA8B;MAC7B,IAAI,OAAO,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAjC;MAAA,IACA,SAAS,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,cAD/B;MAAA,IAEA,WAAW,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAFjC;MAIA,KAAK,aAAL,GAAqB,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAxC;;MAEA,IAAG,KAAK,CAAC,OAAN,CAAc,OAAd,KAA0B,KAAK,CAAC,OAAN,CAAc,WAAd,CAA1B,IAAwD,OAAO,CAAC,MAAR,GAAiB,WAAW,CAAC,MAAxF,EAA+F;QAC9F,OAAO,CAAC,IAAR,CAAa,+EAAb;MACA;;MAED,KAAK,eAAL,GAAuB,CAAC,YAAU;QAAC,OAAO,EAAP;MAAW,CAAvB,CAAvB;MACA,KAAK,SAAL,GAAiB,CAAC,YAAU;QAAC,OAAO,KAAP;MAAc,CAA1B,CAAjB,CAZ6B,CAYgB;;MAE7C,KAAK,QAAL,CAAc,aAAd,EAA6B,CAAC,SAAD,EAAY,IAAZ,KAAqB;QACjD,KAAK,eAAL,CAAqB,CAArB,IAA0B,CAAC,KAAD,EAAQ,KAAR,EAAe,IAAf,KAAwB;UAAA;UACjD,OAAO,CAAC,OAAO,KAAP,KAAiB,WAAjB,GAA+B,EAA/B,GAAoC,KAArC,IAA8C,SAA9C,GAA0D,KAA1D,GAAkE,GAAlE,IAA0E,KAAK,KAAK,CAAX,GAAgB,SAAhB,GAA4B,IAAI,CAAC,MAAL,CAAY,KAAjH,IAA0H,UAAjI;QACA,CAFD;MAGA,CAJD;MAMA,KAAK,cAAL,GAAsB,EAAtB;;MAEA,IAAG,KAAK,CAAC,OAAN,CAAc,OAAd,CAAH,EAA0B;QACzB,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,aAArB,KAAuC,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,IAAkC,OAAzE,IAAoF,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,IAAkC,MAAzH,EAAgI;UAC/H,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,WAA/B;QACA;MACD,CAJD,MAIK;QACJ,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,aAArB,KAAuC,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,IAAkC,OAA5E,EAAoF;UAEnF,IAAI,IAAI,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,cAAzB,EAAX;UAEA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;YACrB,IAAG,GAAG,CAAC,UAAJ,CAAe,OAAlB,EAA0B;cACzB,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,gBAA/B;YACA;;YAED,IAAG,GAAG,CAAC,UAAJ,CAAe,UAAlB,EAA6B;cAC5B,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,mBAA/B;YACA;UACD,CARD;QASA;MACD;;MAED,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,OAAd,CAAJ,EAA2B;QAC1B,OAAO,GAAG,CAAC,OAAD,CAAV;MACA;;MAED,OAAO,CAAC,OAAR,CAAgB,CAAC,KAAD,EAAQ,CAAR,KAAc;QAC7B,IAAI,UAAJ,EAAgB,MAAhB;;QAEA,IAAG,OAAO,KAAP,IAAgB,UAAnB,EAA8B;UAC7B,UAAU,GAAG,KAAb;QACA,CAFD,MAEK;UACJ,MAAM,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,gBAAzB,CAA0C,KAA1C,CAAT;;UAEA,IAAG,MAAH,EAAU;YACT,UAAU,GAAG,UAAS,IAAT,EAAc;cAC1B,OAAO,MAAM,CAAC,aAAP,CAAqB,IAArB,CAAP;YACA,CAFD;UAGA,CAJD,MAIK;YACJ,UAAU,GAAG,UAAS,IAAT,EAAc;cAC1B,OAAO,IAAI,CAAC,KAAD,CAAX;YACA,CAFD;UAGA;QACD;;QAED,KAAK,cAAL,CAAoB,IAApB,CAAyB;UACxB,KAAK,EAAE,OAAO,KAAP,KAAiB,UAAjB,GAA8B,KAA9B,GAAsC,KADrB;UAExB,IAAI,EAAC,UAFmB;UAGxB,MAAM,EAAC,KAAK,aAAL,GAAqB,KAAK,aAAL,CAAmB,CAAnB,CAArB,GAA6C;QAH5B,CAAzB;MAKA,CAxBD;;MA0BA,IAAG,SAAH,EAAa;QACZ,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,SAAd,CAAJ,EAA6B;UAC5B,SAAS,GAAG,CAAC,SAAD,CAAZ;QACA;;QAED,SAAS,CAAC,OAAV,CAAmB,KAAD,IAAW,CAE5B,CAFD;QAIA,KAAK,SAAL,GAAiB,SAAjB;MACA;;MAED,IAAG,WAAH,EAAe;QACd,KAAK,eAAL,GAAuB,KAAK,CAAC,OAAN,CAAc,WAAd,IAA6B,WAA7B,GAA2C,CAAC,WAAD,CAAlE;MACA;IACD,CAxFD,MAwFK;MACJ,KAAK,SAAL,GAAiB,EAAjB;MACA,KAAK,MAAL,GAAc,EAAd;IACA;EACD;;EAED,SAAS,CAAC,IAAD,EAAO,SAAP,EAAiB;IACzB,IAAI,KAAK,GAAG,KAAK,SAAL,CAAe,KAAf,EAAsB,CAAtB,CAAZ;IAEA,SAAS,CAAC,IAAV,CAAe,KAAK,CAAC,OAAN,CAAc,KAAd,EAAqB,CAArB,CAAf;IAEA,OAAO,SAAP;EACA;;EAED,iBAAiB,GAAE;IAClB,IAAI,EAAE,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,YAA/B;IACA,IAAI,IAAI,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,EAAX;IAEA,IAAI,GAAG,IAAI,CAAC,MAAL,CAAa,GAAD,IAAS;MAC3B,OAAO,GAAG,CAAC,IAAJ,KAAa,OAApB;IACA,CAFM,CAAP;IAIA,EAAE,CAAC,KAAH,CAAS,QAAT,GAAoB,CAAC,IAAI,CAAC,MAAN,GAAe,KAAK,KAAL,CAAW,aAAX,CAAyB,QAAzB,KAAsC,IAArD,GAA4D,EAAhF,CARkB,CAUpB;IACA;IACA;IACA;IACA;EACE;;EAED,cAAc,CAAC,GAAD,EAAM,KAAN,EAAa,GAAb,EAAiB;IAC9B,KAAK,gBAAL,CAAsB,GAAtB;IAEA,IAAI,SAAS,GAAG,GAAG,CAAC,OAAJ,CAAY,KAAZ,CAAkB,IAAlC;;IAEA,IAAG,SAAS,CAAC,MAAV,GAAmB,CAAtB,EAAwB;MACvB,IAAG,CAAC,KAAD,IAAW,KAAK,IAAI,SAAS,CAAC,OAAV,CAAkB,KAAlB,KAA4B,CAAC,CAApD,EAAuD;QACtD,IAAG,GAAH,EAAO;UACN,IAAG,SAAS,CAAC,CAAD,CAAT,KAAiB,GAApB,EAAwB;YACvB,KAAK,GAAG,SAAS,CAAC,CAAD,CAAjB;YACA,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,GAAG,CAAC,OAAJ,CAAY,KAAZ,CAAkB,IAAvD,EAA6D,GAA7D,EAAkE,KAAlE,EAAyE,CAAC,GAA1E;UACA;QACD,CALD,MAKK;UACJ,IAAG,SAAS,CAAC,SAAS,CAAC,MAAV,GAAkB,CAAnB,CAAT,KAAmC,GAAtC,EAA0C;YACzC,KAAK,GAAG,SAAS,CAAC,SAAS,CAAC,MAAV,GAAkB,CAAnB,CAAjB;YACA,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,GAAG,CAAC,OAAJ,CAAY,KAAZ,CAAkB,IAAvD,EAA6D,GAA7D,EAAkE,KAAlE,EAAyE,CAAC,GAA1E;UACA;QACD;MACD,CAZD,MAYK;QACJ,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,GAAG,CAAC,OAAJ,CAAY,KAAZ,CAAkB,IAAvD,EAA6D,GAA7D,EAAkE,KAAlE,EAAyE,CAAC,GAA1E;MACA;IACD;;IAED,OAAO,KAAP;EACA;;EAED,YAAY,GAAE;IACb,KAAK,QAAL,CAAc,eAAd;EACA,CAxN4B,CA0N9B;EACA;EACA;;;EAEC,UAAU,CAAC,MAAD,EAAQ;IACjB,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,GAA6B,MAA7B;;IAEA,IAAG,CAAC,KAAK,WAAT,EAAqB;MACpB,KAAK,UAAL;IACA;;IAED,KAAK,mBAAL;IAEA,KAAK,WAAL;IAEA,KAAK,YAAL;EACA;;EAED,cAAc,CAAC,WAAD,EAAa;IAC1B,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,GAAiC,WAAjC;IACA,KAAK,mBAAL;IACA,KAAK,WAAL;IAEA,KAAK,YAAL;EACA;;EAED,iBAAiB,CAAC,MAAD,EAAQ;IACxB,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAnB,GAAoC,MAApC;IACA,KAAK,mBAAL;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAtB,EAA8B;MAC7B,KAAK,WAAL;MAEA,KAAK,YAAL;IACA,CAJD,MAIK;MACJ,OAAO,CAAC,IAAR,CAAa,8DAAb;IACA;EACD;;EAED,cAAc,CAAC,MAAD,EAAQ;IACrB,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,GAAiC,MAAjC;IACA,KAAK,mBAAL;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAtB,EAA8B;MAC7B,KAAK,WAAL;MAEA,KAAK,YAAL;IACA,CAJD,MAIK;MACJ,OAAO,CAAC,IAAR,CAAa,8DAAb;IACA;EACD;;EAED,aAAa,CAAC,MAAD,EAAQ;IACpB,OAAO,KAAK,SAAL,CAAe,IAAf,CAAP;EACA,CAhR4B,CAkR9B;;;EACC,kBAAkB,GAAE;IACnB,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,GACN,KAAK,cAAL,EADM,GACkB,KAAK,OAAL,EADzB;EAEA,CAtR4B,CAyR9B;EACA;EACA;;;EAEC,WAAW,CAAC,GAAD,EAAK;IACf,OAAO,GAAG,CAAC,OAAJ,CAAY,KAAZ,GAAoB,GAAG,CAAC,OAAJ,CAAY,KAAZ,CAAkB,YAAlB,EAApB,GAAuD,KAA9D;EACA,CA/R4B,CAiS9B;EACA;EACA;;;EAEC,SAAS,CAAC,IAAD,EAAO,EAAP,EAAW,KAAX,EAAiB;IACzB,IAAG,CAAC,KAAD,IAAU,EAAE,YAAY,KAA3B,EAAiC;MAChC,EAAE,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,IAArC,KAA8C,EAAnD;IACA;;IAED,IAAI,OAAO,GAAG,EAAE,YAAY,KAAd,GAAsB,EAAtB,GAA2B,EAAE,CAAC,OAAH,CAAW,KAApD;IACA,IAAI,SAAS,GAAG,IAAI,YAAY,KAAhB,GAAwB,IAAxB,GAA+B,IAAI,CAAC,OAAL,CAAa,KAA5D;;IAEA,IAAG,OAAO,KAAK,SAAf,EAAyB;MACxB,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,OAAO,CAAC,IAA7C,EAAmD,IAAnD,EAAyD,EAAzD,EAA6D,KAA7D;IACA,CAFD,MAEK;MACJ,IAAG,SAAH,EAAa;QACZ,SAAS,CAAC,SAAV,CAAoB,IAApB;MACA;;MAED,OAAO,CAAC,SAAR,CAAkB,IAAlB,EAAwB,EAAxB,EAA4B,KAA5B;IACA;EACD;;EAGD,WAAW,CAAC,GAAD,EAAK;IACjB;IACE,IAAG,GAAG,CAAC,OAAJ,CAAY,KAAf,EAAqB;MACpB,GAAG,CAAC,OAAJ,CAAY,KAAZ,CAAkB,SAAlB,CAA4B,GAA5B;IACA;EACD;;EAGD,WAAW,CAAC,GAAD,EAAK;IACf,KAAK,eAAL,CAAqB,IAArB;EACA;;EAED,WAAW,CAAC,IAAD,EAAM;IAChB,KAAK,kBAAL,CAAwB,IAAI,CAAC,GAA7B;EACA;;EAGD,eAAe,CAAC,KAAD,EAAO;IACrB,KAAK,YAAL,GAAoB,KAApB;EACA;;EAED,eAAe,GAAE;IAChB,OAAO,KAAK,YAAZ;EACA,CAhV4B,CAkV9B;;;EACC,OAAO,CAAC,IAAD,EAAM;IACZ,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,IAA8B,KAAK,cAAL,CAAoB,MAArD,EAA4D;MAE3D,KAAK,gBAAL,CAAsB,cAAtB;MAEA,KAAK,cAAL,CAAoB,IAApB;;MAEA,IAAG,KAAK,kBAAL,CAAwB,aAAxB,CAAH,EAA0C;QACzC,KAAK,gBAAL,CAAsB,aAAtB,EAAqC,KAAK,SAAL,CAAe,IAAf,CAArC;MACA;;MAED,OAAO,KAAK,eAAL,EAAP;IAEA,CAZD,MAYK;MACJ,OAAO,IAAI,CAAC,KAAL,CAAW,CAAX,CAAP;IACA;EACD;;EAED,SAAS,CAAC,SAAD,EAAW;IACnB,IAAI,eAAe,GAAG,EAAtB;IAEA,KAAK,SAAL,CAAe,OAAf,CAAuB,UAAS,KAAT,EAAe;MACrC,eAAe,CAAC,IAAhB,CAAqB,SAAS,GAAG,KAAK,CAAC,YAAN,EAAH,GAA0B,KAAxD;IACA,CAFD;IAIA,OAAO,eAAP;EACA;;EAED,cAAc,CAAC,KAAD,EAAO;IACpB,IAAI,eAAe,GAAG,EAAtB;;IAEA,IAAG,CAAC,KAAJ,EAAU;MACT,KAAK,GAAG,IAAR;IACA;;IAED,KAAK,CAAC,SAAN,CAAgB,OAAhB,CAAyB,KAAD,IAAW;MAClC,IAAG,KAAK,CAAC,SAAN,CAAgB,MAAnB,EAA0B;QACzB,eAAe,GAAG,eAAe,CAAC,MAAhB,CAAuB,KAAK,cAAL,CAAoB,KAApB,CAAvB,CAAlB;MACA,CAFD,MAEK;QACJ,eAAe,CAAC,IAAhB,CAAqB,KAArB;MACA;IACD,CAND;IAQA,OAAO,eAAP;EACA;;EAED,IAAI,GAAE;IACL,KAAK,SAAL,CAAe,OAAf,CAAuB,UAAS,KAAT,EAAe;MACrC,KAAK,CAAC,IAAN;IACA,CAFD;EAGA;;EAED,iBAAiB,CAAC,SAAD,EAAY;IAC5B,IAAI,aAAa,GAAG,EAApB;IAEA,SAAS,CAAC,OAAV,CAAmB,KAAD,IAAW;MAC5B,IAAI,WAAW,GAAG,EAAlB;MACA,WAAW,CAAC,KAAZ,GAAoB,CAApB;MACA,WAAW,CAAC,QAAZ,GAAuB,CAAvB;MACA,WAAW,CAAC,aAAZ,GAA4B,EAA5B;MACA,IAAI,SAAS,GAAG,EAAhB;;MAEA,IAAI,KAAK,CAAC,YAAV,EAAwB;QACvB,SAAS,GAAG,KAAK,iBAAL,CAAuB,KAAK,CAAC,SAA7B,CAAZ;QAEA,WAAW,CAAC,KAAZ,GAAoB,KAAK,CAAC,KAA1B;QACA,WAAW,CAAC,QAAZ,GAAuB,SAAS,CAAC,MAAV,GAAmB,KAAK,CAAC,SAAN,CAAgB,MAA1D,CAJuB,CAI0C;;QACjE,WAAW,CAAC,aAAZ,GAA4B,KAAK,CAAC,SAAN,CAAgB,KAAK,CAAC,GAAtB,EAA2B,WAAW,CAAC,QAAvC,EAAiD,KAAK,CAAC,IAAvD,EAA6D,KAA7D,CAA5B;QAEA,aAAa,CAAC,IAAd,CAAmB,WAAnB;QACA,aAAa,GAAG,aAAa,CAAC,MAAd,CAAqB,SAArB,CAAhB;MACA,CATD,MAWK;QACJ,WAAW,CAAC,KAAZ,GAAoB,KAAK,CAAC,KAA1B;QACA,WAAW,CAAC,aAAZ,GAA4B,KAAK,CAAC,SAAN,CAAgB,KAAK,CAAC,GAAtB,EAA2B,KAAK,CAAC,IAAN,CAAW,MAAtC,EAA8C,KAAK,CAAC,IAApD,EAA0D,KAA1D,CAA5B;QACA,WAAW,CAAC,QAAZ,GAAuB,KAAK,CAAC,OAAN,GAAgB,MAAvC;QAEA,aAAa,CAAC,IAAd,CAAmB,WAAnB;QAEA,KAAK,CAAC,OAAN,GAAgB,OAAhB,CAAyB,GAAD,IAAS;UAChC,aAAa,CAAC,IAAd,CAAmB,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAnB;QACA,CAFD;MAGA;IACD,CA7BD;IA+BA,OAAO,aAAP;EACA;;EAED,cAAc,GAAE;IAEf,OAAO,KAAK,iBAAL,CAAuB,KAAK,SAA5B,CAAP;EACA;;EAED,WAAW,CAAC,GAAD,EAAK;IACf,IAAI,KAAK,GAAG,KAAZ;;IAEA,IAAG,KAAK,OAAL,CAAa,UAAb,CAAH,EAA4B;MAC3B,GAAG,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,CAA4B,iBAA5B,CAA8C,GAA9C,CAAN;IACA;;IAED,KAAK,SAAL,CAAe,OAAf,CAAwB,KAAD,IAAW;MACjC,IAAI,MAAM,GAAG,KAAK,CAAC,WAAN,CAAkB,GAAlB,CAAb;;MAEA,IAAG,MAAH,EAAU;QACT,KAAK,GAAG,MAAR;MACA;IACD,CAND;IAQA,OAAO,KAAP;EACA;;EAED,WAAW,GAAE;IACZ,OAAO,KAAK,SAAL,CAAe,MAAtB;EACA;;EAED,cAAc,CAAC,IAAD,EAAM;IACnB,IAAI,SAAS,GAAG,KAAK,MAArB;IAEA,KAAK,MAAL,GAAc,EAAd;IACA,KAAK,SAAL,GAAiB,EAAjB;;IAEA,IAAG,KAAK,aAAL,IAAsB,KAAK,aAAL,CAAmB,CAAnB,CAAzB,EAA+C;MAC9C,KAAK,aAAL,CAAmB,CAAnB,EAAsB,OAAtB,CAA+B,KAAD,IAAW;QACxC,KAAK,WAAL,CAAiB,KAAjB,EAAwB,CAAxB,EAA2B,SAA3B;MACA,CAFD;MAIA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;QACrB,KAAK,wBAAL,CAA8B,GAA9B,EAAmC,SAAnC;MACA,CAFD;IAGA,CARD,MAQK;MACJ,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;QACrB,KAAK,gBAAL,CAAsB,GAAtB,EAA2B,SAA3B;MACA,CAFD;IAGA;EACD;;EAED,WAAW,CAAC,OAAD,EAAU,KAAV,EAAiB,SAAjB,EAA2B;IACrC,IAAI,QAAQ,GAAG,KAAK,GAAG,GAAR,GAAc,OAA7B;IAAA,IACA,KADA;IAGA,SAAS,GAAG,SAAS,IAAI,EAAzB;IAEA,KAAK,GAAG,IAAI,KAAJ,CAAU,IAAV,EAAgB,KAAhB,EAAuB,KAAvB,EAA8B,OAA9B,EAAuC,KAAK,cAAL,CAAoB,CAApB,EAAuB,KAA9D,EAAqE,KAAK,eAAL,CAAqB,CAArB,CAArE,EAA8F,SAAS,CAAC,QAAD,CAAvG,CAAR;IAEA,KAAK,MAAL,CAAY,QAAZ,IAAwB,KAAxB;IACA,KAAK,SAAL,CAAe,IAAf,CAAoB,KAApB;EACA;;EAED,wBAAwB,CAAC,GAAD,EAAM,SAAN,EAAgB;IACvC,IAAI,OAAO,GAAG,KAAK,cAAL,CAAoB,CAApB,EAAuB,IAAvB,CAA4B,GAAG,CAAC,OAAJ,EAA5B,CAAd;IAAA,IACA,QAAQ,GAAG,OAAO,OADlB;;IAGA,IAAG,KAAK,MAAL,CAAY,QAAZ,CAAH,EAAyB;MACxB,KAAK,MAAL,CAAY,QAAZ,EAAsB,MAAtB,CAA6B,GAA7B;IACA;EACD;;EAED,gBAAgB,CAAC,GAAD,EAAM,SAAN,EAAgB;IAC/B,IAAI,OAAO,GAAG,KAAK,cAAL,CAAoB,CAApB,EAAuB,IAAvB,CAA4B,GAAG,CAAC,OAAJ,EAA5B,CAAd;IAAA,IACA,cAAc,GAAG,CAAC,KAAK,MAAL,CAAY,OAAO,OAAnB,CADlB;;IAGA,IAAG,cAAH,EAAkB;MACjB,KAAK,WAAL,CAAiB,OAAjB,EAA0B,CAA1B,EAA6B,SAA7B;IACA;;IAED,KAAK,MAAL,CAAY,OAAO,OAAnB,EAA4B,MAA5B,CAAmC,GAAnC;IAEA,OAAO,CAAC,cAAR;EACA;;EAED,kBAAkB,CAAC,GAAD,EAAK;IACtB,IAAG,GAAG,CAAC,IAAJ,KAAa,KAAhB,EAAsB;MACrB,IAAI,WAAW,GAAG,GAAG,CAAC,OAAJ,CAAY,KAA9B;MAAA,IACA,YAAY,GAAG,WAAW,CAAC,OAAZ,EADf;MAAA,IAEA,YAAY,GAAG,KAAK,eAAL,CAAqB,GAArB,CAFf;MAAA,IAGA,QAHA,CADqB,CAMxB;;MACG,QAAQ,GAAI,YAAY,CAAC,MAAb,IAAuB,YAAY,CAAC,MAArC,IAAgD,YAAY,CAAC,KAAb,CAAmB,CAAC,OAAD,EAAU,KAAV,KAAoB;QACjG,OAAO,OAAO,KAAK,YAAY,CAAC,KAAD,CAA/B;MACA,CAF0D,CAA3D,CAPqB,CAWxB;;MACG,IAAG,CAAC,QAAJ,EAAc;QACb,WAAW,CAAC,SAAZ,CAAsB,GAAtB;QACA,KAAK,gBAAL,CAAsB,GAAtB,EAA2B,KAAK,MAAhC;QACA,KAAK,WAAL,CAAiB,IAAjB;MACA;IACD;EACD;;EAED,eAAe,CAAC,GAAD,EAAM;IACpB,IAAI,SAAS,GAAG,EAAhB;IAAA,IAAoB,OAAO,GAAG,GAAG,CAAC,OAAJ,EAA9B;IAEA,KAAK,cAAL,CAAoB,OAApB,CAA6B,OAAD,IAAa;MACxC,SAAS,CAAC,IAAV,CAAe,OAAO,CAAC,IAAR,CAAa,OAAb,CAAf;IACA,CAFD;IAIA,OAAO,SAAP;EACA;;EAED,eAAe,CAAC,KAAD,EAAO;IACrB,IAAI,MAAM,GAAG,EAAb;IAEA,KAAK,SAAL,CAAe,OAAf,CAAwB,KAAD,IAAW;MACjC,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,KAAK,CAAC,iBAAN,EAAd,CAAT;IACA,CAFD;;IAIA,IAAG,KAAH,EAAS;MACR,KAAK,WAAL,CAAiB,IAAjB,EAAuB,KAAK,cAA5B;IACA;;IAED,OAAO,MAAP;EACA;;EAED,aAAa,CAAC,IAAD,EAAM;IAClB,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,KAAwC,SAA3C,EAAqD;MACpD,IAAI,IAAI,KAAK,KAAL,CAAW,aAAX,CAAyB,QAAzB,CAAkC,WAA1C;IACA;;IAED,IAAI,GAAG,IAAI,GAAG,IAAd;IAEA,KAAK,SAAL,CAAe,OAAf,CAAwB,KAAD,IAAW;MACjC,KAAK,CAAC,YAAN,CAAmB,IAAnB;IACA,CAFD;EAGA;;EAED,WAAW,CAAC,KAAD,EAAO;IACjB,IAAI,QAAQ,GAAG,KAAK,CAAC,KAAN,GAAc,GAAd,GAAoB,KAAK,CAAC,GAAzC;IAAA,IACA,KADA;;IAGA,IAAG,KAAK,MAAL,CAAY,QAAZ,CAAH,EAAyB;MACxB,OAAO,KAAK,MAAL,CAAY,QAAZ,CAAP;MAEA,KAAK,GAAG,KAAK,SAAL,CAAe,OAAf,CAAuB,KAAvB,CAAR;;MAEA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;QACb,KAAK,SAAL,CAAe,MAAf,CAAsB,KAAtB,EAA6B,CAA7B;MACA;IACD;EACD;;EAED,8BAA8B,GAAE;IAC/B,IAAI,OAAO,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,YAApC;IAAA,IACA,gBAAgB,GAAG,IADnB;IAGA,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,GAAuC,OAAvC,CAA+C,CAAC,GAAD,EAAM,KAAN,KAAe;MAC7D,KAAK,KAAL,CAAW,UAAX,CAAsB,QAAtB,CAA+B,GAA/B,EAAoC,KAApC;MACA,OAAO,CAAC,WAAR,CAAoB,GAAG,CAAC,UAAJ,EAApB;MACA,GAAG,CAAC,UAAJ,CAAe,IAAf;;MAEA,IAAG,GAAG,CAAC,IAAJ,KAAa,OAAhB,EAAwB;QACvB,gBAAgB,GAAG,KAAnB;MACA;IACD,CARD;;IAUA,IAAG,gBAAH,EAAoB;MACnB,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,KAAK,KAAL,CAAW,aAAX,CAAyB,QAAzB,KAAsC,IAA/D;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,EAAzB;IACA;EACD;;AAzlB4B;;;AA6lB9B,SAAS,CAAC,UAAV,GAAuB,WAAvB;ACjmBA,IAAA,cAAA,GAAe;EACd,QAAQ,EAAE,UAAS,MAAT,EAAgB;IACzB,MAAM,CAAC,SAAP,CAAiB,mBAAjB,CAAqC,MAAM,CAAC,IAAP,CAAY,QAAjD;IACA,MAAM,CAAC,SAAP,CAAiB,YAAjB;EACA,CAJa;EAMd,MAAM,EAAE,UAAS,MAAT,EAAgB;IACvB,MAAM,CAAC,SAAP,CAAiB,YAAjB;EACA,CARa;EAUd,SAAS,EAAE,UAAS,MAAT,EAAgB;IAC1B,IAAI,MAAM,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,YAAtB,CAAmC,MAAM,CAAC,IAAP,CAAY,IAA/C,EAAqD,MAAM,CAAC,IAAP,CAAY,GAAjE,EAAsE,MAAM,CAAC,IAAP,CAAY,KAAlF,CAAb;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,IAA8B,KAAK,KAAL,CAAW,SAAX,CAAqB,WAArB,CAAjC,EAAmE;MAClE,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,eAA7B,CAA6C,IAA7C;IACA;;IAED,KAAK,UAAL,CAAgB,MAAM,CAAC,SAAvB,EAAkC,MAAlC;EACA,CAlBa;EAoBd,OAAO,EAAE,UAAS,MAAT,EAAgB;IACxB,KAAK,KAAL,CAAW,UAAX,CAAsB,aAAtB,CAAoC,MAAM,CAAC,SAA3C,EAAsD,KAAK,KAAL,CAAW,UAAX,CAAsB,IAAtB,CAA2B,MAAM,CAAC,IAAP,CAAY,OAAvC,CAAtD,EAAuG,CAAC,MAAM,CAAC,IAAP,CAAY,KAApH;IACA,KAAK,KAAL,CAAW,UAAX,CAAsB,MAAtB;EACA;AAvBa,CAAf;ACAA,IAAA,cAAA,GAAe;EACd,QAAQ,EAAE,UAAS,MAAT,EAAgB;IACzB,MAAM,CAAC,SAAP,CAAiB,mBAAjB,CAAqC,MAAM,CAAC,IAAP,CAAY,QAAjD;IACA,MAAM,CAAC,SAAP,CAAiB,YAAjB;EACA,CAJa;EAMd,MAAM,EAAE,UAAS,MAAT,EAAgB;IACvB,IAAI,MAAM,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,YAAtB,CAAmC,MAAM,CAAC,IAAP,CAAY,IAA/C,EAAqD,MAAM,CAAC,IAAP,CAAY,GAAjE,EAAsE,MAAM,CAAC,IAAP,CAAY,KAAlF,CAAb;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,IAA8B,KAAK,KAAL,CAAW,SAAX,CAAqB,WAArB,CAAjC,EAAmE;MAClE,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,eAA7B,CAA6C,IAA7C;IACA;;IAED,KAAK,UAAL,CAAgB,MAAM,CAAC,SAAvB,EAAkC,MAAlC;EACA,CAda;EAgBd,SAAS,EAAC,UAAS,MAAT,EAAgB;IACzB,MAAM,CAAC,SAAP,CAAiB,YAAjB;EACA,CAlBa;EAoBd,OAAO,EAAE,UAAS,MAAT,EAAgB;IACxB,KAAK,KAAL,CAAW,UAAX,CAAsB,aAAtB,CAAoC,MAAM,CAAC,SAA3C,EAAsD,KAAK,KAAL,CAAW,UAAX,CAAsB,IAAtB,CAA2B,MAAM,CAAC,IAAP,CAAY,KAAvC,CAAtD,EAAqG,MAAM,CAAC,IAAP,CAAY,KAAjH;IACA,KAAK,KAAL,CAAW,UAAX,CAAsB,MAAtB;EACA;AAvBa,CAAf;;ACOA,MAAM,OAAN,SAAsB,MAAtB,CAA4B;EAE3B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,OAAL,GAAe,EAAf;IACA,KAAK,KAAL,GAAa,CAAC,CAAd;IAEA,KAAK,mBAAL,CAAyB,SAAzB,EAAoC,KAApC,EANiB,CAM0B;EAC3C;;EAED,UAAU,GAAE;IACX,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAtB,EAA8B;MAC7B,KAAK,SAAL,CAAe,oBAAf,EAAqC,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAArC;MACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,qBAAL,CAA2B,IAA3B,CAAgC,IAAhC,CAA9B;MACA,KAAK,SAAL,CAAe,YAAf,EAA6B,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAA7B;MACA,KAAK,SAAL,CAAe,WAAf,EAA4B,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB,CAA5B;MACA,KAAK,SAAL,CAAe,WAAf,EAA4B,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAA5B;MACA,KAAK,SAAL,CAAe,UAAf,EAA2B,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAA3B;IACA;;IAED,KAAK,qBAAL,CAA2B,MAA3B,EAAmC,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,CAAnC;IACA,KAAK,qBAAL,CAA2B,MAA3B,EAAmC,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,CAAnC;IACA,KAAK,qBAAL,CAA2B,oBAA3B,EAAiD,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAAjD;IACA,KAAK,qBAAL,CAA2B,oBAA3B,EAAiD,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAAjD;IACA,KAAK,qBAAL,CAA2B,cAA3B,EAA2C,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB,CAA3C;EACA;;EAED,QAAQ,CAAC,IAAD,EAAO,EAAP,EAAW,KAAX,EAAiB;IACxB,KAAK,MAAL,CAAY,SAAZ,EAAuB,IAAvB,EAA6B;MAAC,OAAO,EAAC,IAAI,CAAC,WAAL,EAAT;MAA6B,KAAK,EAAC,EAAE,CAAC,WAAH,EAAnC;MAAqD,EAAE,EAAC,EAAxD;MAA4D,KAAK,EAAC;IAAlE,CAA7B;EACA;;EAED,QAAQ,CAAC,GAAD,EAAM,IAAN,EAAY,GAAZ,EAAiB,KAAjB,EAAuB;IAC9B,KAAK,MAAL,CAAY,QAAZ,EAAsB,GAAtB,EAA2B;MAAC,IAAI,EAAC,IAAN;MAAY,GAAG,EAAC,GAAhB;MAAqB,KAAK,EAAC;IAA3B,CAA3B;EACA;;EAED,UAAU,CAAC,GAAD,EAAK;IACd,IAAI,KAAJ,EAAW,IAAX;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAtB,EAA8B;MAE7B,IAAI,GAAG,GAAG,CAAC,YAAJ,GAAmB,QAAnB,GAA8B,QAA9B,GAAyC,IAAhD;MACA,KAAK,GAAG,IAAI,CAAC,OAAL,CAAa,GAAb,CAAR;;MAEA,IAAG,KAAH,EAAS;QACR,KAAK,GAAG,IAAI,CAAC,KAAK,GAAC,CAAP,CAAZ;MACA;IACD,CARD,MAQK;MACJ,KAAK,GAAG,GAAG,CAAC,KAAJ,CAAU,UAAV,CAAqB,WAArB,CAAiC,GAAjC,CAAR;;MAEA,IAAG,KAAH,EAAS;QACR,KAAK,GAAG,GAAG,CAAC,KAAJ,CAAU,UAAV,CAAqB,IAArB,CAA0B,KAAK,GAAC,CAAhC,CAAR;MACA;IACD;;IAED,KAAK,MAAL,CAAY,WAAZ,EAAyB,GAAzB,EAA8B;MAAC,IAAI,EAAC,GAAG,CAAC,OAAJ,EAAN;MAAqB,GAAG,EAAC,CAAC,KAA1B;MAAiC,KAAK,EAAC;IAAvC,CAA9B;EACA;;EAED,WAAW,CAAC,IAAD,EAAM;IAChB,KAAK,MAAL,CAAY,UAAZ,EAAwB,IAAxB,EAA8B;MAAC,QAAQ,EAAC,IAAI,CAAC,QAAf;MAAyB,QAAQ,EAAC,IAAI,CAAC;IAAvC,CAA9B;EACA;;EAED,KAAK,GAAE;IACN,KAAK,OAAL,GAAe,EAAf;IACA,KAAK,KAAL,GAAa,CAAC,CAAd;EACA;;EAED,MAAM,CAAC,IAAD,EAAO,SAAP,EAAkB,IAAlB,EAAuB;IAC5B,KAAK,OAAL,GAAe,KAAK,OAAL,CAAa,KAAb,CAAmB,CAAnB,EAAsB,KAAK,KAAL,GAAa,CAAnC,CAAf;IAEA,KAAK,OAAL,CAAa,IAAb,CAAkB;MACjB,IAAI,EAAC,IADY;MAEjB,SAAS,EAAC,SAFO;MAGjB,IAAI,EAAC;IAHY,CAAlB;IAMA,KAAK,KAAL;EACA;;EAED,kBAAkB,GAAE;IACnB,OAAO,KAAK,KAAL,GAAa,CAApB;EACA;;EAED,kBAAkB,GAAE;IACnB,OAAO,KAAK,OAAL,CAAa,MAAb,IAAuB,KAAK,KAAL,GAAa,CAApC,CAAP;EACA;;EAED,qBAAqB,CAAC,SAAD,EAAW;IAC/B,IAAI,KAAK,GAAG,KAAK,OAAL,CAAa,SAAb,CAAuB,UAAS,IAAT,EAAc;MAChD,OAAO,IAAI,CAAC,SAAL,KAAmB,SAA1B;IACA,CAFW,CAAZ;;IAIA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;MACb,KAAK,OAAL,CAAa,MAAb,CAAoB,KAApB,EAA2B,CAA3B;;MACA,IAAG,KAAK,IAAI,KAAK,KAAjB,EAAuB;QACtB,KAAK,KAAL;MACA;;MAED,KAAK,qBAAL,CAA2B,SAA3B;IACA;EACD;;EAED,IAAI,GAAE;IACL,IAAG,KAAK,KAAL,GAAa,CAAC,CAAjB,EAAmB;MAClB,IAAI,MAAM,GAAG,KAAK,OAAL,CAAa,KAAK,KAAlB,CAAb;MAEA,OAAO,CAAC,OAAR,CAAgB,MAAM,CAAC,IAAvB,EAA6B,IAA7B,CAAkC,IAAlC,EAAwC,MAAxC;MAEA,KAAK,KAAL;MAEA,KAAK,gBAAL,CAAsB,aAAtB,EAAqC,MAAM,CAAC,IAA5C,EAAkD,MAAM,CAAC,SAAP,CAAiB,YAAjB,EAAlD,EAAmF,MAAM,CAAC,IAA1F;MAEA,OAAO,IAAP;IACA,CAVD,MAUK;MACJ,OAAO,CAAC,IAAR,CAAa,8CAAb;MACA,OAAO,KAAP;IACA;EACD;;EAED,IAAI,GAAE;IACL,IAAG,KAAK,OAAL,CAAa,MAAb,GAAoB,CAApB,GAAwB,KAAK,KAAhC,EAAsC;MAErC,KAAK,KAAL;MAEA,IAAI,MAAM,GAAG,KAAK,OAAL,CAAa,KAAK,KAAlB,CAAb;MAEA,OAAO,CAAC,OAAR,CAAgB,MAAM,CAAC,IAAvB,EAA6B,IAA7B,CAAkC,IAAlC,EAAwC,MAAxC;MAEA,KAAK,gBAAL,CAAsB,aAAtB,EAAqC,MAAM,CAAC,IAA5C,EAAkD,MAAM,CAAC,SAAP,CAAiB,YAAjB,EAAlD,EAAmF,MAAM,CAAC,IAA1F;MAEA,OAAO,IAAP;IACA,CAXD,MAWK;MACJ,OAAO,CAAC,IAAR,CAAa,8CAAb;MACA,OAAO,KAAP;IACA;EACD,CAvI0B,CAyI5B;;;EACC,UAAU,CAAC,MAAD,EAAS,MAAT,EAAgB;IACzB,KAAK,OAAL,CAAa,OAAb,CAAqB,UAAS,MAAT,EAAgB;MACpC,IAAG,MAAM,CAAC,SAAP,YAA4B,GAA/B,EAAmC;QAClC,IAAG,MAAM,CAAC,SAAP,KAAqB,MAAxB,EAA+B;UAC9B,MAAM,CAAC,SAAP,GAAmB,MAAnB;QACA;MACD,CAJD,MAIM,IAAG,MAAM,CAAC,SAAP,YAA4B,IAA/B,EAAoC;QACzC,IAAG,MAAM,CAAC,SAAP,CAAiB,GAAjB,KAAyB,MAA5B,EAAmC;UAClC,IAAI,KAAK,GAAG,MAAM,CAAC,SAAP,CAAiB,MAAjB,CAAwB,QAAxB,EAAZ;;UAEA,IAAG,KAAH,EAAS;YACR,MAAM,CAAC,SAAP,GAAmB,MAAM,CAAC,OAAP,CAAe,KAAf,CAAnB;UACA;QAED;MACD;IACD,CAfD;EAgBA;;AA3J0B;;;AA8J5B,OAAO,CAAC,UAAR,GAAqB,SAArB,EAEA;;AACA,OAAO,CAAC,OAAR,GAAkB,cAAlB;AACA,OAAO,CAAC,OAAR,GAAkB,cAAlB;;ACvKA,MAAM,eAAN,SAA8B,MAA9B,CAAoC;EAEnC,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,UAAL,GAAkB,EAAlB;IACA,KAAK,QAAL,GAAgB,KAAhB;EACA;;EAED,UAAU,GAAE;IACX,KAAK,iBAAL;EACA;;EAED,iBAAiB,GAAE;IAClB,IAAG,KAAK,KAAL,CAAW,eAAX,IAA8B,KAAK,KAAL,CAAW,eAAX,CAA2B,OAA3B,KAAuC,OAAxE,EAAgF;MAC/E,IAAG,KAAK,KAAL,CAAW,eAAX,CAA2B,UAA3B,CAAsC,MAAzC,EAAgD;QAC/C,KAAK,UAAL;MACA,CAFD,MAEK;QACJ,OAAO,CAAC,IAAR,CAAa,qIAAb;MACA;IACD;EACD;;EAED,UAAU,GAAE;IACX,IAAI,OAAO,GAAG,KAAK,KAAL,CAAW,eAAzB;IAAA,IACA,OAAO,GAAG,KAAK,KAAL,CAAW,OADrB;IAAA,IAEA,OAAO,GAAG,OAAO,CAAC,oBAAR,CAA6B,IAA7B,CAFV;IAAA,IAGA,IAAI,GAAG,OAAO,CAAC,oBAAR,CAA6B,OAA7B,EAAsC,CAAtC,CAHP;IAAA,IAIA,IAAI,GAAG,EAJP;IAMA,KAAK,QAAL,GAAgB,KAAhB;IAEA,KAAK,gBAAL,CAAsB,eAAtB;IAEA,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,oBAAL,CAA0B,IAA1B,CAAH,GAAqC,EAAhD,CAXW,CAab;;IACE,KAAK,eAAL,CAAqB,OAArB,EAA8B,OAA9B;;IAEA,IAAG,OAAO,CAAC,MAAX,EAAkB;MACjB,KAAK,eAAL,CAAqB,OAArB,EAA8B,IAA9B;IACA,CAFD,MAEK;MACJ,KAAK,qBAAL,CAA2B,OAA3B,EAAoC,IAApC;IACA,CApBU,CAsBb;;;IACE,KAAI,IAAI,KAAK,GAAG,CAAhB,EAAmB,KAAK,GAAG,IAAI,CAAC,MAAhC,EAAwC,KAAK,EAA7C,EAAgD;MAC/C,IAAI,GAAG,GAAG,IAAI,CAAC,KAAD,CAAd;MAAA,IACA,KAAK,GAAG,GAAG,CAAC,oBAAJ,CAAyB,IAAzB,CADR;MAAA,IAEA,IAAI,GAAG,EAFP,CAD+C,CAKlD;;MACG,IAAG,CAAC,KAAK,QAAT,EAAkB;QACjB,IAAI,CAAC,OAAO,CAAC,KAAT,CAAJ,GAAsB,KAAtB;MACA;;MAED,KAAI,IAAI,CAAC,GAAG,CAAZ,EAAe,CAAC,GAAG,KAAK,CAAC,MAAzB,EAAiC,CAAC,EAAlC,EAAqC;QACpC,IAAI,IAAI,GAAG,KAAK,CAAC,CAAD,CAAhB;;QACA,IAAG,OAAO,KAAK,UAAL,CAAgB,CAAhB,CAAP,KAA8B,WAAjC,EAA6C;UAC5C,IAAI,CAAC,KAAK,UAAL,CAAgB,CAAhB,CAAD,CAAJ,GAA2B,IAAI,CAAC,SAAhC;QACA;MACD,CAf8C,CAiBlD;;;MACG,IAAI,CAAC,IAAL,CAAU,IAAV;IACA;;IAED,OAAO,CAAC,IAAR,GAAe,IAAf;IAEA,KAAK,gBAAL,CAAsB,cAAtB;EACA,CAtEkC,CAwEpC;;;EACC,eAAe,CAAC,OAAD,EAAU,OAAV,EAAmB,cAAnB,EAAkC;IAChD,IAAI,UAAU,GAAG,OAAO,CAAC,UAAzB;IACA,IAAI,UAAU,GAAG,cAAc,GAAG,MAAM,CAAC,IAAP,CAAY,cAAZ,CAAH,GAAiC,MAAM,CAAC,IAAP,CAAY,OAAZ,CAAhE;IACA,IAAI,WAAW,GAAG,EAAlB;IAEA,UAAU,CAAC,OAAX,CAAoB,IAAD,IAAU;MAC5B,WAAW,CAAC,IAAI,CAAC,WAAL,EAAD,CAAX,GAAkC,IAAlC;IACA,CAFD;;IAIA,KAAI,IAAI,KAAR,IAAiB,UAAjB,EAA4B;MAC3B,IAAI,MAAM,GAAG,UAAU,CAAC,KAAD,CAAvB;MACA,IAAI,IAAJ;;MAEA,IAAG,MAAM,IAAI,OAAO,MAAP,IAAiB,QAA3B,IAAuC,MAAM,CAAC,IAA9C,IAAsD,MAAM,CAAC,IAAP,CAAY,OAAZ,CAAoB,YAApB,MAAsC,CAA/F,EAAiG;QAChG,IAAI,GAAG,MAAM,CAAC,IAAP,CAAY,OAAZ,CAAoB,YAApB,EAAkC,EAAlC,CAAP;;QAEA,IAAG,OAAO,WAAW,CAAC,IAAD,CAAlB,KAA6B,WAAhC,EAA4C;UAC3C,OAAO,CAAC,WAAW,CAAC,IAAD,CAAZ,CAAP,GAA6B,KAAK,YAAL,CAAkB,MAAM,CAAC,KAAzB,CAA7B;QACA;MACD;IACD;EACD,CA9FkC,CAgGpC;;;EACC,YAAY,CAAC,KAAD,EAAO;IAClB,IAAG,KAAK,KAAK,MAAb,EAAoB;MACnB,OAAO,IAAP;IACA;;IAED,IAAG,KAAK,KAAK,OAAb,EAAqB;MACpB,OAAO,KAAP;IACA;;IAED,OAAO,KAAP;EACA,CA3GkC,CA6GpC;;;EACC,QAAQ,CAAC,KAAD,EAAO;IACd,IAAI,KAAK,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,CAA2B,IAA3B,CAAiC,MAAD,IAAY;MACvD,OAAO,MAAM,CAAC,KAAP,KAAiB,KAAxB;IACA,CAFW,CAAZ;IAIA,OAAO,KAAK,IAAI,KAAhB;EACA,CApHkC,CAsHpC;;;EACC,eAAe,CAAC,OAAD,EAAU,IAAV,EAAe;IAC7B,KAAI,IAAI,KAAK,GAAG,CAAhB,EAAmB,KAAK,GAAG,OAAO,CAAC,MAAnC,EAA2C,KAAK,EAAhD,EAAmD;MAClD,IAAI,MAAM,GAAG,OAAO,CAAC,KAAD,CAApB;MAAA,IACA,MAAM,GAAG,KADT;MAAA,IAEA,GAAG,GAAG,KAAK,QAAL,CAAc,MAAM,CAAC,WAArB,CAFN;MAAA,IAGA,KAHA;;MAKA,IAAG,GAAH,EAAO;QACN,MAAM,GAAG,IAAT;MACA,CAFD,MAEK;QACJ,GAAG,GAAG;UAAC,KAAK,EAAC,MAAM,CAAC,WAAP,CAAmB,IAAnB;QAAP,CAAN;MACA;;MAED,IAAG,CAAC,GAAG,CAAC,KAAR,EAAe;QACd,GAAG,CAAC,KAAJ,GAAY,MAAM,CAAC,WAAP,CAAmB,IAAnB,GAA0B,WAA1B,GAAwC,OAAxC,CAAgD,GAAhD,EAAqD,GAArD,CAAZ;MACA;;MAED,KAAK,GAAG,MAAM,CAAC,YAAP,CAAoB,OAApB,CAAR;;MAEA,IAAG,KAAK,IAAI,CAAC,GAAG,CAAC,KAAjB,EAAwB;QACvB,GAAG,CAAC,KAAJ,GAAY,KAAZ;MACA,CApBiD,CAsBrD;;;MACG,KAAK,eAAL,CAAqB,MAArB,EAA6B,GAA7B,EAAkC,KAAK,KAAL,CAAW,aAAX,CAAyB,WAAzB,CAAqC,kBAAvE;;MAEA,KAAK,UAAL,CAAgB,KAAhB,IAAyB,GAAG,CAAC,KAA7B;;MAEA,IAAG,GAAG,CAAC,KAAJ,IAAa,KAAK,KAAL,CAAW,OAAX,CAAmB,KAAnC,EAAyC;QACxC,KAAK,QAAL,GAAgB,IAAhB;MACA;;MAED,IAAG,CAAC,MAAJ,EAAW;QACV,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,CAA2B,IAA3B,CAAgC,GAAhC;MACA;IAED;EACD,CA5JkC,CA8JpC;;;EACC,qBAAqB,CAAC,OAAD,EAAU,IAAV,EAAe;IACnC,KAAI,IAAI,KAAK,GAAG,CAAhB,EAAmB,KAAK,GAAG,OAAO,CAAC,MAAnC,EAA2C,KAAK,EAAhD,EAAmD;MAClD,IAAI,MAAM,GAAG,OAAO,CAAC,KAAD,CAApB;MAAA,IACA,GAAG,GAAG;QAAC,KAAK,EAAC,EAAP;QAAW,KAAK,EAAC,QAAQ;MAAzB,CADN;MAGA,KAAK,UAAL,CAAgB,KAAhB,IAAyB,GAAG,CAAC,KAA7B;MAEA,IAAI,KAAK,GAAG,MAAM,CAAC,YAAP,CAAoB,OAApB,CAAZ;;MAEA,IAAG,KAAH,EAAS;QACR,GAAG,CAAC,KAAJ,GAAY,KAAZ;MACA;;MAED,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,CAA2B,IAA3B,CAAgC,GAAhC;IACA;EACD;;AA9KkC;;;AAiLpC,eAAe,CAAC,UAAhB,GAA6B,iBAA7B;;ACnLA,SAAS,WAAT,CAAqB,KAArB,EAA2B;EAC1B,IAAI,IAAI,GAAG,EAAX;EAAA,IACA,GAAG,GAAG,CADN;EAAA,IAEA,GAAG,GAAG,CAFN;EAAA,IAGA,OAAO,GAAG,KAHV,CAD0B,CAM3B;;EACC,KAAK,IAAI,KAAK,GAAG,CAAjB,EAAoB,KAAK,GAAG,KAAK,CAAC,MAAlC,EAA0C,KAAK,EAA/C,EAAmD;IAClD,IAAI,IAAI,GAAG,KAAK,CAAC,KAAD,CAAhB;IAAA,IACA,QAAQ,GAAG,KAAK,CAAC,KAAK,GAAC,CAAP,CADhB,CADkD,CAIpD;;IACE,IAAG,CAAC,IAAI,CAAC,GAAD,CAAR,EAAc;MACb,IAAI,CAAC,GAAD,CAAJ,GAAY,EAAZ;IACA,CAPiD,CASpD;;;IACE,IAAG,CAAC,IAAI,CAAC,GAAD,CAAJ,CAAU,GAAV,CAAJ,EAAmB;MAClB,IAAI,CAAC,GAAD,CAAJ,CAAU,GAAV,IAAiB,EAAjB;IACA,CAZiD,CAcpD;;;IACE,IAAI,IAAI,IAAI,GAAR,IAAe,OAAf,IAA0B,QAAQ,IAAI,GAA1C,EAA+C;MAC9C,IAAI,CAAC,GAAD,CAAJ,CAAU,GAAV,KAAkB,IAAlB;MACA,KAAK;MACL;IACA,CAnBiD,CAqBpD;;;IACE,IAAI,IAAI,IAAI,GAAZ,EAAiB;MAChB,OAAO,GAAG,CAAC,OAAX;MACA;IACA,CAzBiD,CA2BpD;;;IACE,IAAI,IAAI,IAAI,GAAR,IAAe,CAAC,OAApB,EAA6B;MAC5B,GAAG;MACH;IACA,CA/BiD,CAiCpD;;;IACE,IAAI,IAAI,IAAI,IAAR,IAAgB,QAAQ,IAAI,IAA5B,IAAoC,CAAC,OAAzC,EAAkD;MACjD,GAAG,GAAG,CAAN;MACA,GAAG;MACH,KAAK;MACL;IACA,CAvCiD,CAyCpD;;;IACE,IAAI,CAAC,IAAI,IAAI,IAAR,IAAgB,IAAI,IAAI,IAAzB,KAAkC,CAAC,OAAvC,EAAgD;MAC/C,GAAG,GAAG,CAAN;MACA,GAAG;MACH;IACA,CA9CiD,CAgDpD;;;IACE,IAAI,CAAC,GAAD,CAAJ,CAAU,GAAV,KAAkB,IAAlB;EACA;;EAED,OAAO,IAAP;AACD;;AC5De,SAAA,MAAA,CAAS,KAAT,EAAe;EAC7B,IAAI;IACH,OAAO,IAAI,CAAC,KAAL,CAAW,KAAX,CAAP;EACA,CAFD,CAEE,OAAM,CAAN,EAAS;IACV,OAAO,CAAC,IAAR,CAAa,mDAAb,EAAkE,CAAlE;IACA,OAAO,OAAO,CAAC,MAAR,EAAP;EACA;AACF;;ACPA,SAAS,aAAT,CAAuB,KAAvB,EAA6B;EAC5B,OAAO,KAAP;AACD;;ACEA,IAAA,gBAAA,GAAe;EACd,GAAG,EAACC,WADU;EAEd,IAAI,EAACC,MAFS;EAGd,KAAK,EAAChO;AAHQ,CAAf;;ACAA,MAAM,MAAN,SAAqB,MAArB,CAA2B;EAE1B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,mBAAL,CAAyB,cAAzB;IACA,KAAK,mBAAL,CAAyB,cAAzB,EAAyC,MAAzC;EACA;;EAED,UAAU,GAAE;IACX,KAAK,qBAAL,CAA2B,QAA3B,EAAqC,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAArC;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAtB,EAAmC;MAClC,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAA/B,EAA8D,EAA9D;MACA,KAAK,SAAL,CAAe,WAAf,EAA4B,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAA5B,EAAsD,EAAtD;IACA;EACD;;EAED,aAAa,CAAC,IAAD,EAAM;IAClB,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAnB,KAAoC,OAAO,IAAP,KAAgB,QAAhB,IAA6B,KAAK,CAAC,OAAN,CAAc,IAAd,KAAuB,IAAI,CAAC,MAA5B,IAAsC,KAAK,CAAC,OAAN,CAAc,IAAd,CAAvG,CAAP;EACA;;EAED,QAAQ,CAAC,IAAD,EAAO,MAAP,EAAe,MAAf,EAAuB,MAAvB,EAA+B,YAA/B,EAA4C;IACnD,OAAO,KAAK,UAAL,CAAgB,KAAK,cAAL,EAAhB,EAAuC,IAAvC,EACL,IADK,CACA,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CADA,EAEL,KAFK,CAEE,GAAD,IAAS;MACf,OAAO,CAAC,KAAR,CAAc,eAAd,EAA+B,GAAG,IAAI,uBAAtC;MACA,OAAO,OAAO,CAAC,MAAR,CAAe,GAAf,CAAP;IACA,CALK,CAAP;EAMA;;EAED,cAAc,CAAC,YAAD,EAAc;IAC3B,IAAI,QAAJ;;IAEA,IAAG,CAAC,YAAJ,EAAiB;MAChB,YAAY,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAlC;IACA;;IAED,IAAG,OAAO,YAAP,KAAwB,QAA3B,EAAoC;MACnC,QAAQ,GAAG,MAAM,CAAC,SAAP,CAAiB,YAAjB,CAAX;IACA,CAFD,MAEK;MACJ,QAAQ,GAAG,YAAX;IACA;;IAED,IAAG,CAAC,QAAJ,EAAa;MACZ,OAAO,CAAC,KAAR,CAAc,oCAAd,EAAoD,YAApD;IACA;;IAED,OAAO,QAAP;EACA;;EAED,cAAc,CAAC,YAAD,EAAe,SAAf,EAAyB;IACtC,IAAI,QAAQ,GAAG,KAAK,cAAL,CAAoB,YAApB,CAAf;;IAEA,IAAG,QAAH,EAAY;MACX,OAAO,KAAK,QAAL,CAAc,SAAd,EACL,IADK,CACA,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,EAA2B,QAA3B,CADA,EAEL,IAFK,CAEA,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAFA,EAGL,IAHK,CAGA,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAHA,EAIL,KAJK,CAIE,GAAD,IAAS;QACf,OAAO,CAAC,KAAR,CAAc,eAAd,EAA+B,GAAG,IAAI,uBAAtC;QACA,OAAO,OAAO,CAAC,MAAR,CAAe,GAAf,CAAP;MACA,CAPK,CAAP;IAQA;EACD;;EAED,QAAQ,CAAC,UAAD,EAAY;IACnB,OAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAqB;MACvC,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAZ;MACA,KAAK,CAAC,IAAN,GAAa,MAAb;MACA,KAAK,CAAC,MAAN,GAAe,UAAf;MAEA,KAAK,CAAC,gBAAN,CAAuB,QAAvB,EAAkC,CAAD,IAAO;QACvC,IAAI,IAAI,GAAG,KAAK,CAAC,KAAN,CAAY,CAAZ,CAAX;QAAA,IACA,MAAM,GAAG,IAAI,UAAJ,EADT;;QAGA,QAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,YAA1B;UACC,KAAK,QAAL;YACC,MAAM,CAAC,iBAAP,CAAyB,IAAzB;YACA;;UAED,KAAK,QAAL;YACC,MAAM,CAAC,kBAAP,CAA0B,IAA1B;YACA;;UAED,KAAK,KAAL;YACC,MAAM,CAAC,aAAP,CAAqB,IAArB;YACA;;UAED,KAAK,MAAL;UACA;YACC,MAAM,CAAC,UAAP,CAAkB,IAAlB;QAfF;;QAkBA,MAAM,CAAC,MAAP,GAAiB,CAAD,IAAO;UACtB,OAAO,CAAC,MAAM,CAAC,MAAR,CAAP;QACA,CAFD;;QAIA,MAAM,CAAC,OAAP,GAAkB,CAAD,IAAO;UACvB,OAAO,CAAC,IAAR,CAAa,uCAAb;UACA,MAAM;QACN,CAHD;MAIA,CA9BD;MAgCA,KAAK,CAAC,KAAN;IACA,CAtCM,CAAP;EAuCA;;EAED,UAAU,CAAC,QAAD,EAAW,YAAX,EAAwB;IACjC,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAT,CAAc,KAAK,KAAnB,EAA0B,YAA1B,CAAX;;IAEA,IAAG,IAAI,YAAY,OAAnB,EAA2B;MAC1B,OAAO,IAAP;IACA,CAFD,MAEK;MACJ,OAAO,IAAI,GAAG,OAAO,CAAC,OAAR,CAAgB,IAAhB,CAAH,GAA2B,OAAO,CAAC,MAAR,EAAtC;IACA;EACD;;EAED,aAAa,CAAC,UAAD,EAAY;IACxB,IAAI,IAAI,GAAG,EAAX;;IAEA,IAAG,KAAK,CAAC,OAAN,CAAc,UAAd,KAA6B,UAAU,CAAC,MAAxC,IAAkD,KAAK,CAAC,OAAN,CAAc,UAAU,CAAC,CAAD,CAAxB,CAArD,EAAkF;MACjF,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAtB,EAAkC;QACjC,IAAI,GAAG,KAAK,sBAAL,CAA4B,UAA5B,CAAP;MACA,CAFD,MAEK;QACJ,IAAI,GAAG,KAAK,uBAAL,CAA6B,UAA7B,CAAP;MACA;;MAED,OAAO,IAAP;IACA,CARD,MAQK;MACJ,OAAO,UAAP;IACA;EACD;;EAED,sBAAsB,CAAC,UAAD,EAAY;IACjC,IAAI,OAAO,GAAG,UAAU,CAAC,KAAX,EAAd;IAEA,IAAI,IAAI,GAAG,UAAU,CAAC,GAAX,CAAgB,MAAD,IAAY;MACrC,IAAI,GAAG,GAAG,EAAV;MAEA,OAAO,CAAC,OAAR,CAAgB,CAAC,GAAD,EAAM,CAAN,KAAY;QAC3B,GAAG,CAAC,GAAD,CAAH,GAAW,MAAM,CAAC,CAAD,CAAjB;MACA,CAFD;MAIA,OAAO,GAAP;IACA,CARU,CAAX;IAUA,OAAO,IAAP;EACA;;EAED,uBAAuB,CAAC,UAAD,EAAY;IAClC,IAAI,IAAI,GAAG,EAAX;IAAA,IACA,OAAO,GAAG,KAAK,KAAL,CAAW,UAAX,EADV,CADkC,CAIpC;;IACE,IAAG,OAAO,CAAC,CAAD,CAAP,IAAc,UAAU,CAAC,CAAD,CAAV,CAAc,CAAd,CAAjB,EAAkC;MACjC,IAAG,OAAO,CAAC,CAAD,CAAP,CAAW,aAAX,GAA2B,KAA3B,KAAqC,UAAU,CAAC,CAAD,CAAV,CAAc,CAAd,CAAxC,EAAyD;QACxD,UAAU,CAAC,KAAX;MACA;IACD,CATiC,CAWpC;;;IACE,UAAU,CAAC,OAAX,CAAoB,OAAD,IAAa;MAC/B,IAAI,GAAG,GAAG,EAAV;MAEA,OAAO,CAAC,OAAR,CAAgB,CAAC,KAAD,EAAQ,KAAR,KAAkB;QACjC,IAAI,MAAM,GAAG,OAAO,CAAC,KAAD,CAApB;;QAEA,IAAG,MAAH,EAAU;UACT,GAAG,CAAC,MAAM,CAAC,QAAP,EAAD,CAAH,GAAyB,KAAzB;QACA;MACD,CAND;MAQA,IAAI,CAAC,IAAL,CAAU,GAAV;IACA,CAZD;IAcA,OAAO,IAAP;EACA;;EAED,OAAO,CAAC,IAAD,EAAM;IACZ,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAP;EACA;;AArLyB;;;AAwL3B,MAAM,CAAC,UAAP,GAAoB,QAApB,EAEA;;AACA,MAAM,CAAC,SAAP,GAAmB,gBAAnB;;AC1LA,MAAM,WAAN,SAA0B,MAA1B,CAAgC;EAE/B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,QAAL,GAAgB;MAClB;MACG,QAAQ,EAAC,WAFM;MAGf,WAAW,EAAC,cAHG;MAIf,UAAU,EAAC,iBAJI;MAKf,aAAa,EAAC,gBALC;MAMf,aAAa,EAAC,gBANC;MAOf,YAAY,EAAC,eAPE;MAQf,WAAW,EAAC,cARG;MASf,YAAY,EAAC,eATE;MAUf,MAAM,EAAC,KAVQ;MAWf,SAAS,EAAC,KAXK;MAYf,UAAU,EAAC,KAZI;MAclB;MACG,SAAS,EAAC,YAfK;MAgBf,YAAY,EAAC,eAhBE;MAiBf,WAAW,EAAC,kBAjBG;MAkBf,cAAc,EAAC,iBAlBA;MAmBf,cAAc,EAAC,iBAnBA;MAoBf,aAAa,EAAC,gBApBC;MAqBf,YAAY,EAAC,eArBE;MAsBf,aAAa,EAAC,gBAtBC;MAuBf,OAAO,EAAC,MAvBO;MAwBf,UAAU,EAAC,MAxBI;MAyBf,WAAW,EAAC,MAzBG;MA2BlB;MACG,WAAW,EAAC,cA5BG;MA6Bf,cAAc,EAAC,iBA7BA;MA8Bf,aAAa,EAAC,oBA9BC;MA+Bf,gBAAgB,EAAC,mBA/BF;MAgCf,gBAAgB,EAAC,mBAhCF;MAiCf,eAAe,EAAC,kBAjCD;MAkCf,cAAc,EAAC,iBAlCA;MAmCf,eAAe,EAAC,kBAnCD;MAoCf,SAAS,EAAC,QApCK;MAqCf,YAAY,EAAC,QArCE;MAsCf,aAAa,EAAC,QAtCC;MAwClB;MACG,UAAU,EAAC,aAzCI;MA0Cf,aAAa,EAAC,gBA1CC;MA2Cf,YAAY,EAAC,mBA3CE;MA4Cf,eAAe,EAAC,kBA5CD;MA6Cf,eAAe,EAAC,kBA7CD;MA8Cf,cAAc,EAAC,iBA9CA;MA+Cf,aAAa,EAAC,gBA/CC;MAgDf,cAAc,EAAC,iBAhDA;MAiDf,QAAQ,EAAC,OAjDM;MAkDf,WAAW,EAAC,OAlDG;MAmDf,YAAY,EAAC;IAnDE,CAAhB;IAsDA,KAAK,WAAL,GAAmB,EAAnB;IAEA,KAAK,gBAAL,GAAwB,EAAxB;IAEA,KAAK,iBAAL,GAAyB,EAAzB;IAEA,KAAK,aAAL,GAAqB;MACpB,GAAG,EAAC;QACH,GAAG,EAAC,IADD;QAEH,MAAM,EAAC,IAFJ;QAGH,OAAO,EAAC;MAHL,CADgB;MAMpB,IAAI,EAAC;QACJ,GAAG,EAAC,IADA;QAEJ,MAAM,EAAC,IAFH;QAGJ,OAAO,EAAC;MAHJ,CANe;MAWpB,MAAM,EAAC;QACN,GAAG,EAAC,IADE;QAEN,MAAM,EAAC,IAFD;QAGN,OAAO,EAAC;MAHF,CAXa;MAgBpB,KAAK,EAAC;QACL,GAAG,EAAC,IADC;QAEL,MAAM,EAAC,IAFF;QAGL,OAAO,EAAC;MAHH;IAhBc,CAArB;IAuBA,KAAK,oBAAL,CAA0B,aAA1B;IACA,KAAK,oBAAL,CAA0B,gBAA1B;IACA,KAAK,oBAAL,CAA0B,eAA1B;IACA,KAAK,oBAAL,CAA0B,kBAA1B;IACA,KAAK,oBAAL,CAA0B,kBAA1B;IACA,KAAK,oBAAL,CAA0B,iBAA1B;IACA,KAAK,oBAAL,CAA0B,gBAA1B;IACA,KAAK,oBAAL,CAA0B,iBAA1B;IACA,KAAK,oBAAL,CAA0B,WAA1B;IACA,KAAK,oBAAL,CAA0B,cAA1B;IACA,KAAK,oBAAL,CAA0B,eAA1B;IAEA,KAAK,oBAAL,CAA0B,WAA1B;IACA,KAAK,oBAAL,CAA0B,cAA1B;IACA,KAAK,oBAAL,CAA0B,aAA1B;IACA,KAAK,oBAAL,CAA0B,gBAA1B;IACA,KAAK,oBAAL,CAA0B,gBAA1B;IACA,KAAK,oBAAL,CAA0B,eAA1B;IACA,KAAK,oBAAL,CAA0B,cAA1B;IACA,KAAK,oBAAL,CAA0B,eAA1B;IACA,KAAK,oBAAL,CAA0B,SAA1B;IACA,KAAK,oBAAL,CAA0B,YAA1B;IACA,KAAK,oBAAL,CAA0B,aAA1B;EAEA;;EAED,UAAU,GAAE;IACX,KAAK,wBAAL;IAEA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA9B;IACA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,0BAAL,CAAgC,IAAhC,CAAqC,IAArC,CAAhC;EACA;;EAED,0BAA0B,CAAC,CAAD,EAAI,IAAJ,EAAS;IAClC,IAAI,KAAJ;;IAEA,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,MAArB,CAAH,EAAgC;MAC/B,IAAI,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,WAAxB,KAAwC,IAA5C,EAAiD;QAChD,OADgD,CACzC;MACP;IACD;;IAED,CAAC,CAAC,cAAF;;IAEA,IAAG;MACF,IAAI,QAAQ,CAAC,SAAb,EAAwB;QAAA;QACvB,KAAK,GAAG,QAAQ,CAAC,IAAT,CAAc,eAAd,EAAR;QACA,KAAK,CAAC,iBAAN,CAAwB,IAAI,CAAC,UAAL,EAAxB;QACA,KAAK,CAAC,MAAN;MACA,CAJD,MAIO,IAAI,MAAM,CAAC,YAAX,EAAyB;QAC/B,KAAK,GAAG,QAAQ,CAAC,WAAT,EAAR;QACA,KAAK,CAAC,UAAN,CAAiB,IAAI,CAAC,UAAL,EAAjB;QACA,MAAM,CAAC,YAAP,GAAsB,eAAtB;QACA,MAAM,CAAC,YAAP,GAAsB,QAAtB,CAA+B,KAA/B;MACA;IACD,CAXD,CAWC,OAAM,CAAN,EAAQ,CAAE;EACX;;EAED,wBAAwB,GAAE;IACzB,KAAI,IAAI,GAAR,IAAe,KAAK,QAApB,EAA6B;MAC5B,KAAK,0BAAL,CAAgC,GAAhC,EAAqC,KAAK,mBAAL,CAAyB,IAAzB,CAA8B,IAA9B,EAAoC,GAApC,CAArC;IACA;EACD;;EAED,mBAAmB,CAAC,GAAD,EAAM,KAAN,EAAY;IAC9B,IAAG,KAAH,EAAS;MACR,IAAG,CAAC,KAAK,WAAL,CAAiB,GAAjB,CAAJ,EAA0B;QACzB,IAAG,KAAK,QAAL,CAAc,GAAd,EAAmB,QAAnB,CAA4B,GAA5B,CAAH,EAAoC;UACnC,KAAK,WAAL,CAAiB,GAAjB,IAAwB,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,EAAuB,GAAvB,CAAxB;UACA,KAAK,SAAL,CAAe,KAAK,QAAL,CAAc,GAAd,CAAf,EAAmC,KAAK,WAAL,CAAiB,GAAjB,CAAnC;QACA,CAHD,MAGK;UACJ,KAAK,oBAAL,CAA0B,GAA1B;QACA;MACD;IACD,CATD,MASK;MACJ,IAAG,KAAK,QAAL,CAAc,GAAd,EAAmB,QAAnB,CAA4B,GAA5B,CAAH,EAAoC;QACnC,IAAG,KAAK,WAAL,CAAiB,GAAjB,KAAyB,CAAC,KAAK,iBAAL,CAAuB,GAAvB,CAA1B,IAA0D,CAAC,KAAK,kBAAL,CAAwB,GAAxB,CAA9D,EAA2F;UAC1F,KAAK,WAAL,CAAiB,KAAK,QAAL,CAAc,GAAd,CAAjB,EAAqC,KAAK,WAAL,CAAiB,GAAjB,CAArC;UACA,OAAO,KAAK,WAAL,CAAiB,GAAjB,CAAP;QACA;MACD,CALD,MAKK;QACJ,KAAK,sBAAL,CAA4B,GAA5B;MACA;IACD;EACD;;EAGD,oBAAoB,CAAC,GAAD,EAAK;IACxB,IAAI,IAAI,GAAG,KAAK,QAAL,CAAc,GAAd,CAAX;;IAEA,IAAG,CAAC,KAAK,gBAAL,CAAsB,IAAI,GAAG,aAA7B,CAAJ,EAAgD;MAC/C,KAAK,gBAAL,CAAsB,IAAI,GAAG,aAA7B,IAA8C,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,EAA4B,IAA5B,EAAkC,OAAlC,CAA9C;MACA,KAAK,gBAAL,CAAsB,IAAI,GAAG,WAA7B,IAA4C,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,EAA4B,IAA5B,EAAkC,KAAlC,CAA5C;MAEA,KAAK,SAAL,CAAe,IAAI,GAAG,aAAtB,EAAqC,KAAK,gBAAL,CAAsB,IAAI,GAAG,aAA7B,CAArC;MACA,KAAK,SAAL,CAAe,IAAI,GAAG,WAAtB,EAAmC,KAAK,gBAAL,CAAsB,IAAI,GAAG,WAA7B,CAAnC;IACA;;IAED,KAAK,WAAL,CAAiB,GAAjB,IAAwB,IAAxB;EACA;;EAED,sBAAsB,CAAC,GAAD,EAAK;IAC1B,IAAI,OAAO,GAAG,IAAd;IAAA,IACA,IAAI,GAAG,KAAK,QAAL,CAAc,GAAd,CADP;;IAGA,IAAG,KAAK,WAAL,CAAiB,GAAjB,KAAyB,CAAC,KAAK,kBAAL,CAAwB,GAAxB,CAA7B,EAA0D;MACzD,OAAO,KAAK,WAAL,CAAiB,GAAjB,CAAP;;MAEA,KAAI,IAAI,CAAR,IAAa,KAAK,QAAlB,EAA2B;QAC1B,IAAG,KAAK,QAAL,CAAc,CAAd,MAAqB,IAAxB,EAA6B;UAC5B,IAAG,KAAK,WAAL,CAAiB,CAAjB,CAAH,EAAuB;YACtB,OAAO,GAAG,KAAV;UACA;QACD;MACD;;MAED,IAAG,OAAH,EAAW;QACV,KAAK,WAAL,CAAiB,IAAI,GAAG,aAAxB,EAAuC,KAAK,gBAAL,CAAsB,IAAI,GAAG,aAA7B,CAAvC;QACA,KAAK,WAAL,CAAiB,IAAI,GAAG,WAAxB,EAAqC,KAAK,gBAAL,CAAsB,IAAI,GAAG,WAA7B,CAArC;QAEA,OAAO,KAAK,gBAAL,CAAsB,IAAI,GAAG,aAA7B,CAAP;QACA,OAAO,KAAK,gBAAL,CAAsB,IAAI,GAAG,WAA7B,CAAP;MACA;IACD;EACD;;EAED,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAI,GAAG,GAAG,MAAM,CAAC,UAAjB;;IAEA,KAAI,IAAI,GAAR,IAAe,KAAK,QAApB,EAA6B;MAC5B,IAAG,GAAG,CAAC,GAAD,CAAN,EAAY;QACX,KAAK,mBAAL,CAAyB,GAAzB,EAA8B,IAA9B;;QAEA,IAAG,CAAC,KAAK,iBAAL,CAAuB,GAAvB,CAAJ,EAAgC;UAC/B,KAAK,iBAAL,CAAuB,GAAvB,IAA8B,EAA9B;QACA;;QAED,KAAK,iBAAL,CAAuB,GAAvB,EAA4B,IAA5B,CAAiC,MAAjC;MACA;IACD;EACD;;EAED,MAAM,CAAC,MAAD,EAAS,CAAT,EAAY,SAAZ,EAAsB;IAC3B,KAAK,aAAL,CAAmB,MAAnB,EAA2B,CAA3B,EAA8B,SAA9B;EACA;;EAED,WAAW,CAAC,IAAD,EAAO,MAAP,EAAe,CAAf,EAAkB,SAAlB,EAA4B;IACtC,IAAI,QAAQ,GAAG,KAAK,aAAL,CAAmB,IAAnB,CAAf;;IAEA,IAAG,IAAI,KAAK,QAAZ,EAAqB;MACpB,IAAI,GAAG,QAAP;IACA;;IAED,QAAO,MAAP;MACC,KAAK,OAAL;QACC,QAAQ,CAAC,GAAT,GAAe,IAAf;QAEA,YAAY,CAAC,QAAQ,CAAC,OAAV,CAAZ;QAEA,QAAQ,CAAC,OAAT,GAAmB,UAAU,CAAC,MAAM;UACnC,YAAY,CAAC,QAAQ,CAAC,OAAV,CAAZ;UACA,QAAQ,CAAC,OAAT,GAAmB,IAAnB;UAEA,QAAQ,CAAC,GAAT,GAAe,IAAf;UACA,YAAY,CAAC,QAAQ,CAAC,MAAV,CAAZ;UACA,QAAQ,CAAC,MAAT,GAAkB,IAAlB;UAEA,KAAK,aAAL,CAAmB,IAAI,GAAG,SAA1B,EAAqC,CAArC,EAAyC,SAAzC;QACA,CAT4B,EAS1B,IAT0B,CAA7B;QAUA;;MAED,KAAK,KAAL;QACC,IAAG,QAAQ,CAAC,GAAZ,EAAgB;UAEf,QAAQ,CAAC,GAAT,GAAe,IAAf;UACA,KAAK,aAAL,CAAmB,IAAI,GAAG,KAA1B,EAAiC,CAAjC,EAAqC,SAArC;QACA;;QAED,IAAG,QAAQ,CAAC,MAAZ,EAAmB;UAClB,YAAY,CAAC,QAAQ,CAAC,MAAV,CAAZ;UACA,QAAQ,CAAC,MAAT,GAAkB,IAAlB;UAEA,KAAK,aAAL,CAAmB,IAAI,GAAG,QAA1B,EAAoC,CAApC,EAAwC,SAAxC;QACA,CALD,MAKK;UACJ,QAAQ,CAAC,MAAT,GAAkB,UAAU,CAAC,MAAM;YAClC,YAAY,CAAC,QAAQ,CAAC,MAAV,CAAZ;YACA,QAAQ,CAAC,MAAT,GAAkB,IAAlB;UACA,CAH2B,EAGzB,GAHyB,CAA5B;QAIA;;QAED,YAAY,CAAC,QAAQ,CAAC,OAAV,CAAZ;QACA,QAAQ,CAAC,OAAT,GAAmB,IAAnB;QACA;IAvCF;EAyCA;;EAED,aAAa,CAAC,MAAD,EAAS,CAAT,EAAY,SAAZ,EAAsB;IAClC,IAAI,YAAY,GAAG,SAAS,CAAC,YAAV,EAAnB;IAAA,IACA,QADA;;IAGA,IAAG,KAAK,iBAAL,CAAuB,MAAvB,CAAH,EAAkC;MAEjC,IAAG,SAAS,YAAY,IAAxB,EAA6B;QAC5B,QAAQ,GAAG,SAAS,CAAC,MAAV,CAAiB,UAAjB,CAA4B,MAA5B,CAAX;MACA,CAFD,MAEM,IAAG,SAAS,YAAY,MAAxB,EAA+B;QACpC,QAAQ,GAAG,SAAS,CAAC,UAAV,CAAqB,MAArB,CAAX;MACA;;MAED,IAAG,QAAH,EAAY;QACX,QAAQ,CAAC,CAAD,EAAI,YAAJ,CAAR;MACA;IACD;;IAED,KAAK,gBAAL,CAAsB,MAAtB,EAA8B,CAA9B,EAAiC,YAAjC;EACA;;AA9S8B;;;AAiThC,WAAW,CAAC,UAAZ,GAAyB,aAAzB;ACtTA,IAAA,eAAA,GAAe;EACd,OAAO,EAAC,WADM;EAEd,OAAO,EAAC,CAFM;EAGd,KAAK,EAAC,EAHQ;EAId,OAAO,EAAC,EAJM;EAKd,YAAY,EAAC,EALC;EAMd,cAAc,EAAC,EAND;EAOd,aAAa,EAAC,EAPA;EAQd,WAAW,EAAC,EARE;EASd,IAAI,EAAC,CAAC,WAAD,EAAc,WAAd,CATS;EAUd,IAAI,EAAC,CAAC,WAAD,EAAc,WAAd,CAVS;EAWd,eAAe,EAAC,CAAC,WAAD,EAAc,WAAd;AAXF,CAAf;ACAA,IAAA,cAAA,GAAe;EACd,QAAQ,EAAC,UAAS,CAAT,EAAW;IACnB,CAAC,CAAC,eAAF;IACA,CAAC,CAAC,cAAF;EACA,CAJa;EAKd,YAAY,EAAC,UAAS,CAAT,EAAW;IACvB,IAAI,UAAU,GAAG,KAAK,KAAL,CAAW,UAA5B;IAAA,IACA,MAAM,GAAG,UAAU,CAAC,SAAX,GAAuB,UAAU,CAAC,OAAX,CAAmB,YADnD;IAGA,CAAC,CAAC,cAAF;;IAEA,IAAG,UAAU,CAAC,gBAAd,EAA+B;MAC9B,IAAG,MAAM,IAAI,CAAb,EAAe;QACd,UAAU,CAAC,OAAX,CAAmB,SAAnB,GAA+B,MAA/B;MACA,CAFD,MAEK;QACJ,UAAU,CAAC,WAAX,CAAuB,UAAU,CAAC,cAAX,GAA4B,CAA5B,CAAvB;MACA;IACD;;IAED,KAAK,KAAL,CAAW,OAAX,CAAmB,KAAnB;EACA,CApBa;EAqBd,cAAc,EAAC,UAAS,CAAT,EAAW;IACzB,IAAI,UAAU,GAAG,KAAK,KAAL,CAAW,UAA5B;IAAA,IACA,MAAM,GAAG,UAAU,CAAC,SAAX,GAAuB,UAAU,CAAC,OAAX,CAAmB,YADnD;IAAA,IAEA,SAAS,GAAG,UAAU,CAAC,OAAX,CAAmB,YAF/B;IAIA,CAAC,CAAC,cAAF;;IAEA,IAAG,UAAU,CAAC,gBAAd,EAA+B;MAC9B,IAAG,MAAM,IAAI,SAAb,EAAuB;QACtB,UAAU,CAAC,OAAX,CAAmB,SAAnB,GAA+B,MAA/B;MACA,CAFD,MAEK;QACJ,UAAU,CAAC,WAAX,CAAuB,UAAU,CAAC,cAAX,GAA4B,UAAU,CAAC,gBAAX,GAA8B,CAA1D,CAAvB;MACA;IACD;;IAED,KAAK,KAAL,CAAW,OAAX,CAAmB,KAAnB;EAEA,CAtCa;EAuCd,aAAa,EAAC,UAAS,CAAT,EAAW;IACxB,IAAI,UAAU,GAAG,KAAK,KAAL,CAAW,UAA5B;IAEA,CAAC,CAAC,cAAF;;IAEA,IAAG,UAAU,CAAC,gBAAd,EAA+B;MAC9B,UAAU,CAAC,WAAX,CAAuB,UAAU,CAAC,cAAX,GAA4B,CAA5B,CAAvB;IACA;;IAED,KAAK,KAAL,CAAW,OAAX,CAAmB,KAAnB;EACA,CAjDa;EAkDd,WAAW,EAAC,UAAS,CAAT,EAAW;IACtB,IAAI,UAAU,GAAG,KAAK,KAAL,CAAW,UAA5B;IAEA,CAAC,CAAC,cAAF;;IAEA,IAAG,UAAU,CAAC,gBAAd,EAA+B;MAC9B,UAAU,CAAC,WAAX,CAAuB,UAAU,CAAC,cAAX,GAA4B,UAAU,CAAC,gBAAX,GAA8B,CAA1D,CAAvB;IACA;;IAED,KAAK,KAAL,CAAW,OAAX,CAAmB,KAAnB;EACA,CA5Da;EA6Dd,OAAO,EAAC,UAAS,CAAT,EAAW;IAClB,KAAK,QAAL,CAAc,qBAAd,EAAqC,CAArC;EACA,CA/Da;EAiEd,OAAO,EAAC,UAAS,CAAT,EAAW;IAClB,KAAK,QAAL,CAAc,qBAAd,EAAqC,CAArC;EACA,CAnEa;EAqEd,OAAO,EAAC,UAAS,CAAT,EAAW;IAClB,KAAK,QAAL,CAAc,qBAAd,EAAqC,CAArC;EACA,CAvEa;EAyEd,QAAQ,EAAC,UAAS,CAAT,EAAW;IACnB,KAAK,QAAL,CAAc,sBAAd,EAAsC,CAAtC;EACA,CA3Ea;EA6Ed,KAAK,EAAC,UAAS,CAAT,EAAW;IAChB,KAAK,QAAL,CAAc,mBAAd,EAAmC,CAAnC;EACA,CA/Ea;EAiFd,OAAO,EAAC,UAAS,CAAT,EAAW;IAClB,KAAK,QAAL,CAAc,qBAAd,EAAqC,CAArC;EACA,CAnFa;EAqFd,IAAI,EAAC,UAAS,CAAT,EAAW;IACf,IAAI,IAAI,GAAG,KAAX;;IACA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,IAA8B,KAAK,KAAL,CAAW,SAAX,CAAqB,SAArB,CAA9B,IAAiE,KAAK,KAAL,CAAW,SAAX,CAAqB,MAArB,CAApE,EAAiG;MAEhG,IAAI,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,WAA/B;;MAEA,IAAG,CAAC,IAAJ,EAAS;QACR,CAAC,CAAC,cAAF;QACA,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,CAA2B,IAA3B;MACA;IACD;EACD,CAhGa;EAkGd,IAAI,EAAC,UAAS,CAAT,EAAW;IACf,IAAI,IAAI,GAAG,KAAX;;IACA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,IAA8B,KAAK,KAAL,CAAW,SAAX,CAAqB,SAArB,CAA9B,IAAiE,KAAK,KAAL,CAAW,SAAX,CAAqB,MAArB,CAApE,EAAiG;MAEhG,IAAI,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,WAA/B;;MAEA,IAAG,CAAC,IAAJ,EAAS;QACR,CAAC,CAAC,cAAF;QACA,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,CAA2B,IAA3B;MACA;IACD;EACD,CA7Ga;EA+Gd,eAAe,EAAC,UAAS,CAAT,EAAW;IAC1B,IAAG,CAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,WAA5B,EAAwC;MACvC,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,WAArB,EAAkC,IAAlC,CAAH,EAA2C;QAC1C,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,IAA7B,CAAkC,KAAlC,EAAyC,IAAzC;MACA;IACD;EACD;AArHa,CAAf;;ACKA,MAAM,WAAN,SAA0B,MAA1B,CAAgC;EAE/B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,SAAL,GAAiB,IAAjB;IACA,KAAK,WAAL,GAAmB,IAAnB;IACA,KAAK,YAAL,GAAoB,KAApB;IACA,KAAK,cAAL,GAAsB,KAAtB;IAEA,KAAK,mBAAL,CAAyB,aAAzB,EAAwC,EAAxC,EARiB,CAQ2B;;IAC5C,KAAK,mBAAL,CAAyB,cAAzB,EAAyC,KAAzC,EATiB,CAS+B;EAChD;;EAED,UAAU,GAAE;IACX,IAAI,QAAQ,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAlC;IAAA,IACA,cAAc,GAAG,EADjB;IAGA,KAAK,SAAL,GAAiB,EAAjB;IACA,KAAK,WAAL,GAAmB,EAAnB;;IAEA,IAAG,QAAQ,KAAK,KAAhB,EAAsB;MACrB,MAAM,CAAC,MAAP,CAAc,cAAd,EAA8B,WAAW,CAAC,QAA1C;MACA,MAAM,CAAC,MAAP,CAAc,cAAd,EAA8B,QAA9B;MAEA,KAAK,WAAL,CAAiB,cAAjB;MACA,KAAK,UAAL;IACA;;IAED,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAhC;EACA;;EAED,WAAW,CAAC,QAAD,EAAU;IACpB,KAAI,IAAI,GAAR,IAAe,QAAf,EAAwB;MACvB,IAAG,WAAW,CAAC,OAAZ,CAAoB,GAApB,CAAH,EAA4B;QAC3B,IAAG,QAAQ,CAAC,GAAD,CAAX,EAAiB;UAChB,IAAG,OAAO,QAAQ,CAAC,GAAD,CAAf,KAAyB,QAA5B,EAAqC;YACpC,QAAQ,CAAC,GAAD,CAAR,GAAgB,CAAC,QAAQ,CAAC,GAAD,CAAT,CAAhB;UACA;;UAED,QAAQ,CAAC,GAAD,CAAR,CAAc,OAAd,CAAuB,OAAD,IAAa;YAClC,IAAI,WAAW,GAAG,KAAK,CAAC,OAAN,CAAc,OAAd,IAA0B,OAA1B,GAAoC,CAAC,OAAD,CAAtD;YAEA,WAAW,CAAC,OAAZ,CAAqB,IAAD,IAAU;cAC7B,KAAK,UAAL,CAAgB,GAAhB,EAAqB,IAArB;YACA,CAFD;UAGA,CAND;QAOA;MACD,CAdD,MAcK;QACJ,OAAO,CAAC,IAAR,CAAa,qCAAb,EAAoD,GAApD;MACA;IACD;EACD;;EAED,UAAU,CAAC,MAAD,EAAS,WAAT,EAAqB;IAC9B,IAAI,OAAO,GAAG;MACb,MAAM,EAAE,WAAW,CAAC,OAAZ,CAAoB,MAApB,CADK;MAEb,IAAI,EAAE,EAFO;MAGb,IAAI,EAAE,KAHO;MAIb,KAAK,EAAE,KAJM;MAKb,IAAI,EAAE;IALO,CAAd;IAQA,IAAI,OAAO,GAAG,WAAW,CAAC,QAAZ,GAAuB,WAAvB,GAAqC,KAArC,CAA2C,GAA3C,EAAgD,IAAhD,CAAqD,EAArD,EAAyD,KAAzD,CAA+D,GAA/D,CAAd;IAEA,OAAO,CAAC,OAAR,CAAiB,MAAD,IAAY;MAC3B,QAAO,MAAP;QACC,KAAK,MAAL;UACC,OAAO,CAAC,IAAR,GAAe,IAAf;UACA;;QAED,KAAK,OAAL;UACC,OAAO,CAAC,KAAR,GAAgB,IAAhB;UACA;;QAED,KAAK,MAAL;UACC,OAAO,CAAC,IAAR,GAAe,IAAf;UACA;;QAED;UACC,MAAM,GAAG,KAAK,CAAC,MAAD,CAAL,GAAgB,MAAM,CAAC,WAAP,GAAqB,UAArB,CAAgC,CAAhC,CAAhB,GAAqD,QAAQ,CAAC,MAAD,CAAtE;UACA,OAAO,CAAC,IAAR,CAAa,IAAb,CAAkB,MAAlB;;UAEA,IAAG,CAAC,KAAK,SAAL,CAAe,MAAf,CAAJ,EAA2B;YAC1B,KAAK,SAAL,CAAe,MAAf,IAAyB,EAAzB;UACA;;UAED,KAAK,SAAL,CAAe,MAAf,EAAuB,IAAvB,CAA4B,OAA5B;MArBF;IAuBA,CAxBD;EAyBA;;EAED,UAAU,GAAE;IACX,IAAI,IAAI,GAAG,IAAX;;IAEA,KAAK,YAAL,GAAoB,UAAS,CAAT,EAAW;MAC9B,IAAI,IAAI,GAAG,CAAC,CAAC,OAAb;MACA,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAL,CAAe,IAAf,CAAf;;MAEA,IAAG,QAAH,EAAY;QAEX,IAAI,CAAC,WAAL,CAAiB,IAAjB,CAAsB,IAAtB;QAEA,QAAQ,CAAC,OAAT,CAAiB,UAAS,OAAT,EAAiB;UACjC,IAAI,CAAC,YAAL,CAAkB,CAAlB,EAAqB,OAArB;QACA,CAFD;MAGA;IACD,CAZD;;IAcA,KAAK,cAAL,GAAsB,UAAS,CAAT,EAAW;MAChC,IAAI,IAAI,GAAG,CAAC,CAAC,OAAb;MACA,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAL,CAAe,IAAf,CAAf;;MAEA,IAAG,QAAH,EAAY;QAEX,IAAI,KAAK,GAAG,IAAI,CAAC,WAAL,CAAiB,OAAjB,CAAyB,IAAzB,CAAZ;;QAEA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;UACb,IAAI,CAAC,WAAL,CAAiB,MAAjB,CAAwB,KAAxB,EAA+B,CAA/B;QACA;MACD;IACD,CAZD;;IAcA,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,CAAoC,SAApC,EAA+C,KAAK,YAApD;IAEA,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,CAAoC,OAApC,EAA6C,KAAK,cAAlD;EACA;;EAED,aAAa,GAAE;IACd,IAAG,KAAK,YAAR,EAAqB;MACpB,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAAnB,CAAuC,SAAvC,EAAkD,KAAK,YAAvD;IACA;;IAED,IAAG,KAAK,cAAR,EAAuB;MACtB,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAAnB,CAAuC,OAAvC,EAAgD,KAAK,cAArD;IACA;EACD;;EAED,YAAY,CAAC,CAAD,EAAI,OAAJ,EAAY;IACvB,IAAI,KAAK,GAAG,IAAZ;;IAEA,IAAG,CAAC,CAAC,OAAF,IAAa,OAAO,CAAC,IAArB,IAA6B,CAAC,CAAC,QAAF,IAAc,OAAO,CAAC,KAAnD,IAA4D,CAAC,CAAC,OAAF,IAAa,OAAO,CAAC,IAApF,EAAyF;MACxF,OAAO,CAAC,IAAR,CAAa,OAAb,CAAsB,GAAD,IAAS;QAC7B,IAAI,KAAK,GAAG,KAAK,WAAL,CAAiB,OAAjB,CAAyB,GAAzB,CAAZ;;QAEA,IAAG,KAAK,IAAI,CAAC,CAAb,EAAe;UACd,KAAK,GAAG,KAAR;QACA;MACD,CAND;;MAQA,IAAG,KAAH,EAAS;QACR,OAAO,CAAC,MAAR,CAAe,IAAf,CAAoB,IAApB,EAA0B,CAA1B;MACA;;MAED,OAAO,IAAP;IACA;;IAED,OAAO,KAAP;EACA;;AA9J8B;;;AAiKhC,WAAW,CAAC,UAAZ,GAAyB,aAAzB,EAEA;;AACA,WAAW,CAAC,QAAZ,GAAuB,eAAvB;AACA,WAAW,CAAC,OAAZ,GAAsB,cAAtB;;ACxKA,MAAM,IAAN,SAAmB,MAAnB,CAAyB;EAExB,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,aAAL,GAAqB,IAArB;IACA,KAAK,eAAL,GAAuB,KAAvB;IAEA,KAAK,gBAAL,GAAwB,IAAxB;IACA,KAAK,SAAL,GAAiB,IAAjB;IAEA,KAAK,iBAAL,GAAyB,EAAzB;IAEA,KAAK,mBAAL,CAAyB,eAAzB,EAA0C,SAA1C,EAXiB,CAWoC;;IAErD,KAAK,mBAAL,CAAyB,gBAAzB,EAA2C,KAA3C;IACA,KAAK,mBAAL,CAAyB,cAAzB,EAAyC,KAAzC;IACA,KAAK,mBAAL,CAAyB,kBAAzB,EAA6C,KAA7C;IACA,KAAK,mBAAL,CAAyB,gBAAzB,EAA2C,KAA3C;IAEA,KAAK,oBAAL,CAA0B,mBAA1B;IACA,KAAK,oBAAL,CAA0B,iBAA1B;IACA,KAAK,oBAAL,CAA0B,YAA1B;IACA,KAAK,oBAAL,CAA0B,gBAA1B;IACA,KAAK,oBAAL,CAA0B,aAA1B;IACA,KAAK,oBAAL,CAA0B,WAA1B;EAEA;;EAED,UAAU,GAAE;IACX,KAAK,sBAAL;IACA,KAAK,qBAAL;IACA,KAAK,uBAAL;IAEA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA9B;EACA;;EAED,sBAAsB,GAAE;IACvB,IAAG,CAAC,KAAK,gBAAL,CAAsB,eAAtB,EAAuC,gBAAvC,CAAJ,EAA6D;MAC5D,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAnB,GAAoC,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAvD;IACA;EACD;;EAED,qBAAqB,GAAE;IACtB,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAtB,EAAqC;MACpC,KAAK,SAAL,CAAe,iBAAf,EAAkC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,EAA8B,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAjD,CAAlC;MACA,KAAK,KAAL,CAAW,EAAX,CAAc,YAAd,EAA4B,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,EAA8B,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAjD,CAA5B;IACA;;IAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAtB,EAAmC;MAClC,KAAK,SAAL,CAAe,WAAf,EAA4B,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,EAA8B,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAjD,CAA5B;IACA;EACD;;EAED,uBAAuB,GAAE;IACxB,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAtB,EAAuC;MACtC,KAAK,SAAL,CAAe,mBAAf,EAAoC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,EAA8B,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAjD,CAApC;MACA,KAAK,KAAL,CAAW,EAAX,CAAc,cAAd,EAA8B,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,EAA8B,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAjD,CAA9B;IACA;;IAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAtB,EAAqC;MACpC,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,EAA8B,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAjD,CAA9B;IACA;EACD;;EAED,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAI,GAAG,GAAG,MAAM,CAAC,UAAjB,CADuB,CAGzB;;IACE,IAAG,GAAG,CAAC,iBAAJ,IAAyB,CAAC,KAAK,iBAAL,CAAuB,iBAApD,EAAsE;MACrE,KAAK,iBAAL,CAAuB,iBAAvB,GAA2C,KAAK,wBAAL,CAA8B,IAA9B,CAAmC,IAAnC,EAAyC,mBAAzC,CAA3C;MACA,KAAK,SAAL,CAAe,oBAAf,EAAqC,KAAK,iBAAL,CAAuB,iBAA5D;MACA,KAAK,KAAL,CAAW,EAAX,CAAc,eAAd,EAA+B,KAAK,wBAAL,CAA8B,IAA9B,CAAmC,IAAnC,EAAyC,mBAAzC,CAA/B;IACA;;IAED,IAAG,GAAG,CAAC,eAAJ,IAAuB,CAAC,KAAK,iBAAL,CAAuB,eAAlD,EAAkE;MACjE,KAAK,iBAAL,CAAuB,eAAvB,GAAyC,KAAK,wBAAL,CAA8B,IAA9B,CAAmC,IAAnC,EAAyC,iBAAzC,CAAzC;MACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,iBAAL,CAAuB,eAAtD;IACA;;IAED,IAAG,GAAG,CAAC,UAAP,EAAkB;MACjB,KAAK,0BAAL,CAAgC,MAAhC;IACA,CAjBsB,CAmBzB;;;IACE,IAAG,GAAG,CAAC,WAAJ,IAAmB,CAAC,KAAK,iBAAL,CAAuB,WAA9C,EAA0D;MACzD,KAAK,iBAAL,CAAuB,WAAvB,GAAqC,KAAK,sBAAL,CAA4B,IAA5B,CAAiC,IAAjC,EAAuC,aAAvC,CAArC;MACA,KAAK,SAAL,CAAe,kBAAf,EAAmC,KAAK,iBAAL,CAAuB,WAA1D;MACA,KAAK,KAAL,CAAW,EAAX,CAAc,aAAd,EAA6B,KAAK,sBAAL,CAA4B,IAA5B,CAAiC,IAAjC,EAAuC,aAAvC,CAA7B;IACA;;IAED,IAAG,GAAG,CAAC,SAAJ,IAAiB,CAAC,KAAK,iBAAL,CAAuB,SAA5C,EAAsD;MACrD,KAAK,iBAAL,CAAuB,SAAvB,GAAmC,KAAK,sBAAL,CAA4B,IAA5B,CAAiC,IAAjC,EAAuC,WAAvC,CAAnC;MACA,KAAK,SAAL,CAAe,YAAf,EAA6B,KAAK,iBAAL,CAAuB,SAApD;IACA;EACD;;EAED,0BAA0B,CAAC,MAAD,EAAQ;IACjC,IAAI,IAAI,GAAG,MAAM,CAAC,UAAP,CAAkB,cAA7B;IAAA,IACA,YADA;IAGA,YAAY,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAf;IACA,YAAY,CAAC,SAAb,CAAuB,GAAvB,CAA2B,+BAA3B;;IAEA,IAAG,IAAH,EAAQ;MACP,IAAG,OAAO,IAAP,KAAgB,UAAnB,EAA8B;QAC7B,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,YAAP,EAAD,CAAX;MACA;;MAED,IAAG,IAAI,YAAY,WAAnB,EAA+B;QAC9B,YAAY,CAAC,WAAb,CAAyB,IAAzB;MACA,CAFD,MAEK;QACJ,YAAY,CAAC,SAAb,GAAyB,IAAzB;MACA;IACD,CAVD,MAUK;MACJ,YAAY,CAAC,SAAb,GAAyB,UAAzB;IACA;;IAED,YAAY,CAAC,gBAAb,CAA8B,OAA9B,EAAwC,CAAD,IAAO;MAC7C,CAAC,CAAC,eAAF;MACA,CAAC,CAAC,cAAF;MAEA,KAAK,aAAL,CAAmB,MAAM,CAAC,UAAP,CAAkB,UAArC,EAAiD,CAAjD,EAAoD,MAApD;IACA,CALD;IAOA,MAAM,CAAC,YAAP,CAAoB,YAApB,CAAiC,YAAjC,EAA+C,MAAM,CAAC,YAAP,CAAoB,UAAnE;EACA;;EAED,sBAAsB,CAAC,MAAD,EAAS,CAAT,EAAY,IAAZ,EAAiB;IACtC,IAAG,IAAI,CAAC,KAAR,EAAc;MACb,IAAI,GAAG,IAAI,CAAC,KAAZ;IACA;;IAED,IAAG,IAAI,CAAC,MAAL,CAAY,UAAZ,CAAuB,MAAvB,CAAH,EAAkC;MACjC,KAAK,aAAL,CAAmB,IAAI,CAAC,MAAL,CAAY,UAAZ,CAAuB,MAAvB,CAAnB,EAAmD,CAAnD,EAAsD,IAAtD;IACA;EACD;;EAED,wBAAwB,CAAC,MAAD,EAAS,CAAT,EAAY,MAAZ,EAAmB;IAC1C,IAAG,MAAM,CAAC,OAAV,EAAkB;MACjB,MAAM,GAAG,MAAM,CAAC,OAAhB;IACA;;IAED,IAAG,MAAM,CAAC,UAAP,CAAkB,MAAlB,CAAH,EAA6B;MAC5B,KAAK,aAAL,CAAmB,MAAM,CAAC,UAAP,CAAkB,MAAlB,CAAnB,EAA8C,CAA9C,EAAiD,MAAjD;IACA;EACD;;EAED,aAAa,CAAC,IAAD,EAAO,CAAP,EAAU,SAAV,EAAoB;IAChC,IAAG,SAAS,CAAC,MAAb,EAAoB;MACnB,SAAS,GAAG,SAAS,CAAC,MAAtB;IACA,CAFD,MAEM,IAAG,SAAS,CAAC,IAAb,EAAkB;MACvB,SAAS,GAAG,SAAS,CAAC,IAAtB;IACA;;IAED,IAAI,GAAG,OAAO,IAAP,IAAe,UAAf,GAA4B,IAAI,CAAC,IAAL,CAAU,KAAK,KAAf,EAAsB,CAAtB,EAAyB,SAAS,CAAC,YAAV,EAAzB,CAA5B,GAAiF,IAAxF;IAEA,KAAK,QAAL,CAAc,CAAd,EAAiB,SAAjB,EAA4B,IAA5B;EACA;;EAED,QAAQ,CAAC,CAAD,EAAI,SAAJ,EAAe,IAAf,EAAqB,QAArB,EAA+B,WAA/B,EAA2C;IAClD,IAAI,KAAK,GAAG,EAAE,CAAC,YAAY,UAAf,CAAZ;IAAA,IACA,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CADT;IAAA,IAEA,KAFA;IAIA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,gBAArB;;IAEA,IAAG,CAAC,KAAJ,EAAU;MACT,CAAC,CAAC,cAAF;IACA,CATiD,CAWpD;;;IACE,IAAG,CAAC,IAAD,IAAS,CAAC,IAAI,CAAC,MAAlB,EAAyB;MACxB;IACA;;IAED,IAAG,CAAC,QAAJ,EAAa;MACZ,IAAG,KAAK,eAAR,EAAwB;QAC3B;QACI,IAAG,KAAK,SAAR,EAAkB;UACjB;QACA;MACD,CALD,MAKK;QACJ,KAAK,eAAL,GAAuB,UAAU,CAAC,MAAM;UACvC,KAAK,eAAL,GAAuB,KAAvB;QACA,CAFgC,EAE9B,GAF8B,CAAjC;MAGA;;MAED,IAAG,KAAK,SAAR,EAAkB;QACjB,KAAK,SAAL,CAAe,IAAf;MACA;;MAED,KAAK,SAAL,GAAiB,KAAK,GAAG,KAAK,KAAL,CAAW,MAAX,CAAzB;IAEA,CAlBD,MAkBK;MACJ,KAAK,GAAG,WAAW,CAAC,KAAZ,CAAkB,MAAlB,CAAR;IACA;;IAED,IAAI,CAAC,OAAL,CAAc,IAAD,IAAU;MACtB,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAb;MAAA,IACA,KAAK,GAAG,IAAI,CAAC,KADb;MAAA,IAEA,QAAQ,GAAG,IAAI,CAAC,QAFhB;;MAIA,IAAG,IAAI,CAAC,SAAR,EAAkB;QACjB,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,0BAArB;MACA,CAFD,MAEK;QACJ,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,qBAArB;;QAEA,IAAG,OAAO,KAAP,IAAgB,UAAnB,EAA8B;UAC7B,KAAK,GAAG,KAAK,CAAC,IAAN,CAAW,KAAK,KAAhB,EAAuB,SAAS,CAAC,YAAV,EAAvB,CAAR;QACA;;QAED,IAAG,KAAK,YAAY,IAApB,EAAyB;UACxB,MAAM,CAAC,WAAP,CAAmB,KAAnB;QACA,CAFD,MAEK;UACJ,MAAM,CAAC,SAAP,GAAmB,KAAnB;QACA;;QAED,IAAG,OAAO,QAAP,IAAmB,UAAtB,EAAiC;UAChC,QAAQ,GAAG,QAAQ,CAAC,IAAT,CAAc,KAAK,KAAnB,EAA0B,SAAS,CAAC,YAAV,EAA1B,CAAX;QACA;;QAED,IAAG,QAAH,EAAY;UACX,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,8BAArB;UACA,MAAM,CAAC,gBAAP,CAAwB,OAAxB,EAAkC,CAAD,IAAO;YACvC,CAAC,CAAC,eAAF;UACA,CAFD;QAGA,CALD,MAKK;UACJ,IAAG,IAAI,CAAC,IAAL,IAAa,IAAI,CAAC,IAAL,CAAU,MAA1B,EAAiC;YAChC,MAAM,CAAC,gBAAP,CAAwB,OAAxB,EAAkC,CAAD,IAAO;cACvC,CAAC,CAAC,eAAF;cACA,KAAK,QAAL,CAAc,CAAd,EAAiB,SAAjB,EAA4B,IAAI,CAAC,IAAjC,EAAuC,MAAvC,EAA+C,KAA/C;YACA,CAHD;UAIA,CALD,MAKK;YACJ,IAAG,IAAI,CAAC,MAAR,EAAe;cACd,MAAM,CAAC,gBAAP,CAAwB,OAAxB,EAAkC,CAAD,IAAO;gBACvC,IAAI,CAAC,MAAL,CAAY,CAAZ,EAAe,SAAS,CAAC,YAAV,EAAf;cACA,CAFD;YAGA;UACD;QACD;;QAED,IAAG,IAAI,CAAC,IAAL,IAAa,IAAI,CAAC,IAAL,CAAU,MAA1B,EAAiC;UAChC,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,6BAArB;QACA;MACD;;MAED,MAAM,CAAC,WAAP,CAAmB,MAAnB;IACA,CAlDD;IAoDA,MAAM,CAAC,gBAAP,CAAwB,OAAxB,EAAkC,CAAD,IAAO;MACvC,KAAK,SAAL,CAAe,IAAf;IACA,CAFD;IAIA,KAAK,CAAC,IAAN,CAAW,QAAQ,IAAI,CAAvB;;IAEA,IAAG,KAAK,KAAK,KAAK,SAAlB,EAA4B;MAC3B,KAAK,SAAL,CAAe,UAAf,CAA0B,MAAM;QAC/B,KAAK,SAAL,GAAiB,IAAjB;;QAEA,IAAG,KAAK,gBAAR,EAAyB;UACxB,KAAK,gBAAL,CAAsB,YAAtB,EAAoC,KAAK,gBAAL,CAAsB,YAAtB,EAApC;UACA,KAAK,gBAAL,GAAwB,IAAxB;QACA;MACD,CAPD;MASA,KAAK,gBAAL,GAAwB,SAAxB;MAEA,KAAK,gBAAL,CAAsB,YAAtB,EAAoC,SAAS,CAAC,YAAV,EAApC;IACA;EACD;;AA9QuB;;;AAiRzB,IAAI,CAAC,UAAL,GAAkB,MAAlB;;AChRA,MAAM,WAAN,SAA0B,MAA1B,CAAgC;EAE/B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,kBAAL,GAA0B,KAAK,wBAAL,EAA1B;IACA,KAAK,YAAL,GAAoB,KAApB,CAJiB,CAIS;;IAC1B,KAAK,YAAL,GAAoB,KAApB,CALiB,CAKS;;IAC1B,KAAK,WAAL,GAAmB,GAAnB,CANiB,CAMM;;IACvB,KAAK,MAAL,GAAc,KAAd,CAPiB,CAOG;;IACpB,KAAK,KAAL,GAAa,KAAb,CARiB,CAQE;;IACnB,KAAK,UAAL,GAAkB,KAAlB,CATiB,CASO;;IACxB,KAAK,MAAL,GAAc,CAAd,CAViB,CAUD;;IAChB,KAAK,gBAAL,GAAwB,EAAxB,CAXiB,CAWU;;IAC3B,KAAK,cAAL,GAAsB,CAAtB,CAZiB,CAYO;;IACxB,KAAK,iBAAL,GAAyB,KAAzB,CAbiB,CAac;;IAC/B,KAAK,SAAL,GAAiB,KAAjB;IAEA,KAAK,SAAL,GAAiB,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAAjB;IACA,KAAK,OAAL,GAAe,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAf;IAEA,KAAK,mBAAL,CAAyB,gBAAzB,EAA2C,KAA3C,EAnBiB,CAmBiC;EAClD;;EAED,wBAAwB,GAAE;IACzB,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;IAEA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,eAAjB;IACA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,2BAAjB;IAEA,OAAO,EAAP;EACA;;EAED,UAAU,GAAE;IACX,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAtB,EAAqC;MACpC,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA9B;IACA;EACD;;EAED,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,MAAM,GAAG,EADT;IAAA,IAEA,KAFA;;IAIA,IAAG,CAAC,MAAM,CAAC,OAAP,CAAe,MAAhB,IAA0B,CAAC,MAAM,CAAC,OAArC,EAA6C;MAC5C,KAAK,GAAG,MAAM,CAAC,UAAP,EAAR;;MAEA,MAAM,CAAC,SAAP,GAAmB,UAAS,CAAT,EAAW;QAC7B,IAAG,MAAM,CAAC,MAAP,KAAkB,IAAI,CAAC,MAAL,CAAY,MAAjC,EAAwC;UACvC,IAAK,CAAC,IAAI,CAAC,SAAL,GAAiB,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAA9B,GAAsC,CAAC,CAAC,KAAzC,IAAkD,OAAO,CAAC,QAAR,CAAiB,KAAjB,EAAwB,IAA3E,GAAmF,IAAI,CAAC,KAAL,CAAW,aAAX,CAAyB,OAAzB,CAAiC,UAArH,GAAoI,MAAM,CAAC,QAAP,KAAoB,CAA3J,EAA8J;YAC7J,IAAG,IAAI,CAAC,KAAL,KAAe,MAAf,IAAyB,CAAC,IAAI,CAAC,UAAlC,EAA6C;cAC5C,KAAK,CAAC,UAAN,CAAiB,YAAjB,CAA8B,IAAI,CAAC,kBAAnC,EAAuD,KAAK,CAAC,WAA7D;cACA,IAAI,CAAC,UAAL,CAAgB,MAAhB,EAAwB,IAAxB;YACA;UACD,CALD,MAKK;YACJ,IAAG,IAAI,CAAC,KAAL,KAAe,MAAf,IAAyB,IAAI,CAAC,UAAjC,EAA4C;cAC3C,KAAK,CAAC,UAAN,CAAiB,YAAjB,CAA8B,IAAI,CAAC,kBAAnC,EAAuD,KAAvD;cACA,IAAI,CAAC,UAAL,CAAgB,MAAhB,EAAwB,KAAxB;YACA;UACD;QACD;MACD,CAdkB,CAcjB,IAdiB,CAcZ,IAdY,CAAnB;;MAgBA,KAAK,CAAC,gBAAN,CAAuB,WAAvB,EAAoC,UAAS,CAAT,EAAW;QAC9C,IAAI,CAAC,SAAL,GAAiB,KAAjB;;QACA,IAAG,CAAC,CAAC,KAAF,KAAY,CAAf,EAAiB;UAChB,IAAI,CAAC,YAAL,GAAoB,UAAU,CAAC,YAAU;YACxC,IAAI,CAAC,SAAL,CAAe,CAAf,EAAkB,MAAlB;UACA,CAF6B,EAE3B,IAAI,CAAC,WAFsB,CAA9B;QAGA;MACD,CAPD;MASA,KAAK,CAAC,gBAAN,CAAuB,SAAvB,EAAkC,UAAS,CAAT,EAAW;QAC5C,IAAG,CAAC,CAAC,KAAF,KAAY,CAAf,EAAiB;UAChB,IAAG,IAAI,CAAC,YAAR,EAAqB;YACpB,YAAY,CAAC,IAAI,CAAC,YAAN,CAAZ;UACA;QACD;MACD,CAND;MAQA,IAAI,CAAC,eAAL,CAAqB,MAArB;IACA;;IAED,MAAM,CAAC,OAAP,CAAe,UAAf,GAA4B,MAA5B;EACA;;EAED,eAAe,CAAC,MAAD,EAAQ;IACtB,IAAI,KAAK,GAAG,MAAM,CAAC,UAAP,EAAZ;IAAA,IACA,UAAU,GAAG,KADb;IAAA,IACkB;IAClB,OAFA;IAAA,IAES,OAFT;IAAA,IAEkB,YAFlB;IAAA,IAEgC,YAFhC;IAAA,IAE8C,gBAF9C;IAAA,IAEgE,gBAFhE;IAIA,KAAK,CAAC,gBAAN,CAAuB,YAAvB,EAAsC,CAAD,IAAO;MAC3C,KAAK,YAAL,GAAoB,UAAU,CAAC,MAAM;QACpC,KAAK,SAAL,GAAiB,IAAjB;QACA,OAAO,GAAG,MAAM,CAAC,UAAP,EAAV;QACA,YAAY,GAAG,OAAO,GAAG,OAAO,CAAC,QAAR,KAAmB,CAAtB,GAA0B,CAAhD;QACA,OAAO,GAAG,MAAM,CAAC,UAAP,EAAV;QACA,YAAY,GAAG,OAAO,GAAG,OAAO,CAAC,QAAR,KAAmB,CAAtB,GAA0B,CAAhD;QACA,gBAAgB,GAAG,CAAnB;QACA,gBAAgB,GAAG,CAAnB;QACA,UAAU,GAAG,KAAb;QAEA,KAAK,SAAL,CAAe,CAAf,EAAkB,MAAlB;MACA,CAX6B,EAW3B,KAAK,WAXsB,CAA9B;IAYA,CAbD,EAaG;MAAC,OAAO,EAAE;IAAV,CAbH;IAeA,KAAK,CAAC,gBAAN,CAAuB,WAAvB,EAAqC,CAAD,IAAO;MAC1C,IAAI,IAAJ,EAAU,SAAV;;MAEA,IAAG,KAAK,MAAR,EAAe;QACd,KAAK,SAAL,CAAe,CAAf;;QAEA,IAAG,CAAC,UAAJ,EAAe;UACd,UAAU,GAAG,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAA1B;QACA;;QAED,IAAI,GAAG,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAAb,GAAqB,UAA5B;;QAEA,IAAG,IAAI,GAAG,CAAV,EAAY;UACX,IAAG,OAAO,IAAI,IAAI,GAAG,gBAAP,GAA0B,YAAxC,EAAqD;YACpD,SAAS,GAAG,OAAZ;;YAEA,IAAG,SAAS,KAAK,MAAjB,EAAwB;cACvB,UAAU,GAAG,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAA1B;cACA,SAAS,CAAC,UAAV,GAAuB,UAAvB,CAAkC,YAAlC,CAA+C,KAAK,kBAApD,EAAwE,SAAS,CAAC,UAAV,GAAuB,WAA/F;cACA,KAAK,UAAL,CAAgB,SAAhB,EAA2B,IAA3B;YACA;UACD;QACD,CAVD,MAUK;UACJ,IAAG,OAAO,IAAI,CAAC,IAAD,GAAQ,gBAAR,GAA4B,YAA1C,EAAuD;YACtD,SAAS,GAAG,OAAZ;;YAEA,IAAG,SAAS,KAAK,MAAjB,EAAwB;cACvB,UAAU,GAAG,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAA1B;cACA,SAAS,CAAC,UAAV,GAAuB,UAAvB,CAAkC,YAAlC,CAA+C,KAAK,kBAApD,EAAwE,SAAS,CAAC,UAAV,EAAxE;cACA,KAAK,UAAL,CAAgB,SAAhB,EAA2B,KAA3B;YACA;UACD;QACD;;QAED,IAAG,SAAH,EAAa;UACZ,OAAO,GAAG,SAAS,CAAC,UAAV,EAAV;UACA,gBAAgB,GAAG,YAAnB;UACA,YAAY,GAAG,OAAO,GAAG,OAAO,CAAC,QAAR,KAAqB,CAAxB,GAA4B,CAAlD;UACA,OAAO,GAAG,SAAS,CAAC,UAAV,EAAV;UACA,gBAAgB,GAAG,YAAnB;UACA,YAAY,GAAG,OAAO,GAAG,OAAO,CAAC,QAAR,KAAqB,CAAxB,GAA4B,CAAlD;QACA;MACD;IACD,CA3CD,EA2CG;MAAC,OAAO,EAAE;IAAV,CA3CH;IA6CA,KAAK,CAAC,gBAAN,CAAuB,UAAvB,EAAoC,CAAD,IAAO;MACzC,IAAG,KAAK,YAAR,EAAqB;QACpB,YAAY,CAAC,KAAK,YAAN,CAAZ;MACA;;MACD,IAAG,KAAK,MAAR,EAAe;QACd,KAAK,OAAL,CAAa,CAAb;MACA;IACD,CAPD;EAQA;;EAED,SAAS,CAAC,CAAD,EAAI,MAAJ,EAAW;IACnB,IAAI,OAAO,GAAG,MAAM,CAAC,UAAP,EAAd;IAAA,IACA,aAAa,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzB,EADhB;IAAA,IAEA,cAAc,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,iBAAzB,EAFjB;IAIA,KAAK,MAAL,GAAc,MAAd;IACA,KAAK,MAAL,GAAc,CAAC,KAAK,SAAL,GAAiB,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAA9B,GAAsC,CAAC,CAAC,KAAzC,IAAkD,OAAO,CAAC,QAAR,CAAiB,OAAjB,EAA0B,IAA1F;IAEA,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,GAA7B,CAAiC,wBAAjC,EARmB,CAUrB;;IACE,KAAK,kBAAL,CAAwB,KAAxB,CAA8B,KAA9B,GAAsC,MAAM,CAAC,QAAP,KAAoB,IAA1D;IACA,KAAK,kBAAL,CAAwB,KAAxB,CAA8B,MAA9B,GAAuC,MAAM,CAAC,SAAP,KAAqB,IAA5D;IAEA,OAAO,CAAC,UAAR,CAAmB,YAAnB,CAAgC,KAAK,kBAArC,EAAyD,OAAzD;IACA,OAAO,CAAC,UAAR,CAAmB,WAAnB,CAA+B,OAA/B,EAfmB,CAiBrB;;IACE,KAAK,YAAL,GAAoB,OAAO,CAAC,SAAR,CAAkB,IAAlB,CAApB;IACA,KAAK,YAAL,CAAkB,SAAlB,CAA4B,GAA5B,CAAgC,kBAAhC;IAEA,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzB,GAAsC,WAAtC,CAAkD,KAAK,YAAvD;IAEA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,IAAxB,GAA+B,GAA/B;IACA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,MAAxB,GAAkC,aAAa,CAAC,YAAd,GAA6B,cAAc,CAAC,YAA7C,GAA6D,IAA9F;;IAEA,IAAG,CAAC,KAAK,SAAT,EAAmB;MAClB,KAAK,cAAL;;MAEA,QAAQ,CAAC,IAAT,CAAc,gBAAd,CAA+B,WAA/B,EAA4C,KAAK,SAAjD;MACA,QAAQ,CAAC,IAAT,CAAc,gBAAd,CAA+B,SAA/B,EAA0C,KAAK,OAA/C;IACA;;IAED,KAAK,SAAL,CAAe,CAAf;EACA;;EAED,cAAc,GAAE;IACf,KAAK,KAAL,CAAW,aAAX,CAAyB,cAAzB,CAAwC,OAAxC,CAAgD,UAAS,MAAT,EAAgB;MAC/D,IAAG,MAAM,CAAC,OAAP,CAAe,UAAf,CAA0B,SAA7B,EAAuC;QACtC,MAAM,CAAC,UAAP,GAAoB,gBAApB,CAAqC,WAArC,EAAkD,MAAM,CAAC,OAAP,CAAe,UAAf,CAA0B,SAA5E;MACA;IACD,CAJD;EAKA;;EAED,gBAAgB,GAAE;IACjB,KAAK,KAAL,CAAW,aAAX,CAAyB,cAAzB,CAAwC,OAAxC,CAAgD,UAAS,MAAT,EAAgB;MAC/D,IAAG,MAAM,CAAC,OAAP,CAAe,UAAf,CAA0B,SAA7B,EAAuC;QACtC,MAAM,CAAC,UAAP,GAAoB,mBAApB,CAAwC,WAAxC,EAAqD,MAAM,CAAC,OAAP,CAAe,UAAf,CAA0B,SAA/E;MACA;IACD,CAJD;EAKA;;EAED,UAAU,CAAC,MAAD,EAAS,KAAT,EAAe;IACxB,IAAI,WAAW,GAAG,KAAK,MAAL,CAAY,QAAZ,EAAlB;IAEA,KAAK,KAAL,GAAa,MAAb;IACA,KAAK,UAAL,GAAkB,KAAlB;;IAEA,IAAG,KAAH,EAAS;MACR,MAAM,CAAC,QAAP,GAAkB,OAAlB,CAA0B,UAAS,IAAT,EAAe,CAAf,EAAiB;QAC1C,IAAI,MAAM,GAAG,IAAI,CAAC,UAAL,CAAgB,IAAhB,CAAb;;QAEA,IAAG,MAAM,CAAC,UAAP,IAAqB,WAAW,CAAC,CAAD,CAAnC,EAAuC;UACtC,MAAM,CAAC,UAAP,CAAkB,YAAlB,CAA+B,WAAW,CAAC,CAAD,CAAX,CAAe,UAAf,EAA/B,EAA4D,MAAM,CAAC,WAAnE;QACA;MACD,CAND;IAOA,CARD,MAQK;MACJ,MAAM,CAAC,QAAP,GAAkB,OAAlB,CAA0B,UAAS,IAAT,EAAe,CAAf,EAAiB;QAC1C,IAAI,MAAM,GAAG,IAAI,CAAC,UAAL,CAAgB,IAAhB,CAAb;;QAEA,IAAG,MAAM,CAAC,UAAP,IAAqB,WAAW,CAAC,CAAD,CAAnC,EAAuC;UACtC,MAAM,CAAC,UAAP,CAAkB,YAAlB,CAA+B,WAAW,CAAC,CAAD,CAAX,CAAe,UAAf,EAA/B,EAA4D,MAA5D;QACA;MACD,CAND;IAOA;EACD;;EAED,OAAO,CAAC,CAAD,EAAG;IACT,IAAG,CAAC,CAAC,KAAF,KAAY,CAAZ,IAAiB,KAAK,SAAzB,EAAmC;MAClC,KAAK,gBAAL;;MAEA,KAAK,kBAAL,CAAwB,UAAxB,CAAmC,YAAnC,CAAgD,KAAK,MAAL,CAAY,UAAZ,EAAhD,EAA0E,KAAK,kBAAL,CAAwB,WAAlG;MACA,KAAK,kBAAL,CAAwB,UAAxB,CAAmC,WAAnC,CAA+C,KAAK,kBAApD;MACA,KAAK,YAAL,CAAkB,UAAlB,CAA6B,WAA7B,CAAyC,KAAK,YAA9C;MAEA,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,MAA7B,CAAoC,wBAApC;;MAEA,IAAG,KAAK,KAAR,EAAc;QACb,KAAK,KAAL,CAAW,aAAX,CAAyB,gBAAzB,CAA0C,KAAK,MAA/C,EAAuD,KAAK,KAA5D,EAAmE,KAAK,UAAxE;MACA;;MAED,KAAK,MAAL,GAAc,KAAd;MACA,KAAK,KAAL,GAAa,KAAb;MACA,KAAK,UAAL,GAAkB,KAAlB;;MAEA,IAAG,CAAC,KAAK,SAAT,EAAmB;QAClB,QAAQ,CAAC,IAAT,CAAc,mBAAd,CAAkC,WAAlC,EAA+C,KAAK,SAApD;QACA,QAAQ,CAAC,IAAT,CAAc,mBAAd,CAAkC,SAAlC,EAA6C,KAAK,OAAlD;MACA;IACD;EACD;;EAED,SAAS,CAAC,CAAD,EAAG;IACX,IAAI,YAAY,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzB,EAAnB;IAAA,IACA,UAAU,GAAG,YAAY,CAAC,UAD1B;IAAA,IAEA,IAAI,GAAI,CAAC,KAAK,SAAL,GAAiB,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAA9B,GAAsC,CAAC,CAAC,KAAzC,IAAkD,OAAO,CAAC,QAAR,CAAiB,YAAjB,EAA+B,IAAlF,GAA0F,UAFjG;IAAA,IAGA,SAHA;IAKA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,IAAxB,GAAgC,IAAI,GAAG,KAAK,MAAb,GAAuB,IAAtD;;IAEA,IAAG,IAAI,GAAG,UAAP,GAAoB,KAAK,gBAA5B,EAA6C;MAC5C,IAAG,CAAC,KAAK,iBAAT,EAA2B;QAC1B,KAAK,iBAAL,GAAyB,UAAU,CAAC,MAAM;UACzC,SAAS,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,EAAW,UAAU,GAAC,CAAtB,CAAZ;UACA,KAAK,KAAL,CAAW,UAAX,CAAsB,UAAtB,GAAmC,UAAnC,GAAgD,SAAhD;UACA,KAAK,iBAAL,GAAyB,KAAzB;QACA,CAJkC,EAIhC,CAJgC,CAAnC;MAKA;IACD;;IAED,IAAG,UAAU,GAAG,YAAY,CAAC,WAA1B,GAAwC,IAAxC,GAA+C,KAAK,gBAAvD,EAAwE;MACvE,IAAG,CAAC,KAAK,iBAAT,EAA2B;QAC1B,KAAK,iBAAL,GAAyB,UAAU,CAAC,MAAM;UACzC,SAAS,GAAG,IAAI,CAAC,GAAL,CAAS,YAAY,CAAC,WAAtB,EAAmC,UAAU,GAAC,CAA9C,CAAZ;UACA,KAAK,KAAL,CAAW,UAAX,CAAsB,UAAtB,GAAmC,UAAnC,GAAgD,SAAhD;UACA,KAAK,iBAAL,GAAyB,KAAzB;QACA,CAJkC,EAIhC,CAJgC,CAAnC;MAKA;IACD;EACD;;AAlS8B;;;AAqShC,WAAW,CAAC,UAAZ,GAAyB,YAAzB;;ACrSA,MAAM,QAAN,SAAuB,MAAvB,CAA6B;EAE5B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,kBAAL,GAA0B,KAAK,wBAAL,EAA1B;IACA,KAAK,YAAL,GAAoB,KAApB,CAJiB,CAIS;;IAC1B,KAAK,YAAL,GAAoB,KAApB,CALiB,CAKS;;IAC1B,KAAK,WAAL,GAAmB,GAAnB,CANiB,CAMM;;IACvB,KAAK,MAAL,GAAc,KAAd,CAPiB,CAOG;;IACpB,KAAK,KAAL,GAAa,KAAb,CARiB,CAQE;;IACnB,KAAK,UAAL,GAAkB,KAAlB,CATiB,CASO;;IACxB,KAAK,SAAL,GAAiB,KAAjB,CAViB,CAUM;;IACvB,KAAK,MAAL,GAAc,CAAd,CAXiB,CAWD;;IAChB,KAAK,MAAL,GAAc,CAAd,CAZiB,CAYD;;IAEhB,KAAK,SAAL,GAAiB,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAAjB;IACA,KAAK,OAAL,GAAe,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAf;IACA,KAAK,iBAAL,GAAyB,KAAzB;IAEA,KAAK,SAAL,GAAiB,KAAjB;IAEA,KAAK,UAAL,GAAkB,KAAlB;IACA,KAAK,yBAAL,GAAiC,KAAjC;IACA,KAAK,2BAAL,GAAmC,KAAnC;IACA,KAAK,kBAAL,GAA0B,EAA1B;IACA,KAAK,WAAL,GAAmB,EAAnB;IAEA,KAAK,cAAL,GAAsB,KAAtB;IACA,KAAK,YAAL,GAAoB,KAApB;IAEA,KAAK,mBAAL,CAAyB,aAAzB,EAAwC,KAAxC,EA7BiB,CA6B8B;;IAC/C,KAAK,mBAAL,CAAyB,4BAAzB,EAAuD,KAAvD,EA9BiB,CA8B6C;;IAC9D,KAAK,mBAAL,CAAyB,8BAAzB,EAAyD,KAAzD,EA/BiB,CA+B+C;;IAChE,KAAK,mBAAL,CAAyB,mBAAzB,EAA8C,KAA9C;IACA,KAAK,mBAAL,CAAyB,qBAAzB,EAAgD,QAAhD;IAEA,KAAK,oBAAL,CAA0B,WAA1B;EACA;;EAED,wBAAwB,GAAE;IACzB,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;IAEA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,eAAjB;IACA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,2BAAjB;IAEA,OAAO,EAAP;EACA;;EAED,UAAU,GAAE;IACX,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAtB,EAAkC;MACjC,KAAK,yBAAL,GAAiC,KAAK,KAAL,CAAW,OAAX,CAAmB,0BAApD;MACA,KAAK,2BAAL,GAAmC,KAAK,KAAL,CAAW,OAAX,CAAmB,4BAAtD;MAEA,KAAK,UAAL,GAAkB,KAAK,yBAAL,IAAkC,KAAK,2BAAzD;MAEA,KAAK,SAAL,CAAe,WAAf,EAA4B,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAA5B;MACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA9B;MACA,KAAK,SAAL,CAAe,UAAf,EAA2B,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAA3B;IACA;EACD;;EAED,qBAAqB,CAAC,KAAD,EAAO;IAC3B,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,MAAM,GAAG,EADT,CAD2B,CAI7B;;IACE,MAAM,CAAC,OAAP,GAAiB,UAAS,CAAT,EAAW;MAC3B,IAAI,CAAC,YAAL,CAAkB,CAAlB,EAAqB,KAArB;IACA,CAFgB,CAEf,IAFe,CAEV,IAFU,CAAjB,CAL2B,CAS7B;;;IACE,MAAM,CAAC,SAAP,GAAmB,UAAS,CAAT,EAAW;MAC7B,IAAI,KAAJ;;MAEA,IAAK,CAAC,CAAC,KAAF,GAAU,OAAO,CAAC,QAAR,CAAiB,KAAK,CAAC,OAAvB,EAAgC,GAA3C,GAAkD,IAAI,CAAC,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,SAAjF,GAA+F,KAAK,CAAC,SAAN,KAAoB,CAAtH,EAAyH;QACxH,IAAG,IAAI,CAAC,KAAL,KAAe,KAAf,IAAwB,CAAC,IAAI,CAAC,UAAjC,EAA4C;UAC3C,KAAK,GAAG,KAAK,CAAC,UAAN,EAAR;UACA,KAAK,CAAC,UAAN,CAAiB,YAAjB,CAA8B,IAAI,CAAC,kBAAnC,EAAuD,KAAK,CAAC,WAA7D;UACA,IAAI,CAAC,OAAL,CAAa,KAAb,EAAoB,IAApB;QACA;MACD,CAND,MAMK;QACJ,IAAG,IAAI,CAAC,KAAL,KAAe,KAAf,IAAwB,IAAI,CAAC,UAAhC,EAA2C;UAC1C,KAAK,GAAG,KAAK,CAAC,UAAN,EAAR;;UACA,IAAG,KAAK,CAAC,eAAT,EAAyB;YACxB,KAAK,CAAC,UAAN,CAAiB,YAAjB,CAA8B,IAAI,CAAC,kBAAnC,EAAuD,KAAvD;YACA,IAAI,CAAC,OAAL,CAAa,KAAb,EAAoB,KAApB;UACA;QACD;MACD;IACD,CAlBkB,CAkBjB,IAlBiB,CAkBZ,IAlBY,CAAnB;;IAoBA,KAAK,CAAC,OAAN,CAAc,OAAd,GAAwB,MAAxB;EACA;;EAED,aAAa,CAAC,GAAD,EAAK;IACjB,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,MAAM,GAAG,EADT;IAAA,IAEA,KAFA,CADiB,CAKnB;;IACE,MAAM,CAAC,OAAP,GAAiB,UAAS,CAAT,EAAW;MAC3B,IAAI,CAAC,YAAL,CAAkB,CAAlB,EAAqB,GAArB;IACA,CAFgB,CAEf,IAFe,CAEV,IAFU,CAAjB,CANiB,CAUnB;;;IACE,MAAM,CAAC,SAAP,GAAmB,UAAS,CAAT,EAAW;MAC7B,IAAI,KAAK,GAAG,GAAG,CAAC,UAAJ,EAAZ;;MAEA,IAAK,CAAC,CAAC,KAAF,GAAU,OAAO,CAAC,QAAR,CAAiB,KAAjB,EAAwB,GAAnC,GAA0C,IAAI,CAAC,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,SAAzE,GAAuF,GAAG,CAAC,SAAJ,KAAkB,CAA5G,EAA+G;QAC9G,IAAG,IAAI,CAAC,KAAL,KAAe,GAAf,IAAsB,CAAC,IAAI,CAAC,UAA/B,EAA0C;UACzC,KAAK,CAAC,UAAN,CAAiB,YAAjB,CAA8B,IAAI,CAAC,kBAAnC,EAAuD,KAAK,CAAC,WAA7D;UACA,IAAI,CAAC,OAAL,CAAa,GAAb,EAAkB,IAAlB;QACA;MACD,CALD,MAKK;QACJ,IAAG,IAAI,CAAC,KAAL,KAAe,GAAf,IAAsB,IAAI,CAAC,UAA9B,EAAyC;UACxC,KAAK,CAAC,UAAN,CAAiB,YAAjB,CAA8B,IAAI,CAAC,kBAAnC,EAAuD,KAAvD;UACA,IAAI,CAAC,OAAL,CAAa,GAAb,EAAkB,KAAlB;QACA;MACD;IACD,CAdkB,CAcjB,IAdiB,CAcZ,IAdY,CAAnB;;IAiBA,IAAG,CAAC,KAAK,SAAT,EAAmB;MAElB,KAAK,GAAG,GAAG,CAAC,UAAJ,EAAR;MAEA,KAAK,CAAC,gBAAN,CAAuB,WAAvB,EAAoC,UAAS,CAAT,EAAW;QAC9C,IAAG,CAAC,CAAC,KAAF,KAAY,CAAf,EAAiB;UAChB,IAAI,CAAC,YAAL,GAAoB,UAAU,CAAC,YAAU;YACxC,IAAI,CAAC,SAAL,CAAe,CAAf,EAAkB,GAAlB;UACA,CAF6B,EAE3B,IAAI,CAAC,WAFsB,CAA9B;QAGA;MACD,CAND;MAQA,KAAK,CAAC,gBAAN,CAAuB,SAAvB,EAAkC,UAAS,CAAT,EAAW;QAC5C,IAAG,CAAC,CAAC,KAAF,KAAY,CAAf,EAAiB;UAChB,IAAG,IAAI,CAAC,YAAR,EAAqB;YACpB,YAAY,CAAC,IAAI,CAAC,YAAN,CAAZ;UACA;QACD;MACD,CAND;MAQA,KAAK,eAAL,CAAqB,GAArB,EAA0B,GAAG,CAAC,UAAJ,EAA1B;IACA;;IAED,GAAG,CAAC,OAAJ,CAAY,OAAZ,GAAsB,MAAtB;EACA;;EAED,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAG,MAAM,CAAC,UAAP,CAAkB,SAAlB,IAA+B,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,KAAmC,KAArE,EAA2E;MAC1E,KAAK,SAAL,GAAiB,IAAjB;IACA;EACD;;EAED,cAAc,CAAC,IAAD,EAAM;IACnB,IAAG,IAAI,CAAC,MAAL,CAAY,UAAZ,CAAuB,SAAvB,IAAoC,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,KAAmC,KAA1E,EAAgF;MAC/E,IAAI,IAAI,GAAG,IAAX;MAAA,IACA,MAAM,GAAG,IAAI,CAAC,UAAL,CAAgB,IAAhB,CADT;MAGA,MAAM,CAAC,gBAAP,CAAwB,WAAxB,EAAqC,UAAS,CAAT,EAAW;QAC/C,IAAG,CAAC,CAAC,KAAF,KAAY,CAAf,EAAiB;UAChB,IAAI,CAAC,YAAL,GAAoB,UAAU,CAAC,YAAU;YACxC,IAAI,CAAC,SAAL,CAAe,CAAf,EAAkB,IAAI,CAAC,GAAvB;UACA,CAF6B,EAE3B,IAAI,CAAC,WAFsB,CAA9B;QAGA;MACD,CAND;MAQA,MAAM,CAAC,gBAAP,CAAwB,SAAxB,EAAmC,UAAS,CAAT,EAAW;QAC7C,IAAG,CAAC,CAAC,KAAF,KAAY,CAAf,EAAiB;UAChB,IAAG,IAAI,CAAC,YAAR,EAAqB;YACpB,YAAY,CAAC,IAAI,CAAC,YAAN,CAAZ;UACA;QACD;MACD,CAND;MAQA,KAAK,eAAL,CAAqB,IAAI,CAAC,GAA1B,EAA+B,MAA/B;IACA;EACD;;EAED,eAAe,CAAC,GAAD,EAAM,OAAN,EAAc;IAC5B,IAAI,UAAU,GAAG,KAAjB;IAAA,IAAsB;IACtB,OADA;IAAA,IACS,OADT;IAAA,IACkB,aADlB;IAAA,IACiC,aADjC;IAAA,IACgD,iBADhD;IAAA,IACmE,iBADnE;IAGA,OAAO,CAAC,gBAAR,CAAyB,YAAzB,EAAwC,CAAD,IAAO;MAC7C,KAAK,YAAL,GAAoB,UAAU,CAAC,MAAM;QACpC,KAAK,SAAL,GAAiB,IAAjB;QACA,OAAO,GAAG,GAAG,CAAC,OAAJ,EAAV;QACA,aAAa,GAAG,OAAO,GAAG,OAAO,CAAC,SAAR,KAAoB,CAAvB,GAA2B,CAAlD;QACA,OAAO,GAAG,GAAG,CAAC,OAAJ,EAAV;QACA,aAAa,GAAG,OAAO,GAAG,OAAO,CAAC,SAAR,KAAoB,CAAvB,GAA2B,CAAlD;QACA,iBAAiB,GAAG,CAApB;QACA,iBAAiB,GAAG,CAApB;QACA,UAAU,GAAG,KAAb;QAEA,KAAK,SAAL,CAAe,CAAf,EAAkB,GAAlB;MACA,CAX6B,EAW3B,KAAK,WAXsB,CAA9B;IAYA,CAbD,EAaG;MAAC,OAAO,EAAE;IAAV,CAbH;IAcA,KAAK,MAAL,EAAa,KAAK,KAAlB,EAAyB,KAAK,UAA9B;IACA,OAAO,CAAC,gBAAR,CAAyB,WAAzB,EAAuC,CAAD,IAAO;MAE5C,IAAI,IAAJ,EAAU,SAAV;;MAEA,IAAG,KAAK,MAAR,EAAe;QACd,CAAC,CAAC,cAAF;QAEA,KAAK,SAAL,CAAe,CAAf;;QAEA,IAAG,CAAC,UAAJ,EAAe;UACd,UAAU,GAAG,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAA1B;QACA;;QAED,IAAI,GAAG,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAAb,GAAqB,UAA5B;;QAEA,IAAG,IAAI,GAAG,CAAV,EAAY;UACX,IAAG,OAAO,IAAI,IAAI,GAAG,iBAAP,GAA2B,aAAzC,EAAuD;YACtD,SAAS,GAAG,OAAZ;;YAEA,IAAG,SAAS,KAAK,GAAjB,EAAqB;cACpB,UAAU,GAAG,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAA1B;cACA,SAAS,CAAC,UAAV,GAAuB,UAAvB,CAAkC,YAAlC,CAA+C,KAAK,kBAApD,EAAwE,SAAS,CAAC,UAAV,GAAuB,WAA/F;cACA,KAAK,OAAL,CAAa,SAAb,EAAwB,IAAxB;YACA;UACD;QACD,CAVD,MAUK;UACJ,IAAG,OAAO,IAAI,CAAC,IAAD,GAAQ,iBAAR,GAA6B,aAA3C,EAAyD;YACxD,SAAS,GAAG,OAAZ;;YAEA,IAAG,SAAS,KAAK,GAAjB,EAAqB;cACpB,UAAU,GAAG,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAA1B;cACA,SAAS,CAAC,UAAV,GAAuB,UAAvB,CAAkC,YAAlC,CAA+C,KAAK,kBAApD,EAAwE,SAAS,CAAC,UAAV,EAAxE;cACA,KAAK,OAAL,CAAa,SAAb,EAAwB,KAAxB;YACA;UACD;QACD;;QAED,IAAG,SAAH,EAAa;UACZ,OAAO,GAAG,SAAS,CAAC,OAAV,EAAV;UACA,iBAAiB,GAAG,aAApB;UACA,aAAa,GAAG,OAAO,GAAG,OAAO,CAAC,SAAR,KAAsB,CAAzB,GAA6B,CAApD;UACA,OAAO,GAAG,SAAS,CAAC,OAAV,EAAV;UACA,iBAAiB,GAAG,aAApB;UACA,aAAa,GAAG,OAAO,GAAG,OAAO,CAAC,SAAR,KAAsB,CAAzB,GAA6B,CAApD;QACA;MACD;IACD,CA9CD;IAgDA,OAAO,CAAC,gBAAR,CAAyB,UAAzB,EAAsC,CAAD,IAAO;MAC3C,IAAG,KAAK,YAAR,EAAqB;QACpB,YAAY,CAAC,KAAK,YAAN,CAAZ;MACA;;MACD,IAAG,KAAK,MAAR,EAAe;QACd,KAAK,OAAL,CAAa,CAAb;QACA,KAAK,SAAL,GAAiB,KAAjB;MACA;IACD,CARD;EASA;;EAED,cAAc,GAAE;IACf,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,GAAuC,OAAvC,CAAgD,GAAD,IAAS;MACvD,IAAG,CAAC,GAAG,CAAC,IAAJ,KAAa,KAAb,IAAsB,GAAG,CAAC,IAAJ,KAAa,OAApC,KAAgD,GAAG,CAAC,OAAJ,CAAY,OAA5D,IAAuE,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAoB,SAA9F,EAAwG;QACvG,GAAG,CAAC,UAAJ,GAAiB,gBAAjB,CAAkC,WAAlC,EAA+C,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAoB,SAAnE;MACA;IACD,CAJD;EAKA;;EAED,gBAAgB,GAAE;IACjB,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,GAAuC,OAAvC,CAAgD,GAAD,IAAS;MACvD,IAAG,CAAC,GAAG,CAAC,IAAJ,KAAa,KAAb,IAAsB,GAAG,CAAC,IAAJ,KAAa,OAApC,KAAgD,GAAG,CAAC,OAAJ,CAAY,OAA5D,IAAuE,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAoB,SAA9F,EAAwG;QACvG,GAAG,CAAC,UAAJ,GAAiB,mBAAjB,CAAqC,WAArC,EAAkD,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAoB,SAAtE;MACA;IACD,CAJD;EAKA;;EAED,SAAS,CAAC,CAAD,EAAI,GAAJ,EAAQ;IAChB,IAAI,OAAO,GAAG,GAAG,CAAC,UAAJ,EAAd;IAEA,KAAK,gBAAL,CAAsB,CAAtB,EAAyB,GAAzB;IAEA,KAAK,MAAL,GAAc,GAAd;IAEA,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,GAA7B,CAAiC,wBAAjC,EAPgB,CASlB;;IACE,KAAK,kBAAL,CAAwB,KAAxB,CAA8B,KAA9B,GAAsC,GAAG,CAAC,QAAJ,KAAiB,IAAvD;IACA,KAAK,kBAAL,CAAwB,KAAxB,CAA8B,MAA9B,GAAuC,GAAG,CAAC,SAAJ,KAAkB,IAAzD;;IAEA,IAAG,CAAC,KAAK,UAAT,EAAoB;MACnB,OAAO,CAAC,UAAR,CAAmB,YAAnB,CAAgC,KAAK,kBAArC,EAAyD,OAAzD;MACA,OAAO,CAAC,UAAR,CAAmB,WAAnB,CAA+B,OAA/B;IACA,CAHD,MAGK;MACJ,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,GAA7B,CAAiC,6BAAjC;MACA,KAAK,eAAL,CAAqB,GAArB;IACA,CAnBe,CAqBlB;;;IACE,KAAK,YAAL,GAAoB,OAAO,CAAC,SAAR,CAAkB,IAAlB,CAApB;IACA,KAAK,YAAL,CAAkB,SAAlB,CAA4B,GAA5B,CAAgC,kBAAhC;;IAEA,IAAG,KAAK,UAAR,EAAmB;MAClB,QAAQ,CAAC,IAAT,CAAc,WAAd,CAA0B,KAAK,YAA/B;MACA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,IAAxB,GAA+B,GAA/B;MACA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,GAAxB,GAA8B,GAA9B;MACA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,KAAxB,GAAgC,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,GAAiC,IAAjE;MACA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,UAAxB,GAAqC,QAArC;MACA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,QAAxB,GAAmC,QAAnC;MACA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,aAAxB,GAAwC,MAAxC;IACA,CARD,MAQK;MACJ,KAAK,KAAL,CAAW,UAAX,CAAsB,eAAtB,GAAwC,WAAxC,CAAoD,KAAK,YAAzD;MAEA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,IAAxB,GAA+B,GAA/B;MACA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,GAAxB,GAA8B,GAA9B;;MAEA,KAAK,cAAL;IACA;;IAED,QAAQ,CAAC,IAAT,CAAc,gBAAd,CAA+B,WAA/B,EAA4C,KAAK,SAAjD;IACA,QAAQ,CAAC,IAAT,CAAc,gBAAd,CAA+B,SAA/B,EAA0C,KAAK,OAA/C;IAEA,KAAK,gBAAL,CAAsB,WAAtB,EAAmC,GAAG,CAAC,YAAJ,EAAnC;IAEA,KAAK,SAAL,CAAe,CAAf;EACA;;EAED,gBAAgB,CAAC,CAAD,EAAI,GAAJ,EAAQ;IACvB,IAAI,KAAK,GAAG,KAAK,SAAL,GAAiB,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAA9B,GAAsC,CAAC,CAAC,KAApD;IAAA,IACA,KAAK,GAAG,KAAK,SAAL,GAAiB,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAA9B,GAAsC,CAAC,CAAC,KADhD;IAAA,IAEA,OAFA;IAAA,IAES,QAFT;IAIA,OAAO,GAAG,GAAG,CAAC,UAAJ,EAAV;;IACA,IAAG,KAAK,UAAR,EAAmB;MAClB,QAAQ,GAAG,OAAO,CAAC,qBAAR,EAAX;MAEA,KAAK,MAAL,GAAc,QAAQ,CAAC,IAAT,GAAgB,KAAhB,GAAwB,MAAM,CAAC,WAA7C;MACA,KAAK,MAAL,GAAc,QAAQ,CAAC,GAAT,GAAe,KAAf,GAAuB,MAAM,CAAC,WAA5C;IACA,CALD,MAKK;MACJ,KAAK,MAAL,GAAe,KAAK,GAAG,OAAO,CAAC,qBAAR,GAAgC,GAAvD;IACA;EACD;;EAED,OAAO,CAAC,CAAD,EAAG;IACT,IAAG,CAAC,CAAD,IAAM,CAAC,CAAC,KAAF,KAAY,CAAlB,IAAuB,KAAK,SAA/B,EAAyC;MACxC,KAAK,gBAAL;;MAEA,IAAG,CAAC,KAAK,UAAT,EAAoB;QACnB,KAAK,kBAAL,CAAwB,UAAxB,CAAmC,YAAnC,CAAgD,KAAK,MAAL,CAAY,UAAZ,EAAhD,EAA0E,KAAK,kBAAL,CAAwB,WAAlG;QACA,KAAK,kBAAL,CAAwB,UAAxB,CAAmC,WAAnC,CAA+C,KAAK,kBAApD;MACA;;MAED,KAAK,YAAL,CAAkB,UAAlB,CAA6B,WAA7B,CAAyC,KAAK,YAA9C;MAEA,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,MAA7B,CAAoC,wBAApC;;MAEA,IAAG,KAAK,KAAR,EAAc;QACb,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,KAAK,MAAnC,EAA2C,KAAK,KAAhD,EAAuD,KAAK,UAA5D;MACA,CAFD,MAEK;QACJ,KAAK,gBAAL,CAAsB,kBAAtB,EAA0C,KAAK,MAAL,CAAY,YAAZ,EAA1C;MACA;;MAED,KAAK,MAAL,GAAc,KAAd;MACA,KAAK,KAAL,GAAa,KAAb;MACA,KAAK,UAAL,GAAkB,KAAlB;MAEA,QAAQ,CAAC,IAAT,CAAc,mBAAd,CAAkC,WAAlC,EAA+C,KAAK,SAApD;MACA,QAAQ,CAAC,IAAT,CAAc,mBAAd,CAAkC,SAAlC,EAA6C,KAAK,OAAlD;;MAEA,IAAG,KAAK,UAAR,EAAmB;QAClB,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,MAA7B,CAAoC,6BAApC;QACA,KAAK,oBAAL;MACA;IACD;EACD;;EAED,OAAO,CAAC,GAAD,EAAM,KAAN,EAAY;IAClB,KAAK,KAAL,GAAa,GAAb;IACA,KAAK,UAAL,GAAkB,KAAlB;EACA;;EAED,SAAS,CAAC,CAAD,EAAG;IACX,IAAG,KAAK,UAAR,EAAmB;MAClB,KAAK,oBAAL,CAA0B,IAA1B,CAA+B,IAA/B,EAAqC,CAArC;IACA,CAFD,MAEK;MACJ,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,EAA+B,CAA/B;IACA;EACD;;EAED,cAAc,CAAC,CAAD,EAAG;IAChB,IAAI,SAAS,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,UAAtB,EAAhB;IAAA,IACA,SAAS,GAAG,SAAS,CAAC,SADtB;IAAA,IAEA,IAAI,GAAI,CAAC,KAAK,SAAL,GAAiB,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAA9B,GAAsC,CAAC,CAAC,KAAzC,IAAkD,SAAS,CAAC,qBAAV,GAAkC,GAArF,GAA4F,SAFnG;IAIA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,GAAxB,GAA8B,IAAI,CAAC,GAAL,CAAS,IAAI,GAAG,KAAK,MAArB,EAA6B,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,YAA9B,GAA6C,KAAK,YAAL,CAAkB,YAA5F,IAA4G,IAA1I;EACA;;EAED,oBAAoB,CAAC,CAAD,EAAG;IACtB,KAAK,YAAL,CAAkB,KAAlB,CAAwB,IAAxB,GAAgC,KAAK,MAAL,IAAe,KAAK,SAAL,GAAiB,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAA9B,GAAsC,CAAC,CAAC,KAAvD,CAAD,GAAkE,IAAjG;IACA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,GAAxB,GAA+B,KAAK,MAAL,IAAe,KAAK,SAAL,GAAiB,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,KAA9B,GAAsC,CAAC,CAAC,KAAvD,CAAD,GAAkE,IAAhG;EACA;;EAED,cAAc,CAAC,CAAD,EAAI,OAAJ,EAAa,GAAb,EAAiB;IAC9B,KAAK,gBAAL,CAAsB,wBAAtB,EAAgD,CAAhD,EAAmD,OAAnD,EAA4D,GAAG,GAAG,GAAG,CAAC,YAAJ,EAAH,GAAwB,KAAvF;EACA,CAjZ2B,CAmZ7B;;;EACC,eAAe,CAAC,GAAD,EAAK;IACnB,IAAI,gBAAJ;;IAEA,IAAG,KAAK,yBAAR,EAAkC;MACjC,gBAAgB,GAAG,KAAK,gBAAL,CAAsB,KAAK,yBAA3B,CAAnB;MAEA,KAAK,gBAAL,CAAsB,yBAAtB,EAAiD,gBAAjD;MAEA,KAAK,SAAL,CAAe,KAAK,yBAApB,EAA+C,SAA/C,EAA0D,SAA1D,EAAqE;QACpE,GAAG,EAAC;MADgE,CAArE;IAGA;;IAED,IAAG,KAAK,2BAAR,EAAoC;MAEnC,KAAK,kBAAL,GAA0B,EAA1B;;MAEA,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,KAAK,2BAAnB,CAAJ,EAAoD;QACnD,KAAK,2BAAL,GAAmC,CAAC,KAAK,2BAAN,CAAnC;MACA;;MAED,KAAK,2BAAL,CAAiC,OAAjC,CAA0C,KAAD,IAAW;QACnD,IAAG,OAAO,KAAP,KAAiB,QAApB,EAA6B;UAC5B,KAAK,kBAAL,GAA0B,KAAK,kBAAL,CAAwB,MAAxB,CAA+B,KAAK,CAAC,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,QAAQ,CAAC,gBAAT,CAA0B,KAA1B,CAA3B,CAA/B,CAA1B;QACA,CAFD,MAEK;UACJ,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,KAA7B;QACA;MACD,CAND;MAQA,KAAK,kBAAL,CAAwB,OAAxB,CAAiC,OAAD,IAAa;QAC5C,IAAI,SAAS,GAAI,CAAD,IAAO;UACtB,KAAK,cAAL,CAAoB,CAApB,EAAuB,OAAvB,EAAgC,KAAK,MAArC;QACA,CAFD;;QAIA,OAAO,CAAC,gBAAR,CAAyB,SAAzB,EAAoC,SAApC;QACA,OAAO,CAAC,yBAAR,GAAoC,SAApC;QAEA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,+BAAtB;MACA,CATD;IAUA;EACD,CA5b2B,CA8b7B;;;EACC,oBAAoB,GAAE;IACrB,IAAI,gBAAJ;;IAEA,IAAG,KAAK,yBAAR,EAAkC;MACjC,gBAAgB,GAAG,KAAK,gBAAL,CAAsB,KAAK,yBAA3B,CAAnB;MAEA,KAAK,gBAAL,CAAsB,wBAAtB,EAAgD,gBAAhD;MAEA,KAAK,SAAL,CAAe,KAAK,yBAApB,EAA+C,SAA/C,EAA0D,YAA1D;IACA;;IAED,KAAK,kBAAL,CAAwB,OAAxB,CAAiC,OAAD,IAAa;MAC5C,OAAO,CAAC,SAAR,CAAkB,MAAlB,CAAyB,+BAAzB;MACA,OAAO,CAAC,mBAAR,CAA4B,SAA5B,EAAuC,OAAO,CAAC,yBAA/C;MACA,OAAO,OAAO,CAAC,yBAAf;IACA,CAJD;EAKA,CA/c2B,CAid7B;;;EACC,OAAO,CAAC,KAAD,EAAQ,GAAR,EAAY;IAClB,IAAG,CAAC,KAAK,cAAT,EAAwB;MACvB,KAAK,cAAL,GAAsB,KAAtB;MACA,KAAK,YAAL,GAAoB,GAApB;MAEA,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,GAA7B,CAAiC,+BAAjC;MAEA,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,GAAuC,OAAvC,CAAgD,GAAD,IAAS;QACvD,IAAG,GAAG,CAAC,IAAJ,KAAa,KAAb,IAAsB,GAAG,CAAC,OAAJ,CAAY,OAAlC,IAA6C,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAoB,OAApE,EAA4E;UAC3E,GAAG,CAAC,UAAJ,GAAiB,gBAAjB,CAAkC,SAAlC,EAA6C,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAoB,OAAjE;QACA;MACD,CAJD;MAMA,KAAK,iBAAL,GAAyB,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAzB;MAEA,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,CAAoC,SAApC,EAA+C,KAAK,iBAApD;MAEA,KAAK,gBAAL,CAAsB,2BAAtB,EAAmD,GAAnD,EAAwD,KAAxD;MAEA,OAAO,IAAP;IACA,CAnBD,MAmBK;MACJ,OAAO,CAAC,IAAR,CAAa,8EAAb,EAA6F,KAAK,cAAlG;MACA,OAAO,KAAP;IACA;EACD,CA1e2B,CA4e7B;;;EACC,UAAU,CAAC,KAAD,EAAO;IAChB,IAAG,KAAK,KAAK,KAAK,cAAlB,EAAiC;MAChC,KAAK,cAAL,GAAsB,KAAtB;MACA,KAAK,YAAL,GAAoB,KAApB;MAEA,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,MAA7B,CAAoC,+BAApC;MAEA,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,GAAuC,OAAvC,CAAgD,GAAD,IAAQ;QACtD,IAAG,GAAG,CAAC,IAAJ,KAAa,KAAb,IAAsB,GAAG,CAAC,OAAJ,CAAY,OAAlC,IAA6C,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAoB,OAApE,EAA4E;UAC3E,GAAG,CAAC,UAAJ,GAAiB,mBAAjB,CAAqC,SAArC,EAAgD,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAoB,OAApE;QACA;MACD,CAJD;MAMA,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAAnB,CAAuC,SAAvC,EAAkD,KAAK,iBAAvD;MAEA,KAAK,gBAAL,CAAsB,0BAAtB,EAAkD,KAAlD;IACA,CAfD,MAeK;MACJ,OAAO,CAAC,IAAR,CAAa,gEAAb;IACA;EACD;;EAED,YAAY,CAAC,KAAD,EAAQ,GAAR,EAAa,OAAb,EAAqB;IAChC,IAAI,MAAM,GAAG,KAAb;;IAEA,IAAG,OAAH,EAAW;MAEV,QAAO,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAjC;QACC,KAAK,QAAL;UACC,MAAM,GAAG,KAAK,OAAL,CAAa,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAhC,CAAT;UACA;;QAED,KAAK,UAAL;UACC,MAAM,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAA5B;UACA;MAPF;;MAUA,IAAG,MAAH,EAAU;QACT,MAAM,CAAC,IAAP,CAAY,IAAZ,EAAkB,KAAK,MAAL,GAAc,KAAK,MAAL,CAAY,YAAZ,EAAd,GAA2C,SAA7D,EAAwE,GAAG,GAAG,GAAG,CAAC,YAAJ,EAAH,GAAwB,SAAnG,EAA8G,KAA9G;MACA,CAFD,MAEK;QACJ,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAtB,EAAwC;UACvC,OAAO,CAAC,IAAR,CAAa,6CAAb,EAA4D,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAA/E;QACA;MACD;;MAED,KAAK,gBAAL,CAAsB,iBAAtB,EAAyC,KAAK,MAAL,CAAY,YAAZ,EAAzC,EAAqE,GAAG,GAAG,GAAG,CAAC,YAAJ,EAAH,GAAwB,SAAhG,EAA2G,KAA3G;IACA,CArBD,MAqBK;MACJ,KAAK,gBAAL,CAAsB,uBAAtB,EAA+C,KAAK,MAAL,CAAY,YAAZ,EAA/C,EAA2E,GAAG,GAAG,GAAG,CAAC,YAAJ,EAAH,GAAwB,SAAtG,EAAiH,KAAjH;IACA;;IAED,KAAK,OAAL;EACA;;EAED,YAAY,CAAC,CAAD,EAAI,GAAJ,EAAQ;IACnB,IAAI,QAAQ,GAAG,KAAf;IAAA,IACA,OAAO,GAAG,KADV;IAGA,CAAC,CAAC,wBAAF;;IAEA,QAAO,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAAjC;MACC,KAAK,QAAL;QACC,QAAQ,GAAG,KAAK,SAAL,CAAe,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAAlC,CAAX;QACA;;MAED,KAAK,UAAL;QACC,QAAQ,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAA9B;QACA;IAPF;;IAUA,IAAG,QAAH,EAAY;MACX,OAAO,GAAG,QAAQ,CAAC,IAAT,CAAc,IAAd,EAAoB,KAAK,YAAL,CAAkB,YAAlB,EAApB,EAAsD,GAAG,GAAG,GAAG,CAAC,YAAJ,EAAH,GAAwB,SAAjF,EAA4F,KAAK,cAAjG,CAAV;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,+CAAb,EAA8D,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAAjF;IACA;;IAED,IAAG,OAAH,EAAW;MACV,KAAK,gBAAL,CAAsB,qBAAtB,EAA6C,KAAK,YAAL,CAAkB,YAAlB,EAA7C,EAA+E,GAAG,GAAG,GAAG,CAAC,YAAJ,EAAH,GAAwB,SAA1G,EAAqH,KAAK,cAA1H;IACA,CAFD,MAEK;MACJ,KAAK,gBAAL,CAAsB,2BAAtB,EAAmD,KAAK,YAAL,CAAkB,YAAlB,EAAnD,EAAqF,GAAG,GAAG,GAAG,CAAC,YAAJ,EAAH,GAAwB,SAAhH,EAA2H,KAAK,cAAhI;IACA;;IAED,KAAK,SAAL,CAAe,KAAK,cAApB,EAAoC,SAApC,EAA+C,cAA/C,EAA+D;MAC9D,GAAG,EAAC,GAD0D;MAE9D,OAAO,EAAC;IAFsD,CAA/D;EAIA;;EAED,aAAa,CAAC,KAAD,EAAQ,MAAR,EAAgB,IAAhB,EAAqB;IACjC,QAAO,MAAP;MACC,KAAK,SAAL;QACC,OAAO,KAAK,OAAL,CAAa,KAAb,EAAoB,IAAI,CAAC,GAAzB,CAAP;;MAED,KAAK,YAAL;QACC,OAAO,KAAK,UAAL,CAAgB,KAAhB,CAAP;;MAED,KAAK,cAAL;QACC,OAAO,KAAK,YAAL,CAAkB,KAAlB,EAAyB,IAAI,CAAC,GAA9B,EAAmC,IAAI,CAAC,OAAxC,CAAP;IARF;EAUA;;AA9kB2B;;;AAilB7B,QAAQ,CAAC,SAAT,CAAmB,SAAnB,GAA+B;EAC9B,MAAM,EAAC,UAAS,OAAT,EAAkB,KAAlB,EAAyB,SAAzB,EAAmC;IACzC,KAAK,KAAL,CAAW,MAAX,CAAkB,OAAO,CAAC,OAAR,EAAlB,EAAqC,SAArC,EAAgD,KAAhD;IACA,OAAO,IAAP;EACA,CAJ6B;EAM9B,GAAG,EAAC,UAAS,OAAT,EAAkB,KAAlB,EAAyB,SAAzB,EAAmC;IACtC,KAAK,KAAL,CAAW,MAAX,CAAkB,OAAO,CAAC,OAAR,EAAlB;IACA,OAAO,IAAP;EACA,CAT6B;EAW9B,MAAM,EAAC,UAAS,OAAT,EAAkB,KAAlB,EAAyB,SAAzB,EAAmC;IACzC,IAAG,KAAH,EAAS;MACR,KAAK,CAAC,MAAN,CAAa,OAAO,CAAC,OAAR,EAAb;MACA,OAAO,IAAP;IACA;;IAED,OAAO,KAAP;EACA,CAlB6B;EAoB9B,OAAO,EAAC,UAAS,OAAT,EAAkB,KAAlB,EAAyB,SAAzB,EAAmC;IAC1C,IAAG,KAAH,EAAS;MACR,KAAK,KAAL,CAAW,MAAX,CAAkB,OAAO,CAAC,OAAR,EAAlB,EAAqC,SAArC,EAAgD,KAAhD;MACA,KAAK,CAAC,MAAN;MACA,OAAO,IAAP;IACA;;IAED,OAAO,KAAP;EACA;AA5B6B,CAA/B;AA+BA,QAAQ,CAAC,SAAT,CAAmB,OAAnB,GAA6B;EAC5B,MAAM,EAAC,UAAS,OAAT,EAAkB,KAAlB,EAAyB,OAAzB,EAAiC;IACvC,OAAO,CAAC,MAAR;EACA;AAH2B,CAA7B;AAMA,QAAQ,CAAC,UAAT,GAAsB,SAAtB;ACznBA,IAAA,eAAA,GAAe,EAAf;;ACIA,MAAM,OAAN,SAAsB,MAAtB,CAA4B;EAE3B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,YAAL,GAAoB,CAAC,EAAD,EAAK,MAAL,EAAa,MAAb,EAAqB,WAArB,CAApB,CAHiB,CAGqC;;IACtD,KAAK,OAAL,GAAe,IAAf;IAEA,KAAK,oBAAL,CAA0B,SAA1B;IACA,KAAK,oBAAL,CAA0B,eAA1B;IACA,KAAK,oBAAL,CAA0B,aAA1B;IACA,KAAK,oBAAL,CAA0B,mBAA1B;IACA,KAAK,oBAAL,CAA0B,aAA1B;IACA,KAAK,oBAAL,CAA0B,mBAA1B;IACA,KAAK,oBAAL,CAA0B,kBAA1B;IACA,KAAK,oBAAL,CAA0B,wBAA1B;IACA,KAAK,oBAAL,CAA0B,YAA1B;EACA;;EAED,UAAU,GAAE;IACX,KAAK,SAAL,CAAe,qBAAf,EAAsC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAtC;IACA,KAAK,SAAL,CAAe,oBAAf,EAAqC,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAArC;IACA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAAhC;IACA,KAAK,SAAL,CAAe,sBAAf,EAAuC,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAAvC;IACA,KAAK,SAAL,CAAe,mBAAf,EAAoC,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAApC;EACA;;EAED,cAAc,CAAC,GAAD,EAAM,QAAN,EAAgB,WAAhB,EAA4B;IACzC,OAAO,KAAK,YAAL,CAAkB,QAAlB,EAA4B,MAA5B,EAAoC,WAApC,CAAP;EACA,CA7B0B,CA+B5B;;;EACC,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAI,KAAK,GAAG,KAAZ;IAAA,IACA,MAAM,GAAG,EADT;IAGA,KAAK,YAAL,CAAkB,OAAlB,CAA2B,IAAD,IAAU;MACnC,IAAI,GAAG,GAAG,aAAa,IAAI,CAAC,MAAL,CAAY,CAAZ,EAAe,WAAf,KAA+B,IAAI,CAAC,KAAL,CAAW,CAAX,CAA5C,CAAV;MAAA,IACA,OADA;;MAGA,IAAG,MAAM,CAAC,UAAP,CAAkB,GAAlB,CAAH,EAA0B;QACzB,OAAO,GAAG,KAAK,aAAL,CAAmB,MAAM,CAAC,UAAP,CAAkB,GAAlB,CAAnB,CAAV;;QAEA,IAAG,OAAH,EAAW;UACV,KAAK,GAAG,IAAR;UAEA,MAAM,CAAC,GAAD,CAAN,GAAc;YACb,OAAO,EAAC,OADK;YAEb,MAAM,EAAE,MAAM,CAAC,UAAP,CAAkB,GAAG,GAAG,QAAxB,KAAqC;UAFhC,CAAd;QAIA;MACD;IACD,CAhBD;;IAkBA,IAAG,KAAH,EAAS;MACR,MAAM,CAAC,OAAP,CAAe,MAAf,GAAwB,MAAxB;IACA;EACD;;EAED,aAAa,CAAC,KAAD,EAAO;IACnB,IAAI,OAAO,GAAG,KAAd,CADmB,CAGrB;;IACE,QAAO,OAAO,KAAd;MACC,KAAK,QAAL;QACC,IAAG,OAAO,CAAC,QAAR,CAAiB,KAAjB,CAAH,EAA2B;UAC1B,OAAO,GAAG,OAAO,CAAC,QAAR,CAAiB,KAAjB,CAAV;QACA,CAFD,MAEK;UACJ,OAAO,CAAC,IAAR,CAAa,mDAAb,EAAkE,KAAlE;QACA;;QACD;;MAED,KAAK,UAAL;QACC,OAAO,GAAG,KAAV;QACA;IAXF;;IAcA,OAAO,OAAP;EACA,CA9E0B,CAgF5B;;;EACC,YAAY,CAAC,IAAD,EAAO,IAAP,EAAa,WAAb,EAAyB;IACpC,IAAI,GAAG,GAAG,aAAa,IAAI,CAAC,MAAL,CAAY,CAAZ,EAAe,WAAf,KAA+B,IAAI,CAAC,KAAL,CAAW,CAAX,CAA5C,CAAV;IAAA,IACA,KADA;;IAGA,IAAG,KAAK,OAAR,EAAgB;MAEf,KAAK,KAAL,CAAW,aAAX,CAAyB,QAAzB,CAAmC,MAAD,IAAY;QAC7C,IAAI,OAAJ,EAAa,MAAb,EAAqB,SAArB;;QAEA,IAAG,MAAM,CAAC,OAAP,CAAe,MAAlB,EAAyB;UACxB,OAAO,GAAG,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,GAAtB,KAA8B,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,OAApD,IAA+D,KAAzE;;UAEA,IAAG,OAAH,EAAW;YACV,KAAK,GAAG,MAAM,CAAC,aAAP,CAAqB,OAAO,WAAP,KAAuB,WAAvB,GAAqC,WAArC,GAAmD,IAAxE,CAAR;;YAEA,IAAG,IAAI,IAAI,MAAR,IAAkB,OAAO,KAAP,KAAiB,WAAtC,EAAkD;cACjD,SAAS,GAAG,MAAM,CAAC,YAAP,EAAZ;cACA,MAAM,GAAG,OAAO,OAAO,CAAC,MAAf,KAA0B,UAA1B,GAAuC,OAAO,CAAC,MAAR,CAAe,KAAf,EAAsB,IAAtB,EAA4B,IAA5B,EAAkC,SAAlC,CAAvC,GAAsF,OAAO,CAAC,MAAvG;cACA,MAAM,CAAC,aAAP,CAAqB,IAArB,EAA2B,OAAO,CAAC,OAAR,CAAgB,KAAhB,EAAuB,IAAvB,EAA6B,IAA7B,EAAmC,MAAnC,EAA2C,SAA3C,CAA3B;YACA;UACD;QACD;MACD,CAhBD;IAiBA;;IAED,OAAO,IAAP;EACA,CA3G0B,CA6G5B;;;EACC,aAAa,CAAC,IAAD,EAAO,KAAP,EAAa;IACzB,IAAG,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,MAAvB,EAA8B;MAC7B,IAAI,OAAO,GAAG,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,MAApB,CAA2B,WAA3B,IAA0C,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,MAApB,CAA2B,OAArE,IAAgF,KAA9F;MAAA,IACA,QAAQ,GAAG,EADX;;MAGA,IAAG,OAAH,EAAW;QACV,QAAQ,GAAG,MAAM,CAAC,MAAP,CAAc,QAAd,EAAwB,IAAI,CAAC,GAAL,CAAS,OAAT,EAAxB,CAAX;QACA,IAAI,CAAC,MAAL,CAAY,aAAZ,CAA0B,QAA1B,EAAoC,KAApC;QACA,OAAO,OAAO,CAAC,OAAR,CAAgB,KAAhB,EAAuB,QAAvB,EAAiC,MAAjC,EAAyC,OAAO,CAAC,MAAjD,EAAyD,IAAI,CAAC,YAAL,EAAzD,CAAP;MACA;IACD;;IAED,OAAO,KAAP;EACA;;EAED,UAAU,CAAC,IAAD,EAAM;IACf,IAAI,KAAK,GAAG,IAAI,CAAC,MAAL,CAAY,UAAZ,CAAuB,UAAnC;;IAEA,IAAG,KAAH,EAAS;MACR,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,KAAd,CAAJ,EAAyB;QACxB,KAAK,GAAG,CAAC,KAAD,CAAR;MACA;;MAED,KAAK,CAAC,OAAN,CAAe,IAAD,IAAU;QACvB,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAL,CAAS,OAAT,CAAiB,IAAjB,CAAf;;QAEA,IAAG,QAAH,EAAY;UACX,QAAQ,CAAC,QAAT,CAAkB,QAAQ,CAAC,QAAT,EAAlB,EAAuC,IAAvC,EAA6C,IAA7C;QACA;MACD,CAND;IAOA;EACD;;EAED,MAAM,GAAE;IACP,KAAK,OAAL,GAAe,IAAf;EACA;;EAED,OAAO,GAAE;IACR,KAAK,OAAL,GAAe,KAAf;EACA;;AArJ0B;;;AAwJ5B,OAAO,CAAC,UAAR,GAAqB,SAArB,EAEA;;AACA,OAAO,CAAC,QAAR,GAAmB,eAAnB;;AC/Je,SAAA,IAAA,CAAS,QAAT,EAAmB,UAAnB,EAA+B,WAA/B,EAA4C,SAA5C,EAAuD,UAAvD,EAAkE;EAChF,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAT;EAAA,IACA,SAAS,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CADZ;EAAA,IAEA,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAFV;EAAA,IAGA,IAAI,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAHP;EAAA,IAIA,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAJV;EAAA,IAKA,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CALT;EAOA,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,CAA4B,QAA5B,CAAqC,4BAArC,EAAoE,KAAD,IAAW;IAC7E,SAAS,CAAC,SAAV,GAAsB,KAAtB;EACA,CAFD;EAIA,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,CAA4B,QAA5B,CAAqC,uBAArC,EAA+D,KAAD,IAAW;IACxE,IAAI,CAAC,SAAL,GAAiB,KAAjB;EACA,CAFD;EAIA,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,CAA4B,QAA5B,CAAqC,yBAArC,EAAiE,KAAD,IAAW;IAC1E,MAAM,CAAC,SAAP,GAAmB,KAAnB;EACA,CAFD;;EAIA,IAAG,SAAH,EAAa;IACZ,OAAO,CAAC,SAAR,GAAoB,MAAM,UAAN,GAAmB,GAAnB,GAAyB,IAAI,CAAC,GAAL,CAAU,UAAU,GAAG,QAAb,GAAwB,CAAlC,EAAsC,SAAtC,CAAzB,GAA4E,GAAhG;IAEA,OAAO,CAAC,SAAR,GAAoB,MAAM,SAAN,GAAkB,GAAtC;IAEA,EAAE,CAAC,WAAH,CAAe,SAAf;IACA,EAAE,CAAC,WAAH,CAAe,OAAf;IACA,EAAE,CAAC,WAAH,CAAe,IAAf;IACA,EAAE,CAAC,WAAH,CAAe,OAAf;IACA,EAAE,CAAC,WAAH,CAAe,MAAf;EACA,CAVD,MAUK;IACJ,OAAO,CAAC,SAAR,GAAoB,KAApB;IAEA,EAAE,CAAC,WAAH,CAAe,SAAf;IACA,EAAE,CAAC,WAAH,CAAe,OAAf;IACA,EAAE,CAAC,WAAH,CAAe,MAAf;EACA;;EAED,OAAO,EAAP;AACD;;ACvCe,SAAA,KAAA,CAAS,QAAT,EAAmB,UAAnB,EAA+B,WAA/B,EAA4C,SAA5C,EAAuD,UAAvD,EAAkE;EAEhF,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAT;EAAA,IACA,SAAS,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CADZ;EAAA,IAEA,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAFV;EAAA,IAGA,IAAI,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAHP;EAAA,IAIA,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAJV;EAAA,IAKA,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CALT;EAOA,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,CAA4B,QAA5B,CAAqC,4BAArC,EAAoE,KAAD,IAAW;IAC7E,SAAS,CAAC,SAAV,GAAsB,KAAtB;EACA,CAFD;EAIA,OAAO,CAAC,SAAR,GAAoB,MAAM,WAAN,GAAoB,GAAxC;EAEA,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,CAA4B,QAA5B,CAAqC,uBAArC,EAA+D,KAAD,IAAW;IACxE,IAAI,CAAC,SAAL,GAAiB,KAAjB;EACA,CAFD;EAIA,OAAO,CAAC,SAAR,GAAoB,MAAM,UAAN,GAAmB,GAAvC;EAEA,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,CAA4B,QAA5B,CAAqC,0BAArC,EAAkE,KAAD,IAAW;IAC3E,MAAM,CAAC,SAAP,GAAmB,KAAnB;EACA,CAFD;EAIA,EAAE,CAAC,WAAH,CAAe,SAAf;EACA,EAAE,CAAC,WAAH,CAAe,OAAf;EACA,EAAE,CAAC,WAAH,CAAe,IAAf;EACA,EAAE,CAAC,WAAH,CAAe,OAAf;EACA,EAAE,CAAC,WAAH,CAAe,MAAf;EAEA,OAAO,EAAP;AACD;;AC5BA,IAAA,mBAAA,GAAe;EACd,IAAI,EAAC,IADS;EAEd,KAAK,EAAC;AAFQ,CAAf;;ACAA,MAAM,IAAN,SAAmB,MAAnB,CAAyB;EAExB,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,IAAL,GAAY,OAAZ;IACA,KAAK,eAAL,GAAuB,KAAvB;IAEA,KAAK,OAAL,GAAe,IAAf;IACA,KAAK,kBAAL,GAA0B,IAA1B;IACA,KAAK,WAAL,GAAmB,IAAnB;IAEA,KAAK,IAAL,GAAY,CAAZ;IACA,KAAK,IAAL,GAAY,CAAZ;IACA,KAAK,KAAL,GAAa,CAAb;IACA,KAAK,GAAL,GAAW,CAAX;IAEA,KAAK,sBAAL,GAA8B,IAA9B;IAEA,KAAK,YAAL,GAAoB,CAApB,CAjBiB,CAiBK;;IAEtB,KAAK,WAAL,GAAmB,IAAnB;IACA,KAAK,YAAL,GAAoB,KAApB,CApBiB,CAoBS;;IAE1B,KAAK,SAAL,GAAiB,EAAjB;IAEA,KAAK,mBAAL,CAAyB,YAAzB,EAAuC,KAAvC,EAxBiB,CAwB6B;;IAC9C,KAAK,mBAAL,CAAyB,gBAAzB,EAA2C,OAA3C,EAzBiB,CAyBmC;;IACpD,KAAK,mBAAL,CAAyB,gBAAzB,EAA2C,KAA3C,EA1BiB,CA0BiC;;IAClD,KAAK,mBAAL,CAAyB,uBAAzB,EAAkD,CAAlD,EA3BiB,CA2BoC;;IACrD,KAAK,mBAAL,CAAyB,mBAAzB,EAA8C,KAA9C,EA5BiB,CA4BoC;;IACrD,KAAK,mBAAL,CAAyB,0BAAzB,EAAqD,KAArD,EA7BiB,CA6B2C;;IAC5D,KAAK,mBAAL,CAAyB,uBAAzB,EAAkD,CAAlD,EA9BiB,CA8BoC;;IACrD,KAAK,mBAAL,CAAyB,wBAAzB,EAAmD,KAAnD,EA/BiB,CA+ByC;;IAC1D,KAAK,mBAAL,CAAyB,mBAAzB,EAA8C,KAA9C,EAhCiB,CAgCoC;IACvD;IACA;;IACE,KAAK,mBAAL,CAAyB,kBAAzB,EAA6C,MAA7C,EAnCiB,CAmCoC;;IAErD,KAAK,mBAAL,CAAyB,iBAAzB,EAA4C,KAA5C,EArCiB,CAqCkC;;IACnD,KAAK,mBAAL,CAAyB,sBAAzB,EAAiD,CAAjD,EAtCiB,CAsCmC;;IACpD,KAAK,mBAAL,CAAyB,6BAAzB,EAAwD,CAAxD,EAvCiB,CAuC0C;;IAE3D,KAAK,qBAAL,CAA2B,YAA3B,EAAyC,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAAzC;IACA,KAAK,qBAAL,CAA2B,SAA3B,EAAsC,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAtC;IACA,KAAK,qBAAL,CAA2B,cAA3B,EAA2C,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA3C;IACA,KAAK,qBAAL,CAA2B,aAA3B,EAA0C,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAA1C;IACA,KAAK,qBAAL,CAA2B,aAA3B,EAA0C,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAA1C;IACA,KAAK,qBAAL,CAA2B,cAA3B,EAA2C,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAA3C;IACA,KAAK,qBAAL,CAA2B,UAA3B,EAAuC,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAAvC;IACA,KAAK,qBAAL,CAA2B,SAA3B,EAAsC,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAtC;IACA,KAAK,qBAAL,CAA2B,YAA3B,EAAyC,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAAzC,EAjDiB,CAmDnB;;IACE,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,QAAtC,EAAgD,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAhD;EACA;;EAED,UAAU,GAAE;IACX,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAtB,EAAiC;MAChC,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAA9B;MACA,KAAK,SAAL,CAAe,WAAf,EAA4B,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAA5B;MACA,KAAK,SAAL,CAAe,gBAAf,EAAiC,KAAK,mBAAL,CAAyB,IAAzB,CAA8B,IAA9B,CAAjC;MACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAA9B;MACA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAhC;;MAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,IAAuC,MAA1C,EAAiD;QAChD,KAAK,SAAL,CAAe,qBAAf,EAAsC,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,IAA5B,CAAtC;MACA;;MAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAnB,KAAsC,QAAzC,EAAkD;QACjD,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA9B;QACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA9B;MACA;;MAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,eAAtB,EAAsC;QACrC,OAAO,CAAC,KAAR,CAAc,0FAAd;MACA;;MAED,KAAK,sBAAL,CAA4B,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAA5B,EAAgE,EAAhE;MACA,KAAK,sBAAL,CAA4B,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAA5B,EAAqD,EAArD;MAEA,KAAK,cAAL;MACA,KAAK,qBAAL;MACA,KAAK,mBAAL;IACA,CA1BD,MA0BM,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,eAAtB,EAAsC;MAC3C,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA9B;MACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA9B;MACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAA9B;MACA,KAAK,SAAL,CAAe,gBAAf,EAAiC,KAAK,mBAAL,CAAyB,IAAzB,CAA8B,IAA9B,CAAjC;MAEA,KAAK,qBAAL,CAA2B,KAAK,KAAL,CAAW,OAAX,CAAmB,eAA9C;;MAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,eAAnB,KAAuC,QAA1C,EAAmD;QAClD,KAAK,SAAL,CAAe,iBAAf,EAAkC,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAAlC;MACA;IACD;EACD;;EAED,iBAAiB,CAAC,GAAD,EAAM,GAAN,EAAU;IAC1B,IAAI,UAAU,GAAG,KAAK,KAAL,CAAW,UAA5B;IAAA,IACA,WAAW,GAAG,UAAU,CAAC,cAAX,EADd;IAAA,IAEA,KAFA;;IAIA,IAAG,GAAH,EAAO;MACN,IAAG,WAAW,CAAC,MAAf,EAAsB;QACrB,KAAK,GAAG,WAAW,CAAC,CAAD,CAAnB;MACA,CAFD,MAEK;QACJ,IAAG,UAAU,CAAC,UAAX,CAAsB,MAAzB,EAAgC;UAC/B,KAAK,GAAG,UAAU,CAAC,UAAX,CAAsB,UAAU,CAAC,UAAX,CAAsB,MAAtB,GAA6B,CAAnD,CAAR;UACA,GAAG,GAAG,KAAN;QACA;MACD;IACD,CATD,MASK;MACJ,IAAG,WAAW,CAAC,MAAf,EAAsB;QACrB,KAAK,GAAG,WAAW,CAAC,WAAW,CAAC,MAAZ,GAAqB,CAAtB,CAAnB;QACA,GAAG,GAAG,WAAW,CAAC,MAAZ,GAAqB,KAAK,IAA1B,GAAiC,KAAjC,GAAyC,IAA/C;MACA;IACD;;IAED,OAAO;MAAC,KAAD;MAAQ;IAAR,CAAP;EACA;;EAED,kBAAkB,GAAE;IACnB,IAAI,SAAJ,EAAe,UAAf;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAtB,EAAqC;MACpC,KAAK,IAAL,GAAY,KAAK,KAAL,CAAW,OAAX,CAAmB,cAA/B;IACA,CAFD,MAEK;MACJ,SAAS,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAZ;MACA,SAAS,CAAC,SAAV,CAAoB,GAApB,CAAwB,eAAxB;MACA,SAAS,CAAC,KAAV,CAAgB,UAAhB,GAA6B,QAA7B;MAEA,UAAU,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAb;MACA,UAAU,CAAC,SAAX,CAAqB,GAArB,CAAyB,gBAAzB;MACA,UAAU,CAAC,SAAX,GAAuB,eAAvB;MAEA,SAAS,CAAC,WAAV,CAAsB,UAAtB;MAEA,KAAK,KAAL,CAAW,UAAX,CAAsB,eAAtB,GAAwC,WAAxC,CAAoD,SAApD;MAEA,KAAK,IAAL,GAAY,IAAI,CAAC,KAAL,CAAW,KAAK,KAAL,CAAW,UAAX,CAAsB,UAAtB,GAAmC,YAAnC,GAAkD,SAAS,CAAC,YAAvE,CAAZ;MAEA,KAAK,KAAL,CAAW,UAAX,CAAsB,eAAtB,GAAwC,WAAxC,CAAoD,SAApD;IACA;;IAED,KAAK,gBAAL,CAAsB,iBAAtB,EAAyC,KAAK,IAA9C;IAEA,KAAK,0BAAL;EACA;;EAED,mBAAmB,GAAE;IACpB,KAAK,WAAL,GAAmB,KAAnB;EACA;;EAED,gBAAgB,CAAC,IAAD,EAAO,MAAP,EAAe,MAAf,EAAuB,MAAvB,EAA8B;IAC7C,IAAG,CAAC,KAAK,WAAT,EAAqB;MACpB,IAAI,KAAK,eAAL,IAAwB,CAAC,MAA1B,IAAsC,CAAC,KAAK,eAAN,IAAyB,CAAC,KAAK,YAAxE,EAAsF;QACrF,KAAK,KAAL,CAAW,IAAX;MACA;IACD,CAL4C,CAO/C;;;IACE,MAAM,CAAC,IAAP,GAAc,KAAK,IAAnB,CAR6C,CAU/C;;IACE,IAAG,KAAK,IAAR,EAAa;MACZ,MAAM,CAAC,IAAP,GAAc,KAAK,IAAnB;IACA;;IAED,OAAO,MAAP;EACA,CA1KuB,CA4KzB;EACA;EACA;;;EAEC,gBAAgB,CAAC,GAAD,EAAK;IACpB,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAtB,EAAiC;MAChC,GAAG,GAAG,KAAK,UAAL,CAAgB,OAAhB,CAAwB,GAAxB,CAAN;;MAEA,IAAG,GAAH,EAAO;QACN,OAAO,KAAK,YAAL,CAAkB,GAAlB,CAAP;MACA;IACD;;IAED,OAAO,OAAO,CAAC,MAAR,EAAP;EACA;;EAED,eAAe,CAAC,IAAD,EAAM;IACpB,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAtB,EAAiC;MAChC,KAAK,WAAL,CAAiB,IAAjB;MACA,OAAO,KAAK,OAAL,CAAa,CAAb,CAAP;IACA,CAHD,MAGK;MACJ,OAAO,KAAP;IACA;EACD,CAnMuB,CAoMzB;EACA;EACA;;;EAEC,cAAc,CAAC,GAAD,EAAM,GAAN,EAAU;IACvB,IAAI,OAAJ,EAAa,IAAb,EAAmB,MAAnB;;IACA,IAAG,CAAC,GAAD,IAAQ,CAAC,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAlC,EAA0C;MACzC,OAAO,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,UAAtB,EAAV;MACA,IAAI,GAAG,OAAO,CAAC,YAAR,GAAuB,OAAO,CAAC,YAA/B,GAA8C,GAArD;MACA,MAAM,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,2BAAnB,IAAmD,OAAO,CAAC,YAAR,GAAuB,CAAnF;;MAEA,IAAG,IAAI,GAAG,MAAV,EAAiB;QAChB,KAAK,QAAL,GACE,KADF,CACQ,MAAM,CAAE,CADhB,EADgB,CAEE;MAClB;IACD;EACD;;EAED,kBAAkB,CAAC,IAAD,EAAO,gBAAP,EAAwB;IACzC,IAAG,CAAC,gBAAJ,EAAqB;MACpB,IAAG,KAAK,IAAL,KAAc,OAAjB,EAAyB;QACxB,KAAK,KAAL;MACA;IACD;;IAED,OAAO,IAAP;EACA;;EAED,WAAW,GAAE;IACZ,KAAK,WAAL,CAAiB,IAAjB,EAAuB,KAAvB;EACA;;EAED,cAAc,GAAE;IACf,IAAI,MAAJ;IAEA,KAAK,OAAL,GAAe,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAf;IACA,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,qBAA3B;IAEA,KAAK,YAAL,GAAoB,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAApB;IACA,KAAK,YAAL,CAAkB,SAAlB,CAA4B,GAA5B,CAAgC,iBAAhC;IAEA,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAT;IACA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,gBAArB;IACA,MAAM,CAAC,YAAP,CAAoB,MAApB,EAA4B,QAA5B;IACA,MAAM,CAAC,YAAP,CAAoB,MAApB,EAA4B,QAA5B;IACA,MAAM,CAAC,YAAP,CAAoB,YAApB,EAAkC,EAAlC;IACA,MAAM,CAAC,YAAP,CAAoB,OAApB,EAA6B,EAA7B;IAEA,KAAK,QAAL,GAAgB,MAAM,CAAC,SAAP,CAAiB,IAAjB,CAAhB;IACA,KAAK,QAAL,CAAc,YAAd,CAA2B,WAA3B,EAAwC,OAAxC;IAEA,KAAK,OAAL,GAAe,MAAM,CAAC,SAAP,CAAiB,IAAjB,CAAf;IACA,KAAK,OAAL,CAAa,YAAb,CAA0B,WAA1B,EAAuC,MAAvC;IAEA,KAAK,OAAL,GAAe,MAAM,CAAC,SAAP,CAAiB,IAAjB,CAAf;IACA,KAAK,OAAL,CAAa,YAAb,CAA0B,WAA1B,EAAuC,MAAvC;IAEA,KAAK,OAAL,GAAe,MAAM,CAAC,SAAP,CAAiB,IAAjB,CAAf;IACA,KAAK,OAAL,CAAa,YAAb,CAA0B,WAA1B,EAAuC,MAAvC;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,sBAAtB,EAA6C;MAC5C,KAAK,cAAL,GAAsB,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAtB;MACA,KAAK,cAAL,CAAoB,SAApB,CAA8B,GAA9B,CAAkC,qBAAlC;IACA;EACD;;EAED,0BAA0B,GAAE;IAC3B,IAAI,SAAS,GAAG,EAAhB;;IAEA,IAAG,KAAK,cAAR,EAAuB;MAEtB,IAAG,KAAK,CAAC,OAAN,CAAc,KAAK,KAAL,CAAW,OAAX,CAAmB,sBAAjC,CAAH,EAA4D;QAC3D,SAAS,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,sBAA/B;QACA,KAAK,SAAL,GAAiB,SAAjB;;QAEA,IAAG,KAAK,SAAL,CAAe,OAAf,CAAuB,KAAK,IAA5B,KAAqC,CAAC,CAAzC,EAA2C;UAC1C,SAAS,CAAC,OAAV,CAAkB,KAAK,IAAvB;QACA;MACD,CAPD,MAOK;QAEJ,IAAG,KAAK,SAAL,CAAe,OAAf,CAAuB,KAAK,IAA5B,KAAqC,CAAC,CAAzC,EAA2C;UAC1C,SAAS,GAAG,EAAZ;;UAEA,KAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,CAApB,EAAuB,CAAC,EAAxB,EAA2B;YAC1B,SAAS,CAAC,IAAV,CAAe,KAAK,IAAL,GAAY,CAA3B;UACA;;UAED,KAAK,SAAL,GAAiB,SAAjB;QACA,CARD,MAQK;UACJ,SAAS,GAAG,KAAK,SAAjB;QACA;MACD;;MAED,OAAM,KAAK,cAAL,CAAoB,UAA1B,EAAsC,KAAK,cAAL,CAAoB,WAApB,CAAgC,KAAK,cAAL,CAAoB,UAApD;;MAEtC,SAAS,CAAC,OAAV,CAAmB,IAAD,IAAU;QAC3B,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAb;QACA,MAAM,CAAC,KAAP,GAAe,IAAf;;QAEA,IAAG,IAAI,KAAK,IAAZ,EAAiB;UAChB,KAAK,QAAL,CAAc,gBAAd,EAAgC,UAAS,KAAT,EAAe;YAC9C,MAAM,CAAC,SAAP,GAAmB,KAAnB;UACA,CAFD;QAGA,CAJD,MAIK;UACJ,MAAM,CAAC,SAAP,GAAmB,IAAnB;QACA;;QAID,KAAK,cAAL,CAAoB,WAApB,CAAgC,MAAhC;MACA,CAfD;MAiBA,KAAK,cAAL,CAAoB,KAApB,GAA4B,KAAK,IAAjC;IACA;EACD;;EAED,qBAAqB,GAAE;IACtB,IAAI,OAAO,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAjC;IAAA,IACA,WAAW,GAAG,IADd;;IAGA,IAAG,OAAH,EAAW;MACV,IAAG,OAAO,OAAP,KAAmB,UAAtB,EAAiC;QAChC,WAAW,GAAG,OAAd;MACA,CAFD,MAEK;QACJ,WAAW,GAAG,IAAI,CAAC,YAAL,CAAkB,OAAlB,CAAd;MACA;;MAED,IAAG,WAAH,EAAe;QACd,KAAK,WAAL,GAAmB,WAAnB;QAEA,KAAK,kBAAL,GAA0B,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAA1B;QACA,KAAK,kBAAL,CAAwB,SAAxB,CAAkC,GAAlC,CAAsC,wBAAtC;MACA,CALD,MAKK;QACJ,OAAO,CAAC,IAAR,CAAa,iDAAb,EAAgE,OAAhE;MACA;IACD;EACD,CA5UuB,CA8UzB;;;EACC,mBAAmB,CAAC,MAAD,EAAQ;IAC1B,IAAI,eAAJ,EAAqB,uBAArB;;IAEA,IAAG,CAAC,MAAJ,EAAW;MACb;MAEA;MACG,KAAK,QAAL,CAAc,kBAAd,EAAmC,KAAD,IAAW;QAC5C,KAAK,QAAL,CAAc,SAAd,GAA0B,KAA1B;MACA,CAFD;MAIA,KAAK,QAAL,CAAc,wBAAd,EAAyC,KAAD,IAAW;QAClD,KAAK,QAAL,CAAc,YAAd,CAA2B,YAA3B,EAAyC,KAAzC;QACA,KAAK,QAAL,CAAc,YAAd,CAA2B,OAA3B,EAAoC,KAApC;MACA,CAHD;MAKA,KAAK,QAAL,CAAc,iBAAd,EAAkC,KAAD,IAAW;QAC3C,KAAK,OAAL,CAAa,SAAb,GAAyB,KAAzB;MACA,CAFD;MAIA,KAAK,QAAL,CAAc,uBAAd,EAAwC,KAAD,IAAW;QACjD,KAAK,OAAL,CAAa,YAAb,CAA0B,YAA1B,EAAwC,KAAxC;QACA,KAAK,OAAL,CAAa,YAAb,CAA0B,OAA1B,EAAmC,KAAnC;MACA,CAHD;MAKA,KAAK,QAAL,CAAc,iBAAd,EAAkC,KAAD,IAAW;QAC3C,KAAK,OAAL,CAAa,SAAb,GAAyB,KAAzB;MACA,CAFD;MAIA,KAAK,QAAL,CAAc,uBAAd,EAAwC,KAAD,IAAW;QACjD,KAAK,OAAL,CAAa,YAAb,CAA0B,YAA1B,EAAwC,KAAxC;QACA,KAAK,OAAL,CAAa,YAAb,CAA0B,OAA1B,EAAmC,KAAnC;MACA,CAHD;MAKA,KAAK,QAAL,CAAc,iBAAd,EAAkC,KAAD,IAAW;QAC3C,KAAK,OAAL,CAAa,SAAb,GAAyB,KAAzB;MACA,CAFD;MAIA,KAAK,QAAL,CAAc,uBAAd,EAAwC,KAAD,IAAW;QACjD,KAAK,OAAL,CAAa,YAAb,CAA0B,YAA1B,EAAwC,KAAxC;QACA,KAAK,OAAL,CAAa,YAAb,CAA0B,OAA1B,EAAmC,KAAnC;MACA,CAHD,EAnCU,CAwCb;;MACG,KAAK,QAAL,CAAc,gBAAd,CAA+B,OAA/B,EAAwC,MAAM;QAC7C,KAAK,OAAL,CAAa,CAAb;MACA,CAFD;MAIA,KAAK,OAAL,CAAa,gBAAb,CAA8B,OAA9B,EAAuC,MAAM;QAC5C,KAAK,YAAL;MACA,CAFD;MAIA,KAAK,OAAL,CAAa,gBAAb,CAA8B,OAA9B,EAAuC,MAAM;QAC5C,KAAK,QAAL;MACA,CAFD;MAIA,KAAK,OAAL,CAAa,gBAAb,CAA8B,OAA9B,EAAuC,MAAM;QAC5C,KAAK,OAAL,CAAa,KAAK,GAAlB;MACA,CAFD;;MAIA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAtB,EAAwC;QACvC,KAAK,OAAL,GAAe,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAlC;MACA;;MAED,IAAG,KAAK,cAAR,EAAuB;QACtB,eAAe,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAlB;QAEA,KAAK,QAAL,CAAc,sBAAd,EAAuC,KAAD,IAAW;UAChD,KAAK,cAAL,CAAoB,YAApB,CAAiC,YAAjC,EAA+C,KAA/C;UACA,KAAK,cAAL,CAAoB,YAApB,CAAiC,OAAjC,EAA0C,KAA1C;UACA,eAAe,CAAC,SAAhB,GAA4B,KAA5B;QACA,CAJD;QAMA,KAAK,OAAL,CAAa,WAAb,CAAyB,eAAzB;QACA,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,cAA9B;QAEA,KAAK,cAAL,CAAoB,gBAApB,CAAqC,QAArC,EAAgD,CAAD,IAAO;UACrD,KAAK,WAAL,CAAiB,KAAK,cAAL,CAAoB,KAApB,IAA6B,MAA7B,GAAsC,IAAtC,GAA6C,KAAK,cAAL,CAAoB,KAAlF;UACA,KAAK,OAAL,CAAa,CAAb;QACA,CAHD;MAIA,CA7ES,CA+Eb;;;MACG,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,QAA9B;MACA,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,OAA9B;MACA,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,YAA9B;MACA,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,OAA9B;MACA,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,OAA9B;;MAEA,IAAG,CAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAvB,EAAyC;QACxC,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAtB,EAAwC;UAIvC,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,wBAAtB,EAA+C;YAC9C,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,wBAAnB,YAAuD,WAA1D,EAAsE;cACrE,KAAK,KAAL,CAAW,OAAX,CAAmB,wBAAnB,CAA4C,WAA5C,CAAwD,KAAK,kBAA7D;YACA,CAFD,MAEM,IAAG,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,wBAA1B,KAAuD,QAA1D,EAAmE;cACxE,uBAAuB,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAK,KAAL,CAAW,OAAX,CAAmB,wBAA1C,CAA1B;;cAEA,IAAG,uBAAH,EAA2B;gBAC1B,uBAAuB,CAAC,WAAxB,CAAoC,KAAK,kBAAzC;cACA,CAFD,MAEK;gBACJ,OAAO,CAAC,IAAR,CAAa,uFAAb,EAAsG,KAAK,KAAL,CAAW,OAAX,CAAmB,wBAAzH;cACA;YACD;UACD,CAZD,MAYK;YACJ,KAAK,YAAL,CAAkB,KAAK,kBAAvB;UACA;QAED;;QAED,KAAK,YAAL,CAAkB,KAAK,OAAvB;MACA;;MAED,KAAK,IAAL,GAAY,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAA/B;MACA,KAAK,KAAL,GAAa,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAhC;IACA,CArHyB,CAuH5B;;;IACE,KAAK,IAAL,GAAY,KAAK,KAAL,CAAW,OAAX,CAAmB,cAA/B;EACA;;EAED,qBAAqB,CAAC,IAAD,EAAM;IAC1B,KAAK,mBAAL,CAAyB,IAAzB;IACA,KAAK,IAAL,GAAY,iBAAiB,IAA7B;IACA,KAAK,eAAL,GAAuB,IAAvB;EACA;;EAED,YAAY,GAAE;IACb,KAAK,QAAL,CAAc,cAAd;EACA;;EAED,eAAe,CAAC,KAAD,EAAO;IACrB,KAAK,YAAL,GAAoB,KAApB;EACA;;EAED,eAAe,GAAE;IAChB,OAAO,KAAK,YAAZ;EACA,CA1duB,CA4dzB;;;EACC,UAAU,CAAC,QAAD,EAAU;IACnB,IAAG,CAAC,QAAJ,EAAa;MACZ,KAAK,GAAL,GAAW,CAAX;IACA,CAFD,MAEK;MACJ,KAAK,GAAL,GAAW,KAAK,IAAL,KAAc,IAAd,GAAsB,CAAtB,GAA0B,IAAI,CAAC,IAAL,CAAU,QAAQ,GAAC,KAAK,IAAxB,CAArC;IACA;;IAED,IAAG,KAAK,IAAL,GAAY,KAAK,GAApB,EAAwB;MACvB,KAAK,IAAL,GAAY,KAAK,GAAjB;IACA;EACD,CAveuB,CAyezB;;;EACC,KAAK,CAAC,KAAD,EAAO;IACX,IAAG,CAAC,KAAK,WAAT,EAAqB;MACpB,IAAG,KAAK,IAAL,IAAa,OAAb,IAAwB,KAA3B,EAAiC;QAChC,KAAK,IAAL,GAAY,CAAZ;MACA;IACD;EACD,CAhfuB,CAkfzB;;;EACC,UAAU,CAAC,GAAD,EAAK;IAEd,GAAG,GAAG,QAAQ,CAAC,GAAD,CAAd;IAEA,KAAK,GAAL,GAAW,GAAG,IAAI,CAAlB;;IAEA,IAAG,KAAK,IAAL,GAAY,KAAK,GAApB,EAAwB;MACvB,KAAK,IAAL,GAAY,KAAK,GAAjB;MACA,KAAK,OAAL;IACA;EACD,CA7fuB,CA+fzB;;;EACC,OAAO,CAAC,IAAD,EAAM;IACZ,QAAO,IAAP;MACC,KAAK,OAAL;QACC,OAAO,KAAK,OAAL,CAAa,CAAb,CAAP;;MAED,KAAK,MAAL;QACC,OAAO,KAAK,YAAL,EAAP;;MAED,KAAK,MAAL;QACC,OAAO,KAAK,QAAL,EAAP;;MAED,KAAK,MAAL;QACC,OAAO,KAAK,OAAL,CAAa,KAAK,GAAlB,CAAP;IAXF;;IAcA,IAAI,GAAG,QAAQ,CAAC,IAAD,CAAf;;IAEA,IAAI,IAAI,GAAG,CAAP,IAAY,IAAI,IAAI,KAAK,GAA1B,IAAkC,KAAK,IAAL,KAAc,OAAnD,EAA2D;MAC1D,KAAK,IAAL,GAAY,IAAZ;MAEA,KAAK,YAAL;MAEA,OAAO,KAAK,OAAL,EAAP;IACA,CAND,MAMK;MACJ,OAAO,CAAC,IAAR,CAAa,8DAA8D,KAAK,GAAnE,GAAyE,GAAtF,EAA2F,IAA3F;MACA,OAAO,OAAO,CAAC,MAAR,EAAP;IACA;EACD;;EAED,YAAY,CAAC,GAAD,EAAK;IAChB,IAAI,IAAI,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,KAAK,YAAL,GAAoB,CAAzD,CAAX;IACA,IAAI,KAAK,GAAG,IAAI,CAAC,OAAL,CAAa,GAAb,CAAZ;;IAEA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;MACb,IAAI,IAAI,GAAG,KAAK,IAAL,KAAc,IAAd,GAAqB,CAArB,GAAyB,IAAI,CAAC,IAAL,CAAU,CAAC,KAAK,GAAG,CAAT,IAAc,KAAK,IAA7B,CAApC;MAEA,OAAO,KAAK,OAAL,CAAa,IAAb,CAAP;IACA,CAJD,MAIK;MACJ,OAAO,CAAC,IAAR,CAAa,iDAAb;MACA,OAAO,OAAO,CAAC,MAAR,EAAP;IACA;EACD;;EAED,WAAW,CAAC,IAAD,EAAM;IAChB,IAAG,IAAI,KAAK,IAAZ,EAAiB;MAChB,IAAI,GAAG,QAAQ,CAAC,IAAD,CAAf;IACA;;IAED,IAAG,IAAI,GAAG,CAAV,EAAY;MACX,KAAK,IAAL,GAAY,IAAZ;MACA,KAAK,gBAAL,CAAsB,iBAAtB,EAAyC,IAAzC;IACA;;IAED,IAAG,KAAK,cAAR,EAAuB;MACzB;MACG,KAAK,0BAAL;IACA;;IAED,KAAK,YAAL;EACA;;EAED,eAAe,CAAC,SAAD,EAAY,IAAZ,EAAkB,UAAlB,EAA6B;IAC3C,IAAI,OAAJ;;IAEA,IAAG,KAAK,WAAR,EAAoB;MAEnB,IAAG,KAAK,IAAL,KAAc,QAAjB,EAA0B;QACzB,IAAI,GAAG,KAAK,IAAZ;QACA,UAAU,GAAI,CAAC,KAAK,IAAL,GAAY,CAAb,IAAkB,KAAK,IAAxB,GAAgC,CAA7C;QACA,SAAS,GAAG,KAAK,sBAAjB;MACA;;MAED,OAAO,GAAG,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,EAA4B,IAA5B,EAAkC,UAAlC,EAA8C,KAAK,IAAnD,EAAyD,SAAzD,EAAoE,KAAK,GAAzE,CAAV;;MAEA,QAAO,OAAO,OAAd;QACC,KAAK,QAAL;UACC,IAAG,OAAO,YAAY,IAAtB,EAA2B;YAEhC;YACM,OAAM,KAAK,kBAAL,CAAwB,UAA9B,EAA0C,KAAK,kBAAL,CAAwB,WAAxB,CAAoC,KAAK,kBAAL,CAAwB,UAA5D;;YAE1C,KAAK,kBAAL,CAAwB,WAAxB,CAAoC,OAApC;UACA,CAND,MAMK;YACJ,KAAK,kBAAL,CAAwB,SAAxB,GAAoC,EAApC;;YAEA,IAAG,OAAO,IAAI,IAAd,EAAmB;cAClB,OAAO,CAAC,IAAR,CAAa,+JAAb,EAA8K,OAA9K;YACA;UACD;;UACD;;QACD,KAAK,WAAL;UACC,KAAK,kBAAL,CAAwB,SAAxB,GAAoC,EAApC;UACA;;QACD;UACC,KAAK,kBAAL,CAAwB,SAAxB,GAAoC,OAApC;MApBF;IAsBA;EACD,CAjmBuB,CAmmBzB;;;EACC,eAAe,GAAE;IAChB,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAL,CAAW,CAAC,KAAK,KAAL,GAAW,CAAZ,IAAiB,CAA5B,CAAf;IACA,IAAI,SAAS,GAAG,IAAI,CAAC,IAAL,CAAU,CAAC,KAAK,KAAL,GAAW,CAAZ,IAAiB,CAA3B,CAAhB;IACA,IAAI,GAAG,GAAG,KAAK,GAAL,GAAW,KAAK,IAAhB,GAAuB,QAAvB,GAAkC,CAAlC,GAAsC,KAAK,KAA3C,GAAmD,KAAK,GAAL,GAAS,KAAK,KAAd,GAAoB,CAAvE,GAA0E,IAAI,CAAC,GAAL,CAAS,KAAK,IAAL,GAAU,QAAnB,EAA4B,CAA5B,CAApF;IACA,IAAI,GAAG,GAAG,KAAK,IAAL,IAAa,SAAb,GAAwB,IAAI,CAAC,GAAL,CAAS,KAAK,KAAd,EAAqB,KAAK,GAA1B,CAAxB,GAAwD,IAAI,CAAC,GAAL,CAAS,KAAK,IAAL,GAAU,SAAnB,EAA8B,KAAK,GAAnC,CAAlE;;IAEA,OAAM,KAAK,YAAL,CAAkB,UAAxB,EAAoC,KAAK,YAAL,CAAkB,WAAlB,CAA8B,KAAK,YAAL,CAAkB,UAAhD;;IAEpC,IAAG,KAAK,IAAL,IAAa,CAAhB,EAAkB;MACjB,KAAK,QAAL,CAAc,QAAd,GAAyB,IAAzB;MACA,KAAK,OAAL,CAAa,QAAb,GAAwB,IAAxB;IACA,CAHD,MAGK;MACJ,KAAK,QAAL,CAAc,QAAd,GAAyB,KAAzB;MACA,KAAK,OAAL,CAAa,QAAb,GAAwB,KAAxB;IACA;;IAED,IAAG,KAAK,IAAL,IAAa,KAAK,GAArB,EAAyB;MACxB,KAAK,OAAL,CAAa,QAAb,GAAwB,IAAxB;MACA,KAAK,OAAL,CAAa,QAAb,GAAwB,IAAxB;IACA,CAHD,MAGK;MACJ,KAAK,OAAL,CAAa,QAAb,GAAwB,KAAxB;MACA,KAAK,OAAL,CAAa,QAAb,GAAwB,KAAxB;IACA;;IAED,KAAI,IAAI,CAAC,GAAG,GAAZ,EAAiB,CAAC,IAAI,GAAtB,EAA2B,CAAC,EAA5B,EAA+B;MAC9B,IAAG,CAAC,GAAC,CAAF,IAAO,CAAC,IAAI,KAAK,GAApB,EAAwB;QACvB,KAAK,YAAL,CAAkB,WAAlB,CAA8B,KAAK,mBAAL,CAAyB,CAAzB,CAA9B;MACA;IACD;;IAED,KAAK,YAAL;EACA;;EAED,mBAAmB,CAAC,IAAD,EAAM;IACxB,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAb;IAEA,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,gBAArB;;IACA,IAAG,IAAI,IAAI,KAAK,IAAhB,EAAqB;MACpB,MAAM,CAAC,SAAP,CAAiB,GAAjB,CAAqB,QAArB;IACA;;IAED,MAAM,CAAC,YAAP,CAAoB,MAApB,EAA4B,QAA5B;IACA,MAAM,CAAC,YAAP,CAAoB,MAApB,EAA4B,QAA5B;IAEA,KAAK,QAAL,CAAc,uBAAd,EAAwC,KAAD,IAAW;MACjD,MAAM,CAAC,YAAP,CAAoB,YAApB,EAAkC,KAAK,GAAG,GAAR,GAAc,IAAhD;MACA,MAAM,CAAC,YAAP,CAAoB,OAApB,EAA6B,KAAK,GAAG,GAAR,GAAc,IAA3C;IACA,CAHD;IAKA,MAAM,CAAC,YAAP,CAAoB,WAApB,EAAiC,IAAjC;IACA,MAAM,CAAC,WAAP,GAAqB,IAArB;IAEA,MAAM,CAAC,gBAAP,CAAwB,OAAxB,EAAkC,CAAD,IAAO;MACvC,KAAK,OAAL,CAAa,IAAb;IACA,CAFD;IAIA,OAAO,MAAP;EACA,CA7pBuB,CA+pBzB;;;EACC,YAAY,GAAE;IACb,IAAG,KAAK,IAAL,GAAY,CAAf,EAAiB;MAChB,KAAK,IAAL;MAEA,KAAK,YAAL;MAEA,OAAO,KAAK,OAAL,EAAP;IAEA,CAPD,MAOK;MACJ,OAAO,CAAC,IAAR,CAAa,6DAAb,EAA4E,CAA5E;MACA,OAAO,OAAO,CAAC,MAAR,EAAP;IACA;EACD,CA5qBuB,CA8qBzB;;;EACC,QAAQ,GAAE;IACT,IAAG,KAAK,IAAL,GAAY,KAAK,GAApB,EAAwB;MACvB,KAAK,IAAL;MAEA,KAAK,YAAL;MAEA,OAAO,KAAK,OAAL,EAAP;IAEA,CAPD,MAOK;MACJ,IAAG,CAAC,KAAK,eAAT,EAAyB;QACxB,OAAO,CAAC,IAAR,CAAa,wEAAwE,KAAK,GAA7E,GAAmF,GAAhG,EAAqG,KAAK,GAAL,GAAW,CAAhH;MACA;;MACD,OAAO,OAAO,CAAC,MAAR,EAAP;IACA;EACD,CA7rBuB,CA+rBzB;;;EACC,OAAO,GAAE;IACR,OAAO,KAAK,IAAZ;EACA,CAlsBuB,CAosBzB;;;EACC,UAAU,GAAE;IACX,OAAO,KAAK,GAAZ;EACA;;EAED,WAAW,CAAC,IAAD,EAAM;IAChB,OAAO,KAAK,IAAZ;EACA;;EAED,OAAO,GAAE;IACR,OAAO,KAAK,IAAZ;EACA,CA/sBuB,CAitBzB;;;EACC,OAAO,CAAC,IAAD,EAAM;IACZ,IAAI,iBAAiB,GAAG,CAAxB;IAAA,IACA,MADA;IAAA,IACQ,KADR;IAAA,IACe,GADf;IAAA,IACoB,cADpB;IAGA,IAAI,UAAU,GAAG,IAAI,CAAC,MAAL,CAAa,GAAD,IAAS;MACrC,OAAO,GAAG,CAAC,IAAJ,KAAa,KAApB;IACA,CAFgB,CAAjB;;IAIA,IAAG,KAAK,IAAL,IAAa,OAAhB,EAAwB;MACvB,MAAM,GAAG,EAAT;MAEA,KAAK,UAAL,CAAgB,IAAI,CAAC,MAArB;;MAEA,IAAG,KAAK,IAAL,KAAc,IAAjB,EAAsB;QACrB,KAAK,GAAG,CAAR;QACA,GAAG,GAAG,IAAI,CAAC,MAAX;MACA,CAHD,MAGK;QACJ,KAAK,GAAG,KAAK,IAAL,IAAa,KAAK,IAAL,GAAY,CAAzB,CAAR;QACA,GAAG,GAAG,KAAK,GAAG,QAAQ,CAAC,KAAK,IAAN,CAAtB;MACA;;MAED,KAAK,eAAL;;MAEA,KAAI,IAAI,CAAC,GAAG,KAAZ,EAAmB,CAAC,GAAG,GAAvB,EAA4B,CAAC,EAA7B,EAAgC;QAC/B,IAAI,GAAG,GAAG,IAAI,CAAC,CAAD,CAAd;;QAEA,IAAG,GAAH,EAAO;UACN,MAAM,CAAC,IAAP,CAAY,GAAZ;;UAEA,IAAG,GAAG,CAAC,IAAJ,KAAa,KAAhB,EAAsB;YACrB,IAAG,CAAC,cAAJ,EAAmB;cAClB,cAAc,GAAG,GAAjB;YACA;;YAED,iBAAiB;UACjB;QACD;MACD;;MAED,KAAK,eAAL,CAAqB,UAAU,CAAC,MAAhC,EAAwC,iBAAxC,EAA2D,cAAc,GAAI,UAAU,CAAC,OAAX,CAAmB,cAAnB,IAAqC,CAAzC,GAA8C,CAAvH;;MAEA,OAAO,MAAP;IACA,CAlCD,MAkCK;MACJ,KAAK,eAAL;;MACA,KAAK,eAAL,CAAqB,UAAU,CAAC,MAAhC;;MAEA,OAAO,IAAI,CAAC,KAAL,CAAW,CAAX,CAAP;IACA;EACD;;EAED,OAAO,GAAE;IACR,IAAI,IAAJ;;IAEA,QAAO,KAAK,IAAZ;MACC,KAAK,OAAL;QACC,IAAI,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,UAA7B;QAEA,KAAK,WAAL;QACA,KAAK,KAAL,CAAW,UAAX,CAAsB,gBAAtB,CAAuC,IAAvC;QAEA,KAAK,gBAAL,CAAsB,YAAtB,EAAoC,KAAK,OAAL,EAApC;QAEA,OAAO,OAAO,CAAC,OAAR,EAAP;;MAED,KAAK,QAAL;QACC,KAAK,YAAL,GAAoB,IAApB;QACA,OAAO,KAAK,UAAL,CAAgB,IAAhB,EACL,OADK,CACG,MAAM;UACd,KAAK,YAAL,GAAoB,KAApB;QACA,CAHK,CAAP;;MAKD,KAAK,kBAAL;MACA,KAAK,oBAAL;QACC,OAAO,KAAK,UAAL,CAAgB,IAAhB,EAAsB,IAAtB,CAAP;;MAED;QACC,OAAO,CAAC,IAAR,CAAa,6CAAb,EAA4D,KAAK,IAAjE;QACA,OAAO,OAAO,CAAC,MAAR,EAAP;IAxBF;EA0BA;;EAED,gBAAgB,CAAC,IAAD,EAAM;IACrB,IAAI,MAAJ;;IAEA,IAAG,OAAO,IAAI,CAAC,SAAZ,KAA0B,WAA7B,EAAyC;MACxC,OAAO,CAAC,IAAR,CAAa,yDAAyD,KAAK,OAAL,CAAa,mBAAb,EAAkC,SAAlC,IAA+C,WAAxG,IAAuH,YAApI;IACA;;IAED,IAAG,IAAI,CAAC,IAAR,EAAa;MACZ,KAAK,GAAL,GAAW,QAAQ,CAAC,IAAI,CAAC,SAAN,CAAR,IAA4B,CAAvC;MAEA,KAAK,sBAAL,GAA8B,OAAO,IAAI,CAAC,QAAZ,KAAyB,WAAzB,GAAuC,IAAI,CAAC,QAA5C,GAAwD,IAAI,CAAC,SAAL,GAAiB,KAAK,IAAtB,IAA8B,KAAK,IAAL,IAAa,IAAI,CAAC,SAAlB,GAA+B,KAAK,IAAL,GAAY,IAAI,CAAC,IAAL,CAAU,MAArD,GAA+D,CAA7F,CAAtF;;MAEA,IAAG,KAAK,eAAR,EAAwB;QACvB,QAAO,KAAK,IAAZ;UACC,KAAK,kBAAL;YAEC,IAAG,KAAK,IAAL,IAAa,CAAhB,EAAkB;cACjB,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,IAAI,CAAC,IAAnC,EAAyC,KAAzC,EAAgD,KAAK,IAAL,IAAa,CAA7D;YACA,CAFD,MAEK;cACJ,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,IAAI,CAAC,IAAnC;YACA;;YAED,IAAG,KAAK,IAAL,GAAY,KAAK,GAApB,EAAwB;cACvB,UAAU,CAAC,MAAM;gBAChB,KAAK,QAAL;cACA,CAFS,EAEP,KAAK,KAAL,CAAW,OAAX,CAAmB,oBAFZ,CAAV;YAGA;;YACD;;UAED,KAAK,oBAAL;YACC,IAAI,GAAG,KAAK,IAAL,KAAc,CAAd,GAAkB,IAAI,CAAC,IAAvB,GAA8B,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,GAAgC,MAAhC,CAAuC,IAAI,CAAC,IAA5C,CAArC;YAEA,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,IAA9B,EAAoC,KAAK,IAAL,KAAc,CAAlD,EAAqD,KAAK,IAAL,IAAa,CAAlE;YAEA,MAAM,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,2BAAnB,IAAmD,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,YAA9B,GAA6C,CAAzG;;YAEA,IAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,YAA9B,IAA+C,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,YAA9B,GAA6C,MAA/F,EAAuG;cACtG,IAAG,KAAK,IAAL,GAAY,KAAK,GAApB,EAAwB;gBACvB,UAAU,CAAC,MAAM;kBAChB,KAAK,QAAL;gBACA,CAFS,CAAV;cAGA;YACD;;YACD;QA9BF;;QAiCA,OAAO,KAAP;MACA,CAnCD,MAmCK;QACR;QACI,KAAK,gBAAL,CAAsB,YAAtB,EAAqC,KAAK,OAAL,EAArC,EAFI,CAGR;QACA;MACI;IAED,CA/CD,MA+CK;MACJ,OAAO,CAAC,IAAR,CAAa,yDAAyD,KAAK,OAAL,CAAa,mBAAb,EAAkC,IAAlC,IAA0C,MAAnG,IAA6G,YAA1H;IACA;;IAED,OAAO,IAAI,CAAC,IAAZ;EACA,CA91BuB,CAg2BzB;;;EACC,YAAY,GAAE;IACb,IAAI,MAAM,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,gBAAtC;;IAEA,IAAI,IAAI,CAAC,IAAL,CAAU,MAAM,CAAC,WAAjB,IAAgC,MAAM,CAAC,WAAxC,GAAuD,CAA1D,EAA4D;MAC3D,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,GAAkC,MAAlC;IACA,CAFD,MAEK;MACJ,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,GAAkC,EAAlC;;MAEA,IAAI,IAAI,CAAC,IAAL,CAAU,MAAM,CAAC,WAAjB,IAAgC,MAAM,CAAC,WAAxC,GAAuD,CAA1D,EAA4D;QAC3D,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,GAAkC,MAAlC;MACA;IACD;EACD;;AA72BuB;;;AAg3BzB,IAAI,CAAC,UAAL,GAAkB,MAAlB,EAEA;;AACA,IAAI,CAAC,YAAL,GAAoB,mBAApB,ECv3BA;;AACA,IAAA,cAAA,GAAe;EACd,KAAK,EAAC,UAAS,EAAT,EAAa,IAAb,EAAkB;IACvB,IAAI,IAAI,GAAG,YAAY,CAAC,OAAb,CAAqB,EAAE,GAAG,GAAL,GAAW,IAAhC,CAAX;IAEA,OAAO,IAAI,GAAG,IAAI,CAAC,KAAL,CAAW,IAAX,CAAH,GAAsB,KAAjC;EACA,CALa;EAMd,MAAM,EAAC,UAAS,EAAT,EAAa,IAAb,EAAkB;IACxB,IAAI,MAAM,GAAG,QAAQ,CAAC,MAAtB;IAAA,IACA,GAAG,GAAG,EAAE,GAAG,GAAL,GAAW,IADjB;IAAA,IAEA,SAAS,GAAG,MAAM,CAAC,OAAP,CAAe,GAAG,GAAG,GAArB,CAFZ;IAAA,IAGA,GAHA;IAAA,IAGK,IAHL,CADwB,CAM1B;;IACE,IAAG,SAAS,GAAG,CAAC,CAAhB,EAAkB;MACjB,MAAM,GAAG,MAAM,CAAC,KAAP,CAAa,SAAb,CAAT;MAEA,GAAG,GAAG,MAAM,CAAC,OAAP,CAAe,GAAf,CAAN;;MAEA,IAAG,GAAG,GAAG,CAAC,CAAV,EAAY;QACX,MAAM,GAAG,MAAM,CAAC,KAAP,CAAa,CAAb,EAAgB,GAAhB,CAAT;MACA;;MAED,IAAI,GAAG,MAAM,CAAC,OAAP,CAAe,GAAG,GAAG,GAArB,EAA0B,EAA1B,CAAP;IACA;;IAED,OAAO,IAAI,GAAG,IAAI,CAAC,KAAL,CAAW,IAAX,CAAH,GAAsB,KAAjC;EACA;AA1Ba,CAAf,ECDA;;AACA,IAAA,cAAA,GAAe;EACd,KAAK,EAAC,UAAS,EAAT,EAAa,IAAb,EAAmB,IAAnB,EAAwB;IAC7B,YAAY,CAAC,OAAb,CAAqB,EAAE,GAAG,GAAL,GAAW,IAAhC,EAAsC,IAAI,CAAC,SAAL,CAAe,IAAf,CAAtC;EACA,CAHa;EAId,MAAM,EAAC,UAAS,EAAT,EAAa,IAAb,EAAmB,IAAnB,EAAwB;IAC9B,IAAI,UAAU,GAAG,IAAI,IAAJ,EAAjB;IAEA,UAAU,CAAC,OAAX,CAAmB,UAAU,CAAC,OAAX,KAAuB,KAA1C;IAEA,QAAQ,CAAC,MAAT,GAAkB,EAAE,GAAG,GAAL,GAAW,IAAX,GAAkB,GAAlB,GAAwB,IAAI,CAAC,SAAL,CAAe,IAAf,CAAxB,GAA+C,YAA/C,GAA8D,UAAU,CAAC,WAAX,EAAhF;EACA;AAVa,CAAf;;ACIA,MAAM,WAAN,SAA0B,MAA1B,CAAgC;EAE/B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,IAAL,GAAY,EAAZ;IACA,KAAK,EAAL,GAAU,EAAV,CAJiB,CAKnB;;IACE,KAAK,eAAL,GAAuB,KAAvB;IACA,KAAK,MAAL,GAAc,EAAd;IACA,KAAK,QAAL,GAAgB,KAAhB;IACA,KAAK,SAAL,GAAiB,KAAjB;IAEA,KAAK,mBAAL,CAAyB,aAAzB,EAAwC,KAAxC;IACA,KAAK,mBAAL,CAAyB,eAAzB,EAA0C,EAA1C,EAZiB,CAY6B;;IAC9C,KAAK,mBAAL,CAAyB,iBAAzB,EAA4C,IAA5C,EAbiB,CAaiC;;IAClD,KAAK,mBAAL,CAAyB,uBAAzB,EAAkD,KAAlD,EAdiB,CAcwC;;IACzD,KAAK,mBAAL,CAAyB,uBAAzB,EAAkD,KAAlD,EAfiB,CAewC;EACzD,CAlB8B,CAoBhC;;;EACC,gBAAgB,GAAG;IAClB,IAAK,OAAO,GAAI,iBAAhB;;IAEA,IAAI;MACH,MAAM,CAAC,YAAP,CAAoB,OAApB,CAA6B,OAA7B,EAAsC,OAAtC;MACA,MAAM,CAAC,YAAP,CAAoB,UAApB,CAAgC,OAAhC;MACA,OAAO,IAAP;IACA,CAJD,CAIE,OAAM,CAAN,EAAS;MACV,OAAO,KAAP;IACA;EACD,CA/B8B,CAiChC;;;EACC,UAAU,GAAE;IACX,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAtB,EAAkC;MACpC;MACG,IAAI,IAAI,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,eAA9B;MAAA,IACA,EAAE,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,aADxB;MAAA,IAEA,aAFA;MAIA,KAAK,IAAL,GAAY,IAAI,KAAK,IAAT,GAAiB,IAAjB,GAAyB,KAAK,gBAAL,KAA0B,OAA1B,GAAoC,QAAzE;;MAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAtB,EAA4C;QAC3C,IAAG,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAA1B,KAAoD,UAAvD,EAAkE;UACjE,KAAK,QAAL,GAAgB,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAnC;QACA,CAFD,MAEK;UACJ,IAAG,WAAW,CAAC,OAAZ,CAAoB,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAvC,CAAH,EAAiE;YAChE,KAAK,QAAL,GAAgB,WAAW,CAAC,OAAZ,CAAoB,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAvC,CAAhB;UACA,CAFD,MAEK;YACJ,OAAO,CAAC,IAAR,CAAa,6CAAb,EAA4D,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAA/E;UACA;QACD;MACD,CAVD,MAUK;QACJ,IAAG,WAAW,CAAC,OAAZ,CAAoB,KAAK,IAAzB,CAAH,EAAkC;UACjC,KAAK,QAAL,GAAgB,WAAW,CAAC,OAAZ,CAAoB,KAAK,IAAzB,CAAhB;QACA,CAFD,MAEK;UACJ,OAAO,CAAC,IAAR,CAAa,6CAAb,EAA4D,KAAK,IAAjE;QACA;MACD;;MAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAtB,EAA4C;QAC3C,IAAG,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAA1B,KAAoD,UAAvD,EAAkE;UACjE,KAAK,SAAL,GAAiB,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAApC;QACA,CAFD,MAEK;UACJ,IAAG,WAAW,CAAC,OAAZ,CAAoB,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAvC,CAAH,EAAiE;YAChE,KAAK,SAAL,GAAiB,WAAW,CAAC,OAAZ,CAAoB,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAvC,CAAjB;UACA,CAFD,MAEK;YACJ,OAAO,CAAC,IAAR,CAAa,8CAAb,EAA6D,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAhF;UACA;QACD;MACD,CAVD,MAUK;QACJ,IAAG,WAAW,CAAC,OAAZ,CAAoB,KAAK,IAAzB,CAAH,EAAkC;UACjC,KAAK,SAAL,GAAiB,WAAW,CAAC,OAAZ,CAAoB,KAAK,IAAzB,CAAjB;QACA,CAFD,MAEK;UACJ,OAAO,CAAC,IAAR,CAAa,8CAAb,EAA6D,KAAK,IAAlE;QACA;MACD,CA1CgC,CA4CpC;;;MACG,KAAK,EAAL,GAAU,gBAAgB,EAAE,IAAK,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAnB,CAAgC,IAAhC,KAAyC,EAAhE,CAAV;MAEA,KAAK,MAAL,GAAc;QACb,IAAI,EAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,KAAmC,IAAnC,IAA2C,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,IADlE;QAEb,MAAM,EAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,KAAmC,IAAnC,IAA2C,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,MAFpE;QAGb,KAAK,EAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,KAAmC,IAAnC,IAA2C,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,KAHnE;QAIb,IAAI,EAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,KAAmC,IAAnC,IAA2C,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,IAJlE;QAKb,OAAO,EAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,KAAmC,IAAnC,GAA0C,CAAC,OAAD,EAAU,OAAV,EAAmB,SAAnB,CAA1C,GAA0E,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B;MALpG,CAAd,CA/CiC,CAuDpC;;MACG,IAAG,KAAK,MAAL,CAAY,IAAf,EAAoB;QACnB,aAAa,GAAG,KAAK,YAAL,CAAkB,MAAlB,CAAhB;;QAEA,IAAG,aAAH,EAAiB;UAChB,IAAG,OAAO,aAAa,CAAC,cAArB,KAAwC,WAAxC,KAAwD,KAAK,MAAL,CAAY,IAAZ,KAAqB,IAArB,IAA6B,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAtG,CAAH,EAA+G;YAC9G,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAnB,GAAoC,aAAa,CAAC,cAAlD;UACA;;UAED,IAAG,OAAO,aAAa,CAAC,qBAArB,KAA+C,WAA/C,KAA+D,KAAK,MAAL,CAAY,IAAZ,KAAqB,IAArB,IAA6B,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAA7G,CAAH,EAAsH;YACrH,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAnB,GAA2C,aAAa,CAAC,qBAAzD;UACA;QACD;MACD,CApEgC,CAsEpC;;;MACG,IAAG,KAAK,MAAL,CAAY,KAAf,EAAqB;QACpB,aAAa,GAAG,KAAK,YAAL,CAAkB,OAAlB,CAAhB;;QAEA,IAAG,aAAH,EAAiB;UAChB,IAAG,OAAO,aAAa,CAAC,OAArB,KAAiC,WAAjC,KAAiD,KAAK,MAAL,CAAY,KAAZ,KAAsB,IAAtB,IAA8B,KAAK,MAAL,CAAY,KAAZ,CAAkB,OAAjG,CAAH,EAA6G;YAC5G,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,GAA6B,aAAa,CAAC,OAA3C;UACA;;UACD,IAAG,OAAO,aAAa,CAAC,cAArB,KAAwC,WAAxC,KAAwD,KAAK,MAAL,CAAY,KAAZ,KAAsB,IAAtB,IAA8B,KAAK,MAAL,CAAY,KAAZ,CAAkB,cAAxG,CAAH,EAA2H;YAC1H,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAnB,GAAoC,aAAa,CAAC,cAAlD;UACA;;UACD,IAAG,OAAO,aAAa,CAAC,WAArB,KAAqC,WAArC,KAAqD,KAAK,MAAL,CAAY,KAAZ,KAAsB,IAAtB,IAA8B,KAAK,MAAL,CAAY,KAAZ,CAAkB,WAArG,CAAH,EAAqH;YACpH,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,GAAiC,aAAa,CAAC,WAA/C;UACA;QACD;MACD;;MAED,IAAG,KAAK,MAAL,CAAY,OAAf,EAAuB;QACtB,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,GAA6B,KAAK,IAAL,CAAU,SAAV,EAAqB,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAxC,CAA7B;QACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA9B;QACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,EAAqB,SAArB,CAA9B;QACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,EAAqB,SAArB,CAA9B;QACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,EAAqB,SAArB,CAA/B;MACA;;MAED,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAA9B,EAA0D,CAA1D;MAEA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAA/B;MAEA,KAAK,SAAL,CAAe,gBAAf,EAAiC,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,EAA0B,QAA1B,CAAjC;MACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,EAA0B,MAA1B,CAA/B;MACA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,EAA0B,OAA1B,CAAhC;MACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,EAA0B,MAA1B,CAA/B;MACA,KAAK,SAAL,CAAe,gBAAf,EAAiC,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,EAA0B,SAA1B,CAAjC;MACA,KAAK,SAAL,CAAe,kBAAf,EAAmC,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,EAA0B,SAA1B,CAAnC;IACA;;IAED,KAAK,qBAAL,CAA2B,iBAA3B,EAA8C,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAA9C;IACA,KAAK,qBAAL,CAA2B,iBAA3B,EAA8C,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAA9C;EACA;;EAED,SAAS,CAAC,IAAD,EAAM;IACd,IAAG,KAAK,MAAL,CAAY,IAAZ,CAAH,EAAqB;MACpB,KAAK,IAAL,CAAU,IAAV;IACA;EACD;;EAED,UAAU,GAAE;IACX,IAAI,OAAJ,EAAa,OAAb;;IAEA,IAAG,KAAK,MAAL,CAAY,IAAf,EAAoB;MACnB,OAAO,GAAG,KAAK,IAAL,CAAU,MAAV,CAAV;;MAEA,IAAG,CAAC,OAAD,KAAa,KAAhB,EAAsB;QACrB,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,GAAiC,OAAjC;MACA;IACD;;IAED,IAAG,KAAK,MAAL,CAAY,MAAf,EAAsB;MACrB,OAAO,GAAG,KAAK,IAAL,CAAU,QAAV,CAAV;;MAEA,IAAG,CAAC,OAAD,KAAa,KAAhB,EAAsB;QACrB,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,GAAmC,OAAnC;MACA;IACD;EACD;;EAED,WAAW,CAAC,KAAD,EAAO;IACjB,IAAG,KAAK,IAAI,KAAK,MAAL,CAAY,OAAxB,EAAgC;MAC/B,KAAK,IAAL,CAAU,SAAV;IACA;EACD,CAhL8B,CAkLhC;EACA;EACA;;;EAEC,eAAe,GAAE;IAChB,OAAO,KAAK,YAAL,CAAkB,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzB,EAAlB,CAAP;EACA;;EAED,eAAe,CAAC,MAAD,EAAQ;IACtB,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzB,CAAoC,KAAK,eAAL,CAAqB,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAxC,EAAiD,MAAjD,CAApC;IACA,OAAO,IAAP;EACA,CA7L8B,CA+LhC;EACA;EACA;;;EAEC,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAI,GAAJ,EAAS,IAAT;;IAEA,IAAG,KAAK,MAAL,CAAY,OAAf,EAAuB;MACtB,KAAK,eAAL,GAAuB,IAAvB;MAEA,GAAG,GAAG,MAAM,CAAC,aAAP,EAAN;MAEA,IAAI,GAAG,KAAK,MAAL,CAAY,OAAZ,KAAwB,IAAxB,GAA+B,MAAM,CAAC,IAAP,CAAY,GAAZ,CAA/B,GAAkD,KAAK,MAAL,CAAY,OAArE;MAEA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAO;QACnB,IAAI,KAAK,GAAG,MAAM,CAAC,wBAAP,CAAgC,GAAhC,EAAqC,GAArC,CAAZ;QACA,IAAI,KAAK,GAAG,GAAG,CAAC,GAAD,CAAf;;QACA,IAAG,KAAH,EAAS;UACR,MAAM,CAAC,cAAP,CAAsB,GAAtB,EAA2B,GAA3B,EAAgC;YAC/B,GAAG,EAAE,UAAS,QAAT,EAAkB;cACtB,KAAK,GAAG,QAAR;;cAEA,IAAG,CAAC,KAAK,eAAT,EAAyB;gBACxB,KAAK,IAAL,CAAU,SAAV;cACA;;cAED,IAAG,KAAK,CAAC,GAAT,EAAa;gBACZ,KAAK,CAAC,GAAN,CAAU,QAAV;cACA;YACD,CAX8B;YAY/B,GAAG,EAAC,YAAU;cACb,IAAG,KAAK,CAAC,GAAT,EAAa;gBACZ,KAAK,CAAC,GAAN;cACA;;cACD,OAAO,KAAP;YACA;UAjB8B,CAAhC;QAmBA;MACD,CAxBD;MA0BA,KAAK,eAAL,GAAuB,KAAvB;IACA;EACD,CAzO8B,CA2OhC;;;EACC,IAAI,CAAC,IAAD,EAAO,OAAP,EAAe;IAClB,IAAI,IAAI,GAAG,KAAK,YAAL,CAAkB,IAAlB,CAAX;;IAEA,IAAG,OAAH,EAAW;MACV,IAAI,GAAG,IAAI,GAAG,KAAK,eAAL,CAAqB,OAArB,EAA8B,IAA9B,CAAH,GAAyC,OAApD;IACA;;IAED,OAAO,IAAP;EACA,CApP8B,CAsPhC;;;EACC,YAAY,CAAC,IAAD,EAAM;IACjB,OAAO,KAAK,QAAL,GAAgB,KAAK,QAAL,CAAc,KAAK,EAAnB,EAAuB,IAAvB,CAAhB,GAA+C,KAAtD;EACA,CAzP8B,CA2PhC;;;EACC,eAAe,CAAC,OAAD,EAAU,OAAV,EAAkB;IAChC,IAAI,MAAM,GAAG,EAAb;IAEA,OAAO,GAAG,OAAO,IAAI,EAArB;IAEA,OAAO,CAAC,OAAR,CAAgB,CAAC,MAAD,EAAS,EAAT,KAAgB;MAC/B,IAAI,IAAI,GAAG,KAAK,WAAL,CAAiB,OAAjB,EAA0B,MAA1B,CAAX;MAAA,IACA,IADA;;MAGA,IAAG,IAAH,EAAQ;QACP,IAAG,KAAK,MAAL,CAAY,OAAZ,KAAwB,IAAxB,IAAgC,KAAK,MAAL,CAAY,OAAZ,IAAuB,SAA1D,EAAoE;UACnE,IAAI,GAAI,MAAM,CAAC,IAAP,CAAY,IAAZ,CAAR;UACA,IAAI,CAAC,IAAL,CAAU,OAAV;QACA,CAHD,MAGK;UACJ,IAAI,GAAG,KAAK,MAAL,CAAY,OAAnB;QACA;;QAED,IAAI,CAAC,OAAL,CAAc,GAAD,IAAO;UACnB,IAAG,GAAG,KAAK,SAAR,IAAqB,OAAO,MAAM,CAAC,GAAD,CAAb,KAAuB,WAA/C,EAA2D;YAC1D,IAAI,CAAC,GAAD,CAAJ,GAAY,MAAM,CAAC,GAAD,CAAlB;UACA;QACD,CAJD;;QAMA,IAAG,IAAI,CAAC,OAAR,EAAgB;UACf,IAAI,CAAC,OAAL,GAAe,KAAK,eAAL,CAAqB,IAAI,CAAC,OAA1B,EAAmC,MAAM,CAAC,OAA1C,CAAf;QACA;;QAED,MAAM,CAAC,IAAP,CAAY,IAAZ;MACA;IACD,CAxBD;IA0BA,OAAO,CAAC,OAAR,CAAgB,CAAC,MAAD,EAAS,CAAT,KAAe;MAC9B,IAAI,IAAI,GAAG,KAAK,WAAL,CAAiB,OAAjB,EAA0B,MAA1B,CAAX;;MAEA,IAAI,CAAC,IAAL,EAAW;QACV,IAAG,MAAM,CAAC,MAAP,GAAc,CAAjB,EAAmB;UAClB,MAAM,CAAC,MAAP,CAAc,CAAd,EAAiB,CAAjB,EAAoB,MAApB;QACA,CAFD,MAEK;UACJ,MAAM,CAAC,IAAP,CAAY,MAAZ;QACA;MACD;IACD,CAVD;IAYA,OAAO,MAAP;EACA,CAxS8B,CA0ShC;;;EACC,WAAW,CAAC,OAAD,EAAU,OAAV,EAAkB;IAC5B,IAAI,IAAI,GAAG,OAAO,CAAC,OAAR,GAAkB,OAAlB,GAA6B,OAAO,CAAC,KAAR,GAAgB,OAAhB,GAA0B,QAAlE;IAEA,OAAO,OAAO,CAAC,IAAR,CAAa,UAAS,GAAT,EAAa;MAChC,QAAO,IAAP;QACC,KAAK,OAAL;UACC,OAAO,GAAG,CAAC,KAAJ,KAAc,OAAO,CAAC,KAAtB,IAA+B,GAAG,CAAC,OAAJ,CAAY,MAAZ,KAAuB,OAAO,CAAC,OAAR,CAAgB,MAA7E;;QAED,KAAK,OAAL;UACC,OAAO,GAAG,CAAC,KAAJ,KAAc,OAAO,CAAC,KAA7B;;QAED,KAAK,QAAL;UACC,OAAO,GAAG,KAAK,OAAf;MARF;IAUA,CAXM,CAAP;EAYA,CA1T8B,CA4ThC;;;EACC,IAAI,CAAC,IAAD,EAAM;IACT,IAAI,IAAI,GAAG,EAAX;;IAEA,QAAO,IAAP;MACC,KAAK,SAAL;QACC,IAAI,GAAG,KAAK,YAAL,CAAkB,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzB,EAAlB,CAAP;QACA;;MAED,KAAK,QAAL;QACC,IAAI,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,CAA0B,UAA1B,EAAP;QACA;;MAED,KAAK,MAAL;QACC,IAAI,GAAG,KAAK,eAAL,CAAqB,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,OAAxB,EAArB,CAAP;QACA;;MAED,KAAK,OAAL;QACC,IAAI,GAAG,KAAK,cAAL,EAAP;QACA;;MAED,KAAK,MAAL;QACC,IAAI,GAAG,KAAK,aAAL,EAAP;QACA;IAnBF;;IAsBA,IAAG,KAAK,SAAR,EAAkB;MACjB,KAAK,SAAL,CAAe,KAAK,EAApB,EAAwB,IAAxB,EAA8B,IAA9B;IACA;EAED,CA1V8B,CA4VhC;;;EACC,eAAe,CAAC,IAAD,EAAM;IACpB,IAAI,CAAC,OAAL,CAAa,UAAS,IAAT,EAAc;MAC1B,IAAI,CAAC,MAAL,GAAc,IAAI,CAAC,KAAnB;MACA,OAAO,IAAI,CAAC,KAAZ;IACA,CAHD;IAKA,OAAO,IAAP;EACA;;EAED,cAAc,GAAE;IACf,IAAI,IAAI,GAAG,EAAX;;IAEA,IAAG,KAAK,MAAL,CAAY,KAAf,EAAqB;MACpB,IAAG,KAAK,MAAL,CAAY,KAAZ,KAAsB,IAAtB,IAA8B,KAAK,MAAL,CAAY,KAAZ,CAAkB,OAAnD,EAA2D;QAC1D,IAAI,CAAC,OAAL,GAAe,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAlC;MACA;;MAED,IAAG,KAAK,MAAL,CAAY,KAAZ,KAAsB,IAAtB,IAA8B,KAAK,MAAL,CAAY,KAAZ,CAAkB,cAAnD,EAAkE;QACjE,IAAI,CAAC,cAAL,GAAsB,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAzC;MACA;;MAED,IAAG,KAAK,MAAL,CAAY,KAAZ,KAAsB,IAAtB,IAA8B,KAAK,MAAL,CAAY,KAAZ,CAAkB,WAAnD,EAA+D;QAC9D,IAAI,CAAC,WAAL,GAAmB,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAtC;MACA;IACD;;IAED,OAAO,IAAP;EACA;;EAED,aAAa,GAAE;IACd,IAAI,IAAI,GAAG,EAAX;;IAEA,IAAG,KAAK,MAAL,CAAY,IAAf,EAAoB;MACnB,IAAG,KAAK,MAAL,CAAY,IAAZ,KAAqB,IAArB,IAA6B,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjD,EAAsD;QACrD,IAAI,CAAC,cAAL,GAAsB,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,WAAxB,EAAtB;MACA;;MAED,IAAG,KAAK,MAAL,CAAY,IAAZ,KAAqB,IAArB,IAA6B,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjD,EAAsD;QACrD,IAAI,CAAC,qBAAL,GAA6B,KAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,OAAxB,EAA7B;MACA;IACD;;IAED,OAAO,IAAP;EACA,CAxY8B,CA2YhC;;;EACC,YAAY,CAAC,OAAD,EAAS;IACpB,IAAI,WAAW,GAAG,EAAlB;IAAA,IACA,YAAY,GAAG,CAAC,mBAAD,EAAsB,YAAtB,EAAoC,aAApC,EAAmD,WAAnD,CADf;IAGA,OAAO,CAAC,OAAR,CAAiB,MAAD,IAAY;MAC3B,IAAI,QAAQ,GAAG,EAAf;MAAA,IACA,MAAM,GAAG,MAAM,CAAC,aAAP,EADT;MAAA,IAEA,IAFA;;MAIA,IAAG,MAAM,CAAC,OAAV,EAAkB;QACjB,QAAQ,CAAC,KAAT,GAAiB,MAAM,CAAC,KAAxB;QACA,QAAQ,CAAC,OAAT,GAAmB,KAAK,YAAL,CAAkB,MAAM,CAAC,UAAP,EAAlB,CAAnB;MACA,CAHD,MAGK;QACJ,QAAQ,CAAC,KAAT,GAAiB,MAAM,CAAC,QAAP,EAAjB;;QAEA,IAAG,KAAK,MAAL,CAAY,OAAZ,KAAwB,IAAxB,IAAgC,KAAK,MAAL,CAAY,OAAZ,IAAuB,SAA1D,EAAoE;UACnE,IAAI,GAAI,MAAM,CAAC,IAAP,CAAY,MAAZ,CAAR;UACA,IAAI,CAAC,IAAL,CAAU,OAAV;UACA,IAAI,CAAC,IAAL,CAAU,SAAV;QACA,CAJD,MAIK;UACJ,IAAI,GAAG,KAAK,MAAL,CAAY,OAAnB;QACA;;QAED,IAAI,CAAC,OAAL,CAAc,GAAD,IAAO;UACnB,QAAO,GAAP;YACC,KAAK,OAAL;cACC,QAAQ,CAAC,KAAT,GAAiB,MAAM,CAAC,QAAP,EAAjB;cACA;;YACD,KAAK,SAAL;cACC,QAAQ,CAAC,OAAT,GAAmB,MAAM,CAAC,OAA1B;cACA;;YAED;cACC,IAAG,OAAO,MAAM,CAAC,GAAD,CAAb,KAAuB,UAAvB,IAAqC,YAAY,CAAC,OAAb,CAAqB,GAArB,MAA8B,CAAC,CAAvE,EAAyE;gBACxE,QAAQ,CAAC,GAAD,CAAR,GAAgB,MAAM,CAAC,GAAD,CAAtB;cACA;;UAXH;QAaA,CAdD;MAeA;;MAED,WAAW,CAAC,IAAZ,CAAiB,QAAjB;IACA,CArCD;IAuCA,OAAO,WAAP;EACA;;AAxb8B;;;AA2bhC,WAAW,CAAC,UAAZ,GAAyB,aAAzB;AAEA,WAAW,CAAC,eAAZ,GAA8B,CAAC,EAA/B,EAEA;;AACA,WAAW,CAAC,OAAZ,GAAsB,cAAtB;AACA,WAAW,CAAC,OAAZ,GAAsB,cAAtB;;ACpcA,MAAMiO,OAAN,SAAoB,MAApB,CAA0B;EAEzB,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,iBAAL,GAAyB,EAAzB;IAEA,KAAK,mBAAL,CAAyB,iBAAzB,EAA4C,KAA5C;IACA,KAAK,mBAAL,CAAyB,eAAzB,EAA0C,KAA1C;IACA,KAAK,mBAAL,CAAyB,mBAAzB,EAA8C,KAA9C;IACA,KAAK,mBAAL,CAAyB,iBAAzB,EAA4C,KAA5C;IAEA,KAAK,oBAAL,CAA0B,oBAA1B;IACA,KAAK,oBAAL,CAA0B,kBAA1B;IACA,KAAK,oBAAL,CAA0B,aAA1B;IACA,KAAK,oBAAL,CAA0B,iBAA1B;IACA,KAAK,oBAAL,CAA0B,cAA1B;IACA,KAAK,oBAAL,CAA0B,YAA1B;EAEA;;EAED,UAAU,GAAE;IACX,KAAK,qBAAL;IACA,KAAK,uBAAL;IAEA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA9B;EACA;;EAED,qBAAqB,GAAE;IACtB,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,eAAtB,EAAsC;MACrC,KAAK,SAAL,CAAe,iBAAf,EAAkC,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,EAA+B,KAAK,KAAL,CAAW,OAAX,CAAmB,eAAlD,CAAlC;MACA,KAAK,KAAL,CAAW,EAAX,CAAc,YAAd,EAA4B,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,EAA+B,KAAK,KAAL,CAAW,OAAX,CAAmB,eAAlD,CAA5B;IACA;;IAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAtB,EAAoC;MACnC,KAAK,SAAL,CAAe,WAAf,EAA4B,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,EAA+B,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAlD,CAA5B;IACA;EACD;;EAED,uBAAuB,GAAE;IACxB,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAtB,EAAwC;MACvC,KAAK,SAAL,CAAe,mBAAf,EAAoC,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,EAA+B,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAlD,CAApC;MACA,KAAK,KAAL,CAAW,EAAX,CAAc,cAAd,EAA8B,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,EAA+B,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAlD,CAA9B;IACA;;IAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,eAAtB,EAAsC;MACrC,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,EAA+B,KAAK,KAAL,CAAW,OAAX,CAAmB,eAAlD,CAA9B;IACA;EACD;;EAED,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAI,GAAG,GAAG,MAAM,CAAC,UAAjB,CADuB,CAGzB;;IACE,IAAG,GAAG,CAAC,kBAAJ,IAA0B,CAAC,KAAK,iBAAL,CAAuB,kBAArD,EAAwE;MACvE,KAAK,iBAAL,CAAuB,kBAAvB,GAA4C,KAAK,yBAAL,CAA+B,IAA/B,CAAoC,IAApC,EAA0C,oBAA1C,CAA5C;MACA,KAAK,SAAL,CAAe,oBAAf,EAAqC,KAAK,iBAAL,CAAuB,kBAA5D;MACA,KAAK,KAAL,CAAW,EAAX,CAAc,eAAd,EAA+B,KAAK,yBAAL,CAA+B,IAA/B,CAAoC,IAApC,EAA0C,oBAA1C,CAA/B;IACA;;IAED,IAAG,GAAG,CAAC,gBAAJ,IAAwB,CAAC,KAAK,iBAAL,CAAuB,gBAAnD,EAAoE;MACnE,KAAK,iBAAL,CAAuB,gBAAvB,GAA0C,KAAK,yBAAL,CAA+B,IAA/B,CAAoC,IAApC,EAA0C,kBAA1C,CAA1C;MACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,iBAAL,CAAuB,gBAAtD;IACA;;IAED,IAAG,GAAG,CAAC,WAAP,EAAmB;MAClB,KAAK,2BAAL,CAAiC,MAAjC;IACA,CAjBsB,CAmBzB;;;IACE,IAAG,GAAG,CAAC,YAAJ,IAAoB,CAAC,KAAK,iBAAL,CAAuB,YAA/C,EAA4D;MAC3D,KAAK,iBAAL,CAAuB,YAAvB,GAAsC,KAAK,uBAAL,CAA6B,IAA7B,CAAkC,IAAlC,EAAwC,cAAxC,CAAtC;MACA,KAAK,SAAL,CAAe,kBAAf,EAAmC,KAAK,iBAAL,CAAuB,YAA1D;MACA,KAAK,KAAL,CAAW,EAAX,CAAc,aAAd,EAA6B,KAAK,uBAAL,CAA6B,IAA7B,CAAkC,IAAlC,EAAwC,cAAxC,CAA7B;IACA;;IAED,IAAG,GAAG,CAAC,UAAJ,IAAkB,CAAC,KAAK,iBAAL,CAAuB,UAA7C,EAAwD;MACvD,KAAK,iBAAL,CAAuB,UAAvB,GAAoC,KAAK,uBAAL,CAA6B,IAA7B,CAAkC,IAAlC,EAAwC,YAAxC,CAApC;MACA,KAAK,SAAL,CAAe,YAAf,EAA6B,KAAK,iBAAL,CAAuB,UAApD;IACA;EACD;;EAED,2BAA2B,CAAC,MAAD,EAAQ;IAClC,IAAI,IAAI,GAAG,MAAM,CAAC,UAAP,CAAkB,eAA7B;IAAA,IACA,aADA;IAGA,aAAa,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAhB;IACA,aAAa,CAAC,SAAd,CAAwB,GAAxB,CAA4B,+BAA5B;;IAEA,IAAG,IAAH,EAAQ;MACP,IAAG,OAAO,IAAP,KAAgB,UAAnB,EAA8B;QAC7B,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,YAAP,EAAD,CAAX;MACA;;MAED,IAAG,IAAI,YAAY,WAAnB,EAA+B;QAC9B,aAAa,CAAC,WAAd,CAA0B,IAA1B;MACA,CAFD,MAEK;QACJ,aAAa,CAAC,SAAd,GAA0B,IAA1B;MACA;IACD,CAVD,MAUK;MACJ,aAAa,CAAC,SAAd,GAA0B,UAA1B;IACA;;IAED,aAAa,CAAC,gBAAd,CAA+B,OAA/B,EAAyC,CAAD,IAAO;MAC9C,CAAC,CAAC,eAAF;MACA,CAAC,CAAC,cAAF;MAEA,KAAK,cAAL,CAAoB,MAAM,CAAC,UAAP,CAAkB,WAAtC,EAAmD,CAAnD,EAAsD,MAAtD;IACA,CALD;IAOA,MAAM,CAAC,YAAP,CAAoB,YAApB,CAAiC,aAAjC,EAAgD,MAAM,CAAC,YAAP,CAAoB,UAApE;EACA;;EAED,uBAAuB,CAAC,MAAD,EAAS,CAAT,EAAY,IAAZ,EAAiB;IACvC,IAAG,IAAI,CAAC,KAAR,EAAc;MACb,IAAI,GAAG,IAAI,CAAC,KAAZ;IACA;;IAED,IAAG,IAAI,CAAC,MAAL,CAAY,UAAZ,CAAuB,MAAvB,CAAH,EAAkC;MACjC,KAAK,cAAL,CAAoB,IAAI,CAAC,MAAL,CAAY,UAAZ,CAAuB,MAAvB,CAApB,EAAoD,CAApD,EAAuD,IAAvD;IACA;EACD;;EAED,yBAAyB,CAAC,MAAD,EAAS,CAAT,EAAY,MAAZ,EAAmB;IAC3C,IAAG,MAAM,CAAC,OAAV,EAAkB;MACjB,MAAM,GAAG,MAAM,CAAC,OAAhB;IACA;;IAED,IAAG,MAAM,CAAC,UAAP,CAAkB,MAAlB,CAAH,EAA6B;MAC5B,KAAK,cAAL,CAAoB,MAAM,CAAC,UAAP,CAAkB,MAAlB,CAApB,EAA+C,CAA/C,EAAkD,MAAlD;IACA;EACD;;EAED,cAAc,CAAC,QAAD,EAAW,CAAX,EAAc,SAAd,EAAwB;IACrC,IAAI,gBAAJ;;IAEA,SAAS,UAAT,CAAoB,QAApB,EAA6B;MAC5B,gBAAgB,GAAG,QAAnB;IACA;;IAED,IAAG,SAAS,CAAC,MAAb,EAAoB;MACnB,SAAS,GAAG,SAAS,CAAC,MAAtB;IACA,CAFD,MAEM,IAAG,SAAS,CAAC,IAAb,EAAkB;MACvB,SAAS,GAAG,SAAS,CAAC,IAAtB;IACA;;IAED,QAAQ,GAAG,OAAO,QAAP,IAAmB,UAAnB,GAAgC,QAAQ,CAAC,IAAT,CAAc,KAAK,KAAnB,EAA0B,CAA1B,EAA6B,SAAS,CAAC,YAAV,EAA7B,EAAwD,UAAxD,CAAhC,GAAsG,QAAjH;IAEA,KAAK,SAAL,CAAe,CAAf,EAAkB,SAAlB,EAA6B,QAA7B,EAAuC,gBAAvC;EACA;;EAED,SAAS,CAAC,CAAD,EAAI,SAAJ,EAAe,QAAf,EAAyB,gBAAzB,EAA0C;IAClD,IAAI,KAAK,GAAG,EAAE,CAAC,YAAY,UAAf,CAAZ;IAAA,IACA,UADA;IAAA,IACY,KADZ;;IAGA,IAAG,QAAQ,YAAY,WAAvB,EAAmC;MAClC,UAAU,GAAG,QAAb;IACA,CAFD,MAEK;MACJ,UAAU,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAb;MACA,UAAU,CAAC,SAAX,GAAuB,QAAvB;IACA;;IAED,UAAU,CAAC,SAAX,CAAqB,GAArB,CAAyB,iBAAzB;IAEA,UAAU,CAAC,gBAAX,CAA4B,OAA5B,EAAsC,CAAD,IAAM;MAC1C,CAAC,CAAC,eAAF;IACA,CAFD;;IAIA,IAAG,CAAC,KAAJ,EAAU;MACT,CAAC,CAAC,cAAF;IACA;;IAED,KAAK,GAAG,KAAK,KAAL,CAAW,UAAX,CAAR;;IAEA,IAAG,OAAO,gBAAP,KAA4B,UAA/B,EAA0C;MACzC,KAAK,CAAC,cAAN,CAAqB,gBAArB;IACA;;IAED,KAAK,CAAC,IAAN,CAAW,CAAX,EAAc,UAAd,CAAyB,MAAM;MAC9B,KAAK,gBAAL,CAAsB,aAAtB,EAAqC,SAAS,CAAC,YAAV,EAArC;IACA,CAFD;IAMA,KAAK,gBAAL,CAAsB,aAAtB,EAAqC,SAAS,CAAC,YAAV,EAArC;EACA;;AAzLwB;;;AA4L1BA,OAAK,CAAC,UAANA,GAAmB,OAAnBA;;AC5LA,MAAM,KAAN,SAAoB,MAApB,CAA0B;EAEzB,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,OAAL,GAAe,KAAf;IACA,KAAK,WAAL,GAAmB,KAAnB;IAEA,KAAK,mBAAL,CAAyB,aAAzB,EAAwC,KAAxC,EANiB,CAM8B;;IAC/C,KAAK,mBAAL,CAAyB,gBAAzB,EAA2C,KAA3C,EAPiB,CAOiC;;IAClD,KAAK,mBAAL,CAAyB,aAAzB,EAAwC,KAAxC,EARiB,CAQ8B;;IAC/C,KAAK,mBAAL,CAAyB,aAAzB,EAAwC,KAAxC,EATiB,CAS8B;;IAC/C,KAAK,mBAAL,CAAyB,aAAzB,EAAwC,IAAxC,EAViB,CAU6B;;IAC9C,KAAK,mBAAL,CAAyB,eAAzB,EAA0C,SAA1C,EAXiB,CAWoC;;IACrD,KAAK,mBAAL,CAAyB,aAAzB,EAAwC,EAAxC,EAZiB,CAY2B;;IAE5C,KAAK,oBAAL,CAA0B,OAA1B;IACA,KAAK,oBAAL,CAA0B,YAA1B;EACA;;EAED,UAAU,GAAE;IACX,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAtB,EAAkC;MACjC,MAAM,CAAC,gBAAP,CAAwB,aAAxB,EAAuC,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAvC;MACA,MAAM,CAAC,gBAAP,CAAwB,YAAxB,EAAsC,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAtC;IACA;;IAED,KAAK,qBAAL,CAA2B,OAA3B,EAAoC,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAApC;EACA,CA3BwB,CA6B1B;EACA;EACA;EAEA;EACA;EACA;;;EAEC,YAAY,GAAE;IACb,IAAG,CAAC,KAAK,WAAT,EAAqB;MACpB,KAAK,OAAL,GAAe,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAf;MACA,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,uBAA3B;MAEA,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,CAA0B,aAA1B,CAAwC,KAAK,KAAL,CAAW,OAAX,CAAmB,WAA3D,EAAwE,KAAK,KAAL,CAAW,OAAX,CAAmB,WAA3F,EAAwG,KAAK,KAAL,CAAW,OAAX,CAAmB,aAA3H,EAA0I,OAA1I,CAAzB;MAEA,KAAK,KAAL,CAAW,OAAX,CAAmB,KAAnB,CAAyB,OAAzB,GAAmC,MAAnC;MAEA,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAnB,CAA8B,YAA9B,CAA2C,KAAK,OAAhD,EAAyD,KAAK,KAAL,CAAW,OAApE;IACA;EACD;;EAED,OAAO,GAAE;IACR,QAAQ,CAAC,IAAT,CAAc,SAAd,CAAwB,MAAxB,CAA+B,iCAA/B;;IAEA,IAAG,KAAK,OAAL,IAAgB,KAAK,OAAL,CAAa,UAAhC,EAA2C;MAC1C,KAAK,OAAL,CAAa,UAAb,CAAwB,WAAxB,CAAoC,KAAK,OAAzC;MACA,KAAK,KAAL,CAAW,OAAX,CAAmB,KAAnB,CAAyB,OAAzB,GAAmC,EAAnC;IACA;EACD;;EAED,eAAe,CAAC,OAAD,EAAU,KAAV,EAAiB,MAAjB,EAAwB;IACtC,IAAI,OAAO,GAAG,MAAM,CAAC,OAArB;IAAA,IACA,OAAO,GAAG,MAAM,CAAC,OADjB;IAAA,IAEA,QAAQ,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAFX;IAAA,IAGA,QAAQ,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAHX;IAAA,IAIA,OAAO,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,CAA0B,aAA1B,CAAwC,OAAO,MAAP,IAAiB,WAAjB,GAA+B,MAA/B,GAAwC,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnG,EAAgH,OAAO,KAAP,IAAgB,WAAhB,GAA8B,KAA9B,GAAsC,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAzK,EAAsL,OAAO,IAAI,KAAK,KAAL,CAAW,OAAX,CAAmB,aAApN,EAAmO,OAAnO,CAJV;IAAA,IAKA,aALA;IAAA,IAKe,aALf;IAOA,KAAK,WAAL,GAAmB,IAAnB;IAEA,KAAK,OAAL,GAAe,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAf;IACA,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,4BAA3B;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAtB,EAAkC;MACjC,QAAQ,CAAC,SAAT,CAAmB,GAAnB,CAAuB,wBAAvB;MAEA,aAAa,GAAG,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,WAA1B,IAAyC,UAAzC,GAAsD,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,IAA/B,CAAoC,KAAK,KAAzC,CAAtD,GAAwG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAA3I;;MAEA,IAAG,OAAO,aAAP,IAAwB,QAA3B,EAAoC;QACnC,QAAQ,CAAC,SAAT,GAAqB,aAArB;MACA,CAFD,MAEK;QACJ,QAAQ,CAAC,WAAT,CAAqB,aAArB;MACA;;MAED,KAAK,OAAL,CAAa,WAAb,CAAyB,QAAzB;IACA;;IAED,KAAK,OAAL,CAAa,WAAb,CAAyB,OAAzB;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAtB,EAAkC;MACjC,QAAQ,CAAC,SAAT,CAAmB,GAAnB,CAAuB,wBAAvB;MAEA,aAAa,GAAG,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,WAA1B,IAAyC,UAAzC,GAAsD,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,IAA/B,CAAoC,KAAK,KAAzC,CAAtD,GAAwG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAA3I;;MAGA,IAAG,OAAO,aAAP,IAAwB,QAA3B,EAAoC;QACnC,QAAQ,CAAC,SAAT,GAAqB,aAArB;MACA,CAFD,MAEK;QACJ,QAAQ,CAAC,WAAT,CAAqB,aAArB;MACA;;MAED,KAAK,OAAL,CAAa,WAAb,CAAyB,QAAzB;IACA;;IAED,QAAQ,CAAC,IAAT,CAAc,SAAd,CAAwB,GAAxB,CAA4B,iCAA5B;IACA,QAAQ,CAAC,IAAT,CAAc,WAAd,CAA0B,KAAK,OAA/B;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAtB,EAAqC;MACpC,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAnB,CAAkC,KAAK,OAAvC,EAAgD,OAAhD;IACA;;IAED,MAAM,CAAC,KAAP;IAEA,KAAK,OAAL;IAEA,MAAM,CAAC,QAAP,CAAgB,OAAhB,EAAyB,OAAzB;IAEA,KAAK,WAAL,GAAmB,KAAnB;EACA;;AArHwB;;;AAwH1B,KAAK,CAAC,UAAN,GAAmB,OAAnB;;ACxHA,MAAM,YAAN,SAA2B,MAA3B,CAAiC;EAEhC,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,IAAL,GAAY,KAAZ;IACA,KAAK,OAAL,GAAe,KAAf,CAJiB,CAII;;IACrB,KAAK,SAAL,GAAiB,EAAjB,CALiB,CAKG;;IACpB,KAAK,cAAL,GAAsB,CAAtB;IAEA,KAAK,mBAAL,CAAyB,cAAzB,EAAyC,KAAzC,EARiB,CAQ+B;EAChD;;EAED,UAAU,GAAE;IACX,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAtB,EAAmC;MAClC,KAAK,SAAL,CAAe,wBAAf,EAAyC,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB,EAAsB,UAAtB,CAAzC;MACA,KAAK,SAAL,CAAe,uBAAf,EAAwC,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,EAAwB,UAAxB,CAAxC;MACA,KAAK,SAAL,CAAe,sBAAf,EAAuC,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB,EAAsB,SAAtB,CAAvC;MACA,KAAK,SAAL,CAAe,qBAAf,EAAsC,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,EAAwB,SAAxB,CAAtC;MACA,KAAK,SAAL,CAAe,qBAAf,EAAsC,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAAtC;MACA,KAAK,SAAL,CAAe,iBAAf,EAAkC,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAAlC;MACA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAhC;IACA;EACD;;EAED,SAAS,CAAC,IAAD,EAAM;IACd,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,OADA;IAGA,KAAK,cAAL;IAEA,OAAO,GAAG,KAAK,cAAf;IAEA,KAAK,WAAL;IAEA,KAAK,IAAL,GAAY,IAAZ,CAVc,CAYhB;;IACE,KAAK,SAAL,CAAe,IAAf,GAAsB,IAAI,CAAC,IAA3B;IAEA,MAAM,CAAC,cAAP,CAAsB,KAAK,IAA3B,EAAiC,MAAjC,EAAyC;MACxC,UAAU,EAAE,KAD4B;MAExC,YAAY,EAAE,IAF0B;MAGxC,KAAK,EAAE,YAAU;QAChB,IAAI,IAAI,GAAG,KAAK,CAAC,IAAN,CAAW,SAAX,CAAX;QAAA,IACA,MADA;;QAGA,IAAG,CAAC,IAAI,CAAC,OAAN,IAAiB,OAAO,KAAK,IAAI,CAAC,cAArC,EAAoD;UACnD,IAAI,CAAC,KAAL,CAAW,WAAX;UAEA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;YACrB,IAAI,CAAC,KAAL,CAAW,UAAX,CAAsB,YAAtB,CAAmC,GAAnC,EAAwC,KAAxC;UACA,CAFD;UAIA,MAAM,GAAG,IAAI,CAAC,SAAL,CAAe,IAAf,CAAoB,KAApB,CAA0B,IAA1B,EAAgC,SAAhC,CAAT;UAEA,IAAI,CAAC,OAAL,CAAa,WAAb;QACA;;QAED,OAAO,MAAP;MACA;IApBuC,CAAzC,EAfc,CAsChB;;IACE,KAAK,SAAL,CAAe,OAAf,GAAyB,IAAI,CAAC,OAA9B;IAEA,MAAM,CAAC,cAAP,CAAsB,KAAK,IAA3B,EAAiC,SAAjC,EAA4C;MAC3C,UAAU,EAAE,KAD+B;MAE3C,YAAY,EAAE,IAF6B;MAG3C,KAAK,EAAE,YAAU;QAChB,IAAI,IAAI,GAAG,KAAK,CAAC,IAAN,CAAW,SAAX,CAAX;QAAA,IACA,MADA;;QAGA,IAAG,CAAC,IAAI,CAAC,OAAN,IAAiB,OAAO,KAAK,IAAI,CAAC,cAArC,EAAoD;UACnD,IAAI,CAAC,KAAL,CAAW,cAAX;UAEA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;YACrB,IAAI,CAAC,KAAL,CAAW,UAAX,CAAsB,YAAtB,CAAmC,GAAnC,EAAwC,IAAxC;UACA,CAFD;UAIA,MAAM,GAAG,IAAI,CAAC,SAAL,CAAe,OAAf,CAAuB,KAAvB,CAA6B,IAA7B,EAAmC,SAAnC,CAAT;UAEA,IAAI,CAAC,OAAL,CAAa,cAAb;QACA;;QAED,OAAO,MAAP;MACA;IApB0C,CAA5C,EAzCc,CAiEhB;;IACE,KAAK,SAAL,CAAe,KAAf,GAAuB,IAAI,CAAC,KAA5B;IAEA,MAAM,CAAC,cAAP,CAAsB,KAAK,IAA3B,EAAiC,OAAjC,EAA0C;MACzC,UAAU,EAAE,KAD6B;MAEzC,YAAY,EAAE,IAF2B;MAGzC,KAAK,EAAE,YAAU;QAChB,IAAI,GAAJ,EAAS,MAAT;;QAEA,IAAG,CAAC,IAAI,CAAC,OAAN,IAAiB,OAAO,KAAK,IAAI,CAAC,cAArC,EAAoD;UACnD,IAAI,CAAC,KAAL,CAAW,YAAX;;UAEA,IAAG,IAAI,CAAC,IAAL,CAAU,MAAb,EAAoB;YACnB,GAAG,GAAG,IAAI,CAAC,KAAL,CAAW,UAAX,CAAsB,oBAAtB,CAA2C,IAAI,CAAC,IAAL,CAAU,CAAV,CAA3C,CAAN;;YAEA,IAAG,GAAH,EAAO;cACN,GAAG,CAAC,YAAJ;YACA;UACD;;UAED,MAAM,GAAG,IAAI,CAAC,SAAL,CAAe,KAAf,CAAqB,IAArB,CAA0B,IAA1B,CAAT;UAEA,IAAI,CAAC,OAAL,CAAa,YAAb;QACA;;QAED,OAAO,MAAP;MACA;IAvBwC,CAA1C,EApEc,CA8FhB;;IACE,KAAK,SAAL,CAAe,GAAf,GAAqB,IAAI,CAAC,GAA1B;IAEA,MAAM,CAAC,cAAP,CAAsB,KAAK,IAA3B,EAAiC,KAAjC,EAAwC;MACvC,UAAU,EAAE,KAD2B;MAEvC,YAAY,EAAE,IAFyB;MAGvC,KAAK,EAAE,YAAU;QAChB,IAAI,GAAJ,EAAS,MAAT;;QAEA,IAAG,CAAC,IAAI,CAAC,OAAN,IAAiB,OAAO,KAAK,IAAI,CAAC,cAArC,EAAoD;UACnD,IAAI,CAAC,KAAL,CAAW,UAAX;;UAEA,IAAG,IAAI,CAAC,IAAL,CAAU,MAAb,EAAoB;YACnB,GAAG,GAAG,IAAI,CAAC,KAAL,CAAW,UAAX,CAAsB,oBAAtB,CAA2C,IAAI,CAAC,IAAL,CAAU,IAAI,CAAC,IAAL,CAAU,MAAV,GAAmB,CAA7B,CAA3C,CAAN;;YAEA,IAAG,GAAH,EAAO;cACN,GAAG,CAAC,YAAJ;YACA;UACD;;UAED,MAAM,GAAG,IAAI,CAAC,SAAL,CAAe,GAAf,CAAmB,IAAnB,CAAwB,IAAxB,CAAT;UAEA,IAAI,CAAC,OAAL,CAAa,UAAb;QACA;;QAED,OAAO,MAAP;MACA;IAvBsC,CAAxC,EAjGc,CA4HhB;;IACE,KAAK,SAAL,CAAe,MAAf,GAAwB,IAAI,CAAC,MAA7B;IAEA,MAAM,CAAC,cAAP,CAAsB,KAAK,IAA3B,EAAiC,QAAjC,EAA2C;MAC1C,UAAU,EAAE,KAD8B;MAE1C,YAAY,EAAE,IAF4B;MAG1C,KAAK,EAAE,YAAU;QAChB,IAAI,IAAI,GAAG,KAAK,CAAC,IAAN,CAAW,SAAX,CAAX;QAAA,IACA,KAAK,GAAG,IAAI,CAAC,CAAD,CAAJ,GAAU,CAAV,GAAc,IAAI,CAAC,MAAL,GAAc,IAAI,CAAC,CAAD,CAAhC,GAAsC,IAAI,CAAC,CAAD,CADlD;QAAA,IAEA,GAAG,GAAG,IAAI,CAAC,CAAD,CAFV;QAAA,IAGA,OAAO,GAAG,IAAI,CAAC,CAAD,CAAJ,GAAU,IAAI,CAAC,KAAL,CAAW,CAAX,CAAV,GAA0B,KAHpC;QAAA,IAIA,QAJA;QAAA,IAIU,MAJV;;QAMA,IAAG,CAAC,IAAI,CAAC,OAAN,IAAiB,OAAO,KAAK,IAAI,CAAC,cAArC,EAAoD;UACnD,IAAI,CAAC,KAAL,CAAW,aAAX,EADmD,CAExD;;UACK,IAAG,OAAH,EAAW;YACV,QAAQ,GAAG,IAAI,CAAC,KAAD,CAAJ,GAAc,IAAI,CAAC,KAAL,CAAW,UAAX,CAAsB,oBAAtB,CAA2C,IAAI,CAAC,KAAD,CAA/C,CAAd,GAAwE,KAAnF;;YAEA,IAAG,QAAH,EAAY;cACX,OAAO,CAAC,OAAR,CAAiB,OAAD,IAAa;gBAC5B,IAAI,CAAC,KAAL,CAAW,UAAX,CAAsB,YAAtB,CAAmC,OAAnC,EAA4C,IAA5C,EAAkD,QAAlD,EAA4D,IAA5D;cACA,CAFD;YAGA,CAJD,MAIK;cACJ,OAAO,GAAG,OAAO,CAAC,KAAR,GAAgB,OAAhB,EAAV;cAEA,OAAO,CAAC,OAAR,CAAiB,OAAD,IAAa;gBAC5B,IAAI,CAAC,KAAL,CAAW,UAAX,CAAsB,YAAtB,CAAmC,OAAnC,EAA4C,IAA5C,EAAkD,KAAlD,EAAyD,IAAzD;cACA,CAFD;YAGA;UACD,CAjBkD,CAmBxD;;;UACK,IAAG,GAAG,KAAK,CAAX,EAAa;YACZ,IAAI,OAAO,GAAG,IAAI,CAAC,KAAL,CAAW,KAAX,EAAkB,OAAO,IAAI,CAAC,CAAD,CAAX,KAAmB,WAAnB,GAAiC,IAAI,CAAC,CAAD,CAArC,GAA2C,KAAK,GAAG,GAArE,CAAd;YAEA,OAAO,CAAC,OAAR,CAAgB,CAAC,OAAD,EAAU,CAAV,KAAgB;cAC/B,IAAI,GAAG,GAAG,IAAI,CAAC,KAAL,CAAW,UAAX,CAAsB,oBAAtB,CAA2C,OAA3C,CAAV;;cAEA,IAAG,GAAH,EAAO;gBACN,GAAG,CAAC,YAAJ,CAAiB,CAAC,KAAK,OAAO,CAAC,MAAR,GAAiB,CAAxC;cACA;YACD,CAND;UAOA;;UAED,IAAG,OAAO,IAAI,GAAG,KAAK,CAAtB,EAAwB;YACvB,IAAI,CAAC,KAAL,CAAW,UAAX,CAAsB,kBAAtB;UACA;;UAED,MAAM,GAAG,IAAI,CAAC,SAAL,CAAe,MAAf,CAAsB,KAAtB,CAA4B,IAA5B,EAAkC,SAAlC,CAAT;UAEA,IAAI,CAAC,OAAL,CAAa,aAAb;QACA;;QAED,OAAO,MAAP;MACA;IApDyC,CAA3C;EAsDA;;EAED,WAAW,GAAE;IACZ,IAAG,KAAK,IAAL,KAAc,KAAjB,EAAuB;MACtB,KAAI,IAAI,GAAR,IAAe,KAAK,SAApB,EAA8B;QAC7B,MAAM,CAAC,cAAP,CAAsB,KAAK,IAA3B,EAAiC,GAAjC,EAAsC;UACrC,UAAU,EAAE,IADyB;UAErC,YAAY,EAAC,IAFwB;UAGrC,QAAQ,EAAC,IAH4B;UAIrC,KAAK,EAAE,KAAK,SAAL,CAAe;QAJe,CAAtC;MAMA;IACD;EACD;;EAED,QAAQ,CAAC,GAAD,EAAK;IACZ,IAAI,IAAI,GAAG,GAAG,CAAC,OAAJ,EAAX;;IAEA,KAAI,IAAI,GAAR,IAAe,IAAf,EAAoB;MACnB,KAAK,QAAL,CAAc,GAAd,EAAmB,IAAnB,EAAyB,GAAzB;IACA;;IAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAtB,EAA+B;MAC9B,KAAK,iBAAL,CAAuB,GAAvB;IACA;EACD;;EAED,iBAAiB,CAAE,GAAF,EAAM;IACtB,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,UAAU,GAAG,GAAG,CAAC,OAAJ,GAAc,KAAK,KAAL,CAAW,OAAX,CAAmB,kBAAjC,CADb;IAAA,IAEA,SAAS,GAAG,EAFZ;;IAIA,IAAG,UAAH,EAAc;MAEb,SAAS,CAAC,IAAV,GAAiB,UAAU,CAAC,IAA5B;MAEA,MAAM,CAAC,cAAP,CAAsB,UAAtB,EAAkC,MAAlC,EAA0C;QACzC,UAAU,EAAE,KAD6B;QAEzC,YAAY,EAAE,IAF2B;QAGzC,KAAK,EAAE,MAAM;UACZ,IAAG,CAAC,IAAI,CAAC,OAAT,EAAiB;YAChB,IAAI,CAAC,KAAL,CAAW,WAAX;YAEA,IAAI,MAAM,GAAG,SAAS,CAAC,IAAV,CAAe,KAAf,CAAqB,UAArB,EAAiC,SAAjC,CAAb;YACA,KAAK,WAAL,CAAiB,GAAjB;YAEA,IAAI,CAAC,OAAL,CAAa,WAAb;UACA;;UAED,OAAO,MAAP;QACA;MAdwC,CAA1C;MAiBA,SAAS,CAAC,OAAV,GAAoB,UAAU,CAAC,OAA/B;MAEA,MAAM,CAAC,cAAP,CAAsB,UAAtB,EAAkC,SAAlC,EAA6C;QAC5C,UAAU,EAAE,KADgC;QAE5C,YAAY,EAAE,IAF8B;QAG5C,KAAK,EAAE,MAAM;UACZ,IAAG,CAAC,IAAI,CAAC,OAAT,EAAiB;YAChB,IAAI,CAAC,KAAL,CAAW,cAAX;YAEA,IAAI,MAAM,GAAI,SAAS,CAAC,OAAV,CAAkB,KAAlB,CAAwB,UAAxB,EAAoC,SAApC,CAAd;YACA,KAAK,WAAL,CAAiB,GAAjB;YAEA,IAAI,CAAC,OAAL,CAAa,cAAb;UACA;;UAED,OAAO,MAAP;QACA;MAd2C,CAA7C;MAiBA,SAAS,CAAC,KAAV,GAAkB,UAAU,CAAC,KAA7B;MAEA,MAAM,CAAC,cAAP,CAAsB,UAAtB,EAAkC,OAAlC,EAA2C;QAC1C,UAAU,EAAE,KAD8B;QAE1C,YAAY,EAAE,IAF4B;QAG1C,KAAK,EAAE,MAAM;UACZ,IAAG,CAAC,IAAI,CAAC,OAAT,EAAiB;YAChB,IAAI,CAAC,KAAL,CAAW,YAAX;YAEA,IAAI,MAAM,GAAI,SAAS,CAAC,KAAV,CAAgB,IAAhB,CAAqB,UAArB,CAAd;YACA,KAAK,WAAL,CAAiB,GAAjB;YAEA,IAAI,CAAC,OAAL,CAAa,YAAb;UACA;;UAED,OAAO,MAAP;QACA;MAdyC,CAA3C;MAiBA,SAAS,CAAC,GAAV,GAAgB,UAAU,CAAC,GAA3B;MAEA,MAAM,CAAC,cAAP,CAAsB,UAAtB,EAAkC,KAAlC,EAAyC;QACxC,UAAU,EAAE,KAD4B;QAExC,YAAY,EAAE,IAF0B;QAGxC,KAAK,EAAE,MAAM;UACZ,IAAG,CAAC,IAAI,CAAC,OAAT,EAAiB;YAChB,IAAI,CAAC,KAAL,CAAW,UAAX;YAEA,IAAI,MAAM,GAAI,SAAS,CAAC,GAAV,CAAc,IAAd,CAAmB,UAAnB,CAAd;YACA,KAAK,WAAL,CAAiB,GAAjB;YAEA,IAAI,CAAC,OAAL,CAAa,UAAb;UACA;;UAED,OAAO,MAAP;QACA;MAduC,CAAzC;MAiBA,SAAS,CAAC,MAAV,GAAmB,UAAU,CAAC,MAA9B;MAEA,MAAM,CAAC,cAAP,CAAsB,UAAtB,EAAkC,QAAlC,EAA4C;QAC3C,UAAU,EAAE,KAD+B;QAE3C,YAAY,EAAE,IAF6B;QAG3C,KAAK,EAAE,MAAM;UACZ,IAAG,CAAC,IAAI,CAAC,OAAT,EAAiB;YAChB,IAAI,CAAC,KAAL,CAAW,aAAX;YAEA,IAAI,MAAM,GAAI,SAAS,CAAC,MAAV,CAAiB,KAAjB,CAAuB,UAAvB,EAAmC,SAAnC,CAAd;YACA,KAAK,WAAL,CAAiB,GAAjB;YAEA,IAAI,CAAC,OAAL,CAAa,aAAb;UACA;;UAED,OAAO,MAAP;QACA;MAd0C,CAA5C;IAgBA;EACD;;EAED,WAAW,CAAC,GAAD,EAAK;IACf,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,CAA4B,aAA5B,CAA0C,GAA1C;IACA,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,CAA4B,SAA5B,CAAsC,GAAtC;IACA,KAAK,KAAL,CAAW,UAAX,CAAsB,iBAAtB,CAAwC,MAAxC,EAAgD,KAAhD,EAAuD,IAAvD;EACA;;EAED,QAAQ,CAAC,GAAD,EAAM,IAAN,EAAY,GAAZ,EAAgB;IACvB,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,KAAK,GAAG,MAAM,CAAC,wBAAP,CAAgC,IAAhC,EAAsC,GAAtC,CADR;IAAA,IAEA,KAAK,GAAG,IAAI,CAAC,GAAD,CAFZ;IAAA,IAGA,OAAO,GAAG,KAAK,cAHf;IAKA,MAAM,CAAC,cAAP,CAAsB,IAAtB,EAA4B,GAA5B,EAAiC;MAChC,GAAG,EAAG,QAAD,IAAc;QAClB,KAAK,GAAG,QAAR;;QACA,IAAG,CAAC,IAAI,CAAC,OAAN,IAAiB,OAAO,KAAK,IAAI,CAAC,cAArC,EAAoD;UACnD,IAAI,CAAC,KAAL,CAAW,KAAX;UAEA,IAAI,MAAM,GAAG,EAAb;UACA,MAAM,CAAC,GAAD,CAAN,GAAc,QAAd;UACA,GAAG,CAAC,UAAJ,CAAe,MAAf;UAEA,IAAI,CAAC,OAAL,CAAa,KAAb;QACA;;QAED,IAAG,KAAK,CAAC,GAAT,EAAa;UACZ,KAAK,CAAC,GAAN,CAAU,QAAV;QACA;MACD,CAhB+B;MAiBhC,GAAG,EAAC,MAAM;QAET,IAAG,KAAK,CAAC,GAAT,EAAa;UACZ,KAAK,CAAC,GAAN;QACA;;QAED,OAAO,KAAP;MACA;IAxB+B,CAAjC;EA0BA;;EAED,UAAU,CAAC,GAAD,EAAK;IACd,IAAI,IAAI,GAAG,GAAG,CAAC,OAAJ,EAAX;;IAEA,KAAI,IAAI,GAAR,IAAe,IAAf,EAAoB;MACnB,MAAM,CAAC,cAAP,CAAsB,IAAtB,EAA4B,GAA5B,EAAiC;QAChC,KAAK,EAAC,IAAI,CAAC,GAAD;MADsB,CAAjC;IAGA;EACD;;EAED,KAAK,CAAC,GAAD,EAAK;IACT,IAAG,CAAC,KAAK,OAAT,EAAiB;MAChB,KAAK,OAAL,GAAe,GAAf;IACA;EACD;;EAED,OAAO,CAAC,GAAD,EAAK;IACX,IAAG,KAAK,OAAL,KAAiB,GAApB,EAAwB;MACvB,KAAK,OAAL,GAAe,KAAf;IACA;EACD;;AA7Y+B;;;AAgZjC,YAAY,CAAC,UAAb,GAA0B,cAA1B;;AChZA,MAAM,aAAN,SAA4B,MAA5B,CAAkC;EAEjC,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,WAAL,GAAmB,KAAnB;IACA,KAAK,MAAL,GAAc,KAAd;IACA,KAAK,UAAL,GAAkB,KAAlB;IACA,KAAK,OAAL,GAAe,KAAf;IACA,KAAK,MAAL,GAAc,IAAd;IACA,KAAK,iBAAL,GAAyB,IAAzB;IACA,KAAK,UAAL,GAAkB,IAAlB;IAEA,KAAK,WAAL,GAAmB,KAAnB;IACA,KAAK,oBAAL,CAA0B,WAA1B,EAAuC,IAAvC;IACA,KAAK,mBAAL,CAAyB,oBAAzB,EAA+C,KAA/C;EACA;;EAED,UAAU,GAAE;IACX,KAAK,SAAL,CAAe,iBAAf,EAAkC,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAAlC;EACA;;EAED,uBAAuB,GAAE;IACxB,IAAG,CAAC,KAAK,WAAT,EAAqB;MAEpB,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,IAA5B,CAAhC;MACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,qBAAL,CAA2B,IAA3B,CAAgC,IAAhC,CAA9B;MAEA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAA9B;MACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,mBAAL,CAAyB,IAAzB,CAA8B,IAA9B,CAA/B;MAEA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAA9B;MACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,mBAAL,CAAyB,IAAzB,CAA8B,IAA9B,CAA9B;MACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAA/B;MAEA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,qBAAL,CAA2B,IAA3B,CAAgC,IAAhC,CAAhC;MACA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAhC;MAEA,KAAK,WAAL,GAAmB,IAAnB;IACA;EACD;;EAGD,iBAAiB,CAAC,IAAD,EAAM;IACtB,IAAG,IAAI,CAAC,GAAL,CAAS,IAAT,KAAkB,KAArB,EAA2B;MAC1B,KAAK,qBAAL,CAA2B,IAA3B;MACA,KAAK,gBAAL,CAAsB,MAAtB,EAA8B,IAA9B,EAAoC,IAAI,CAAC,MAAzC,EAAiD,IAAI,CAAC,OAAtD;IACA;EACD;;EAED,kBAAkB,CAAC,MAAD,EAAQ;IACzB,IAAG,MAAM,CAAC,UAAP,CAAkB,SAArB,EAA+B;MAC9B,KAAK,uBAAL;MACA,KAAK,qBAAL,CAA2B,MAA3B;MACA,KAAK,gBAAL,CAAsB,QAAtB,EAAgC,MAAhC,EAAwC,MAAxC,EAAgD,MAAM,CAAC,OAAvD;IACA;EACD;;EAED,mBAAmB,CAAC,MAAD,EAAQ;IAC1B,IAAI,IAAI,GAAG,MAAM,CAAC,UAAP,EAAX;IAEA,KAAK,kBAAL,CAAwB,MAAxB;;IAEA,IAAG,IAAH,EAAQ;MACP,KAAK,kBAAL,CAAwB,IAAxB;IACA;EACD;;EAED,kBAAkB,CAAC,MAAD,EAAQ;IACzB,IAAG,MAAM,CAAC,OAAP,CAAe,MAAlB,EAAyB;MACxB,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAiC,WAAjC,CAA6C,QAA7C,CAAsD,MAAtD,CAAH,EAAiE;QAChE,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAiC,WAAjC,CAA6C,OAA7C,CAAsD,GAAD,IAAS;UAC7D,KAAK,kBAAL,CAAwB,GAAxB;QACA,CAFD;MAGA,CAJD,MAIM,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAiC,YAAjC,CAA8C,QAA9C,CAAuD,MAAvD,CAAH,EAAkE;QACvE,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAiC,YAAjC,CAA8C,OAA9C,CAAuD,GAAD,IAAS;UAC9D,KAAK,kBAAL,CAAwB,GAAxB;QACA,CAFD;MAGA;IACD;EACD;;EAED,kBAAkB,CAAC,MAAD,EAAQ;IACzB,IAAI,YAAY,GAAG,MAAM,CAAC,OAAP,CAAe,MAAf,GAAyB,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,WAAtB,GAAoC,MAAM,CAAC,QAAP,EAApC,GAAwD,IAAjF,GAAyF,KAA5G;IAGA,MAAM,CAAC,KAAP,CAAa,OAAb,CAAsB,IAAD,IAAU;MAC9B,IAAG,IAAI,CAAC,OAAL,CAAa,MAAb,IAAuB,IAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,QAA9C,EAAuD;QACtD,IAAG,YAAH,EAAgB;UACf,IAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,QAApB,CAA6B,KAA7B,CAAmC,IAAnC,GAA0C,YAA1C;QACA;;QAED,IAAI,CAAC,OAAL,CAAa,KAAb,CAAmB,IAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,QAAvC;MACA;IACD,CARD;;IAUA,IAAG,MAAM,CAAC,OAAP,CAAe,MAAf,IAAyB,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,QAAlD,EAA2D;MAC1D,IAAG,YAAH,EAAgB;QACf,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,QAAtB,CAA+B,KAA/B,CAAqC,IAArC,GAA4C,YAA5C;MACA;;MAED,MAAM,CAAC,OAAP,CAAe,KAAf,CAAqB,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,QAA3C;IACA;EACD;;EAED,gBAAgB,CAAC,IAAD,EAAO,SAAP,EAAkB,MAAlB,EAA0B,OAA1B,EAAkC;IACjD,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,cAAc,GAAG,KADjB;IAAA,IAEA,IAAI,GAAG,MAAM,CAAC,UAAP,CAAkB,SAFzB;IAAA,IAGA,MAAM,GAAG,EAHT;IAAA,IAIA,aAAa,GAAG,MAAM,CAAC,aAAP,EAJhB,CADiD,CAOnD;;IACE,IAAG,IAAI,KAAK,QAAZ,EAAqB;MACpB,cAAc,GAAG,MAAM,CAAC,UAAP,CAAkB,SAAlB,IAA+B,UAA/B,IAA6C,MAAM,CAAC,UAAP,CAAkB,cAAhF;MACA,MAAM,GAAG;QAAC,cAAc,EAAC;MAAhB,CAAT;IACA;;IAED,IAAG,CAAC,IAAI,KAAK,IAAT,IAAiB,IAAI,IAAI,IAA1B,KAAmC,KAAK,kBAAL,CAAwB,aAAxB,CAAtC,EAA6E;MAE5E,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAb;MACA,MAAM,CAAC,SAAP,GAAmB,6BAAnB;MAEA,MAAM,CAAC,gBAAP,CAAwB,OAAxB,EAAiC,UAAS,CAAT,EAAW;QAC3C,CAAC,CAAC,eAAF;MACA,CAFD;;MAIA,IAAI,UAAU,GAAG,UAAS,CAAT,EAAW;QAC3B,IAAI,CAAC,WAAL,GAAmB,MAAnB;QACA,IAAI,CAAC,iBAAL,GAAyB,IAAI,CAAC,UAAL,GAAkB,aAAa,CAAC,UAAd,EAA3C;;QACA,IAAI,CAAC,UAAL,CAAgB,CAAhB,EAAmB,aAAnB,EAAkC,MAAlC;MACA,CAJD;;MAMA,MAAM,CAAC,gBAAP,CAAwB,WAAxB,EAAqC,UAArC;MACA,MAAM,CAAC,gBAAP,CAAwB,YAAxB,EAAsC,UAAtC,EAAkD;QAAC,OAAO,EAAE;MAAV,CAAlD,EAhB4E,CAkB/E;;MACG,MAAM,CAAC,gBAAP,CAAwB,UAAxB,EAAqC,CAAD,IAAO;QAC1C,IAAI,QAAQ,GAAG,aAAa,CAAC,QAAd,EAAf;QAEA,CAAC,CAAC,eAAF;QACA,aAAa,CAAC,iBAAd,CAAgC,IAAhC;;QAEA,IAAG,QAAQ,KAAK,aAAa,CAAC,QAAd,EAAhB,EAAyC;UACxC,IAAI,CAAC,QAAL,CAAc,gBAAd,EAAgC,aAAhC;UACA,IAAI,CAAC,KAAL,CAAW,cAAX,CAA0B,QAA1B,CAAmC,eAAnC,EAAoD,aAAa,CAAC,YAAd,EAApD;QACA;MACD,CAVD;;MAYA,IAAG,MAAM,CAAC,OAAP,CAAe,MAAlB,EAAyB;QACxB,MAAM,CAAC,KAAP,CAAa,QAAb,GAAwB,UAAxB;QACA,MAAM,CAAC,KAAP,CAAa,IAAb,GAAoB,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,WAAtB,GAAoC,MAAM,CAAC,QAAP,EAApC,GAAwD,IAA5E;MACA;;MAED,MAAM,CAAC,QAAP,GAAkB,MAAlB;;MAEA,IAAG,OAAO,CAAC,UAAR,IAAsB,MAAM,CAAC,OAAhC,EAAwC;QACvC,OAAO,CAAC,KAAR,CAAc,MAAd;MACA;IACD;;IAED,SAAS,CAAC,OAAV,CAAkB,MAAlB,GAA2B,MAA3B;EACA;;EAED,kBAAkB,CAAC,MAAD,EAAQ;IACzB,KAAK,qBAAL,CAA2B,MAA3B;IAEA,MAAM,CAAC,KAAP,CAAa,OAAb,CAAsB,IAAD,IAAU;MAC9B,KAAK,qBAAL,CAA2B,IAA3B;IACA,CAFD;EAGA;;EAED,qBAAqB,CAAC,SAAD,EAAW;IAC/B,IAAI,QAAJ;;IAEA,IAAG,SAAS,CAAC,OAAV,CAAkB,MAArB,EAA4B;MAC3B,QAAQ,GAAG,SAAS,CAAC,OAAV,CAAkB,MAAlB,CAAyB,QAApC;;MAEA,IAAG,QAAQ,IAAI,QAAQ,CAAC,aAAxB,EAAsC;QACrC,QAAQ,CAAC,aAAT,CAAuB,WAAvB,CAAmC,QAAnC;MACA;IACD;EACD;;EAED,YAAY,CAAC,SAAD,EAAY,MAAZ,EAAmB;IAC9B,IAAG,SAAS,CAAC,OAAV,CAAkB,MAAlB,IAA4B,SAAS,CAAC,OAAV,CAAkB,MAAlB,CAAyB,QAAxD,EAAiE;MAChE,SAAS,CAAC,OAAV,CAAkB,MAAlB,CAAyB,QAAzB,CAAkC,KAAlC,CAAwC,MAAxC,GAAiD,MAAjD;IACA;EACD;;EAED,kBAAkB,CAAC,MAAD,EAAQ;IACzB,OAAO,MAAM,CAAC,UAAP,CAAkB,SAAzB;EACA;;EAED,UAAU,CAAC,CAAD,EAAI,MAAJ,EAAY,MAAZ,EAAmB;IAC5B,IAAI,IAAI,GAAG,IAAX;IAEA,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,GAA7B,CAAiC,wBAAjC;;IAEA,SAAS,SAAT,CAAmB,CAAnB,EAAqB;MACpB,IAAI,CAAC,GAAG,OAAO,CAAC,CAAC,OAAT,KAAqB,WAArB,GAAmC,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,OAAhD,GAA0D,CAAC,CAAC,OAApE;MAAA,IACA,SAAS,GAAG,CAAC,GAAG,IAAI,CAAC,MADrB;MAAA,IAEA,QAAQ,GAAG,CAAC,GAAG,IAAI,CAAC,OAFpB;MAAA,IAGA,aAHA;MAAA,IAGe,YAHf;MAKA,IAAI,CAAC,OAAL,GAAe,CAAf;;MAEA,IAAG,IAAI,CAAC,KAAL,CAAW,GAAd,EAAkB;QACjB,SAAS,GAAG,CAAC,SAAb;QACA,QAAQ,GAAG,CAAC,QAAZ;MACA;;MAED,aAAa,GAAG,MAAM,CAAC,KAAP,IAAgB,MAAM,CAAC,QAAvB,IAAmC,MAAM,CAAC,KAAP,IAAgB,MAAM,CAAC,QAA1E;MAEA,MAAM,CAAC,QAAP,CAAgB,IAAI,CAAC,UAAL,GAAkB,SAAlC;MAEA,YAAY,GAAG,MAAM,CAAC,KAAP,IAAgB,MAAM,CAAC,QAAvB,IAAmC,MAAM,CAAC,KAAP,IAAgB,MAAM,CAAC,QAAzE;;MAEA,IAAG,QAAQ,GAAG,CAAd,EAAgB;QACf,IAAI,CAAC,UAAL,GAAkB,IAAI,CAAC,iBAAvB;MACA;;MAED,IAAG,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,kBAAnB,IAAyC,IAAI,CAAC,UAA9C,IAA4D,EAAE,aAAa,IAAI,YAAnB,CAA/D,EAAgG;QAC/F,IAAI,QAAQ,GAAG,IAAI,CAAC,UAAL,CAAgB,QAAhB,EAAf;;QAEA,IAAG,QAAQ,GAAG,CAAd,EAAgB;UACf,IAAG,QAAQ,IAAI,IAAI,CAAC,UAAL,CAAgB,QAA/B,EAAwC;YACvC,IAAI,CAAC,UAAL,GAAkB,IAAI,CAAC,UAAL,CAAgB,UAAhB,EAAlB;UACA;QACD;;QAED,IAAG,IAAI,CAAC,UAAR,EAAmB;UAClB,IAAI,CAAC,UAAL,CAAgB,QAAhB,CAAyB,IAAI,CAAC,UAAL,CAAgB,QAAhB,KAA6B,QAAtD;QACA;MACD;;MAED,IAAI,CAAC,KAAL,CAAW,aAAX,CAAyB,eAAzB,CAAyC,IAAzC;;MAEA,IAAG,CAAC,IAAI,CAAC,KAAL,CAAW,WAAZ,IAA2B,MAAM,CAAC,OAAP,CAAe,MAA1C,IAAoD,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,cAA7E,EAA4F;QAC3F,MAAM,CAAC,gBAAP;MACA;IACD;;IAED,SAAS,OAAT,CAAiB,CAAjB,EAAmB;MAErB;MACG,IAAG,IAAI,CAAC,WAAL,CAAiB,OAAjB,CAAyB,IAA5B,EAAiC;QAChC,IAAI,CAAC,WAAL,CAAiB,OAAjB,CAAyB,IAAzB,CAA8B,OAA9B,GAAwC,KAAxC;MACA;;MAED,IAAG,IAAI,CAAC,KAAL,CAAW,WAAX,IAA0B,MAAM,CAAC,OAAP,CAAe,MAAzC,IAAmD,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,cAA5E,EAA2F;QAC1F,MAAM,CAAC,gBAAP;MACA;;MAED,QAAQ,CAAC,IAAT,CAAc,mBAAd,CAAkC,SAAlC,EAA6C,OAA7C;MACA,QAAQ,CAAC,IAAT,CAAc,mBAAd,CAAkC,WAAlC,EAA+C,SAA/C;MAEA,MAAM,CAAC,mBAAP,CAA2B,WAA3B,EAAwC,SAAxC;MACA,MAAM,CAAC,mBAAP,CAA2B,UAA3B,EAAuC,OAAvC;MAEA,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,MAA7B,CAAoC,wBAApC;;MAEA,IAAG,IAAI,CAAC,UAAL,KAAoB,MAAM,CAAC,QAAP,EAAvB,EAAyC;QACxC,IAAI,CAAC,QAAL,CAAc,gBAAd,EAAgC,MAAhC;QACA,IAAI,CAAC,KAAL,CAAW,cAAX,CAA0B,QAA1B,CAAmC,eAAnC,EAAoD,MAAM,CAAC,YAAP,EAApD;MACA;IACD;;IAED,CAAC,CAAC,eAAF,GA1E4B,CA0ER;IAEtB;;IACE,IAAG,IAAI,CAAC,WAAL,CAAiB,OAAjB,CAAyB,IAA5B,EAAiC;MAChC,IAAI,CAAC,WAAL,CAAiB,OAAjB,CAAyB,IAAzB,CAA8B,OAA9B,GAAwC,IAAxC;IACA;;IAED,IAAI,CAAC,MAAL,GAAc,OAAO,CAAC,CAAC,OAAT,KAAqB,WAArB,GAAmC,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,OAAhD,GAA0D,CAAC,CAAC,OAA1E;IACA,IAAI,CAAC,OAAL,GAAe,IAAI,CAAC,MAApB;IACA,IAAI,CAAC,UAAL,GAAkB,MAAM,CAAC,QAAP,EAAlB;IAEA,QAAQ,CAAC,IAAT,CAAc,gBAAd,CAA+B,WAA/B,EAA4C,SAA5C;IACA,QAAQ,CAAC,IAAT,CAAc,gBAAd,CAA+B,SAA/B,EAA0C,OAA1C;IACA,MAAM,CAAC,gBAAP,CAAwB,WAAxB,EAAqC,SAArC,EAAgD;MAAC,OAAO,EAAE;IAAV,CAAhD;IACA,MAAM,CAAC,gBAAP,CAAwB,UAAxB,EAAoC,OAApC;EACA;;AA3RgC;;;AA8RlC,aAAa,CAAC,UAAd,GAA2B,eAA3B;;AC9RA,MAAM,UAAN,SAAyB,MAAzB,CAA+B;EAE9B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,WAAL,GAAmB,KAAnB;IACA,KAAK,MAAL,GAAc,KAAd;IACA,KAAK,WAAL,GAAmB,KAAnB;IACA,KAAK,MAAL,GAAc,IAAd;IACA,KAAK,UAAL,GAAkB,IAAlB;IAEA,KAAK,mBAAL,CAAyB,eAAzB,EAA0C,KAA1C,EATiB,CASgC;EACjD;;EAED,UAAU,GAAE;IACX,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAtB,EAAoC;MACnC,KAAK,SAAL,CAAe,kBAAf,EAAmC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAnC;IACA;EACD;;EAED,aAAa,CAAC,GAAD,EAAK;IACjB,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,KAAK,GAAG,GAAG,CAAC,UAAJ,EADR;IAGA,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAb;IACA,MAAM,CAAC,SAAP,GAAmB,6BAAnB;IAEA,IAAI,UAAU,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAjB;IACA,UAAU,CAAC,SAAX,GAAuB,kCAAvB;IAEA,MAAM,CAAC,gBAAP,CAAwB,OAAxB,EAAiC,UAAS,CAAT,EAAW;MAC3C,CAAC,CAAC,eAAF;IACA,CAFD;;IAIA,IAAI,UAAU,GAAG,UAAS,CAAT,EAAW;MAC3B,IAAI,CAAC,QAAL,GAAgB,GAAhB;;MACA,IAAI,CAAC,UAAL,CAAgB,CAAhB,EAAmB,GAAnB,EAAwB,MAAxB;IACA,CAHD;;IAKA,MAAM,CAAC,gBAAP,CAAwB,WAAxB,EAAqC,UAArC;IACA,MAAM,CAAC,gBAAP,CAAwB,YAAxB,EAAsC,UAAtC,EAAkD;MAAC,OAAO,EAAE;IAAV,CAAlD;IAEA,UAAU,CAAC,gBAAX,CAA4B,OAA5B,EAAqC,UAAS,CAAT,EAAW;MAC/C,CAAC,CAAC,eAAF;IACA,CAFD;;IAIA,IAAI,cAAc,GAAI,UAAS,CAAT,EAAW;MAChC,IAAI,OAAO,GAAG,IAAI,CAAC,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,GAArC,CAAd;;MAEA,IAAG,OAAH,EAAW;QACV,IAAI,CAAC,QAAL,GAAgB,OAAhB;;QACA,IAAI,CAAC,UAAL,CAAgB,CAAhB,EAAmB,OAAnB,EAA4B,UAA5B;MACA;IACD,CAPD;;IASA,UAAU,CAAC,gBAAX,CAA4B,WAA5B,EAAwC,cAAxC;IACA,UAAU,CAAC,gBAAX,CAA4B,YAA5B,EAAyC,cAAzC,EAAyD;MAAC,OAAO,EAAE;IAAV,CAAzD;IAEA,KAAK,CAAC,WAAN,CAAkB,MAAlB;IACA,KAAK,CAAC,WAAN,CAAkB,UAAlB;EACA;;EAED,UAAU,CAAC,CAAD,EAAI,GAAJ,EAAS,MAAT,EAAgB;IACzB,IAAI,IAAI,GAAG,IAAX;IAEA,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,GAA7B,CAAiC,wBAAjC;;IAEA,SAAS,SAAT,CAAmB,CAAnB,EAAqB;MACpB,GAAG,CAAC,SAAJ,CAAc,IAAI,CAAC,WAAL,IAAoB,CAAC,OAAO,CAAC,CAAC,OAAT,KAAqB,WAArB,GAAmC,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,OAAhD,GAA0D,CAAC,CAAC,OAA7D,IAAwE,IAAI,CAAC,MAAjG,CAAd;IACA;;IAED,SAAS,OAAT,CAAiB,CAAjB,EAAmB;MAErB;MACA;MACA;MACA;MAEG,QAAQ,CAAC,IAAT,CAAc,mBAAd,CAAkC,SAAlC,EAA6C,SAA7C;MACA,QAAQ,CAAC,IAAT,CAAc,mBAAd,CAAkC,WAAlC,EAA+C,SAA/C;MAEA,MAAM,CAAC,mBAAP,CAA2B,WAA3B,EAAwC,SAAxC;MACA,MAAM,CAAC,mBAAP,CAA2B,UAA3B,EAAuC,OAAvC;MAEA,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAA6B,MAA7B,CAAoC,wBAApC;MAEA,IAAI,CAAC,gBAAL,CAAsB,YAAtB,EAAoC,GAAG,CAAC,YAAJ,EAApC;IACA;;IAED,CAAC,CAAC,eAAF,GA3ByB,CA2BL;IAEtB;IACA;IACA;IACA;;IAEE,IAAI,CAAC,MAAL,GAAc,OAAO,CAAC,CAAC,OAAT,KAAqB,WAArB,GAAmC,CAAC,CAAC,OAAF,CAAU,CAAV,EAAa,OAAhD,GAA0D,CAAC,CAAC,OAA1E;IACA,IAAI,CAAC,WAAL,GAAmB,GAAG,CAAC,SAAJ,EAAnB;IAEA,QAAQ,CAAC,IAAT,CAAc,gBAAd,CAA+B,WAA/B,EAA4C,SAA5C;IACA,QAAQ,CAAC,IAAT,CAAc,gBAAd,CAA+B,SAA/B,EAA0C,OAA1C;IAEA,MAAM,CAAC,gBAAP,CAAwB,WAAxB,EAAqC,SAArC,EAAgD;MAAC,OAAO,EAAE;IAAV,CAAhD;IACA,MAAM,CAAC,gBAAP,CAAwB,UAAxB,EAAoC,OAApC;EACA;;AAxG6B;;;AA2G/B,UAAU,CAAC,UAAX,GAAwB,YAAxB;;AC3GA,MAAM,WAAN,SAA0B,MAA1B,CAAgC;EAE/B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,OAAL,GAAe,KAAf;IACA,KAAK,kBAAL,GAA0B,KAA1B;IACA,KAAK,cAAL,GAAsB,KAAtB;IACA,KAAK,iBAAL,GAAyB,KAAzB;IAEA,KAAK,WAAL,GAAmB,CAAnB;IACA,KAAK,UAAL,GAAkB,CAAlB;IACA,KAAK,eAAL,GAAuB,CAAvB;IACA,KAAK,cAAL,GAAsB,CAAtB;IAEA,KAAK,UAAL,GAAkB,KAAlB;IAEA,KAAK,OAAL,GAAe,KAAf;IAEA,KAAK,WAAL,GAAmB,KAAnB;IACA,KAAK,aAAL,GAAqB,KAArB;IAEA,KAAK,mBAAL,CAAyB,YAAzB,EAAuC,IAAvC,EApBiB,CAoB4B;EAC7C;;EAED,UAAU,GAAE;IACX,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAtB,EAAiC;MAChC,IAAI,KAAK,GAAG,KAAK,KAAjB;MAAA,IACA,UADA;MAGA,KAAK,WAAL,GAAmB,KAAK,CAAC,OAAN,CAAc,YAAjC;MACA,KAAK,UAAL,GAAkB,KAAK,CAAC,OAAN,CAAc,WAAhC;;MAEA,IAAG,KAAK,CAAC,OAAN,CAAc,UAAjB,EAA4B;QAC3B,KAAK,eAAL,GAAuB,KAAK,CAAC,OAAN,CAAc,UAAd,CAAyB,YAAhD;QACA,KAAK,cAAL,GAAsB,KAAK,CAAC,OAAN,CAAc,UAAd,CAAyB,WAA/C;MACA;;MAED,IAAG,OAAO,oBAAP,KAAgC,WAAhC,IAA+C,OAAO,cAAP,KAA0B,WAAzE,IAAwF,KAAK,CAAC,UAAN,CAAiB,aAAjB,OAAqC,SAAhI,EAA0I;QAEzI,KAAK,4BAAL;QAEA,KAAK,UAAL,GAAkB,IAAlB;QAEA,KAAK,cAAL,GAAsB,IAAI,cAAJ,CAAoB,KAAD,IAAW;UACnD,IAAG,CAAC,KAAK,CAAC,aAAP,IAAyB,KAAK,CAAC,aAAN,IAAsB,CAAC,KAAK,CAAC,OAAN,CAAc,IAAd,CAAmB,WAAtE,EAAmF;YAElF,IAAI,UAAU,GAAG,IAAI,CAAC,KAAL,CAAW,KAAK,CAAC,CAAD,CAAL,CAAS,WAAT,CAAqB,MAAhC,CAAjB;YACA,IAAI,SAAS,GAAG,IAAI,CAAC,KAAL,CAAW,KAAK,CAAC,CAAD,CAAL,CAAS,WAAT,CAAqB,KAAhC,CAAhB;;YAEA,IAAG,KAAK,WAAL,IAAoB,UAApB,IAAkC,KAAK,UAAL,IAAmB,SAAxD,EAAkE;cACjE,KAAK,WAAL,GAAmB,UAAnB;cACA,KAAK,UAAL,GAAkB,SAAlB;;cAEA,IAAG,KAAK,CAAC,OAAN,CAAc,UAAjB,EAA4B;gBAC3B,KAAK,eAAL,GAAuB,KAAK,CAAC,OAAN,CAAc,UAAd,CAAyB,YAAhD;gBACA,KAAK,cAAL,GAAsB,KAAK,CAAC,OAAN,CAAc,UAAd,CAAyB,WAA/C;cACA;;cAED,KAAK,WAAL;YACA;UACD;QACD,CAlBqB,CAAtB;QAoBA,KAAK,cAAL,CAAoB,OAApB,CAA4B,KAAK,CAAC,OAAlC;QAEA,UAAU,GAAG,MAAM,CAAC,gBAAP,CAAwB,KAAK,CAAC,OAA9B,CAAb;;QAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAnB,IAAiC,CAAC,KAAK,KAAL,CAAW,UAAX,CAAsB,WAAxD,KAAwE,UAAU,CAAC,gBAAX,CAA4B,YAA5B,KAA6C,UAAU,CAAC,gBAAX,CAA4B,YAA5B,CAArH,CAAH,EAAmK;UAElK,KAAK,iBAAL,GAAyB,IAAI,cAAJ,CAAoB,KAAD,IAAW;YACtD,IAAG,CAAC,KAAK,CAAC,aAAP,IAAyB,KAAK,CAAC,aAAN,IAAsB,CAAC,KAAK,CAAC,OAAN,CAAc,IAAd,CAAmB,WAAtE,EAAmF;cAElF,IAAI,UAAU,GAAG,IAAI,CAAC,KAAL,CAAW,KAAK,CAAC,CAAD,CAAL,CAAS,WAAT,CAAqB,MAAhC,CAAjB;cACA,IAAI,SAAS,GAAG,IAAI,CAAC,KAAL,CAAW,KAAK,CAAC,CAAD,CAAL,CAAS,WAAT,CAAqB,KAAhC,CAAhB;;cAEA,IAAG,KAAK,eAAL,IAAwB,UAAxB,IAAsC,KAAK,cAAL,IAAuB,SAAhE,EAA0E;gBACzE,KAAK,eAAL,GAAuB,UAAvB;gBACA,KAAK,cAAL,GAAsB,SAAtB;gBACA,KAAK,WAAL,GAAmB,KAAK,CAAC,OAAN,CAAc,YAAjC;gBACA,KAAK,UAAL,GAAkB,KAAK,CAAC,OAAN,CAAc,WAAhC;cACA;;cAED,KAAK,WAAL;YACA;UACD,CAfwB,CAAzB;UAiBA,KAAK,iBAAL,CAAuB,OAAvB,CAA+B,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAlD;QACA;;QAED,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAA/B;MAEA,CAtDD,MAsDK;QACJ,KAAK,OAAL,GAAe,YAAU;UACxB,IAAG,CAAC,KAAK,CAAC,aAAP,IAAyB,KAAK,CAAC,aAAN,IAAuB,CAAC,KAAK,CAAC,OAAN,CAAc,IAAd,CAAmB,WAAvE,EAAoF;YACnF,KAAK,CAAC,aAAN,CAAoB,eAApB,CAAoC,IAApC;YACA,KAAK,CAAC,MAAN;UACA;QACD,CALD;;QAOA,MAAM,CAAC,gBAAP,CAAwB,QAAxB,EAAkC,KAAK,OAAvC;MACA;;MAED,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAhC;IACA;EACD;;EAED,4BAA4B,GAAE;IAC7B,KAAK,kBAAL,GAA0B,IAAI,oBAAJ,CAA0B,OAAD,IAAa;MAC/D,KAAK,OAAL,GAAe,OAAO,CAAC,CAAD,CAAP,CAAW,cAA1B;;MAEA,IAAG,CAAC,KAAK,WAAT,EAAqB;QACpB,KAAK,WAAL,GAAmB,IAAnB;QACA,KAAK,aAAL,GAAqB,CAAC,KAAK,OAA3B;MACA;;MAED,IAAG,KAAK,OAAR,EAAgB;QACf,KAAK,WAAL,CAAiB,KAAK,aAAtB;QACA,KAAK,aAAL,GAAqB,KAArB;MACA;IAED,CAbyB,CAA1B;IAeA,KAAK,kBAAL,CAAwB,OAAxB,CAAgC,KAAK,KAAL,CAAW,OAA3C;EACA;;EAED,WAAW,CAAC,KAAD,EAAO;IACjB,IAAG,KAAK,WAAL,IAAoB,KAAK,OAA5B,EAAoC;MACnC,KAAK,KAAL,CAAW,aAAX,CAAyB,eAAzB,CAAyC,IAAzC;MACA,KAAK,KAAL,CAAW,MAAX,CAAkB,KAAlB;IACA;EACD;;EAED,YAAY,GAAE;IACb,KAAK,KAAL,CAAW,UAAX,CAAsB,MAAtB;EACA;;EAED,aAAa,GAAE;IACd,IAAG,KAAK,OAAR,EAAgB;MACf,MAAM,CAAC,mBAAP,CAA2B,QAA3B,EAAqC,KAAK,OAA1C;IACA;;IAED,IAAG,KAAK,cAAR,EAAuB;MACtB,KAAK,cAAL,CAAoB,SAApB,CAA8B,KAAK,KAAL,CAAW,OAAzC;IACA;;IAED,IAAG,KAAK,kBAAR,EAA2B;MAC1B,KAAK,kBAAL,CAAwB,SAAxB,CAAkC,KAAK,KAAL,CAAW,OAA7C;IACA;;IAED,IAAG,KAAK,iBAAR,EAA0B;MACzB,KAAK,iBAAL,CAAuB,SAAvB,CAAiC,KAAK,KAAL,CAAW,OAAX,CAAmB,UAApD;IACA;EACD;;AAzJ8B;;;AA4JhC,WAAW,CAAC,UAAZ,GAAyB,aAAzB;;AC5JA,MAAM,gBAAN,SAA+B,MAA/B,CAAqC;EAEpC,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,OAAL,GAAe,EAAf;IACA,KAAK,aAAL,GAAqB,EAArB;IACA,KAAK,IAAL,GAAY,EAAZ;IACA,KAAK,KAAL,GAAa,CAAb;IACA,KAAK,iBAAL,GAAyB,EAAzB;IACA,KAAK,iBAAL,GAAyB,IAAzB;IACA,KAAK,oBAAL,GAA4B,KAA5B;IAEA,KAAK,mBAAL,CAAyB,kBAAzB,EAA6C,KAA7C,EAXiB,CAWmC;;IACpD,KAAK,mBAAL,CAAyB,mCAAzB,EAA8D,IAA9D,EAZiB,CAYmD;;IACpE,KAAK,mBAAL,CAAyB,uCAAzB,EAAkE,IAAlE,EAbiB,CAauD;;IACxE,KAAK,mBAAL,CAAyB,mCAAzB,EAA8D,KAA9D,EAdiB,CAcoD;;IAErE,KAAK,oBAAL,CAA0B,YAA1B;EACA,CAnBmC,CAqBrC;;;EACC,UAAU,GAAE;IACX,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAtB,EAAuC;MACtC,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAAhC;MACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,sBAAL,CAA4B,IAA5B,CAAiC,IAAjC,CAA9B;MACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,sBAAL,CAA4B,IAA5B,CAAiC,IAAjC,CAA9B;MACA,KAAK,SAAL,CAAe,gBAAf,EAAiC,KAAK,sBAAL,CAA4B,IAA5B,CAAiC,IAAjC,CAAjC;MACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,sBAAL,CAA4B,IAA5B,CAAiC,IAAjC,CAA/B;MACA,KAAK,SAAL,CAAe,YAAf,EAA6B,KAAK,sBAAL,CAA4B,IAA5B,CAAiC,IAAjC,CAA7B;MACA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,sBAAL,CAA4B,IAA5B,CAAiC,IAAjC,CAAhC;MAEA,KAAK,SAAL,CAAe,iBAAf,EAAkC,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAlC;;MAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,KAAwC,UAA3C,EAAsD;QACrD,KAAK,SAAL,CAAe,kBAAf,EAAmC,KAAK,2BAAL,CAAiC,IAAjC,CAAsC,IAAtC,CAAnC;QACA,KAAK,SAAL,CAAe,UAAf,EAA2B,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAA3B;QACA,KAAK,SAAL,CAAe,YAAf,EAA6B,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAA7B;MACA;IACD;EACD;;EAED,WAAW,CAAC,KAAD,EAAO;IACjB,IAAG,CAAC,YAAD,EAAe,gBAAf,EAAiC,OAAjC,CAAyC,KAAK,UAAL,EAAzC,MAAgE,CAAC,CAApE,EAAsE;MACrE,IAAG,CAAC,KAAJ,EAAU;QACT,KAAK,MAAL;MACA;IACD;EACD;;EAED,sBAAsB,GAAE;IACvB,IAAI,OAAO,GAAG,EAAd;IAEA,KAAK,IAAL,GAAY,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAA/B;IACA,KAAK,iBAAL,GAAyB,KAAK,KAAL,CAAW,OAAX,CAAmB,iCAAnB,IAAwD,KAAK,mBAAtF;IACA,KAAK,iBAAL,GAAyB,KAAK,KAAL,CAAW,OAAX,CAAmB,iCAA5C;IACA,KAAK,aAAL,GAAqB,EAArB,CANuB,CAQzB;;IACE,KAAK,KAAL,CAAW,aAAX,CAAyB,cAAzB,CAAwC,OAAxC,CAAgD,CAAC,MAAD,EAAS,CAAT,KAAe;MAC9D,IAAG,MAAM,CAAC,OAAP,CAAe,UAAlB,EAA6B;QAC5B,IAAG,MAAM,CAAC,OAAP,CAAe,UAAf,CAA0B,KAA1B,IAAmC,MAAM,CAAC,OAAP,CAAe,UAAf,CAA0B,OAAhE,EAAwE;UACvE,MAAM,CAAC,OAAP,CAAe,UAAf,CAA0B,KAA1B,GAAkC,CAAlC;UACA,OAAO,CAAC,IAAR,CAAa,MAAb;;UAEA,IAAG,CAAC,MAAM,CAAC,OAAR,IAAmB,KAAK,IAAL,KAAc,UAApC,EAA+C;YAC9C,KAAK,aAAL,CAAmB,IAAnB,CAAwB,MAAxB;UACA;QACD;MACD;IACD,CAXD,EATuB,CAsBzB;;IACE,OAAO,GAAG,OAAO,CAAC,OAAR,EAAV;IACA,OAAO,GAAG,OAAO,CAAC,IAAR,CAAa,CAAC,CAAD,EAAI,CAAJ,KAAU;MAChC,IAAI,IAAI,GAAG,CAAC,CAAC,OAAF,CAAU,UAAV,CAAqB,KAArB,GAA6B,CAAC,CAAC,OAAF,CAAU,UAAV,CAAqB,KAA7D;MACA,OAAO,IAAI,IAAK,CAAC,CAAC,OAAF,CAAU,UAAV,CAAqB,KAArB,GAA6B,CAAC,CAAC,OAAF,CAAU,UAAV,CAAqB,KAAlE;IACA,CAHS,CAAV;IAKA,KAAK,OAAL,GAAe,OAAf;;IAEA,IAAG,KAAK,IAAL,KAAc,UAAjB,EAA4B;MAC3B,KAAK,wBAAL;IACA,CAjCsB,CAmCzB;;;IACE,KAAK,IAAI,GAAT,IAAgB,KAAK,KAAL,CAAW,aAAX,CAAyB,cAAzC,EAAwD;MACvD,IAAG,GAAG,CAAC,UAAJ,CAAe,SAAf,IAA4B,oBAA/B,EAAoD;QACnD,KAAK,oBAAL,GAA4B,GAA5B;QACA;MACA;IACD;;IAED,IAAG,KAAK,oBAAR,EAA6B;MAC5B,IAAG,KAAK,aAAL,CAAmB,MAAtB,EAA6B;QAC5B,KAAK,oBAAL,CAA0B,IAA1B;MACA,CAFD,MAEK;QACJ,KAAK,oBAAL,CAA0B,IAA1B;MACA;IACD;EACD,CApGmC,CAsGrC;;;EACC,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAI,GAAG,GAAG,MAAM,CAAC,aAAP,EAAV;IAEA,MAAM,CAAC,OAAP,CAAe,UAAf,GAA4B;MAAC,KAAK,EAAE,OAAO,GAAG,CAAC,UAAX,KAA0B,WAA1B,GAAwC,CAAxC,GAA4C,GAAG,CAAC,UAAxD;MAAoE,OAAO,EAAC,GAAG,CAAC,OAAJ,KAAgB,KAAhB,GAAwB,KAAxB,GAAgC;IAA5G,CAA5B;EACA;;EAED,aAAa,CAAC,GAAD,EAAK;IACjB,IAAI,EAAJ;;IAEA,IAAG,GAAG,CAAC,IAAJ,KAAa,MAAhB,EAAuB;MACtB,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAL;MACA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,+BAAjB;MAEA,GAAG,CAAC,OAAJ,CAAY,gBAAZ,GAA+B;QAC9B,OAAO,EAAC,EADsB;QAE9B,IAAI,EAAC,KAAK;MAFoB,CAA/B;;MAKA,IAAG,CAAC,KAAK,iBAAT,EAA2B;QAC1B,EAAE,CAAC,KAAH,CAAS,OAAT,GAAmB,MAAnB;MACA;IACD;EACD;;EAED,SAAS,CAAC,GAAD,EAAK;IACb,IAAI,KAAK,GAAG,GAAG,CAAC,UAAJ,EAAZ;;IAEA,IAAG,GAAG,CAAC,OAAJ,CAAY,gBAAf,EAAgC;MAC/B,KAAK,CAAC,WAAN,CAAkB,GAAG,CAAC,OAAJ,CAAY,gBAAZ,CAA6B,OAA/C;MACA,KAAK,2BAAL,CAAiC,GAAjC;IACA;EACD,CAtImC,CAwIrC;;;EACC,sBAAsB,CAAC,MAAD,EAAS,gBAAT,EAA0B;IAC/C,IAAG,CAAC,gBAAD,IAAqB,MAAM,CAAC,OAAP,CAAe,UAAvC,EAAkD;MACjD,MAAM,CAAC,OAAP,CAAe,UAAf,CAA0B,OAA1B,GAAoC,MAAM,CAAC,OAA3C;MACA,KAAK,sBAAL;IACA;EACD;;EAED,UAAU,CAAC,MAAD,EAAQ;IACjB,IAAI,QAAQ,GAAG,KAAK,aAAL,CAAmB,MAAlC;IAEA,MAAM,CAAC,IAAP,CAAY,KAAZ,EAAmB,IAAnB;;IAEA,IAAG,KAAK,IAAL,KAAc,UAAjB,EAA4B;MAC3B,KAAK,aAAL,CAAmB,OAAnB,CAA2B,MAA3B;MACA,KAAK,wBAAL;;MAEA,IAAG,KAAK,oBAAL,IAA6B,CAAC,QAAjC,EAA0C;QACzC,KAAK,oBAAL,CAA0B,IAA1B;MACA;IACD;EACD;;EAED,UAAU,CAAC,MAAD,EAAQ;IACjB,IAAI,KAAJ;IAEA,MAAM,CAAC,IAAP,CAAY,KAAZ,EAAmB,IAAnB,EAHiB,CAInB;;IACE,MAAM,CAAC,QAAP,CAAgB,MAAM,CAAC,QAAP,EAAhB;;IAEA,IAAG,KAAK,IAAL,KAAc,UAAjB,EAA4B;MAC3B,KAAK,GAAG,KAAK,aAAL,CAAmB,OAAnB,CAA2B,MAA3B,CAAR;;MAEA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;QACb,KAAK,aAAL,CAAmB,MAAnB,CAA0B,KAA1B,EAAiC,CAAjC;MACA;;MAED,KAAK,wBAAL;;MAEA,IAAG,KAAK,oBAAL,IAA6B,CAAC,KAAK,aAAL,CAAmB,MAApD,EAA2D;QAC1D,KAAK,oBAAL,CAA0B,IAA1B;MACA;IACD;EACD,CAnLmC,CAqLrC;;;EACC,MAAM,GAAE;IACP,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,OAAO,GAAG,IADV;;IAGA,OAAM,OAAN,EAAc;MAEb,IAAI,KAAK,GAAG,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,MAAnB,CAA0B,OAA1B,MAAuC,YAAvC,GAAsD,IAAI,CAAC,KAAL,CAAW,aAAX,CAAyB,gBAAzB,EAAtD,GAAoG,IAAI,CAAC,KAAL,CAAW,aAAX,CAAyB,QAAzB,EAAhH;MAEA,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,aAAnB,GAAmC,IAAI,CAAC,KAAL,CAAW,aAAX,CAAyB,OAAzB,CAAiC,WAApE,GAAkF,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,WAAtG,IAAqH,KAAhI;;MAEA,IAAG,IAAI,GAAG,CAAV,EAAY;QACf;QACI,IAAI,MAAM,GAAG,IAAI,CAAC,OAAL,CAAa,IAAI,CAAC,KAAlB,CAAb;;QAEA,IAAG,MAAH,EAAU;UACT,IAAI,CAAC,UAAL,CAAgB,MAAhB;UACA,IAAI,CAAC,KAAL;QACA,CAHD,MAGK;UACJ,OAAO,GAAG,KAAV;QACA;MAED,CAXD,MAWK;QAER;QACI,IAAI,MAAM,GAAG,IAAI,CAAC,OAAL,CAAa,IAAI,CAAC,KAAL,GAAY,CAAzB,CAAb;;QAEA,IAAG,MAAH,EAAU;UACT,IAAG,IAAI,GAAG,CAAV,EAAY;YACX,IAAG,IAAI,IAAI,MAAM,CAAC,QAAP,EAAX,EAA6B;cAC5B,IAAI,CAAC,UAAL,CAAgB,MAAhB;cACA,IAAI,CAAC,KAAL;YACA,CAHD,MAGK;cACJ,OAAO,GAAG,KAAV;YACA;UACD,CAPD,MAOK;YACJ,OAAO,GAAG,KAAV;UACA;QACD,CAXD,MAWK;UACJ,OAAO,GAAG,KAAV;QACA;MACD;;MAED,IAAG,CAAC,IAAI,CAAC,KAAL,CAAW,UAAX,CAAsB,eAA1B,EAA0C;QACzC,IAAI,CAAC,KAAL,CAAW,UAAX,CAAsB,iBAAtB;MACA;IACD;EACD;;EAED,wBAAwB,GAAE;IACzB,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,IAAI,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,EADP;IAGA,IAAI,CAAC,OAAL,CAAa,UAAS,GAAT,EAAa;MACzB,IAAI,CAAC,2BAAL,CAAiC,GAAjC;IACA,CAFD;EAGA;;EAED,2BAA2B,CAAC,GAAD,EAAK;IAC/B,IAAI,EAAJ,EAAQ,QAAR;;IAEA,IAAG,GAAG,CAAC,OAAJ,CAAY,gBAAf,EAAgC;MAC/B,EAAE,GAAG,GAAG,CAAC,OAAJ,CAAY,gBAAZ,CAA6B,OAAlC;;MAEA,OAAM,EAAE,CAAC,UAAT,EAAqB,EAAE,CAAC,WAAH,CAAe,EAAE,CAAC,UAAlB;;MAErB,QAAQ,GAAG,KAAK,iBAAL,CAAuB,KAAK,wBAAL,CAA8B,GAA9B,CAAvB,CAAX;;MACA,IAAG,QAAH,EAAY;QACX,EAAE,CAAC,WAAH,CAAe,QAAf;MACA;IACD;EACD;;EAED,wBAAwB,CAAC,GAAD,EAAK;IAC5B,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,IAAI,GAAG,GAAG,CAAC,OAAJ,EADP;IAAA,IAEA,MAAM,GAAG,EAFT;IAAA,IAGA,iBAHA;IAKA,KAAK,aAAL,CAAmB,OAAnB,CAA2B,UAAS,MAAT,EAAgB;MAC1C,IAAI,KAAK,GAAG,MAAM,CAAC,aAAP,CAAqB,IAArB,CAAZ;;MAEA,IAAG,MAAM,CAAC,UAAP,CAAkB,KAAlB,IAA2B,MAAM,CAAC,KAArC,EAA2C;QAC1C,IAAG,MAAM,CAAC,OAAP,CAAe,MAAf,IAAyB,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,qCAA/C,EAAqF;UAEpF,iBAAiB,GAAG;YACnB,KAAK,EAAC,KADa;YAEnB,IAAI,EAAC,EAFc;YAGnB,QAAQ,EAAC,YAAU;cAClB,OAAO,KAAP;YACA,CALkB;YAMnB,OAAO,EAAC,YAAU;cACjB,OAAO,IAAP;YACA,CARkB;YASnB,UAAU,EAAC,YAAU;cACpB,OAAO,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAP;YACA,CAXkB;YAYnB,MAAM,EAAC,YAAU;cAChB,OAAO,GAAG,CAAC,YAAJ,EAAP;YACA,CAdkB;YAenB,SAAS,EAAC,YAAU;cACnB,OAAO,MAAM,CAAC,YAAP,EAAP;YACA;UAjBkB,CAApB;;UAoBA,SAAS,UAAT,CAAoB,QAApB,EAA6B;YAC5B,QAAQ;UACR;;UAED,MAAM,CAAC,IAAP,CAAY;YACX,KAAK,EAAE,MAAM,CAAC,KADH;YAEX,KAAK,EAAE,MAAM,CAAC,UAAP,CAAkB,KAFd;YAGX,KAAK,EAAE,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,SAAtB,CAAgC,IAAhC,CAAqC,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,MAAxD,EAAgE,iBAAhE,EAAmF,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,MAAzG,EAAiH,UAAjH;UAHI,CAAZ;QAKA,CA/BD,MA+BK;UACJ,MAAM,CAAC,IAAP,CAAY;YACX,KAAK,EAAE,MAAM,CAAC,KADH;YAEX,KAAK,EAAE,MAAM,CAAC,UAAP,CAAkB,KAFd;YAGX,KAAK,EAAE;UAHI,CAAZ;QAKA;MACD;IACD,CA3CD;IA6CA,OAAO,MAAP;EACA;;EAED,mBAAmB,CAAC,IAAD,EAAM;IACxB,IAAI,IAAI,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAX;IAEA,IAAI,CAAC,OAAL,CAAa,UAAS,IAAT,EAAc;MAC1B,IAAI,GAAG,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAV;MACA,IAAI,SAAS,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAhB;MACA,IAAI,SAAS,GAAG,QAAQ,CAAC,aAAT,CAAuB,IAAvB,CAAhB;MACA,IAAI,YAAJ;MAEA,IAAI,cAAc,GAAG,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAArB;MACA,SAAS,CAAC,WAAV,CAAsB,cAAtB;MACA,KAAK,QAAL,CAAc,aAAa,IAAI,CAAC,KAAhC,EAAuC,UAAS,IAAT,EAAc;QACpD,cAAc,CAAC,SAAf,GAA2B,IAAI,IAAI,IAAI,CAAC,KAAxC;MACA,CAFD;;MAIA,IAAG,IAAI,CAAC,KAAL,YAAsB,IAAzB,EAA8B;QAC7B,YAAY,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAf;QACA,YAAY,CAAC,WAAb,CAAyB,IAAI,CAAC,KAA9B;QACA,SAAS,CAAC,WAAV,CAAsB,YAAtB;MACA,CAJD,MAIK;QACJ,SAAS,CAAC,SAAV,GAAsB,IAAI,CAAC,KAA3B;MACA;;MAED,GAAG,CAAC,WAAJ,CAAgB,SAAhB;MACA,GAAG,CAAC,WAAJ,CAAgB,SAAhB;MACA,IAAI,CAAC,WAAL,CAAiB,GAAjB;IACA,CAvBD,EAuBG,IAvBH;IAyBA,OAAO,MAAM,CAAC,IAAP,CAAY,IAAZ,EAAkB,MAAlB,GAA2B,IAA3B,GAAkC,EAAzC;EACA;;AAjVmC;;;AAoVrC,gBAAgB,CAAC,UAAjB,GAA8B,kBAA9B;;ACpVA,MAAM,SAAN,SAAwB,MAAxB,CAA8B;EAE7B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,SAAL,GAAiB,KAAjB,CAHiB,CAGM;;IACvB,KAAK,cAAL,GAAsB,KAAtB,CAJiB,CAIW;;IAC5B,KAAK,UAAL,GAAkB,EAAlB,CALiB,CAKI;;IACrB,KAAK,YAAL,GAAoB,EAApB,CANiB,CAMM;;IACvB,KAAK,qBAAL,GAA6B,IAA7B,CAPiB,CAOiB;;IAElC,KAAK,mBAAL,CAAyB,YAAzB,EAAuC,WAAvC,EATiB,CASmC;;IACpD,KAAK,mBAAL,CAAyB,qBAAzB,EAAgD,MAAhD,EAViB,CAUuC;;IACxD,KAAK,mBAAL,CAAyB,4BAAzB,EAAuD,IAAvD,EAXiB,CAW4C;;IAC7D,KAAK,mBAAL,CAAyB,uBAAzB,EAAkD,IAAlD,EAZiB,CAYuC;;IACxD,KAAK,mBAAL,CAAyB,iBAAzB,EAA4C,UAAS,IAAT,EAAe,GAAf,EAAmB;MAAC,OAAO,IAAP;IAAa,CAA7E,EAbiB,CAa8D;;IAE/E,KAAK,qBAAL,CAA2B,WAA3B,EAAwC,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAAxC;IACA,KAAK,qBAAL,CAA2B,aAA3B,EAA0C,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAA1C;IACA,KAAK,qBAAL,CAA2B,iBAA3B,EAA8C,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAA9C;IACA,KAAK,qBAAL,CAA2B,iBAA3B,EAA8C,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAA9C;IACA,KAAK,qBAAL,CAA2B,iBAA3B,EAA8C,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAA9C,EAnBiB,CAqBnB;;IACE,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,QAAtC,EAAgD,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAAhD;IACA,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,UAAtC,EAAkD,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAlD;IACA,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,cAAtC,EAAsD,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAAtD;IACA,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,YAAtC,EAAoD,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAApD;EACA;;EAED,UAAU,GAAE;IACX,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAnB,KAAkC,KAArC,EAA2C;MAC1C,KAAK,SAAL,CAAe,UAAf,EAA2B,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAA3B;MACA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAA/B;MACA,KAAK,SAAL,CAAe,WAAf,EAA4B,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAA5B;MACA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAhC;;MAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAnB,IAAiC,CAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAxD,EAA8E;QAC7E,KAAK,SAAL,CAAe,iBAAf,EAAkC,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAlC;MACA;IACD;EACD;;EAED,WAAW,CAAC,IAAD,EAAO,SAAP,EAAiB;IAC3B,OAAO,IAAI,KAAK,UAAT,GAAsB,KAAK,YAA3B,GAA0C,SAAjD;EACA;;EAED,UAAU,CAAC,GAAD,EAAK;IACd,KAAK,YAAL,CAAkB,GAAlB,EAAuB,IAAvB;EACA;;EAED,kBAAkB,CAAC,MAAD,EAAQ;IACzB,KAAK,SAAL,GAAiB,KAAjB;IACA,KAAK,cAAL,GAAsB,KAAtB;IACA,KAAK,UAAL,GAAkB,EAAlB;IACA,KAAK,YAAL,GAAoB,EAApB;;IAEA,IAAG,MAAM,KAAK,IAAd,EAAmB;MAClB,KAAK,oBAAL;IACA;EACD;;EAED,aAAa,CAAC,GAAD,EAAK;IACjB,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,OAAO,GAAG,GAAG,CAAC,UAAJ,EADV,CADiB,CAInB;;IACE,IAAI,SAAS,GAAG,YAAU;MAEzB,UAAU,CAAC,YAAU;QACpB,IAAI,CAAC,SAAL,GAAiB,KAAjB;MACA,CAFS,EAEP,EAFO,CAAV;MAIA,QAAQ,CAAC,IAAT,CAAc,mBAAd,CAAkC,SAAlC,EAA6C,SAA7C;IACA,CAPD;;IASA,GAAG,CAAC,OAAJ,CAAY,MAAZ,GAAqB;MAAC,QAAQ,EAAC;IAAV,CAArB,CAdiB,CAgBnB;;IACE,IAAG,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,eAAnB,CAAmC,IAAnC,CAAwC,KAAK,KAA7C,EAAoD,GAAG,CAAC,YAAJ,EAApD,CAAH,EAA2E;MAC1E,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,sBAAtB;MACA,OAAO,CAAC,SAAR,CAAkB,MAAlB,CAAyB,wBAAzB;;MAEA,IAAG,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,UAAnB,IAAiC,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,UAAnB,IAAiC,WAArE,EAAiF;QAChF,IAAG,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,mBAAnB,KAA2C,OAA9C,EAAsD;UACrD,OAAO,CAAC,gBAAR,CAAyB,OAAzB,EAAkC,KAAK,qBAAL,CAA2B,IAA3B,CAAgC,IAAhC,EAAsC,GAAtC,CAAlC;QACA,CAFD,MAEK;UACJ,OAAO,CAAC,gBAAR,CAAyB,OAAzB,EAAkC,UAAS,CAAT,EAAW;YAC5C,IAAG,CAAC,IAAI,CAAC,KAAL,CAAW,SAAX,CAAqB,MAArB,CAAD,IAAiC,CAAC,IAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,cAAxB,EAArC,EAA8E;cAC7E,IAAI,CAAC,KAAL,CAAW,eAAX;YACA;;YAED,IAAG,CAAC,IAAI,CAAC,SAAT,EAAmB;cAClB,IAAI,CAAC,SAAL,CAAe,GAAf;YACA;UACD,CARD;UAUA,OAAO,CAAC,gBAAR,CAAyB,WAAzB,EAAsC,UAAS,CAAT,EAAW;YAChD,IAAG,CAAC,CAAC,QAAL,EAAc;cACb,IAAI,CAAC,KAAL,CAAW,eAAX;;cAEA,IAAI,CAAC,SAAL,GAAiB,IAAjB;cAEA,IAAI,CAAC,UAAL,GAAkB,EAAlB;cAEA,QAAQ,CAAC,IAAT,CAAc,gBAAd,CAA+B,SAA/B,EAA0C,SAA1C;cACA,QAAQ,CAAC,IAAT,CAAc,gBAAd,CAA+B,OAA/B,EAAwC,SAAxC;cAEA,IAAI,CAAC,SAAL,CAAe,GAAf;cAEA,OAAO,KAAP;YACA;UACD,CAfD;UAiBA,OAAO,CAAC,gBAAR,CAAyB,YAAzB,EAAuC,UAAS,CAAT,EAAW;YACjD,IAAG,IAAI,CAAC,SAAR,EAAkB;cACjB,IAAI,CAAC,KAAL,CAAW,eAAX;;cACA,IAAI,CAAC,SAAL,CAAe,GAAf;;cAEA,IAAG,IAAI,CAAC,UAAL,CAAgB,CAAhB,KAAsB,GAAzB,EAA6B;gBAC5B,IAAI,CAAC,SAAL,CAAe,IAAI,CAAC,UAAL,CAAgB,CAAhB,CAAf;cACA;YACD;UACD,CATD;UAWA,OAAO,CAAC,gBAAR,CAAyB,UAAzB,EAAqC,UAAS,CAAT,EAAW;YAC/C,IAAG,IAAI,CAAC,SAAR,EAAkB;cACjB,IAAI,CAAC,KAAL,CAAW,eAAX;;cACA,IAAI,CAAC,UAAL,CAAgB,OAAhB,CAAwB,GAAxB;YACA;UACD,CALD;QAMA;MACD;IAED,CAvDD,MAuDK;MACJ,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,wBAAtB;MACA,OAAO,CAAC,SAAR,CAAkB,MAAlB,CAAyB,sBAAzB;IACA;EACD;;EAED,qBAAqB,CAAC,GAAD,EAAM,CAAN,EAAQ;IAC5B,IAAG,CAAC,CAAC,QAAL,EAAc;MACb,KAAK,KAAL,CAAW,eAAX;;MACA,KAAK,cAAL,GAAsB,KAAK,cAAL,IAAuB,GAA7C;MAEA,IAAI,iBAAiB,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,kBAAtB,CAAyC,KAAK,cAA9C,CAAxB;MACA,IAAI,MAAM,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,kBAAtB,CAAyC,GAAzC,CAAb;MAEA,IAAI,UAAU,GAAG,iBAAiB,IAAI,MAArB,GAA8B,iBAA9B,GAAkD,MAAnE;MACA,IAAI,QAAQ,GAAG,iBAAiB,IAAI,MAArB,GAA8B,iBAA9B,GAAkD,MAAjE;MAEA,IAAI,IAAI,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,GAAuC,KAAvC,CAA6C,CAA7C,CAAX;MACA,IAAI,WAAW,GAAG,IAAI,CAAC,MAAL,CAAY,UAAZ,EAAwB,QAAQ,GAAG,UAAX,GAAwB,CAAhD,CAAlB;;MAEA,IAAG,CAAC,CAAC,OAAF,IAAa,CAAC,CAAC,OAAlB,EAA0B;QACzB,WAAW,CAAC,OAAZ,CAAqB,UAAD,IAAc;UACjC,IAAG,UAAU,KAAK,KAAK,cAAvB,EAAsC;YAErC,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAnB,KAAkC,IAAlC,IAA0C,CAAC,KAAK,aAAL,CAAmB,GAAnB,CAA9C,EAAsE;cACrE,IAAG,KAAK,YAAL,CAAkB,MAAlB,GAA2B,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAjD,EAA4D;gBAC3D,KAAK,SAAL,CAAe,UAAf;cACA;YACD,CAJD,MAIK;cACJ,KAAK,SAAL,CAAe,UAAf;YACA;UACD;QACD,CAXD;QAYA,KAAK,cAAL,GAAsB,GAAtB;MACA,CAdD,MAcK;QACJ,KAAK,YAAL,CAAkB,SAAlB,EAA6B,IAA7B;;QAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAnB,KAAkC,IAArC,EAA0C;UACzC,IAAG,WAAW,CAAC,MAAZ,GAAqB,KAAK,KAAL,CAAW,OAAX,CAAmB,UAA3C,EAAsD;YACrD,WAAW,GAAG,WAAW,CAAC,KAAZ,CAAkB,CAAlB,EAAqB,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAxC,CAAd;UACA;QACD;;QAED,KAAK,UAAL,CAAgB,WAAhB;MACA;;MACD,KAAK,KAAL,CAAW,eAAX;IACA,CAvCD,MAwCK,IAAG,CAAC,CAAC,OAAF,IAAa,CAAC,CAAC,OAAlB,EAA0B;MAC9B,KAAK,SAAL,CAAe,GAAf;MACA,KAAK,cAAL,GAAsB,GAAtB;IACA,CAHI,MAGA;MACJ,KAAK,YAAL,CAAkB,SAAlB,EAA6B,IAA7B;MACA,KAAK,UAAL,CAAgB,GAAhB;MACA,KAAK,cAAL,GAAsB,GAAtB;IACA;EACD,CA7L4B,CA+L9B;;;EACC,SAAS,CAAC,GAAD,EAAK;IACb,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,eAAnB,CAAmC,IAAnC,CAAwC,KAAK,KAA7C,EAAoD,GAAG,CAAC,YAAJ,EAApD,CAAH,EAA2E;MAC1E,IAAG,GAAG,CAAC,OAAJ,CAAY,MAAZ,IAAsB,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAmB,QAA5C,EAAqD;QACpD,KAAK,YAAL,CAAkB,GAAlB;MACA,CAFD,MAEK;QACJ,KAAK,UAAL,CAAgB,GAAhB;MACA;IACD;EACD,CAxM4B,CA0M9B;;;EACC,UAAU,CAAC,IAAD,EAAM;IACf,IAAI,QAAJ;;IAEA,QAAO,OAAO,IAAd;MACC,KAAK,WAAL;QACC,KAAK,KAAL,CAAW,UAAX,CAAsB,IAAtB,CAA2B,OAA3B,CAAoC,GAAD,IAAS;UAC3C,KAAK,UAAL,CAAgB,GAAhB,EAAqB,IAArB,EAA2B,IAA3B;QACA,CAFD;;QAIA,KAAK,oBAAL;;QACA;;MAED,KAAK,QAAL;QAEC,QAAQ,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,IAA9B,CAAX;;QAEA,IAAG,QAAH,EAAY;UACX,KAAK,UAAL,CAAgB,QAAhB,EAA0B,IAA1B,EAAgC,IAAhC;QACA,CAFD,MAEK;UACJ,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,IAA9B,EAAoC,OAApC,CAA6C,GAAD,IAAS;YACpD,KAAK,UAAL,CAAgB,GAAhB,EAAqB,IAArB,EAA2B,IAA3B;UACA,CAFD;QAGA;;QAED,KAAK,oBAAL;;QACA;;MAED;QACC,IAAG,KAAK,CAAC,OAAN,CAAc,IAAd,CAAH,EAAuB;UACtB,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;YACrB,KAAK,UAAL,CAAgB,GAAhB,EAAqB,IAArB,EAA2B,IAA3B;UACA,CAFD;;UAIA,KAAK,oBAAL;QACA,CAND,MAMK;UACJ,KAAK,UAAL,CAAgB,IAAhB,EAAsB,KAAtB,EAA6B,IAA7B;QACA;;QACD;IAlCF;EAoCA,CAlP4B,CAoP9B;;;EACC,UAAU,CAAC,OAAD,EAAU,MAAV,EAAkB,KAAlB,EAAwB;IACnC;IACE,IAAG,CAAC,KAAK,CAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,UAApB,CAAN,IAAyC,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAnB,KAAkC,IAA3E,IAAmF,CAAC,KAAvF,EAA6F;MAC5F,IAAG,KAAK,YAAL,CAAkB,MAAlB,IAA4B,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAlD,EAA6D;QAC5D,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,0BAAtB,EAAiD;UAChD,KAAK,YAAL,CAAkB,KAAK,YAAL,CAAkB,CAAlB,CAAlB;QACA,CAFD,MAEK;UACJ,OAAO,KAAP;QACA;MACD;IACD;;IAED,IAAI,GAAG,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,OAA9B,CAAV;;IAEA,IAAG,GAAH,EAAO;MACN,IAAG,KAAK,YAAL,CAAkB,OAAlB,CAA0B,GAA1B,KAAkC,CAAC,CAAtC,EAAwC;QACvC,GAAG,CAAC,UAAJ,GAAiB,SAAjB,CAA2B,GAA3B,CAA+B,oBAA/B;;QACA,IAAG,CAAC,GAAG,CAAC,OAAJ,CAAY,MAAhB,EAAuB;UACtB,GAAG,CAAC,OAAJ,CAAY,MAAZ,GAAqB,EAArB;QACA;;QAED,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAmB,QAAnB,GAA8B,IAA9B;;QACA,IAAG,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAmB,UAAtB,EAAiC;UAChC,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAmB,UAAnB,CAA8B,OAA9B,GAAwC,IAAxC;QACA;;QAED,KAAK,YAAL,CAAkB,IAAlB,CAAuB,GAAvB;;QAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,uBAAtB,EAA8C;UAC7C,KAAK,iBAAL,CAAuB,GAAvB,EAA4B,IAA5B;QACA;;QAED,KAAK,gBAAL,CAAsB,aAAtB,EAAqC,GAAG,CAAC,YAAJ,EAArC;;QAEA,KAAK,oBAAL,CAA0B,MAA1B;MACA;IACD,CAtBD,MAsBK;MACJ,IAAG,CAAC,MAAJ,EAAW;QACV,OAAO,CAAC,IAAR,CAAa,6DAA6D,OAA1E;MACA;IACD;EACD;;EAED,aAAa,CAAC,GAAD,EAAK;IACjB,OAAO,KAAK,YAAL,CAAkB,OAAlB,CAA0B,GAA1B,MAAmC,CAAC,CAA3C;EACA,CAlS4B,CAoS9B;;;EACC,YAAY,CAAC,IAAD,EAAO,MAAP,EAAc;IACzB,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,QADA;;IAGA,IAAG,OAAO,IAAP,IAAe,WAAlB,EAA8B;MAE7B,QAAQ,GAAG,IAAI,CAAC,YAAL,CAAkB,MAA7B;;MAEA,KAAI,IAAI,CAAC,GAAG,CAAZ,EAAe,CAAC,GAAG,QAAnB,EAA6B,CAAC,EAA9B,EAAiC;QAChC,IAAI,CAAC,YAAL,CAAkB,IAAI,CAAC,YAAL,CAAkB,CAAlB,CAAlB,EAAwC,IAAxC;MACA;;MAED,IAAG,QAAH,EAAY;QACX,IAAI,CAAC,oBAAL,CAA0B,MAA1B;MACA;IAED,CAZD,MAYK;MACJ,IAAG,KAAK,CAAC,OAAN,CAAc,IAAd,CAAH,EAAuB;QACtB,IAAI,CAAC,OAAL,CAAa,UAAS,GAAT,EAAa;UACzB,IAAI,CAAC,YAAL,CAAkB,GAAlB,EAAuB,IAAvB;QACA,CAFD;;QAIA,IAAI,CAAC,oBAAL,CAA0B,MAA1B;MACA,CAND,MAMK;QACJ,IAAI,CAAC,YAAL,CAAkB,IAAlB,EAAwB,MAAxB;MACA;IACD;EACD,CAhU4B,CAkU9B;;;EACC,YAAY,CAAC,OAAD,EAAU,MAAV,EAAiB;IAC5B,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,GAAG,GAAG,IAAI,CAAC,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,OAA9B,CADN;IAAA,IAEA,KAFA;;IAIA,IAAG,GAAH,EAAO;MACN,KAAK,GAAG,IAAI,CAAC,YAAL,CAAkB,SAAlB,CAA4B,UAAS,WAAT,EAAqB;QACxD,OAAO,WAAW,IAAI,GAAtB;MACA,CAFO,CAAR;;MAIA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;QAEb,GAAG,CAAC,UAAJ,GAAiB,SAAjB,CAA2B,MAA3B,CAAkC,oBAAlC;;QACA,IAAG,CAAC,GAAG,CAAC,OAAJ,CAAY,MAAhB,EAAuB;UACtB,GAAG,CAAC,OAAJ,CAAY,MAAZ,GAAqB,EAArB;QACA;;QAED,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAmB,QAAnB,GAA8B,KAA9B;;QACA,IAAG,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAmB,UAAtB,EAAiC;UAChC,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAmB,UAAnB,CAA8B,OAA9B,GAAwC,KAAxC;QACA;;QACD,IAAI,CAAC,YAAL,CAAkB,MAAlB,CAAyB,KAAzB,EAAgC,CAAhC;;QAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,uBAAtB,EAA8C;UAC7C,KAAK,iBAAL,CAAuB,GAAvB,EAA4B,KAA5B;QACA;;QAED,KAAK,gBAAL,CAAsB,eAAtB,EAAuC,GAAG,CAAC,YAAJ,EAAvC;;QAEA,IAAI,CAAC,oBAAL,CAA0B,MAA1B;MACA;IACD,CA1BD,MA0BK;MACJ,IAAG,CAAC,MAAJ,EAAW;QACV,OAAO,CAAC,IAAR,CAAa,+DAA+D,OAA5E;MACA;IACD;EACD;;EAED,eAAe,GAAE;IAChB,IAAI,IAAI,GAAG,EAAX;IAEA,KAAK,YAAL,CAAkB,OAAlB,CAA0B,UAAS,GAAT,EAAa;MACtC,IAAI,CAAC,IAAL,CAAU,GAAG,CAAC,OAAJ,EAAV;IACA,CAFD;IAIA,OAAO,IAAP;EACA;;EAED,eAAe,GAAE;IAEhB,IAAI,IAAI,GAAG,EAAX;IAEA,KAAK,YAAL,CAAkB,OAAlB,CAA0B,UAAS,GAAT,EAAa;MACtC,IAAI,CAAC,IAAL,CAAU,GAAG,CAAC,YAAJ,EAAV;IACA,CAFD;IAIA,OAAO,IAAP;EACA;;EAED,oBAAoB,CAAC,MAAD,EAAQ;IAC3B,IAAG,KAAK,qBAAR,EAA8B;MAC7B,IAAG,KAAK,YAAL,CAAkB,MAAlB,KAA6B,CAAhC,EAAkC;QACjC,KAAK,qBAAL,CAA2B,OAA3B,GAAqC,KAArC;QACA,KAAK,qBAAL,CAA2B,aAA3B,GAA2C,KAA3C;MACA,CAHD,MAGO,IAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,IAAtB,CAA2B,MAA3B,KAAsC,KAAK,YAAL,CAAkB,MAA3D,EAAkE;QACxE,KAAK,qBAAL,CAA2B,OAA3B,GAAqC,IAArC;QACA,KAAK,qBAAL,CAA2B,aAA3B,GAA2C,KAA3C;MACA,CAHM,MAGA;QACN,KAAK,qBAAL,CAA2B,aAA3B,GAA2C,IAA3C;QACA,KAAK,qBAAL,CAA2B,OAA3B,GAAqC,KAArC;MACA;IACD;;IAED,IAAG,CAAC,MAAJ,EAAW;MACV,KAAK,gBAAL,CAAsB,qBAAtB,EAA6C,KAAK,eAAL,EAA7C,EAAqE,KAAK,eAAL,EAArE;IACA;EACD;;EAED,yBAAyB,CAAE,GAAF,EAAO,OAAP,EAAgB;IACxC,IAAG,CAAC,GAAG,CAAC,IAAJ,CAAS,OAAT,CAAiB,MAArB,EAA4B;MAC3B,GAAG,CAAC,IAAJ,CAAS,OAAT,CAAiB,MAAjB,GAA0B,EAA1B;IACA;;IAED,GAAG,CAAC,IAAJ,CAAS,OAAT,CAAiB,MAAjB,CAAwB,UAAxB,GAAqC,OAArC;EACA;;EAED,4BAA4B,CAAE,OAAF,EAAW;IACtC,KAAK,qBAAL,GAA6B,OAA7B;EACA;;EAED,iBAAiB,CAAC,GAAD,EAAM,MAAN,EAAa;IAC7B,IAAI,QAAQ,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,CAA4B,WAA5B,CAAwC,GAAxC,EAA6C,IAA7C,CAAf;;IAEA,IAAG,MAAH,EAAU;MACT,KAAI,IAAI,KAAR,IAAiB,QAAjB,EAA0B;QACzB,KAAK,UAAL,CAAgB,KAAhB,EAAuB,IAAvB;MACA;IACD,CAJD,MAIK;MACJ,KAAI,IAAI,KAAR,IAAiB,QAAjB,EAA0B;QACzB,KAAK,YAAL,CAAkB,KAAlB,EAAyB,IAAzB;MACA;IACD;EACD;;AAza4B;;;AA4a9B,SAAS,CAAC,UAAV,GAAuB,WAAvB,EC9aA;;AACe,SAAA,QAAA,CAAS,CAAT,EAAY,CAAZ,EAAe,IAAf,EAAqB,IAArB,EAA2B,MAA3B,EAAmC,GAAnC,EAAwC,MAAxC,EAA+C;EAC7D,IAAI,gBAAgB,GAAG,MAAM,CAAC,gBAA9B;EACA,IAAI,OAAO,GAAG,MAAM,CAAC,gBAArB;EACA,IAAI,QAAQ,GAAG,MAAM,CAAC,iBAAtB;EACA,IAAI,UAAU,GAAG,CAAjB;EAEA,CAAC,GAAG,MAAM,CAAC,CAAD,CAAV;EACA,CAAC,GAAG,MAAM,CAAC,CAAD,CAAV;;EAEA,IAAG,QAAH,EAAY;IACX,CAAC,GAAG,CAAC,CAAC,KAAF,CAAQ,QAAR,EAAkB,IAAlB,CAAuB,EAAvB,CAAJ;IACA,CAAC,GAAG,CAAC,CAAC,KAAF,CAAQ,QAAR,EAAkB,IAAlB,CAAuB,EAAvB,CAAJ;EACA;;EAED,IAAG,OAAH,EAAW;IACV,CAAC,GAAG,CAAC,CAAC,KAAF,CAAQ,OAAR,EAAiB,IAAjB,CAAsB,GAAtB,CAAJ;IACA,CAAC,GAAG,CAAC,CAAC,KAAF,CAAQ,OAAR,EAAiB,IAAjB,CAAsB,GAAtB,CAAJ;EACA;;EAED,CAAC,GAAG,UAAU,CAAC,CAAD,CAAd;EACA,CAAC,GAAG,UAAU,CAAC,CAAD,CAAd,CApB6D,CAsB9D;;EACC,IAAG,KAAK,CAAC,CAAD,CAAR,EAAY;IACX,UAAU,GAAI,KAAK,CAAC,CAAD,CAAL,GAAW,CAAX,GAAe,CAAC,CAA9B;EACA,CAFD,MAEM,IAAG,KAAK,CAAC,CAAD,CAAR,EAAY;IACjB,UAAU,GAAI,CAAd;EACA,CAFK,MAED;IACN;IACE,OAAO,CAAC,GAAG,CAAX;EACA,CA9B4D,CAgC9D;;;EACC,IAAI,gBAAgB,KAAK,KAArB,IAA8B,GAAG,KAAK,MAAvC,IAAmD,gBAAgB,KAAK,QAArB,IAAiC,GAAG,KAAK,KAA/F,EAAsG;IACrG,UAAU,IAAI,CAAC,CAAf;EACA;;EAED,OAAO,UAAP;AACD,ECvCA;;;AACe,SAAA,MAAA,CAAS,CAAT,EAAY,CAAZ,EAAe,IAAf,EAAqB,IAArB,EAA2B,MAA3B,EAAmC,GAAnC,EAAwC,MAAxC,EAA+C;EAC7D,IAAI,gBAAgB,GAAG,MAAM,CAAC,gBAA9B;EACA,IAAI,UAAU,GAAG,CAAjB;EACA,IAAI,MAAJ,CAH6D,CAK9D;;EACC,IAAG,CAAC,CAAJ,EAAM;IACL,UAAU,GAAI,CAAC,CAAD,GAAK,CAAL,GAAS,CAAC,CAAxB;EACA,CAFD,MAEM,IAAG,CAAC,CAAJ,EAAM;IACX,UAAU,GAAI,CAAd;EACA,CAFK,MAED;IACN;IACE,QAAO,OAAO,MAAM,CAAC,MAArB;MACC,KAAK,SAAL;QACC,IAAG,MAAM,CAAC,MAAV,EAAiB;UAChB,MAAM,GAAG,KAAK,UAAL,EAAT;QACA;;QACD;;MACD,KAAK,QAAL;QACC,MAAM,GAAG,MAAM,CAAC,MAAhB;QACA;IARF;;IAWA,OAAO,MAAM,CAAC,CAAD,CAAN,CAAU,WAAV,GAAwB,aAAxB,CAAsC,MAAM,CAAC,CAAD,CAAN,CAAU,WAAV,EAAtC,EAA+D,MAA/D,CAAP;EACA,CAxB4D,CA0B9D;;;EACC,IAAI,gBAAgB,KAAK,KAArB,IAA8B,GAAG,KAAK,MAAvC,IAAmD,gBAAgB,KAAK,QAArB,IAAiC,GAAG,KAAK,KAA/F,EAAsG;IACrG,UAAU,IAAI,CAAC,CAAf;EACA;;EAED,OAAO,UAAP;AACD,ECjCA;;;AACe,SAAA,UAAA,CAAS,CAAT,EAAY,CAAZ,EAAe,IAAf,EAAqB,IAArB,EAA2B,MAA3B,EAAmC,GAAnC,EAAwC,MAAxC,EAA+C;EAC7D,IAAI,EAAE,GAAG,MAAM,CAAC,QAAP,IAAmB,KAAK,CAAC,QAAlC;EACA,IAAI,MAAM,GAAG,MAAM,CAAC,MAAP,IAAiB,qBAA9B;EAAA,IACA,gBAAgB,GAAG,MAAM,CAAC,gBAD1B;EAAA,IAEA,UAAU,GAAG,CAFb;;EAIA,IAAG,OAAO,EAAP,IAAa,WAAhB,EAA4B;IAC3B,IAAG,CAAC,EAAE,CAAC,UAAH,CAAc,CAAd,CAAJ,EAAqB;MACpB,IAAG,MAAM,KAAK,KAAd,EAAoB;QACnB,CAAC,GAAG,EAAE,CAAC,OAAH,CAAW,MAAM,CAAC,CAAD,CAAjB,CAAJ;MACA,CAFD,MAEK;QACJ,CAAC,GAAG,EAAE,CAAC,UAAH,CAAc,MAAM,CAAC,CAAD,CAApB,EAAyB,MAAzB,CAAJ;MACA;IACD;;IAED,IAAG,CAAC,EAAE,CAAC,UAAH,CAAc,CAAd,CAAJ,EAAqB;MACpB,IAAG,MAAM,KAAK,KAAd,EAAoB;QACnB,CAAC,GAAG,EAAE,CAAC,OAAH,CAAW,MAAM,CAAC,CAAD,CAAjB,CAAJ;MACA,CAFD,MAEK;QACJ,CAAC,GAAG,EAAE,CAAC,UAAH,CAAc,MAAM,CAAC,CAAD,CAApB,EAAyB,MAAzB,CAAJ;MACA;IACD;;IAED,IAAG,CAAC,CAAC,CAAC,OAAN,EAAc;MACb,UAAU,GAAG,CAAC,CAAC,CAAC,OAAH,GAAa,CAAb,GAAiB,CAAC,CAA/B;IACA,CAFD,MAEM,IAAG,CAAC,CAAC,CAAC,OAAN,EAAc;MACnB,UAAU,GAAI,CAAd;IACA,CAFK,MAED;MACP;MACG,OAAO,CAAC,GAAG,CAAX;IACA,CAxB0B,CA0B7B;;;IACE,IAAI,gBAAgB,KAAK,KAArB,IAA8B,GAAG,KAAK,MAAvC,IAAmD,gBAAgB,KAAK,QAArB,IAAiC,GAAG,KAAK,KAA/F,EAAsG;MACrG,UAAU,IAAI,CAAC,CAAf;IACA;;IAED,OAAO,UAAP;EAEA,CAjCD,MAiCK;IACJ,OAAO,CAAC,KAAR,CAAc,yDAAd;EACA;AACF,ECzCA;;;AACe,SAAA,MAAA,CAAS,CAAT,EAAY,CAAZ,EAAe,IAAf,EAAqB,IAArB,EAA2B,MAA3B,EAAmC,GAAnC,EAAwC,MAAxC,EAA+C;EAC7D,IAAG,CAAC,MAAM,CAAC,MAAX,EAAkB;IACjB,MAAM,CAAC,MAAP,GAAgB,YAAhB;EACA;;EAED,OAAOL,UAAQ,CAAC,IAATA,CAAc,IAAdA,EAAoB,CAApBA,EAAuB,CAAvBA,EAA0B,IAA1BA,EAAgC,IAAhCA,EAAsC,MAAtCA,EAA8C,GAA9CA,EAAmD,MAAnDA,CAAP;AACD,ECPA;;;AACe,SAAA,MAAA,CAAS,CAAT,EAAY,CAAZ,EAAe,IAAf,EAAqB,IAArB,EAA2B,MAA3B,EAAmC,GAAnC,EAAwC,MAAxC,EAA+C;EAC7D,IAAG,CAAC,MAAM,CAAC,MAAX,EAAkB;IACjB,MAAM,CAAC,MAAP,GAAgB,OAAhB;EACA;;EAED,OAAOA,UAAQ,CAAC,IAATA,CAAc,IAAdA,EAAoB,CAApBA,EAAuB,CAAvBA,EAA0B,IAA1BA,EAAgC,IAAhCA,EAAsC,MAAtCA,EAA8C,GAA9CA,EAAmD,MAAnDA,CAAP;AACD,ECTA;;;AACe,SAAA,OAAA,CAAS,CAAT,EAAY,CAAZ,EAAe,IAAf,EAAqB,IAArB,EAA2B,MAA3B,EAAmC,GAAnC,EAAwC,MAAxC,EAA+C;EAC7D,IAAI,GAAG,GAAG,CAAC,KAAK,IAAN,IAAc,CAAC,KAAK,MAApB,IAA8B,CAAC,KAAK,MAApC,IAA8C,CAAC,KAAK,CAApD,GAAwD,CAAxD,GAA4D,CAAtE;EACA,IAAI,GAAG,GAAG,CAAC,KAAK,IAAN,IAAc,CAAC,KAAK,MAApB,IAA8B,CAAC,KAAK,MAApC,IAA8C,CAAC,KAAK,CAApD,GAAwD,CAAxD,GAA4D,CAAtE;EAEA,OAAO,GAAG,GAAG,GAAb;AACD,ECNA;;;AACe,SAAA,KAAA,CAAS,CAAT,EAAY,CAAZ,EAAe,IAAf,EAAqB,IAArB,EAA2B,MAA3B,EAAmC,GAAnC,EAAwC,MAAxC,EAA+C;EAC7D,IAAI,IAAI,GAAG,MAAM,CAAC,IAAP,IAAe,QAA1B;EAAA,IACA,gBAAgB,GAAG,MAAM,CAAC,gBAD1B;EAAA,IAEA,UAAU,GAAG,CAFb;;EAIA,SAAS,IAAT,CAAc,KAAd,EAAoB;IACnB,IAAI,MAAJ;;IAEA,QAAO,IAAP;MACC,KAAK,QAAL;QACC,MAAM,GAAG,KAAK,CAAC,MAAf;QACA;;MAED,KAAK,KAAL;QACC,MAAM,GAAG,KAAK,CAAC,MAAN,CAAa,UAAS,CAAT,EAAY,CAAZ,EAAc;UACnC,OAAO,CAAC,GAAG,CAAX;QACA,CAFQ,CAAT;QAGA;;MAED,KAAK,KAAL;QACC,MAAM,GAAG,IAAI,CAAC,GAAL,CAAS,KAAT,CAAe,IAAf,EAAqB,KAArB,CAAT;QACA;;MAED,KAAK,KAAL;QACC,MAAM,GAAG,IAAI,CAAC,GAAL,CAAS,KAAT,CAAe,IAAf,EAAqB,KAArB,CAAT;QACA;;MAED,KAAK,KAAL;QACC,MAAM,GAAG,KAAK,CAAC,MAAN,CAAa,UAAS,CAAT,EAAY,CAAZ,EAAc;UACnC,OAAO,CAAC,GAAG,CAAX;QACA,CAFQ,IAEJ,KAAK,CAAC,MAFX;QAGA;IAvBF;;IA0BA,OAAO,MAAP;EACA,CAnC4D,CAqC9D;;;EACC,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,CAAd,CAAJ,EAAqB;IACpB,UAAU,GAAG,CAAC,KAAK,CAAC,OAAN,CAAc,CAAd,CAAD,GAAoB,CAApB,GAAwB,CAAC,CAAtC;EACA,CAFD,MAEM,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,CAAd,CAAJ,EAAqB;IAC1B,UAAU,GAAG,CAAb;EACA,CAFK,MAED;IACJ,OAAO,IAAI,CAAC,CAAD,CAAJ,GAAU,IAAI,CAAC,CAAD,CAArB;EACA,CA5C4D,CA8C9D;;;EACC,IAAI,gBAAgB,KAAK,KAArB,IAA8B,GAAG,KAAK,MAAvC,IAAmD,gBAAgB,KAAK,QAArB,IAAiC,GAAG,KAAK,KAA/F,EAAsG;IACrG,UAAU,IAAI,CAAC,CAAf;EACA;;EAED,OAAO,UAAP;AACD,ECrDA;;;AACe,SAAA,MAAA,CAAS,CAAT,EAAY,CAAZ,EAAe,IAAf,EAAqB,IAArB,EAA2B,MAA3B,EAAmC,GAAnC,EAAwC,MAAxC,EAA+C;EAC7D,IAAI,GAAG,GAAG,OAAO,CAAP,IAAY,WAAZ,GAA0B,CAA1B,GAA8B,CAAxC;EACA,IAAI,GAAG,GAAG,OAAO,CAAP,IAAY,WAAZ,GAA0B,CAA1B,GAA8B,CAAxC;EAEA,OAAO,GAAG,GAAG,GAAb;AACD,ECNA;;;AACe,SAAA,QAAA,CAAS,EAAT,EAAa,EAAb,EAAiB,IAAjB,EAAuB,IAAvB,EAA6B,MAA7B,EAAqC,GAArC,EAA0C,MAA1C,EAAiD;EAC/D,IAAI,CAAJ;EAAA,IAAO,CAAP;EAAA,IAAU,EAAV;EAAA,IAAc,EAAd;EAAA,IAAkB,CAAC,GAAE,CAArB;EAAA,IAAwB,CAAxB;EAAA,IAA2B,EAAE,GAAG,cAAhC;EAAA,IAAgD,EAAE,GAAG,IAArD;EACA,IAAI,gBAAgB,GAAG,MAAM,CAAC,gBAA9B;EACA,IAAI,UAAU,GAAG,CAAjB,CAH+D,CAKhE;;EACC,IAAG,CAAC,EAAD,IAAO,EAAE,KAAI,CAAhB,EAAkB;IACjB,UAAU,GAAI,CAAC,EAAD,IAAO,EAAE,KAAI,CAAb,GAAiB,CAAjB,GAAqB,CAAC,CAApC;EACA,CAFD,MAEM,IAAG,CAAC,EAAD,IAAO,EAAE,KAAI,CAAhB,EAAkB;IACvB,UAAU,GAAI,CAAd;EACA,CAFK,MAED;IAEJ,IAAG,QAAQ,CAAC,EAAD,CAAR,IAAgB,QAAQ,CAAC,EAAD,CAA3B,EAAiC,OAAO,EAAE,GAAG,EAAZ;IACjC,CAAC,GAAG,MAAM,CAAC,EAAD,CAAN,CAAW,WAAX,EAAJ;IACA,CAAC,GAAG,MAAM,CAAC,EAAD,CAAN,CAAW,WAAX,EAAJ;IACA,IAAG,CAAC,KAAK,CAAT,EAAY,OAAO,CAAP;IACZ,IAAG,EAAE,EAAE,CAAC,IAAH,CAAQ,CAAR,KAAc,EAAE,CAAC,IAAH,CAAQ,CAAR,CAAhB,CAAH,EAAgC,OAAO,CAAC,GAAG,CAAJ,GAAQ,CAAR,GAAY,CAAC,CAApB;IAChC,CAAC,GAAG,CAAC,CAAC,KAAF,CAAQ,EAAR,CAAJ;IACA,CAAC,GAAG,CAAC,CAAC,KAAF,CAAQ,EAAR,CAAJ;IACA,CAAC,GAAG,CAAC,CAAC,MAAF,GAAW,CAAC,CAAC,MAAb,GAAsB,CAAC,CAAC,MAAxB,GAAiC,CAAC,CAAC,MAAvC;;IACA,OAAM,CAAC,GAAG,CAAV,EAAY;MACX,EAAE,GAAE,CAAC,CAAC,CAAD,CAAL;MACA,EAAE,GAAE,CAAC,CAAC,CAAC,EAAF,CAAL;;MACA,IAAG,EAAE,KAAK,EAAV,EAAa;QACZ,IAAG,QAAQ,CAAC,EAAD,CAAR,IAAgB,QAAQ,CAAC,EAAD,CAA3B,EAAgC;UAC/B,IAAG,EAAE,CAAC,MAAH,CAAU,CAAV,MAAiB,GAApB,EAAyB,EAAE,GAAG,MAAM,EAAX;UACzB,IAAG,EAAE,CAAC,MAAH,CAAU,CAAV,MAAiB,GAApB,EAAyB,EAAE,GAAG,MAAM,EAAX;UACzB,OAAO,EAAE,GAAG,EAAZ;QACA,CAJD,MAKK,OAAO,EAAE,GAAG,EAAL,GAAU,CAAV,GAAc,CAAC,CAAtB;MACL;IACD;;IAED,OAAO,CAAC,CAAC,MAAF,GAAW,CAAC,CAAC,MAApB;EACA,CAlC8D,CAoChE;;;EACC,IAAI,gBAAgB,KAAK,KAArB,IAA8B,GAAG,KAAK,MAAvC,IAAmD,gBAAgB,KAAK,QAArB,IAAiC,GAAG,KAAK,KAA/F,EAAsG;IACrG,UAAU,IAAI,CAAC,CAAf;EACA;;EAED,OAAO,UAAP;AACD;;ACjCA,IAAA,cAAA,GAAe;EACd,MAAM,EAACM,QADO;EAEd,MAAM,EAAC,MAFO;EAGd,IAAI,EAACC,MAHS;EAId,IAAI,EAACC,MAJS;EAKd,QAAQ,EAACR,UALK;EAMd,OAAO,EAAC,OANM;EAOd,KAAK,EAAC,KAPQ;EAQd,MAAM,EAAC,MARO;EASd,QAAQ,EAAC;AATK,CAAf;;ACNA,MAAM,IAAN,SAAmB,MAAnB,CAAyB;EAExB,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,QAAL,GAAgB,EAAhB,CAHiB,CAGE;;IACnB,KAAK,OAAL,GAAe,KAAf,CAJiB,CAII;;IAErB,KAAK,mBAAL,CAAyB,UAAzB,EAAqC,OAArC,EANiB,CAM6B;;IAE9C,KAAK,mBAAL,CAAyB,aAAzB,EAAwC,KAAxC,EARiB,CAQ8B;;IAC/C,KAAK,mBAAL,CAAyB,uBAAzB,EAAkD,IAAlD,EATiB,CASuC;;IACxD,KAAK,mBAAL,CAAyB,kBAAzB,EAA6C,KAA7C,EAViB,CAUmC;;IACpD,KAAK,mBAAL,CAAyB,mBAAzB,EAA8C,qCAA9C,EAXiB,CAWoE;;IAErF,KAAK,oBAAL,CAA0B,QAA1B;IACA,KAAK,oBAAL,CAA0B,cAA1B;IAEA,KAAK,oBAAL,CAA0B,YAA1B,EAAwC,IAAxC;IACA,KAAK,oBAAL,CAA0B,uBAA1B;IACA,KAAK,oBAAL,CAA0B,oBAA1B;EAEA;;EAED,UAAU,GAAE;IACX,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAAhC;IACA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAA9B;IACA,KAAK,mBAAL,CAAyB,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,CAAzB,EAA+C,EAA/C;IAEA,KAAK,qBAAL,CAA2B,SAA3B,EAAsC,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAtC;IACA,KAAK,qBAAL,CAA2B,YAA3B,EAAyC,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAzC;IACA,KAAK,qBAAL,CAA2B,WAA3B,EAAwC,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAAxC;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,KAAgC,QAAnC,EAA4C;MAC3C,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA9B;IACA;EACD;;EAED,UAAU,GAAE;IACX,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAtB,EAAkC;MACjC,KAAK,OAAL,CAAa,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAhC;IACA;EACD;;EAED,gBAAgB,CAAC,IAAD,EAAO,MAAP,EAAe,MAAf,EAAuB,MAAvB,EAA8B;IAC7C,IAAI,OAAO,GAAG,KAAK,OAAL,EAAd;IAEA,OAAO,CAAC,OAAR,CAAiB,IAAD,IAAU;MACzB,OAAO,IAAI,CAAC,MAAZ;IACA,CAFD;IAIA,MAAM,CAAC,IAAP,GAAc,OAAd;IAEA,OAAO,MAAP;EACA,CAtDuB,CAyDzB;EACA;EACA;;;EAEC,WAAW,CAAC,QAAD,EAAW,GAAX,EAAe;IACzB,KAAK,OAAL,CAAa,QAAb,EAAuB,GAAvB,EADyB,CAE3B;;IACE,KAAK,WAAL;EACA;;EAED,SAAS,GAAE;IACV,KAAK,KAAL,GADU,CAEZ;;IACE,KAAK,WAAL;EACA,CAvEuB,CA0EzB;EACA;EACA;EAEA;;;EACC,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAI,MAAM,GAAG,KAAb;IAAA,IACA,KADA;IAAA,IAEA,OAFA;;IAIA,QAAO,OAAO,MAAM,CAAC,UAAP,CAAkB,MAAhC;MACC,KAAK,QAAL;QACC,IAAG,IAAI,CAAC,OAAL,CAAa,MAAM,CAAC,UAAP,CAAkB,MAA/B,CAAH,EAA0C;UACzC,MAAM,GAAG,IAAI,CAAC,OAAL,CAAa,MAAM,CAAC,UAAP,CAAkB,MAA/B,CAAT;QACA,CAFD,MAEK;UACJ,OAAO,CAAC,IAAR,CAAa,qCAAb,EAAoD,MAAM,CAAC,UAAP,CAAkB,MAAtE;QACA;;QACD;;MAED,KAAK,UAAL;QACC,MAAM,GAAG,MAAM,CAAC,UAAP,CAAkB,MAA3B;QACA;IAXF;;IAcA,MAAM,CAAC,OAAP,CAAe,IAAf,GAAsB;MACrB,MAAM,EAAC,MADc;MACN,GAAG,EAAC,MADE;MAErB,MAAM,EAAC,MAAM,CAAC,UAAP,CAAkB,YAAlB,IAAkC,EAFpB;MAGrB,WAAW,EAAC,MAAM,CAAC,UAAP,CAAkB,qBAAlB,IAA2C,KAHlC;MAIrB,QAAQ,EAAE,MAAM,CAAC,UAAP,CAAkB;IAJP,CAAtB;;IAOA,IAAG,MAAM,CAAC,UAAP,CAAkB,UAAlB,KAAiC,KAApC,EAA0C;MAEzC,KAAK,GAAG,MAAM,CAAC,UAAP,EAAR;MAEA,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,oBAApB;MAGA,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAV;MACA,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,sBAAtB;;MAEA,QAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAA1B;QACC,KAAK,UAAL;UACJ;UACK;;QAED,KAAK,QAAL;UACC,OAAO,CAAC,WAAR,CAAoB,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAvC;UACA;;QAED;UACC,OAAO,CAAC,SAAR,GAAoB,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAvC;MAVF,CAVyC,CAuB5C;;;MACG,MAAM,CAAC,kBAAP,CAA0B,WAA1B,CAAsC,OAAtC;MAEA,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,OAApB,GAA8B,OAA9B;MAEA,KAAK,uBAAL,CAA6B,MAA7B,EAAqC,MAArC,EA5ByC,CA8B5C;;MACG,KAAK,CAAC,gBAAN,CAAuB,OAAvB,EAAiC,CAAD,IAAO;QACtC,IAAI,GAAG,GAAG,EAAV;QAAA,IACA,OAAO,GAAC,EADR;QAAA,IAEA,KAAK,GAAG,KAFR;;QAIA,IAAG,MAAM,CAAC,OAAP,CAAe,IAAlB,EAAuB;UACtB,IAAG,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,QAAvB,EAAgC;YAC/B,IAAG,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,GAApB,IAA2B,MAA9B,EAAqC;cACpC,GAAG,GAAG,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,WAA1B;YACA,CAFD,MAEK;cACJ,IAAG,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,GAApB,IAA2B,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,WAAlD,EAA8D;gBAC7D,GAAG,GAAG,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,GAApB,IAA2B,KAA3B,GAAmC,MAAnC,GAA4C,KAAlD;cACA,CAFD,MAEK;gBACJ,GAAG,GAAG,MAAN;cACA;YACD;UACD,CAVD,MAUK;YACJ,QAAO,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,GAA3B;cACC,KAAK,KAAL;gBACC,GAAG,GAAG,MAAN;gBACA;;cAED,KAAK,MAAL;gBACC,GAAG,GAAG,KAAN;gBACA;;cAED;gBACC,GAAG,GAAG,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,WAA1B;YAVF;UAYA;;UAGD,IAAI,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAnB,KAA6C,CAAC,CAAC,QAAF,IAAc,CAAC,CAAC,OAA7D,CAAJ,EAA2E;YAC1E,OAAO,GAAG,KAAK,OAAL,EAAV;YAEA,KAAK,GAAG,OAAO,CAAC,SAAR,CAAmB,MAAD,IAAY;cACrC,OAAO,MAAM,CAAC,KAAP,KAAiB,MAAM,CAAC,QAAP,EAAxB;YACA,CAFO,CAAR;;YAIA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;cACb,OAAO,CAAC,KAAD,CAAP,CAAe,GAAf,GAAqB,GAArB;;cAEA,IAAG,KAAK,IAAI,OAAO,CAAC,MAAR,GAAgB,CAA5B,EAA8B;gBAC7B,KAAK,GAAG,OAAO,CAAC,MAAR,CAAe,KAAf,EAAsB,CAAtB,EAAyB,CAAzB,CAAR;;gBACA,IAAG,GAAG,IAAI,MAAV,EAAiB;kBAChB,OAAO,CAAC,IAAR,CAAa,KAAb;gBACA;cACD;YACD,CATD,MASK;cACJ,IAAG,GAAG,IAAI,MAAV,EAAiB;gBAChB,OAAO,CAAC,IAAR,CAAa;kBAAC,MAAM,EAAC,MAAR;kBAAgB,GAAG,EAAC;gBAApB,CAAb;cACA;YACD,CApByE,CAsBhF;;;YACM,KAAK,OAAL,CAAa,OAAb;UACA,CAxBD,MAwBK;YACJ,IAAG,GAAG,IAAI,MAAV,EAAiB;cAChB,KAAK,KAAL;YACA,CAFD,MAEK;cACX;cACO,KAAK,OAAL,CAAa,MAAb,EAAqB,GAArB;YACA;UAED,CA3DqB,CA6D3B;;;UACK,KAAK,WAAL;QACA;MACD,CArED;IAsEA;EACD;;EAED,WAAW,GAAE;IACZ,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,KAAgC,QAAnC,EAA4C;MAC3C,KAAK,UAAL,CAAgB,IAAhB,EAAsB,KAAtB,EAA6B,KAA7B;IACA,CAFD,MAEK;MACJ,KAAK,WAAL,CAAiB,IAAjB;IACA,CALW,CAOd;IACA;IACA;;EACE,CA3NuB,CA6NzB;;;EACC,UAAU,GAAE;IACX,IAAI,OAAO,GAAG,KAAK,OAAnB;IACA,KAAK,OAAL,GAAe,KAAf;IACA,OAAO,OAAP;EACA,CAlOuB,CAoOzB;;;EACC,OAAO,GAAE;IACR,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,OAAO,GAAG,EADV;IAGA,IAAI,CAAC,QAAL,CAAc,OAAd,CAAsB,UAAS,IAAT,EAAc;MACnC,IAAG,IAAI,CAAC,MAAR,EAAe;QACd,OAAO,CAAC,IAAR,CAAa;UAAC,MAAM,EAAC,IAAI,CAAC,MAAL,CAAY,YAAZ,EAAR;UAAoC,KAAK,EAAC,IAAI,CAAC,MAAL,CAAY,QAAZ,EAA1C;UAAkE,GAAG,EAAC,IAAI,CAAC;QAA3E,CAAb;MACA;IACD,CAJD;IAMA,OAAO,OAAP;EACA,CAhPuB,CAkPzB;;;EACC,OAAO,CAAC,QAAD,EAAW,GAAX,EAAe;IACrB,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,WAAW,GAAG,EADd;;IAGA,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,QAAd,CAAJ,EAA4B;MAC3B,QAAQ,GAAG,CAAC;QAAC,MAAM,EAAE,QAAT;QAAmB,GAAG,EAAC;MAAvB,CAAD,CAAX;IACA;;IAED,QAAQ,CAAC,OAAT,CAAiB,UAAS,IAAT,EAAc;MAC9B,IAAI,MAAJ;MAEA,MAAM,GAAG,IAAI,CAAC,KAAL,CAAW,aAAX,CAAyB,UAAzB,CAAoC,IAAI,CAAC,MAAzC,CAAT;;MAEA,IAAG,MAAH,EAAU;QACT,IAAI,CAAC,MAAL,GAAc,MAAd;QACA,WAAW,CAAC,IAAZ,CAAiB,IAAjB;QACA,IAAI,CAAC,OAAL,GAAe,IAAf;MACA,CAJD,MAIK;QACJ,OAAO,CAAC,IAAR,CAAa,iEAAb,EAAgF,IAAI,CAAC,MAArF;MACA;IAED,CAbD;IAeA,IAAI,CAAC,QAAL,GAAgB,WAAhB;IAEA,KAAK,QAAL,CAAc,cAAd;EACA,CA7QuB,CA+QzB;;;EACC,KAAK,GAAE;IACN,KAAK,OAAL,CAAa,EAAb;EACA,CAlRuB,CAoRzB;;;EACC,UAAU,CAAC,MAAD,EAAQ;IACjB,IAAI,GAAG,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,UAAtB,CAAiC,CAAjC,CAAV;IAAA,IACA,MAAM,GAAG,QADT;IAAA,IAEA,KAFA;IAAA,IAEO,KAFP;;IAIA,IAAG,GAAH,EAAO;MACN,GAAG,GAAG,GAAG,CAAC,OAAJ,EAAN;MACA,KAAK,GAAG,MAAM,CAAC,QAAP,EAAR;;MAEA,IAAG,KAAH,EAAS;QAER,KAAK,GAAG,MAAM,CAAC,aAAP,CAAqB,GAArB,CAAR;;QAEA,QAAO,OAAO,KAAd;UACC,KAAK,WAAL;YACC,MAAM,GAAG,QAAT;YACA;;UAED,KAAK,SAAL;YACC,MAAM,GAAG,SAAT;YACA;;UAED;YACC,IAAG,CAAC,KAAK,CAAC,KAAD,CAAN,IAAiB,KAAK,KAAK,EAA9B,EAAiC;cAChC,MAAM,GAAG,QAAT;YACA,CAFD,MAEK;cACJ,IAAG,KAAK,CAAC,KAAN,CAAY,sCAAZ,CAAH,EAAuD;gBACtD,MAAM,GAAG,UAAT;cACA;YACD;;YACD;QAjBF;MAmBA;IACD;;IAED,OAAO,IAAI,CAAC,OAAL,CAAa,MAAb,CAAP;EACA,CAzTuB,CA2TzB;;;EACC,IAAI,CAAC,IAAD,EAAM;IACT,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,QAAQ,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,GAAsC,IAAI,CAAC,QAAL,CAAc,KAAd,GAAsB,OAAtB,EAAtC,GAAwE,IAAI,CAAC,QADxF;IAAA,IAEA,cAAc,GAAG,EAFjB;IAAA,IAGA,aAAa,GAAG,EAHhB;;IAKA,IAAG,KAAK,kBAAL,CAAwB,aAAxB,CAAH,EAA0C;MACzC,KAAK,gBAAL,CAAsB,aAAtB,EAAqC,IAAI,CAAC,OAAL,EAArC;IACA;;IAED,IAAI,CAAC,kBAAL;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,KAAgC,QAAnC,EAA4C;MAE9C;MACG,QAAQ,CAAC,OAAT,CAAiB,UAAS,IAAT,EAAe,CAAf,EAAiB;QACjC,IAAI,OAAJ;;QAEA,IAAG,IAAI,CAAC,MAAR,EAAe;UACd,OAAO,GAAG,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,IAA9B;;UAEA,IAAG,OAAH,EAAW;YAEhB;YACM,IAAG,CAAC,OAAO,CAAC,MAAZ,EAAmB;cAClB,OAAO,CAAC,MAAR,GAAiB,IAAI,CAAC,UAAL,CAAgB,IAAI,CAAC,MAArB,CAAjB;YACA;;YAED,IAAI,CAAC,MAAL,GAAc,OAAO,OAAO,CAAC,MAAf,KAA0B,UAA1B,GAAuC,OAAO,CAAC,MAAR,CAAe,IAAI,CAAC,MAAL,CAAY,YAAZ,EAAf,EAA2C,IAAI,CAAC,GAAhD,CAAvC,GAA8F,OAAO,CAAC,MAApH;YAEA,cAAc,CAAC,IAAf,CAAoB,IAApB;UACA;;UAED,IAAI,CAAC,eAAL,CAAqB,IAAI,CAAC,MAA1B,EAAkC,IAAI,CAAC,GAAvC;QACA;MACD,CApBD,EAH2C,CAyB9C;;MACG,IAAI,cAAc,CAAC,MAAnB,EAA2B;QAC1B,IAAI,CAAC,UAAL,CAAgB,IAAhB,EAAsB,cAAtB;MACA;IAED,CA9BD,MA8BK;MACJ,QAAQ,CAAC,OAAT,CAAiB,UAAS,IAAT,EAAe,CAAf,EAAiB;QACjC,IAAI,CAAC,eAAL,CAAqB,IAAI,CAAC,MAA1B,EAAkC,IAAI,CAAC,GAAvC;MACA,CAFD;IAGA;;IAED,IAAG,KAAK,kBAAL,CAAwB,YAAxB,CAAH,EAAyC;MACxC,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;QACrB,aAAa,CAAC,IAAd,CAAmB,GAAG,CAAC,YAAJ,EAAnB;MACA,CAFD;MAIA,KAAK,gBAAL,CAAsB,YAAtB,EAAoC,IAAI,CAAC,OAAL,EAApC,EAAoD,aAApD;IACA;;IAED,OAAO,IAAP;EACA,CArXuB,CAuXzB;;;EACC,kBAAkB,GAAE;IACnB,KAAK,KAAL,CAAW,aAAX,CAAyB,cAAzB,GAA0C,OAA1C,CAAmD,MAAD,IAAY;MAC7D,IAAG,MAAM,CAAC,OAAP,CAAe,IAAlB,EAAuB;QACtB,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,GAApB,GAA0B,MAA1B;QACA,MAAM,CAAC,UAAP,GAAoB,YAApB,CAAiC,WAAjC,EAA8C,MAA9C;QACA,KAAK,uBAAL,CAA6B,MAA7B,EAAqC,MAArC;MACA;IACD,CAND;EAOA,CAhYuB,CAkYzB;;;EACC,eAAe,CAAC,MAAD,EAAS,GAAT,EAAa;IAC3B,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,GAApB,GAA0B,GAA1B;IACA,MAAM,CAAC,UAAP,GAAoB,YAApB,CAAiC,WAAjC,EAA8C,GAAG,KAAK,KAAR,GAAgB,WAAhB,GAA8B,YAA5E;IACA,KAAK,uBAAL,CAA6B,MAA7B,EAAqC,GAArC;EACA;;EAED,uBAAuB,CAAC,MAAD,EAAS,GAAT,EAAa;IACnC,IAAI,MAAM,GAAG,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,OAAjC;IAAA,IACA,OADA;;IAGA,IAAG,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAA1B,KAAgD,UAAnD,EAA8D;MAC7D,OAAM,MAAM,CAAC,UAAb,EAAyB,MAAM,CAAC,WAAP,CAAmB,MAAM,CAAC,UAA1B;;MAEzB,OAAO,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAnB,CAAqC,IAArC,CAA0C,KAAK,KAA/C,EAAsD,MAAM,CAAC,YAAP,EAAtD,EAA6E,GAA7E,CAAV;;MAEA,IAAG,OAAO,OAAP,KAAmB,QAAtB,EAA+B;QAC9B,MAAM,CAAC,WAAP,CAAmB,OAAnB;MACA,CAFD,MAEK;QACJ,MAAM,CAAC,SAAP,GAAmB,OAAnB;MACA;IACD;EACD,CAxZuB,CA0ZzB;;;EACC,UAAU,CAAC,IAAD,EAAO,QAAP,EAAgB;IACzB,IAAI,WAAW,GAAG,QAAQ,CAAC,MAAT,GAAkB,CAApC;IAEA,IAAI,CAAC,IAAL,CAAU,CAAC,CAAD,EAAI,CAAJ,KAAU;MACnB,IAAI,MAAJ;;MAEA,KAAI,IAAI,CAAC,GAAG,WAAZ,EAAyB,CAAC,IAAG,CAA7B,EAAgC,CAAC,EAAjC,EAAoC;QACnC,IAAI,QAAQ,GAAG,QAAQ,CAAC,CAAD,CAAvB;QAEA,MAAM,GAAG,KAAK,QAAL,CAAc,CAAd,EAAiB,CAAjB,EAAoB,QAAQ,CAAC,MAA7B,EAAqC,QAAQ,CAAC,GAA9C,EAAmD,QAAQ,CAAC,MAA5D,CAAT;;QAEA,IAAG,MAAM,KAAK,CAAd,EAAgB;UACf;QACA;MACD;;MAED,OAAO,MAAP;IACA,CAdD;EAeA,CA7auB,CA+azB;;;EACC,QAAQ,CAAC,CAAD,EAAI,CAAJ,EAAO,MAAP,EAAe,GAAf,EAAoB,MAApB,EAA2B;IAClC,IAAI,OAAJ,EAAa,OAAb,CADkC,CAGpC;;IACE,IAAI,GAAG,GAAG,GAAG,IAAI,KAAP,GAAe,CAAf,GAAmB,CAA7B;IACA,IAAI,GAAG,GAAG,GAAG,IAAI,KAAP,GAAe,CAAf,GAAmB,CAA7B;IAEA,CAAC,GAAG,MAAM,CAAC,aAAP,CAAqB,GAAG,CAAC,OAAJ,EAArB,CAAJ;IACA,CAAC,GAAG,MAAM,CAAC,aAAP,CAAqB,GAAG,CAAC,OAAJ,EAArB,CAAJ;IAEA,CAAC,GAAG,OAAO,CAAP,KAAa,WAAb,GAA2B,CAA3B,GAA+B,EAAnC;IACA,CAAC,GAAG,OAAO,CAAP,KAAa,WAAb,GAA2B,CAA3B,GAA+B,EAAnC;IAEA,OAAO,GAAG,GAAG,CAAC,YAAJ,EAAV;IACA,OAAO,GAAG,GAAG,CAAC,YAAJ,EAAV;IAEA,OAAO,MAAM,CAAC,OAAP,CAAe,IAAf,CAAoB,MAApB,CAA2B,IAA3B,CAAgC,IAAhC,EAAsC,CAAtC,EAAyC,CAAzC,EAA4C,OAA5C,EAAqD,OAArD,EAA8D,MAAM,CAAC,YAAP,EAA9D,EAAqF,GAArF,EAA0F,MAA1F,CAAP;EACA;;AAjcuB;;;AAoczB,IAAI,CAAC,UAAL,GAAkB,MAAlB,EAEA;;AACA,IAAI,CAAC,OAAL,GAAe,cAAf;;ACxcA,MAAM,OAAN,SAAsB,MAAtB,CAA4B;EAE3B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,iBAAL,GAAyB,IAAzB,EACA,KAAK,gBAAL,GAAwB,IADxB,EAGA,KAAK,OAAL,GAAe,IAHf;IAIA,KAAK,aAAL,GAAqB,IAArB;IAEA,KAAK,mBAAL,CAAyB,uBAAzB,EAAkD,SAAlD,EATiB,CAS4C;;IAC7D,KAAK,mBAAL,CAAyB,cAAzB,EAAyC,GAAzC;IAEA,KAAK,oBAAL,CAA0B,SAA1B;IACA,KAAK,oBAAL,CAA0B,eAA1B;EACA;;EAED,UAAU,GAAE;IACX,KAAK,sBAAL;IAEA,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA9B;EACA;;EAED,sBAAsB,GAAE;IACvB,KAAK,mBAAL,CAAyB,uBAAzB,EAAkD,+EAAlD;EACA;;EAED,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAG,MAAM,CAAC,UAAP,CAAkB,aAAlB,IAAmC,CAAC,KAAK,gBAA5C,EAA6D;MAC5D,KAAK,gBAAL,GAAwB,IAAxB;MAEA,KAAK,SAAL,CAAe,kBAAf,EAAmC,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,EAA+B,eAA/B,CAAnC;MACA,KAAK,SAAL,CAAe,iBAAf,EAAkC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,EAA8B,eAA9B,CAAlC;IACA;;IAED,IAAG,MAAM,CAAC,UAAP,CAAkB,OAAlB,IAA6B,CAAC,KAAK,iBAAtC,EAAwD;MACvD,KAAK,iBAAL,GAAyB,IAAzB;MAEA,KAAK,SAAL,CAAe,gBAAf,EAAiC,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,EAA+B,SAA/B,CAAjC;MACA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,EAA8B,SAA9B,CAAhC;IACA;EACD;;EAED,cAAc,CAAC,MAAD,EAAS,CAAT,EAAY,SAAZ,EAAsB;IACnC,IAAI,OAAO,GAAG,MAAM,KAAK,SAAX,GAAuB,SAAS,CAAC,MAAV,CAAiB,UAAjB,CAA4B,OAAnD,GAA6D,SAAS,CAAC,UAAV,CAAqB,aAAhG;;IAEA,IAAG,OAAH,EAAW;MACV,KAAK,UAAL;MACA,KAAK,OAAL,GAAe,UAAU,CAAC,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,EAA4B,CAA5B,EAA+B,SAA/B,EAA0C,OAA1C,CAAD,EAAqD,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAxE,CAAzB;IACA;EACD;;EAED,aAAa,CAAC,MAAD,EAAS,CAAT,EAAY,SAAZ,EAAsB;IAClC,IAAG,CAAC,KAAK,aAAT,EAAuB;MACtB,KAAK,UAAL;IACA;EACD;;EAED,UAAU,CAAC,MAAD,EAAS,CAAT,EAAY,SAAZ,EAAsB;IAC/B,YAAY,CAAC,KAAK,OAAN,CAAZ;IACA,KAAK,OAAL,GAAe,IAAf;;IAEA,IAAG,KAAK,aAAR,EAAsB;MACrB,KAAK,aAAL,CAAmB,IAAnB;IACA;EACD;;EAED,WAAW,CAAC,CAAD,EAAI,SAAJ,EAAe,OAAf,EAAuB;IACjC,IAAI,UAAJ,EAAgB,gBAAhB,EAAkC,MAAlC;;IAEA,SAAS,UAAT,CAAoB,QAApB,EAA6B;MAC5B,gBAAgB,GAAG,QAAnB;IACA;;IAED,IAAG,OAAO,OAAP,KAAmB,UAAtB,EAAiC;MAChC,OAAO,GAAG,OAAO,CAAC,CAAD,EAAI,SAAS,CAAC,YAAV,EAAJ,EAA8B,UAA9B,CAAjB;IACA;;IAED,IAAG,OAAO,YAAY,WAAtB,EAAkC;MACjC,UAAU,GAAG,OAAb;IACA,CAFD,MAEK;MACJ,UAAU,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAb;;MAEA,IAAG,OAAO,KAAK,IAAf,EAAoB;QACnB,IAAG,SAAS,YAAY,IAAxB,EAA6B;UAC5B,OAAO,GAAG,SAAS,CAAC,KAApB;QACA,CAFD,MAEK;UACJ,IAAG,SAAS,CAAC,UAAV,CAAqB,KAAxB,EAA8B;YAC7B,KAAK,QAAL,CAAc,aAAa,SAAS,CAAC,UAAV,CAAqB,KAAhD,EAAwD,KAAD,IAAW;cACjE,UAAU,CAAC,SAAX,GAAuB,OAAO,GAAG,KAAK,IAAI,SAAS,CAAC,UAAV,CAAqB,KAA/D;YACA,CAFD;UAGA,CAJD,MAIK;YACJ,OAAO,GAAG,SAAS,CAAC,UAAV,CAAqB,KAA/B;UACA;QACD;MACD;;MAED,UAAU,CAAC,SAAX,GAAuB,OAAvB;IACA;;IAED,IAAG,OAAO,IAAI,OAAO,KAAK,CAAvB,IAA4B,OAAO,KAAK,KAA3C,EAAiD;MAChD,UAAU,CAAC,SAAX,CAAqB,GAArB,CAAyB,mBAAzB;MAEA,UAAU,CAAC,gBAAX,CAA4B,WAA5B,EAAyC,CAAC,IAAI,CAAC,CAAC,cAAF,EAA9C;MAEA,KAAK,aAAL,GAAqB,KAAK,KAAL,CAAW,UAAX,CAArB;;MAEA,IAAG,OAAO,gBAAP,KAA4B,UAA/B,EAA0C;QACzC,KAAK,aAAL,CAAmB,cAAnB,CAAkC,gBAAlC;MACA;;MAED,MAAM,GAAG,KAAK,aAAL,CAAmB,oBAAnB,CAAwC,CAAxC,CAAT;MAEA,KAAK,aAAL,CAAmB,IAAnB,CAAwB,MAAM,CAAC,CAAP,GAAW,EAAnC,EAAuC,MAAM,CAAC,CAAP,GAAW,EAAlD,EAAsD,UAAtD,CAAiE,MAAM;QACtE,KAAK,gBAAL,CAAsB,eAAtB,EAAuC,SAAS,CAAC,YAAV,EAAvC;QACA,KAAK,aAAL,GAAqB,IAArB;MACA,CAHD;MAKA,KAAK,gBAAL,CAAsB,eAAtB,EAAuC,SAAS,CAAC,YAAV,EAAvC;IACA;EACD;;AAzH0B;;;AA4H5B,OAAO,CAAC,UAAR,GAAqB,SAArB;AC/HA,IAAA,iBAAA,GAAe;EACf;EACC,OAAO,EAAE,UAAS,IAAT,EAAe,KAAf,EAAsB,UAAtB,EAAiC;IACzC,IAAG,KAAK,KAAK,EAAV,IAAgB,KAAK,KAAK,IAA1B,IAAkC,OAAO,KAAP,KAAiB,WAAtD,EAAkE;MACjE,OAAO,IAAP;IACA;;IAED,KAAK,GAAG,MAAM,CAAC,KAAD,CAAd;IAEA,OAAO,CAAC,KAAK,CAAC,KAAD,CAAN,IAAiB,QAAQ,CAAC,KAAD,CAAzB,IAAoC,IAAI,CAAC,KAAL,CAAW,KAAX,MAAsB,KAAjE;EACA,CAVa;EAYf;EACC,KAAK,EAAE,UAAS,IAAT,EAAe,KAAf,EAAsB,UAAtB,EAAiC;IACvC,IAAG,KAAK,KAAK,EAAV,IAAgB,KAAK,KAAK,IAA1B,IAAkC,OAAO,KAAP,KAAiB,WAAtD,EAAkE;MACjE,OAAO,IAAP;IACA;;IAED,KAAK,GAAG,MAAM,CAAC,KAAD,CAAd;IAEA,OAAO,CAAC,KAAK,CAAC,KAAD,CAAN,IAAiB,QAAQ,CAAC,KAAD,CAAzB,IAAoC,KAAK,GAAG,CAAR,KAAc,CAAzD;EACA,CArBa;EAuBf;EACC,OAAO,EAAE,UAAS,IAAT,EAAe,KAAf,EAAsB,UAAtB,EAAiC;IACzC,IAAG,KAAK,KAAK,EAAV,IAAgB,KAAK,KAAK,IAA1B,IAAkC,OAAO,KAAP,KAAiB,WAAtD,EAAkE;MACjE,OAAO,IAAP;IACA;;IACD,OAAO,CAAC,KAAK,CAAC,KAAD,CAAb;EACA,CA7Ba;EA+Bf;EACC,MAAM,EAAE,UAAS,IAAT,EAAe,KAAf,EAAsB,UAAtB,EAAiC;IACxC,IAAG,KAAK,KAAK,EAAV,IAAgB,KAAK,KAAK,IAA1B,IAAkC,OAAO,KAAP,KAAiB,WAAtD,EAAkE;MACjE,OAAO,IAAP;IACA;;IACD,OAAO,KAAK,CAAC,KAAD,CAAZ;EACA,CArCa;EAuCf;EACC,GAAG,EAAE,UAAS,IAAT,EAAe,KAAf,EAAsB,UAAtB,EAAiC;IACrC,IAAG,KAAK,KAAK,EAAV,IAAgB,KAAK,KAAK,IAA1B,IAAkC,OAAO,KAAP,KAAiB,WAAtD,EAAkE;MACjE,OAAO,IAAP;IACA;;IACD,OAAO,UAAU,CAAC,KAAD,CAAV,IAAqB,UAA5B;EACA,CA7Ca;EA+Cf;EACC,GAAG,EAAE,UAAS,IAAT,EAAe,KAAf,EAAsB,UAAtB,EAAiC;IACrC,IAAG,KAAK,KAAK,EAAV,IAAgB,KAAK,KAAK,IAA1B,IAAkC,OAAO,KAAP,KAAiB,WAAtD,EAAkE;MACjE,OAAO,IAAP;IACA;;IACD,OAAO,UAAU,CAAC,KAAD,CAAV,IAAqB,UAA5B;EACA,CArDa;EAuDf;EACC,MAAM,EAAE,UAAS,IAAT,EAAe,KAAf,EAAsB,UAAtB,EAAiC;IACxC,IAAG,KAAK,KAAK,EAAV,IAAgB,KAAK,KAAK,IAA1B,IAAkC,OAAO,KAAP,KAAiB,WAAtD,EAAkE;MACjE,OAAO,IAAP;IACA;;IACD,OAAO,MAAM,CAAC,KAAD,CAAN,CAAc,WAAd,GAA4B,UAA5B,CAAuC,MAAM,CAAC,UAAD,CAAN,CAAmB,WAAnB,EAAvC,CAAP;EACA,CA7Da;EA+Df;EACC,IAAI,EAAE,UAAS,IAAT,EAAe,KAAf,EAAsB,UAAtB,EAAiC;IACtC,IAAG,KAAK,KAAK,EAAV,IAAgB,KAAK,KAAK,IAA1B,IAAkC,OAAO,KAAP,KAAiB,WAAtD,EAAkE;MACjE,OAAO,IAAP;IACA;;IACD,OAAO,MAAM,CAAC,KAAD,CAAN,CAAc,WAAd,GAA4B,QAA5B,CAAqC,MAAM,CAAC,UAAD,CAAN,CAAmB,WAAnB,EAArC,CAAP;EACA,CArEa;EAwEf;EACC,SAAS,EAAE,UAAS,IAAT,EAAe,KAAf,EAAsB,UAAtB,EAAiC;IAC3C,IAAG,KAAK,KAAK,EAAV,IAAgB,KAAK,KAAK,IAA1B,IAAkC,OAAO,KAAP,KAAiB,WAAtD,EAAkE;MACjE,OAAO,IAAP;IACA;;IACD,OAAO,MAAM,CAAC,KAAD,CAAN,CAAc,MAAd,IAAwB,UAA/B;EACA,CA9Ea;EAgFf;EACC,SAAS,EAAE,UAAS,IAAT,EAAe,KAAf,EAAsB,UAAtB,EAAiC;IAC3C,IAAG,KAAK,KAAK,EAAV,IAAgB,KAAK,KAAK,IAA1B,IAAkC,OAAO,KAAP,KAAiB,WAAtD,EAAkE;MACjE,OAAO,IAAP;IACA;;IACD,OAAO,MAAM,CAAC,KAAD,CAAN,CAAc,MAAd,IAAwB,UAA/B;EACA,CAtFa;EAwFf;EACC,EAAE,EAAE,UAAS,IAAT,EAAe,KAAf,EAAsB,UAAtB,EAAiC;IACpC,IAAG,KAAK,KAAK,EAAV,IAAgB,KAAK,KAAK,IAA1B,IAAkC,OAAO,KAAP,KAAiB,WAAtD,EAAkE;MACjE,OAAO,IAAP;IACA;;IAED,IAAG,OAAO,UAAP,IAAqB,QAAxB,EAAiC;MAChC,UAAU,GAAG,UAAU,CAAC,KAAX,CAAiB,GAAjB,CAAb;IACA;;IAED,OAAO,UAAU,CAAC,OAAX,CAAmB,KAAnB,IAA4B,CAAC,CAApC;EACA,CAnGa;EAqGf;EACC,KAAK,EAAE,UAAS,IAAT,EAAe,KAAf,EAAsB,UAAtB,EAAiC;IACvC,IAAG,KAAK,KAAK,EAAV,IAAgB,KAAK,KAAK,IAA1B,IAAkC,OAAO,KAAP,KAAiB,WAAtD,EAAkE;MACjE,OAAO,IAAP;IACA;;IACD,IAAI,GAAG,GAAG,IAAI,MAAJ,CAAW,UAAX,CAAV;IAEA,OAAO,GAAG,CAAC,IAAJ,CAAS,KAAT,CAAP;EACA,CA7Ga;EA+Gf;EACC,MAAM,EAAE,UAAS,IAAT,EAAe,KAAf,EAAsB,UAAtB,EAAiC;IACxC,IAAG,KAAK,KAAK,EAAV,IAAgB,KAAK,KAAK,IAA1B,IAAkC,OAAO,KAAP,KAAiB,WAAtD,EAAkE;MACjE,OAAO,IAAP;IACA;;IACD,IAAI,MAAM,GAAG,IAAb;IAEA,IAAI,QAAQ,GAAG,IAAI,CAAC,OAAL,EAAf;;IACA,IAAI,MAAM,GAAG,IAAI,CAAC,SAAL,GAAiB,QAAjB,EAAb;;IAEA,KAAK,KAAL,CAAW,UAAX,CAAsB,IAAtB,CAA2B,OAA3B,CAAmC,UAAS,GAAT,EAAa;MAC/C,IAAI,IAAI,GAAG,GAAG,CAAC,OAAJ,EAAX;;MAEA,IAAG,IAAI,KAAK,QAAZ,EAAqB;QACpB,IAAG,KAAK,IAAI,MAAM,CAAC,aAAP,CAAqB,IAArB,CAAZ,EAAuC;UACtC,MAAM,GAAG,KAAT;QACA;MACD;IACD,CARD;IAUA,OAAO,MAAP;EACA,CApIa;EAsIf;EACC,QAAQ,EAAC,UAAS,IAAT,EAAe,KAAf,EAAsB,UAAtB,EAAiC;IACzC,OAAO,KAAK,KAAK,EAAV,IAAgB,KAAK,KAAK,IAA1B,IAAkC,OAAO,KAAP,KAAiB,WAA1D;EACA;AAzIa,CAAf;;ACIA,MAAM,QAAN,SAAuB,MAAvB,CAA6B;EAE5B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,YAAL,GAAoB,EAApB;IAEA,KAAK,mBAAL,CAAyB,gBAAzB,EAA2C,UAA3C;IAEA,KAAK,oBAAL,CAA0B,WAA1B;IAEA,KAAK,qBAAL,CAA2B,iBAA3B,EAA8C,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAA9C;IACA,KAAK,qBAAL,CAA2B,qBAA3B,EAAkD,KAAK,uBAAL,CAA6B,IAA7B,CAAkC,IAAlC,CAAlD;IACA,KAAK,qBAAL,CAA2B,UAA3B,EAAuC,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAvC;IAEA,KAAK,yBAAL,CAA+B,MAA/B,EAAuC,SAAvC,EAAkD,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAlD;IACA,KAAK,yBAAL,CAA+B,MAA/B,EAAuC,iBAAvC,EAA0D,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAA1D;IACA,KAAK,yBAAL,CAA+B,MAA/B,EAAuC,UAAvC,EAAmD,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAAnD;IAEA,KAAK,yBAAL,CAA+B,QAA/B,EAAyC,UAAzC,EAAqD,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAArD;IACA,KAAK,yBAAL,CAA+B,KAA/B,EAAsC,UAAtC,EAAkD,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAlD;EACA;;EAGD,UAAU,GAAE;IACX,KAAK,SAAL,CAAe,aAAf,EAA8B,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAA9B;IACA,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,qBAAL,CAA2B,IAA3B,CAAgC,IAAhC,CAAhC;IAEA,KAAK,SAAL,CAAe,cAAf,EAA+B,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAA/B;IACA,KAAK,SAAL,CAAe,mBAAf,EAAoC,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAApC;IACA,KAAK,SAAL,CAAe,mBAAf,EAAoC,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAApC;EACA,CA/B2B,CAiC7B;EACA;EACA;;;EAEC,YAAY,CAAC,IAAD,EAAO,KAAP,EAAc,aAAd,EAA4B;IACvC,IAAI,KAAK,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAnB,KAAsC,QAAtC,GAAiD,KAAK,QAAL,CAAc,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,QAAlC,EAA4C,IAA5C,EAAkD,KAAlD,CAAjD,GAA4G,IAAxH,CADuC,CAGzC;;IACE,IAAG,KAAK,KAAK,IAAb,EAAkB;MACjB,UAAU,CAAC,MAAM;QAChB,IAAI,CAAC,UAAL,GAAkB,SAAlB,CAA4B,GAA5B,CAAgC,2BAAhC;QACA,KAAK,gBAAL,CAAsB,kBAAtB,EAA0C,IAAI,CAAC,YAAL,EAA1C,EAA+D,KAA/D,EAAsE,KAAtE;MACA,CAHS,CAAV;IAIA;;IAED,OAAO,KAAP;EACA;;EAED,WAAW,CAAC,IAAD,EAAO,SAAP,EAAiB;IAC3B,IAAG,SAAH,EAAa;MACZ,IAAG,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,QAAvB,EAAgC;QAC/B,KAAK,YAAL,CAAkB,IAAlB;MACA;IACD;;IAED,IAAI,CAAC,UAAL,GAAkB,SAAlB,CAA4B,MAA5B,CAAmC,2BAAnC;EACA;;EAED,WAAW,CAAC,IAAD,EAAM;IAChB,IAAG,IAAI,CAAC,OAAL,CAAa,QAAhB,EAAyB;MACxB,IAAI,CAAC,OAAL,CAAa,QAAb,CAAsB,OAAtB,GAAgC,KAAhC;IACA;EACD,CAjE2B,CAmE7B;EACA;EACA;;;EAEC,WAAW,CAAC,IAAD,EAAM;IAChB,OAAO,IAAI,CAAC,OAAL,CAAa,QAAb,GAAyB,IAAI,CAAC,OAAL,CAAa,QAAb,CAAsB,OAAtB,IAAiC,IAA1D,GAAkE,IAAzE;EACA;;EAED,YAAY,CAAC,IAAD,EAAM;IACjB,OAAO,KAAK,QAAL,CAAc,IAAI,CAAC,MAAL,CAAY,OAAZ,CAAoB,QAAlC,EAA4C,IAA5C,EAAkD,IAAI,CAAC,QAAL,EAAlD,CAAP;EACA,CA7E2B,CA+E7B;EACA;EACA;;;EAEC,cAAc,CAAC,MAAD,EAAQ;IACrB,IAAI,OAAO,GAAG,EAAd;IAEA,MAAM,CAAC,KAAP,CAAa,OAAb,CAAsB,IAAD,IAAU;MAC9B,IAAG,KAAK,YAAL,CAAkB,IAAlB,MAA4B,IAA/B,EAAoC;QACnC,OAAO,CAAC,IAAR,CAAa,IAAI,CAAC,YAAL,EAAb;MACA;IACD,CAJD;IAMA,OAAO,OAAO,CAAC,MAAR,GAAiB,OAAjB,GAA2B,IAAlC;EACA,CA7F2B,CA+F7B;EACA;EACA;;;EAEC,WAAW,CAAC,GAAD,EAAK;IACf,IAAI,OAAO,GAAG,EAAd;IAEA,GAAG,CAAC,KAAJ,CAAU,OAAV,CAAmB,IAAD,IAAU;MAC3B,IAAG,KAAK,YAAL,CAAkB,IAAlB,MAA4B,IAA/B,EAAoC;QACnC,OAAO,CAAC,IAAR,CAAa,IAAI,CAAC,YAAL,EAAb;MACA;IACD,CAJD;IAMA,OAAO,OAAO,CAAC,MAAR,GAAiB,OAAjB,GAA2B,IAAlC;EACA,CA7G2B,CA+G7B;EACA;EACA;;;EAGC,uBAAuB,CAAC,KAAD,EAAO;IAC7B,IAAG,CAAC,KAAJ,EAAU;MACT,KAAK,GAAG,KAAK,eAAL,EAAR;IACA;;IAED,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,KAAd,CAAJ,EAAyB;MACxB,KAAK,GAAG,CAAC,KAAD,CAAR;IACA;;IAED,KAAK,CAAC,OAAN,CAAe,IAAD,IAAU;MACvB,KAAK,eAAL,CAAqB,IAAI,CAAC,QAAL,EAArB;IACA,CAFD;EAGA;;EAED,YAAY,CAAC,KAAD,EAAO;IAClB,IAAI,MAAM,GAAG,EAAb,CADkB,CAGpB;;IACE,KAAK,KAAL,CAAW,UAAX,CAAsB,IAAtB,CAA2B,OAA3B,CAAoC,GAAD,IAAS;MAC3C,GAAG,GAAG,GAAG,CAAC,YAAJ,EAAN;MAEA,IAAI,KAAK,GAAG,GAAG,CAAC,QAAJ,EAAZ;;MAEA,IAAG,KAAK,KAAK,IAAb,EAAkB;QACjB,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,KAAd,CAAT;MACA;IACD,CARD;IAUA,OAAO,MAAM,CAAC,MAAP,GAAgB,MAAhB,GAAyB,IAAhC;EACA,CAjJ2B,CAmJ7B;EACA;EACA;;;EAEC,qBAAqB,CAAC,MAAD,EAAQ;IAC5B,IAAG,OAAO,MAAM,CAAC,UAAP,CAAkB,SAAzB,KAAuC,WAA1C,EAAsD;MACrD,KAAK,gBAAL,CAAsB,MAAtB;IACA;EACD,CA3J2B,CA6J7B;;;EACC,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,MAAM,GAAG,EADT;IAAA,IAEA,SAFA;;IAIA,IAAG,MAAM,CAAC,UAAP,CAAkB,SAArB,EAA+B;MAE9B,IAAG,KAAK,CAAC,OAAN,CAAc,MAAM,CAAC,UAAP,CAAkB,SAAhC,CAAH,EAA8C;QAC7C,MAAM,CAAC,UAAP,CAAkB,SAAlB,CAA4B,OAA5B,CAAqC,IAAD,IAAU;UAC7C,SAAS,GAAG,IAAI,CAAC,iBAAL,CAAuB,IAAvB,CAAZ;;UAEA,IAAG,SAAH,EAAa;YACZ,MAAM,CAAC,IAAP,CAAY,SAAZ;UACA;QACD,CAND;MAQA,CATD,MASK;QACJ,SAAS,GAAG,KAAK,iBAAL,CAAuB,MAAM,CAAC,UAAP,CAAkB,SAAzC,CAAZ;;QAEA,IAAG,SAAH,EAAa;UACZ,MAAM,CAAC,IAAP,CAAY,SAAZ;QACA;MACD;;MAED,MAAM,CAAC,OAAP,CAAe,QAAf,GAA0B,MAAM,CAAC,MAAP,GAAgB,MAAhB,GAAyB,KAAnD;IACA;EACD;;EAED,iBAAiB,CAAC,KAAD,EAAO;IACvB,IAAI,IAAJ,EAAU,MAAV,EAAkB,GAAlB;;IAEA,QAAO,OAAO,KAAd;MACC,KAAK,QAAL;QACC,GAAG,GAAG,KAAK,CAAC,OAAN,CAAc,GAAd,CAAN;;QAEA,IAAG,GAAG,GAAG,CAAC,CAAV,EAAY;UACX,IAAI,GAAG,KAAK,CAAC,SAAN,CAAgB,CAAhB,EAAkB,GAAlB,CAAP;UACA,MAAM,GAAG,KAAK,CAAC,SAAN,CAAgB,GAAG,GAAC,CAApB,CAAT;QACA,CAHD,MAGK;UACJ,IAAI,GAAG,KAAP;QACA;;QAED,OAAO,KAAK,eAAL,CAAqB,IAArB,EAA2B,MAA3B,CAAP;;MAED,KAAK,UAAL;QACC,OAAO,KAAK,eAAL,CAAqB,KAArB,CAAP;;MAED,KAAK,QAAL;QACC,OAAO,KAAK,eAAL,CAAqB,KAAK,CAAC,IAA3B,EAAiC,KAAK,CAAC,UAAvC,CAAP;IAjBF;EAmBA;;EAED,eAAe,CAAC,IAAD,EAAO,MAAP,EAAc;IAE5B,IAAI,IAAI,GAAG,OAAO,IAAP,IAAe,UAAf,GAA4B,IAA5B,GAAmC,QAAQ,CAAC,UAAT,CAAoB,IAApB,CAA9C;;IAEA,IAAG,CAAC,IAAJ,EAAS;MACR,OAAO,CAAC,IAAR,CAAa,sDAAb,EAAqE,IAArE;MACA,OAAO,KAAP;IACA,CAHD,MAGK;MACJ,OAAO;QACN,IAAI,EAAC,OAAO,IAAP,IAAe,UAAf,GAA4B,UAA5B,GAAyC,IADxC;QAEN,IAAI,EAAC,IAFC;QAGN,MAAM,EAAC;MAHD,CAAP;IAKA;EACD;;EAED,QAAQ,CAAC,UAAD,EAAa,IAAb,EAAmB,KAAnB,EAAyB;IAChC,IAAI,IAAI,GAAG,IAAX;IAAA,IACA,gBAAgB,GAAG,EADnB;IAAA,IAEA,YAAY,GAAG,KAAK,YAAL,CAAkB,OAAlB,CAA0B,IAA1B,CAFf;;IAIA,IAAG,UAAH,EAAc;MACb,UAAU,CAAC,OAAX,CAAoB,IAAD,IAAU;QAC5B,IAAG,CAAC,IAAI,CAAC,IAAL,CAAU,IAAV,CAAe,IAAf,EAAqB,IAAI,CAAC,YAAL,EAArB,EAA0C,KAA1C,EAAiD,IAAI,CAAC,MAAtD,CAAJ,EAAkE;UACjE,gBAAgB,CAAC,IAAjB,CAAsB;YACrB,IAAI,EAAC,IAAI,CAAC,IADW;YAErB,UAAU,EAAC,IAAI,CAAC;UAFK,CAAtB;QAIA;MACD,CAPD;IAQA;;IAED,IAAG,CAAC,IAAI,CAAC,OAAL,CAAa,QAAjB,EAA0B;MACzB,IAAI,CAAC,OAAL,CAAa,QAAb,GAAwB,EAAxB;IACA;;IAED,IAAG,CAAC,gBAAgB,CAAC,MAArB,EAA4B;MAC3B,IAAI,CAAC,OAAL,CAAa,QAAb,CAAsB,OAAtB,GAAgC,KAAhC;MACA,IAAI,CAAC,UAAL,GAAkB,SAAlB,CAA4B,MAA5B,CAAmC,2BAAnC;;MAEA,IAAG,YAAY,GAAG,CAAC,CAAnB,EAAqB;QACpB,KAAK,YAAL,CAAkB,MAAlB,CAAyB,YAAzB,EAAuC,CAAvC;MACA;IACD,CAPD,MAOK;MACJ,IAAI,CAAC,OAAL,CAAa,QAAb,CAAsB,OAAtB,GAAgC,gBAAhC;;MAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAnB,KAAsC,QAAzC,EAAkD;QACjD,IAAI,CAAC,UAAL,GAAkB,SAAlB,CAA4B,GAA5B,CAAgC,2BAAhC;MACA;;MAED,IAAG,YAAY,IAAI,CAAC,CAApB,EAAsB;QACrB,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB;MACA;IACD;;IAED,OAAO,gBAAgB,CAAC,MAAjB,GAA0B,gBAA1B,GAA6C,IAApD;EACA;;EAED,eAAe,GAAE;IAChB,IAAI,MAAM,GAAG,EAAb;IAEA,KAAK,YAAL,CAAkB,OAAlB,CAA2B,IAAD,IAAU;MACnC,MAAM,CAAC,IAAP,CAAY,IAAI,CAAC,YAAL,EAAZ;IACA,CAFD;IAIA,OAAO,MAAP;EACA;;EAED,eAAe,CAAC,IAAD,EAAM;IACpB,IAAI,YAAJ;;IAEA,IAAG,IAAI,CAAC,OAAL,CAAa,QAAb,IAAyB,IAAI,CAAC,OAAL,CAAa,QAAb,CAAsB,OAAlD,EAA0D;MAEzD,IAAI,CAAC,UAAL,GAAkB,SAAlB,CAA4B,MAA5B,CAAmC,2BAAnC;MACA,IAAI,CAAC,OAAL,CAAa,QAAb,CAAsB,OAAtB,GAAgC,KAAhC;MAEA,YAAY,GAAG,KAAK,YAAL,CAAkB,OAAlB,CAA0B,IAA1B,CAAf;;MAEA,IAAG,YAAY,GAAG,CAAC,CAAnB,EAAqB;QACpB,KAAK,YAAL,CAAkB,MAAlB,CAAyB,YAAzB,EAAuC,CAAvC;MACA;IACD;EACD;;AApS2B;;;AAuS7B,QAAQ,CAAC,UAAT,GAAsB,UAAtB,EAEA;;AACA,QAAQ,CAAC,UAAT,GAAsB,iBAAtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9SA,IAAA,cAAA,GAAe;EAEd,mBAAmB,EAAC,KAFN;EAEW;EACzB,mBAAmB,EAAC,KAHN;EAGW;EACzB,mBAAmB,EAAC,IAJN;EAIU;EACxB,0BAA0B,EAAC,IALb;EAKiB;EAC/B,mBAAmB,EAAC,IANN;EAMU;EACxB,gBAAgB,EAAC,IAPH;EAOO;EAErB,MAAM,EAAC,KATO;EASF;EACZ,SAAS,EAAC,KAVI;EAUC;EACf,SAAS,EAAC,KAXI;EAWC;EAEf,qBAAqB,EAAC,KAbR;EAaa;EAE3B,cAAc,EAAC,KAfD;EAiBd,OAAO,EAAC,EAjBM;EAiBJ;EACV,cAAc,EAAC,EAlBD;EAkBG;EAEjB,IAAI,EAAC,KApBS;EAoBJ;EAEV,WAAW,EAAC,KAtBE;EAsBG;EACjB,sBAAsB,EAAC,KAvBT;EAyBd,oBAAoB,EAAC,GAzBP;EAyBU;EAExB,aAAa,EAAC,KA3BA;EA2BK;EAEnB,KAAK,EAAC,IA7BQ;EA6BJ;EAEV,aAAa,EAAC,MA/BA;EAiCd,SAAS,EAAC,QAjCI;EAiCI;EAElB,aAAa,EAAC,IAnCA;EAmCI;EAElB,cAAc,EAAC,SArCD;EAsCd,gBAAgB,EAAC,OAtCH;EAuCd,oBAAoB,EAAC,CAvCP;EAuCQ;EAEtB,mBAAmB,EAAC,KAzCN;EA0Cd,oBAAoB,EAAC,IA1CP;EA4Cd,sBAAsB,EAAC,MA5CT;EA6Cd,uBAAuB,EAAC,IA7CV;EA+Cd,YAAY,EAAC,KA/CC;EAgDd,iBAAiB,EAAC,IAhDJ;EAiDd,qBAAqB,EAAC,IAjDR;EAkDd,sBAAsB,EAAC,IAlDT;EAoDd,SAAS,EAAC,IApDI;EAsDd,WAAW,EAAC,KAtDE;EAwDd,UAAU,EAAC,IAxDG;EAyDd,iBAAiB,EAAC,KAzDJ;EA0Dd,eAAe,EAAC,KA1DF;EA2Dd,sBAAsB,EAAC,IA3DT;EA6Dd,cAAc,EAAC,EA7DD;EA+Dd,iBAAiB,EAAC;AA/DJ,CAAf;;ACAe,MAAM,WAAN,CAAkB;EAChC,WAAW,CAAC,KAAD,EAAQ,OAAR,EAAiB,QAAQ,GAAG,EAA5B,EAA+B;IACzC,KAAK,KAAL,GAAa,KAAb;IACA,KAAK,OAAL,GAAe,OAAf;IACA,KAAK,kBAAL,GAA0B,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,QAAlB,CAA1B;EACA;;EAED,QAAQ,CAAC,MAAD,EAAS,KAAT,EAAe;IACtB,KAAK,kBAAL,CAAwB,MAAxB,IAAkC,KAAlC;EACA;;EAED,QAAQ,CAAC,cAAD,EAAiB,WAAW,GAAG,EAA/B,EAAkC;IACzC,IAAI,MAAM,GAAG,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,KAAK,kBAAvB,CAAb;IAEA,MAAM,CAAC,MAAP,CAAc,MAAd,EAAsB,cAAtB;;IAEA,IAAG,WAAW,CAAC,mBAAZ,KAAoC,KAApC,IAA6C,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAAnE,EAAuF;MACtF,KAAK,IAAI,GAAT,IAAgB,WAAhB,EAA4B;QAC3B,IAAG,CAAC,MAAM,CAAC,cAAP,CAAsB,GAAtB,CAAJ,EAA+B;UAC9B,OAAO,CAAC,IAAR,CAAa,aAAa,KAAK,OAAlB,GAA4B,UAAzC,EAAqD,GAArD;QACA;MACD;IACD;;IAED,KAAK,IAAI,GAAT,IAAgB,MAAhB,EAAuB;MACtB,IAAG,GAAG,IAAI,WAAV,EAAsB;QACrB,MAAM,CAAC,GAAD,CAAN,GAAc,WAAW,CAAC,GAAD,CAAzB;MACA,CAFD,MAEK;QACJ,IAAG,KAAK,CAAC,OAAN,CAAc,MAAM,CAAC,GAAD,CAApB,CAAH,EAA8B;UAC7B,MAAM,CAAC,GAAD,CAAN,GAAc,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,MAAM,CAAC,GAAD,CAAxB,CAAd;QACA,CAFD,MAEM,IAAG,OAAO,MAAM,CAAC,GAAD,CAAb,KAAuB,QAAvB,IAAmC,MAAM,CAAC,GAAD,CAAN,KAAgB,IAAtD,EAA2D;UAChE,MAAM,CAAC,GAAD,CAAN,GAAc,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,MAAM,CAAC,GAAD,CAAxB,CAAd;QACA,CAFK,MAEA,IAAI,OAAO,MAAM,CAAC,GAAD,CAAb,KAAuB,WAA3B,EAAuC;UAC5C,OAAO,MAAM,CAAC,GAAD,CAAb;QACA;MACD;IACD;;IAED,OAAO,MAAP;EACA;;AAvC+B;;ACGlB,MAAM,QAAN,SAAuB,WAAvB,CAAkC;EAChD,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,eAAL,GAAuB,KAAK,CAAC,UAAN,CAAiB,OAAxC;IACA,KAAK,iBAAL,GAAyB,KAAK,CAAC,aAAN,CAAoB,OAA7C;IACA,KAAK,YAAL,GAAqB,KAAK,CAAC,UAAN,CAAiB,YAAtC;IAEA,KAAK,gBAAL,GAAwB,KAAxB,CAPiB,CAOa;EAC9B,CAT+C,CAYjD;EACA;EACA;;;EAEC,UAAU,GAAE,CACb;EACE;;EAED,SAAS,GAAE,CACZ;EACE;;EAED,YAAY,GAAE,CACf;EACE;;EAGD,wBAAwB,CAAC,OAAD,EAAS,CAClC;EACE;;EAGD,UAAU,GAAE,CACb;EACE;;EAED,aAAa,GAAE,CAChB;EACE;;EAED,YAAY,CAAC,QAAD,EAAU;IACvB;IACE,IAAG,QAAH,EAAY;MACX,QAAQ;IACR;EACD;;EAED,eAAe,CAAC,MAAD,EAAS,WAAT,EAAqB,CACrC;EACE;;EAED,cAAc,CAAC,GAAD,EAAK,CACpB;EACE;;EAED,gBAAgB,CAAC,GAAD,EAAM,KAAN,EAAY,CAC7B;EACE;;EAED,aAAa,CAAC,IAAD,EAAO,GAAP,EAAW,CACzB;EACE;;EAED,UAAU,CAAC,GAAD,EAAM,GAAN,EAAU,CACrB;EACE;;EAED,MAAM,GAAE,CACT;EACE;;EAED,WAAW,CAAC,GAAD,EAAK,CACjB;EACE;;EAED,qBAAqB,CAAC,GAAD,EAAK,CAC3B;EACE;;EAED,WAAW,CAAC,eAAD,EAAiB;IAC7B;IACE,OAAO,EAAP;EACA,CApF+C,CAsFjD;EACA;EACA;;;EAEC,IAAI,GAAE;IACL,OAAO,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,EAAP;EACA;;EAED,QAAQ,CAAC,GAAD,EAAM,KAAN,EAAY;IACnB,IAAI,KAAK,GAAG,GAAG,CAAC,UAAJ,EAAZ;;IAEA,IAAG,KAAK,GAAG,CAAX,EAAa;MACZ,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,oBAApB;MACA,KAAK,CAAC,SAAN,CAAgB,MAAhB,CAAuB,mBAAvB;IACA,CAHD,MAGK;MACJ,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,mBAApB;MACA,KAAK,CAAC,SAAN,CAAgB,MAAhB,CAAuB,oBAAvB;IACA;EACD,CAxG+C,CA0GjD;EACA;EACA;EACA;;;EAEC,KAAK,GAAE;IACR;IACE,KAAK,SAAL;IACA,KAAK,YAAL;EACA;;EAED,MAAM,GAAE;IACT;IACE,KAAK,UAAL;IACA,KAAK,aAAL;EACA;;EAED,QAAQ,CAAC,QAAD,EAAU;IACnB;IACE,KAAK,YAAL;IACA,KAAK,eAAL;EACA;;EAED,mBAAmB,CAAC,GAAD,EAAM,QAAN,EAAgB,SAAhB,EAA0B;IAC5C,IAAI,QAAQ,GAAG,KAAK,IAAL,GAAY,OAAZ,CAAoB,GAApB,CAAf;IAAA,IACA,KAAK,GAAG,GAAG,CAAC,UAAJ,EADR;IAAA,IAEA,MAAM,GAAG,CAFT;IAIA,OAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAqB;MACvC,IAAG,QAAQ,GAAG,CAAC,CAAf,EAAiB;QAEhB,IAAG,OAAO,SAAP,KAAqB,WAAxB,EAAoC;UACnC,SAAS,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,oBAA/B;QACA,CAJe,CAMpB;;;QACI,IAAG,CAAC,SAAJ,EAAc;UACb,IAAG,OAAO,CAAC,SAAR,CAAkB,KAAlB,CAAH,EAA4B;YAC3B,MAAM,GAAG,OAAO,CAAC,QAAR,CAAiB,KAAjB,EAAwB,GAAxB,GAA8B,OAAO,CAAC,QAAR,CAAiB,KAAK,eAAtB,EAAuC,GAA9E;;YAEA,IAAG,MAAM,GAAG,CAAT,IAAc,MAAM,GAAG,KAAK,eAAL,CAAqB,YAArB,GAAoC,KAAK,CAAC,YAApE,EAAiF;cAChF,OAAO;cACP,OAAO,KAAP;YACA;UACD;QACD;;QAED,IAAG,OAAO,QAAP,KAAoB,WAAvB,EAAmC;UAClC,QAAQ,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,mBAA9B;QACA;;QAED,IAAG,QAAQ,KAAK,SAAhB,EAA0B;UACzB,QAAQ,GAAG,KAAK,qBAAL,CAA2B,GAA3B,IAAkC,KAAlC,GAA0C,QAArD;QACA,CAxBe,CA0BpB;;;QACI,KAAK,WAAL,CAAiB,GAAjB,EA3BgB,CA6BpB;;QACI,QAAO,QAAP;UACC,KAAK,QAAL;UACA,KAAK,QAAL;YAEC,IAAG,KAAK,eAAL,CAAqB,YAArB,GAAoC,KAAK,eAAL,CAAqB,SAAzD,IAAsE,KAAK,eAAL,CAAqB,YAA9F,EAA2G;cAC1G,KAAK,eAAL,CAAqB,SAArB,GAAiC,KAAK,eAAL,CAAqB,SAArB,IAAkC,KAAK,CAAC,SAAN,GAAkB,KAAK,eAAL,CAAqB,SAAzE,IAAuF,CAAC,KAAK,eAAL,CAAqB,YAArB,GAAoC,KAAK,CAAC,SAA3C,IAAwD,CAAhL;YACA,CAFD,MAEK;cACJ,KAAK,eAAL,CAAqB,SAArB,GAAiC,KAAK,eAAL,CAAqB,SAArB,GAAkC,KAAK,eAAL,CAAqB,YAArB,GAAoC,CAAvG;YACA;;YAED;;UAED,KAAK,QAAL;YAEC,IAAG,KAAK,eAAL,CAAqB,YAArB,GAAoC,KAAK,eAAL,CAAqB,SAAzD,IAAsE,KAAK,eAAL,CAAqB,YAA9F,EAA2G;cAC1G,KAAK,eAAL,CAAqB,SAArB,GAAiC,KAAK,eAAL,CAAqB,SAArB,IAAkC,KAAK,eAAL,CAAqB,YAArB,GAAoC,KAAK,CAAC,SAA5E,IAAyF,KAAK,CAAC,YAAhI;YACA,CAFD,MAEK;cACJ,KAAK,eAAL,CAAqB,SAArB,GAAiC,KAAK,eAAL,CAAqB,SAArB,GAAiC,KAAK,eAAL,CAAqB,YAAtD,GAAqE,KAAK,CAAC,YAA5G;YACA;;YAED;;UAED,KAAK,KAAL;YACC,KAAK,eAAL,CAAqB,SAArB,GAAiC,KAAK,CAAC,SAAvC;YACA;QAxBF;;QA2BA,OAAO;MAEP,CA3DD,MA2DK;QACJ,OAAO,CAAC,IAAR,CAAa,gCAAb;QACA,MAAM,CAAC,gCAAD,CAAN;MACA;IACD,CAhEM,CAAP;EAiEA;;AAvM+C;;;;ACDlC,MAAM,eAAN,SAA8B,QAA9B,CAAsC;EACpD,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;EACA;;EAED,cAAc,CAAC,GAAD,EAAK;IAClB,GAAG,CAAC,KAAJ,CAAU,OAAV,CAAmB,IAAD,IAAU;MAC3B,GAAG,CAAC,OAAJ,CAAY,WAAZ,CAAwB,IAAI,CAAC,UAAL,EAAxB;MACA,IAAI,CAAC,YAAL;IACA,CAHD;EAIA;;EAED,wBAAwB,CAAC,OAAD,EAAS;IAChC,OAAO,CAAC,OAAR,CAAgB,UAAS,MAAT,EAAgB;MAC/B,MAAM,CAAC,iBAAP;IACA,CAFD;EAGA;;AAhBmD;;ACAtC,MAAM,oBAAN,SAAmC,QAAnC,CAA2C;EACzD,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,OAAL,GAAe,CAAf;IACA,KAAK,QAAL,GAAgB,CAAhB;IACA,KAAK,UAAL,GAAkB,CAAlB;IAEA,KAAK,iBAAL,GAAyB,CAAzB;IACA,KAAK,kBAAL,GAA0B,CAA1B;IAEA,KAAK,WAAL,GAAmB,CAAnB;IACA,KAAK,YAAL,GAAoB,CAApB;IAEA,KAAK,aAAL,GAAqB,CAArB;IAEA,KAAK,YAAL,GAAoB,GAApB,CAfiB,CAeO;;IAExB,KAAK,WAAL,GAAmB,IAAnB;IAEA,KAAK,WAAL,GAAmB,KAAnB;IACA,KAAK,SAAL,GAAiB,KAAjB;IAEA,KAAK,OAAL,GAAe,EAAf;EACA;;EAED,UAAU,GAAE;IACX,KAAK,kBAAL;IACA,KAAK,WAAL;IACA,KAAK,gBAAL;EACA;;EAED,kBAAkB,GAAE;IACnB,IAAI,OAAO,GAAG,KAAK,OAAL,CAAa,SAAb,CAAd;IAAA,IACA,MAAM,GAAG,KADT;IAAA,IAEA,EAAE,GAAG,IAFL;;IAIA,IAAG,KAAK,OAAL,CAAa,QAAb,KAA0B,cAA7B,EAA4C;MAC3C,OAAO,CAAC,IAAR,CAAa,wEAAb;MACA,EAAE,GAAG,KAAL;IACA;;IAED,IAAG,KAAK,OAAL,CAAa,kBAAb,CAAH,EAAoC;MACnC,OAAO,CAAC,IAAR,CAAa,kEAAb;MACA,EAAE,GAAG,KAAL;IACA;;IAED,IAAG,KAAK,OAAL,CAAa,KAAb,CAAH,EAAuB;MACtB,OAAO,CAAC,IAAR,CAAa,4EAAb;MACA,EAAE,GAAG,KAAL;IACA;;IAED,IAAG,OAAH,EAAW;MACV,MAAM,GAAG,OAAO,CAAC,IAAR,CAAc,GAAD,IAAS;QAC9B,OAAO,GAAG,CAAC,MAAX;MACA,CAFQ,CAAT;;MAIA,IAAG,MAAH,EAAU;QACT,OAAO,CAAC,IAAR,CAAa,8DAAb;QACA,EAAE,GAAG,KAAL;MACA;IACD,CA7BkB,CA+BrB;IACA;IACA;;;IAEE,OAAO,EAAP;EACA;;EAED,WAAW,GAAE;IACZ,KAAK,SAAL,GAAiB,KAAK,OAAL,CAAa,QAAb,EAAuB,UAAvB,CAAkC,SAAlC,CAAjB;EACA;;EAED,gBAAgB,GAAE;IACjB,KAAK,SAAL,CAAe,iBAAf,EAAkC,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAAlC;IACA,KAAK,SAAL,CAAe,gBAAf,EAAiC,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAAjC;EACA;;EAED,gBAAgB,GAAE;IACjB,KAAK,WAAL,GAAmB,IAAnB;EACA,CAjFwD,CAmF1D;EACA;EACA;;;EAEC,aAAa,CAAC,GAAD,EAAM,KAAN,EAAY;IACxB,KAAK,UAAL;EACA;;EAGD,aAAa,CAAC,IAAD,EAAO,GAAP,EAAW;IACvB,IAAG,KAAK,UAAL,IAAmB,IAAtB,EAA2B;MAC1B,KAAK,UAAL,GAAkB,IAAlB;MAEA,KAAK,MAAL,CAAY,IAAI,IAAI,KAAK,iBAAL,GAAyB,KAAK,YAAlC,CAAhB;IACA;EACD;;EAED,gBAAgB,GAAE;IACjB,IAAI,MAAM,GAAG,KAAK,eAAL,CAAqB,WAAlC;IAEA,KAAK,KAAL,CAAW,aAAX,CAAyB,cAAzB,CAAwC,OAAxC,CAAiD,MAAD,IAAY;MAC3D,IAAG,MAAM,CAAC,OAAV,EAAkB;QACjB,IAAI,KAAK,GAAG,MAAM,CAAC,QAAP,EAAZ;;QAEA,IAAG,KAAK,GAAG,MAAX,EAAkB;UACjB,MAAM,GAAG,KAAT;QACA;MACD;IACD,CARD;IAUA,KAAK,YAAL,GAAoB,MAAM,GAAG,CAA7B;EACA;;EAED,eAAe,CAAC,MAAD,EAAS,WAAT,EAAqB;IACnC,IAAI,GAAG,GAAG;MACT,IAAI,EAAC,KAAK,OADD;MAET,OAAO,EAAC,KAAK,OAFJ;MAGT,QAAQ,EAAC,KAAK;IAHL,CAAV;IAAA,IAKA,MAAM,GAAG,CALT;;IAQA,IAAG,MAAM,IAAI,CAAC,KAAK,WAAnB,EAA+B;MAC9B;IACA;;IAED,KAAK,KAAL;IAEA,KAAK,gBAAL;IAEA,KAAK,UAAL,GAAkB,KAAK,eAAL,CAAqB,UAAvC;IAEA,KAAK,iBAAL,GAAyB,KAAK,UAAL,GAAkB,KAAK,YAAhD;IACA,KAAK,kBAAL,GAA0B,KAAK,UAAL,GAAkB,KAAK,eAAL,CAAqB,WAAvC,GAAqD,KAAK,YAApF;IAEA,KAAK,KAAL,CAAW,aAAX,CAAyB,cAAzB,CAAwC,OAAxC,CAAiD,MAAD,IAAY;MAC3D,IAAI,MAAM,GAAG,EAAb;;MAEA,IAAG,MAAM,CAAC,OAAV,EAAkB;QACjB,IAAI,KAAK,GAAG,MAAM,CAAC,QAAP,EAAZ;QAEA,MAAM,CAAC,OAAP,GAAiB,MAAjB;QACA,MAAM,CAAC,QAAP,GAAkB,MAAM,GAAG,KAA3B;QAEA,MAAM,CAAC,KAAP,GAAe,KAAf;;QAEA,IAAI,KAAK,SAAT,EAAoB;UACnB,MAAM,CAAC,YAAP,GAAsB,MAAM,CAAC,OAAP,CAAe,OAAf,GAAyB,MAAM,CAAC,OAAP,CAAe,OAAf,CAAuB,YAAhD,GAA+D,IAArF;QACA;;QAED,IAAI,MAAM,GAAG,KAAT,GAAiB,KAAK,iBAAvB,IAA8C,MAAM,GAAG,KAAK,kBAA/D,EAAmF;UACvF;UAEK,IAAG,KAAK,OAAL,IAAgB,CAAC,CAApB,EAAsB;YACrB,KAAK,OAAL,GAAe,KAAK,OAAL,CAAa,MAA5B;YACA,KAAK,WAAL,GAAmB,MAAnB;UACA;;UAED,KAAK,QAAL,GAAgB,KAAK,OAAL,CAAa,MAA7B;QACA,CATD,MASK;UACT;UACK,IAAG,KAAK,OAAL,KAAiB,CAAC,CAArB,EAAuB;YACtB,KAAK,YAAL,IAAqB,KAArB;UACA;QACD;;QAED,KAAK,OAAL,CAAa,IAAb,CAAkB,MAAlB;QAEA,MAAM,CAAC,OAAP,CAAe,OAAf,GAAyB,MAAzB;QAEA,MAAM,IAAI,KAAV;MACA;IACD,CArCD;IAuCA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,WAAxB,GAAsC,KAAK,WAAL,GAAmB,IAAzD;IACA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,YAAxB,GAAuC,KAAK,YAAL,GAAoB,IAA3D;IAEA,KAAK,WAAL,GAAmB,IAAnB;;IAEA,IAAG,CAAC,WAAJ,EAAgB;MACf,IAAG,CAAC,MAAD,IAAW,KAAK,aAAL,CAAmB,GAAnB,CAAd,EAAsC;QACrC,KAAK,gBAAL;MACA;IACD;;IAED,KAAK,eAAL,CAAqB,UAArB,GAAkC,KAAK,UAAvC;EACA;;EAED,cAAc,CAAC,GAAD,EAAK;IAClB,IAAG,KAAK,WAAR,EAAoB;MACnB,KAAK,aAAL,CAAmB,GAAnB;IACA,CAFD,MAEK;MACJ,GAAG,CAAC,KAAJ,CAAU,OAAV,CAAmB,IAAD,IAAU;QAC3B,GAAG,CAAC,OAAJ,CAAY,WAAZ,CAAwB,IAAI,CAAC,UAAL,EAAxB;QACA,IAAI,CAAC,YAAL;MACA,CAHD;IAIA;EACD;;EAED,gBAAgB,CAAC,GAAD,EAAM,KAAN,EAAY;IAC3B,KAAK,eAAL,CAAqB,GAArB,EAA0B,KAA1B;EACA;;EAED,wBAAwB,CAAC,OAAD,EAAS;IAChC,KAAI,IAAI,CAAC,GAAG,KAAK,OAAjB,EAA0B,CAAC,IAAI,KAAK,QAApC,EAA8C,CAAC,EAA/C,EAAkD;MACjD,KAAK,OAAL,CAAa,CAAb,EAAgB,iBAAhB;IACA;EACD,CAlNwD,CAoN1D;EACA;EACA;;;EAEC,YAAY,GAAE;IACb,KAAK,WAAL,GAAmB,KAAnB;EACA;;EAED,KAAK,GAAE;IACN,KAAK,OAAL,GAAe,EAAf;IAEA,KAAK,OAAL,GAAe,CAAC,CAAhB;IACA,KAAK,QAAL,GAAgB,CAAhB;IAEA,KAAK,iBAAL,GAAyB,CAAzB;IACA,KAAK,kBAAL,GAA0B,CAA1B;IACA,KAAK,WAAL,GAAmB,CAAnB;IACA,KAAK,YAAL,GAAoB,CAApB;EACA;;EAED,UAAU,GAAE;IACX,IAAI,MAAM,GAAG,KAAb;IAAA,IACA,GADA;IAAA,IACK,KADL;;IAGA,IAAG,KAAK,SAAR,EAAkB;MACjB,KAAK,KAAL,CAAW,aAAX,CAAyB,cAAzB,CAAwC,OAAxC,CAAiD,MAAD,IAAY;QAC3D,IAAG,CAAC,MAAM,CAAC,UAAP,CAAkB,KAAnB,IAA4B,MAAM,CAAC,OAAtC,EAA8C;UAC7C,MAAM,GAAG,IAAT;QACA;MACD,CAJD;;MAMA,IAAG,MAAM,IAAI,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,GAAuC,MAApD,EAA2D;QAC1D,KAAK,kBAAL,GAA0B,KAAK,UAAL,GAAkB,KAAK,eAAL,CAAqB,WAAvC,GAAqD,KAAK,YAApF;QAEA,GAAG,GAAG,KAAK,KAAL,CAAW,aAAX,EAA0B,CAAC,CAAD,CAA1B,EAA+B,EAA/B,EAAmC,MAAM;UAC9C,OAAO,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,EAAP;QACA,CAFK,EAEH,CAFG,CAAN;;QAIA,IAAG,GAAH,EAAO;UACN,KAAK,GAAG,GAAG,CAAC,UAAJ,EAAR;UAEA,GAAG,CAAC,aAAJ;UAEA,KAAK,YAAL,CAAkB,WAAlB,CAA8B,KAA9B;;UAEA,KAAI,IAAI,MAAM,GAAG,CAAjB,EAAoB,MAAM,GAAG,GAAG,CAAC,KAAJ,CAAU,MAAvC,EAA+C,MAAM,EAArD,EAAwD;YACvD,IAAI,IAAI,GAAG,GAAG,CAAC,KAAJ,CAAU,MAAV,CAAX;YACA,KAAK,CAAC,WAAN,CAAkB,IAAI,CAAC,UAAL,EAAlB;YAEA,IAAI,CAAC,MAAL,CAAY,iBAAZ;UACA;;UAED,KAAK,CAAC,UAAN,CAAiB,WAAjB,CAA6B,KAA7B;UAEA,KAAK,eAAL,CAAqB,KAArB,EAA4B,IAA5B;QACA;MACD;IACD,CAjCD,MAiCK;MACJ,IAAG,KAAK,OAAL,CAAa,QAAb,MAA2B,YAA9B,EAA2C;QAC1C,KAAK,aAAL;QACA,KAAK,eAAL,CAAqB,KAArB,EAA4B,IAA5B;MACA;IACD;EACD;;EAED,aAAa,CAAC,GAAD,EAAK;IACjB,IAAI,KAAK,GAAG,IAAZ;;IAEA,IAAG,GAAG,CAAC,IAAJ,CAAS,MAAT,KAAoB,KAAK,OAAL,CAAa,MAAjC,IAA2C,GAAG,CAAC,OAAJ,KAAgB,KAAK,OAAhE,IAA2E,GAAG,CAAC,QAAJ,KAAiB,KAAK,QAApG,EAA6G;MAC5G,OAAO,IAAP;IACA;;IAED,GAAG,CAAC,IAAJ,CAAS,OAAT,CAAiB,CAAC,GAAD,EAAM,CAAN,KAAY;MAC5B,IAAG,GAAG,KAAK,KAAK,OAAL,CAAa,CAAb,CAAX,EAA2B;QAC1B,KAAK,GAAG,KAAR;MACA;IACD,CAJD;IAMA,OAAO,CAAC,KAAR;EACA;;EAED,gBAAgB,GAAE;IACjB,IAAI,IAAI,GAAG,KAAK,cAAL,EAAX;IACA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;MACrB,KAAK,eAAL,CAAqB,GAArB,EAA0B,IAA1B;IACA,CAFD;EAGA;;EAED,cAAc,GAAE;IACf,IAAI,CAAC,KAAK,WAAV,EAAsB;MACrB,KAAK,WAAL,GAAmB,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,EAAnB;IACA;;IAED,OAAO,KAAK,WAAZ;EACA;;EAED,MAAM,CAAC,IAAD,EAAM;IACX,KAAK,iBAAL,IAA0B,IAA1B;IACA,KAAK,kBAAL,IAA2B,IAA3B;;IAEA,IAAG,IAAI,CAAC,GAAL,CAAS,IAAT,IAAkB,KAAK,YAAL,GAAoB,CAAzC,EAA4C;MAC3C,KAAK,eAAL;IACA,CAFD,MAEK;MACJ,IAAG,IAAI,GAAG,CAAV,EAAY;QACf;QACI,KAAK,WAAL;QACA,KAAK,aAAL;MACA,CAJD,MAIK;QACR;QACI,KAAK,UAAL;QACA,KAAK,cAAL;MACA;IACD;EACD;;EAED,iBAAiB,CAAE,KAAF,EAAS,GAAT,EAAc,IAAd,EAAmB;IACnC,KAAI,IAAI,CAAC,GAAG,KAAZ,EAAmB,CAAC,GAAG,GAAvB,EAA4B,CAAC,EAA7B,EAAgC;MAC/B,IAAI,MAAM,GAAG,KAAK,OAAL,CAAa,CAAb,CAAb;MAEA,MAAM,CAAC,OAAP,CAAe,OAAf,CAAuB,OAAvB,IAAkC,IAAlC;MACA,MAAM,CAAC,OAAP,CAAe,OAAf,CAAuB,QAAvB,IAAmC,IAAnC;IACA;EACD;;EAED,WAAW,GAAE;IACZ,IAAI,OAAO,GAAG,KAAd;IAAA,IACA,OAAO,GAAG,IADV;;IAGA,OAAM,OAAN,EAAc;MAEb,IAAI,MAAM,GAAG,KAAK,OAAL,CAAa,KAAK,QAAL,GAAgB,CAA7B,CAAb;;MAEA,IAAG,MAAH,EAAU;QACT,IAAG,MAAM,CAAC,OAAP,CAAe,OAAf,CAAuB,OAAvB,IAAkC,KAAK,kBAA1C,EAA6D;UAC5D,OAAO,GAAG,IAAV;UAEA,KAAK,cAAL,GAAsB,OAAtB,CAA+B,GAAD,IAAS;YACtC,IAAG,GAAG,CAAC,IAAJ,KAAa,OAAhB,EAAwB;cACvB,IAAI,IAAI,GAAG,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAX;cACA,GAAG,CAAC,UAAJ,GAAiB,WAAjB,CAA6B,IAAI,CAAC,UAAL,EAA7B;cACA,IAAI,CAAC,YAAL;YACA;UACD,CAND;UAQA,KAAK,0BAAL,CAAgC,MAAhC;UAEA,KAAK,QAAL,GAb4D,CAa5C;;UAEhB,IAAG,KAAK,QAAL,IAAkB,KAAK,OAAL,CAAa,MAAb,GAAsB,CAA3C,EAA8C;YAC7C,KAAK,YAAL,GAAoB,CAApB;UACA,CAFD,MAEK;YACJ,KAAK,YAAL,IAAqB,MAAM,CAAC,QAAP,EAArB;UACA;QACD,CApBD,MAoBK;UACJ,OAAO,GAAG,KAAV;QACA;MACD,CAxBD,MAwBK;QACJ,OAAO,GAAG,KAAV;MACA;IACD;;IAED,IAAG,OAAH,EAAW;MACV,KAAK,YAAL,CAAkB,KAAlB,CAAwB,YAAxB,GAAuC,KAAK,YAAL,GAAoB,IAA3D;IACA;EACD;;EAED,UAAU,GAAE;IACX,IAAI,OAAO,GAAG,KAAd;IAAA,IACA,OAAO,GAAG,IADV;;IAGA,OAAM,OAAN,EAAc;MACb,IAAI,MAAM,GAAG,KAAK,OAAL,CAAa,KAAK,OAAL,GAAe,CAA5B,CAAb;;MAEA,IAAG,MAAH,EAAU;QACT,IAAG,MAAM,CAAC,OAAP,CAAe,OAAf,CAAuB,QAAvB,IAAmC,KAAK,iBAA3C,EAA6D;UAC5D,OAAO,GAAG,IAAV;UAEA,KAAK,cAAL,GAAsB,OAAtB,CAA+B,GAAD,IAAS;YACtC,IAAG,GAAG,CAAC,IAAJ,KAAa,OAAhB,EAAwB;cACvB,IAAI,IAAI,GAAG,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAX;cACA,GAAG,CAAC,UAAJ,GAAiB,OAAjB,CAAyB,IAAI,CAAC,UAAL,EAAzB;cACA,IAAI,CAAC,YAAL;YACA;UACD,CAND;UAQA,KAAK,OAAL,GAX4D,CAW7C;;UAEf,IAAG,KAAK,OAAL,IAAgB,CAAnB,EAAqB;YAAA;YACpB,KAAK,WAAL,GAAmB,CAAnB;UACA,CAFD,MAEK;YACJ,KAAK,WAAL,IAAoB,MAAM,CAAC,QAAP,EAApB;UACA;;UAED,IAAI,IAAI,GAAG,KAAK,0BAAL,CAAgC,MAAhC,CAAX;;UAEA,IAAG,IAAH,EAAQ;YACP,KAAK,UAAL,GAAkB,KAAK,eAAL,CAAqB,UAArB,GAAkC,KAAK,eAAL,CAAqB,UAArB,GAAkC,IAAtF;YACA,KAAK,YAAL,IAAqB,IAArB;UACA;QAED,CA1BD,MA0BK;UACJ,OAAO,GAAG,KAAV;QACA;MACD,CA9BD,MA8BK;QACJ,OAAO,GAAG,KAAV;MACA;IACD;;IAED,IAAG,OAAH,EAAW;MACV,KAAK,YAAL,CAAkB,KAAlB,CAAwB,WAAxB,GAAsC,KAAK,WAAL,GAAmB,IAAzD;IACA;EACD;;EAED,cAAc,GAAE;IACf,IAAI,OAAO,GAAG,KAAd;IAAA,IACA,OAAO,GAAG,IADV;;IAGA,OAAM,OAAN,EAAc;MACb,IAAI,MAAM,GAAG,KAAK,OAAL,CAAa,KAAK,QAAlB,CAAb;;MAEA,IAAG,MAAH,EAAU;QACT,IAAG,MAAM,CAAC,OAAP,CAAe,OAAf,CAAuB,OAAvB,GAAiC,KAAK,kBAAzC,EAA4D;UAC3D,OAAO,GAAG,IAAV;UAEA,KAAK,cAAL,GAAsB,OAAtB,CAA+B,GAAD,IAAS;YACtC,IAAG,GAAG,CAAC,IAAJ,KAAa,OAAhB,EAAwB;cACvB,IAAI,IAAI,GAAG,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAX;;cAEA,IAAI;gBACH,GAAG,CAAC,UAAJ,GAAiB,WAAjB,CAA6B,IAAI,CAAC,UAAL,EAA7B;cACA,CAFD,CAEE,OAAO,EAAP,EAAW;gBACZ,OAAO,CAAC,IAAR,CAAa,0BAAb,EAAyC,EAAE,CAAC,OAA5C;cACA;YACD;UACD,CAVD;UAYA,KAAK,YAAL,IAAqB,MAAM,CAAC,QAAP,EAArB;UACA,KAAK,QAAL;QACA,CAjBD,MAiBK;UACJ,OAAO,GAAG,KAAV;QACA;MACD,CArBD,MAqBK;QACJ,OAAO,GAAG,KAAV;MACA;IACD;;IAED,IAAG,OAAH,EAAW;MACV,KAAK,YAAL,CAAkB,KAAlB,CAAwB,YAAxB,GAAuC,KAAK,YAAL,GAAoB,IAA3D;IACA;EACD;;EAED,aAAa,GAAE;IACd,IAAI,OAAO,GAAG,KAAd;IAAA,IACA,OAAO,GAAG,IADV;;IAGA,OAAM,OAAN,EAAc;MACb,IAAI,MAAM,GAAG,KAAK,OAAL,CAAa,KAAK,OAAlB,CAAb;;MAEA,IAAG,MAAH,EAAU;QACT,IAAG,MAAM,CAAC,OAAP,CAAe,OAAf,CAAuB,QAAvB,GAAkC,KAAK,iBAA1C,EAA4D;UAC3D,OAAO,GAAG,IAAV;UAEA,KAAK,cAAL,GAAsB,OAAtB,CAA+B,GAAD,IAAS;YACtC,IAAG,GAAG,CAAC,IAAJ,KAAa,OAAhB,EAAwB;cACvB,IAAI,IAAI,GAAG,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAX;;cAEA,IAAI;gBACH,GAAG,CAAC,UAAJ,GAAiB,WAAjB,CAA6B,IAAI,CAAC,UAAL,EAA7B;cACA,CAFD,CAEE,OAAO,EAAP,EAAW;gBACZ,OAAO,CAAC,IAAR,CAAa,yBAAb,EAAwC,EAAE,CAAC,OAA3C;cACA;YACD;UACD,CAVD;UAYA,KAAK,WAAL,IAAoB,MAAM,CAAC,QAAP,EAApB;UACA,KAAK,OAAL;QACA,CAjBD,MAiBK;UACJ,OAAO,GAAG,KAAV;QACA;MACD,CArBD,MAqBK;QACJ,OAAO,GAAG,KAAV;MACA;IACD;;IAED,IAAG,OAAH,EAAW;MACV,KAAK,YAAL,CAAkB,KAAlB,CAAwB,WAAxB,GAAsC,KAAK,WAAL,GAAmB,IAAzD;IACA;EACD;;EAED,0BAA0B,CAAC,MAAD,EAAQ;IACjC,IAAI,QAAJ,EAAc,SAAd;;IAEA,IAAG,MAAM,CAAC,OAAP,CAAe,OAAf,CAAuB,YAA1B,EAAuC;MACtC,MAAM,CAAC,iBAAP;MAEA,QAAQ,GAAG,MAAM,CAAC,QAAP,EAAX;MACA,SAAS,GAAG,QAAQ,GAAG,MAAM,CAAC,OAAP,CAAe,OAAf,CAAuB,KAA9C;;MAEA,IAAG,SAAH,EAAa;QACZ,MAAM,CAAC,OAAP,CAAe,OAAf,CAAuB,QAAvB,IAAmC,SAAnC;QACA,MAAM,CAAC,OAAP,CAAe,OAAf,CAAuB,KAAvB,GAA+B,QAA/B;QACA,KAAK,iBAAL,CAAuB,KAAK,OAAL,CAAa,OAAb,CAAqB,MAArB,IAA+B,CAAtD,EAAyD,KAAK,OAAL,CAAa,MAAtE,EAA8E,SAA9E;MACA;;MAED,MAAM,CAAC,OAAP,CAAe,OAAf,CAAuB,YAAvB,GAAsC,KAAtC;IACA;;IAED,OAAO,SAAP;EACA;;EAED,aAAa,CAAC,GAAD,EAAK;IACjB,IAAG,GAAG,CAAC,IAAJ,KAAa,OAAhB,EAAwB;MACvB,GAAG,CAAC,OAAJ,CAAY,OAAZ,GAAsB;QACrB,OAAO,EAAC,KAAK,OADQ;QAErB,QAAQ,EAAC,KAAK;MAFO,CAAtB;;MAKA,KAAI,IAAI,CAAC,GAAG,KAAK,OAAjB,EAA0B,CAAC,IAAI,KAAK,QAApC,EAA8C,CAAC,EAA/C,EAAkD;QACjD,IAAI,MAAM,GAAG,KAAK,OAAL,CAAa,CAAb,CAAb;;QAEA,IAAG,MAAM,IAAI,MAAM,CAAC,OAApB,EAA4B;UAC3B,IAAI,IAAI,GAAG,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAX;UAEA,GAAG,CAAC,UAAJ,GAAiB,WAAjB,CAA6B,IAAI,CAAC,UAAL,EAA7B;UACA,IAAI,CAAC,YAAL;QACA;MACD;IACD;EACD;;EAED,eAAe,CAAC,GAAD,EAAM,KAAN,EAAY;IAC1B,IAAG,GAAG,CAAC,IAAJ,KAAa,OAAhB,EAAwB;MACvB,IAAG,KAAK,IAAI,CAAC,GAAG,CAAC,OAAJ,CAAY,OAAtB,IAAiC,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAoB,OAApB,KAAgC,KAAK,OAAtE,IAAiF,GAAG,CAAC,OAAJ,CAAY,OAAZ,CAAoB,QAApB,KAAiC,KAAK,QAA1H,EAAmI;QAClI,IAAI,KAAK,GAAG,GAAG,CAAC,UAAJ,EAAZ;;QACA,OAAM,KAAK,CAAC,UAAZ,EAAwB,KAAK,CAAC,WAAN,CAAkB,KAAK,CAAC,UAAxB;;QAExB,KAAK,aAAL,CAAmB,GAAnB;MACA;IACD;EACD;;AAviBwD;;ACS3C,MAAM,aAAN,SAA4B,WAA5B,CAAwC;EAEtD,WAAW,CAAE,KAAF,EAAQ;IAClB,MAAM,KAAN;IAEA,KAAK,mBAAL,GAA2B,KAA3B;IACA,KAAK,cAAL,GAAsB,IAAtB;IACA,KAAK,OAAL,GAAe,IAAf,CALkB,CAKG;;IACrB,KAAK,OAAL,GAAe,EAAf,CANkB,CAMA;;IAClB,KAAK,cAAL,GAAsB,EAAtB,CAPkB,CAOO;;IACzB,KAAK,cAAL,GAAsB,EAAtB,CARkB,CAQO;;IACzB,KAAK,UAAL,GAAkB,CAAlB;IACA,KAAK,WAAL,GAAmB,IAAI,WAAJ,CAAgB,KAAK,KAArB,EAA4B,mBAA5B,EAAiD,oBAAjD,CAAnB;IAEA,KAAK,WAAL,GAAmB,KAAnB,CAZkB,CAYO;;IACzB,KAAK,iBAAL,GAAyB,IAAzB,CAbkB,CAaY;;IAE9B,KAAK,QAAL,GAAgB,IAAhB;EACA,CAlBqD,CAoBvD;;;EAEC,UAAU,GAAE;IACX,KAAK,kBAAL;IAEA,KAAK,cAAL,GAAsB,KAAK,oBAAL,EAAtB;IACA,KAAK,OAAL,GAAe,KAAK,mBAAL,EAAf;IAEA,KAAK,OAAL,CAAa,YAAb,CAA0B,KAAK,cAA/B,EAA+C,KAAK,OAAL,CAAa,UAA5D;IAEA,KAAK,SAAL,CAAe,mBAAf,EAAoC,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAApC;EACA;;EAED,kBAAkB,GAAE;IACnB,IAAI,WAAJ;IAEA,IAAI,SAAS,GAAG;MACf,WAAWS,oBADI;MAEf,SAASC;IAFM,CAAhB;;IAKA,IAAG,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAA1B,KAA+C,QAAlD,EAA2D;MAC1D,WAAW,GAAG,SAAS,CAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAApB,CAAvB;IACA,CAFD,MAEK;MACJ,WAAW,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAjC;IACA;;IAED,IAAG,WAAH,EAAe;MACd,KAAK,QAAL,GAAgB,IAAI,WAAJ,CAAgB,KAAK,KAArB,EAA4B,KAAK,OAAjC,EAA0C,KAAK,YAA/C,CAAhB;MACA,KAAK,QAAL,CAAc,UAAd;IACA,CAHD,MAGK;MACJ,OAAO,CAAC,KAAR,CAAc,mCAAd,EAAmD,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAtE;IACA;EACD;;EAGD,oBAAoB,GAAG;IACtB,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;IAEA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,mBAAjB;IACA,EAAE,CAAC,YAAH,CAAgB,MAAhB,EAAwB,KAAxB;IAEA,OAAO,EAAP;EACA;;EAED,mBAAmB,GAAG;IACrB,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;IAEA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,kBAAjB;IACA,EAAE,CAAC,YAAH,CAAgB,MAAhB,EAAwB,UAAxB;;IAEA,IAAG,CAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAvB,EAAqC;MACpC,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,yBAAjB;IACA;;IAED,OAAO,EAAP;EACA,CA5EqD,CA8EvD;;;EACC,UAAU,GAAE;IACX,OAAO,KAAK,OAAZ;EACA,CAjFqD,CAmFvD;;;EACC,iBAAiB,GAAE;IAClB,OAAO,KAAK,cAAZ;EACA,CAtFqD,CAwFvD;;;EACC,gBAAgB,CAAC,IAAD,EAAM;IACrB,IAAI,SAAS,GAAG,CAAhB;IAAA,IACA,WAAW,GAAG,KAAK,OAAL,CAAa,WAAb,GAA2B,KAAK,KAAL,CAAW,OAAX,CAAmB,WAD5D,CADqB,CAIvB;;IACE,KAAK,OAAL,CAAa,UAAb,GAA0B,IAA1B,CALqB,CAOvB;;IACE,IAAG,IAAI,GAAG,WAAV,EAAsB;MACrB,SAAS,GAAG,IAAI,GAAG,WAAnB;MACA,KAAK,OAAL,CAAa,KAAb,CAAmB,UAAnB,GAAiC,CAAE,SAAH,GAAiB,IAAjD;IACA,CAHD,MAGK;MACJ,KAAK,OAAL,CAAa,KAAb,CAAmB,UAAnB,GAAgC,CAAhC;IACA;;IAED,KAAK,UAAL,GAAkB,IAAlB;IAEA,KAAK,QAAL,CAAc,aAAd,CAA4B,IAA5B;EACA,CA3GqD,CA6GvD;;;EACC,0BAA0B,CAAC,IAAD,EAAM;IAC/B,IAAI,IAAI,GAAG,EAAX;IAAA,IACA,WAAW,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,sBADjC;IAAA,IAEA,GAFA;IAAA,IAEK,MAFL;;IAIA,IAAG,IAAI,IAAI,IAAI,CAAC,MAAhB,EAAuB;MAEtB,GAAG,GAAG,IAAI,CAAC,CAAD,CAAV;;MAEA,KAAI,IAAI,GAAR,IAAe,GAAf,EAAmB;QAClB,IAAI,GAAG,GAAG;UACT,KAAK,EAAC,GADG;UAET,KAAK,EAAC;QAFG,CAAV;QAKA,IAAI,KAAK,GAAG,GAAG,CAAC,GAAD,CAAf;;QAEA,QAAO,OAAO,KAAd;UACC,KAAK,WAAL;YACC,MAAM,GAAG,QAAT;YACA;;UAED,KAAK,SAAL;YACC,MAAM,GAAG,SAAT;YACA;;UAED,KAAK,QAAL;YACC,IAAG,KAAK,CAAC,OAAN,CAAc,KAAd,CAAH,EAAwB;cACvB,MAAM,GAAG,OAAT;YACA,CAFD,MAEK;cACJ,MAAM,GAAG,QAAT;YACA;;YACD;;UAED;YACC,IAAG,CAAC,KAAK,CAAC,KAAD,CAAN,IAAiB,KAAK,KAAK,EAA9B,EAAiC;cAChC,MAAM,GAAG,QAAT;YACA,CAFD,MAEK;cACJ,IAAG,KAAK,CAAC,KAAN,CAAY,sCAAZ,CAAH,EAAuD;gBACtD,MAAM,GAAG,UAAT;cACA,CAFD,MAEK;gBACJ,MAAM,GAAG,QAAT;cACA;YACD;;YACD;QA3BF;;QA8BA,GAAG,CAAC,MAAJ,GAAa,MAAb;QAEA,IAAI,CAAC,IAAL,CAAU,GAAV;MACA;;MAED,IAAG,WAAH,EAAe;QAEd,QAAO,OAAO,WAAd;UACC,KAAK,UAAL;YACC,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,GAA6B,WAAW,CAAC,IAAZ,CAAiB,KAAK,KAAtB,EAA6B,IAA7B,CAA7B;YACA;;UAED,KAAK,QAAL;YACC,IAAG,KAAK,CAAC,OAAN,CAAc,WAAd,CAAH,EAA8B;cAC7B,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;gBACrB,IAAI,KAAK,GAAG,WAAW,CAAC,IAAZ,CAAkB,GAAD,IAAS;kBACrC,OAAO,GAAG,CAAC,KAAJ,KAAc,GAAG,CAAC,KAAzB;gBACA,CAFW,CAAZ;;gBAIA,IAAG,KAAH,EAAS;kBACR,MAAM,CAAC,MAAP,CAAc,GAAd,EAAmB,KAAnB;gBACA;cACD,CARD;YAUA,CAXD,MAWK;cACJ,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;gBACrB,IAAG,WAAW,CAAC,GAAG,CAAC,KAAL,CAAd,EAA0B;kBACzB,MAAM,CAAC,MAAP,CAAc,GAAd,EAAmB,WAAW,CAAC,GAAG,CAAC,KAAL,CAA9B;gBACA;cACD,CAJD;YAKA;;YAED,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,GAA6B,IAA7B;YACA;QA1BF;MA4BA,CA9BD,MA8BK;QACJ,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB,GAA6B,IAA7B;MACA;;MAED,KAAK,UAAL,CAAgB,KAAK,KAAL,CAAW,OAAX,CAAmB,OAAnC;IACA;EACD;;EAED,UAAU,CAAC,IAAD,EAAO,GAAP,EAAW;IACpB,OAAM,KAAK,cAAL,CAAoB,UAA1B,EAAsC,KAAK,cAAL,CAAoB,WAApB,CAAgC,KAAK,cAAL,CAAoB,UAApD;;IAEtC,KAAK,OAAL,GAAe,EAAf;IACA,KAAK,cAAL,GAAsB,EAAtB;IACA,KAAK,cAAL,GAAsB,EAAtB;IAEA,KAAK,QAAL,CAAc,iBAAd;IAEA,IAAI,CAAC,OAAL,CAAa,CAAC,GAAD,EAAM,CAAN,KAAY;MACxB,KAAK,UAAL,CAAgB,GAAhB;IACA,CAFD;;IAIA,KAAK,eAAL;;IAEA,KAAK,QAAL,CAAc,gBAAd;IAEA,KAAK,eAAL,CAAqB,KAArB,EAA4B,IAA5B;IAEA,KAAK,MAAL,CAAY,IAAZ;EACA;;EAED,UAAU,CAAC,UAAD,EAAa,MAAb,EAAqB,YAArB,EAAkC;IAC3C,IAAI,MAAM,GAAG,IAAI,MAAJ,CAAW,UAAX,EAAuB,IAAvB,CAAb;IAAA,IACA,KAAK,GAAG,MAAM,CAAC,UAAP,EADR;IAAA,IAEA,KAAK,GAAG,YAAY,GAAG,KAAK,eAAL,CAAqB,YAArB,CAAH,GAAwC,YAF5D;;IAIA,IAAG,YAAY,IAAI,KAAK,GAAG,CAAC,CAA5B,EAA8B;MAC7B,IAAI,SAAS,GAAG,YAAY,CAAC,YAAb,EAAhB;MACA,IAAI,WAAW,GAAG,KAAK,OAAL,CAAa,OAAb,CAAqB,SAArB,CAAlB;MACA,IAAI,MAAM,GAAG,SAAS,CAAC,UAAV,EAAb;;MAEA,IAAG,MAAH,EAAU;QACT,KAAK,OAAL,CAAa,MAAb,CAAoB,WAApB,EAAiC,CAAjC,EAAoC,MAApC;QACA,MAAM,CAAC,UAAP,CAAkB,YAAlB,CAA+B,KAA/B,EAAsC,MAAtC;MACA,CAHD,MAGK;QACJ,KAAK,OAAL,CAAa,MAAb,CAAoB,WAAW,GAAG,CAAlC,EAAqC,CAArC,EAAwC,MAAxC;QACA,MAAM,CAAC,UAAP,CAAkB,YAAlB,CAA+B,KAA/B,EAAsC,MAAM,CAAC,WAA7C;MACA;IACD,CAZD,MAYK;MACJ,IAAG,MAAH,EAAU;QACT,KAAK,OAAL,CAAa,OAAb,CAAqB,MAArB;QACA,KAAK,cAAL,CAAoB,YAApB,CAAiC,MAAM,CAAC,UAAP,EAAjC,EAAsD,KAAK,cAAL,CAAoB,UAA1E;MACA,CAHD,MAGK;QACJ,KAAK,OAAL,CAAa,IAAb,CAAkB,MAAlB;QACA,KAAK,cAAL,CAAoB,WAApB,CAAgC,MAAM,CAAC,UAAP,EAAhC;MACA;IACD;;IAED,MAAM,CAAC,cAAP;IAEA,OAAO,MAAP;EACA;;EAED,mBAAmB,CAAC,GAAD,EAAK;IACvB,IAAG,GAAG,CAAC,UAAJ,CAAe,KAAlB,EAAwB;MACvB,KAAK,cAAL,CAAoB,GAAG,CAAC,UAAJ,CAAe,KAAnC,IAA4C,GAA5C;IACA;EACD;;EAED,sBAAsB,CAAC,GAAD,EAAK;IAC1B,KAAK,cAAL,CAAoB,IAApB,CAAyB,GAAzB;EACA;;EAED,eAAe,GAAE;IAChB,KAAK,cAAL,GAAsB,EAAtB;IAEA,KAAK,OAAL,CAAa,OAAb,CAAqB,UAAS,MAAT,EAAgB;MACpC,MAAM,CAAC,kBAAP;IACA,CAFD;EAGA,CA9QqD,CAgRvD;;;EACC,oBAAoB,GAAE;IACrB,IAAI,SAAS,GAAG,CAAhB;;IAEA,IAAG,CAAC,KAAK,WAAT,EAAqB;MAEpB,KAAK,OAAL,CAAa,OAAb,CAAsB,MAAD,IAAY;QAChC,MAAM,CAAC,kBAAP;MACA,CAFD;MAIA,KAAK,OAAL,CAAa,OAAb,CAAsB,MAAD,IAAY;QAChC,IAAI,MAAM,GAAG,MAAM,CAAC,SAAP,EAAb;;QAEA,IAAG,MAAM,GAAG,SAAZ,EAAsB;UACrB,SAAS,GAAG,MAAZ;QACA;MACD,CAND;MAQA,KAAK,OAAL,CAAa,OAAb,CAAsB,MAAD,IAAY;QAChC,MAAM,CAAC,aAAP,CAAqB,KAAK,KAAL,CAAW,OAAX,CAAmB,qBAAxC,EAA+D,SAA/D;MACA,CAFD;MAIA,KAAK,KAAL,CAAW,UAAX,CAAsB,eAAtB;IACA;EACD,CAxSqD,CA0SvD;;;EACC,UAAU,CAAC,OAAD,EAAS;IAClB,IAAI,OAAJ;;IAEA,IAAG,OAAO,OAAP,IAAkB,QAArB,EAA8B;MAE7B,IAAG,OAAO,YAAY,MAAtB,EAA6B;QAChC;QACI,OAAO,OAAP;MACA,CAHD,MAGM,IAAG,OAAO,YAAY,eAAtB,EAAsC;QAC/C;QACI,OAAO,OAAO,CAAC,QAAR,MAAsB,KAA7B;MACA,CAHK,MAGA,IAAG,OAAO,WAAP,KAAuB,WAAvB,IAAsC,OAAO,YAAY,WAA5D,EAAwE;QAE7E,OAAO,GAAG,EAAV;QAEA,KAAK,OAAL,CAAa,OAAb,CAAsB,MAAD,IAAY;UAChC,OAAO,CAAC,IAAR,CAAa,MAAb;UACA,OAAO,GAAG,OAAO,CAAC,MAAR,CAAe,MAAM,CAAC,UAAP,CAAkB,IAAlB,CAAf,CAAV;QACA,CAHD,EAJ6E,CASjF;;QACI,IAAI,KAAK,GAAG,OAAO,CAAC,IAAR,CAAc,MAAD,IAAY;UACpC,OAAO,MAAM,CAAC,OAAP,KAAmB,OAA1B;QACA,CAFW,CAAZ;QAIA,OAAO,KAAK,IAAI,KAAhB;MACA;IAED,CAzBD,MAyBK;MACP;MACG,OAAO,KAAK,cAAL,CAAoB,OAApB,KAAgC,KAAvC;IACA,CA/BiB,CAiCpB;;;IACE,OAAO,KAAP;EACA;;EAED,gBAAgB,CAAC,KAAD,EAAO;IACtB,OAAO,KAAK,cAAL,CAAoB,KAApB,CAAP;EACA;;EAED,qBAAqB,CAAC,IAAD,EAAM;IAC1B,IAAI,OAAO,GAAG,EAAd;IAEA,MAAM,CAAC,IAAP,CAAY,KAAK,cAAjB,EAAiC,OAAjC,CAA0C,KAAD,IAAW;MACnD,IAAI,SAAS,GAAG,KAAK,CAAC,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAhB;;MACA,IAAG,SAAS,KAAK,IAAjB,EAAsB;QACrB,OAAO,CAAC,IAAR,CAAa,KAAK,cAAL,CAAoB,KAApB,CAAb;MACA;IACD,CALD;IAOA,OAAO,OAAP;EACA;;EAED,gBAAgB,CAAC,KAAD,EAAO;IACtB,OAAO,KAAK,cAAL,CAAoB,KAApB,CAAP;EACA;;EAED,qBAAqB,GAAE;IACtB,IAAI,KAAK,GAAG,KAAK,cAAL,CAAoB,SAApB,CAA+B,GAAD,IAAS;MAClD,OAAO,GAAG,CAAC,OAAX;IACA,CAFW,CAAZ;IAIA,OAAO,KAAK,GAAG,CAAC,CAAT,GAAa,KAAK,cAAL,CAAoB,KAApB,CAAb,GAA0C,KAAjD;EACA;;EAED,UAAU,GAAE;IACX,OAAO,KAAK,OAAZ;EACA;;EAED,eAAe,CAAC,MAAD,EAAQ;IACtB,OAAO,KAAK,cAAL,CAAoB,SAApB,CAA+B,GAAD,IAAS;MAC7C,OAAO,MAAM,KAAK,GAAlB;IACA,CAFM,CAAP;EAGA,CArXqD,CAuXvD;;;EACC,cAAc,GAAE;IACf,OAAO,KAAK,cAAZ;EACA,CA1XqD,CA4XvD;;;EACC,QAAQ,CAAC,QAAD,EAAU;IACjB,KAAK,cAAL,CAAoB,OAApB,CAA4B,CAAC,MAAD,EAAQ,CAAR,KAAa;MACxC,QAAQ,CAAC,MAAD,EAAS,CAAT,CAAR;IACA,CAFD;EAGA,CAjYqD,CAmYvD;;;EACC,cAAc,CAAC,MAAD,EAAQ;IACrB,IAAI,MAAM,GAAG,EAAb;IAEA,KAAK,cAAL,CAAoB,OAApB,CAA6B,MAAD,IAAY;MACvC,IAAG,CAAC,MAAD,IAAY,MAAM,IAAI,MAAM,CAAC,OAAhC,EAAyC;QACxC,MAAM,CAAC,IAAP,CAAY,MAAM,CAAC,aAAP,EAAZ;MACA;IACD,CAJD;IAMA,OAAO,MAAP;EACA,CA9YqD,CAgZvD;;;EACC,iBAAiB,GAAE;IAClB,IAAI,MAAM,GAAG,EAAb;IAEA,KAAK,OAAL,CAAa,OAAb,CAAsB,MAAD,IAAY;MAChC,MAAM,CAAC,IAAP,CAAY,MAAM,CAAC,aAAP,CAAqB,IAArB,CAAZ;IACA,CAFD;IAIA,OAAO,MAAP;EACA;;EAED,aAAa,CAAC,UAAD,EAAY;IACxB,IAAI,MAAM,GAAG,EAAb;IAAA,IACA,OAAO,GAAG,UAAU,GAAG,KAAK,OAAR,GAAkB,KAAK,cAD3C;IAGA,OAAO,CAAC,OAAR,CAAiB,MAAD,IAAY;MAC3B,MAAM,CAAC,IAAP,CAAY,MAAM,CAAC,YAAP,EAAZ;IACA,CAFD;IAIA,OAAO,MAAP;EACA;;EAED,QAAQ,GAAE;IACT,IAAI,KAAK,GAAG,CAAZ;IAEA,KAAK,cAAL,CAAoB,OAApB,CAA6B,MAAD,IAAY;MACvC,IAAG,MAAM,CAAC,OAAV,EAAkB;QACjB,KAAK,IAAI,MAAM,CAAC,QAAP,EAAT;MACA;IACD,CAJD;IAMA,OAAO,KAAP;EACA;;EAED,UAAU,CAAC,IAAD,EAAO,EAAP,EAAW,KAAX,EAAiB;IAC1B,KAAK,gBAAL,CAAsB,IAAtB,EAA4B,EAA5B,EAAgC,KAAhC;IAEA,EAAE,CAAC,OAAH,CAAW,UAAX,CAAsB,YAAtB,CAAmC,IAAI,CAAC,OAAxC,EAAiD,EAAE,CAAC,OAApD;;IAEA,IAAG,KAAH,EAAS;MACR,EAAE,CAAC,OAAH,CAAW,UAAX,CAAsB,YAAtB,CAAmC,EAAE,CAAC,OAAtC,EAA+C,IAAI,CAAC,OAApD;IACA;;IAED,KAAK,oBAAL;IAEA,KAAK,KAAL,CAAW,UAAX,CAAsB,YAAtB;EACA;;EAED,gBAAgB,CAAC,IAAD,EAAO,EAAP,EAAW,KAAX,EAAiB;IAChC,IAAG,IAAI,CAAC,MAAL,CAAY,OAAf,EAAuB;MACtB,KAAK,kBAAL,CAAwB,IAAI,CAAC,MAAL,CAAY,OAApC,EAA6C,IAA7C,EAAmD,EAAnD,EAAuD,KAAvD;IACA,CAFD,MAEK;MACJ,KAAK,kBAAL,CAAwB,KAAK,OAA7B,EAAsC,IAAtC,EAA4C,EAA5C,EAAgD,KAAhD;IACA;;IAED,KAAK,kBAAL,CAAwB,KAAK,cAA7B,EAA6C,IAA7C,EAAmD,EAAnD,EAAuD,KAAvD,EAA8D,IAA9D;;IAEA,KAAK,eAAL,CAAqB,IAArB;IAEA,KAAK,QAAL,CAAc,cAAd,EAA8B,IAA9B,EAAoC,EAApC,EAAwC,KAAxC;;IAEA,IAAG,KAAK,kBAAL,CAAwB,aAAxB,CAAH,EAA0C;MACzC,KAAK,gBAAL,CAAsB,aAAtB,EAAqC,IAAI,CAAC,YAAL,EAArC,EAA0D,KAAK,KAAL,CAAW,aAAX,CAAyB,aAAzB,EAA1D;IACA;EACD;;EAED,kBAAkB,CAAC,OAAD,EAAU,IAAV,EAAgB,EAAhB,EAAoB,KAApB,EAA2B,UAA3B,EAAsC;IACvD,IAAI,SAAS,GAAG,OAAO,CAAC,OAAR,CAAgB,IAAhB,CAAhB;IAAA,IACA,OADA;IAAA,IACS,IAAI,GAAG,EADhB;;IAGA,IAAI,SAAS,GAAG,CAAC,CAAjB,EAAoB;MAEnB,OAAO,CAAC,MAAR,CAAe,SAAf,EAA0B,CAA1B;MAEA,OAAO,GAAG,OAAO,CAAC,OAAR,CAAgB,EAAhB,CAAV;;MAEA,IAAI,OAAO,GAAG,CAAC,CAAf,EAAkB;QAEjB,IAAG,KAAH,EAAS;UACR,OAAO,GAAG,OAAO,GAAC,CAAlB;QACA;MAED,CAND,MAMK;QACJ,OAAO,GAAG,SAAV;MACA;;MAED,OAAO,CAAC,MAAR,CAAe,OAAf,EAAwB,CAAxB,EAA2B,IAA3B;;MAEA,IAAG,UAAH,EAAc;QAEb,IAAI,GAAG,KAAK,KAAL,CAAW,oBAAX,EAAiC,CAAC,IAAD,EAAO,EAAP,EAAW,KAAX,CAAjC,EAAoD,IAApD,EAA0D,EAA1D,KAAiE,EAAxE;QAEA,IAAI,GAAG,IAAI,CAAC,MAAL,CAAY,KAAK,KAAL,CAAW,UAAX,CAAsB,IAAlC,CAAP;QAEA,IAAI,CAAC,OAAL,CAAa,UAAS,GAAT,EAAa;UACzB,IAAG,GAAG,CAAC,KAAJ,CAAU,MAAb,EAAoB;YACnB,IAAI,IAAI,GAAG,GAAG,CAAC,KAAJ,CAAU,MAAV,CAAiB,SAAjB,EAA4B,CAA5B,EAA+B,CAA/B,CAAX;YACA,GAAG,CAAC,KAAJ,CAAU,MAAV,CAAiB,OAAjB,EAA0B,CAA1B,EAA6B,IAA7B;UACA;QACD,CALD;MAOA;IACD;EACD;;EAED,cAAc,CAAC,MAAD,EAAS,QAAT,EAAmB,SAAnB,EAA6B;IAC1C,IAAI,IAAI,GAAG,CAAX;IAAA,IACA,MAAM,GAAG,CADT;IAAA,IAEA,MAAM,GAAG,CAFT;IAAA,IAGA,KAAK,GAAG,MAAM,CAAC,UAAP,EAHR;IAKA,OAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAqB;MAEvC,IAAG,OAAO,QAAP,KAAoB,WAAvB,EAAmC;QAClC,QAAQ,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,sBAA9B;MACA;;MAED,IAAG,OAAO,SAAP,KAAqB,WAAxB,EAAoC;QACnC,SAAS,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,uBAA/B;MACA;;MAED,IAAG,MAAM,CAAC,OAAV,EAAkB;QAErB;QACI,QAAO,QAAP;UACC,KAAK,QAAL;UACA,KAAK,QAAL;YACC,MAAM,GAAG,CAAC,KAAK,OAAL,CAAa,WAAd,GAA4B,CAArC;YACA;;UAED,KAAK,OAAL;YACC,MAAM,GAAG,KAAK,CAAC,WAAN,GAAoB,KAAK,cAAL,CAAoB,WAAjD;YACA;QARF,CAHiB,CAcrB;;;QACI,IAAG,CAAC,SAAJ,EAAc;UAEb,MAAM,GAAG,KAAK,CAAC,UAAf;;UAEA,IAAG,MAAM,GAAG,CAAT,IAAc,MAAM,GAAG,KAAK,CAAC,WAAf,GAA6B,KAAK,OAAL,CAAa,WAA3D,EAAuE;YACtE,OAAO,KAAP;UACA;QACD,CAtBgB,CAwBrB;;;QACI,IAAI,GAAG,KAAK,CAAC,UAAN,GAAmB,MAA1B;QAEA,IAAI,GAAG,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,GAAL,CAAS,IAAT,EAAe,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,WAA9B,GAA4C,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,WAAzF,CAAT,EAA+G,CAA/G,CAAP;QAEA,KAAK,KAAL,CAAW,UAAX,CAAsB,gBAAtB,CAAuC,IAAvC;QACA,KAAK,gBAAL,CAAsB,IAAtB;QAEA,OAAO;MACP,CAjCD,MAiCK;QACJ,OAAO,CAAC,IAAR,CAAa,mCAAb;QACA,MAAM,CAAC,mCAAD,CAAN;MACA;IAED,CAhDM,CAAP;EAiDA,CAhjBqD,CAkjBvD;;;EACC,aAAa,CAAC,GAAD,EAAK;IACjB,IAAI,KAAK,GAAG,EAAZ;IAEA,KAAK,cAAL,CAAoB,OAApB,CAA6B,MAAD,IAAY;MACvC,KAAK,CAAC,IAAN,CAAW,MAAM,CAAC,YAAP,CAAoB,GAApB,CAAX;IACA,CAFD;IAIA,OAAO,KAAP;EACA,CA3jBqD,CA6jBvD;;;EACC,gBAAgB,GAAE;IACjB,IAAI,UAAU,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAApC;IAAA,IAA+C;IAC/C,UAAU,GAAG,CADb,CADiB,CAInB;;IACE,IAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,YAA9B,GAA6C,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,YAA9E,EAA2F;MAC1F,UAAU,IAAI,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,WAA9B,GAA4C,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,WAAxF;IACA;;IAED,KAAK,cAAL,CAAoB,OAApB,CAA4B,UAAS,MAAT,EAAgB;MAC3C,IAAI,KAAJ,EAAW,QAAX,EAAqB,QAArB;;MAEA,IAAG,MAAM,CAAC,OAAV,EAAkB;QAEjB,KAAK,GAAG,MAAM,CAAC,UAAP,CAAkB,KAAlB,IAA2B,CAAnC;QAEA,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,QAAR,CAAnB;;QAEA,IAAG,OAAO,KAAP,IAAiB,QAApB,EAA6B;UAC5B,IAAG,KAAK,CAAC,OAAN,CAAc,GAAd,IAAqB,CAAC,CAAzB,EAA2B;YAC1B,QAAQ,GAAI,UAAU,GAAG,GAAd,GAAqB,QAAQ,CAAC,KAAD,CAAxC;UACA,CAFD,MAEK;YACJ,QAAQ,GAAG,QAAQ,CAAC,KAAD,CAAnB;UACA;QACD,CAND,MAMK;UACJ,QAAQ,GAAG,KAAX;QACA;;QAED,UAAU,IAAI,QAAQ,GAAG,QAAX,GAAsB,QAAtB,GAAiC,QAA/C;MAEA;IACD,CAtBD;IAwBA,OAAO,UAAP;EACA;;EAED,SAAS,CAAC,UAAD,EAAa,MAAb,EAAqB,YAArB,EAAkC;IAC1C,OAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAqB;MACvC,IAAI,MAAM,GAAG,KAAK,UAAL,CAAgB,UAAhB,EAA4B,MAA5B,EAAoC,YAApC,CAAb;;MAEA,KAAK,eAAL;;MAEA,KAAK,QAAL,CAAc,YAAd,EAA4B,UAA5B,EAAwC,MAAxC,EAAgD,YAAhD;;MAEA,IAAG,KAAK,UAAL,MAAqB,YAAxB,EAAqC;QACpC,MAAM,CAAC,iBAAP;MACA;;MAED,KAAK,MAAL,CAAY,IAAZ;MAEA,KAAK,KAAL,CAAW,UAAX,CAAsB,YAAtB;MAEA,KAAK,eAAL;MAEA,OAAO,CAAC,MAAD,CAAP;IACA,CAlBM,CAAP;EAmBA,CAtnBqD,CAwnBvD;;;EACC,gBAAgB,CAAC,MAAD,EAAQ;IACvB,IAAI,KAAK,GAAG,MAAM,CAAC,QAAP,EAAZ;IAAA,IACA,KADA,CADuB,CAIzB;;IACE,IAAG,KAAH,EAAS;MACR,OAAO,KAAK,cAAL,CAAoB,KAApB,CAAP;IACA,CAPsB,CASzB;;;IACE,KAAK,GAAG,KAAK,cAAL,CAAoB,OAApB,CAA4B,MAA5B,CAAR;;IAEA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;MACb,KAAK,cAAL,CAAoB,MAApB,CAA2B,KAA3B,EAAkC,CAAlC;IACA,CAdsB,CAgBzB;;;IACE,KAAK,GAAG,KAAK,OAAL,CAAa,OAAb,CAAqB,MAArB,CAAR;;IAEA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;MACb,KAAK,OAAL,CAAa,MAAb,CAAoB,KAApB,EAA2B,CAA3B;IACA;;IAED,KAAK,oBAAL;IAEA,KAAK,MAAL;EACA;;EAED,eAAe,CAAC,MAAD,EAAS,MAAT,EAAgB;IAC9B,IAAG,CAAC,KAAK,WAAT,EAAqB;MACpB,KAAK,QAAL,CAAc,eAAd,CAA8B,MAA9B,EAAsC,MAAtC;IACA,CAFD,MAEK;MACJ,IAAG,MAAM,KAAK,KAAX,IAAqB,MAAM,KAAK,IAAX,IAAmB,KAAK,iBAAL,KAA2B,IAAtE,EAA4E;QAC3E,KAAK,iBAAL,GAAyB,MAAzB;MACA;IACD;EACD;;EAED,WAAW,GAAE;IACZ,KAAK,WAAL,GAAmB,IAAnB;IACA,KAAK,iBAAL,GAAyB,IAAzB;EACA;;EAED,aAAa,GAAE;IACd,KAAK,WAAL,GAAmB,KAAnB;IACA,KAAK,oBAAL;IACA,KAAK,QAAL,CAAc,eAAd,CAA8B,KAAK,iBAAnC;EAEA,CAzqBqD,CA2qBvD;;;EACC,MAAM,CAAC,KAAD,EAAO;IACZ,IAAG,OAAO,CAAC,SAAR,CAAkB,KAAK,OAAvB,CAAH,EAAmC;MAClC,KAAK,oBAAL;IACA;;IAED,IAAG,KAAH,EAAS;MACR,KAAK,KAAL,CAAW,UAAX,CAAsB,WAAtB;MACA,KAAK,KAAL,CAAW,UAAX,CAAsB,YAAtB;IACA;;IAED,IAAG,CAAC,KAAK,OAAL,CAAa,iBAAb,EAAgC,KAAhC,CAAJ,EAA2C;MAC1C,KAAK,aAAL,CAAmB,KAAnB;IACA;;IAED,KAAK,QAAL,CAAc,cAAd,EAA8B,KAA9B;IAEA,KAAK,KAAL,CAAW,aAAX,CAAyB,MAAzB;EACA;;AA7rBqD;;ACRxC,MAAM,aAAN,SAA4B,QAA5B,CAAoC;EAClD,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,gBAAL,GAAwB,MAAxB;IAEA,KAAK,SAAL,GAAiB,CAAjB;IACA,KAAK,UAAL,GAAkB,CAAlB;IAEA,KAAK,SAAL,GAAiB,CAAjB;IACA,KAAK,UAAL,GAAkB,CAAlB;EACA;;EAED,SAAS,GAAE;IACV,IAAI,OAAO,GAAG,KAAK,YAAnB,CADU,CAGZ;;IACE,OAAM,OAAO,CAAC,UAAd,EAA0B,OAAO,CAAC,WAAR,CAAoB,OAAO,CAAC,UAA5B;;IAE1B,OAAO,CAAC,SAAR,GAAoB,CAApB;IACA,OAAO,CAAC,UAAR,GAAqB,CAArB;IAEA,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,EAAzB;IACA,OAAO,CAAC,KAAR,CAAc,SAAd,GAA0B,EAA1B;IACA,OAAO,CAAC,KAAR,CAAc,OAAd,GAAwB,EAAxB;IACA,OAAO,CAAC,KAAR,CAAc,UAAd,GAA2B,EAA3B;EACA;;EAED,UAAU,GAAE;IACX,IAAI,OAAO,GAAG,KAAK,YAAnB;IAAA,IACA,gBAAgB,GAAG,IADnB;IAGA,KAAK,IAAL,GAAY,OAAZ,CAAoB,CAAC,GAAD,EAAM,KAAN,KAAgB;MACnC,KAAK,QAAL,CAAc,GAAd,EAAmB,KAAnB;MACA,OAAO,CAAC,WAAR,CAAoB,GAAG,CAAC,UAAJ,EAApB;MACA,GAAG,CAAC,UAAJ,CAAe,IAAf;;MAEA,IAAG,GAAG,CAAC,IAAJ,KAAa,OAAhB,EAAwB;QACvB,gBAAgB,GAAG,KAAnB;MACA;IACD,CARD;;IAUA,IAAG,gBAAH,EAAoB;MACnB,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,KAAK,KAAL,CAAW,aAAX,CAAyB,QAAzB,KAAsC,IAA/D;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,KAAR,CAAc,QAAd,GAAyB,EAAzB;IACA;EACD;;EAGD,YAAY,CAAC,QAAD,EAAU;IACrB,KAAK,SAAL;IACA,KAAK,UAAL;;IAEA,IAAG,QAAH,EAAY;MACX,QAAQ;IACR;EACD;;EAED,qBAAqB,CAAC,GAAD,EAAK;IACzB,IAAI,MAAM,GAAG,OAAO,CAAC,QAAR,CAAiB,GAAG,CAAC,UAAJ,EAAjB,EAAmC,GAAhD;IAEA,OAAO,EAAE,IAAI,CAAC,GAAL,CAAS,KAAK,eAAL,CAAqB,SAArB,GAAiC,MAA1C,IAAoD,IAAI,CAAC,GAAL,CAAS,KAAK,eAAL,CAAqB,SAArB,GAAiC,KAAK,eAAL,CAAqB,YAAtD,GAAqE,MAA9E,CAAtD,CAAP;EACA;;EAED,WAAW,CAAC,GAAD,EAAK;IACf,IAAI,KAAK,GAAG,GAAG,CAAC,UAAJ,EAAZ;IAEA,KAAK,eAAL,CAAqB,SAArB,GAAiC,OAAO,CAAC,QAAR,CAAiB,KAAjB,EAAwB,GAAxB,GAA8B,OAAO,CAAC,QAAR,CAAiB,KAAK,eAAtB,EAAuC,GAArE,GAA2E,KAAK,eAAL,CAAqB,SAAjI;EACA;;EAED,WAAW,CAAC,eAAD,EAAiB;IAC3B,OAAO,KAAK,IAAL,EAAP;EACA;;AAzEiD;;ACApC,MAAM,kBAAN,SAAiC,QAAjC,CAAyC;EACvD,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,gBAAL,GAAwB,MAAxB;IAEA,KAAK,SAAL,GAAiB,CAAjB;IACA,KAAK,UAAL,GAAkB,CAAlB;IAEA,KAAK,aAAL,GAAqB,EAArB,CARiB,CAQO;;IAExB,KAAK,OAAL,GAAe,CAAf,CAViB,CAUA;;IACjB,KAAK,UAAL,GAAkB,CAAlB,CAXiB,CAWG;;IAEpB,KAAK,gBAAL,GAAwB,CAAxB,CAbiB,CAaS;;IAC1B,KAAK,mBAAL,GAA2B,CAA3B,CAdiB,CAcY;;IAE7B,KAAK,UAAL,GAAkB,CAAlB,CAhBiB,CAgBG;;IACpB,KAAK,aAAL,GAAqB,CAArB,CAjBiB,CAiBM;;IAEvB,KAAK,kBAAL,GAA0B,EAA1B,CAnBiB,CAmBY;;IAE7B,KAAK,gBAAL,GAAwB,CAAxB,CArBiB,CAqBS;;IAE1B,KAAK,sBAAL,GAA8B,EAA9B,CAvBiB,CAuBgB;;IACjC,KAAK,uBAAL,GAA+B,CAA/B,CAxBiB,CAwBgB;;IAEjC,KAAK,cAAL,GAAsB,EAAtB,CA1BiB,CA0BQ;;IACzB,KAAK,iBAAL,GAAyB,EAAzB,CA3BiB,CA2BW;EAC5B,CA7BsD,CA+BxD;EACA;EACA;;;EAEC,SAAS,GAAE;IACV,IAAI,OAAO,GAAG,KAAK,YAAnB,CADU,CAGZ;;IACE,OAAM,OAAO,CAAC,UAAd,EAA0B,OAAO,CAAC,WAAR,CAAoB,OAAO,CAAC,UAA5B;;IAE1B,OAAO,CAAC,KAAR,CAAc,UAAd,GAA2B,EAA3B;IACA,OAAO,CAAC,KAAR,CAAc,aAAd,GAA8B,EAA9B,CAPU,CAQZ;;IACE,OAAO,CAAC,KAAR,CAAc,SAAd,GAA0B,EAA1B;IACA,OAAO,CAAC,KAAR,CAAc,OAAd,GAAwB,EAAxB;IACA,OAAO,CAAC,KAAR,CAAc,UAAd,GAA2B,EAA3B;IAEA,KAAK,eAAL,CAAqB,SAArB,GAAiC,CAAjC;IACA,KAAK,eAAL,CAAqB,UAArB,GAAkC,CAAlC;IAEA,KAAK,SAAL,GAAiB,CAAjB;IACA,KAAK,UAAL,GAAkB,CAAlB;IAEA,KAAK,OAAL,GAAe,CAAf;IACA,KAAK,UAAL,GAAkB,CAAlB;IACA,KAAK,UAAL,GAAkB,CAAlB;IACA,KAAK,aAAL,GAAqB,CAArB;IACA,KAAK,gBAAL,GAAwB,CAAxB;IACA,KAAK,mBAAL,GAA2B,CAA3B;EACA;;EAED,UAAU,GAAE;IACX,KAAK,kBAAL;EACA;;EAED,YAAY,CAAC,QAAD,EAAU;IACrB,IAAI,SAAS,GAAG,KAAK,eAAL,CAAqB,SAArC;IACA,IAAI,MAAM,GAAG,KAAb;IACA,IAAI,SAAS,GAAG,KAAhB;IAEA,IAAI,IAAI,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,UAAjC;IAEA,IAAI,IAAI,GAAG,KAAK,IAAL,EAAX;;IAEA,KAAI,IAAI,CAAC,GAAG,KAAK,OAAjB,EAA0B,CAAC,IAAI,KAAK,UAApC,EAAgD,CAAC,EAAjD,EAAoD;MAEnD,IAAG,IAAI,CAAC,CAAD,CAAP,EAAW;QACV,IAAI,IAAI,GAAG,SAAS,GAAG,IAAI,CAAC,CAAD,CAAJ,CAAQ,UAAR,GAAqB,SAA5C;;QAEA,IAAG,SAAS,KAAK,KAAd,IAAuB,IAAI,CAAC,GAAL,CAAS,IAAT,IAAiB,SAA3C,EAAqD;UACpD,SAAS,GAAG,IAAZ;UACA,MAAM,GAAG,CAAT;QACA,CAHD,MAGK;UACJ;QACA;MACD;IACD;;IAED,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;MACrB,GAAG,CAAC,kBAAJ;IACA,CAFD;;IAIA,IAAG,QAAH,EAAY;MACX,QAAQ;IACR;;IAED,IAAG,KAAK,IAAL,GAAY,MAAf,EAAsB;MACrB,KAAK,kBAAL,CAAyB,MAAM,KAAK,KAAX,GAAmB,KAAK,IAAL,CAAU,MAAV,GAAmB,CAAtC,GAA0C,MAAnE,EAA4E,IAA5E,EAAkF,SAAS,IAAI,CAA/F;IACA,CAFD,MAEK;MACJ,KAAK,KAAL;;MACA,KAAK,KAAL,CAAW,UAAX,CAAsB,gBAAtB;IACA;;IAED,KAAK,aAAL,CAAmB,IAAnB;EACA;;EAED,aAAa,CAAC,IAAD,EAAM;IAClB,KAAK,KAAL,CAAW,UAAX,CAAsB,gBAAtB,CAAuC,IAAvC;EACA;;EAED,UAAU,CAAC,GAAD,EAAM,GAAN,EAAU;IACnB,IAAI,OAAO,GAAG,GAAG,GAAG,KAAK,gBAAzB;IACA,IAAI,UAAU,GAAG,GAAG,GAAG,KAAK,mBAA5B;IACA,IAAI,MAAM,GAAG,KAAK,gBAAL,GAAwB,CAArC;IACA,IAAI,IAAI,GAAG,KAAK,IAAL,EAAX;IAEA,KAAK,SAAL,GAAiB,GAAjB;;IAEA,IAAG,CAAC,OAAD,GAAW,MAAX,IAAqB,UAAU,GAAG,MAArC,EAA4C;MAC9C;MACG,IAAI,IAAI,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,UAAjC;;MACA,KAAK,kBAAL,CAAwB,IAAI,CAAC,KAAL,CAAY,KAAK,eAAL,CAAqB,SAArB,GAAiC,KAAK,eAAL,CAAqB,YAAvD,GAAuE,IAAI,CAAC,MAAvF,CAAxB;;MACA,KAAK,aAAL,CAAmB,IAAnB;IACA,CALD,MAKK;MAEJ,IAAG,GAAH,EAAO;QACV;QACI,IAAG,OAAO,GAAG,CAAb,EAAe;UACd,KAAK,UAAL,CAAgB,IAAhB,EAAsB,CAAC,OAAvB;QACA;;QAED,IAAG,UAAU,GAAG,CAAhB,EAAkB;UACtB;UACK,IAAG,KAAK,gBAAL,GAAwB,KAAK,SAA7B,GAAyC,KAAK,gBAAjD,EAAkE;YACjE,KAAK,gBAAL,CAAsB,IAAtB,EAA4B,CAAC,UAA7B;UACA,CAFD,MAEK;YACJ,KAAK,mBAAL,GAA2B,KAAK,SAAhC;UACA;QACD;MACD,CAdD,MAcK;QAEJ,IAAG,UAAU,IAAI,CAAjB,EAAmB;UAClB,KAAK,aAAL,CAAmB,IAAnB,EAAyB,UAAzB;QACA,CAJG,CAMR;;;QACI,IAAG,OAAO,IAAI,CAAd,EAAgB;UACpB;UACK,IAAG,KAAK,SAAL,GAAiB,KAAK,gBAAzB,EAA0C;YACzC,KAAK,aAAL,CAAmB,IAAnB,EAAyB,OAAzB;UACA,CAFD,MAEK;YACJ,KAAK,gBAAL,GAAwB,KAAK,SAA7B;UACA;QACD;MACD;IACD;EACD;;EAED,MAAM,GAAE;IACP,KAAK,gBAAL,GAAwB,KAAK,KAAL,CAAW,OAAX,CAAmB,oBAAnB,IAA2C,KAAK,eAAL,CAAqB,YAAxF;EACA;;EAED,qBAAqB,CAAC,GAAD,EAAK;IACzB,IAAI,QAAQ,GAAG,KAAK,IAAL,GAAY,OAAZ,CAAoB,GAApB,CAAf;IAEA,OAAO,EAAE,IAAI,CAAC,GAAL,CAAS,KAAK,OAAL,GAAe,QAAxB,IAAoC,IAAI,CAAC,GAAL,CAAS,KAAK,UAAL,GAAkB,QAA3B,CAAtC,CAAP;EACA;;EAED,WAAW,CAAC,GAAD,EAAK;IACf,IAAI,KAAK,GAAG,KAAK,IAAL,GAAY,OAAZ,CAAoB,GAApB,CAAZ;;IAEA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;MACb,KAAK,kBAAL,CAAwB,KAAxB,EAA+B,IAA/B;IACA;EACD;;EAED,WAAW,CAAC,eAAD,EAAiB;IAC3B,IAAI,OAAO,GAAG,KAAK,eAAL,CAAqB,SAAnC;IAAA,IACA,UAAU,GAAG,KAAK,eAAL,CAAqB,YAArB,GAAoC,OADjD;IAAA,IAEA,QAAQ,GAAG,KAFX;IAAA,IAGA,MAAM,GAAG,CAHT;IAAA,IAIA,SAAS,GAAG,CAJZ;IAAA,IAKA,IAAI,GAAG,KAAK,IAAL,EALP;;IAOA,IAAG,eAAH,EAAmB;MAClB,MAAM,GAAG,KAAK,OAAd;MACA,SAAS,GAAG,KAAK,UAAjB;IACA,CAHD,MAGK;MACJ,KAAI,IAAI,CAAC,GAAG,KAAK,OAAjB,EAA0B,CAAC,IAAI,KAAK,UAApC,EAAgD,CAAC,EAAjD,EAAoD;QACnD,IAAG,IAAI,CAAC,CAAD,CAAP,EAAW;UACV,IAAG,CAAC,QAAJ,EAAa;YACZ,IAAI,OAAO,GAAG,IAAI,CAAC,CAAD,CAAJ,CAAQ,UAAR,GAAqB,SAAhC,IAA8C,CAAjD,EAAmD;cAClD,MAAM,GAAG,CAAT;YACA,CAFD,MAEK;cACJ,QAAQ,GAAG,IAAX;;cAEA,IAAG,UAAU,GAAG,IAAI,CAAC,CAAD,CAAJ,CAAQ,UAAR,GAAqB,SAAlC,IAA+C,CAAlD,EAAoD;gBACnD,SAAS,GAAG,CAAZ;cACA,CAFD,MAEK;gBACJ;cACA;YACD;UACD,CAZD,MAYK;YACJ,IAAG,UAAU,GAAG,IAAI,CAAC,CAAD,CAAJ,CAAQ,UAAR,GAAqB,SAAlC,IAA+C,CAAlD,EAAoD;cACnD,SAAS,GAAG,CAAZ;YACA,CAFD,MAEK;cACJ;YACA;UACD;QACD;MACD;IACD;;IAED,OAAO,IAAI,CAAC,KAAL,CAAW,MAAX,EAAmB,SAAS,GAAG,CAA/B,CAAP;EACA,CAvNsD,CAyNxD;EACA;EACA;EAEA;;;EACC,kBAAkB,CAAC,QAAD,EAAW,SAAX,EAAsB,MAAtB,EAA6B;IAC9C,IAAI,OAAO,GAAG,KAAK,YAAnB;IAAA,IACA,MAAM,GAAG,KAAK,eADd;IAAA,IAEA,MAAM,GAAG,CAFT;IAAA,IAGA,UAAU,GAAG,CAHb;IAAA,IAIA,cAAc,GAAG,CAJjB;IAAA,IAKA,YAAY,GAAG,CALf;IAAA,IAMA,CAAC,GAAG,CANJ;IAAA,IAOA,IAAI,GAAG,KAAK,IAAL,EAPP;IAAA,IAQA,SAAS,GAAG,IAAI,CAAC,MARjB;IAAA,IASA,eAAe,GAAG,KAAK,eAAL,CAAqB,YATvC;IAWA,QAAQ,GAAG,QAAQ,IAAI,CAAvB;IAEA,MAAM,GAAG,MAAM,IAAI,CAAnB;;IAEA,IAAG,CAAC,QAAJ,EAAa;MACZ,KAAK,KAAL;IACA,CAFD,MAEK;MACJ,OAAM,OAAO,CAAC,UAAd,EAA0B,OAAO,CAAC,WAAR,CAAoB,OAAO,CAAC,UAA5B,EADtB,CAGP;;;MACG,cAAc,GAAG,CAAC,SAAS,GAAG,QAAZ,GAAuB,CAAxB,IAA6B,KAAK,aAAnD;;MAEA,IAAG,cAAc,GAAG,eAApB,EAAoC;QACnC,QAAQ,IAAI,IAAI,CAAC,IAAL,CAAU,CAAC,eAAe,GAAG,cAAnB,IAAqC,KAAK,aAApD,CAAZ;;QACA,IAAG,QAAQ,GAAG,CAAd,EAAgB;UACf,QAAQ,GAAG,CAAX;QACA;MACD,CAXG,CAaP;;;MACG,MAAM,GAAG,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,KAAL,CAAW,KAAK,gBAAL,GAAwB,KAAK,aAAxC,CAAT,EAAkE,KAAK,uBAAvE,CAAT,EAA0G,QAA1G,CAAT;MACA,QAAQ,IAAI,MAAZ;IACA;;IAED,IAAG,SAAS,IAAI,OAAO,CAAC,SAAR,CAAkB,KAAK,eAAvB,CAAhB,EAAwD;MACvD,KAAK,OAAL,GAAe,QAAf;MAEA,KAAK,UAAL,GAAkB,QAAQ,GAAE,CAA5B;;MAEA,OAAO,CAAC,UAAU,IAAI,eAAe,GAAG,KAAK,gBAArC,IAAyD,CAAC,GAAG,KAAK,sBAAnE,KAA8F,KAAK,UAAL,GAAkB,SAAS,GAAE,CAAlI,EAAoI;QACnI,IAAI,KAAK,GAAG,KAAK,UAAL,GAAkB,CAA9B;QAAA,IACA,GAAG,GAAG,IAAI,CAAC,KAAD,CADV;QAAA,IAEA,SAAS,GAAG,CAFZ;QAIA,KAAK,QAAL,CAAc,GAAd,EAAmB,KAAnB;QAEA,OAAO,CAAC,WAAR,CAAoB,GAAG,CAAC,UAAJ,EAApB;QAEA,GAAG,CAAC,UAAJ;;QAEA,IAAG,CAAC,GAAG,CAAC,iBAAR,EAA0B;UACzB,GAAG,CAAC,eAAJ,CAAoB,IAApB;QACA;;QAED,SAAS,GAAG,GAAG,CAAC,SAAJ,EAAZ;;QAEA,IAAG,CAAC,GAAG,MAAP,EAAc;UACb,YAAY,IAAI,SAAhB;QACA,CAFD,MAEK;UACJ,UAAU,IAAI,SAAd;QACA;;QAED,IAAG,SAAS,GAAG,KAAK,gBAApB,EAAqC;UACpC,KAAK,gBAAL,GAAwB,SAAS,GAAG,CAApC;QACA;;QAED,KAAK,UAAL;QACA,CAAC;MACD;;MAED,IAAG,CAAC,QAAJ,EAAa;QACZ,KAAK,UAAL,GAAkB,CAAlB,CADY,CAEhB;;QACI,KAAK,aAAL,GAAqB,IAAI,CAAC,KAAL,CAAW,CAAC,UAAU,GAAG,YAAd,IAA8B,CAAzC,CAArB;QACA,KAAK,aAAL,GAAqB,KAAK,aAAL,IAAsB,SAAS,GAAG,KAAK,UAAjB,GAA6B,CAAnD,CAArB;QAEA,KAAK,gBAAL,GAAwB,YAAY,GAAG,UAAf,GAA4B,KAAK,aAAjC,GAAiD,eAAzE;MACA,CAPD,MAOK;QACJ,KAAK,UAAL,GAAkB,CAAC,SAAD,GAAa,KAAK,SAAL,GAAiB,YAA9B,GAA8C,KAAK,aAAL,GAAqB,KAAK,OAA3B,GAAsC,MAArG;QACA,KAAK,aAAL,GAAqB,KAAK,UAAL,IAAmB,SAAS,GAAC,CAA7B,GAAiC,CAAjC,GAAqC,IAAI,CAAC,GAAL,CAAS,KAAK,gBAAL,GAAwB,KAAK,UAA7B,GAA0C,UAA1C,GAAuD,YAAhE,EAA8E,CAA9E,CAA1D;MACA;;MAED,OAAO,CAAC,KAAR,CAAc,UAAd,GAA2B,KAAK,UAAL,GAAkB,IAA7C;MACA,OAAO,CAAC,KAAR,CAAc,aAAd,GAA8B,KAAK,aAAL,GAAqB,IAAnD;;MAEA,IAAG,SAAH,EAAa;QACZ,KAAK,SAAL,GAAiB,KAAK,UAAL,GAAmB,YAAnB,GAAmC,MAAnC,IAA6C,KAAK,eAAL,CAAqB,WAArB,GAAmC,KAAK,eAAL,CAAqB,WAAxD,GAAsE,KAAK,eAAL,CAAqB,YAArB,GAAoC,eAA1G,GAA4H,CAAzK,CAAjB;MACA;;MAED,KAAK,SAAL,GAAiB,IAAI,CAAC,GAAL,CAAS,KAAK,SAAd,EAAyB,KAAK,eAAL,CAAqB,YAArB,GAAoC,eAA7D,CAAjB,CAvDuD,CAyD1D;;MACG,IAAG,KAAK,eAAL,CAAqB,WAArB,GAAmC,KAAK,eAAL,CAAqB,WAAxD,IAAuE,SAA1E,EAAoF;QACnF,KAAK,SAAL,IAAkB,KAAK,eAAL,CAAqB,YAArB,GAAoC,eAAtD;MACA;;MAED,KAAK,gBAAL,GAAwB,KAAK,SAA7B;MACA,KAAK,mBAAL,GAA2B,KAAK,SAAhC;MAEA,MAAM,CAAC,SAAP,GAAmB,KAAK,SAAxB;MAEA,KAAK,QAAL,CAAc,qBAAd;IACA;EACD;;EAED,UAAU,CAAC,IAAD,EAAO,aAAP,EAAqB;IAC9B,IAAI,KAAK,GAAG,KAAK,YAAjB;IAAA,IACA,SAAS,GAAG,EADZ;IAAA,IAEA,aAAa,GAAG,CAFhB;IAAA,IAGA,KAAK,GAAG,KAAK,OAAL,GAAc,CAHtB;IAAA,IAIA,CAAC,GAAG,CAJJ;IAAA,IAKA,OAAO,GAAG,IALV;;IAOA,OAAM,OAAN,EAAc;MACb,IAAG,KAAK,OAAR,EAAgB;QACf,IAAI,GAAG,GAAG,IAAI,CAAC,KAAD,CAAd;QAAA,IACA,SADA;QAAA,IACW,WADX;;QAGA,IAAG,GAAG,IAAI,CAAC,GAAG,KAAK,kBAAnB,EAAsC;UACrC,SAAS,GAAG,GAAG,CAAC,SAAJ,MAAmB,KAAK,aAApC;UACA,WAAW,GAAG,GAAG,CAAC,WAAlB;;UAEA,IAAG,aAAa,IAAI,SAApB,EAA8B;YAE7B,KAAK,QAAL,CAAc,GAAd,EAAmB,KAAnB;YACA,KAAK,CAAC,YAAN,CAAmB,GAAG,CAAC,UAAJ,EAAnB,EAAqC,KAAK,CAAC,UAA3C;;YAEA,IAAG,CAAC,GAAG,CAAC,WAAL,IAAoB,CAAC,GAAG,CAAC,iBAA5B,EAA8C;cAC7C,SAAS,CAAC,IAAV,CAAe,GAAf;YACA;;YAED,GAAG,CAAC,UAAJ;;YAEA,IAAG,CAAC,WAAJ,EAAgB;cACf,SAAS,GAAG,GAAG,CAAC,UAAJ,GAAiB,YAA7B;;cAEA,IAAG,SAAS,GAAG,KAAK,gBAApB,EAAqC;gBACpC,KAAK,gBAAL,GAAwB,SAAS,GAAG,CAApC;cACA;YACD;;YAED,aAAa,IAAI,SAAjB;YACA,aAAa,IAAI,SAAjB;YAEA,KAAK,OAAL;YACA,KAAK;YACL,CAAC;UAED,CA1BD,MA0BK;YACJ,OAAO,GAAG,KAAV;UACA;QAED,CAlCD,MAkCK;UACJ,OAAO,GAAG,KAAV;QACA;MAED,CA1CD,MA0CK;QACJ,OAAO,GAAG,KAAV;MACA;IACD;;IAED,KAAK,IAAI,GAAT,IAAgB,SAAhB,EAA0B;MACzB,GAAG,CAAC,eAAJ;IACA;;IAED,KAAK,wBAAL,CAA8B,SAA9B;;IAEA,IAAG,aAAH,EAAiB;MAChB,KAAK,UAAL,IAAmB,aAAnB;;MAEA,IAAG,KAAK,UAAL,GAAkB,CAArB,EAAuB;QACtB,KAAK,UAAL,GAAkB,KAAK,GAAG,KAAK,aAA/B;MACA;;MAED,IAAG,KAAK,GAAG,CAAX,EAAa;QACZ,KAAK,UAAL,GAAkB,CAAlB;MACA;;MAED,KAAK,CAAC,KAAN,CAAY,UAAZ,GAAyB,KAAK,UAAL,GAAkB,IAA3C;MACA,KAAK,gBAAL,IAAyB,aAAzB;IACA;EACD;;EAED,aAAa,CAAC,IAAD,EAAO,aAAP,EAAqB;IACjC,IAAI,aAAa,GAAG,EAApB;IAAA,IACA,aAAa,GAAG,CADhB;IAAA,IAEA,CAAC,GAAG,CAFJ;IAAA,IAGA,OAAO,GAAG,IAHV;;IAKA,OAAM,OAAN,EAAc;MACb,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,OAAN,CAAd;MAAA,IACA,SADA;;MAGA,IAAG,GAAG,IAAI,CAAC,GAAG,KAAK,kBAAnB,EAAsC;QACrC,SAAS,GAAG,GAAG,CAAC,SAAJ,MAAmB,KAAK,aAApC;;QAEA,IAAG,aAAa,IAAI,SAApB,EAA8B;UAC7B,KAAK,OAAL;UAEA,aAAa,IAAI,SAAjB;UACA,aAAa,IAAI,SAAjB;UAEA,aAAa,CAAC,IAAd,CAAmB,GAAnB;UACA,CAAC;QACD,CARD,MAQK;UACJ,OAAO,GAAG,KAAV;QACA;MACD,CAdD,MAcK;QACJ,OAAO,GAAG,KAAV;MACA;IACD;;IAED,KAAK,IAAI,GAAT,IAAgB,aAAhB,EAA8B;MAC7B,IAAI,KAAK,GAAG,GAAG,CAAC,UAAJ,EAAZ;;MAEA,IAAG,KAAK,CAAC,UAAT,EAAoB;QACnB,KAAK,CAAC,UAAN,CAAiB,WAAjB,CAA6B,KAA7B;MACA;IACD;;IAED,IAAG,aAAH,EAAiB;MAChB,KAAK,UAAL,IAAmB,aAAnB;MACA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,UAAxB,GAAqC,KAAK,UAAL,GAAkB,IAAvD;MACA,KAAK,gBAAL,IAAyB,KAAK,OAAL,GAAe,aAAf,GAA+B,aAAa,GAAG,KAAK,gBAA7E;IACA;EACD;;EAED,aAAa,CAAC,IAAD,EAAO,aAAP,EAAqB;IACjC,IAAI,KAAK,GAAG,KAAK,YAAjB;IAAA,IACA,SAAS,GAAG,EADZ;IAAA,IAEA,aAAa,GAAG,CAFhB;IAAA,IAGA,KAAK,GAAG,KAAK,UAAL,GAAkB,CAH1B;IAAA,IAIA,CAAC,GAAG,CAJJ;IAAA,IAKA,OAAO,GAAG,IALV;;IAOA,OAAM,OAAN,EAAc;MACb,IAAI,GAAG,GAAG,IAAI,CAAC,KAAD,CAAd;MAAA,IACA,SADA;MAAA,IACW,WADX;;MAGA,IAAG,GAAG,IAAI,CAAC,GAAG,KAAK,kBAAnB,EAAsC;QACrC,SAAS,GAAG,GAAG,CAAC,SAAJ,MAAmB,KAAK,aAApC;QACA,WAAW,GAAG,GAAG,CAAC,WAAlB;;QAEA,IAAG,aAAa,IAAI,SAApB,EAA8B;UAE7B,KAAK,QAAL,CAAc,GAAd,EAAmB,KAAnB;UACA,KAAK,CAAC,WAAN,CAAkB,GAAG,CAAC,UAAJ,EAAlB;;UAEA,IAAG,CAAC,GAAG,CAAC,WAAL,IAAoB,CAAC,GAAG,CAAC,iBAA5B,EAA8C;YAC7C,SAAS,CAAC,IAAV,CAAe,GAAf;UACA;;UAED,GAAG,CAAC,UAAJ;;UAEA,IAAG,CAAC,WAAJ,EAAgB;YACf,SAAS,GAAG,GAAG,CAAC,UAAJ,GAAiB,YAA7B;;YAEA,IAAG,SAAS,GAAG,KAAK,gBAApB,EAAqC;cACpC,KAAK,gBAAL,GAAwB,SAAS,GAAG,CAApC;YACA;UACD;;UAED,aAAa,IAAI,SAAjB;UACA,aAAa,IAAI,SAAjB;UAEA,KAAK,UAAL;UACA,KAAK;UACL,CAAC;QACD,CAzBD,MAyBK;UACJ,OAAO,GAAG,KAAV;QACA;MACD,CAhCD,MAgCK;QACJ,OAAO,GAAG,KAAV;MACA;IACD;;IAED,KAAK,IAAI,GAAT,IAAgB,SAAhB,EAA0B;MACzB,GAAG,CAAC,eAAJ;IACA;;IAED,KAAK,wBAAL,CAA8B,SAA9B;;IAEA,IAAG,aAAH,EAAiB;MAChB,KAAK,aAAL,IAAsB,aAAtB;;MAEA,IAAG,KAAK,aAAL,GAAqB,CAArB,IAA0B,KAAK,IAAI,IAAI,CAAC,MAAL,GAAa,CAAnD,EAAqD;QACpD,KAAK,aAAL,GAAqB,CAArB;MACA;;MAED,KAAK,CAAC,KAAN,CAAY,aAAZ,GAA4B,KAAK,aAAL,GAAqB,IAAjD;MACA,KAAK,mBAAL,IAA4B,aAA5B;IACA;EACD;;EAED,gBAAgB,CAAC,IAAD,EAAO,aAAP,EAAqB;IACpC,IAAI,aAAa,GAAG,EAApB;IAAA,IACA,aAAa,GAAG,CADhB;IAAA,IAEA,CAAC,GAAG,CAFJ;IAAA,IAGA,OAAO,GAAG,IAHV;;IAKA,OAAM,OAAN,EAAc;MACb,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,UAAN,CAAd;MAAA,IACA,SADA;;MAGA,IAAG,GAAG,IAAI,CAAC,GAAG,KAAK,kBAAnB,EAAsC;QACrC,SAAS,GAAG,GAAG,CAAC,SAAJ,MAAmB,KAAK,aAApC;;QAEA,IAAG,aAAa,IAAI,SAApB,EAA8B;UAC7B,KAAK,UAAL;UAEA,aAAa,IAAI,SAAjB;UACA,aAAa,IAAI,SAAjB;UAEA,aAAa,CAAC,IAAd,CAAmB,GAAnB;UACA,CAAC;QACD,CARD,MAQK;UACJ,OAAO,GAAG,KAAV;QACA;MACD,CAdD,MAcK;QACJ,OAAO,GAAG,KAAV;MACA;IACD;;IAED,KAAK,IAAI,GAAT,IAAgB,aAAhB,EAA8B;MAC7B,IAAI,KAAK,GAAG,GAAG,CAAC,UAAJ,EAAZ;;MAEA,IAAG,KAAK,CAAC,UAAT,EAAoB;QACnB,KAAK,CAAC,UAAN,CAAiB,WAAjB,CAA6B,KAA7B;MACA;IACD;;IAED,IAAG,aAAH,EAAiB;MAChB,KAAK,aAAL,IAAsB,aAAtB;;MAEA,IAAG,KAAK,aAAL,GAAqB,CAAxB,EAA0B;QACzB,KAAK,aAAL,GAAqB,CAArB;MACA;;MAED,KAAK,YAAL,CAAkB,KAAlB,CAAwB,aAAxB,GAAwC,KAAK,aAAL,GAAqB,IAA7D;MACA,KAAK,mBAAL,IAA4B,aAA5B;IACA;EACD;;EAED,wBAAwB,CAAC,IAAD,EAAM;IAC7B,KAAI,IAAI,GAAR,IAAe,IAAf,EAAoB;MACnB,GAAG,CAAC,UAAJ;IACA;;IAED,KAAI,IAAI,GAAR,IAAe,IAAf,EAAoB;MACnB,GAAG,CAAC,aAAJ;IACA;EACD;;AA/jBsD;;ACKzC,MAAM,UAAN,SAAyB,WAAzB,CAAoC;EAElD,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,OAAL,GAAe,KAAK,mBAAL,EAAf,CAHiB,CAGyB;;IAC1C,KAAK,YAAL,GAAoB,KAAK,kBAAL,EAApB,CAJiB,CAI6B;;IAC9C,KAAK,WAAL,GAAmB,KAAK,kBAAL,EAAnB,CALiB,CAK4B;;IAC7C,KAAK,WAAL,GAAmB,IAAnB,CANiB,CAMO;;IACxB,KAAK,mBAAL,GAA2B,IAA3B,CAPiB,CAOe;;IAEhC,KAAK,WAAL,GAAmB,KAAnB,CATiB,CASQ;;IACzB,KAAK,UAAL,GAAkB,SAAlB,CAViB,CAUW;;IAC5B,KAAK,WAAL,GAAmB,KAAnB,CAXiB,CAWQ;;IAEzB,KAAK,IAAL,GAAY,EAAZ,CAbiB,CAaF;;IACf,KAAK,kBAAL,GAA0B,EAA1B,CAdiB,CAcY;;IAC7B,KAAK,UAAL,GAAkB,EAAlB,CAfiB,CAeI;;IACrB,KAAK,eAAL,GAAuB,CAAvB,CAhBiB,CAgBQ;;IAEzB,KAAK,WAAL,GAAmB,EAAnB,CAlBiB,CAkBK;;IACtB,KAAK,gBAAL,GAAwB,CAAxB,CAnBiB,CAmBS;;IAE1B,KAAK,SAAL,GAAiB,CAAjB;IACA,KAAK,UAAL,GAAkB,CAAlB;IAEA,KAAK,WAAL,GAAmB,KAAnB,CAxBiB,CAwBQ;;IACzB,KAAK,wBAAL,GAAgC,KAAhC,CAzBiB,CAyBqB;;IACtC,KAAK,2BAAL,GAAmC,KAAnC,CA1BiB,CA0BwB;;IAEzC,KAAK,YAAL,GAAoB,EAApB,CA5BiB,CA4BM;;IACvB,KAAK,eAAL,GAAuB,EAAvB,CA7BiB,CA6BS;;IAE1B,KAAK,QAAL,GAAgB,IAAhB;EACA,CAlCiD,CAoCnD;;;EAEC,mBAAmB,GAAG;IACrB,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;IAEA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,uBAAjB;IACA,EAAE,CAAC,YAAH,CAAgB,UAAhB,EAA4B,CAA5B,EAJqB,CAKvB;;IAEE,OAAO,EAAP;EACA;;EAED,kBAAkB,GAAG;IACpB,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;IAEA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,iBAAjB;IACA,EAAE,CAAC,YAAH,CAAgB,MAAhB,EAAwB,UAAxB;IAEA,OAAO,EAAP;EACA;;EAED,qBAAqB,GAAE;IACxB;IACE,IAAG,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,WAA1B,IAAyC,QAA5C,EAAqD;MACpD,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;MACA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,uBAAjB;MAEA,IAAI,QAAQ,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAf;MACA,QAAQ,CAAC,SAAT,CAAmB,GAAnB,CAAuB,gCAAvB;MACA,QAAQ,CAAC,SAAT,GAAqB,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAxC;MAEA,EAAE,CAAC,WAAH,CAAe,QAAf;MAEA,KAAK,mBAAL,GAA2B,QAA3B;MACA,KAAK,WAAL,GAAmB,EAAnB;IACA;EACD,CAxEiD,CA0EnD;;;EACC,UAAU,GAAE;IACX,OAAO,KAAK,OAAZ;EACA,CA7EiD,CA+EnD;;;EACC,eAAe,GAAE;IAChB,OAAO,KAAK,YAAZ;EACA;;EAED,UAAU,GAAE;IACX,KAAK,qBAAL;IACA,KAAK,kBAAL,GAFW,CAIb;;IACE,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,YAA9B;IAEA,KAAK,WAAL,GAAmB,IAAnB,CAPW,CASb;;IACE,KAAK,OAAL,CAAa,gBAAb,CAA8B,QAA9B,EAAwC,MAAM;MAC7C,IAAI,IAAI,GAAG,KAAK,OAAL,CAAa,UAAxB;MAAA,IACA,OAAO,GAAG,KAAK,UAAL,GAAkB,IAD5B;MAAA,IAEA,GAAG,GAAG,KAAK,OAAL,CAAa,SAFnB;MAAA,IAGA,MAAM,GAAG,KAAK,SAAL,GAAiB,GAH1B,CAD6C,CAMhD;;MACG,IAAG,KAAK,UAAL,IAAmB,IAAtB,EAA2B;QAC1B,KAAK,UAAL,GAAkB,IAAlB;QAEA,KAAK,QAAL,CAAc,mBAAd,EAAmC,IAAnC,EAAyC,OAAzC;QACA,KAAK,gBAAL,CAAsB,kBAAtB,EAA0C,IAA1C,EAAgD,OAAhD;;QAEA,KAAK,oBAAL;MACA,CAd4C,CAgBhD;;;MACG,IAAG,KAAK,SAAL,IAAkB,GAArB,EAAyB;QACxB,KAAK,SAAL,GAAiB,GAAjB;QAEA,KAAK,QAAL,CAAc,UAAd,CAAyB,GAAzB,EAA8B,MAA9B;QAEA,KAAK,QAAL,CAAc,iBAAd,EAAiC,GAAjC,EAAsC,MAAtC;QACA,KAAK,gBAAL,CAAsB,gBAAtB,EAAwC,GAAxC,EAA6C,MAA7C;MACA;IACD,CAzBD;EA0BA,CAxHiD,CA0HnD;;;EACC,OAAO,CAAC,OAAD,EAAS;IACf,IAAG,OAAO,OAAP,IAAkB,QAArB,EAA8B;MAC7B,IAAG,OAAO,YAAY,GAAtB,EAA0B;QAC7B;QACI,OAAO,OAAP;MACA,CAHD,MAGM,IAAG,OAAO,YAAY,YAAtB,EAAmC;QAC5C;QACI,OAAO,OAAO,CAAC,QAAR,MAAsB,KAA7B;MACA,CAHK,MAGA,IAAG,OAAO,WAAP,KAAuB,WAAvB,IAAsC,OAAO,YAAY,WAA5D,EAAwE;QACjF;QACI,IAAI,KAAK,GAAG,KAAK,IAAL,CAAU,IAAV,CAAgB,GAAD,IAAS;UACnC,OAAO,GAAG,CAAC,UAAJ,OAAqB,OAA5B;QACA,CAFW,CAAZ;QAIA,OAAO,KAAK,IAAI,KAAhB;MACA,CAPK,MAOA,IAAG,OAAO,KAAK,IAAf,EAAoB;QACzB,OAAO,KAAP;MACA;IACD,CAjBD,MAiBM,IAAG,OAAO,OAAP,IAAkB,WAArB,EAAiC;MACtC,OAAO,KAAP;IACA,CAFK,MAED;MACP;MACG,IAAI,KAAK,GAAG,KAAK,IAAL,CAAU,IAAV,CAAgB,GAAD,IAAS;QACnC,OAAO,GAAG,CAAC,IAAJ,CAAS,KAAK,KAAL,CAAW,OAAX,CAAmB,KAA5B,KAAsC,OAA7C;MACA,CAFW,CAAZ;MAIA,OAAO,KAAK,IAAI,KAAhB;IACA,CA3Bc,CA6BjB;;;IACE,OAAO,KAAP;EACA;;EAED,oBAAoB,CAAC,IAAD,EAAM;IACzB,IAAI,KAAK,GAAG,KAAK,IAAL,CAAU,IAAV,CAAgB,GAAD,IAAS;MACnC,OAAO,GAAG,CAAC,IAAJ,KAAa,IAApB;IACA,CAFW,CAAZ;IAIA,OAAO,KAAK,IAAI,KAAhB;EACA;;EAED,kBAAkB,CAAC,QAAD,EAAU;IAC3B,OAAO,KAAK,cAAL,GAAsB,IAAtB,CAA4B,GAAD,IAAS;MAC1C,OAAO,GAAG,CAAC,WAAJ,OAAsB,QAAtB,IAAkC,GAAG,CAAC,WAAJ,EAAzC;IACA,CAFM,CAAP;EAGA;;EAED,WAAW,CAAC,GAAD,EAAM,QAAN,EAAgB,SAAhB,EAA0B;IACpC,OAAO,KAAK,QAAL,CAAc,mBAAd,CAAkC,GAAlC,EAAuC,QAAvC,EAAiD,SAAjD,CAAP;EACA,CA5KiD,CA8KnD;;;EACC,OAAO,CAAC,IAAD,EAAO,gBAAP,EAAyB,cAAzB,EAAwC;IAC9C,OAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAmB;MACrC,IAAG,gBAAgB,IAAI,KAAK,cAAL,GAAsB,MAA7C,EAAoD;QACnD,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAtB,EAAiC;UAChC,KAAK,cAAL,CAAoB,IAApB,EAA0B,IAA1B;QACA,CAFD,MAEK;UACJ,KAAK,kBAAL,CAAwB,MAAM;YAC7B,KAAK,cAAL,CAAoB,IAApB;UACA,CAFD;QAGA;MACD,CARD,MAQK;QACJ,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,IAAkC,cAAlC,IAAoD,KAAK,KAAL,CAAW,WAAlE,EAA8E;UAC7E,KAAK,KAAL,CAAW,aAAX,CAAyB,0BAAzB,CAAoD,IAApD;QACA;;QACD,KAAK,WAAL;;QAEA,KAAK,cAAL,CAAoB,IAApB;MACA;;MAED,OAAO;IACP,CAnBM,CAAP;EAoBA;;EAED,cAAc,CAAC,IAAD,EAAO,gBAAP,EAAwB;IACrC,KAAK,gBAAL,CAAsB,gBAAtB,EAAwC,IAAxC;;IAEA,KAAK,aAAL;;IAEA,IAAG,KAAK,CAAC,OAAN,CAAc,IAAd,CAAH,EAAuB;MACtB,KAAK,QAAL,CAAc,iBAAd,EAAiC,IAAjC;MAEA,IAAI,CAAC,OAAL,CAAa,CAAC,GAAD,EAAM,CAAN,KAAY;QACxB,IAAG,GAAG,IAAI,OAAO,GAAP,KAAe,QAAzB,EAAkC;UACjC,IAAI,GAAG,GAAG,IAAI,GAAJ,CAAQ,GAAR,EAAa,IAAb,CAAV;UACA,KAAK,IAAL,CAAU,IAAV,CAAe,GAAf;QACA,CAHD,MAGK;UACJ,OAAO,CAAC,IAAR,CAAa,8FAAb,EAA6G,GAA7G;QACA;MACD,CAPD;MASA,KAAK,iBAAL,CAAuB,KAAvB,EAA8B,KAA9B,EAAqC,gBAArC;MAEA,KAAK,QAAL,CAAc,gBAAd,EAAgC,IAAhC;MACA,KAAK,gBAAL,CAAsB,eAAtB,EAAuC,IAAvC;IACA,CAhBD,MAgBK;MACJ,OAAO,CAAC,KAAR,CAAc,sGAAd,EAAsH,OAAO,IAA7H,EAAmI,cAAnI,EAAmJ,IAAnJ;IACA;EACD;;EAED,aAAa,GAAE;IACd,KAAK,QAAL,CAAc,WAAd;IAEA,KAAK,IAAL,CAAU,OAAV,CAAmB,GAAD,IAAS;MAC1B,GAAG,CAAC,IAAJ;IACA,CAFD;IAIA,KAAK,IAAL,GAAY,EAAZ;IACA,KAAK,UAAL,GAAkB,EAAlB;IACA,KAAK,kBAAL,GAA0B,EAA1B;IACA,KAAK,eAAL,GAAuB,CAAvB;IACA,KAAK,WAAL,GAAmB,EAAnB;IACA,KAAK,gBAAL,GAAwB,CAAxB;IAEA,KAAK,eAAL;EACA;;EAED,SAAS,CAAC,GAAD,EAAM,WAAN,EAAkB;IAC1B,IAAI,QAAQ,GAAG,KAAK,IAAL,CAAU,OAAV,CAAkB,GAAlB,CAAf;IAAA,IACA,WAAW,GAAG,KAAK,UAAL,CAAgB,OAAhB,CAAwB,GAAxB,CADd;;IAGA,IAAG,WAAW,GAAG,CAAC,CAAlB,EAAoB;MACnB,KAAK,UAAL,CAAgB,MAAhB,CAAuB,WAAvB,EAAoC,CAApC;IACA;;IAED,IAAG,QAAQ,GAAG,CAAC,CAAf,EAAiB;MAChB,KAAK,IAAL,CAAU,MAAV,CAAiB,QAAjB,EAA2B,CAA3B;IACA;;IAED,KAAK,aAAL,CAAmB,KAAK,UAAxB;IAEA,KAAK,kBAAL,CAAyB,IAAD,IAAU;MACjC,IAAI,YAAY,GAAG,IAAI,CAAC,OAAL,CAAa,GAAb,CAAnB;;MAEA,IAAG,YAAY,GAAG,CAAC,CAAnB,EAAqB;QACpB,IAAI,CAAC,MAAL,CAAY,YAAZ,EAA0B,CAA1B;MACA;IACD,CAND;;IAQA,IAAG,CAAC,WAAJ,EAAgB;MACf,KAAK,kBAAL;IACA;;IAED,KAAK,sBAAL;IAEA,KAAK,gBAAL,CAAsB,YAAtB,EAAoC,GAAG,CAAC,YAAJ,EAApC;;IAEA,IAAG,CAAC,KAAK,gBAAT,EAA0B;MACzB,KAAK,gBAAL;IACA;;IAED,IAAG,KAAK,kBAAL,CAAwB,aAAxB,CAAH,EAA0C;MACzC,KAAK,gBAAL,CAAsB,aAAtB,EAAqC,KAAK,OAAL,EAArC;IACA;EACD;;EAED,MAAM,CAAC,IAAD,EAAO,GAAP,EAAY,KAAZ,EAAmB,WAAnB,EAA+B;IACpC,IAAI,GAAG,GAAG,KAAK,YAAL,CAAkB,IAAlB,EAAwB,GAAxB,EAA6B,KAA7B,EAAoC,WAApC,CAAV;IACA,OAAO,GAAP;EACA,CA3RiD,CA6RnD;;;EACC,OAAO,CAAC,IAAD,EAAO,GAAP,EAAY,KAAZ,EAAkB;IACxB,IAAI,IAAI,GAAG,EAAX;IAEA,OAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAqB;MACvC,GAAG,GAAG,KAAK,aAAL,CAAmB,GAAnB,CAAN;;MAEA,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,IAAd,CAAJ,EAAwB;QACvB,IAAI,GAAG,CAAC,IAAD,CAAP;MACA;;MAED,IAAI,OAAO,KAAP,IAAgB,WAAhB,IAA+B,GAAhC,IAAyC,OAAO,KAAP,KAAiB,WAAjB,IAAgC,CAAC,GAA7E,EAAkF;QACjF,IAAI,CAAC,OAAL;MACA;;MAED,IAAI,CAAC,OAAL,CAAa,CAAC,IAAD,EAAO,CAAP,KAAa;QACzB,IAAI,GAAG,GAAG,KAAK,MAAL,CAAY,IAAZ,EAAkB,GAAlB,EAAuB,KAAvB,EAA8B,IAA9B,CAAV;QACA,IAAI,CAAC,IAAL,CAAU,GAAV;QACA,KAAK,QAAL,CAAc,WAAd,EAA2B,GAA3B,EAAgC,IAAhC,EAAsC,GAAtC,EAA2C,KAA3C;MACA,CAJD;MAMA,KAAK,iBAAL,CAAuB,KAAvB,EAA8B,KAA9B,EAAqC,IAArC;MAEA,KAAK,sBAAL;;MAEA,IAAG,IAAI,CAAC,MAAR,EAAe;QACd,KAAK,iBAAL;MACA;;MAED,OAAO,CAAC,IAAD,CAAP;IACA,CA1BM,CAAP;EA2BA;;EAED,aAAa,CAAC,GAAD,EAAK;IACjB,IAAG,OAAO,GAAP,KAAe,WAAlB,EAA8B;MAC7B,GAAG,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAzB;IACA;;IAED,IAAG,GAAG,KAAK,KAAX,EAAiB;MAChB,GAAG,GAAG,IAAN;IACA;;IAED,IAAG,GAAG,KAAK,QAAX,EAAoB;MACnB,GAAG,GAAG,KAAN;IACA;;IAED,OAAO,GAAP;EACA;;EAED,YAAY,CAAC,IAAD,EAAO,GAAP,EAAY,KAAZ,EAAmB,WAAnB,EAA+B;IAC1C,IAAI,GAAG,GAAG,IAAI,YAAY,GAAhB,GAAsB,IAAtB,GAA6B,IAAI,GAAJ,CAAQ,IAAI,IAAI,EAAhB,EAAoB,IAApB,CAAvC;IAAA,IACA,GAAG,GAAG,KAAK,aAAL,CAAmB,GAAnB,CADN;IAAA,IAEA,QAAQ,GAAG,CAAC,CAFZ;IAAA,IAGA,WAHA;IAAA,IAGa,WAHb;;IAKA,IAAG,CAAC,KAAJ,EAAU;MACT,WAAW,GAAG,KAAK,KAAL,CAAW,qBAAX,EAAkC,CAAC,GAAD,EAAM,GAAN,CAAlC,EAA8C,IAA9C,EAAoD;QAAC,KAAD;QAAQ;MAAR,CAApD,CAAd;MAEA,KAAK,GAAG,WAAW,CAAC,KAApB;MACA,GAAG,GAAG,WAAW,CAAC,GAAlB;IACA;;IAED,IAAG,OAAO,KAAP,KAAiB,WAApB,EAAgC;MAC/B,KAAK,GAAG,KAAK,OAAL,CAAa,KAAb,CAAR;IACA;;IAED,KAAK,GAAG,KAAK,KAAL,CAAW,kBAAX,EAA+B,CAAC,GAAD,EAAM,KAAN,EAAa,GAAb,CAA/B,EAAkD,IAAlD,EAAwD,KAAxD,CAAR;;IAEA,IAAG,KAAH,EAAS;MACR,QAAQ,GAAG,KAAK,IAAL,CAAU,OAAV,CAAkB,KAAlB,CAAX;IACA;;IAED,IAAG,KAAK,IAAI,QAAQ,GAAG,CAAC,CAAxB,EAA0B;MACzB,WAAW,GAAG,KAAK,UAAL,CAAgB,OAAhB,CAAwB,KAAxB,CAAd;MAEA,KAAK,kBAAL,CAAwB,UAAS,IAAT,EAAc;QACrC,IAAI,YAAY,GAAG,IAAI,CAAC,OAAL,CAAa,KAAb,CAAnB;;QAEA,IAAG,YAAY,GAAG,CAAC,CAAnB,EAAqB;UACpB,IAAI,CAAC,MAAL,CAAa,GAAG,GAAG,YAAH,GAAkB,YAAY,GAAG,CAAjD,EAAqD,CAArD,EAAwD,GAAxD;QACA;MACD,CAND;;MAQA,IAAG,WAAW,GAAG,CAAC,CAAlB,EAAoB;QACnB,KAAK,UAAL,CAAgB,MAAhB,CAAwB,GAAG,GAAG,WAAH,GAAiB,WAAW,GAAG,CAA1D,EAA8D,CAA9D,EAAiE,GAAjE;MACA;;MAED,KAAK,IAAL,CAAU,MAAV,CAAkB,GAAG,GAAG,QAAH,GAAc,QAAQ,GAAG,CAA9C,EAAkD,CAAlD,EAAqD,GAArD;IAEA,CAjBD,MAiBK;MAEJ,IAAG,GAAH,EAAO;QAEN,KAAK,kBAAL,CAAwB,UAAS,IAAT,EAAc;UACrC,IAAI,CAAC,OAAL,CAAa,GAAb;QACA,CAFD;QAIA,KAAK,UAAL,CAAgB,OAAhB,CAAwB,GAAxB;QACA,KAAK,IAAL,CAAU,OAAV,CAAkB,GAAlB;MACA,CARD,MAQK;QACJ,KAAK,kBAAL,CAAwB,UAAS,IAAT,EAAc;UACrC,IAAI,CAAC,IAAL,CAAU,GAAV;QACA,CAFD;QAIA,KAAK,UAAL,CAAgB,IAAhB,CAAqB,GAArB;QACA,KAAK,IAAL,CAAU,IAAV,CAAe,GAAf;MACA;IACD;;IAED,KAAK,aAAL,CAAmB,KAAK,UAAxB;IAEA,KAAK,gBAAL,CAAsB,UAAtB,EAAkC,GAAG,CAAC,YAAJ,EAAlC;;IAEA,IAAG,KAAK,kBAAL,CAAwB,aAAxB,CAAH,EAA0C;MACzC,KAAK,gBAAL,CAAsB,aAAtB,EAAqC,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,EAArC;IACA;;IAED,IAAG,CAAC,WAAJ,EAAgB;MACf,KAAK,kBAAL;IACA;;IAED,OAAO,GAAP;EACA;;EAED,OAAO,CAAC,IAAD,EAAO,EAAP,EAAW,KAAX,EAAiB;IACvB,KAAK,QAAL,CAAc,UAAd,EAA0B,IAA1B,EAAgC,EAAhC,EAAoC,KAApC;IAEA,KAAK,aAAL,CAAmB,IAAnB,EAAyB,EAAzB,EAA6B,KAA7B;IAEA,KAAK,sBAAL;IAEA,KAAK,QAAL,CAAc,WAAd,EAA2B,IAA3B,EAAiC,EAAjC,EAAqC,KAArC;IACA,KAAK,gBAAL,CAAsB,UAAtB,EAAkC,IAAI,CAAC,YAAL,EAAlC;EACA;;EAED,aAAa,CAAC,IAAD,EAAO,EAAP,EAAW,KAAX,EAAiB;IAC7B,KAAK,cAAL,CAAoB,KAAK,IAAzB,EAA+B,IAA/B,EAAqC,EAArC,EAAyC,KAAzC;IACA,KAAK,cAAL,CAAoB,KAAK,UAAzB,EAAqC,IAArC,EAA2C,EAA3C,EAA+C,KAA/C;IAEA,KAAK,kBAAL,CAAyB,IAAD,IAAU;MACjC,KAAK,cAAL,CAAoB,IAApB,EAA0B,IAA1B,EAAgC,EAAhC,EAAoC,KAApC;IACA,CAFD;IAIA,KAAK,QAAL,CAAc,YAAd,EAA4B,IAA5B,EAAkC,EAAlC,EAAsC,KAAtC;EACA;;EAED,cAAc,CAAC,IAAD,EAAO,IAAP,EAAa,EAAb,EAAiB,KAAjB,EAAuB;IACpC,IAAI,SAAJ,EAAe,OAAf,EAAwB,KAAxB,EAA+B,GAA/B;;IAEA,IAAG,IAAI,KAAK,EAAZ,EAAe;MAEd,SAAS,GAAG,IAAI,CAAC,OAAL,CAAa,IAAb,CAAZ;;MAEA,IAAI,SAAS,GAAG,CAAC,CAAjB,EAAoB;QAEnB,IAAI,CAAC,MAAL,CAAY,SAAZ,EAAuB,CAAvB;QAEA,OAAO,GAAG,IAAI,CAAC,OAAL,CAAa,EAAb,CAAV;;QAEA,IAAI,OAAO,GAAG,CAAC,CAAf,EAAkB;UAEjB,IAAG,KAAH,EAAS;YACR,IAAI,CAAC,MAAL,CAAY,OAAO,GAAC,CAApB,EAAuB,CAAvB,EAA0B,IAA1B;UACA,CAFD,MAEK;YACJ,IAAI,CAAC,MAAL,CAAY,OAAZ,EAAqB,CAArB,EAAwB,IAAxB;UACA;QAED,CARD,MAQK;UACJ,IAAI,CAAC,MAAL,CAAY,SAAZ,EAAuB,CAAvB,EAA0B,IAA1B;QACA;MACD,CArBa,CAuBjB;;;MACG,IAAG,IAAI,KAAK,KAAK,cAAL,EAAZ,EAAkC;QAEjC,KAAK,GAAG,SAAS,GAAG,OAAZ,GAAsB,SAAtB,GAAkC,OAA1C;QACA,GAAG,GAAG,OAAO,GAAG,SAAV,GAAsB,OAAtB,GAAgC,SAAS,GAAE,CAAjD;;QAEA,KAAI,IAAI,CAAC,GAAG,KAAZ,EAAmB,CAAC,IAAI,GAAxB,EAA6B,CAAC,EAA9B,EAAiC;UAChC,IAAG,IAAI,CAAC,CAAD,CAAP,EAAW;YACV,KAAK,QAAL,CAAc,IAAI,CAAC,CAAD,CAAlB,EAAuB,CAAvB;UACA;QACD;MACD;IACD;EACD;;EAED,SAAS,GAAE;IACV,KAAK,OAAL,CAAa,EAAb;EACA;;EAED,WAAW,CAAC,GAAD,EAAK;IACf,OAAO,KAAK,YAAL,CAAkB,GAAlB,EAAuB,KAAK,IAA5B,CAAP;EACA;;EAED,kBAAkB,CAAC,GAAD,EAAK;IACtB,IAAI,KAAK,GAAG,KAAK,cAAL,GAAsB,OAAtB,CAA8B,GAA9B,CAAZ;IACA,OAAO,KAAK,GAAG,CAAC,CAAT,GAAa,KAAb,GAAqB,KAA5B;EACA;;EAED,cAAc,CAAC,GAAD,EAAM,OAAN,EAAc;IAC3B,IAAI,KAAK,GAAG,KAAK,kBAAL,CAAwB,GAAxB,CAAZ;IAAA,IACA,OAAO,GAAG,KADV;;IAIA,IAAG,KAAK,KAAK,KAAV,IAAmB,KAAK,GAAG,KAAK,gBAAL,GAAuB,CAArD,EAAuD;MACtD,OAAO,GAAG,KAAK,cAAL,GAAsB,KAAK,GAAC,CAA5B,CAAV;IACA;;IAED,IAAG,OAAO,KAAK,EAAE,OAAO,YAAY,GAArB,KAA6B,OAAO,CAAC,IAAR,IAAgB,KAAlD,CAAV,EAAmE;MAClE,OAAO,KAAK,cAAL,CAAoB,OAApB,EAA6B,OAA7B,CAAP;IACA;;IAED,OAAO,OAAP;EACA;;EAED,cAAc,CAAC,GAAD,EAAM,OAAN,EAAc;IAC3B,IAAI,KAAK,GAAG,KAAK,kBAAL,CAAwB,GAAxB,CAAZ;IAAA,IACA,OAAO,GAAG,KADV;;IAGA,IAAG,KAAH,EAAS;MACR,OAAO,GAAG,KAAK,cAAL,GAAsB,KAAK,GAAC,CAA5B,CAAV;IACA;;IAED,IAAG,OAAO,IAAI,OAAX,KAAuB,EAAE,OAAO,YAAY,GAArB,KAA6B,OAAO,CAAC,IAAR,IAAgB,KAApE,CAAH,EAA8E;MAC7E,OAAO,KAAK,cAAL,CAAoB,OAApB,EAA6B,OAA7B,CAAP;IACA;;IAED,OAAO,OAAP;EACA;;EAED,YAAY,CAAC,GAAD,EAAM,IAAN,EAAW;IACtB,IAAI,QAAJ;IAEA,GAAG,GAAG,KAAK,OAAL,CAAa,GAAb,CAAN;;IAEA,IAAG,GAAH,EAAO;MACN,QAAQ,GAAG,IAAI,CAAC,OAAL,CAAa,GAAb,CAAX;;MAEA,IAAG,QAAQ,GAAG,CAAC,CAAf,EAAiB;QAChB,OAAO,QAAP;MACA;IACD;;IAED,OAAO,KAAP;EACA;;EAED,OAAO,CAAC,MAAD,EAAS,SAAT,EAAmB;IACzB,IAAI,MAAM,GAAG,EAAb;IAAA,IACA,IAAI,GAAG,KAAK,OAAL,CAAa,MAAb,CADP;IAGA,IAAI,CAAC,OAAL,CAAa,UAAS,GAAT,EAAa;MACzB,IAAG,GAAG,CAAC,IAAJ,IAAY,KAAf,EAAqB;QACpB,MAAM,CAAC,IAAP,CAAY,GAAG,CAAC,OAAJ,CAAY,SAAS,IAAI,MAAzB,CAAZ;MACA;IACD,CAJD;IAMA,OAAO,MAAP;EACA;;EAED,aAAa,CAAC,MAAD,EAAQ;IACpB,IAAI,MAAM,GAAG,EAAb;IAAA,IACA,IAAI,GAAG,KAAK,OAAL,CAAa,MAAb,CADP;IAGA,IAAI,CAAC,OAAL,CAAa,UAAS,GAAT,EAAa;MACzB,MAAM,CAAC,IAAP,CAAY,GAAG,CAAC,YAAJ,EAAZ;IACA,CAFD;IAIA,OAAO,MAAP;EACA;;EAED,YAAY,CAAC,MAAD,EAAQ;IACnB,IAAI,IAAI,GAAG,KAAK,OAAL,CAAa,MAAb,CAAX;IAEA,OAAO,IAAI,CAAC,MAAZ;EACA;;EAED,gBAAgB,CAAC,IAAD,EAAM;IACrB,KAAK,UAAL,GAAkB,IAAlB;IACA,KAAK,OAAL,CAAa,UAAb,GAA0B,IAA1B;IAEA,KAAK,QAAL,CAAc,mBAAd,EAAmC,IAAnC;EACA;;EAED,2BAA2B,CAAC,OAAD,EAAU,QAAV,EAAmB;IAC7C,IAAG,OAAO,QAAP,KAAoB,WAAvB,EAAmC;MAClC,KAAK,YAAL,CAAkB,IAAlB,CAAuB;QAAC,OAAD;QAAU;MAAV,CAAvB;MACA,KAAK,YAAL,CAAkB,IAAlB,CAAuB,CAAC,CAAD,EAAI,CAAJ,KAAU;QAChC,OAAO,CAAC,CAAC,QAAF,GAAa,CAAC,CAAC,QAAtB;MACA,CAFD;IAGA,CALD,MAKK;MACJ,OAAO,CAAC,KAAR,CAAc,uEAAd;IACA;EACD;;EAED,8BAA8B,CAAC,OAAD,EAAU,QAAV,EAAmB;IAChD,IAAG,OAAO,QAAP,KAAoB,WAAvB,EAAmC;MAClC,KAAK,eAAL,CAAqB,IAArB,CAA0B;QAAC,OAAD;QAAU;MAAV,CAA1B;MACA,KAAK,eAAL,CAAqB,IAArB,CAA0B,CAAC,CAAD,EAAI,CAAJ,KAAU;QACnC,OAAO,CAAC,CAAC,QAAF,GAAa,CAAC,CAAC,QAAtB;MACA,CAFD;IAGA,CALD,MAKK;MACJ,OAAO,CAAC,KAAR,CAAc,0EAAd;IACA;EACD,CA7kBiD,CA+kBnD;;;EACC,iBAAiB,CAAC,OAAD,EAAU,SAAV,EAAqB,gBAArB,EAAsC;IACtD,IAAI,KAAK,GAAG,KAAK,KAAjB;IAAA,IACA,KAAK,GAAG,EADR;IAAA,IAEA,KAAK,GAAG,CAFR;IAAA,IAGA,YAAY,GAAG,CAAC,KAAD,EAAQ,cAAR,EAAwB,SAAxB,EAAmC,iBAAnC,EAAsD,KAAtD,CAHf;;IAMA,IAAG,OAAO,OAAP,KAAmB,UAAtB,EAAiC;MAChC,KAAK,GAAG,KAAK,YAAL,CAAkB,SAAlB,CAA6B,IAAD,IAAU;QAC7C,OAAO,IAAI,CAAC,OAAL,KAAiB,OAAxB;MACA,CAFO,CAAR;;MAIA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;QACb,KAAK,GAAG,cAAR;;QAEA,IAAG,SAAH,EAAa;UACZ,IAAG,KAAK,IAAI,KAAK,YAAL,CAAkB,MAAlB,GAA2B,CAAvC,EAAyC;YACxC,KAAK,GAAG,SAAR;UACA,CAFD,MAEK;YACJ,KAAK;UACL;QACD;MACD,CAVD,MAUK;QACJ,KAAK,GAAG,KAAK,eAAL,CAAqB,SAArB,CAAgC,IAAD,IAAU;UAChD,OAAO,IAAI,CAAC,OAAL,KAAiB,OAAxB;QACA,CAFO,CAAR;;QAIA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;UACb,KAAK,GAAG,iBAAR;;UAEA,IAAG,SAAH,EAAa;YACZ,IAAG,KAAK,IAAI,KAAK,eAAL,CAAqB,MAArB,GAA8B,CAA1C,EAA4C;cAC3C,KAAK,GAAG,KAAR;YACA,CAFD,MAEK;cACJ,KAAK;YACL;UACD;QACD,CAVD,MAUK;UACJ,OAAO,CAAC,KAAR,CAAc,kDAAd,EAAkE,OAAlE;UACA;QACA;MACD;IACD,CAnCD,MAmCK;MACJ,KAAK,GAAG,OAAO,IAAI,KAAnB;MACA,KAAK,GAAG,CAAR;IACA;;IAED,IAAG,KAAK,WAAR,EAAoB;MACnB,IAAG,CAAC,KAAK,wBAAN,IAAmC,KAAK,wBAAL,KAAmC,KAAK,wBAAL,CAA8B,KAA9B,KAAwC,KAAxC,IAAiD,KAAK,GAAG,KAAK,wBAAL,CAA8B,KAAxF,IAAmG,YAAY,CAAC,OAAb,CAAqB,KAArB,IAA8B,YAAY,CAAC,OAAb,CAAqB,KAAK,wBAAL,CAA8B,KAAnD,CAAnK,CAAtC,EAAsQ;QACrQ,KAAK,wBAAL,GAAgC;UAC/B,OAAO,EAAE,OADsB;UAE/B,SAAS,EAAE,SAFoB;UAG/B,gBAAgB,EAAE,gBAHa;UAI/B,KAAK,EAAC,KAJyB;UAK/B,KAAK,EAAC;QALyB,CAAhC;MAOA;;MAED;IACA,CAZD,MAYK;MACJ,IAAG,OAAO,CAAC,SAAR,CAAkB,KAAK,OAAvB,CAAH,EAAmC;QAClC,IAAG,gBAAH,EAAoB;UACnB,KAAK,kBAAL,CAAwB,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,EAAiC,OAAjC,EAA0C,KAA1C,EAAiD,KAAjD,EAAwD,gBAAxD,CAAxB;QACA,CAFD,MAEK;UACJ,KAAK,gBAAL,CAAsB,OAAtB,EAA+B,KAA/B,EAAsC,KAAtC,EAA6C,gBAA7C;;UAEA,IAAG,CAAC,OAAJ,EAAY;YACX,KAAK,KAAL,CAAW,aAAX,CAAyB,QAAzB,CAAkC,aAAlC;UACA;;UAED,KAAK,WAAL;;UAEA,IAAG,KAAK,CAAC,OAAN,CAAc,sBAAjB,EAAwC;YACvC,KAAK,KAAL,CAAW,aAAX,CAAyB,MAAzB,CAAgC,IAAhC;UACA;QACD;MACD,CAhBD,MAgBK;QACJ,KAAK,gBAAL,CAAsB,OAAtB,EAA+B,KAA/B,EAAsC,KAAtC,EAA6C,gBAA7C;MACA;;MAED,KAAK,QAAL,CAAc,gBAAd;IACA;EACD;;EAED,gBAAgB,CAAC,OAAD,EAAU,KAAV,EAAiB,KAAjB,EAAwB,gBAAxB,EAAyC;IACxD,KAAK,QAAL,CAAc,iBAAd;;IAEA,IAAG,CAAC,OAAJ,EAAY;MACX,KAAK,kBAAL,CAAwB,CAAxB,IAA6B,KAAK,IAAL,CAAU,KAAV,CAAgB,CAAhB,CAA7B;IACA,CALuD,CAO1D;;;IACE,QAAO,KAAP;MACC,KAAK,KAAL,CADD,CAEF;;MAEG,KAAK,cAAL;QAEC,KAAI,IAAI,CAAC,GAAG,KAAZ,EAAmB,CAAC,GAAG,KAAK,YAAL,CAAkB,MAAzC,EAAiD,CAAC,EAAlD,EAAqD;UACpD,IAAI,MAAM,GAAG,KAAK,YAAL,CAAkB,CAAlB,EAAqB,OAArB,CAA6B,KAAK,kBAAL,CAAwB,CAAxB,EAA2B,KAA3B,CAAiC,CAAjC,CAA7B,CAAb;UAEA,KAAK,kBAAL,CAAwB,CAAC,GAAG,CAA5B,IAAiC,MAAM,IAAI,KAAK,kBAAL,CAAwB,CAAxB,EAA2B,KAA3B,CAAiC,CAAjC,CAA3C;QACA;;QAED,KAAK,aAAL,CAAmB,KAAK,kBAAL,CAAwB,KAAK,YAAL,CAAkB,MAA1C,CAAnB;;MAED,KAAK,SAAL;QACC,KAAK,GAAG,CAAR;QACA,KAAK,gBAAL;;MAED,KAAK,iBAAL;QACC,KAAI,IAAI,CAAC,GAAG,KAAZ,EAAmB,CAAC,GAAG,KAAK,eAAL,CAAqB,MAA5C,EAAoD,CAAC,EAArD,EAAwD;UACvD,IAAI,MAAM,GAAG,KAAK,eAAL,CAAqB,CAArB,EAAwB,OAAxB,CAAgC,CAAC,CAAC,GAAG,KAAK,cAAL,CAAoB,CAAC,GAAG,CAAxB,CAAH,GAAgC,KAAK,UAAvC,EAAmD,KAAnD,CAAyD,CAAzD,CAAhC,EAA6F,gBAA7F,CAAb;UAEA,KAAK,cAAL,CAAoB,MAAM,IAAI,KAAK,cAAL,CAAoB,CAAC,GAAG,CAAxB,EAA2B,KAA3B,CAAiC,CAAjC,CAA9B,EAAmE,CAAnE;QACA;;MAEF,KAAK,KAAL;QACH;QACI,KAAK,sBAAL;IA3BF;EA6BA,CAzsBiD,CA2sBnD;;;EACC,sBAAsB,GAAE;IACvB,IAAI,IAAI,GAAG,KAAK,cAAL,EAAX;IACA,IAAI,KAAK,GAAG,CAAZ;IAEA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;MACrB,IAAI,GAAG,CAAC,IAAJ,KAAa,KAAjB,EAAuB;QACtB,GAAG,CAAC,WAAJ,CAAgB,KAAhB;QACA,KAAK;MACL;IACD,CALD;EAMA;;EAED,aAAa,CAAC,UAAD,EAAY;IACxB,KAAK,UAAL,GAAkB,UAAlB;IACA,KAAK,eAAL,GAAuB,KAAK,UAAL,CAAgB,MAAvC;EACA,CA3tBiD,CA6tBnD;;;EACC,gBAAgB,GAAE;IACjB,KAAK,WAAL,GAAmB,EAAnB;IAEA,KAAK,WAAL,CAAiB,IAAjB,CAAsB,KAAK,UAAL,CAAgB,KAAhB,CAAsB,CAAtB,CAAtB;IAEA,KAAK,gBAAL,GAAwB,KAAK,WAAL,CAAiB,CAAjB,EAAoB,MAA5C;EACA;;EAED,mBAAmB,GAAE;IACpB,OAAO,KAAK,WAAL,CAAiB,MAAxB;EACA,CAxuBiD,CA0uBnD;;;EACC,cAAc,CAAC,WAAD,EAAc,KAAd,EAAoB;IAEjC,IAAI,MAAM,GAAG,IAAb;;IAEA,IAAG,KAAK,IAAI,OAAO,KAAK,WAAL,CAAiB,KAAjB,CAAP,IAAkC,WAA9C,EAA0D;MACzD,KAAK,WAAL,CAAiB,KAAjB,IAA0B,WAA1B;MACA,MAAM,GAAG,IAAT;IACA,CAHD,MAGK;MACJ,KAAK,WAAL,CAAiB,IAAjB,CAAsB,WAAtB;MACA,MAAM,GAAG,KAAK,GAAG,KAAK,WAAL,CAAiB,MAAjB,GAAyB,CAA1C;IACA;;IAED,IAAG,KAAK,IAAI,KAAK,WAAL,CAAiB,MAAjB,GAAyB,CAArC,EAAuC;MACtC,KAAK,gBAAL,GAAwB,KAAK,WAAL,CAAiB,KAAK,WAAL,CAAiB,MAAjB,GAAyB,CAA1C,EAA6C,MAArE;IACA;;IAED,OAAO,MAAP;EACA;;EAED,cAAc,CAAC,KAAD,EAAO;IACpB,IAAG,OAAO,KAAP,IAAgB,WAAnB,EAA+B;MAC9B,OAAO,KAAK,WAAL,CAAiB,MAAjB,GAA0B,KAAK,WAAL,CAAiB,KAAK,WAAL,CAAiB,MAAjB,GAAyB,CAA1C,CAA1B,GAAyE,EAAhF;IACA,CAFD,MAEK;MACJ,OAAO,KAAK,WAAL,CAAiB,KAAjB,KAA2B,EAAlC;IACA;EACD;;EAED,cAAc,CAAC,KAAD,EAAQ,QAAR,EAAiB;IAC9B,IAAI,IAAI,GAAI,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,KAAK,QAAL,CAAc,WAAd,CAA0B,CAAC,QAA3B,CAAlB,CAAZ;;IAEA,IAAG,KAAH,EAAS;MACR,IAAI,GAAG,KAAK,KAAL,CAAW,cAAX,EAA2B,CAAC,QAAD,CAA3B,EAAuC,IAAvC,EAA6C,IAA7C,CAAP;IACA;;IAED,OAAO,IAAP;EACA,CA9wBiD,CAgxBnD;;;EACC,kBAAkB,CAAC,QAAD,EAAU;IAC3B,KAAK,kBAAL,CAAwB,OAAxB,CAAgC,QAAhC;IACA,KAAK,WAAL,CAAiB,OAAjB,CAAyB,QAAzB;IAEA,KAAK,gBAAL,GAAwB,KAAK,WAAL,CAAiB,KAAK,WAAL,CAAiB,MAAjB,GAAyB,CAA1C,EAA6C,MAArE;EACA,CAtxBiD,CAwxBnD;;;EACC,OAAO,CAAC,IAAD,EAAM;IACZ,IAAI,IAAJ;;IAEA,QAAO,IAAP;MACC,KAAK,QAAL;QACC,IAAI,GAAG,KAAK,UAAZ;QACA;;MAED,KAAK,SAAL;QACC,IAAI,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,EAAP;QACA;;MAED,KAAK,SAAL;QACC,IAAI,GAAG,KAAK,cAAL,CAAoB,KAApB,EAA2B,IAA3B,CAAP;QACA;;MAED;QACC,IAAI,GAAG,KAAK,KAAL,CAAW,eAAX,EAA4B,IAA5B,EAAkC,IAAlC,EAAwC,KAAK,IAA7C,KAAsD,KAAK,IAAlE;IAdF;;IAiBA,OAAO,IAAP;EACA,CA9yBiD,CAgzBnD;EACA;;;EACC,kBAAkB,CAAC,QAAD,EAAU;IAC3B,IAAG,KAAK,WAAR,EAAoB;MACnB,IAAG,QAAH,EAAY;QACX,QAAQ;MACR,CAFD,MAEK;QACJ,KAAK,2BAAL,GAAmC,IAAnC;MACA;IACD,CAND,MAMK;MACJ,KAAK,gBAAL,CAAsB,eAAtB;MAEA,KAAK,QAAL,CAAc,YAAd,CAA2B,QAA3B;;MAEA,IAAG,CAAC,KAAK,WAAT,EAAqB;QACpB,KAAK,eAAL;MACA;;MAED,KAAK,gBAAL,CAAsB,gBAAtB;IACA;EACD;;EAED,kBAAkB,GAAE;IACnB,IAAI,WAAJ;IAEA,IAAI,SAAS,GAAG;MACf,WAAWC,kBADI;MAEf,SAASC;IAFM,CAAhB;;IAKA,IAAG,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,cAA1B,KAA6C,QAAhD,EAAyD;MACxD,WAAW,GAAG,SAAS,CAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,cAApB,CAAvB;IACA,CAFD,MAEK;MACJ,WAAW,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAjC;IACA;;IAED,IAAG,WAAH,EAAe;MACd,KAAK,UAAL,GAAkB,KAAK,KAAL,CAAW,OAAX,CAAmB,cAArC;MAEA,KAAK,QAAL,GAAgB,IAAI,WAAJ,CAAgB,KAAK,KAArB,EAA4B,KAAK,OAAjC,EAA0C,KAAK,YAA/C,CAAhB;MACA,KAAK,QAAL,CAAc,UAAd;;MAEA,IAAI,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAnB,IAAmC,KAAK,KAAL,CAAW,OAAX,CAAmB,MAA1D,EAAkE;QACjE,KAAK,WAAL,GAAmB,IAAnB;MACA,CAFD,MAEK;QACJ,KAAK,WAAL,GAAmB,KAAnB;MACA;IACD,CAXD,MAWK;MACJ,OAAO,CAAC,KAAR,CAAc,mCAAd,EAAmD,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAtE;IACA;EACD;;EAED,aAAa,GAAE;IACd,OAAO,KAAK,UAAZ;EACA;;EAED,WAAW,GAAE;IACZ,KAAK,gBAAL,CAAsB,eAAtB;IAEA,KAAK,OAAL,CAAa,SAAb,GAAyB,CAAzB;;IAEA,KAAK,WAAL;;IAEA,IAAG,KAAK,gBAAR,EAAyB;MACxB,KAAK,QAAL,CAAc,UAAd;;MAEA,IAAG,KAAK,WAAR,EAAoB;QACnB,KAAK,WAAL,GAAmB,KAAnB;QACA,KAAK,aAAL,CAAmB,IAAnB;MACA;IACD,CAPD,MAOK;MACJ,KAAK,iBAAL;IACA;;IAED,IAAG,CAAC,KAAK,WAAT,EAAqB;MACpB,KAAK,eAAL;IACA;;IAED,KAAK,QAAL,CAAc,cAAd;;IAEA,IAAG,CAAC,KAAK,gBAAT,EAA0B;MACzB,KAAK,gBAAL;IACA;;IAED,KAAK,gBAAL,CAAsB,gBAAtB;EACA,CAr4BiD,CAu4BnD;;;EACC,iBAAiB,GAAE;IAClB,IAAG,KAAK,WAAR,EAAoB;MACnB,KAAK,YAAL,CAAkB,KAAlB,CAAwB,OAAxB,GAAkC,MAAlC;IACA,CAFD,MAEK;MACJ,KAAK,YAAL,CAAkB,KAAlB,CAAwB,QAAxB,GAAmC,KAAK,KAAL,CAAW,aAAX,CAAyB,QAAzB,KAAsC,IAAzE,CADI,CAEP;MACA;IACG;EACD;;EAED,WAAW,GAAE;IACZ,KAAK,iBAAL;;IAEA,KAAK,SAAL,GAAiB,CAAjB;IACA,KAAK,UAAL,GAAkB,CAAlB,CAJY,CAMd;;IACE,KAAK,YAAL,CAAkB,KAAlB,CAAwB,QAAxB,GAAmC,EAAnC;IAEA,KAAK,QAAL,CAAc,SAAd;EACA;;EAED,gBAAgB,GAAE;IACjB,IAAG,KAAK,WAAR,EAAoB;MACnB,KAAK,WAAL,CAAiB,YAAjB,CAA8B,uBAA9B,EAAuD,KAAK,UAA5D;MAEA,KAAK,UAAL,GAAkB,WAAlB,CAA8B,KAAK,WAAnC;;MACA,KAAK,oBAAL;IACA;EACD;;EAED,iBAAiB,GAAE;IAClB,IAAG,KAAK,WAAL,IAAoB,KAAK,WAAL,CAAiB,UAAxC,EAAmD;MAClD,KAAK,WAAL,CAAiB,UAAjB,CAA4B,WAA5B,CAAwC,KAAK,WAA7C;IACA;EACD;;EAED,oBAAoB,GAAE;IACrB,IAAG,KAAK,WAAL,IAAoB,KAAK,WAAL,CAAiB,UAAxC,EAAmD;MAClD,KAAK,WAAL,CAAiB,KAAjB,CAAuB,KAAvB,GAA+B,KAAK,KAAL,CAAW,aAAX,CAAyB,QAAzB,KAAsC,IAArE;MACA,KAAK,mBAAL,CAAyB,KAAzB,CAA+B,KAA/B,GAAuC,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,WAA9B,GAA4C,IAAnF;MACA,KAAK,mBAAL,CAAyB,KAAzB,CAA+B,UAA/B,GAA4C,KAAK,UAAL,GAAkB,IAA9D;IACA;EACD;;EAED,QAAQ,CAAC,GAAD,EAAM,KAAN,EAAY;IACnB,IAAI,KAAK,GAAG,GAAG,CAAC,UAAJ,EAAZ;;IAEA,IAAG,KAAK,GAAG,CAAX,EAAa;MACZ,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,oBAApB;MACA,KAAK,CAAC,SAAN,CAAgB,MAAhB,CAAuB,mBAAvB;IACA,CAHD,MAGK;MACJ,KAAK,CAAC,SAAN,CAAgB,GAAhB,CAAoB,mBAApB;MACA,KAAK,CAAC,SAAN,CAAgB,MAAhB,CAAuB,oBAAvB;IACA;EACD,CA/7BiD,CAi8BnD;;;EACC,eAAe,GAAE;IAChB,KAAK,UAAL,CAAgB,OAAhB,CAAwB,UAAS,GAAT,EAAa;MACpC,GAAG,CAAC,eAAJ;IACA,CAFD;EAGA,CAt8BiD,CAw8BnD;;;EACC,eAAe,GAAE;IAChB,IAAI,aAAa,GAAG,KAAK,OAAL,CAAa,YAAjC;IAAA,IAA+C,SAA/C;;IAEA,IAAG,KAAK,QAAL,CAAc,gBAAd,KAAmC,MAAtC,EAA6C;MAC5C,IAAI,WAAW,GAAI,IAAI,CAAC,KAAL,CAAW,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzB,GAAsC,qBAAtC,GAA8D,MAA9D,IAAwE,KAAK,KAAL,CAAW,aAAX,IAA4B,KAAK,KAAL,CAAW,aAAX,CAAyB,MAArD,IAA+D,CAAC,KAAK,KAAL,CAAW,aAAX,CAAyB,QAAzF,GAAoG,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzB,GAAsC,qBAAtC,GAA8D,MAAlK,GAA2K,CAAnP,CAAX,CAAnB;;MAEA,IAAG,KAAK,WAAR,EAAoB;QACnB,SAAS,GAAG,KAAK,CAAC,KAAK,KAAL,CAAW,OAAX,CAAmB,SAApB,CAAL,GAAsC,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAzD,GAAqE,KAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,GAA+B,IAAhH;QAEA,KAAK,OAAL,CAAa,KAAb,CAAmB,SAAnB,GAA+B,SAAS,IAAI,iBAAiB,WAAjB,GAA+B,KAA3E;QACA,KAAK,OAAL,CAAa,KAAb,CAAmB,MAAnB,GAA4B,iBAAiB,WAAjB,GAA+B,KAA3D;QACA,KAAK,OAAL,CAAa,KAAb,CAAmB,SAAnB,GAA+B,iBAAiB,WAAjB,GAA+B,KAA9D;MACA,CAND,MAMK;QACJ,KAAK,OAAL,CAAa,KAAb,CAAmB,MAAnB,GAA4B,EAA5B;QACA,KAAK,OAAL,CAAa,KAAb,CAAmB,MAAnB,GAA6B,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAnB,GAAkC,WAAnC,GAAkD,IAA9E;QACA,KAAK,OAAL,CAAa,SAAb,GAAyB,KAAK,SAA9B;MACA;;MAED,KAAK,QAAL,CAAc,MAAd,GAf4C,CAiB/C;;MACG,IAAG,CAAC,KAAK,WAAN,IAAqB,aAAa,IAAI,KAAK,OAAL,CAAa,YAAtD,EAAmE;QAClE,IAAG,KAAK,UAAL,CAAgB,cAAhB,CAAH,EAAmC;UAClC,KAAK,QAAL,CAAc,cAAd;QACA,CAFD,MAEK;UACJ,KAAK,MAAL;QACA;MACD;IACD;;IAED,KAAK,oBAAL;EACA,CAx+BiD,CA0+BnD;;;EACC,YAAY,GAAE;IACb,KAAK,IAAL,CAAU,OAAV,CAAkB,UAAS,GAAT,EAAa;MAC9B,GAAG,CAAC,YAAJ,CAAiB,IAAjB;IACA,CAFD;EAGA,CA/+BiD,CAi/BnD;;;EACC,WAAW,GAAG;IACb,KAAK,WAAL,GAAmB,IAAnB;IACA,KAAK,wBAAL,GAAgC,KAAhC;EACA,CAr/BiD,CAu/BnD;;;EACC,aAAa,GAAG;IACf,KAAK,WAAL,GAAmB,KAAnB;;IAEA,IAAG,KAAK,wBAAR,EAAiC;MAChC,KAAK,iBAAL,CAAuB,KAAK,wBAAL,CAA8B,OAArD,EAA8D,KAAK,wBAAL,CAA8B,SAA5F,EAAuG,KAAK,wBAAL,CAA8B,gBAArI;MAEA,KAAK,wBAAL,GAAgC,KAAhC;IACA,CAJD,MAIK;MACJ,IAAG,KAAK,2BAAR,EAAoC;QACnC,KAAK,kBAAL;MACA;IACD;;IAED,KAAK,2BAAL,GAAmC,KAAnC;EACA,CAtgCiD,CAwgCnD;;;EACC,MAAM,CAAE,KAAF,EAAQ;IACb,IAAI,IAAI,GAAG,KAAK,UAAhB;IAEA,KAAK,eAAL;IAEA,KAAK,KAAL,CAAW,UAAX,GAAwB,KAAK,KAAL,CAAW,OAAX,CAAmB,WAA3C;;IAEA,IAAG,CAAC,KAAJ,EAAU;MACT,KAAK,kBAAL;MACA,KAAK,gBAAL,CAAsB,IAAtB;IACA,CAHD,MAGK;MACJ,KAAK,WAAL;IACA;EACD;;EAED,WAAW,GAAE;IACZ,KAAK,OAAL,CAAa,UAAb,GAA0B,CAA1B;IACA,KAAK,OAAL,CAAa,SAAb,GAAyB,CAAzB;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,KAAuB,IAA1B,EAA+B;MAC9B,IAAI,KAAK,GAAG,QAAQ,CAAC,WAAT,CAAqB,OAArB,CAAZ;MACA,KAAK,CAAC,SAAN,CAAgB,QAAhB,EAA0B,KAA1B,EAAiC,IAAjC;MACA,KAAK,OAAL,CAAa,aAAb,CAA2B,KAA3B;IACA,CAJD,MAIK;MACJ,KAAK,OAAL,CAAa,aAAb,CAA2B,IAAI,KAAJ,CAAU,QAAV,CAA3B;IACA;EACD;;AAniCiD;;ACNpC,MAAM,aAAN,SAA4B,WAA5B,CAAuC;EAErD,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,MAAL,GAAc,KAAd;IACA,KAAK,OAAL,GAAe,KAAK,aAAL,EAAf,CAJiB,CAImB;;IACpC,KAAK,gBAAL,GAAwB,KAAK,sBAAL,EAAxB,CALiB,CAKqC;;IACtD,KAAK,QAAL,GAAgB,KAAhB;EACA;;EAED,UAAU,GAAE;IACX,KAAK,iBAAL;EACA;;EAED,aAAa,GAAE;IACd,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;IAEA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,kBAAjB;IAEA,OAAO,EAAP;EACA;;EAGD,sBAAsB,GAAE;IACvB,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;IAEA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,2BAAjB;IAEA,KAAK,OAAL,CAAa,WAAb,CAAyB,EAAzB;IAEA,OAAO,EAAP;EACA;;EAED,iBAAiB,GAAE;IAClB,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAtB,EAAoC;MAEnC,QAAO,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAjC;QACC,KAAK,QAAL;UACC,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAnB,CAAiC,CAAjC,MAAwC,GAA3C,EAA+C;YAC9C,KAAK,gBAAL,CAAsB,SAAtB,GAAkC,KAAK,KAAL,CAAW,OAAX,CAAmB,aAArD;UACA,CAFD,MAEK;YACJ,KAAK,QAAL,GAAgB,IAAhB;YACA,KAAK,gBAAL,GAAwB,QAAQ,CAAC,aAAT,CAAuB,KAAK,KAAL,CAAW,OAAX,CAAmB,aAA1C,CAAxB;UACA;;UACD;;QAED;UACC,KAAK,OAAL,GAAe,KAAK,KAAL,CAAW,OAAX,CAAmB,aAAlC;UACA;MAZF;IAcA;EACD;;EAED,UAAU,GAAE;IACX,OAAO,KAAK,OAAZ;EACA;;EAED,MAAM,CAAC,OAAD,EAAS;IACd,KAAK,QAAL;IAEA,KAAK,gBAAL,CAAsB,WAAtB,CAAkC,OAAlC;IACA,KAAK,KAAL,CAAW,UAAX,CAAsB,eAAtB;EACA;;EAED,OAAO,CAAC,OAAD,EAAS;IACf,KAAK,QAAL;IAEA,KAAK,OAAL,CAAa,YAAb,CAA0B,OAA1B,EAAmC,KAAK,OAAL,CAAa,UAAhD;IACA,KAAK,KAAL,CAAW,UAAX,CAAsB,eAAtB;EACA;;EAED,MAAM,CAAC,OAAD,EAAS;IACd,OAAO,CAAC,UAAR,CAAmB,WAAnB,CAA+B,OAA/B;IACA,KAAK,UAAL;EACA;;EAED,UAAU,CAAC,KAAD,EAAO;IAChB,IAAG,CAAC,KAAK,OAAL,CAAa,UAAd,IAA4B,KAA/B,EAAqC;MACpC,IAAG,CAAC,KAAK,QAAT,EAAkB;QACjB,KAAK,OAAL,CAAa,UAAb,CAAwB,WAAxB,CAAoC,KAAK,OAAzC;MACA;;MACD,KAAK,MAAL,GAAc,KAAd;IACA;EACD;;EAED,QAAQ,GAAE;IACT,IAAG,CAAC,KAAK,MAAT,EAAgB;MACf,KAAK,MAAL,GAAc,IAAd;;MACA,IAAG,CAAC,KAAK,QAAT,EAAkB;QACjB,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,KAAK,UAAL,EAA/B;QACA,KAAK,KAAL,CAAW,OAAX,CAAmB,KAAnB,CAAyB,OAAzB,GAAmC,EAAnC;MACA;IACD;EACD;;EAED,MAAM,GAAE;IACP,KAAK,QAAL,CAAc,eAAd;EACA;;AAlGoD;;ACCvC,MAAM,kBAAN,SAAiC,WAAjC,CAA6C;EAE3D,WAAW,CAAE,KAAF,EAAQ;IAClB,MAAM,KAAN;IAEA,KAAK,EAAL,GAAU,IAAV;IAEA,KAAK,YAAL,GAAoB,CAAC,mBAAD,EAAsB,iBAAtB,CAApB;IAEA,KAAK,eAAL,GAAuB,EAAvB;IAEA,KAAK,SAAL,GAAiB,CAChB,OADgB,EAEhB,UAFgB,EAGhB,aAHgB,EAIhB,YAJgB,EAKhB,YALgB,EAMhB,WANgB,EAOhB,UAPgB,EAQhB,WARgB,EAShB,YATgB,EAUhB,UAVgB,CAAjB;IAaA,KAAK,YAAL,GAAoB;MACnB,kBAAiB,MADE;MAEnB,iBAAgB,KAFG;MAGnB,mBAAkB,OAHC;MAInB,iBAAgB;IAJG,CAApB;IAOA,KAAK,cAAL,GAAsB;MACrB,OAAM;QACL,UAAU,EAAC,IADN;QAEL,MAAM,EAAC;MAFF,CADe;MAKrB,QAAO;QACN,UAAU,EAAC,IADL;QAEN,MAAM,EAAC;MAFD,CALc;MASrB,SAAQ;QACP,UAAU,EAAC,IADJ;QAEP,MAAM,EAAC;MAFA,CATa;MAarB,UAAS;QACR,UAAU,EAAC,IADH;QAER,MAAM,EAAC;MAFC;IAbY,CAAtB;IAmBA,KAAK,cAAL,GAAsB,KAAtB;EACA;;EAED,UAAU,GAAE;IACX,KAAK,EAAL,GAAU,KAAK,KAAL,CAAW,OAArB;IAEA,KAAK,gBAAL;IACA,KAAK,wBAAL;EACA;;EAED,gBAAgB,GAAE;IACjB,IAAI,WAAW,GAAG,EAAlB;IAEA,KAAK,SAAL,CAAe,OAAf,CAAwB,QAAD,IAAc;MACpC,WAAW,CAAC,QAAD,CAAX,GAAwB;QACvB,OAAO,EAAC,IADe;QAEvB,UAAU,EAAC;MAFY,CAAxB;IAIA,CALD;IAOA,KAAK,SAAL,GAAiB,WAAjB;EACA;;EAED,gBAAgB,GAAE;IACjB,MAAM,CAAC,IAAP,CAAY,KAAK,cAAjB,EAAiC,OAAjC,CAA0C,GAAD,IAAS;MACjD,KAAK,cAAL,CAAoB,GAApB,EAAyB,UAAzB,GAAsC,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,EAAiC,GAAjC,CAAtC;MACA,KAAK,SAAL,CAAe,GAAG,GAAG,YAArB,EAAmC,KAAK,cAAL,CAAoB,GAApB,EAAyB,UAA5D;IACA,CAHD;IAKA,KAAK,cAAL,GAAsB,IAAtB;EACA;;EAED,gBAAgB,CAAC,GAAD,EAAM,CAAN,EAAS,MAAT,EAAgB;IAC/B,IAAG,KAAK,cAAL,CAAoB,GAApB,EAAyB,MAAzB,KAAoC,MAAvC,EAA8C;MAE7C,IAAG,KAAK,cAAL,CAAoB,GAApB,EAAyB,MAA5B,EAAmC;QAClC,KAAK,QAAL,CAAc,GAAG,GAAG,aAApB,EAAmC,CAAnC,EAAsC,KAAK,cAAL,CAAoB,GAApB,EAAyB,MAA/D;MACA;;MAED,KAAK,gBAAL,CAAsB,GAAtB,EAA2B,CAA3B;MAEA,KAAK,cAAL,CAAoB,GAApB,EAAyB,MAAzB,GAAkC,MAAlC;MAEA,KAAK,QAAL,CAAc,GAAG,GAAG,aAApB,EAAmC,CAAnC,EAAsC,MAAtC;IACA;EACD;;EAED,gBAAgB,CAAC,GAAD,EAAM,CAAN,EAAQ;IACvB,IAAI,SAAS,GAAG,MAAM,CAAC,IAAP,CAAY,KAAK,cAAjB,CAAhB;IAAA,IACA,UAAU,GAAG;MACZ,OAAM,CAAC,MAAD,CADM;MAEZ,QAAO,CAAC,KAAD;IAFK,CADb;IAMA,SAAS,GAAG,SAAS,CAAC,MAAV,CAAkB,IAAD,IAAU;MACtC,IAAI,KAAK,GAAG,UAAU,CAAC,GAAD,CAAtB;MACA,OAAO,IAAI,KAAK,GAAT,KAAiB,CAAC,KAAD,IAAW,KAAK,IAAI,CAAC,KAAK,CAAC,QAAN,CAAe,IAAf,CAAtC,CAAP;IACA,CAHW,CAAZ;IAMA,SAAS,CAAC,OAAV,CAAmB,GAAD,IAAS;MAC1B,IAAI,MAAM,GAAG,KAAK,cAAL,CAAoB,GAApB,EAAyB,MAAtC;;MAEA,IAAG,KAAK,cAAL,CAAoB,GAApB,EAAyB,MAA5B,EAAmC;QAClC,KAAK,QAAL,CAAc,GAAG,GAAG,aAApB,EAAmC,CAAnC,EAAsC,MAAtC;QAEA,KAAK,cAAL,CAAoB,GAApB,EAAyB,MAAzB,GAAkC,IAAlC;MACA;IACD,CARD;EASA;;EAGD,wBAAwB,GAAE;IACzB,IAAI,SAAS,GAAG,MAAM,CAAC,IAAP,CAAY,KAAK,SAAjB,CAAhB;IAAA,IACA,UAAU,GAAG,MAAM,CAAC,MAAP,CAAc,KAAK,YAAnB,CADb;;IAGA,KAAI,IAAI,IAAR,IAAgB,UAAhB,EAA2B;MAC1B,KAAI,IAAI,QAAR,IAAoB,SAApB,EAA8B;QAC7B,IAAI,GAAG,GAAG,IAAI,GAAG,GAAP,GAAa,QAAvB;QAEA,KAAK,kBAAL,CAAwB,GAAxB,EAA6B,KAAK,mBAAL,CAAyB,IAAzB,CAA8B,IAA9B,EAAoC,IAApC,EAA0C,QAA1C,CAA7B;MACA;IACD;;IAED,KAAK,SAAL,CAAe,eAAf,EAAgC,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAhC;EACA;;EAED,mBAAmB,CAAC,SAAD,EAAY,GAAZ,EAAiB,KAAjB,EAAuB;IACzC,IAAI,QAAQ,GAAG,KAAK,SAAL,CAAe,GAAf,EAAoB,UAAnC;IAAA,IACA,KAAK,GAAG,QAAQ,CAAC,OAAT,CAAiB,SAAjB,CADR;IAAA,IAEA,OAAO,GAAG,KAFV;;IAIA,IAAG,KAAH,EAAS;MACR,IAAG,KAAK,KAAK,CAAC,CAAd,EAAgB;QACf,QAAQ,CAAC,IAAT,CAAc,SAAd;QACA,OAAO,GAAG,IAAV;MACA;IACD,CALD,MAKK;MACJ,IAAG,CAAC,KAAK,UAAL,CAAgB,SAAS,GAAG,GAAZ,GAAkB,GAAlC,CAAJ,EAA2C;QAC1C,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;UACb,QAAQ,CAAC,MAAT,CAAgB,KAAhB,EAAuB,CAAvB;UACA,OAAO,GAAG,IAAV;QACA;MACD;IACD;;IAED,IAAG,CAAC,GAAG,KAAK,YAAR,IAAwB,GAAG,KAAK,YAAjC,KAAkD,CAAC,KAAK,cAA3D,EAA0E;MACzE,KAAK,gBAAL;IACA;;IAED,IAAG,OAAH,EAAW;MACV,KAAK,oBAAL;IACA;EACD;;EAED,oBAAoB,GAAE;IACrB,KAAI,IAAI,GAAR,IAAe,KAAK,SAApB,EAA8B;MAC7B,IAAI,QAAQ,GAAG,KAAK,SAAL,CAAe,GAAf,CAAf;;MAEA,IAAG,QAAQ,CAAC,UAAT,CAAoB,MAAvB,EAA8B;QAC7B,IAAG,CAAC,QAAQ,CAAC,OAAb,EAAqB;UACpB,QAAQ,CAAC,OAAT,GAAmB,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB,EAAsB,GAAtB,CAAnB;UACA,KAAK,EAAL,CAAQ,gBAAR,CAAyB,GAAzB,EAA8B,QAAQ,CAAC,OAAvC,EAFoB,CAGzB;QACK;MACD,CAND,MAMK;QACJ,IAAG,QAAQ,CAAC,OAAZ,EAAoB;UACnB,KAAK,EAAL,CAAQ,mBAAR,CAA4B,GAA5B,EAAiC,QAAQ,CAAC,OAA1C;UACA,QAAQ,CAAC,OAAT,GAAmB,IAAnB;QACA;MACD;IACD;EACD;;EAED,KAAK,CAAC,IAAD,EAAO,CAAP,EAAS;IACb,IAAI,IAAI,GAAI,CAAC,CAAC,YAAF,IAAkB,CAAC,CAAC,YAAF,EAAnB,IAAwC,CAAC,CAAC,IAArD;IAEA,IAAI,OAAO,GAAG,KAAK,WAAL,CAAiB,IAAjB,CAAd;IACA,OAAO,GAAG,KAAK,cAAL,CAAoB,IAApB,EAA0B,OAA1B,CAAV;IAEA,KAAK,aAAL,CAAmB,IAAnB,EAAyB,CAAzB,EAA4B,OAA5B;;IAEA,IAAG,KAAK,cAAL,KAAwB,IAAI,IAAI,WAAR,IAAuB,IAAI,IAAI,YAAvD,KAAwE,CAAC,MAAM,CAAC,IAAP,CAAY,OAAZ,EAAqB,MAAjG,EAAwG;MACvG,KAAK,gBAAL,CAAsB,MAAtB,EAA8B,CAA9B;IACA;EACD;;EAED,WAAW,CAAC,IAAD,EAAM;IAChB,IAAI,OAAO,GAAG,EAAd;IAEA,IAAI,YAAY,GAAG,MAAM,CAAC,IAAP,CAAY,KAAK,YAAjB,CAAnB;;IAEA,KAAK,IAAI,EAAT,IAAe,IAAf,EAAqB;MACpB,IAAI,SAAS,GAAG,EAAE,CAAC,SAAH,GAAe,CAAC,GAAG,EAAE,CAAC,SAAP,CAAf,GAAmC,EAAnD;MAEA,IAAI,KAAK,GAAG,SAAS,CAAC,MAAV,CAAkB,IAAD,IAAU;QACtC,OAAO,KAAK,YAAL,CAAkB,QAAlB,CAA2B,IAA3B,CAAP;MACA,CAFW,CAAZ;;MAIA,IAAG,KAAK,CAAC,MAAT,EAAgB;QACf;MACA;;MAED,IAAI,SAAS,GAAG,SAAS,CAAC,MAAV,CAAkB,IAAD,IAAU;QAC1C,OAAO,YAAY,CAAC,QAAb,CAAsB,IAAtB,CAAP;MACA,CAFe,CAAhB;;MAIA,KAAK,IAAI,MAAT,IAAmB,SAAnB,EAA8B;QAC7B,IAAG,CAAC,OAAO,CAAC,KAAK,YAAL,CAAkB,MAAlB,CAAD,CAAX,EAAuC;UACtC,OAAO,CAAC,KAAK,YAAL,CAAkB,MAAlB,CAAD,CAAP,GAAqC,EAArC;QACA;MACD;IACD;;IAED,IAAG,OAAO,CAAC,KAAR,IAAiB,OAAO,CAAC,KAAR,KAAkB,OAAO,CAAC,GAA9C,EAAkD;MACjD,OAAO,OAAO,CAAC,GAAf;IACA;;IAED,OAAO,OAAP;EACA;;EAED,cAAc,CAAC,IAAD,EAAO,OAAP,EAAe;IAC9B;IACE,IAAI,IAAI,GAAG,MAAM,CAAC,IAAP,CAAY,OAAZ,EAAqB,OAArB,EAAX;IAAA,IACA,QAAQ,GAAG,KAAK,SAAL,CAAe,IAAf,CADX;IAAA,IAEA,aAAa,GAAG,EAFhB;;IAIA,KAAI,IAAI,GAAR,IAAe,IAAf,EAAoB;MACnB,IAAI,SAAJ;MACA,IAAI,MAAM,GAAG,OAAO,CAAC,GAAD,CAApB;MACA,IAAI,cAAc,GAAG,KAAK,eAAL,CAAqB,GAArB,CAArB;;MAEA,IAAG,cAAc,IAAI,cAAc,CAAC,MAAf,KAA0B,MAA/C,EAAsD;QACrD,SAAS,GAAG,cAAc,CAAC,SAA3B;MACA,CAFD,MAEK;QACJ,QAAO,GAAP;UACC,KAAK,KAAL;UACA,KAAK,OAAL;YACC,IAAG,QAAQ,CAAC,UAAT,CAAoB,QAApB,CAA6B,KAA7B,KAAuC,QAAQ,CAAC,UAAT,CAAoB,QAApB,CAA6B,MAA7B,CAAvC,IAA+E,QAAQ,CAAC,UAAT,CAAoB,QAApB,CAA6B,OAA7B,CAAlF,EAAwH;cACvH,IAAI,IAAI,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,cAAtB,CAAqC,IAArC,CAAX;cAEA,SAAS,GAAG,IAAI,CAAC,IAAL,CAAW,GAAD,IAAS;gBAC9B,OAAO,GAAG,CAAC,UAAJ,OAAqB,MAA5B;cACA,CAFW,CAAZ;;cAIA,IAAG,OAAO,CAAC,KAAD,CAAP,IAAkB,OAAO,CAAC,KAAD,CAAP,CAAe,UAAjC,IAA+C,OAAO,CAAC,KAAD,CAAP,CAAe,UAAf,CAA0B,OAA1B,CAAkC,gBAAlC,CAAlD,EAAsG;gBACrG,OAAO,CAAC,GAAD,CAAP,GAAe,KAAf;cACA;YACD;;YACD;;UAED,KAAK,QAAL;YACC,IAAG,QAAQ,CAAC,UAAT,CAAoB,QAApB,CAA6B,QAA7B,CAAH,EAA0C;cACzC,SAAS,GAAG,KAAK,KAAL,CAAW,aAAX,CAAyB,UAAzB,CAAoC,MAApC,CAAZ;YACA;;YACD;;UAED,KAAK,MAAL;YACC,IAAG,QAAQ,CAAC,UAAT,CAAoB,QAApB,CAA6B,MAA7B,CAAH,EAAwC;cACvC,IAAG,OAAO,CAAC,KAAD,CAAP,YAA0B,GAA7B,EAAiC;gBAChC,SAAS,GAAG,OAAO,CAAC,KAAD,CAAP,CAAe,QAAf,CAAwB,MAAxB,CAAZ;cACA,CAFD,MAEK;gBACJ,IAAG,OAAO,CAAC,KAAD,CAAV,EAAkB;kBACjB,OAAO,CAAC,IAAR,CAAa,+IAAb;gBACA;cACD;YACD;;YACD;QAhCF;MAkCA;;MAED,IAAG,SAAH,EAAa;QACZ,OAAO,CAAC,GAAD,CAAP,GAAe,SAAf;QACA,aAAa,CAAC,GAAD,CAAb,GAAqB;UACpB,MAAM,EAAC,MADa;UAEpB,SAAS,EAAC;QAFU,CAArB;MAIA;IACD;;IAED,KAAK,eAAL,GAAuB,aAAvB;IAEA,OAAO,OAAP;EACA;;EAED,aAAa,CAAC,IAAD,EAAO,CAAP,EAAU,OAAV,EAAkB;IAC9B,IAAI,QAAQ,GAAG,KAAK,SAAL,CAAe,IAAf,CAAf;;IAEA,KAAI,IAAI,GAAR,IAAe,OAAf,EAAuB;MACtB,IAAG,OAAO,CAAC,GAAD,CAAP,IAAgB,QAAQ,CAAC,UAAT,CAAoB,QAApB,CAA6B,GAA7B,CAAnB,EAAqD;QACpD,KAAK,QAAL,CAAc,GAAG,GAAG,GAAN,GAAY,IAA1B,EAAgC,CAAhC,EAAmC,OAAO,CAAC,GAAD,CAA1C;MACA;IACD;EACD;;EAED,aAAa,GAAE;IACd,KAAI,IAAI,GAAR,IAAe,KAAK,SAApB,EAA8B;MAC7B,IAAI,QAAQ,GAAG,KAAK,SAAL,CAAe,GAAf,CAAf;;MAEA,IAAG,QAAQ,CAAC,OAAZ,EAAoB;QACnB,KAAK,EAAL,CAAQ,mBAAR,CAA4B,GAA5B,EAAiC,QAAQ,CAAC,OAA1C;QACA,QAAQ,CAAC,OAAT,GAAmB,IAAnB;MACA;IACD;EACD;;AA1T0D;;ACH7C,MAAM,uBAAN,CAA6B;EAE3C,WAAW,CAAC,KAAD,EAAO;IACjB,KAAK,KAAL,GAAa,KAAb;IAEA,KAAK,QAAL,GAAgB,EAAhB;EACA;;EAED,IAAI,CAAC,IAAD,EAAO,QAAP,EAAiB,OAAjB,EAAyB;IAC5B,IAAG,CAAC,KAAK,QAAL,CAAc,IAAd,CAAJ,EAAwB;MACvB,KAAK,QAAL,CAAc,IAAd,IAAsB,EAAtB;IACA;;IAED,IAAG,KAAK,QAAL,CAAc,IAAd,EAAoB,QAApB,CAAH,EAAiC;MAChC,OAAO,CAAC,IAAR,CAAa,6EAAb,EAA4F,IAA5F,EAAkG,QAAlG,EAA4G,OAA5G;IACA,CAFD,MAEK;MACJ,KAAK,QAAL,CAAc,IAAd,EAAoB,QAApB,IAAgC,OAAhC;IACA;EACD;;EAED,MAAM,CAAC,IAAD,EAAO,SAAP,EAAkB,IAAlB,EAAuB;IAC5B,IAAG,KAAK,QAAL,CAAc,IAAd,KAAuB,KAAK,QAAL,CAAc,IAAd,EAAoB,IAApB,CAAvB,IAAoD,OAAO,KAAK,QAAL,CAAc,IAAd,EAAoB,IAApB,EAA0B,IAAjC,KAA0C,UAAjG,EAA4G;MAC3G,OAAO,KAAK,QAAL,CAAc,IAAd,EAAoB,IAApB,EAA0B,IAA1B,CAA+B,IAA/B,EAAqC,SAArC,CAAP;IACA,CAFD,MAEK;MACJ,IAAG,IAAI,KAAK,MAAT,IAAmB,OAAO,IAAP,KAAgB,QAAnC,IAA+C,CAAC,IAAI,CAAC,UAAL,CAAgB,GAAhB,CAAnD,EAAwE;QACvE,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,0BAAtB,EAAiD;UAChD,OAAO,CAAC,KAAR,CAAc,SAAS,IAAT,GAAgB,6BAAhB,GAAgD,IAAhD,GAAuD,mFAArE;QACA;MACD;IACD;EACD;;AA9B0C;;ACE7B,MAAM,UAAN,SAAyB,WAAzB,CAAoC;EAClD,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,YAAL,GAAoB,CAApB,CAHiB,CAGK;;IACtB,KAAK,OAAL,GAAe,KAAf;EACA;;EAED,UAAU,GAAE,CAAE;;EAEd,IAAI,CAAC,IAAD,EAAO,MAAP,EAAe,MAAf,EAAuB,OAAvB,EAAgC,MAAhC,EAAwC,cAAxC,EAAuD;IAC1D,IAAI,SAAS,GAAG,EAAE,KAAK,YAAvB;IAEA,KAAK,gBAAL,CAAsB,aAAtB,EAAqC,IAArC,EAH0D,CAK5D;;IACE,IAAI,IAAI,KAAK,IAAI,CAAC,OAAL,CAAa,GAAb,KAAqB,CAArB,IAA0B,IAAI,CAAC,OAAL,CAAa,GAAb,KAAqB,CAApD,CAAR,EAA+D;MAC9D,IAAI,GAAG,IAAI,CAAC,KAAL,CAAW,IAAX,CAAP;IACA;;IAED,IAAG,KAAK,OAAL,CAAa,cAAb,EAA6B,CAAC,IAAD,EAAO,MAAP,EAAe,MAAf,EAAuB,MAAvB,CAA7B,CAAH,EAAgE;MAC/D,KAAK,OAAL,GAAe,IAAf;;MAEA,IAAG,CAAC,MAAJ,EAAW;QACV,KAAK,WAAL;MACA,CAL8D,CAOlE;;;MACG,MAAM,GAAG,KAAK,KAAL,CAAW,aAAX,EAA0B,CAAC,IAAD,EAAO,MAAP,EAAe,MAAf,CAA1B,EAAkD,MAAM,IAAI,EAA5D,EAAgE,MAAM,IAAI,EAA1E,CAAT;MAEA,MAAM,GAAG,KAAK,SAAL,CAAe,MAAf,EAAuB,KAAK,KAAL,CAAW,OAAX,CAAmB,cAA1C,CAAT;MAEA,IAAI,MAAM,GAAG,KAAK,KAAL,CAAW,WAAX,EAAwB,CAAC,IAAD,EAAO,MAAP,EAAe,MAAf,EAAuB,MAAvB,CAAxB,EAAwD,KAAxD,EAA+D,OAAO,CAAC,OAAR,CAAgB,EAAhB,CAA/D,CAAb;MAEA,OAAO,MAAM,CAAC,IAAP,CAAa,QAAD,IAAc;QAChC,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,QAAd,CAAD,IAA4B,OAAO,QAAP,IAAmB,QAAlD,EAA2D;UAC1D,QAAQ,GAAG,KAAK,SAAL,CAAe,QAAf,EAAyB,KAAK,YAAL,CAAkB,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAArC,CAAzB,CAAX;QACA;;QAED,IAAI,OAAO,GAAG,KAAK,KAAL,CAAW,aAAX,EAA0B,QAA1B,EAAoC,IAApC,EAA0C,QAA1C,CAAd;;QAEA,IAAG,SAAS,IAAI,KAAK,YAArB,EAAkC;UACjC,KAAK,UAAL;;UAEA,IAAG,OAAO,KAAK,KAAf,EAAqB;YACpB,KAAK,gBAAL,CAAsB,YAAtB,EAAoC,OAApC;YACA,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,OAA9B,EAAwC,OAAxC,EAAiD,OAAO,cAAP,KAA0B,WAA1B,GAAwC,CAAC,OAAzC,GAAmD,cAApG;UACA;QACD,CAPD,MAOK;UACJ,OAAO,CAAC,IAAR,CAAa,0IAAb;QACA;MACD,CAjBM,EAiBJ,KAjBI,CAiBG,KAAD,IAAW;QACnB,OAAO,CAAC,KAAR,CAAc,mBAAd,EAAmC,KAAnC;QACA,KAAK,gBAAL,CAAsB,eAAtB,EAAuC,KAAvC;;QAEA,IAAG,CAAC,MAAJ,EAAW;UACV,KAAK,UAAL;QACA;;QAED,UAAU,CAAC,MAAM;UAChB,KAAK,UAAL;QACA,CAFS,EAEP,KAAK,KAAL,CAAW,OAAX,CAAmB,sBAFZ,CAAV;MAGA,CA5BM,EA6BL,OA7BK,CA6BG,MAAM;QACd,KAAK,OAAL,GAAe,KAAf;MACA,CA/BK,CAAP;IAgCA,CA9CD,MA8CK;MACJ,KAAK,gBAAL,CAAsB,YAAtB,EAAoC,IAApC;;MAEA,IAAG,CAAC,IAAJ,EAAS;QACR,IAAI,GAAG,EAAP;MACA;;MAED,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,IAA9B,EAAoC,OAApC,EAA6C,OAAO,cAAP,KAA0B,WAA1B,GAAwC,CAAC,OAAzC,GAAmD,cAAhG;MACA,OAAO,OAAO,CAAC,OAAR,EAAP;IACA;EACD;;EAED,SAAS,CAAC,MAAD,EAAS,GAAT,EAAa;IACrB,IAAI,MAAM,GAAG,EAAb;;IAEA,KAAI,IAAI,GAAR,IAAe,MAAf,EAAsB;MACrB,MAAM,CAAC,GAAG,CAAC,cAAJ,CAAmB,GAAnB,IAA0B,GAAG,CAAC,GAAD,CAA7B,GAAqC,GAAtC,CAAN,GAAmD,MAAM,CAAC,GAAD,CAAzD;IACA;;IAED,OAAO,MAAP;EACA;;EAED,YAAY,CAAC,GAAD,EAAK;IAChB,IAAI,MAAM,GAAG,EAAb;;IAEA,KAAI,IAAI,GAAR,IAAe,GAAf,EAAmB;MAClB,MAAM,CAAC,GAAG,CAAC,GAAD,CAAJ,CAAN,GAAmB,GAAnB;IACA;;IAED,OAAO,MAAP;EACA;;EAED,eAAe,GAAE;IAChB,KAAK,YAAL;EACA;;EAED,WAAW,GAAE;IACZ,IAAI,UAAU,GAAG,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,UAA1B,KAAyC,UAAzC,GAAsD,KAAK,KAAL,CAAW,OAAX,CAAmB,UAAnB,EAAtD,GAAwF,KAAK,KAAL,CAAW,OAAX,CAAmB,UAA5H;;IAEA,IAAG,UAAH,EAAc;MACb,KAAK,KAAL,CAAW,YAAX,CAAwB,KAAxB,CAA8B,KAAK,KAAL,CAAW,OAAX,CAAmB,iBAAnB,IAAwC,KAAK,QAAL,CAAc,cAAd,CAAtE;IACA;EACD;;EAED,UAAU,GAAE;IACX,KAAK,KAAL,CAAW,YAAX,CAAwB,KAAxB,CAA8B,KAAK,KAAL,CAAW,OAAX,CAAmB,eAAnB,IAAsC,KAAK,QAAL,CAAc,YAAd,CAApE,EAAiG,OAAjG;EACA;;EAED,UAAU,GAAE;IACX,KAAK,KAAL,CAAW,YAAX,CAAwB,KAAxB;EACA;;AApHiD;;ACFpC,MAAM,gBAAN,CAAuB;EAErC,WAAW,CAAC,KAAD,EAAQ,WAAR,EAAqB,KAArB,EAA2B;IACrC,KAAK,KAAL,GAAa,KAAb;IACA,KAAK,MAAL,GAAc,EAAd;IACA,KAAK,WAAL,GAAmB,WAAW,IAAI,EAAlC;IACA,KAAK,qBAAL,GAA6B,EAA7B;IAEA,KAAK,QAAL,GAAgB,KAAK,GAAG,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAAH,GAAoC,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAAzD;IACA,KAAK,KAAL,GAAa,KAAb;EACA;;EAED,kBAAkB,CAAC,GAAD,EAAM,QAAN,EAAe;IAChC,IAAG,CAAC,KAAK,qBAAL,CAA2B,GAA3B,CAAJ,EAAoC;MACnC,KAAK,qBAAL,CAA2B,GAA3B,IAAkC,EAAlC;IACA;;IAED,KAAK,qBAAL,CAA2B,GAA3B,EAAgC,IAAhC,CAAqC,QAArC;;IAEA,IAAG,KAAK,UAAL,CAAgB,GAAhB,CAAH,EAAwB;MACvB,KAAK,yBAAL,CAA+B,GAA/B,EAAoC,IAApC;IACA;EACD;;EAED,SAAS,CAAC,GAAD,EAAM,QAAN,EAAe;IACvB,IAAG,CAAC,KAAK,MAAL,CAAY,GAAZ,CAAJ,EAAqB;MACpB,KAAK,MAAL,CAAY,GAAZ,IAAmB,EAAnB;IACA;;IAED,KAAK,MAAL,CAAY,GAAZ,EAAiB,IAAjB,CAAsB,QAAtB;;IAEA,KAAK,yBAAL,CAA+B,GAA/B,EAAoC,IAApC;EACA;;EAED,WAAW,CAAC,GAAD,EAAM,QAAN,EAAe;IACzB,IAAI,KAAJ;;IAEA,IAAG,KAAK,MAAL,CAAY,GAAZ,CAAH,EAAoB;MACnB,IAAG,QAAH,EAAY;QACX,KAAK,GAAG,KAAK,MAAL,CAAY,GAAZ,EAAiB,SAAjB,CAA4B,IAAD,IAAU;UAC5C,OAAO,IAAI,KAAK,QAAhB;QACA,CAFO,CAAR;;QAIA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;UACb,KAAK,MAAL,CAAY,GAAZ,EAAiB,MAAjB,CAAwB,KAAxB,EAA+B,CAA/B;QACA,CAFD,MAEK;UACJ,OAAO,CAAC,IAAR,CAAa,+CAAb,EAA8D,GAA9D,EAAmE,QAAnE;UACA;QACA;MACD,CAXD,MAWK;QACJ,OAAO,KAAK,MAAL,CAAY,GAAZ,CAAP;MACA;IACD,CAfD,MAeK;MACJ,OAAO,CAAC,IAAR,CAAa,wCAAb,EAAuD,GAAvD;MACA;IACA;;IAED,KAAK,yBAAL,CAA+B,GAA/B,EAAoC,KAApC;EACA;;EAED,UAAU,CAAC,GAAD,EAAK;IACd,OAAO,KAAK,MAAL,CAAY,GAAZ,KAAoB,KAAK,MAAL,CAAY,GAAZ,EAAiB,MAA5C;EACA;;EAED,yBAAyB,CAAC,GAAD,EAAM,UAAN,EAAiB;IACzC,IAAI,SAAS,GAAG,KAAK,qBAAL,CAA2B,GAA3B,CAAhB;;IAEA,IAAG,SAAH,EAAa;MACZ,SAAS,CAAC,OAAV,CAAmB,QAAD,IAAY;QAC7B,QAAQ,CAAC,UAAD,CAAR;MACA,CAFD;IAGA;EACD;;EAED,SAAS,GAAE;IACV,IAAI,IAAI,GAAG,KAAK,CAAC,IAAN,CAAW,SAAX,CAAX;IAAA,IACA,GAAG,GAAG,IAAI,CAAC,KAAL,EADN;IAAA,IAEA,MAFA;;IAIA,IAAG,KAAK,MAAL,CAAY,GAAZ,CAAH,EAAoB;MACnB,KAAK,MAAL,CAAY,GAAZ,EAAiB,OAAjB,CAAyB,CAAC,QAAD,EAAW,CAAX,KAAiB;QACzC,IAAI,UAAU,GAAG,QAAQ,CAAC,KAAT,CAAe,KAAK,KAApB,EAA2B,IAA3B,CAAjB;;QAEA,IAAG,CAAC,CAAJ,EAAM;UACL,MAAM,GAAG,UAAT;QACA;MACD,CAND;IAOA;;IAED,OAAO,MAAP;EACA;;EAED,cAAc,GAAE;IACf,IAAI,IAAI,GAAG,KAAK,CAAC,IAAN,CAAW,SAAX,CAAX;IAAA,IACA,GAAG,GAAG,IAAI,CAAC,CAAD,CADV;IAGA,IAAI,CAAC,CAAD,CAAJ,GAAU,mBAAmB,IAAI,CAAC,CAAD,CAAjC;;IAEA,IAAG,KAAK,KAAL,KAAe,IAAf,IAAuB,KAAK,KAAL,CAAW,QAAX,CAAoB,GAApB,CAA1B,EAAmD;MAClD,OAAO,CAAC,GAAR,CAAY,GAAG,IAAf;IACA;;IAED,OAAO,KAAK,SAAL,CAAe,GAAG,SAAlB,CAAP;EACA;;AAvGoC;;ACAvB,MAAM,gBAAN,CAAuB;EAErC,WAAW,CAAC,KAAD,EAAO;IACjB,KAAK,MAAL,GAAc,EAAd;IACA,KAAK,qBAAL,GAA6B,EAA7B;IAEA,KAAK,QAAL,GAAgB,KAAK,GAAG,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAAH,GAAoC,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAAzD;IACA,KAAK,KAAL,GAAa,KAAK,GAAG,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAH,GAAiC,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAAnD;IACA,KAAK,OAAL,GAAe,KAAK,GAAG,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAAH,GAAmC,KAAK,QAAL,CAAc,IAAd,CAAmB,IAAnB,CAAvD;IACA,KAAK,KAAL,GAAa,KAAb;EACA;;EAED,kBAAkB,CAAC,GAAD,EAAM,QAAN,EAAe;IAChC,IAAG,CAAC,KAAK,qBAAL,CAA2B,GAA3B,CAAJ,EAAoC;MACnC,KAAK,qBAAL,CAA2B,GAA3B,IAAkC,EAAlC;IACA;;IAED,KAAK,qBAAL,CAA2B,GAA3B,EAAgC,IAAhC,CAAqC,QAArC;;IAEA,IAAG,KAAK,UAAL,CAAgB,GAAhB,CAAH,EAAwB;MACvB,KAAK,yBAAL,CAA+B,GAA/B,EAAoC,IAApC;IACA;EACD;;EAED,SAAS,CAAC,GAAD,EAAM,QAAN,EAAgB,QAAQ,GAAG,KAA3B,EAAiC;IACzC,IAAG,CAAC,KAAK,MAAL,CAAY,GAAZ,CAAJ,EAAqB;MACpB,KAAK,MAAL,CAAY,GAAZ,IAAmB,EAAnB;IACA;;IAED,KAAK,MAAL,CAAY,GAAZ,EAAiB,IAAjB,CAAsB;MAAC,QAAD;MAAW;IAAX,CAAtB;IAEA,KAAK,MAAL,CAAY,GAAZ,EAAiB,IAAjB,CAAsB,CAAC,CAAD,EAAI,CAAJ,KAAU;MAC/B,OAAO,CAAC,CAAC,QAAF,GAAa,CAAC,CAAC,QAAtB;IACA,CAFD;;IAIA,KAAK,yBAAL,CAA+B,GAA/B,EAAoC,IAApC;EACA;;EAED,WAAW,CAAC,GAAD,EAAM,QAAN,EAAe;IACzB,IAAI,KAAJ;;IAEA,IAAG,KAAK,MAAL,CAAY,GAAZ,CAAH,EAAoB;MACnB,IAAG,QAAH,EAAY;QACX,KAAK,GAAG,KAAK,MAAL,CAAY,GAAZ,EAAiB,SAAjB,CAA4B,IAAD,IAAU;UAC5C,OAAO,IAAI,CAAC,QAAL,KAAkB,QAAzB;QACA,CAFO,CAAR;;QAIA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;UACb,KAAK,MAAL,CAAY,GAAZ,EAAiB,MAAjB,CAAwB,KAAxB,EAA+B,CAA/B;QACA,CAFD,MAEK;UACJ,OAAO,CAAC,IAAR,CAAa,+CAAb,EAA8D,GAA9D,EAAmE,QAAnE;UACA;QACA;MACD;IACD,CAbD,MAaK;MACJ,OAAO,CAAC,IAAR,CAAa,wCAAb,EAAuD,GAAvD;MACA;IACA;;IAED,KAAK,yBAAL,CAA+B,GAA/B,EAAoC,KAApC;EACA;;EAED,UAAU,CAAC,GAAD,EAAK;IACd,OAAO,KAAK,MAAL,CAAY,GAAZ,KAAoB,KAAK,MAAL,CAAY,GAAZ,EAAiB,MAA5C;EACA;;EAED,MAAM,CAAC,GAAD,EAAM,IAAN,EAAY,YAAZ,EAA0B,QAA1B,EAAmC;IACxC,IAAI,KAAK,GAAG,YAAZ;;IAEA,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,IAAd,CAAJ,EAAwB;MACvB,IAAI,GAAG,CAAC,IAAD,CAAP;IACA;;IAED,IAAG,KAAK,UAAL,CAAgB,GAAhB,CAAH,EAAwB;MACvB,KAAK,MAAL,CAAY,GAAZ,EAAiB,OAAjB,CAAyB,CAAC,UAAD,EAAa,CAAb,KAAmB;QAC3C,KAAK,GAAG,UAAU,CAAC,QAAX,CAAoB,KAApB,CAA0B,IAA1B,EAAgC,IAAI,CAAC,MAAL,CAAY,CAAC,KAAD,CAAZ,CAAhC,CAAR;MACA,CAFD;MAIA,OAAO,KAAP;IACA,CAND,MAMK;MACJ,OAAO,OAAO,QAAP,KAAoB,UAApB,GAAiC,QAAQ,EAAzC,GAA8C,QAArD;IACA;EACD;;EAED,QAAQ,CAAC,GAAD,EAAM,IAAN,EAAW;IAClB,IAAI,SAAS,GAAG,KAAhB;;IAEA,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,IAAd,CAAJ,EAAwB;MACvB,IAAI,GAAG,CAAC,IAAD,CAAP;IACA;;IAED,IAAG,KAAK,UAAL,CAAgB,GAAhB,CAAH,EAAwB;MACvB,KAAK,MAAL,CAAY,GAAZ,EAAiB,OAAjB,CAAyB,CAAC,UAAD,EAAa,CAAb,KAAmB;QAC3C,IAAG,UAAU,CAAC,QAAX,CAAoB,KAApB,CAA0B,IAA1B,EAAgC,IAAhC,CAAH,EAAyC;UACxC,SAAS,GAAG,IAAZ;QACA;MACD,CAJD;IAKA;;IAED,OAAO,SAAP;EACA;;EAED,yBAAyB,CAAC,GAAD,EAAM,UAAN,EAAiB;IACzC,IAAI,SAAS,GAAG,KAAK,qBAAL,CAA2B,GAA3B,CAAhB;;IAEA,IAAG,SAAH,EAAa;MACZ,SAAS,CAAC,OAAV,CAAmB,QAAD,IAAY;QAC7B,QAAQ,CAAC,UAAD,CAAR;MACA,CAFD;IAGA;EACD;;EAED,SAAS,GAAE;IACV,IAAI,IAAI,GAAG,KAAK,CAAC,IAAN,CAAW,SAAX,CAAX;IAAA,IACA,GAAG,GAAG,IAAI,CAAC,KAAL,EADN;;IAGA,IAAG,KAAK,MAAL,CAAY,GAAZ,CAAH,EAAoB;MACnB,KAAK,MAAL,CAAY,GAAZ,EAAiB,OAAjB,CAA0B,UAAD,IAAgB;QACxC,UAAU,CAAC,QAAX,CAAoB,KAApB,CAA0B,IAA1B,EAAgC,IAAhC;MACA,CAFD;IAGA;EACD;;EAED,cAAc,GAAE;IACf,IAAI,IAAI,GAAG,KAAK,CAAC,IAAN,CAAW,SAAX,CAAX;IAAA,IACA,GAAG,GAAG,IAAI,CAAC,CAAD,CADV;IAGA,IAAI,CAAC,CAAD,CAAJ,GAAU,mBAAmB,GAA7B;;IAEA,IAAG,KAAK,KAAL,KAAe,IAAf,IAAuB,KAAK,KAAL,CAAW,QAAX,CAAoB,GAApB,CAA1B,EAAmD;MAClD,OAAO,CAAC,GAAR,CAAY,GAAG,IAAf;IACA;;IAED,OAAO,KAAK,SAAL,CAAe,GAAG,SAAlB,CAAP;EACA;;EAED,WAAW,GAAE;IACZ,IAAI,IAAI,GAAG,KAAK,CAAC,IAAN,CAAW,SAAX,CAAX;IAAA,IACA,GAAG,GAAG,IAAI,CAAC,CAAD,CADV;IAGA,IAAI,CAAC,CAAD,CAAJ,GAAU,mBAAmB,GAA7B;;IAEA,IAAG,KAAK,KAAL,KAAe,IAAf,IAAuB,KAAK,KAAL,CAAW,QAAX,CAAoB,GAApB,CAA1B,EAAmD;MAClD,OAAO,CAAC,GAAR,CAAY,GAAG,IAAf;IACA;;IAED,OAAO,KAAK,MAAL,CAAY,GAAG,SAAf,CAAP;EACA;;EAED,aAAa,GAAE;IACd,IAAI,IAAI,GAAG,KAAK,CAAC,IAAN,CAAW,SAAX,CAAX;IAAA,IACA,GAAG,GAAG,IAAI,CAAC,CAAD,CADV;IAGA,IAAI,CAAC,CAAD,CAAJ,GAAU,mBAAmB,GAA7B;;IAEA,IAAG,KAAK,KAAL,KAAe,IAAf,IAAuB,KAAK,KAAL,CAAW,QAAX,CAAoB,GAApB,CAA1B,EAAmD;MAClD,OAAO,CAAC,GAAR,CAAY,GAAG,IAAf;IACA;;IAED,OAAO,KAAK,QAAL,CAAc,GAAG,SAAjB,CAAP;EACA;;AAhKoC;;ACEvB,MAAM,kBAAN,SAAiC,WAAjC,CAA4C;EAE1D,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;EACA;;EAED,SAAS,GAAE;IACV,IAAG,KAAK,OAAL,CAAa,kBAAb,CAAH,EAAoC;MACnC,OAAO,CAAC,IAAR,CAAa,GAAG,SAAhB;IACA;EACD;;EAED,KAAK,CAAC,SAAD,EAAY,SAAZ,EAAsB;IAC1B,IAAI,GAAG,GAAG,EAAV;;IAEA,IAAG,OAAO,KAAK,OAAL,CAAa,SAAb,CAAP,KAAmC,WAAtC,EAAkD;MACjD,GAAG,GAAG,4CAA4C,SAA5C,GAAwD,6BAA9D;;MAEA,IAAG,SAAH,EAAa;QACZ,GAAG,GAAG,GAAG,GAAG,qBAAN,GAA8B,SAA9B,GAA0C,mBAAhD;;QACA,KAAK,SAAL,CAAe,GAAf,EAAoB,oBAApB,EAA0C,sBAA1C,EAAkE,oBAAlE,EAAwF,sBAAxF;MACA,CAHD,MAGK;QACJ,KAAK,SAAL,CAAe,GAAf,EAAoB,oBAApB,EAA0C,sBAA1C;MACA;;MAED,OAAO,KAAP;IACA,CAXD,MAWK;MACJ,OAAO,IAAP;IACA;EACD;;EAED,QAAQ,CAAC,SAAD,EAAY,GAAZ,EAAgB;IACvB,IAAG,OAAO,KAAK,OAAL,CAAa,SAAb,CAAP,KAAmC,WAAtC,EAAkD;MACjD,KAAK,SAAL,CAAe,8CAA8C,SAA9C,GAA0D,gCAA1D,GAA6F,GAA5G,EAAiH,sBAAjH,EAAyI,oBAAzI,EAA+J,sBAA/J;;MAEA,OAAO,KAAP;IACA,CAJD,MAIK;MACJ,OAAO,IAAP;IACA;EACD;;EAED,GAAG,CAAC,GAAD,EAAK;IACP,KAAK,SAAL,CAAe,GAAf;EACA;;AA3CyD;;ACA3D,MAAM,aAAN,CAAoB;EAEJ,OAAR,QAAQ,CAAC,KAAD,EAAO;IACrB,aAAa,CAAC,MAAd,CAAqB,IAArB,CAA0B,KAA1B;EACA;;EAEgB,OAAV,UAAU,CAAC,KAAD,EAAO;IACvB,IAAI,KAAK,GAAG,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,KAA7B,CAAZ;;IAEA,IAAG,KAAK,GAAG,CAAC,CAAZ,EAAc;MACb,aAAa,CAAC,MAAd,CAAqB,MAArB,CAA4B,KAA5B,EAAmC,CAAnC;IACA;EACD;;EAEiB,OAAX,WAAW,CAAC,KAAD,EAAQ,MAAR,EAAe;IAChC,IAAI,OAAO,GAAG,EAAd;IAAA,IACA,OADA;IAAA,IACS,KADT;;IAGA,IAAG,OAAO,KAAP,KAAiB,QAApB,EAA6B;MAC5B,OAAO,GAAG,QAAQ,CAAC,gBAAT,CAA0B,KAA1B,CAAV;;MAEA,IAAG,OAAO,CAAC,MAAX,EAAkB;QACjB,KAAI,IAAI,CAAC,GAAG,CAAZ,EAAe,CAAC,GAAG,OAAO,CAAC,MAA3B,EAAmC,CAAC,EAApC,EAAuC;UACtC,KAAK,GAAG,aAAa,CAAC,YAAd,CAA2B,OAAO,CAAC,CAAD,CAAlC,CAAR;;UAEA,IAAG,KAAH,EAAS;YACR,OAAO,CAAC,IAAR,CAAa,KAAb;UACA;QACD;MACD;IAED,CAbD,MAaM,IAAI,OAAO,WAAP,KAAuB,WAAvB,IAAsC,KAAK,YAAY,WAAxD,IAAwE,KAAK,YAAY,SAA5F,EAAsG;MAC3G,KAAK,GAAG,aAAa,CAAC,YAAd,CAA2B,KAA3B,CAAR;;MAEA,IAAG,KAAH,EAAS;QACR,OAAO,CAAC,IAAR,CAAa,KAAb;MACA;IACD,CANK,MAMA,IAAG,KAAK,CAAC,OAAN,CAAc,KAAd,CAAH,EAAwB;MAC7B,KAAK,CAAC,OAAN,CAAc,UAAS,IAAT,EAAc;QAC3B,OAAO,GAAG,OAAO,CAAC,MAAR,CAAe,aAAa,CAAC,WAAd,CAA0B,IAA1B,CAAf,CAAV;MACA,CAFD;IAGA,CAJK,MAID;MACJ,IAAG,CAAC,MAAJ,EAAW;QACV,OAAO,CAAC,IAAR,CAAa,2CAAb,EAA0D,KAA1D;MACA;IACD;;IAED,OAAO,OAAP;EACA;;EAEkB,OAAZ,YAAY,CAAC,OAAD,EAAS;IAC3B,OAAO,aAAa,CAAC,MAAd,CAAqB,IAArB,CAA0B,UAAS,KAAT,EAAe;MAC/C,OAAO,OAAO,YAAY,SAAnB,GAA+B,KAAK,KAAK,OAAzC,GAAmD,KAAK,CAAC,OAAN,KAAkB,OAA5E;IACA,CAFM,CAAP;EAGA;;AAtDkB;;AAyDpB,aAAa,CAAC,MAAd,GAAuB,EAAvB,EC3DA;;AACe,SAAA,OAAA,CAAS,OAAT,EAAkB,MAAlB,EAAyB;EACvC,IAAG,MAAH,EAAU;IACT,KAAK,KAAL,CAAW,aAAX,CAAyB,QAAzB,CAAkC,wBAAlC,CAA2D,OAA3D;EACA;;EAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,IAAuC,KAAK,KAAL,CAAW,SAAX,CAAqB,kBAArB,EAAyC,IAAzC,CAA1C,EAAyF;IACxF,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,CAAoC,MAApC;EACA;AACF,ECTA;;;AACe,SAAA,cAAA,CAAS,OAAT,EAAkB,MAAlB,EAAyB;EACvC,OAAO,CAAC,OAAR,CAAgB,UAAS,MAAT,EAAgB;IAC/B,MAAM,CAAC,iBAAP;EACA,CAFD;;EAIA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,IAAuC,KAAK,KAAL,CAAW,SAAX,CAAqB,kBAArB,EAAyC,IAAzC,CAA1C,EAAyF;IACxF,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,CAAoC,MAApC;EACA;AACF,ECTA;;;AACe,SAAA,cAAA,CAAS,OAAT,EAAkB,MAAlB,EAAyB;EACvC,IAAI,SAAS,GAAG,CAAhB;EAAA,IACA,UAAU,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,WAD3C;EAAA,IAEA,GAAG,GAAG,CAFN;EAAA,IAGA,OAAO,GAAG,KAHV;EAKA,OAAO,CAAC,OAAR,CAAgB,CAAC,MAAD,EAAS,CAAT,KAAe;IAC9B,IAAG,CAAC,MAAM,CAAC,UAAX,EAAsB;MACrB,MAAM,CAAC,iBAAP;IACA;;IAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,GAAsC,MAAM,CAAC,OAAP,CAAe,UAAf,CAA0B,OAAhE,GAA0E,MAAM,CAAC,OAApF,EAA4F;MAC3F,OAAO,GAAG,MAAV;IACA;;IAED,IAAG,MAAM,CAAC,OAAV,EAAkB;MACjB,SAAS,IAAI,MAAM,CAAC,QAAP,EAAb;IACA;EACD,CAZD;;EAcA,IAAG,OAAH,EAAW;IACV,GAAG,GAAG,UAAU,GAAG,SAAb,GAAyB,OAAO,CAAC,QAAR,EAA/B;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,IAAuC,KAAK,KAAL,CAAW,SAAX,CAAqB,kBAArB,EAAyC,IAAzC,CAA1C,EAAyF;MACxF,OAAO,CAAC,QAAR,CAAiB,CAAjB;MACA,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,CAAoC,MAApC;IACA;;IAED,IAAG,GAAG,GAAG,CAAT,EAAW;MACV,OAAO,CAAC,QAAR,CAAiB,GAAjB;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,iBAAR;IACA;EACD,CAbD,MAaK;IACJ,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,IAAuC,KAAK,KAAL,CAAW,SAAX,CAAqB,kBAArB,EAAyC,IAAzC,CAA1C,EAAyF;MACxF,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,CAAoC,MAApC;IACA;EACD;AACF,ECvCA;;;AACe,SAAA,UAAA,CAAS,OAAT,EAAkB,MAAlB,EAAyB;EACvC,IAAI,UAAU,GAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,qBAA9B,GAAsD,KAAvE,CADuC,CACsC;;EAC7E,IAAI,UAAU,GAAG,CAAjB,CAFuC,CAEpB;;EACnB,IAAI,SAAS,GAAG,CAAhB,CAHuC,CAGrB;;EAClB,IAAI,aAAa,GAAG,CAApB,CAJuC,CAIjB;;EACtB,IAAI,YAAY,GAAG,CAAnB,CALuC,CAKlB;;EACrB,IAAI,WAAW,GAAG,EAAlB,CANuC,CAMlB;;EACrB,IAAI,kBAAkB,GAAG,EAAzB,CAPuC,CAOX;;EAC5B,IAAI,eAAe,GAAG,CAAtB,CARuC,CAQf;;EACxB,IAAI,aAAa,GAAG,CAApB,CATuC,CASjB;;EACtB,IAAI,OAAO,GAAG,CAAd,CAVuC,CAUvB;;EAEhB,SAAS,SAAT,CAAmB,KAAnB,EAAyB;IACxB,IAAI,QAAJ;;IAEA,IAAG,OAAO,KAAP,IAAiB,QAApB,EAA6B;MAC5B,IAAG,KAAK,CAAC,OAAN,CAAc,GAAd,IAAqB,CAAC,CAAzB,EAA2B;QAC1B,QAAQ,GAAI,UAAU,GAAG,GAAd,GAAqB,QAAQ,CAAC,KAAD,CAAxC;MACA,CAFD,MAEK;QACJ,QAAQ,GAAG,QAAQ,CAAC,KAAD,CAAnB;MACA;IACD,CAND,MAMK;MACJ,QAAQ,GAAG,KAAX;IACA;;IAED,OAAO,QAAP;EACA,CA1BsC,CA4BxC;;;EACC,SAAS,YAAT,CAAsB,OAAtB,EAA+B,SAA/B,EAA0C,QAA1C,EAAoD,UAApD,EAA+D;IAC9D,IAAI,YAAY,GAAG,EAAnB;IAAA,IACA,aAAa,GAAG,CADhB;IAAA,IAEA,cAAc,GAAG,CAFjB;IAAA,IAGA,YAAY,GAAG,CAHf;IAAA,IAIA,sBAAsB,GAAG,aAJzB;IAAA,IAKA,GAAG,GAAG,CALN;IAAA,IAMA,WAAW,GAAG,CANd;IAAA,IAOA,aAAa,GAAG,EAPhB;;IASA,SAAS,QAAT,CAAkB,GAAlB,EAAsB;MACrB,OAAQ,QAAQ,IAAI,GAAG,CAAC,MAAJ,CAAW,UAAX,CAAsB,SAAtB,IAAmC,CAAvC,CAAhB;IACA;;IAED,SAAS,UAAT,CAAoB,GAApB,EAAwB;MACvB,OAAS,SAAS,CAAC,GAAG,CAAC,KAAL,CAAT,GAAwB,QAAQ,IAAI,GAAG,CAAC,MAAJ,CAAW,UAAX,CAAsB,WAAtB,IAAqC,CAAzC,CAAzC;IACA;;IAED,OAAO,CAAC,OAAR,CAAgB,UAAS,GAAT,EAAc,CAAd,EAAgB;MAC/B,IAAI,KAAK,GAAG,UAAU,GAAG,UAAU,CAAC,GAAD,CAAb,GAAqB,QAAQ,CAAC,GAAD,CAAnD;;MACA,IAAG,GAAG,CAAC,MAAJ,CAAW,QAAX,IAAuB,KAA1B,EAAgC;QAC/B,YAAY,CAAC,IAAb,CAAkB,GAAlB;MACA,CAFD,MAEK;QACJ,IAAG,GAAG,CAAC,MAAJ,CAAW,QAAX,IAAuB,GAAG,CAAC,MAAJ,CAAW,QAAX,GAAsB,KAAhD,EAAsD;UACrD,GAAG,CAAC,KAAJ,GAAY,GAAG,CAAC,MAAJ,CAAW,QAAvB;UACA,SAAS,IAAI,GAAG,CAAC,MAAJ,CAAW,QAAxB;UAEA,sBAAsB,IAAI,UAAU,GAAI,GAAG,CAAC,MAAJ,CAAW,UAAX,CAAsB,WAAtB,IAAqC,CAAzC,GAA+C,GAAG,CAAC,MAAJ,CAAW,UAAX,CAAsB,SAAtB,IAAmC,CAAtH;;UAEA,IAAG,sBAAH,EAA0B;YACzB,QAAQ,GAAG,IAAI,CAAC,KAAL,CAAW,SAAS,GAAC,sBAArB,CAAX;UACA;QACD,CATD,MASK;UACJ,aAAa,CAAC,IAAd,CAAmB,GAAnB;UACA,WAAW,IAAI,UAAU,GAAI,GAAG,CAAC,MAAJ,CAAW,UAAX,CAAsB,WAAtB,IAAqC,CAAzC,GAA+C,GAAG,CAAC,MAAJ,CAAW,UAAX,CAAsB,SAAtB,IAAmC,CAA3G;QACA;MACD;IACD,CAnBD;;IAqBA,IAAG,YAAY,CAAC,MAAhB,EAAuB;MACtB,YAAY,CAAC,OAAb,CAAqB,UAAS,GAAT,EAAa;QACjC,aAAa,IAAI,UAAU,GAAI,GAAG,CAAC,KAAJ,GAAY,GAAG,CAAC,MAAJ,CAAW,QAA3B,GAAsC,GAAG,CAAC,MAAJ,CAAW,QAA5E;QACA,GAAG,CAAC,KAAJ,GAAY,GAAG,CAAC,MAAJ,CAAW,QAAvB;MACA,CAHD;MAKA,cAAc,GAAG,SAAS,GAAG,aAA7B;MAEA,YAAY,GAAG,WAAW,GAAG,IAAI,CAAC,KAAL,CAAW,cAAc,GAAC,WAA1B,CAAH,GAA4C,cAAtE;MAEA,GAAG,GAAG,YAAY,CAAC,aAAD,EAAgB,cAAhB,EAAgC,YAAhC,EAA8C,UAA9C,CAAlB;IACA,CAXD,MAWK;MACJ,GAAG,GAAG,WAAW,GAAG,SAAS,GAAI,IAAI,CAAC,KAAL,CAAW,SAAS,GAAC,WAArB,IAAoC,WAApD,GAAmE,SAApF;MAEA,aAAa,CAAC,OAAd,CAAsB,UAAS,MAAT,EAAgB;QACrC,MAAM,CAAC,KAAP,GAAe,UAAU,GAAG,UAAU,CAAC,MAAD,CAAb,GAAwB,QAAQ,CAAC,MAAD,CAAzD;MACA,CAFD;IAGA;;IAED,OAAO,GAAP;EACA;;EAED,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,IAAuC,KAAK,KAAL,CAAW,SAAX,CAAqB,kBAArB,EAAyC,IAAzC,CAA1C,EAAyF;IACxF,KAAK,KAAL,CAAW,OAAX,CAAmB,gBAAnB,CAAoC,MAApC;EACA,CA5FsC,CA8FxC;;;EACC,IAAG,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,YAA9B,GAA6C,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,YAA9E,EAA2F;IAC1F,UAAU,IAAI,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,WAA9B,GAA4C,KAAK,KAAL,CAAW,UAAX,CAAsB,OAAtB,CAA8B,WAAxF;EACA;;EAED,OAAO,CAAC,OAAR,CAAgB,UAAS,MAAT,EAAgB;IAC/B,IAAI,KAAJ,EAAW,QAAX,EAAqB,QAArB;;IAEA,IAAG,MAAM,CAAC,OAAV,EAAkB;MAEjB,KAAK,GAAG,MAAM,CAAC,UAAP,CAAkB,KAA1B;MACA,QAAQ,GAAI,QAAQ,CAAC,MAAM,CAAC,QAAR,CAApB;;MAEA,IAAG,KAAH,EAAS;QAER,QAAQ,GAAG,SAAS,CAAC,KAAD,CAApB;QAEA,UAAU,IAAI,QAAQ,GAAG,QAAX,GAAsB,QAAtB,GAAiC,QAA/C;;QAEA,IAAG,MAAM,CAAC,UAAP,CAAkB,WAArB,EAAiC;UAChC,kBAAkB,CAAC,IAAnB,CAAwB;YACvB,MAAM,EAAC,MADgB;YAEvB,KAAK,EAAC,QAAQ,GAAG,QAAX,GAAsB,QAAtB,GAAiC;UAFhB,CAAxB;UAIA,eAAe,IAAI,MAAM,CAAC,UAAP,CAAkB,WAArC;QACA;MAED,CAdD,MAcK;QACJ,WAAW,CAAC,IAAZ,CAAiB;UAChB,MAAM,EAAC,MADS;UAEhB,KAAK,EAAC;QAFU,CAAjB;QAIA,aAAa,IAAI,MAAM,CAAC,UAAP,CAAkB,SAAlB,IAA+B,CAAhD;MACA;IACD;EACD,CA9BD,EAnGuC,CAmIxC;;EACC,SAAS,GAAG,UAAU,GAAG,UAAzB,CApIuC,CAsIxC;;EACC,YAAY,GAAG,IAAI,CAAC,KAAL,CAAW,SAAS,GAAG,aAAvB,CAAf,CAvIuC,CAyIxC;;EACC,OAAO,GAAG,YAAY,CAAC,WAAD,EAAc,SAAd,EAAyB,YAAzB,EAAuC,KAAvC,CAAtB,CA1IuC,CA4IxC;;EACC,IAAG,WAAW,CAAC,MAAZ,IAAsB,OAAO,GAAG,CAAnC,EAAqC;IACpC,WAAW,CAAC,WAAW,CAAC,MAAZ,GAAmB,CAApB,CAAX,CAAkC,KAAlC,IAA2C,OAA3C;EACA,CA/IsC,CAiJxC;;;EACC,WAAW,CAAC,OAAZ,CAAoB,UAAS,GAAT,EAAa;IAChC,SAAS,IAAI,GAAG,CAAC,KAAjB;EACA,CAFD;EAIA,aAAa,GAAG,IAAI,CAAC,GAAL,CAAS,OAAT,IAAoB,SAApC,CAtJuC,CAwJxC;;EACC,IAAG,aAAa,GAAG,CAAhB,IAAqB,eAAxB,EAAwC;IACvC,OAAO,GAAG,YAAY,CAAC,kBAAD,EAAqB,aAArB,EAAoC,IAAI,CAAC,KAAL,CAAW,aAAa,GAAG,eAA3B,CAApC,EAAiF,IAAjF,CAAtB;EACA,CA3JsC,CA6JxC;;;EACC,IAAG,OAAO,IAAI,kBAAkB,CAAC,MAAjC,EAAwC;IACvC,kBAAkB,CAAC,kBAAkB,CAAC,MAAnB,GAA0B,CAA3B,CAAlB,CAAgD,KAAhD,IAAyD,OAAzD;EACA;;EAED,WAAW,CAAC,OAAZ,CAAoB,UAAS,GAAT,EAAa;IAChC,GAAG,CAAC,MAAJ,CAAW,QAAX,CAAoB,GAAG,CAAC,KAAxB;EACA,CAFD;EAIA,kBAAkB,CAAC,OAAnB,CAA2B,UAAS,GAAT,EAAa;IACvC,GAAG,CAAC,MAAJ,CAAW,QAAX,CAAoB,GAAG,CAAC,KAAxB;EACA,CAFD;AAGD;;ACrKA,IAAA,YAAA,GAAe;EACd,OAAO,EAAC,OADM;EAEd,WAAW,EAAC,cAFE;EAGd,YAAY,EAAC,cAHC;EAId,cAAc,EAAC,cAJD;EAKd,UAAU,EAAC;AALG,CAAf;;ACDA,MAAM,MAAN,SAAqB,MAArB,CAA2B;EAE1B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN,EAAa,QAAb;IAEA,KAAK,IAAL,GAAY,IAAZ;IAEA,KAAK,mBAAL,CAAyB,QAAzB,EAAmC,SAAnC,EALiB,CAK6B;;IAC9C,KAAK,mBAAL,CAAyB,wBAAzB,EAAmD,KAAnD,EANiB,CAMyC;;IAE1D,KAAK,oBAAL,CAA0B,WAA1B;IACA,KAAK,oBAAL,CAA0B,aAA1B;EACA,CAZyB,CAc3B;;;EACC,UAAU,GAAE;IACX,IAAI,MAAM,GAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAhC;;IAEA,IAAG,MAAM,CAAC,KAAP,CAAa,MAAb,CAAH,EAAwB;MACvB,KAAK,IAAL,GAAY,MAAZ;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,gEAAgE,MAA7E;MACA,KAAK,IAAL,GAAY,SAAZ;IACA;;IAED,KAAK,KAAL,CAAW,OAAX,CAAmB,YAAnB,CAAgC,kBAAhC,EAAoD,KAAK,IAAzD;EACA;;EAED,OAAO,GAAE;IACR,OAAO,KAAK,IAAZ;EACA,CA9ByB,CAgC3B;;;EACC,MAAM,CAAC,WAAD,EAAa;IAClB,KAAK,QAAL,CAAc,mBAAd;IACA,MAAM,CAAC,KAAP,CAAa,KAAK,IAAlB,EAAwB,IAAxB,CAA6B,IAA7B,EAAmC,KAAK,KAAL,CAAW,aAAX,CAAyB,cAA5D,EAA4E,WAA5E;IACA,KAAK,QAAL,CAAc,kBAAd;EACA;;AArCyB;;AAwC3B,MAAM,CAAC,UAAP,GAAoB,QAApB,EAEA;;AACA,MAAM,CAAC,KAAP,GAAe,YAAf;AC/CA,IAAA,YAAA,GAAe;EACd,WAAU;IAAA;IACT,UAAS;MACR,QAAO,MADC;MAER,SAAQ;IAFA,CADA;IAKT,WAAU,EALD;IAOT,QAAO;MACN,WAAU,SADJ;MAEN,SAAQ;IAFF,CAPE;IAWT,cAAa;MACZ,aAAY,WADA;MAEZ,cAAa,WAFD;MAGZ,SAAQ,OAHI;MAIZ,eAAc,YAJF;MAKZ,QAAO,MALK;MAMZ,cAAa,WAND;MAOZ,QAAO,MAPK;MAQZ,cAAa,WARD;MASZ,QAAO,MATK;MAUZ,cAAa,WAVD;MAWZ,OAAM,KAXM;MAYZ,WAAU;QACT,WAAW,SADF;QAET,MAAM,IAFG;QAGT,QAAQ,MAHC;QAIT,SAAS;MAJA;IAZE,CAXJ;IA8BT,iBAAgB;MACf,WAAU,kBADK;MAEf,WAAU;IAFK;EA9BP;AADI,CAAf;;ACMA,MAAM,QAAN,SAAuB,MAAvB,CAA6B;EAE5B,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,MAAL,GAAc,SAAd,CAHiB,CAGO;;IACxB,KAAK,IAAL,GAAY,KAAZ,CAJiB,CAIC;;IAClB,KAAK,QAAL,GAAgB,EAAhB,CALiB,CAKE;;IACnB,KAAK,QAAL,GAAgB,EAAhB;IAEA,KAAK,mBAAL,CAAyB,QAAzB,EAAmC,KAAnC,EARiB,CAQyB;;IAC1C,KAAK,mBAAL,CAAyB,OAAzB,EAAkC,EAAlC;EACA;;EAED,UAAU,GAAE;IACX,KAAK,QAAL,GAAgB,OAAO,CAAC,SAAR,CAAkB,QAAQ,CAAC,KAA3B,CAAhB;;IAEA,IAAG,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAnB,CAAkC,uBAAlC,KAA8D,KAAjE,EAAuE;MACtE,KAAK,0BAAL,CAAgC,KAAK,KAAL,CAAW,OAAX,CAAmB,cAAnB,CAAkC,uBAAlE;IACA;;IAED,KAAI,IAAI,MAAR,IAAkB,KAAK,KAAL,CAAW,OAAX,CAAmB,KAArC,EAA2C;MAC1C,KAAK,WAAL,CAAiB,MAAjB,EAAyB,KAAK,KAAL,CAAW,OAAX,CAAmB,KAAnB,CAAyB,MAAzB,CAAzB;IACA;;IAED,KAAK,SAAL,CAAe,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAlC;IAEA,KAAK,qBAAL,CAA2B,WAA3B,EAAwC,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAAxC;IACA,KAAK,qBAAL,CAA2B,WAA3B,EAAwC,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAAxC;IACA,KAAK,qBAAL,CAA2B,SAA3B,EAAsC,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAtC;EACA,CA9B2B,CAgC7B;;;EACC,0BAA0B,CAAC,WAAD,EAAa;IACtC,KAAK,QAAL,CAAc,OAAd,CAAsB,aAAtB,CAAoC,OAApC,GAA8C,WAA9C;EACA,CAnC2B,CAqC7B;;;EACC,gCAAgC,CAAC,MAAD,EAAS,WAAT,EAAqB;IACpD,KAAK,QAAL,CAAc,OAAd,CAAsB,aAAtB,CAAoC,OAApC,CAA4C,MAA5C,IAAsD,WAAtD;;IAEA,IAAG,KAAK,IAAL,IAAa,CAAC,KAAK,IAAL,CAAU,aAAV,CAAwB,OAAxB,CAAgC,MAAhC,CAAjB,EAAyD;MACxD,KAAK,IAAL,CAAU,aAAV,CAAwB,OAAxB,CAAgC,MAAhC,IAA0C,WAA1C;IACA;EACD,CA5C2B,CA8C7B;;;EACC,WAAW,CAAC,MAAD,EAAS,IAAT,EAAc;IACxB,IAAG,KAAK,QAAL,CAAc,MAAd,CAAH,EAAyB;MACxB,KAAK,YAAL,CAAkB,KAAK,QAAL,CAAc,MAAd,CAAlB,EAAyC,IAAzC;IACA,CAFD,MAEK;MACJ,KAAK,QAAL,CAAc,MAAd,IAAwB,IAAxB;IACA;EACD;;EAED,YAAY,CAAC,IAAD,EAAO,MAAP,EAAc;IACzB,KAAI,IAAI,GAAR,IAAe,MAAf,EAAsB;MACrB,IAAG,IAAI,CAAC,GAAD,CAAJ,IAAa,OAAO,IAAI,CAAC,GAAD,CAAX,IAAoB,QAApC,EAA6C;QAC5C,KAAK,YAAL,CAAkB,IAAI,CAAC,GAAD,CAAtB,EAA6B,MAAM,CAAC,GAAD,CAAnC;MACA,CAFD,MAEK;QACJ,IAAI,CAAC,GAAD,CAAJ,GAAY,MAAM,CAAC,GAAD,CAAlB;MACA;IACD;EACD,CA/D2B,CAiE7B;;;EACC,SAAS,CAAC,aAAD,EAAe;IACvB,aAAa,GAAG,aAAa,IAAI,SAAjC,CADuB,CAGzB;;IACE,SAAS,YAAT,CAAsB,KAAtB,EAA6B,IAA7B,EAAkC;MACjC,KAAI,IAAI,IAAR,IAAgB,KAAhB,EAAsB;QACrB,IAAG,OAAO,KAAK,CAAC,IAAD,CAAZ,IAAsB,QAAzB,EAAkC;UACjC,IAAG,CAAC,IAAI,CAAC,IAAD,CAAR,EAAe;YACd,IAAI,CAAC,IAAD,CAAJ,GAAa,EAAb;UACA;;UACD,YAAY,CAAC,KAAK,CAAC,IAAD,CAAN,EAAc,IAAI,CAAC,IAAD,CAAlB,CAAZ;QACA,CALD,MAKK;UACJ,IAAI,CAAC,IAAD,CAAJ,GAAa,KAAK,CAAC,IAAD,CAAlB;QACA;MACD;IACD,CAfsB,CAiBzB;;;IACE,IAAG,aAAa,KAAK,IAAlB,IAA0B,SAAS,CAAC,QAAvC,EAAgD;MAClD;MACG,aAAa,GAAG,SAAS,CAAC,QAAV,CAAmB,WAAnB,EAAhB;IACA;;IAED,IAAG,aAAH,EAAiB;MACnB;MACG,IAAG,CAAC,KAAK,QAAL,CAAc,aAAd,CAAJ,EAAiC;QAChC,IAAI,MAAM,GAAG,aAAa,CAAC,KAAd,CAAoB,GAApB,EAAyB,CAAzB,CAAb;;QAEA,IAAG,KAAK,QAAL,CAAc,MAAd,CAAH,EAAyB;UACxB,OAAO,CAAC,IAAR,CAAa,6EAAb,EAA4F,aAA5F,EAA2G,MAA3G;UACA,aAAa,GAAG,MAAhB;QACA,CAHD,MAGK;UACJ,OAAO,CAAC,IAAR,CAAa,iEAAb,EAAgF,aAAhF;UACA,aAAa,GAAG,SAAhB;QACA;MACD;IACD;;IAED,KAAK,MAAL,GAAc,aAAd,CAtCuB,CAwCzB;;IACE,KAAK,IAAL,GAAY,OAAO,CAAC,SAAR,CAAkB,KAAK,QAAL,CAAc,OAAd,IAAyB,EAA3C,CAAZ;;IAEA,IAAG,aAAa,IAAI,SAApB,EAA8B;MAC7B,YAAY,CAAC,KAAK,QAAL,CAAc,aAAd,CAAD,EAA+B,KAAK,IAApC,CAAZ;IACA;;IAED,KAAK,gBAAL,CAAsB,WAAtB,EAAmC,KAAK,MAAxC,EAAgD,KAAK,IAArD;;IAEA,KAAK,gBAAL;EACA,CApH2B,CAsH7B;;;EACC,SAAS,CAAC,MAAD,EAAQ;IAChB,OAAO,KAAK,MAAZ;EACA,CAzH2B,CA2H7B;;;EACC,OAAO,CAAC,MAAD,EAAQ;IACd,OAAO,MAAM,GAAG,KAAK,QAAL,CAAc,MAAd,CAAH,GAA2B,KAAK,IAA7C;EACA,CA9H2B,CAgI7B;;;EACC,OAAO,CAAC,IAAD,EAAO,KAAP,EAAa;IACnB,IAAI,QAAQ,GAAG,KAAK,GAAG,IAAI,GAAG,GAAP,GAAa,KAAhB,GAAwB,IAA5C;IAAA,IACA,SAAS,GAAG,QAAQ,CAAC,KAAT,CAAe,GAAf,CADZ;IAAA,IAEA,IAAI,GAAG,KAAK,eAAL,CAAqB,SAArB,EAAgC,KAAK,MAArC,CAFP,CADmB,CAKrB;IACA;IACA;;;IAEE,OAAO,IAAI,IAAI,EAAf;EACA,CA3I2B,CA6I7B;;;EACC,eAAe,CAAC,IAAD,EAAO,MAAP,EAAc;IAC5B,IAAI,IAAI,GAAG,KAAK,IAAhB;IAEA,IAAI,CAAC,OAAL,CAAa,UAAS,KAAT,EAAe;MAC3B,IAAI,QAAJ;;MAEA,IAAG,IAAH,EAAQ;QACP,QAAQ,GAAG,IAAI,CAAC,KAAD,CAAf;;QAEA,IAAG,OAAO,QAAP,IAAmB,WAAtB,EAAkC;UACjC,IAAI,GAAG,QAAP;QACA,CAFD,MAEK;UACJ,IAAI,GAAG,KAAP;QACA;MACD;IACD,CAZD;IAcA,OAAO,IAAP;EACA,CAhK2B,CAkK7B;;;EACC,IAAI,CAAC,IAAD,EAAO,QAAP,EAAgB;IACnB,IAAG,CAAC,KAAK,QAAL,CAAc,IAAd,CAAJ,EAAwB;MACvB,KAAK,QAAL,CAAc,IAAd,IAAsB,EAAtB;IACA;;IAED,KAAK,QAAL,CAAc,IAAd,EAAoB,IAApB,CAAyB,QAAzB;IAEA,QAAQ,CAAC,KAAK,OAAL,CAAa,IAAb,CAAD,EAAqB,KAAK,IAA1B,CAAR;EACA,CA3K2B,CA6K7B;;;EACC,gBAAgB,GAAE;IACjB,KAAI,IAAI,IAAR,IAAgB,KAAK,QAArB,EAA8B;MAC7B,KAAK,QAAL,CAAc,IAAd,EAAoB,OAApB,CAA6B,OAAD,IAAa;QACxC,OAAO,CAAC,KAAK,OAAL,CAAa,IAAb,CAAD,EAAqB,KAAK,IAA1B,CAAP;MACA,CAFD;IAGA;EACD;;AApL2B;;AAuL7B,QAAQ,CAAC,UAAT,GAAsB,UAAtB,EAEA;;AACA,QAAQ,CAAC,KAAT,GAAiB,YAAjB;;AC7LA,MAAM,KAAN,SAAoB,MAApB,CAA0B;EAEzB,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;EACA;;EAED,UAAU,GAAE;IACX,KAAK,qBAAL,CAA2B,YAA3B,EAAyC,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAzC;EACA;;EAED,cAAc,CAAC,SAAD,EAAW;IACxB,IAAI,WAAW,GAAG,EAAlB;IAAA,IACA,UADA;IAGA,UAAU,GAAG,aAAa,CAAC,WAAd,CAA0B,SAA1B,CAAb;IAEA,UAAU,CAAC,OAAX,CAAoB,GAAD,IAAQ;MAC1B,IAAG,KAAK,KAAL,KAAe,GAAlB,EAAsB;QACrB,WAAW,CAAC,IAAZ,CAAiB,GAAjB;MACA;IACD,CAJD;IAMA,OAAO,WAAP;EACA;;EAED,IAAI,CAAC,SAAD,EAAY,MAAZ,EAAoB,MAApB,EAA4B,IAA5B,EAAiC;IACpC,IAAI,WAAW,GAAG,KAAK,cAAL,CAAoB,SAApB,CAAlB;IAEA,WAAW,CAAC,OAAZ,CAAqB,UAAD,IAAgB;MACnC,UAAU,CAAC,UAAX,CAAsB,KAAK,KAAL,CAAW,OAAjC,EAA0C,MAA1C,EAAkD,MAAlD,EAA0D,IAA1D;IACA,CAFD;;IAIA,IAAG,CAAC,WAAW,CAAC,MAAb,IAAuB,SAA1B,EAAoC;MACnC,OAAO,CAAC,IAAR,CAAa,4DAAb,EAA2E,SAA3E;IACA;EACD;;EAED,OAAO,CAAC,KAAD,EAAQ,MAAR,EAAgB,MAAhB,EAAwB,IAAxB,EAA6B;IACnC,IAAG,KAAK,KAAL,CAAW,SAAX,CAAqB,MAArB,CAAH,EAAgC;MAC/B,OAAO,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,EAA2B,aAA3B,CAAyC,KAAzC,EAAgD,MAAhD,EAAwD,IAAxD,CAAP;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,2CAAb,EAA0D,MAA1D;IACA;EACD;;AA3CwB;;AA8C1B,KAAK,CAAC,UAAN,GAAmB,OAAnB;;;;;;;;AC9Ce,MAAM,YAAN,CAAmB;EAEjC,WAAW,CAAC,SAAD,EAAY,OAAZ,EAAoB;IAC9B,KAAK,uBAAL,CAA6B,SAA7B;IACA,KAAK,WAAL,CAAiB,SAAjB,EAA4B,WAA5B,EAAyC,IAAzC;;IAEA,IAAG,OAAH,EAAW;MACV,KAAK,WAAL,CAAiB,SAAjB,EAA4B,OAA5B;IACA;EACD;;EAED,uBAAuB,CAAC,SAAD,EAAW;IACjC,SAAS,CAAC,cAAV,GAA2B,EAA3B;;IAEA,SAAS,CAAC,YAAV,GAAyB,UAAS,IAAT,EAAe,QAAf,EAAyB,MAAzB,EAAgC;MACxD,IAAG,SAAS,CAAC,cAAV,CAAyB,IAAzB,CAAH,EAAkC;QACjC,IAAI,MAAM,GAAG,SAAS,CAAC,cAAV,CAAyB,IAAzB,EAA+B,QAA/B,CAAb;;QAEA,IAAG,MAAH,EAAU;UACT,IAAG,OAAO,MAAP,IAAiB,QAApB,EAA6B;YAC5B,KAAI,IAAI,GAAR,IAAe,MAAf,EAAsB;cACrB,MAAM,CAAC,GAAD,CAAN,GAAc,MAAM,CAAC,GAAD,CAApB;YACA;UACD,CAJD,MAIK;YACJ,OAAO,CAAC,IAAR,CAAa,yDAAb;UACA;QACD,CARD,MAQK;UACJ,OAAO,CAAC,IAAR,CAAa,yCAAb,EAAwD,QAAxD;QACA;MACD,CAdD,MAcK;QACJ,OAAO,CAAC,IAAR,CAAa,uCAAb,EAAsD,IAAtD;MACA;IACD,CAlBD;;IAoBA,SAAS,CAAC,cAAV,GAA2B,UAAS,OAAT,EAAiB;MAC3C,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,OAAd,CAAJ,EAA2B;QAC1B,OAAO,GAAG,CAAC,OAAD,CAAV;MACA;;MAED,OAAO,CAAC,OAAR,CAAiB,GAAD,IAAS;QACxB,SAAS,CAAC,qBAAV,CAAgC,GAAhC;MACA,CAFD;IAGA,CARD;;IAUA,SAAS,CAAC,qBAAV,GAAkC,UAAS,GAAT,EAAa;MAC9C,SAAS,CAAC,cAAV,CAAyB,GAAG,CAAC,UAA7B,IAA2C,GAA3C;IACA,CAFD;;IAIA,SAAS,CAAC,SAAV,GAAsB,UAAS,KAAT,EAAe;MACpC,IAAI,OAAO,GAAG,aAAa,CAAC,WAAd,CAA0B,KAA1B,EAAiC,IAAjC,CAAd;MACA,OAAO,KAAK,CAAC,OAAN,CAAc,OAAd,KAA0B,CAAC,OAAO,CAAC,MAAnC,GAA4C,KAA5C,GAAoD,OAA3D;IACA,CAHD,CArCiC,CA0CnC;;;IACE,SAAS,CAAC,SAAV,CAAoB,WAApB,GAAkC,YAAU;MAC3C,IAAI,gBAAgB,GAAG,EAAvB;MAAA,IACA,cAAc,GAAG,EADjB;MAAA,IAEA,aAAa,GAAG,EAFhB;MAIA,KAAK,OAAL,GAAe,EAAf;;MAEA,KAAI,IAAI,IAAR,IAAgB,SAAS,CAAC,cAA1B,EAAyC;QACxC,IAAI,GAAG,GAAG,SAAS,CAAC,cAAV,CAAyB,IAAzB,CAAV;QACA,IAAI,MAAM,GAAG,IAAI,GAAJ,CAAQ,IAAR,CAAb;QAEA,KAAK,OAAL,CAAa,IAAb,IAAqB,MAArB;;QAEA,IAAG,GAAG,CAAC,SAAJ,CAAc,UAAjB,EAA4B;UAC3B,KAAK,WAAL,CAAiB,IAAjB,CAAsB,MAAtB;QACA,CAFD,MAEK;UACJ,IAAG,GAAG,CAAC,eAAP,EAAuB;YACtB,IAAG,GAAG,CAAC,eAAJ,GAAsB,CAAzB,EAA2B;cAC1B,gBAAgB,CAAC,IAAjB,CAAsB,MAAtB;YACA,CAFD,MAEK;cACJ,cAAc,CAAC,IAAf,CAAoB,MAApB;YACA;UAED,CAPD,MAOK;YACJ,aAAa,CAAC,IAAd,CAAmB,MAAnB;UACA;QACD;MACD;;MAED,gBAAgB,CAAC,IAAjB,CAAsB,CAAC,CAAD,EAAI,CAAJ,KAAU,CAAC,CAAC,eAAF,GAAoB,CAAC,CAAC,eAAtB,GAAwC,CAAxC,GAA4C,CAAC,CAA7E;MACA,cAAc,CAAC,IAAf,CAAoB,CAAC,CAAD,EAAI,CAAJ,KAAU,CAAC,CAAC,eAAF,GAAoB,CAAC,CAAC,eAAtB,GAAwC,CAAxC,GAA4C,CAAC,CAA3E;MAEA,KAAK,cAAL,GAAsB,gBAAgB,CAAC,MAAjB,CAAwB,aAAa,CAAC,MAAd,CAAqB,cAArB,CAAxB,CAAtB;IACA,CAjCD;EAkCA;;EAED,WAAW,CAAC,SAAD,EAAY,OAAZ,EAAqB,IAArB,EAA0B;IACpC,IAAI,IAAI,GAAG,MAAM,CAAC,MAAP,CAAc,OAAd,CAAX;;IAEA,IAAG,IAAH,EAAQ;MACP,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;QACrB,GAAG,CAAC,SAAJ,CAAc,UAAd,GAA2B,IAA3B;MACA,CAFD;IAGA;;IAED,SAAS,CAAC,cAAV,CAAyB,IAAzB;EACA;;AApGgC;;ACDnB,MAAM,KAAN,SAAoB,WAApB,CAA+B;EAC7C,WAAW,CAAC,KAAD,EAAO;IACjB,MAAM,KAAN;IAEA,KAAK,OAAL,GAAe,KAAK,mBAAL,EAAf;IACA,KAAK,UAAL,GAAkB,KAAK,iBAAL,EAAlB;IACA,KAAK,IAAL,GAAY,IAAZ;IAEA,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAK,UAA9B;EACA;;EAED,mBAAmB,GAAE;IACpB,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;IACA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,iBAAjB;IACA,OAAO,EAAP;EACA;;EAED,iBAAiB,GAAE;IAClB,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;IACA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,qBAAjB;IACA,EAAE,CAAC,YAAH,CAAgB,MAAhB,EAAwB,OAAxB;IACA,OAAO,EAAP;EACA;;EAED,UAAU,GAAE;IACX,OAAO,2BAA2B,KAAK,IAAvC;EACA;;EAED,KAAK,CAAC,OAAD,EAAU,IAAI,GAAG,KAAjB,EAAuB;IAC3B,IAAG,OAAH,EAAW;MACV,KAAK,KAAL;MAEA,KAAK,IAAL,GAAY,IAAZ;;MAEA,OAAM,KAAK,UAAL,CAAgB,UAAtB,EAAkC,KAAK,UAAL,CAAgB,WAAhB,CAA4B,KAAK,UAAL,CAAgB,UAA5C;;MAElC,KAAK,UAAL,CAAgB,SAAhB,CAA0B,GAA1B,CAA8B,KAAK,UAAL,EAA9B;;MAEA,IAAG,OAAO,OAAP,KAAmB,UAAtB,EAAiC;QAChC,OAAO,GAAG,OAAO,EAAjB;MACA;;MAED,IAAG,OAAO,YAAY,WAAtB,EAAkC;QACjC,KAAK,UAAL,CAAgB,WAAhB,CAA4B,OAA5B;MACA,CAFD,MAEK;QACJ,KAAK,UAAL,CAAgB,SAAhB,GAA4B,OAA5B;MACA;;MAED,KAAK,KAAL,CAAW,OAAX,CAAmB,WAAnB,CAA+B,KAAK,OAApC;IACA;EACD;;EAED,KAAK,GAAE;IACN,IAAG,KAAK,OAAL,CAAa,UAAhB,EAA2B;MAC1B,KAAK,OAAL,CAAa,UAAb,CAAwB,WAAxB,CAAoC,KAAK,OAAzC;IACA;;IAED,KAAK,UAAL,CAAgB,SAAhB,CAA0B,MAA1B,CAAiC,KAAK,UAAL,EAAjC;EACA;;AA1D4C;;ACsB9C,MAAM,SAAN,CAAgB;EAEf,WAAW,CAAC,OAAD,EAAU,OAAV,EAAkB;IAE5B,KAAK,OAAL,GAAe,EAAf;IAEA,KAAK,aAAL,GAAqB,IAArB,CAJ4B,CAIF;;IAC1B,KAAK,UAAL,GAAkB,IAAlB,CAL4B,CAKL;;IACvB,KAAK,aAAL,GAAqB,IAArB,CAN4B,CAMF;;IAC1B,KAAK,YAAL,GAAoB,IAApB,CAP4B,CAOH;;IACzB,KAAK,OAAL,GAAgB,IAAhB,CAR4B,CAQP;;IACrB,KAAK,cAAL,GAAsB,IAAtB,CAT4B,CASD;;IAC3B,KAAK,QAAL,GAAgB,IAAhB,CAV4B,CAUP;;IACrB,KAAK,kBAAL,GAA0B,KAA1B,CAX4B,CAWI;;IAChC,KAAK,OAAL,GAAe,EAAf,CAZ4B,CAYV;;IAClB,KAAK,WAAL,GAAmB,KAAnB,CAb4B,CAaH;;IACzB,KAAK,aAAL,GAAqB,KAArB,CAd4B,CAcD;;IAC3B,KAAK,GAAL,GAAW,KAAX,CAf4B,CAeX;;IACjB,KAAK,eAAL,GAAuB,IAAvB,CAhB4B,CAgBA;;IAE5B,KAAK,uBAAL,GAA+B,IAAI,uBAAJ,CAA4B,IAA5B,CAA/B,CAlB4B,CAkBqC;;IACjE,KAAK,UAAL,GAAkB,KAAlB,CAnB4B,CAmBJ;;IAExB,KAAK,OAAL,GAAe,EAAf,CArB4B,CAqBV;;IAClB,KAAK,WAAL,GAAmB,EAAnB,CAtB4B,CAsBN;;IACtB,KAAK,cAAL,GAAsB,EAAtB,CAvB4B,CAuBH;;IAEzB,KAAK,kBAAL,GAA0B,IAAI,kBAAJ,CAAuB,IAAvB,CAA1B;IACA,KAAK,WAAL,GAAmB,IAAI,WAAJ,CAAgB,IAAhB,EAAsB,mBAAtB,CAAnB;IAEA,KAAK,WAAL,GAAmB,KAAnB;IACA,KAAK,SAAL,GAAiB,KAAjB;;IAEA,IAAG,KAAK,iBAAL,CAAuB,OAAvB,CAAH,EAAmC;MAElC,KAAK,qBAAL,CAA2B,OAA3B,EAFkC,CAIrC;;MACG,UAAU,CAAC,MAAM;QAChB,KAAK,OAAL;MACA,CAFS,CAAV;IAGA;;IAED,aAAa,CAAC,QAAd,CAAuB,IAAvB,EAzC4B,CAyCC;EAC7B;;EAED,iBAAiB,CAAC,OAAD,EAAS;IACzB,IAAG,OAAO,WAAP,KAAuB,WAAvB,IAAsC,OAAO,YAAY,WAA5D,EAAwE;MACvE,KAAK,OAAL,GAAe,OAAf;MACA,OAAO,IAAP;IACA,CAHD,MAGM,IAAG,OAAO,OAAP,KAAmB,QAAtB,EAA+B;MACpC,KAAK,OAAL,GAAe,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAf;;MAEA,IAAG,KAAK,OAAR,EAAgB;QACf,OAAO,IAAP;MACA,CAFD,MAEK;QACJ,OAAO,CAAC,KAAR,CAAc,iEAAd,EAAiF,OAAjF;QACA,OAAO,KAAP;MACA;IACD,CATK,MASD;MACJ,OAAO,CAAC,KAAR,CAAc,sDAAd,EAAsE,OAAtE;MACA,OAAO,KAAP;IACA;EACD;;EAED,qBAAqB,CAAC,OAAD,EAAS;IAC7B,KAAK,aAAL,GAAqB,IAAI,aAAJ,CAAkB,IAAlB,CAArB;IACA,KAAK,UAAL,GAAkB,IAAI,UAAJ,CAAe,IAAf,CAAlB;IACA,KAAK,aAAL,GAAqB,IAAI,aAAJ,CAAkB,IAAlB,CAArB;IACA,KAAK,UAAL,GAAkB,IAAI,UAAJ,CAAe,IAAf,CAAlB;IACA,KAAK,YAAL,GAAoB,IAAI,KAAJ,CAAU,IAAV,CAApB;IAEA,KAAK,WAAL;IAEA,KAAK,OAAL,GAAe,KAAK,WAAL,CAAiB,QAAjB,CAA0B,SAAS,CAAC,cAApC,EAAoD,OAApD,CAAf;;IAEA,KAAK,oBAAL;;IAEA,KAAK,2BAAL;;IAEA,KAAK,cAAL,GAAsB,IAAI,gBAAJ,CAAqB,IAArB,EAA2B,KAAK,OAAhC,EAAyC,KAAK,OAAL,CAAa,mBAAtD,CAAtB;IACA,KAAK,QAAL,GAAgB,IAAI,gBAAJ,CAAqB,KAAK,OAAL,CAAa,mBAAlC,CAAhB;IAEA,KAAK,kBAAL,GAA0B,IAAIC,kBAAJ,CAAuB,IAAvB,CAA1B;IAEA,KAAK,UAAL,CAAgB,UAAhB,GApB6B,CAqB/B;IACA;;IACE,KAAK,aAAL,CAAmB,UAAnB;EACA,CAzFc,CA2FhB;;;EACC,2BAA2B,GAAE,CAC9B;EACE;;EAED,eAAe,GAAE;IAEhB,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,wBAA3B;;IAEA,IAAI,MAAM,CAAC,YAAX,EAAyB;MACxB,IAAI,MAAM,CAAC,YAAP,GAAsB,KAA1B,EAAiC;QAAA;QAChC,MAAM,CAAC,YAAP,GAAsB,KAAtB;MACA,CAFD,MAEO,IAAI,MAAM,CAAC,YAAP,GAAsB,eAA1B,EAA2C;QAAA;QACjD,MAAM,CAAC,YAAP,GAAsB,eAAtB;MACA;IACD,CAND,MAMO,IAAI,QAAQ,CAAC,SAAb,EAAwB;MAAA;MAC9B,QAAQ,CAAC,SAAT,CAAmB,KAAnB;IACA;;IAED,KAAK,OAAL,CAAa,SAAb,CAAuB,MAAvB,CAA8B,wBAA9B;EACA,CA/Gc,CAiHhB;;;EACC,OAAO,GAAE;IACR,KAAK,cAAL,CAAoB,QAApB,CAA6B,eAA7B;IACA,KAAK,QAAL,CAAc,QAAd,CAAuB,gBAAvB;;IAEA,KAAK,SAAL;;IAEA,KAAK,aAAL;;IAEA,KAAK,gBAAL;;IAEA,KAAK,gBAAL;;IAEA,KAAK,WAAL,GAAmB,IAAnB;IAEA,KAAK,cAAL,CAAoB,QAApB,CAA6B,YAA7B;EACA;;EAED,SAAS,GAAE;IACV,IAAI,KAAK,GAAG,MAAM,CAAC,gBAAP,CAAwB,KAAK,OAA7B,CAAZ;;IAEA,QAAO,KAAK,OAAL,CAAa,aAApB;MACC,KAAI,MAAJ;QACC,IAAG,KAAK,CAAC,SAAN,KAAoB,KAAvB,EAA6B;UAC5B;QACA;;MAEF,KAAK,KAAL;QACC,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,eAA3B;QACA,KAAK,GAAL,GAAW,IAAX;QACA;;MAED,KAAK,KAAL;QACC,KAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,eAA3B;;MAED;QACC,KAAK,GAAL,GAAW,KAAX;IAfF;EAiBA,CAvJc,CAyJhB;;;EACC,oBAAoB,GAAE;IACrB,KAAK,OAAL,CAAa,OAAb,GAAuB,KAAK,OAAL,CAAa,OAAb,CAAqB,KAArB,CAA2B,CAA3B,CAAvB;;IAEA,IAAG,KAAK,CAAC,OAAN,CAAc,KAAK,OAAL,CAAa,IAA3B,KAAoC,CAAC,KAAK,OAAL,CAAa,YAArD,EAAkE;MACjE,KAAK,OAAL,CAAa,IAAb,GAAoB,KAAK,OAAL,CAAa,IAAb,CAAkB,KAAlB,CAAwB,CAAxB,CAApB;IACA;EACD,CAhKc,CAkKhB;;;EACC,aAAa,GAAE;IACd,IAAI,OAAO,GAAG,KAAK,OAAnB;IAAA,IACA,OAAO,GAAG,KAAK,OADf;IAAA,IAEA,UAFA;;IAIA,IAAG,OAAO,CAAC,OAAR,KAAoB,OAAvB,EAA+B;MAC9B,KAAK,eAAL,GAAuB,KAAK,OAA5B;MACA,UAAU,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAb,CAF8B,CAIjC;;MACG,IAAI,UAAU,GAAG,OAAO,CAAC,UAAzB,CAL8B,CAOjC;;MACG,KAAI,IAAI,CAAR,IAAa,UAAb,EAAwB;QACvB,IAAG,OAAO,UAAU,CAAC,CAAD,CAAjB,IAAwB,QAA3B,EAAoC;UACnC,UAAU,CAAC,YAAX,CAAwB,UAAU,CAAC,CAAD,CAAV,CAAc,IAAtC,EAA4C,UAAU,CAAC,CAAD,CAAV,CAAc,KAA1D;QACA;MACD,CAZ6B,CAcjC;;;MACG,OAAO,CAAC,UAAR,CAAmB,YAAnB,CAAgC,UAAhC,EAA4C,OAA5C;MAEA,KAAK,OAAL,GAAe,OAAO,GAAG,UAAzB;IACA;;IAED,OAAO,CAAC,SAAR,CAAkB,GAAlB,CAAsB,WAAtB;IACA,OAAO,CAAC,YAAR,CAAqB,MAArB,EAA6B,MAA7B,EA1Bc,CA4BhB;;IACE,OAAM,OAAO,CAAC,UAAd,EAA0B,OAAO,CAAC,WAAR,CAAoB,OAAO,CAAC,UAA5B,EA7BZ,CA+BhB;;;IACE,IAAG,OAAO,CAAC,MAAX,EAAkB;MACjB,OAAO,CAAC,MAAR,GAAiB,KAAK,CAAC,OAAO,CAAC,MAAT,CAAL,GAAwB,OAAO,CAAC,MAAhC,GAAyC,OAAO,CAAC,MAAR,GAAiB,IAA3E;MACA,OAAO,CAAC,KAAR,CAAc,MAAd,GAAuB,OAAO,CAAC,MAA/B;IACA,CAnCa,CAqChB;;;IACE,IAAG,OAAO,CAAC,SAAR,KAAsB,KAAzB,EAA+B;MAC9B,OAAO,CAAC,SAAR,GAAoB,KAAK,CAAC,OAAO,CAAC,SAAT,CAAL,GAA2B,OAAO,CAAC,SAAnC,GAA+C,OAAO,CAAC,SAAR,GAAoB,IAAvF;MACA,OAAO,CAAC,KAAR,CAAc,SAAd,GAA0B,OAAO,CAAC,SAAlC;IACA,CAzCa,CA2ChB;;;IACE,IAAG,OAAO,CAAC,SAAR,KAAsB,KAAzB,EAA+B;MAC9B,OAAO,CAAC,SAAR,GAAoB,KAAK,CAAC,OAAO,CAAC,SAAT,CAAL,GAA2B,OAAO,CAAC,SAAnC,GAA+C,OAAO,CAAC,SAAR,GAAoB,IAAvF;MACA,OAAO,CAAC,KAAR,CAAc,SAAd,GAA0B,OAAO,CAAC,SAAlC;IACA;EACD,CAnNc,CAqNhB;;;EACC,gBAAgB,GAAE;IACjB,IAAI,OAAO,GAAG,KAAK,OAAnB;IAAA,IACA,OAAO,GAAG,KAAK,OADf;IAGA,KAAK,kBAAL,CAAwB,UAAxB;IAEA,KAAK,aAAL,CAAmB,UAAnB;IACA,KAAK,UAAL,CAAgB,UAAhB;;IAEA,KAAK,cAAL,GATiB,CAWnB;;;IACE,KAAK,WAAL,CAAiB,OAAjB,CAA0B,GAAD,IAAS;MACjC,GAAG,CAAC,UAAJ;IACA,CAFD,EAZiB,CAgBnB;;IACE,OAAO,CAAC,WAAR,CAAoB,KAAK,aAAL,CAAmB,UAAnB,EAApB;IACA,OAAO,CAAC,WAAR,CAAoB,KAAK,UAAL,CAAgB,UAAhB,EAApB;;IAEA,IAAG,OAAO,CAAC,aAAX,EAAyB;MACxB,KAAK,aAAL,CAAmB,QAAnB;IACA;;IAED,IAAG,OAAO,CAAC,WAAR,IAAuB,OAAO,CAAC,IAAlC,EAAuC;MAEtC,KAAK,aAAL,CAAmB,0BAAnB,CAA8C,KAAK,OAAL,CAAa,IAA3D;IACA,CA3BgB,CA6BnB;;;IACE,KAAK,cAAL,CAAoB,OAApB,CAA6B,GAAD,IAAS;MACpC,GAAG,CAAC,UAAJ;IACA,CAFD;IAIA,KAAK,aAAL,CAAmB,UAAnB,CAA8B,OAAO,CAAC,OAAtC;IAEA,KAAK,QAAL,CAAc,QAAd,CAAuB,aAAvB;EACA;;EAED,gBAAgB,GAAE;IACjB,KAAK,UAAL,CAAgB,IAAhB,CAAqB,KAAK,OAAL,CAAa,IAAlC;EACA,CA/Pc,CAiQhB;;;EACC,OAAO,GAAE;IACR,IAAI,OAAO,GAAG,KAAK,OAAnB;IAEA,KAAK,SAAL,GAAiB,IAAjB;IAEA,aAAa,CAAC,UAAd,CAAyB,IAAzB,EALQ,CAKuB;;IAE/B,KAAK,QAAL,CAAc,QAAd,CAAuB,eAAvB,EAPQ,CASV;;IACE,KAAK,UAAL,CAAgB,IAAhB,CAAqB,OAArB,CAA6B,UAAS,GAAT,EAAa;MACzC,GAAG,CAAC,IAAJ;IACA,CAFD;IAIA,KAAK,UAAL,CAAgB,IAAhB,GAAuB,EAAvB;IACA,KAAK,UAAL,CAAgB,UAAhB,GAA6B,EAA7B;IACA,KAAK,UAAL,CAAgB,WAAhB,GAA8B,EAA9B,CAhBQ,CAkBV;;IACE,OAAM,OAAO,CAAC,UAAd,EAA0B,OAAO,CAAC,WAAR,CAAoB,OAAO,CAAC,UAA5B;;IAC1B,OAAO,CAAC,SAAR,CAAkB,MAAlB,CAAyB,WAAzB;IAEA,KAAK,cAAL,CAAoB,QAApB,CAA6B,gBAA7B;EACA;;EAED,cAAc,GAAE;IACf,IAAI,EAAE,GAAG,SAAS,CAAC,SAAV,IAAqB,SAAS,CAAC,MAA/B,IAAuC,MAAM,CAAC,KAAvD;;IAEA,IAAG,EAAE,CAAC,OAAH,CAAW,SAAX,IAAwB,CAAC,CAA5B,EAA8B;MAC7B,KAAK,OAAL,GAAe,IAAf;MACA,KAAK,WAAL,GAAmB,IAAnB;IACA,CAHD,MAGM,IAAG,EAAE,CAAC,OAAH,CAAW,MAAX,IAAqB,CAAC,CAAzB,EAA2B;MAChC,KAAK,OAAL,GAAe,MAAf;MACA,KAAK,WAAL,GAAmB,IAAnB;IACA,CAHK,MAGA,IAAG,EAAE,CAAC,OAAH,CAAW,SAAX,IAAwB,CAAC,CAA5B,EAA8B;MACnC,KAAK,OAAL,GAAe,SAAf;MACA,KAAK,WAAL,GAAmB,KAAnB;IACA,CAHK,MAGD;MACJ,KAAK,OAAL,GAAe,OAAf;MACA,KAAK,WAAL,GAAmB,KAAnB;IACA;;IAED,KAAK,aAAL,GAAqB,sVAAsV,IAAtV,CAA2V,EAA3V,KAAgW,4hDAA4hD,IAA5hD,CAAiiD,EAAE,CAAC,KAAH,CAAS,CAAT,EAAW,CAAX,CAAjiD,CAArX;EACA;;EAED,SAAS,CAAC,IAAD,EAAO,GAAP,EAAW;IACnB,IAAI,KAAJ,EAAW,IAAX;;IAEA,IAAG,KAAK,OAAL,CAAa,mBAAb,IAAoC,CAAC,KAAK,WAA7C,EAAyD;MACxD,IAAG,CAAC,IAAJ,EAAS;QACR,KAAK,GAAG,IAAI,KAAJ,GAAY,KAAZ,CAAkB,KAAlB,CAAwB,IAAxB,CAAR;QAEA,IAAI,GAAG,KAAK,CAAC,CAAD,CAAL,IAAY,OAAZ,GAAsB,KAAK,CAAC,CAAD,CAA3B,GAAiC,KAAK,CAAC,CAAD,CAA7C;;QAEA,IAAG,IAAI,CAAC,CAAD,CAAJ,IAAW,GAAd,EAAkB;UACjB,IAAI,GAAG,IAAI,CAAC,IAAL,GAAY,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,EAA0B,KAA1B,CAAgC,GAAhC,EAAqC,CAArC,CAAP;QACA,CAFD,MAEK;UACJ,IAAI,GAAG,IAAI,CAAC,IAAL,GAAY,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAP;QACA;MACD;;MAED,OAAO,CAAC,IAAR,CAAa,yCAAyC,IAAzC,GAAgD,qJAAhD,IAAyM,GAAG,GAAG,MAAM,GAAT,GAAe,EAA3N,CAAb;IACA;;IAED,OAAO,KAAK,WAAZ;EACA,CAnUc,CAqUhB;EACA;;;EACC,WAAW,GAAE;IACZ,KAAK,SAAL;IAEA,KAAK,QAAL,CAAc,QAAd,CAAuB,iBAAvB;IAEA,KAAK,UAAL,CAAgB,WAAhB;IACA,KAAK,aAAL,CAAmB,WAAnB;IAEA,KAAK,QAAL,CAAc,QAAd,CAAuB,gBAAvB;EACA,CAhVc,CAkVhB;;;EACC,aAAa,GAAE;IACd,KAAK,SAAL;IAEA,KAAK,QAAL,CAAc,QAAd,CAAuB,kBAAvB;IAEA,KAAK,UAAL,CAAgB,aAAhB;IACA,KAAK,aAAL,CAAmB,aAAnB;IAEA,KAAK,QAAL,CAAc,QAAd,CAAuB,iBAAvB;EACA,CA5Vc,CA8VhB;;;EACC,OAAO,CAAC,IAAD,EAAO,MAAP,EAAe,MAAf,EAAsB;IAC5B,KAAK,SAAL,CAAe,KAAf,EAAsB,8EAAtB;IAEA,OAAO,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,EAA2B,MAA3B,EAAmC,MAAnC,EAA2C,KAA3C,CAAP;EACA,CAnWc,CAqWhB;;;EACC,SAAS,GAAE;IACV,KAAK,SAAL;IAEA,KAAK,UAAL,CAAgB,eAAhB;IACA,KAAK,UAAL,CAAgB,SAAhB;EACA,CA3Wc,CA6WhB;;;EACC,OAAO,CAAC,MAAD,EAAQ;IACd,OAAO,KAAK,UAAL,CAAgB,OAAhB,CAAwB,MAAxB,CAAP;EACA,CAhXc,CAkXhB;;;EACC,YAAY,CAAC,MAAD,EAAQ;IACnB,OAAO,KAAK,UAAL,CAAgB,YAAhB,CAA6B,MAA7B,CAAP;EACA,CArXc,CAuXhB;;;EACC,WAAW,CAAC,IAAD,EAAO,MAAP,EAAe,MAAf,EAAsB;IAChC,KAAK,SAAL;IAEA,OAAO,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,EAA2B,MAA3B,EAAmC,MAAnC,EAA2C,IAA3C,EAAiD,IAAjD,CAAP;EACA,CA5Xc,CA8XhB;;;EACC,UAAU,CAAC,IAAD,EAAM;IACf,IAAI,SAAS,GAAG,CAAhB;IAEA,KAAK,SAAL;IAEA,OAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAqB;MACvC,KAAK,UAAL,CAAgB,eAAhB;;MAEA,IAAG,OAAO,IAAP,KAAgB,QAAnB,EAA4B;QAC3B,IAAI,GAAG,IAAI,CAAC,KAAL,CAAW,IAAX,CAAP;MACA;;MAED,IAAG,IAAH,EAAQ;QACP,IAAI,CAAC,OAAL,CAAc,IAAD,IAAU;UACtB,IAAI,GAAG,GAAG,KAAK,UAAL,CAAgB,OAAhB,CAAwB,IAAI,CAAC,KAAK,OAAL,CAAa,KAAd,CAA5B,CAAV;;UAEA,IAAG,GAAH,EAAO;YACN,SAAS;YAET,GAAG,CAAC,UAAJ,CAAe,IAAf,EACE,IADF,CACO,MAAI;cACT,SAAS;;cAET,IAAG,CAAC,SAAJ,EAAc;gBACb,OAAO;cACP;YACD,CAPF;UAQA;QACD,CAfD;MAgBA,CAjBD,MAiBK;QACJ,OAAO,CAAC,IAAR,CAAa,iCAAb;QACA,MAAM,CAAC,iCAAD,CAAN;MACA;IACD,CA5BM,CAAP;EA6BA;;EAED,OAAO,CAAC,IAAD,EAAO,GAAP,EAAY,KAAZ,EAAkB;IACxB,KAAK,SAAL;IAEA,OAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAqB;MACvC,KAAK,UAAL,CAAgB,eAAhB;;MAEA,IAAG,OAAO,IAAP,KAAgB,QAAnB,EAA4B;QAC3B,IAAI,GAAG,IAAI,CAAC,KAAL,CAAW,IAAX,CAAP;MACA;;MAED,IAAG,IAAH,EAAQ;QACP,KAAK,UAAL,CAAgB,OAAhB,CAAwB,IAAxB,EAA8B,GAA9B,EAAmC,KAAnC,EACE,IADF,CACQ,IAAD,IAAU;UACf,IAAI,MAAM,GAAG,EAAb;UAEA,IAAI,CAAC,OAAL,CAAa,UAAS,GAAT,EAAa;YACzB,MAAM,CAAC,IAAP,CAAY,GAAG,CAAC,YAAJ,EAAZ;UACA,CAFD;UAIA,OAAO,CAAC,MAAD,CAAP;QACA,CATF;MAUA,CAXD,MAWK;QACJ,OAAO,CAAC,IAAR,CAAa,iCAAb;QACA,MAAM,CAAC,iCAAD,CAAN;MACA;IACD,CAtBM,CAAP;EAuBA,CA7bc,CA+bhB;;;EACC,eAAe,CAAC,IAAD,EAAM;IACpB,IAAI,IAAI,GAAG,EAAX;IAAA,IACA,SAAS,GAAG,CADZ;IAGA,KAAK,SAAL;IAEA,OAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAqB;MACvC,KAAK,UAAL,CAAgB,eAAhB;;MAEA,IAAG,OAAO,IAAP,KAAgB,QAAnB,EAA4B;QAC3B,IAAI,GAAG,IAAI,CAAC,KAAL,CAAW,IAAX,CAAP;MACA;;MAED,IAAG,IAAH,EAAQ;QACP,IAAI,CAAC,OAAL,CAAc,IAAD,IAAU;UACtB,IAAI,GAAG,GAAG,KAAK,UAAL,CAAgB,OAAhB,CAAwB,IAAI,CAAC,KAAK,OAAL,CAAa,KAAd,CAA5B,CAAV;UAEA,SAAS;;UAET,IAAG,GAAH,EAAO;YACN,GAAG,CAAC,UAAJ,CAAe,IAAf,EACE,IADF,CACO,MAAI;cACT,SAAS;cACT,IAAI,CAAC,IAAL,CAAU,GAAG,CAAC,YAAJ,EAAV;;cAEA,IAAG,CAAC,SAAJ,EAAc;gBACb,OAAO,CAAC,IAAD,CAAP;cACA;YACD,CARF;UASA,CAVD,MAUK;YACJ,KAAK,UAAL,CAAgB,OAAhB,CAAwB,IAAxB,EACE,IADF,CACQ,OAAD,IAAW;cAChB,SAAS;cACT,IAAI,CAAC,IAAL,CAAU,OAAO,CAAC,CAAD,CAAP,CAAW,YAAX,EAAV;;cAEA,IAAG,CAAC,SAAJ,EAAc;gBACb,OAAO,CAAC,IAAD,CAAP;cACA;YACD,CARF;UASA;QACD,CA1BD;MA2BA,CA5BD,MA4BK;QACJ,OAAO,CAAC,IAAR,CAAa,iCAAb;QACA,MAAM,CAAC,iCAAD,CAAN;MACA;IACD,CAvCM,CAAP;EAwCA,CA9ec,CAgfhB;;;EACC,MAAM,CAAC,KAAD,EAAO;IACZ,IAAI,GAAG,GAAG,KAAK,UAAL,CAAgB,OAAhB,CAAwB,KAAxB,CAAV;;IAEA,IAAG,GAAH,EAAO;MACN,OAAO,GAAG,CAAC,YAAJ,EAAP;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,qCAAb,EAAoD,KAApD;MACA,OAAO,KAAP;IACA;EACD,CA1fc,CA4fhB;;;EACC,kBAAkB,CAAC,QAAD,EAAU;IAC3B,IAAI,GAAG,GAAG,KAAK,UAAL,CAAgB,kBAAhB,CAAmC,QAAnC,CAAV;;IAEA,IAAG,GAAH,EAAO;MACN,OAAO,GAAG,CAAC,YAAJ,EAAP;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,qCAAb,EAAoD,QAApD;MACA,OAAO,KAAP;IACA;EACD,CAtgBc,CAwgBhB;;;EACC,SAAS,CAAC,KAAD,EAAO;IACf,IAAI,SAAS,GAAG,EAAhB;IAEA,KAAK,SAAL;;IAEA,IAAG,CAAC,KAAK,CAAC,OAAN,CAAc,KAAd,CAAJ,EAAyB;MACxB,KAAK,GAAG,CAAC,KAAD,CAAR;IACA,CAPc,CASjB;;;IACE,KAAI,IAAI,IAAR,IAAgB,KAAhB,EAAsB;MACrB,IAAI,GAAG,GAAG,KAAK,UAAL,CAAgB,OAAhB,CAAwB,IAAxB,EAA8B,IAA9B,CAAV;;MAEA,IAAG,GAAH,EAAO;QACN,SAAS,CAAC,IAAV,CAAe,GAAf;MACA,CAFD,MAEK;QACJ,OAAO,CAAC,KAAR,CAAc,uCAAd,EAAuD,IAAvD;QACA,OAAO,OAAO,CAAC,MAAR,CAAe,sCAAf,CAAP;MACA;IACD,CAnBc,CAqBjB;;;IACE,SAAS,CAAC,IAAV,CAAe,CAAC,CAAD,EAAI,CAAJ,KAAU;MACxB,OAAO,KAAK,UAAL,CAAgB,IAAhB,CAAqB,OAArB,CAA6B,CAA7B,IAAkC,KAAK,UAAL,CAAgB,IAAhB,CAAqB,OAArB,CAA6B,CAA7B,CAAlC,GAAoE,CAApE,GAAwE,CAAC,CAAhF;IACA,CAFD,EAtBe,CA0BjB;;IACE,SAAS,CAAC,OAAV,CAAmB,GAAD,IAAQ;MACzB,GAAG,CAAC,MAAJ;IACA,CAFD;IAIA,KAAK,UAAL,CAAgB,kBAAhB;IAEA,OAAO,OAAO,CAAC,OAAR,EAAP;EACA,CA3iBc,CA6iBhB;;;EACC,MAAM,CAAC,IAAD,EAAO,GAAP,EAAY,KAAZ,EAAkB;IACvB,KAAK,SAAL;;IAEA,IAAG,OAAO,IAAP,KAAgB,QAAnB,EAA4B;MAC3B,IAAI,GAAG,IAAI,CAAC,KAAL,CAAW,IAAX,CAAP;IACA;;IAED,OAAO,KAAK,UAAL,CAAgB,OAAhB,CAAwB,IAAxB,EAA8B,GAA9B,EAAmC,KAAnC,EACL,IADK,CACC,IAAD,IAAQ;MACb,OAAO,IAAI,CAAC,CAAD,CAAJ,CAAQ,YAAR,EAAP;IACA,CAHK,CAAP;EAIA,CAzjBc,CA2jBhB;;;EACC,cAAc,CAAC,KAAD,EAAQ,IAAR,EAAa;IAC1B,IAAI,GAAG,GAAG,KAAK,UAAL,CAAgB,OAAhB,CAAwB,KAAxB,CAAV;IAEA,KAAK,SAAL;;IAEA,IAAG,OAAO,IAAP,KAAgB,QAAnB,EAA4B;MAC3B,IAAI,GAAG,IAAI,CAAC,KAAL,CAAW,IAAX,CAAP;IACA;;IAED,IAAG,GAAH,EAAO;MACN,OAAO,GAAG,CAAC,UAAJ,CAAe,IAAf,EACL,IADK,CACA,MAAI;QACT,OAAO,GAAG,CAAC,YAAJ,EAAP;MACA,CAHK,CAAP;IAIA,CALD,MAKK;MACJ,OAAO,KAAK,UAAL,CAAgB,OAAhB,CAAwB,IAAxB,EACL,IADK,CACC,IAAD,IAAQ;QACb,OAAO,IAAI,CAAC,CAAD,CAAJ,CAAQ,YAAR,EAAP;MACA,CAHK,CAAP;IAIA;EACD,CAhlBc,CAklBhB;;;EACC,SAAS,CAAC,KAAD,EAAQ,IAAR,EAAa;IACrB,IAAI,GAAG,GAAG,KAAK,UAAL,CAAgB,OAAhB,CAAwB,KAAxB,CAAV;IAEA,KAAK,SAAL;;IAEA,IAAG,OAAO,IAAP,KAAgB,QAAnB,EAA4B;MAC3B,IAAI,GAAG,IAAI,CAAC,KAAL,CAAW,IAAX,CAAP;IACA;;IAED,IAAG,GAAH,EAAO;MACN,OAAO,GAAG,CAAC,UAAJ,CAAe,IAAf,EACL,IADK,CACA,MAAI;QACT,OAAO,OAAO,CAAC,OAAR,CAAgB,GAAG,CAAC,YAAJ,EAAhB,CAAP;MACA,CAHK,CAAP;IAIA,CALD,MAKK;MACJ,OAAO,CAAC,IAAR,CAAa,uCAAb,EAAsD,KAAtD;MACA,OAAO,OAAO,CAAC,MAAR,CAAe,sCAAf,CAAP;IACA;EACD,CArmBc,CAumBhB;;;EACC,WAAW,CAAC,KAAD,EAAQ,QAAR,EAAkB,SAAlB,EAA4B;IACtC,IAAI,GAAG,GAAG,KAAK,UAAL,CAAgB,OAAhB,CAAwB,KAAxB,CAAV;;IAEA,IAAG,GAAH,EAAO;MACN,OAAO,KAAK,UAAL,CAAgB,WAAhB,CAA4B,GAA5B,EAAiC,QAAjC,EAA2C,SAA3C,CAAP;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,uCAAb,EAAsD,KAAtD;MACA,OAAO,OAAO,CAAC,MAAR,CAAe,sCAAf,CAAP;IACA;EACD;;EAED,OAAO,CAAC,IAAD,EAAO,EAAP,EAAW,KAAX,EAAiB;IACvB,IAAI,OAAO,GAAG,KAAK,UAAL,CAAgB,OAAhB,CAAwB,IAAxB,CAAd;IAEA,KAAK,SAAL;;IAEA,IAAG,OAAH,EAAW;MACV,OAAO,CAAC,SAAR,CAAkB,EAAlB,EAAsB,KAAtB;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,qCAAb,EAAoD,IAApD;IACA;EACD;;EAED,OAAO,CAAC,MAAD,EAAQ;IACd,OAAO,KAAK,UAAL,CAAgB,aAAhB,CAA8B,MAA9B,CAAP;EACA,CAjoBc,CAmoBhB;;;EACC,cAAc,CAAC,KAAD,EAAO;IACpB,IAAI,GAAG,GAAG,KAAK,UAAL,CAAgB,OAAhB,CAAwB,KAAxB,CAAV;;IAEA,IAAG,GAAH,EAAO;MACN,OAAO,GAAG,CAAC,WAAJ,EAAP;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,yCAAb,EAAwD,KAAxD;MACA,OAAO,KAAP;IACA;EACD,CA7oBc,CA+oBhB;;;EACC,UAAU,CAAC,UAAD,EAAY;IACrB,KAAK,SAAL,CAAe,KAAf,EAAsB,mFAAtB;IAEA,KAAK,aAAL,CAAmB,UAAnB,CAA8B,UAA9B;EACA;;EAED,UAAU,CAAC,UAAD,EAAY;IACrB,OAAO,KAAK,aAAL,CAAmB,aAAnB,CAAiC,UAAjC,CAAP;EACA;;EAED,SAAS,CAAC,KAAD,EAAO;IACf,IAAI,MAAM,GAAG,KAAK,aAAL,CAAmB,UAAnB,CAA8B,KAA9B,CAAb;;IAEA,IAAG,MAAH,EAAU;MACT,OAAO,MAAM,CAAC,YAAP,EAAP;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,wCAAb,EAAuD,KAAvD;MACA,OAAO,KAAP;IACA;EACD;;EAED,oBAAoB,GAAE;IACrB,OAAO,KAAK,aAAL,CAAmB,iBAAnB,EAAP;EACA;;EAED,UAAU,CAAC,KAAD,EAAO;IAChB,IAAI,MAAM,GAAG,KAAK,aAAL,CAAmB,UAAnB,CAA8B,KAA9B,CAAb;IAEA,KAAK,SAAL;;IAEA,IAAG,MAAH,EAAU;MACT,MAAM,CAAC,IAAP;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,+CAAb,EAA8D,KAA9D;MACA,OAAO,KAAP;IACA;EACD;;EAED,UAAU,CAAC,KAAD,EAAO;IAChB,IAAI,MAAM,GAAG,KAAK,aAAL,CAAmB,UAAnB,CAA8B,KAA9B,CAAb;IAEA,KAAK,SAAL;;IAEA,IAAG,MAAH,EAAU;MACT,MAAM,CAAC,IAAP;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,+CAAb,EAA8D,KAA9D;MACA,OAAO,KAAP;IACA;EACD;;EAED,YAAY,CAAC,KAAD,EAAO;IAClB,IAAI,MAAM,GAAG,KAAK,aAAL,CAAmB,UAAnB,CAA8B,KAA9B,CAAb;IAEA,KAAK,SAAL;;IAEA,IAAG,MAAH,EAAU;MACT,IAAG,MAAM,CAAC,OAAV,EAAkB;QACjB,MAAM,CAAC,IAAP;MACA,CAFD,MAEK;QACJ,MAAM,CAAC,IAAP;MACA;IACD,CAND,MAMK;MACJ,OAAO,CAAC,IAAR,CAAa,4DAAb,EAA2E,KAA3E;MACA,OAAO,KAAP;IACA;EACD;;EAED,SAAS,CAAC,UAAD,EAAa,MAAb,EAAqB,KAArB,EAA2B;IACnC,IAAI,MAAM,GAAG,KAAK,aAAL,CAAmB,UAAnB,CAA8B,KAA9B,CAAb;IAEA,KAAK,SAAL;IAEA,OAAO,KAAK,aAAL,CAAmB,SAAnB,CAA6B,UAA7B,EAAyC,MAAzC,EAAiD,MAAjD,EACL,IADK,CACC,MAAD,IAAY;MACjB,OAAO,MAAM,CAAC,YAAP,EAAP;IACA,CAHK,CAAP;EAIA;;EAED,YAAY,CAAC,KAAD,EAAO;IAClB,IAAI,MAAM,GAAG,KAAK,aAAL,CAAmB,UAAnB,CAA8B,KAA9B,CAAb;IAEA,KAAK,SAAL;;IAEA,IAAG,MAAH,EAAU;MACT,OAAO,MAAM,CAAC,MAAP,EAAP;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,iDAAb,EAAgE,KAAhE;MACA,OAAO,OAAO,CAAC,MAAR,EAAP;IACA;EACD;;EAED,sBAAsB,CAAC,KAAD,EAAQ,UAAR,EAAmB;IACxC,IAAI,MAAM,GAAG,KAAK,aAAL,CAAmB,UAAnB,CAA8B,KAA9B,CAAb;IAEA,KAAK,SAAL;;IAEA,IAAG,MAAH,EAAU;MACT,OAAO,MAAM,CAAC,gBAAP,CAAwB,UAAxB,CAAP;IACA,CAFD,MAEK;MACJ,OAAO,CAAC,IAAR,CAAa,iDAAb,EAAgE,KAAhE;MACA,OAAO,OAAO,CAAC,MAAR,EAAP;IACA;EACD;;EAED,UAAU,CAAC,IAAD,EAAO,EAAP,EAAW,KAAX,EAAiB;IAC1B,IAAI,UAAU,GAAG,KAAK,aAAL,CAAmB,UAAnB,CAA8B,IAA9B,CAAjB;IAAA,IACA,QAAQ,GAAG,KAAK,aAAL,CAAmB,UAAnB,CAA8B,EAA9B,CADX;IAGA,KAAK,SAAL;;IAEA,IAAG,UAAH,EAAc;MACb,IAAG,QAAH,EAAY;QACX,KAAK,aAAL,CAAmB,UAAnB,CAA8B,UAA9B,EAA0C,QAA1C,EAAoD,KAApD;MACA,CAFD,MAEK;QACJ,OAAO,CAAC,IAAR,CAAa,wCAAb,EAAuD,QAAvD;MACA;IACD,CAND,MAMK;MACJ,OAAO,CAAC,IAAR,CAAa,wCAAb,EAAuD,IAAvD;IACA;EACD,CAxwBc,CA0wBhB;;;EACC,cAAc,CAAC,KAAD,EAAQ,QAAR,EAAkB,SAAlB,EAA4B;IACzC,OAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAqB;MACvC,IAAI,MAAM,GAAG,KAAK,aAAL,CAAmB,UAAnB,CAA8B,KAA9B,CAAb;;MAEA,IAAG,MAAH,EAAU;QACT,OAAO,KAAK,aAAL,CAAmB,cAAnB,CAAkC,MAAlC,EAA0C,QAA1C,EAAoD,SAApD,CAAP;MACA,CAFD,MAEK;QACJ,OAAO,CAAC,IAAR,CAAa,0CAAb,EAAyD,KAAzD;QACA,OAAO,OAAO,CAAC,MAAR,CAAe,yCAAf,CAAP;MACA;IACD,CATM,CAAP;EAUA,CAtxBc,CAwxBhB;EACA;;;EACC,MAAM,CAAC,KAAD,EAAO;IACZ,KAAK,SAAL;IAEA,KAAK,aAAL,CAAmB,MAAnB,CAA0B,KAA1B;IACA,KAAK,UAAL,CAAgB,MAAhB,CAAuB,KAAvB;EACA;;EAED,SAAS,CAAC,MAAD,EAAQ;IAChB,KAAK,OAAL,CAAa,MAAb,GAAsB,KAAK,CAAC,MAAD,CAAL,GAAgB,MAAhB,GAAyB,MAAM,GAAG,IAAxD;IACA,KAAK,OAAL,CAAa,KAAb,CAAmB,MAAnB,GAA4B,KAAK,OAAL,CAAa,MAAzC;IACA,KAAK,UAAL,CAAgB,kBAAhB;IACA,KAAK,UAAL,CAAgB,MAAhB;EACA,CAtyBc,CAwyBhB;;;EAEC,EAAE,CAAC,GAAD,EAAM,QAAN,EAAe;IAChB,KAAK,cAAL,CAAoB,SAApB,CAA8B,GAA9B,EAAmC,QAAnC;EACA;;EAED,GAAG,CAAC,GAAD,EAAM,QAAN,EAAe;IACjB,KAAK,cAAL,CAAoB,WAApB,CAAgC,GAAhC,EAAqC,QAArC;EACA;;EAED,aAAa,GAAE;IACd,IAAI,IAAI,GAAG,KAAK,CAAC,IAAN,CAAW,SAAX,CAAX;IACA,IAAI,CAAC,KAAL;IAEA,KAAK,cAAL,CAAoB,QAApB,CAA6B,GAAG,SAAhC;EACA,CAvzBc,CAyzBhB;;;EAEC,KAAK,CAAC,QAAD,EAAW,IAAX,EAAgB;IACpB,KAAK,SAAL;IAEA,KAAK,YAAL,CAAkB,KAAlB,CAAwB,QAAxB,EAAkC,IAAlC;EACA;;EAED,UAAU,GAAE;IACX,KAAK,SAAL;IAEA,KAAK,YAAL,CAAkB,KAAlB;EACA,CAr0Bc,CAu0BhB;;;EACC,SAAS,CAAC,MAAD,EAAS,QAAT,EAAkB;IAC1B,IAAG,KAAK,OAAL,CAAa,MAAb,CAAH,EAAwB;MACvB,OAAO,IAAP;IACA,CAFD,MAEK;MACJ,IAAG,QAAH,EAAY;QACX,OAAO,CAAC,KAAR,CAAc,qCAAqC,MAAnD;MACA;;MACD,OAAO,KAAP;IACA;EACD;;EAED,MAAM,CAAC,GAAD,EAAK;IACV,IAAI,GAAG,GAAG,KAAK,OAAL,CAAa,GAAb,CAAV;;IAEA,IAAG,CAAC,GAAJ,EAAQ;MACP,OAAO,CAAC,KAAR,CAAc,qCAAqC,GAAnD;IACA;;IAED,OAAO,GAAP;EACA;;AA31Bc,EA81BhB;;;;AACA,SAAS,CAAC,cAAV,GAA2B,cAA3B,EAEA;;AACA,IAAI,YAAJ,CAAiB,SAAjB,GC13BA;;AAKA,MAAM,aAAN,SAA4B,SAA5B,CAAsC,GAEtC;;;;AACA,IAAI,YAAJ,CAAiB,aAAjB,EAAgC,OAAhC;;ACRe,MAAM,SAAN,CAAgB;EAE9B,WAAW,CAAE,IAAF,EAAO;IACjB,KAAK,IAAL,GAAY,IAAZ;IACA,KAAK,OAAL,GAAe,KAAK,cAAL,EAAf;EACA;;EAED,cAAc,GAAE;IACf,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAT;IACA,EAAE,CAAC,SAAH,CAAa,GAAb,CAAiB,eAAjB;IACA,OAAO,EAAP;EACA;;EAED,UAAU,GAAE;IACX,OAAO,KAAK,OAAZ;EACA;;EAED,YAAY,GAAE;IACb,OAAO,KAAP;EACA;;EAED,OAAO,GAAE;IACR,OAAO,EAAP;EACA;;EAED,SAAS,GAAE;IACV,OAAO,KAAK,OAAL,CAAa,WAApB;EACA;;EAED,UAAU,GAAE,CAAE;;EAEd,YAAY,GAAE,CAAE;;EAEhB,eAAe,GAAE,CAAE;;EAEnB,aAAa,GAAE,CAAE;;EAEjB,kBAAkB,GAAE,CAAE;;EAEtB,UAAU,GAAE,CAAE;;EAEd,aAAa,GAAE,CAAE;;EAEjB,eAAe,GAAE,CAAE;;AA3CW;;;;;;ACA/B;;AACA;;AACA;;AACA;;AACA;;;;;;AAGA;AACAv7B,CAAC,CAAC,UAAD,CAAD,CAAc3M,IAAd;AACA2M,CAAC,CAAC,WAAD,CAAD,CAAe3M,IAAf;AACA2M,CAAC,CAAC,cAAD,CAAD,CAAkB3M,IAAlB,IAEA;;AACA2M,CAAC,CAAC,QAAD,CAAD,CAAYmE,EAAZ,CAAe,OAAf,EAAwB,YAAM;EAC5BnE,CAAC,CAAC,oBAAD,CAAD,CAAwB3M,IAAxB;EACA2M,CAAC,CAAC,aAAD,CAAD,CAAiB3M,IAAjB;EACA2M,CAAC,CAAC,cAAD,CAAD,CAAkB3M,IAAlB;EACA2M,CAAC,CAAC,UAAD,CAAD,CAAcsT,IAAd;EACAtT,CAAC,CAAC,WAAD,CAAD,CAAe3M,IAAf;EACA2M,CAAC,CAAC,aAAD,CAAD,CAAiB3M,IAAjB;EACA2M,CAAC,CAAC,cAAD,CAAD,CAAkB3M,IAAlB;EACA2M,CAAC,CAAC,YAAD,CAAD,CAAgBqhB,IAAhB,CAAqB,0BAArB;AACD,CATD,GAWA;;AACArhB,CAAC,CAAC,QAAD,CAAD,CAAYmE,EAAZ,CAAe,OAAf,EAAwB,YAAM;EAC5BnE,CAAC,CAAC,oBAAD,CAAD,CAAwBsT,IAAxB;EACAtT,CAAC,CAAC,aAAD,CAAD,CAAiBsT,IAAjB;EACAtT,CAAC,CAAC,UAAD,CAAD,CAAc3M,IAAd;EACA2M,CAAC,CAAC,WAAD,CAAD,CAAe3M,IAAf;EACA2M,CAAC,CAAC,cAAD,CAAD,CAAkB3M,IAAlB;EACA2M,CAAC,CAAC,aAAD,CAAD,CAAiB3M,IAAjB;EACA2M,CAAC,CAAC,cAAD,CAAD,CAAkB3M,IAAlB;AACD,CARD;AAUA2M,CAAC,CAAC,QAAD,CAAD,CAAYmE,EAAZ,CAAe,OAAf,EAAwB,YAAM;EAC5BnE,CAAC,CAAC,oBAAD,CAAD,CAAwB3M,IAAxB;EACA2M,CAAC,CAAC,aAAD,CAAD,CAAiB3M,IAAjB;EACA2M,CAAC,CAAC,UAAD,CAAD,CAAc3M,IAAd;EACA2M,CAAC,CAAC,WAAD,CAAD,CAAesT,IAAf;EACAtT,CAAC,CAAC,aAAD,CAAD,CAAiB3M,IAAjB;EACA2M,CAAC,CAAC,cAAD,CAAD,CAAkB3M,IAAlB;EACA2M,CAAC,CAAC,cAAD,CAAD,CAAkB3M,IAAlB;EACA2M,CAAC,CAAC,aAAD,CAAD,CAAiBqhB,IAAjB,CAAsB,6BAAtB;EACArhB,CAAC,CAAC,iBAAD,CAAD,CAAqBw7B,KAArB;EAEAx7B,CAAC,CAACnN,GAAF,CAAM,WAAN,EAAmB,UAAChI,IAAD,EAAU;IAE3BA,IAAI,CAACjK,OAAL,CAAa,UAACmqB,EAAD,EAAM;MACjB,IAAItR,UAAU,GAAGsR,EAAE,CAAC0wB,WAApB;MACA,IAAI56C,IAAI,GAAGkqB,EAAE,CAAC2wB,UAAH,GAAgB,GAAhB,GAAsB3wB,EAAE,CAAC4wB,SAApC;MACA96C,IAAI,GAAG+6C,WAAW,CAAC/6C,IAAD,CAAlB;MACAmf,CAAC,CAAC,mBAAD,CAAD,CAAuBqhB,IAAvB,CAA4BxgC,IAA5B,EAAkCg7C,IAAlC,CAAuC,IAAvC,EAA6CpiC,UAA7C,EAAyDqiC,QAAzD,CAAkE97B,CAAC,CAAC,iBAAD,CAAnE;IAED,CAND;EASD,CAXD;AAYD,CAvBD;AA0BEA,CAAC,CAAC,QAAD,CAAD,CAAYmE,EAAZ,CAAe,OAAf,EAAwB,YAAM;EAC5BnE,CAAC,CAAC,oBAAD,CAAD,CAAwB3M,IAAxB;EACA2M,CAAC,CAAC,aAAD,CAAD,CAAiB3M,IAAjB;EACA2M,CAAC,CAAC,UAAD,CAAD,CAAc3M,IAAd;EACA2M,CAAC,CAAC,WAAD,CAAD,CAAe3M,IAAf;EACA2M,CAAC,CAAC,aAAD,CAAD,CAAiB3M,IAAjB;EACA2M,CAAC,CAAC,cAAD,CAAD,CAAkB3M,IAAlB;EACA2M,CAAC,CAAC,cAAD,CAAD,CAAkBsT,IAAlB;AACD,CARD,GAcF;;AACAtT,CAAC,CAAC,cAAD,CAAD,CAAkBmE,EAAlB,CAAqB,QAArB,EAA+B,YAAM;EACnC,IAAI43B,gBAAgB,GAAG/7B,CAAC,CAAC,0BAAD,CAAD,CAA8Bg8B,GAA9B,EAAvB;;EAEA,IAAID,gBAAgB,IAAI,kBAApB,IAA0CA,gBAAgB,IAAI,SAAlE,EAA6E;IAC3E/7B,CAAC,CAAC,WAAD,CAAD,CAAeg8B,GAAf,CAAmB,gBAAnB;EACD,CAFD,MAEO,IACLD,gBAAgB,IAAI,oBAApB,IACAA,gBAAgB,IAAI,qBAFf,EAGL;IACA/7B,CAAC,CAAC,WAAD,CAAD,CAAeg8B,GAAf,CAAmB,oBAAnB;EACD,CALM,MAKA,IACLD,gBAAgB,IAAI,iBAApB,IACAA,gBAAgB,IAAI,aADpB,IAEAA,gBAAgB,IAAI,cAFpB,IAGAA,gBAAgB,IAAI,gBAJf,EAKL;IACA/7B,CAAC,CAAC,WAAD,CAAD,CAAeg8B,GAAf,CAAmB,cAAnB;EACD,CAPM,MAOA;IACLh8B,CAAC,CAAC,WAAD,CAAD,CAAeg8B,GAAf,CAAmB,SAAnB;EACD;AACF,CApBD,GAsBA;;AACA,IAAIC,UAAU,GAAG,SAAbA,UAAa,GAAM;EACrB,IAAI72B,GAAG,GAAG,EAAV;EAEAA,GAAG,CAACs2B,UAAJ,GAAiB17B,CAAC,CAAC,0BAAD,CAAD,CAA8Bg8B,GAA9B,GAAoCx8C,WAApC,EAAjB;EACA4lB,GAAG,CAACu2B,SAAJ,GAAgB37B,CAAC,CAAC,yBAAD,CAAD,CAA6Bg8B,GAA7B,GAAmCx8C,WAAnC,EAAhB;EACA4lB,GAAG,CAAC82B,YAAJ,GAAmBl8B,CAAC,CAAC,4BAAD,CAAD,CAAgCg8B,GAAhC,EAAnB;EACA52B,GAAG,CAAC+2B,SAAJ,GAAgBn8B,CAAC,CAAC,0BAAD,CAAD,CAA8Bg8B,GAA9B,GAAoCx8C,WAApC,EAAhB;EACA4lB,GAAG,CAACg3B,SAAJ,GAAgBp8B,CAAC,CAAC,0BAAD,CAAD,CAA8Bg8B,GAA9B,GAAoCx8C,WAApC,EAAhB;EACA4lB,GAAG,CAACi3B,QAAJ,GAAer8B,CAAC,CAAC,0BAAD,CAAD,CAA8Bg8B,GAA9B,EAAf,CARqB,CAQ6B;;EAClD52B,GAAG,CAACk3B,KAAJ,GAAYt8B,CAAC,CAAC,sBAAD,CAAD,CAA0Bg8B,GAA1B,GAAgCx8C,WAAhC,EAAZ;EAEA,OAAO4lB,GAAP;AACD,CAZD,EAcA;;;AACA,IAAIm3B,KAAK,GAAG,EAAZ,EAEA;;AACA,IAAIC,QAAQ,GAAG,SAAXA,QAAW,CAACC,GAAD,EAAS;EACtB,IAAIA,GAAJ,EAAS;IACPF,KAAK,GAAGE,GAAG,CAACC,OAAJ,GAAcC,EAAtB;EACD,CAFD,MAEO;IACL,OAAOJ,KAAP;EACD;AACF,CAND,EAQA;;;AACA,IAAMK,SAAS,GAAG58B,CAAC,CAAC,UAAD,CAAnB;AACA48B,SAAS,CAACC,MAAV,CAAiB,UAAC56B,KAAD,EAAW;EAC1BA,KAAK,CAACkD,cAAN;EAEA,IAAIC,GAAG,GAAG62B,UAAU,EAApB;;EAEA,IAAIj8B,CAAC,CAAC,YAAD,CAAD,CAAgBqhB,IAAhB,MAA0B,0BAA9B,EAA0D;IACxDrhB,CAAC,CAAC88B,IAAF,CAAO;MACLv6B,IAAI,EAAE,MADD;MAELw6B,GAAG,EAAE,WAFA;MAGLlyC,IAAI,EAAEmb,IAAI,CAACm0B,SAAL,CAAe/0B,GAAf,CAHD;MAIL43B,WAAW,EAAE,kBAJR;MAKLC,UAAU,EAAE;QACV,KAAK,aAAW;UACdC,KAAK,CAAE,yBAAF,CAAL;QACD,CAHS;QAIV,KAAK,aAAW;UACdA,KAAK,CAAE,+BAAF,CAAL;QACD;MANS;IALP,CAAP;EAcD,CAfD,MAeO,IAAIl9B,CAAC,CAAC,YAAD,CAAD,CAAgBqhB,IAAhB,OAA2B,6BAA/B,EAA8D;IACnE,IAAIkb,MAAK,GAAGC,QAAQ,EAApB;;IAEAx8B,CAAC,CAAC88B,IAAF,CAAO;MACLv6B,IAAI,EAAE,OADD;MAELw6B,GAAG,sBAAeR,MAAf,CAFE;MAGL1xC,IAAI,EAAEmb,IAAI,CAACm0B,SAAL,CAAe/0B,GAAf,CAHD;MAIL43B,WAAW,EAAE,kBAJR;MAKLC,UAAU,EAAE;QACV,KAAK,aAAW;UACdC,KAAK,CAAE,oCAAF,CAAL;QACD,CAHS;QAIV,KAAK,aAAW;UACdA,KAAK,CAAE,+BAAF,CAAL;QACD;MANS;IALP,CAAP;EAcD,CAjBM,MAiBA,CACN;AACF,CAvCD,GAyCA;;AACA,IAAItB,WAAW,GAAG,SAAdA,WAAc,CAACzjC,GAAD,EAAS;EACzB,IAAIA,GAAG,CAACgF,QAAJ,CAAa,GAAb,CAAJ,EAAuB;IACrB,IAAIggC,IAAI,GAAGhlC,GAAG,CAAC7V,KAAJ,CAAU,OAAV,CAAX;IACA,IAAI8U,MAAM,GAAG,EAAb;;IACA,KAAK,IAAItF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqrC,IAAI,CAAC7sC,MAAzB,EAAiCwB,CAAC,EAAlC,EAAsC;MACpCsF,MAAM,IAAI+lC,IAAI,CAACrrC,CAAD,CAAJ,CAAQ8U,MAAR,CAAe,CAAf,EAAkBkB,WAAlB,KAAkCq1B,IAAI,CAACrrC,CAAD,CAAJ,CAAQgB,KAAR,CAAc,CAAd,CAAlC,GAAqD,GAA/D;IACD;;IACDsE,MAAM,GAAGA,MAAM,CAACiG,IAAP,EAAT;IACA,OAAOjG,MAAP;EACD;;EACD,OAAOe,GAAG,CAACyO,MAAJ,CAAW,CAAX,EAAckB,WAAd,KAA8B3P,GAAG,CAACrF,KAAJ,CAAU,CAAV,CAArC;AACD,CAXD,EAaA;;;AACA,IAAIsqC,cAAc,GAAG,SAAjBA,cAAiB,CAACX,GAAD,EAAS;EAC5B,IAAIr3B,GAAG,GAAG,EAAV;EAEAA,GAAG,CAACgjB,EAAJ,GAASqU,GAAG,CAACC,OAAJ,GAAcC,EAAvB;EAEA38B,CAAC,CAAC88B,IAAF,CAAO;IACLv6B,IAAI,EAAE,QADD;IAELw6B,GAAG,EAAE,WAFA;IAGLlyC,IAAI,EAAEmb,IAAI,CAACm0B,SAAL,CAAe/0B,GAAf,CAHD;IAIL43B,WAAW,EAAE;EAJR,CAAP;EAOAP,GAAG,CAAC32B,MAAJ;AACD,CAbD;;AAeA,IAAIu3B,SAAS,GAAG,SAAZA,SAAY,CAACZ,GAAD,EAAS;EACvB,IAAIr3B,GAAG,GAAG,EAAV;EAEAA,GAAG,CAACgjB,EAAJ,GAASqU,GAAG,CAACC,OAAJ,GAAcC,EAAvB;EAEA38B,CAAC,CAAC88B,IAAF,CAAO;IACLv6B,IAAI,EAAE,QADD;IAELw6B,GAAG,EAAE,UAFA;IAGLlyC,IAAI,EAAEmb,IAAI,CAACm0B,SAAL,CAAe/0B,GAAf,CAHD;IAIL43B,WAAW,EAAE;EAJR,CAAP;EAOAP,GAAG,CAAC32B,MAAJ;AACD,CAbD,EAeA;;;AACA,IAAIw3B,cAAc,GAAG,SAAjBA,cAAiB,CAACb,GAAD,EAAS;EAC5Bz8B,CAAC,CAAC,oBAAD,CAAD,CAAwB3M,IAAxB;EACA2M,CAAC,CAAC,aAAD,CAAD,CAAiB3M,IAAjB;EACA2M,CAAC,CAAC,UAAD,CAAD,CAAcsT,IAAd;EACAtT,CAAC,CAAC,aAAD,CAAD,CAAiB3M,IAAjB;EACA2M,CAAC,CAAC,cAAD,CAAD,CAAkB3M,IAAlB;EAEA2M,CAAC,CAAC,YAAD,CAAD,CAAgBqhB,IAAhB,CAAqB,6BAArB;EACAmb,QAAQ,CAACC,GAAD,CAAR;EAEAz8B,CAAC,CAAC,0BAAD,CAAD,CAA8Bg8B,GAA9B,CAAkCS,GAAG,CAACC,OAAJ,GAAc,YAAd,CAAlC;EACA18B,CAAC,CAAC,yBAAD,CAAD,CAA6Bg8B,GAA7B,CAAiCS,GAAG,CAACC,OAAJ,GAAc,WAAd,CAAjC;EACA18B,CAAC,CAAC,4BAAD,CAAD,CAAgCg8B,GAAhC,CAAoCS,GAAG,CAACC,OAAJ,GAAc,cAAd,CAApC;EACA18B,CAAC,CAAC,0BAAD,CAAD,CAA8Bg8B,GAA9B,CAAkCS,GAAG,CAACC,OAAJ,GAAc,WAAd,CAAlC;EACA18B,CAAC,CAAC,0BAAD,CAAD,CAA8Bg8B,GAA9B,CAAkCS,GAAG,CAACC,OAAJ,GAAc,WAAd,CAAlC;EACA18B,CAAC,CAAC,0BAAD,CAAD,CAA8Bg8B,GAA9B,CAAkCS,GAAG,CAACC,OAAJ,GAAc,UAAd,CAAlC;EACA18B,CAAC,CAAC,sBAAD,CAAD,CAA0Bg8B,GAA1B,CAA8BS,GAAG,CAACC,OAAJ,GAAc,OAAd,CAA9B;AACD,CAjBD;;AAmBA,IAAIa,SAAS,GAAG,SAAZA,SAAY,CAACd,GAAD,EAAS;EACvBz8B,CAAC,CAAC,oBAAD,CAAD,CAAwB3M,IAAxB;EACA2M,CAAC,CAAC,cAAD,CAAD,CAAkB3M,IAAlB;EACA2M,CAAC,CAAC,WAAD,CAAD,CAAesT,IAAf;EACAtT,CAAC,CAAC,cAAD,CAAD,CAAkB3M,IAAlB;EACA2M,CAAC,CAAC,aAAD,CAAD,CAAiB3M,IAAjB;EACA2M,CAAC,CAAC,aAAD,CAAD,CAAiB3M,IAAjB;EACA2M,CAAC,CAAC,aAAD,CAAD,CAAiBqhB,IAAjB,CAAsB,gCAAtB;EACArhB,CAAC,CAAC,iBAAD,CAAD,CAAqBw7B,KAArB;EACAgB,QAAQ,CAACC,GAAD,CAAR;EAEAz8B,CAAC,CAACnN,GAAF,CAAM,WAAN,EAAmB,UAAChI,IAAD,EAAU;IAE3BA,IAAI,CAACjK,OAAL,CAAa,UAACmqB,EAAD,EAAM;MACjB,IAAItR,UAAU,GAAGsR,EAAE,CAAC0wB,WAApB;MACA,IAAI56C,IAAI,GAAGkqB,EAAE,CAAC2wB,UAAH,GAAgB,GAAhB,GAAsB3wB,EAAE,CAAC4wB,SAApC;MACA96C,IAAI,GAAG+6C,WAAW,CAAC/6C,IAAD,CAAlB;MACAmf,CAAC,CAAC,mBAAD,CAAD,CAAuBqhB,IAAvB,CAA4BxgC,IAA5B,EAAkCg7C,IAAlC,CAAuC,IAAvC,EAA6CpiC,UAA7C,EAAyDqiC,QAAzD,CAAkE97B,CAAC,CAAC,iBAAD,CAAnE;IAED,CAND;EAOD,CATD;EAaAA,CAAC,CAAC,6BAAD,CAAD,CAAiCg8B,GAAjC,CAAqCS,GAAG,CAACC,OAAJ,GAAc,YAAd,IAA8B,GAA9B,GAAoCD,GAAG,CAACC,OAAJ,GAAc,WAAd,CAAzE;EACA18B,CAAC,CAAC,oBAAD,CAAD,CAAwBg8B,GAAxB,CAA4BS,GAAG,CAACC,OAAJ,GAAc,MAAd,CAA5B;EACA18B,CAAC,CAAC,2BAAD,CAAD,CAA+Bg8B,GAA/B,CAAmCS,GAAG,CAACC,OAAJ,GAAc,YAAd,CAAnC;EACA18B,CAAC,CAAC,wBAAD,CAAD,CAA4Bg8B,GAA5B,CAAgCS,GAAG,CAACC,OAAJ,GAAc,QAAd,CAAhC;EACA18B,CAAC,CAAC,2BAAD,CAAD,CAA+Bg8B,GAA/B,CAAmCS,GAAG,CAACC,OAAJ,GAAc,WAAd,CAAnC;EACA18B,CAAC,CAAC,sBAAD,CAAD,CAA0Bg8B,GAA1B,CAA8BS,GAAG,CAACC,OAAJ,GAAc,MAAd,CAA9B;EACA18B,CAAC,CAAC,sBAAD,CAAD,CAA0Bg8B,GAA1B,CAA8BS,GAAG,CAACC,OAAJ,GAAc,MAAd,CAA9B;;EAEA,IAAGD,GAAG,CAACC,OAAJ,GAAc,QAAd,MAA4B,KAA/B,EAAqC;IACnC18B,CAAC,CAAC,gBAAD,CAAD,CAAoB84B,IAApB,CAAyB,SAAzB,EAAmC,IAAnC;EACA,CAFF,MAEO,IAAG2D,GAAG,CAACC,OAAJ,GAAc,QAAd,MAA4B,IAA/B,EAAoC;IACzC18B,CAAC,CAAC,gBAAD,CAAD,CAAoB84B,IAApB,CAAyB,SAAzB,EAAmC,KAAnC;EACA;;EACD,IAAG2D,GAAG,CAACC,OAAJ,GAAc,QAAd,MAA4B,KAA/B,EAAqC;IACpC18B,CAAC,CAAC,gBAAD,CAAD,CAAoB84B,IAApB,CAAyB,SAAzB,EAAmC,IAAnC;EACA,CAFD,MAEM,IAAG2D,GAAG,CAACC,OAAJ,GAAc,QAAd,MAA4B,IAA/B,EAAoC;IACzC18B,CAAC,CAAC,gBAAD,CAAD,CAAoB84B,IAApB,CAAyB,SAAzB,EAAmC,KAAnC;EACA;;EACD,IAAG2D,GAAG,CAACC,OAAJ,GAAc,UAAd,MAA8B,KAAjC,EAAuC;IACtC18B,CAAC,CAAC,gBAAD,CAAD,CAAoB84B,IAApB,CAAyB,SAAzB,EAAmC,IAAnC;EACA,CAFD,MAEM,IAAG2D,GAAG,CAACC,OAAJ,GAAc,UAAd,MAA8B,IAAjC,EAAsC;IAC3C18B,CAAC,CAAC,gBAAD,CAAD,CAAoB84B,IAApB,CAAyB,SAAzB,EAAmC,KAAnC;EACA;AAIH,CAlDD,EAoDA;;;AACA,IAAI0E,aAAa,GAAG,SAAhBA,aAAgB,CAAC3yC,IAAD,EAAU;EAC5B;EACA,IAAI4yC,SAAS,GAAG,EAAhB;;EAEA,IAAG5yC,IAAI,CAAC6yC,YAAL,KAAsB,eAAzB,EAAyC;IAEvC7yC,IAAI,CAACjK,OAAL,CAAa,UAACmqB,EAAD,EAAQ;MACnB,IAAI3F,GAAG,GAAG,EAAV;MACAA,GAAG,CAAC,IAAD,CAAH,GAAY2F,EAAE,CAAC0wB,WAAf;MACAr2B,GAAG,CAAC,YAAD,CAAH,GAAoBw2B,WAAW,CAAC7wB,EAAE,CAAC2wB,UAAJ,CAA/B;MACAt2B,GAAG,CAAC,WAAD,CAAH,GAAmBw2B,WAAW,CAAC7wB,EAAE,CAAC4wB,SAAJ,CAA9B;MACAv2B,GAAG,CAAC,cAAD,CAAH,GAAsB2F,EAAE,CAACmxB,YAAzB;MACA92B,GAAG,CAAC,WAAD,CAAH,GAAmBw2B,WAAW,CAAC7wB,EAAE,CAACoxB,SAAJ,CAA9B;MACA/2B,GAAG,CAAC,WAAD,CAAH,GAAmBw2B,WAAW,CAAC7wB,EAAE,CAACqxB,SAAJ,CAA9B;MACAh3B,GAAG,CAAC,UAAD,CAAH,GAAkB2F,EAAE,CAACsxB,QAArB;MACAj3B,GAAG,CAAC,OAAD,CAAH,GAAew2B,WAAW,CAAC7wB,EAAE,CAACuxB,KAAJ,CAA1B;MACAmB,SAAS,CAACrrC,IAAV,CAAegT,GAAf;IACD,CAXD;IAaApF,CAAC,CAAC,aAAD,CAAD,CAAiB29B,QAAjB,CAA0B,YAA1B,EAAwC7B,QAAxC,CAAiD97B,CAAC,CAAC,MAAD,CAAlD;IACAA,CAAC,CAAC,aAAD,CAAD,CAAiBsT,IAAjB,GAhBuC,CAkBvC;;IACA,IAAIsqB,KAAK,GAAG,IAAIC,8BAAJ,CAAc,aAAd,EAA6B;MACvChzC,IAAI,EAAE4yC,SADiC;MAEvCK,OAAO,EAAE,CACP;QAAE7a,KAAK,EAAE,IAAT;QAAe8a,KAAK,EAAE,IAAtB;QAA4BC,OAAO,EAAE;MAArC,CADO,EAEP;QAAE/a,KAAK,EAAE,YAAT;QAAuB8a,KAAK,EAAE;MAA9B,CAFO,EAGP;QAAE9a,KAAK,EAAE,WAAT;QAAsB8a,KAAK,EAAE;MAA7B,CAHO,EAIP;QAAE9a,KAAK,EAAE,cAAT;QAAyB8a,KAAK,EAAE;MAAhC,CAJO,EAKP;QAAE9a,KAAK,EAAE,WAAT;QAAsB8a,KAAK,EAAE;MAA7B,CALO,EAMP;QAAE9a,KAAK,EAAE,WAAT;QAAsB8a,KAAK,EAAE;MAA7B,CANO,EAOP;QAAE9a,KAAK,EAAE,UAAT;QAAqB8a,KAAK,EAAE;MAA5B,CAPO,EAQP;QAAE9a,KAAK,EAAE,OAAT;QAAkB8a,KAAK,EAAE;MAAzB,CARO,CAF8B;MAYvCE,MAAM,EAAE,gBAZ+B;MAavCC,UAAU,EAAE,IAb2B;MAcvCC,UAAU,EAAE,CAd2B;MAevCC,cAAc,EAAE,CAfuB;MAgBvCC,qBAAqB,EAAE,CAhBgB;MAiBvCC,YAAY,EAAE,sBAAU7B,GAAV,EAAe;QAC3BA,GAAG,CAACt+B,UAAJ,GAAiBrd,KAAjB,CAAuBy9C,SAAvB,GAAmC,SAAnC;MACD,CAnBsC;MAoBvCC,cAAc,EAAE,CACd;QACEC,KAAK,EAAE,QADT;QAEEC,MAAM,EAAE,gBAAU1S,CAAV,EAAayQ,GAAb,EAAkB;UACxB,IAAIkC,OAAO,CAAC,kCAAD,CAAX,EAAiD;YAC/CrB,cAAc,CAACb,GAAD,CAAd;UACD;QACF;MANH,CADc,EASd;QACEmC,SAAS,EAAE;MADb,CATc,EAYd;QACEH,KAAK,EAAE,QADT;QAEEC,MAAM,EAAE,gBAAU1S,CAAV,EAAayQ,GAAb,EAAkB;UACxB,IAAIkC,OAAO,CAAC,kCAAD,CAAX,EAAiD;YAC/CvB,cAAc,CAACX,GAAD,CAAd;UACD;QACF;MANH,CAZc;IApBuB,CAA7B,CAAZ;EA0CD,CA7DD,MA6DM,IAAG5xC,IAAI,CAAC6yC,YAAL,KAAsB,UAAzB,EAAoC;IAExC7yC,IAAI,CAACjK,OAAL,CAAa,UAACmqB,EAAD,EAAQ;MACnB,IAAI3F,GAAG,GAAG,EAAV;MACAA,GAAG,CAAC,IAAD,CAAH,GAAY2F,EAAE,CAAC8zB,cAAf;MACAz5B,GAAG,CAAC,MAAD,CAAH,GAAc2F,EAAE,CAACkwB,IAAjB;MACA71B,GAAG,CAAC,YAAD,CAAH,GAAoBw2B,WAAW,CAAC7wB,EAAE,CAAC2wB,UAAJ,CAA/B;MACAt2B,GAAG,CAAC,WAAD,CAAH,GAAmBw2B,WAAW,CAAC7wB,EAAE,CAAC4wB,SAAJ,CAA9B;MACAv2B,GAAG,CAAC,YAAD,CAAH,GAAoBw2B,WAAW,CAAC7wB,EAAE,CAAC+zB,UAAJ,CAA/B;MACA15B,GAAG,CAAC,MAAD,CAAH,GAAcw2B,WAAW,CAAC7wB,EAAE,CAACg0B,IAAJ,CAAzB;MACA35B,GAAG,CAAC,QAAD,CAAH,GAAgB2F,EAAE,CAACza,MAAnB;MACA8U,GAAG,CAAC,WAAD,CAAH,GAAmB2F,EAAE,CAACi0B,SAAtB;MACA55B,GAAG,CAAC,MAAD,CAAH,GAAcw2B,WAAW,CAAC7wB,EAAE,CAACk0B,IAAJ,CAAzB;MACA75B,GAAG,CAAC,QAAD,CAAH,GAAkB2F,EAAE,CAACm0B,MAAH,KAAc,IAAf,GAAuB,KAAvB,GAA+B,IAAhD;MACA95B,GAAG,CAAC,QAAD,CAAH,GAAkB2F,EAAE,CAACo0B,MAAH,KAAc,IAAf,GAAuB,KAAvB,GAA+B,IAAhD;MACA/5B,GAAG,CAAC,UAAD,CAAH,GAAmB2F,EAAE,CAACq0B,QAAH,KAAgB,IAAjB,GAAyB,KAAzB,GAAiC,IAAnD;MACA3B,SAAS,CAACrrC,IAAV,CAAegT,GAAf;IACD,CAfD;IAiBApF,CAAC,CAAC,aAAD,CAAD,CAAiB29B,QAAjB,CAA0B,aAA1B,EAAyC7B,QAAzC,CAAkD97B,CAAC,CAAC,MAAD,CAAnD;IACAA,CAAC,CAAC,cAAD,CAAD,CAAkBsT,IAAlB,GApBwC,CAsBxC;;IACA,IAAI+rB,MAAM,GAAG,IAAIxB,8BAAJ,CAAc,cAAd,EAA8B;MACzChzC,IAAI,EAAE4yC,SADmC;MAEzCK,OAAO,EAAE,CACP;QAAE7a,KAAK,EAAE,IAAT;QAAe8a,KAAK,EAAE,IAAtB;QAA4BC,OAAO,EAAE;MAArC,CADO,EAEP;QAAE/a,KAAK,EAAE,YAAT;QAAuB8a,KAAK,EAAE;MAA9B,CAFO,EAGP;QAAE9a,KAAK,EAAE,WAAT;QAAsB8a,KAAK,EAAE;MAA7B,CAHO,EAIP;QAAE9a,KAAK,EAAE,MAAT;QAAiB8a,KAAK,EAAE;MAAxB,CAJO,EAKP;QAAE9a,KAAK,EAAE,YAAT;QAAuB8a,KAAK,EAAE;MAA9B,CALO,EAMP;QAAE9a,KAAK,EAAE,MAAT;QAAiB8a,KAAK,EAAE;MAAxB,CANO,EAOP;QAAE9a,KAAK,EAAE,QAAT;QAAmB8a,KAAK,EAAE;MAA1B,CAPO,EAQP;QAAE9a,KAAK,EAAE,WAAT;QAAsB8a,KAAK,EAAE;MAA7B,CARO,EASP;QAAE9a,KAAK,EAAE,MAAT;QAAkB8a,KAAK,EAAE;MAAzB,CATO,EAUP;QAAE9a,KAAK,EAAE,QAAT;QAAoB8a,KAAK,EAAE;MAA3B,CAVO,EAWP;QAAE9a,KAAK,EAAE,QAAT;QAAoB8a,KAAK,EAAE;MAA3B,CAXO,EAYP;QAAE9a,KAAK,EAAE,UAAT;QAAsB8a,KAAK,EAAE;MAA7B,CAZO,CAFgC;MAgBzCE,MAAM,EAAE,gBAhBiC;MAiBzCC,UAAU,EAAE,IAjB6B;MAkBzCE,cAAc,EAAE,CAlByB;MAmBzCC,qBAAqB,EAAE,CAnBkB;MAoBzCC,YAAY,EAAE,sBAAU7B,GAAV,EAAe;QAC3BA,GAAG,CAACt+B,UAAJ,GAAiBrd,KAAjB,CAAuBy9C,SAAvB,GAAmC,SAAnC;MACD,CAtBwC;MAuBzCC,cAAc,EAAE,CACd;QACEC,KAAK,EAAE,QADT;QAEEC,MAAM,EAAE,gBAAU1S,CAAV,EAAayQ,GAAb,EAAkB;UACxB,IAAIkC,OAAO,CAAC,kCAAD,CAAX,EAAiD;YAC/CpB,SAAS,CAACd,GAAD,CAAT;UACD;QACF;MANH,CADc,EASd;QACEmC,SAAS,EAAE;MADb,CATc,EAYd;QACEH,KAAK,EAAE,QADT;QAEEC,MAAM,EAAE,gBAAU1S,CAAV,EAAayQ,GAAb,EAAkB;UACxB,IAAIkC,OAAO,CAAC,kCAAD,CAAX,EAAiD;YAC/CtB,SAAS,CAACZ,GAAD,CAAT;UACD;QACF;MANH,CAZc;IAvByB,CAA9B,CAAb;EA+CD;;EAED,IAAI6C,OAAO,GAAG,EAAd;EAEA1B,KAAK,CAACz5B,EAAN,CAAS,UAAT,EAAqB,UAAS6nB,CAAT,EAAYyQ,GAAZ,EAAgB;IAEnC,IAAGA,GAAG,CAACC,OAAJ,MAAiB4C,OAApB,EAA4B;MAE1B,IAAIC,QAAQ,GAAG9C,GAAG,CAACC,OAAJ,GAAcC,EAA7B;MAEA38B,CAAC,CAACnN,GAAF,mBAAiB0sC,QAAjB,GAA6B,UAAC10C,IAAD,EAAS;QAGlCA,IAAI,CAAC6yC,YAAL,GAAoB,UAApB;QAEAF,aAAa,CAAC3yC,IAAD,CAAb;MAEH,CAPD,EAOG20C,IAPH,CAOQ,YAAM;QACZtC,KAAK,CAAC,8CAAD,CAAL;QACAl9B,CAAC,CAAC,cAAD,CAAD,CAAkB3M,IAAlB;MACD,CAVD;MAiBAisC,OAAO,GAAG7C,GAAG,CAACC,OAAJ,EAAV;IACD,CAtBD,MAsBK;MACH18B,CAAC,CAAC,cAAD,CAAD,CAAkB3M,IAAlB;MACAisC,OAAO,GAAG,EAAV;IACD;EAOF,CAlCD;AAmCD,CA9KD,EAgLA;;;AACA,IAAMG,WAAW,GAAGz/B,CAAC,CAAC,aAAD,CAArB;AACAy/B,WAAW,CAAC5C,MAAZ,CAAmB,UAAC56B,KAAD,EAAW;EAC5BA,KAAK,CAACkD,cAAN;EAEAu6B,UAAU,GAAG1/B,CAAC,CAAC,wBAAD,CAAD,CAA4Bg8B,GAA5B,EAAb;EAEAh8B,CAAC,CAAC,oBAAD,CAAD,CAAwB3M,IAAxB;EAEA2M,CAAC,CAACnN,GAAF,qBAAmB6sC,UAAnB,GAAiC,UAAC70C,IAAD,EAAU;IACvCA,IAAI,CAAC6yC,YAAL,GAAoB,eAApB;IACAF,aAAa,CAAC3yC,IAAD,CAAb;EACH,CAHD,EAGG20C,IAHH,CAGQ,YAAK;IACXtC,KAAK,CAAC,oBAAD,CAAL;EACD,CALD;AAMD,CAbD;AAeA,IAAMyC,YAAY,GAAG3/B,CAAC,CAAC,cAAD,CAAtB;AACA2/B,YAAY,CAAC9C,MAAb,CAAoB,UAAC56B,KAAD,EAAW;EAC7BA,KAAK,CAACkD,cAAN;EAEAu6B,UAAU,GAAG1/B,CAAC,CAAC,wBAAD,CAAD,CAA4Bg8B,GAA5B,EAAb;EAEAh8B,CAAC,CAACnN,GAAF,oBAAkB6sC,UAAlB,GAAgC,UAAC70C,IAAD,EAAU;IAExCA,IAAI,CAAC6yC,YAAL,GAAoB,UAApB;IAEAF,aAAa,CAAC3yC,IAAD,CAAb;EAED,CAND,EAMG20C,IANH,CAMQ,YAAK;IACXtC,KAAK,CAAC,uBAAD,CAAL;IACAl9B,CAAC,CAAC,cAAD,CAAD,CAAkB3M,IAAlB;EACD,CATD;AAUD,CAfD,GAiBA;;AACA,IAAMusC,UAAU,GAAG5/B,CAAC,CAAC,WAAD,CAApB;AACA4/B,UAAU,CAAC/C,MAAX,CAAkB,UAAC56B,KAAD,EAAW;EAC3BA,KAAK,CAACkD,cAAN;EAGA,IAAIC,GAAG,GAAG,EAAV;EAGAA,GAAG,CAACvkB,IAAJ,GAAWmf,CAAC,CAAC,6BAAD,CAAD,CAAiCg8B,GAAjC,GAAuCx8C,WAAvC,EAAX;EACA4lB,GAAG,CAAC61B,IAAJ,GAAWj7B,CAAC,CAAC,oBAAD,CAAD,CAAwBg8B,GAAxB,EAAX;EACA52B,GAAG,CAAC05B,UAAJ,GAAiB9+B,CAAC,CAAC,2BAAD,CAAD,CAA+Bg8B,GAA/B,GAAqCx8C,WAArC,EAAjB;EACA4lB,GAAG,CAAC9U,MAAJ,GAAa0P,CAAC,CAAC,wBAAD,CAAD,CAA4Bg8B,GAA5B,GAAkCx8C,WAAlC,EAAb;EACA4lB,GAAG,CAAC45B,SAAJ,GAAgBh/B,CAAC,CAAC,2BAAD,CAAD,CAA+Bg8B,GAA/B,GAAqCx8C,WAArC,EAAhB;EACA4lB,GAAG,CAAC25B,IAAJ,GAAW/+B,CAAC,CAAC,sBAAD,CAAD,CAA0Bg8B,GAA1B,GAAgCx8C,WAAhC,EAAX;EACA4lB,GAAG,CAAC65B,IAAJ,GAAWj/B,CAAC,CAAC,sBAAD,CAAD,CAA0Bg8B,GAA1B,GAAgCx8C,WAAhC,EAAX;;EAEA,IAAGwgB,CAAC,CAAC,gBAAD,CAAD,CAAoB6/B,EAApB,CAAuB,UAAvB,CAAH,EAAsC;IACpCz6B,GAAG,CAAC+5B,MAAJ,GAAa,IAAb;EACA,CAFF,MAEM;IACJ/5B,GAAG,CAAC+5B,MAAJ,GAAa,KAAb;EACA;;EAEH,IAAGn/B,CAAC,CAAC,gBAAD,CAAD,CAAoB6/B,EAApB,CAAuB,UAAvB,CAAH,EAAsC;IACrCz6B,GAAG,CAAC85B,MAAJ,GAAa,IAAb;EACA,CAFD,MAEK;IACJ95B,GAAG,CAAC85B,MAAJ,GAAa,KAAb;EACA;;EAED,IAAGl/B,CAAC,CAAC,gBAAD,CAAD,CAAoB6/B,EAApB,CAAuB,UAAvB,CAAH,EAAsC;IACrCz6B,GAAG,CAACg6B,QAAJ,GAAe,IAAf;EACA,CAFD,MAEK;IACJh6B,GAAG,CAACg6B,QAAJ,GAAe,KAAf;EACA;;EAEF,IAAGh6B,GAAG,CAAC61B,IAAJ,KAAa,EAAhB,EAAmB;IACjBiC,KAAK,CAAC,sBAAD,CAAL;EACD,CAFD,MAEK;IAEH,IAAGl9B,CAAC,CAAC,aAAD,CAAD,CAAiBqhB,IAAjB,OAA4B,6BAA/B,EAA6D;MAE7DrhB,CAAC,CAAC88B,IAAF,CAAO;QACDv6B,IAAI,EAAE,MADL;QAEDw6B,GAAG,EAAE,UAFJ;QAGDlyC,IAAI,EAAEmb,IAAI,CAACm0B,SAAL,CAAe/0B,GAAf,CAHL;QAID43B,WAAW,EAAE,kBAJZ;QAKDC,UAAU,EAAE;UACV,KAAK,aAAW;YACdC,KAAK,CAAE,2CAAF,CAAL;UACD,CAHS;UAIV,KAAK,aAAW;YACdA,KAAK,CAAE,mCAAF,CAAL;UACD;QANS;MALX,CAAP;IAcC,CAhBD,MAgBM,IAAGl9B,CAAC,CAAC,aAAD,CAAD,CAAiBqhB,IAAjB,OAA4B,gCAA/B,EAAgE;MAElE,IAAIkb,OAAK,GAAGC,QAAQ,EAApB;;MAEAx8B,CAAC,CAAC88B,IAAF,CAAO;QACLv6B,IAAI,EAAE,OADD;QAELw6B,GAAG,qBAAcR,OAAd,CAFE;QAGL1xC,IAAI,EAAEmb,IAAI,CAACm0B,SAAL,CAAe/0B,GAAf,CAHD;QAIL43B,WAAW,EAAE,kBAJR;QAKLC,UAAU,EAAE;UACV,KAAK,aAAW;YACdC,KAAK,CAAE,oCAAF,CAAL;UACD,CAHS;UAIV,KAAK,aAAW;YACdA,KAAK,CAAE,mCAAF,CAAL;UACD;QANS;MALP,CAAP;IAcH;EAGA;AAEF,CA5ED","file":"src.9d19433c.js","sourceRoot":"..\\src","sourcesContent":["export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];","export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}","export default function getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n\n  return node;\n}","import getWindow from \"./getWindow.js\";\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nfunction isShadowRoot(node) {\n  // IE 11 has no ShadowRoot\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n\n  var OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\n\nexport { isElement, isHTMLElement, isShadowRoot };","import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe[cannot-write]\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n  state.styles = initialStyles;\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      }\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};","import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}","export var max = Math.max;\nexport var min = Math.min;\nexport var round = Math.round;","import { isHTMLElement } from \"./instanceOf.js\";\nimport { round } from \"../utils/math.js\";\nexport default function getBoundingClientRect(element, includeScale) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n\n  var rect = element.getBoundingClientRect();\n  var scaleX = 1;\n  var scaleY = 1;\n\n  if (isHTMLElement(element) && includeScale) {\n    var offsetHeight = element.offsetHeight;\n    var offsetWidth = element.offsetWidth; // Do not attempt to divide by 0, otherwise we get `Infinity` as scale\n    // Fallback to 1 in case both values are `0`\n\n    if (offsetWidth > 0) {\n      scaleX = round(rect.width) / offsetWidth || 1;\n    }\n\n    if (offsetHeight > 0) {\n      scaleY = round(rect.height) / offsetHeight || 1;\n    }\n  }\n\n  return {\n    width: rect.width / scaleX,\n    height: rect.height / scaleY,\n    top: rect.top / scaleY,\n    right: rect.right / scaleX,\n    bottom: rect.bottom / scaleY,\n    left: rect.left / scaleX,\n    x: rect.left / scaleX,\n    y: rect.top / scaleY\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\"; // Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\n\nexport default function getLayoutRect(element) {\n  var clientRect = getBoundingClientRect(element); // Use the clientRect sizes if it's not been transformed.\n  // Fixes https://github.com/popperjs/popper-core/issues/1223\n\n  var width = element.offsetWidth;\n  var height = element.offsetHeight;\n\n  if (Math.abs(clientRect.width - width) <= 1) {\n    width = clientRect.width;\n  }\n\n  if (Math.abs(clientRect.height - height) <= 1) {\n    height = clientRect.height;\n  }\n\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: width,\n    height: height\n  };\n}","import { isShadowRoot } from \"./instanceOf.js\";\nexport default function contains(parent, child) {\n  var rootNode = child.getRootNode && child.getRootNode(); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (rootNode && isShadowRoot(rootNode)) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe[prop-missing]: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}","import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}","import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}","import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe[incompatible-return]: assume body is always available\n  return ((isElement(element) ? element.ownerDocument : // $FlowFixMe[prop-missing]\n  element.document) || window.document).documentElement;\n}","import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport { isShadowRoot } from \"./instanceOf.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    // $FlowFixMe[incompatible-return]\n    // $FlowFixMe[prop-missing]\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || ( // DOM Element detected\n    isShadowRoot(element) ? element.host : null) || // ShadowRoot detected\n    // $FlowFixMe[incompatible-call]: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}","import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement, isShadowRoot } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\nimport getParentNode from \"./getParentNode.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n} // `.offsetParent` reports `null` for fixed elements, while absolute elements\n// return the containing block\n\n\nfunction getContainingBlock(element) {\n  var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') !== -1;\n  var isIE = navigator.userAgent.indexOf('Trident') !== -1;\n\n  if (isIE && isHTMLElement(element)) {\n    // In IE 9, 10 and 11 fixed elements containing block is always established by the viewport\n    var elementCss = getComputedStyle(element);\n\n    if (elementCss.position === 'fixed') {\n      return null;\n    }\n  }\n\n  var currentNode = getParentNode(element);\n\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n\n  while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {\n    var css = getComputedStyle(currentNode); // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\n    if (css.transform !== 'none' || css.perspective !== 'none' || css.contain === 'paint' || ['transform', 'perspective'].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === 'filter' || isFirefox && css.filter && css.filter !== 'none') {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n\n  return null;\n} // Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\n\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element);\n\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static')) {\n    return window;\n  }\n\n  return offsetParent || getContainingBlock(element) || window;\n}","export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}","import { max as mathMax, min as mathMin } from \"./math.js\";\nexport function within(min, value, max) {\n  return mathMax(min, mathMin(value, max));\n}\nexport function withinMaxClamp(min, value, max) {\n  var v = within(min, value, max);\n  return v > max ? max : v;\n}","export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}","import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), paddingObject);\n}","export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport { within } from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar toPaddingObject = function toPaddingObject(padding, state) {\n  padding = typeof padding === 'function' ? padding(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : padding;\n  return mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n};\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name,\n      options = _ref.options;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = toPaddingObject(options.padding, state);\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = getOffsetParent(arrowElement);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!isHTMLElement(arrowElement)) {\n      console.error(['Popper: \"arrow\" element must be an HTMLElement (not an SVGElement).', 'To use an SVG arrow, wrap it in an HTMLElement that will be used as', 'the arrow.'].join(' '));\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(['Popper: \"arrow\" modifier\\'s `element` must be a child of the popper', 'element.'].join(' '));\n    }\n\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};","export default function getVariation(placement) {\n  return placement.split('-')[1];\n}","import { top, left, right, bottom, end } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport { round } from \"../utils/math.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsetsByDPR(_ref) {\n  var x = _ref.x,\n      y = _ref.y;\n  var win = window;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: round(x * dpr) / dpr || 0,\n    y: round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      variation = _ref2.variation,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive,\n      roundOffsets = _ref2.roundOffsets,\n      isFixed = _ref2.isFixed;\n  var _offsets$x = offsets.x,\n      x = _offsets$x === void 0 ? 0 : _offsets$x,\n      _offsets$y = offsets.y,\n      y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n  var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref3.x;\n  y = _ref3.y;\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n    var heightProp = 'clientHeight';\n    var widthProp = 'clientWidth';\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n\n      if (getComputedStyle(offsetParent).position !== 'static' && position === 'absolute') {\n        heightProp = 'scrollHeight';\n        widthProp = 'scrollWidth';\n      }\n    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n    offsetParent = offsetParent;\n\n    if (placement === top || (placement === left || placement === right) && variation === end) {\n      sideY = bottom;\n      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n      offsetParent[heightProp];\n      y -= offsetY - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left || (placement === top || placement === bottom) && variation === end) {\n      sideX = right;\n      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n      offsetParent[widthProp];\n      x -= offsetX - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref4.x;\n  y = _ref4.y;\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref5) {\n  var state = _ref5.state,\n      options = _ref5.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n      _options$roundOffsets = options.roundOffsets,\n      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    var transitionProperty = getComputedStyle(state.elements.popper).transitionProperty || '';\n\n    if (adaptive && ['transform', 'top', 'right', 'bottom', 'left'].some(function (property) {\n      return transitionProperty.indexOf(property) >= 0;\n    })) {\n      console.warn(['Popper: Detected CSS transitions on at least one of the following', 'CSS properties: \"transform\", \"top\", \"right\", \"bottom\", \"left\".', '\\n\\n', 'Disable the \"computeStyles\" modifier\\'s `adaptive` option to allow', 'for smooth transitions, or remove these properties from the CSS', 'transition declaration on the popper element if only transitioning', 'opacity or background-color for example.', '\\n\\n', 'We recommend using the popper element as a wrapper around an inner', 'element that can have any CSS property transitioned for animations.'].join(' '));\n    }\n  }\n\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    variation: getVariation(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration,\n    isFixed: state.options.strategy === 'fixed'\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};","import getWindow from \"../dom-utils/getWindow.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};","var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}","var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}","import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}","import getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nexport default function getViewportRect(element) {\n  var win = getWindow(element);\n  var html = getDocumentElement(element);\n  var visualViewport = win.visualViewport;\n  var width = html.clientWidth;\n  var height = html.clientHeight;\n  var x = 0;\n  var y = 0; // NB: This isn't supported on iOS <= 12. If the keyboard is open, the popper\n  // can be obscured underneath it.\n  // Also, `html.clientHeight` adds the bottom bar height in Safari iOS, even\n  // if it isn't open, so if this isn't available, the popper will be detected\n  // to overflow the bottom of the screen too early.\n\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height; // Uses Layout Viewport (like Chrome; Safari does not currently)\n    // In Chrome, it returns a value very close to 0 (+/-) but contains rounding\n    // errors due to floating point numbers, so we need to check precision.\n    // Safari returns a number <= 0, usually < -1 when pinch-zoomed\n    // Feature detection fails in mobile emulation mode in Chrome.\n    // Math.abs(win.innerWidth / visualViewport.scale - visualViewport.width) <\n    // 0.001\n    // Fallback here: \"Not Safari\" userAgent\n\n    if (!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)) {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x + getWindowScrollBarX(element),\n    y: y\n  };\n}","import getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nimport { max } from \"../utils/math.js\"; // Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable\n\nexport default function getDocumentRect(element) {\n  var _element$ownerDocumen;\n\n  var html = getDocumentElement(element);\n  var winScroll = getWindowScroll(element);\n  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);\n  var y = -winScroll.scrollTop;\n\n  if (getComputedStyle(body || html).direction === 'rtl') {\n    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x,\n    y: y\n  };\n}","import getComputedStyle from \"./getComputedStyle.js\";\nexport default function isScrollParent(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  var _getComputedStyle = getComputedStyle(element),\n      overflow = _getComputedStyle.overflow,\n      overflowX = _getComputedStyle.overflowX,\n      overflowY = _getComputedStyle.overflowY;\n\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}","import getParentNode from \"./getParentNode.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe[incompatible-return]: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node) && isScrollParent(node)) {\n    return node;\n  }\n\n  return getScrollParent(getParentNode(node));\n}","import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getWindow from \"./getWindow.js\";\nimport isScrollParent from \"./isScrollParent.js\";\n/*\ngiven a DOM element, return the list of all scroll parents, up the list of ancesors\nuntil we get to the top window object. This list is what we attach scroll listeners\nto, because if any of these parent elements scroll, we'll need to re-calculate the\nreference element's position.\n*/\n\nexport default function listScrollParents(element, list) {\n  var _element$ownerDocumen;\n\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}","export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}","import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport contains from \"./contains.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\nimport { max, min } from \"../utils/math.js\";\n\nfunction getInnerBoundingClientRect(element) {\n  var rect = getBoundingClientRect(element);\n  rect.top = rect.top + element.clientTop;\n  rect.left = rect.left + element.clientLeft;\n  rect.bottom = rect.top + element.clientHeight;\n  rect.right = rect.left + element.clientWidth;\n  rect.width = element.clientWidth;\n  rect.height = element.clientHeight;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\n\nfunction getClientRectFromMixedType(element, clippingParent) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(getParentNode(element));\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}","import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = offsets[mainAxis] - (reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = offsets[mainAxis] + (reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}","import getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary);\n  var referenceClientRect = getBoundingClientRect(state.elements.reference);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}","import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements;\n  var allowedPlacements = placements.filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  });\n\n  if (allowedPlacements.length === 0) {\n    allowedPlacements = placements;\n\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(['Popper: The `allowedAutoPlacements` option did not allow any', 'placements. Ensure the `placement` option matches the variation', 'of the allowed placements.', 'For example, \"auto\" cannot be used to allow \"bottom-start\".', 'Use \"auto-start\" instead.'].join(' '));\n    }\n  } // $FlowFixMe[incompatible-type]: Flow seems to have problems with two array unions...\n\n\n  var overflows = allowedPlacements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}","import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n      specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [];\n\n    if (checkMainAxis) {\n      checks.push(overflow[_basePlacement] <= 0);\n    }\n\n    if (checkAltAxis) {\n      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n    }\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases – research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};","import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};","import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};","export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}","import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport { within, withinMaxClamp } from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\nimport { min as mathMin, max as mathMax } from \"../utils/math.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var normalizedTetherOffsetValue = typeof tetherOffsetValue === 'number' ? {\n    mainAxis: tetherOffsetValue,\n    altAxis: tetherOffsetValue\n  } : Object.assign({\n    mainAxis: 0,\n    altAxis: 0\n  }, tetherOffsetValue);\n  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var _offsetModifierState$;\n\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = offset + overflow[mainSide];\n    var max = offset - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;\n    var tetherMin = offset + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = offset + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? mathMin(min, tetherMin) : min, offset, tether ? mathMax(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _offsetModifierState$2;\n\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _len = altAxis === 'y' ? 'height' : 'width';\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;\n\n    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;\n\n    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;\n\n    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;\n\n    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};","export { default as applyStyles } from \"./applyStyles.js\";\nexport { default as arrow } from \"./arrow.js\";\nexport { default as computeStyles } from \"./computeStyles.js\";\nexport { default as eventListeners } from \"./eventListeners.js\";\nexport { default as flip } from \"./flip.js\";\nexport { default as hide } from \"./hide.js\";\nexport { default as offset } from \"./offset.js\";\nexport { default as popperOffsets } from \"./popperOffsets.js\";\nexport { default as preventOverflow } from \"./preventOverflow.js\";","export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}","import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport { round } from \"../utils/math.js\";\n\nfunction isElementScaled(element) {\n  var rect = element.getBoundingClientRect();\n  var scaleX = round(rect.width) / element.offsetWidth || 1;\n  var scaleY = round(rect.height) / element.offsetHeight || 1;\n  return scaleX !== 1 || scaleY !== 1;\n} // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var isOffsetParentAnElement = isHTMLElement(offsetParent);\n  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);\n  var documentElement = getDocumentElement(offsetParent);\n  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n    isScrollParent(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent, true);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}","import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}","export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}","export default function format(str) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  return [].concat(args).reduce(function (p, c) {\n    return p.replace(/%s/, c);\n  }, str);\n}","import format from \"./format.js\";\nimport { modifierPhases } from \"../enums.js\";\nvar INVALID_MODIFIER_ERROR = 'Popper: modifier \"%s\" provided an invalid %s property, expected %s but got %s';\nvar MISSING_DEPENDENCY_ERROR = 'Popper: modifier \"%s\" requires \"%s\", but \"%s\" modifier is not available';\nvar VALID_PROPERTIES = ['name', 'enabled', 'phase', 'fn', 'effect', 'requires', 'options'];\nexport default function validateModifiers(modifiers) {\n  modifiers.forEach(function (modifier) {\n    [].concat(Object.keys(modifier), VALID_PROPERTIES) // IE11-compatible replacement for `new Set(iterable)`\n    .filter(function (value, index, self) {\n      return self.indexOf(value) === index;\n    }).forEach(function (key) {\n      switch (key) {\n        case 'name':\n          if (typeof modifier.name !== 'string') {\n            console.error(format(INVALID_MODIFIER_ERROR, String(modifier.name), '\"name\"', '\"string\"', \"\\\"\" + String(modifier.name) + \"\\\"\"));\n          }\n\n          break;\n\n        case 'enabled':\n          if (typeof modifier.enabled !== 'boolean') {\n            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '\"enabled\"', '\"boolean\"', \"\\\"\" + String(modifier.enabled) + \"\\\"\"));\n          }\n\n          break;\n\n        case 'phase':\n          if (modifierPhases.indexOf(modifier.phase) < 0) {\n            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '\"phase\"', \"either \" + modifierPhases.join(', '), \"\\\"\" + String(modifier.phase) + \"\\\"\"));\n          }\n\n          break;\n\n        case 'fn':\n          if (typeof modifier.fn !== 'function') {\n            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '\"fn\"', '\"function\"', \"\\\"\" + String(modifier.fn) + \"\\\"\"));\n          }\n\n          break;\n\n        case 'effect':\n          if (modifier.effect != null && typeof modifier.effect !== 'function') {\n            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '\"effect\"', '\"function\"', \"\\\"\" + String(modifier.fn) + \"\\\"\"));\n          }\n\n          break;\n\n        case 'requires':\n          if (modifier.requires != null && !Array.isArray(modifier.requires)) {\n            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '\"requires\"', '\"array\"', \"\\\"\" + String(modifier.requires) + \"\\\"\"));\n          }\n\n          break;\n\n        case 'requiresIfExists':\n          if (!Array.isArray(modifier.requiresIfExists)) {\n            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '\"requiresIfExists\"', '\"array\"', \"\\\"\" + String(modifier.requiresIfExists) + \"\\\"\"));\n          }\n\n          break;\n\n        case 'options':\n        case 'data':\n          break;\n\n        default:\n          console.error(\"PopperJS: an invalid property has been provided to the \\\"\" + modifier.name + \"\\\" modifier, valid properties are \" + VALID_PROPERTIES.map(function (s) {\n            return \"\\\"\" + s + \"\\\"\";\n          }).join(', ') + \"; but \\\"\" + key + \"\\\" was provided.\");\n      }\n\n      modifier.requires && modifier.requires.forEach(function (requirement) {\n        if (modifiers.find(function (mod) {\n          return mod.name === requirement;\n        }) == null) {\n          console.error(format(MISSING_DEPENDENCY_ERROR, String(modifier.name), requirement, requirement));\n        }\n      });\n    });\n  });\n}","export default function uniqueBy(arr, fn) {\n  var identifiers = new Set();\n  return arr.filter(function (item) {\n    var identifier = fn(item);\n\n    if (!identifiers.has(identifier)) {\n      identifiers.add(identifier);\n      return true;\n    }\n  });\n}","export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, current, {\n      options: Object.assign({}, existing.options, current.options),\n      data: Object.assign({}, existing.data, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}","import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport getComputedStyle from \"./dom-utils/getComputedStyle.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport validateModifiers from \"./utils/validateModifiers.js\";\nimport uniqueBy from \"./utils/uniqueBy.js\";\nimport getBasePlacement from \"./utils/getBasePlacement.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nimport { auto } from \"./enums.js\";\nvar INVALID_ELEMENT_ERROR = 'Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.';\nvar INFINITE_LOOP_ERROR = 'Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.';\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(setOptionsAction) {\n        var options = typeof setOptionsAction === 'function' ? setOptionsAction(state.options) : setOptionsAction;\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, state.options, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        }); // Validate the provided modifiers so that the consumer will get warned\n        // if one of the modifiers is invalid for any reason\n\n        if (process.env.NODE_ENV !== \"production\") {\n          var modifiers = uniqueBy([].concat(orderedModifiers, state.options.modifiers), function (_ref) {\n            var name = _ref.name;\n            return name;\n          });\n          validateModifiers(modifiers);\n\n          if (getBasePlacement(state.options.placement) === auto) {\n            var flipModifier = state.orderedModifiers.find(function (_ref2) {\n              var name = _ref2.name;\n              return name === 'flip';\n            });\n\n            if (!flipModifier) {\n              console.error(['Popper: \"auto\" placements require the \"flip\" modifier be', 'present and enabled to work.'].join(' '));\n            }\n          }\n\n          var _getComputedStyle = getComputedStyle(popper),\n              marginTop = _getComputedStyle.marginTop,\n              marginRight = _getComputedStyle.marginRight,\n              marginBottom = _getComputedStyle.marginBottom,\n              marginLeft = _getComputedStyle.marginLeft; // We no longer take into account `margins` on the popper, and it can\n          // cause bugs with positioning, so we'll warn the consumer\n\n\n          if ([marginTop, marginRight, marginBottom, marginLeft].some(function (margin) {\n            return parseFloat(margin);\n          })) {\n            console.warn(['Popper: CSS \"margin\" styles cannot be used to apply padding', 'between the popper and its reference element or boundary.', 'To replicate margin, use the `offset` modifier, as well as', 'the `padding` option in the `preventOverflow` and `flip`', 'modifiers.'].join(' '));\n          }\n        }\n\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update – it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          if (process.env.NODE_ENV !== \"production\") {\n            console.error(INVALID_ELEMENT_ERROR);\n          }\n\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n        var __debug_loops__ = 0;\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (process.env.NODE_ENV !== \"production\") {\n            __debug_loops__ += 1;\n\n            if (__debug_loops__ > 100) {\n              console.error(INFINITE_LOOP_ERROR);\n              break;\n            }\n          }\n\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update – it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      if (process.env.NODE_ENV !== \"production\") {\n        console.error(INVALID_ELEMENT_ERROR);\n      }\n\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref3) {\n        var name = _ref3.name,\n            _ref3$options = _ref3.options,\n            options = _ref3$options === void 0 ? {} : _ref3$options,\n            effect = _ref3.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator(); // eslint-disable-next-line import/no-unused-modules\n\nexport { detectOverflow };","import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow };","import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow }; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper as createPopperLite } from \"./popper-lite.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport * from \"./modifiers/index.js\";","export * from \"./enums.js\";\nexport * from \"./modifiers/index.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport { popperGenerator, detectOverflow, createPopper as createPopperBase } from \"./createPopper.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper } from \"./popper.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper as createPopperLite } from \"./popper-lite.js\";","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): util/index.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst MAX_UID = 1_000_000\nconst MILLISECONDS_MULTIPLIER = 1000\nconst TRANSITION_END = 'transitionend'\n\n// Shout-out Angus Croll (https://goo.gl/pxwQGp)\nconst toType = object => {\n  if (object === null || object === undefined) {\n    return `${object}`\n  }\n\n  return Object.prototype.toString.call(object).match(/\\s([a-z]+)/i)[1].toLowerCase()\n}\n\n/**\n * Public Util API\n */\n\nconst getUID = prefix => {\n  do {\n    prefix += Math.floor(Math.random() * MAX_UID)\n  } while (document.getElementById(prefix))\n\n  return prefix\n}\n\nconst getSelector = element => {\n  let selector = element.getAttribute('data-bs-target')\n\n  if (!selector || selector === '#') {\n    let hrefAttribute = element.getAttribute('href')\n\n    // The only valid content that could double as a selector are IDs or classes,\n    // so everything starting with `#` or `.`. If a \"real\" URL is used as the selector,\n    // `document.querySelector` will rightfully complain it is invalid.\n    // See https://github.com/twbs/bootstrap/issues/32273\n    if (!hrefAttribute || (!hrefAttribute.includes('#') && !hrefAttribute.startsWith('.'))) {\n      return null\n    }\n\n    // Just in case some CMS puts out a full URL with the anchor appended\n    if (hrefAttribute.includes('#') && !hrefAttribute.startsWith('#')) {\n      hrefAttribute = `#${hrefAttribute.split('#')[1]}`\n    }\n\n    selector = hrefAttribute && hrefAttribute !== '#' ? hrefAttribute.trim() : null\n  }\n\n  return selector\n}\n\nconst getSelectorFromElement = element => {\n  const selector = getSelector(element)\n\n  if (selector) {\n    return document.querySelector(selector) ? selector : null\n  }\n\n  return null\n}\n\nconst getElementFromSelector = element => {\n  const selector = getSelector(element)\n\n  return selector ? document.querySelector(selector) : null\n}\n\nconst getTransitionDurationFromElement = element => {\n  if (!element) {\n    return 0\n  }\n\n  // Get transition-duration of the element\n  let { transitionDuration, transitionDelay } = window.getComputedStyle(element)\n\n  const floatTransitionDuration = Number.parseFloat(transitionDuration)\n  const floatTransitionDelay = Number.parseFloat(transitionDelay)\n\n  // Return 0 if element or transition duration is not found\n  if (!floatTransitionDuration && !floatTransitionDelay) {\n    return 0\n  }\n\n  // If multiple durations are defined, take the first\n  transitionDuration = transitionDuration.split(',')[0]\n  transitionDelay = transitionDelay.split(',')[0]\n\n  return (Number.parseFloat(transitionDuration) + Number.parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER\n}\n\nconst triggerTransitionEnd = element => {\n  element.dispatchEvent(new Event(TRANSITION_END))\n}\n\nconst isElement = object => {\n  if (!object || typeof object !== 'object') {\n    return false\n  }\n\n  if (typeof object.jquery !== 'undefined') {\n    object = object[0]\n  }\n\n  return typeof object.nodeType !== 'undefined'\n}\n\nconst getElement = object => {\n  // it's a jQuery object or a node element\n  if (isElement(object)) {\n    return object.jquery ? object[0] : object\n  }\n\n  if (typeof object === 'string' && object.length > 0) {\n    return document.querySelector(object)\n  }\n\n  return null\n}\n\nconst isVisible = element => {\n  if (!isElement(element) || element.getClientRects().length === 0) {\n    return false\n  }\n\n  const elementIsVisible = getComputedStyle(element).getPropertyValue('visibility') === 'visible'\n  // Handle `details` element as its content may falsie appear visible when it is closed\n  const closedDetails = element.closest('details:not([open])')\n\n  if (!closedDetails) {\n    return elementIsVisible\n  }\n\n  if (closedDetails !== element) {\n    const summary = element.closest('summary')\n    if (summary && summary.parentNode !== closedDetails) {\n      return false\n    }\n\n    if (summary === null) {\n      return false\n    }\n  }\n\n  return elementIsVisible\n}\n\nconst isDisabled = element => {\n  if (!element || element.nodeType !== Node.ELEMENT_NODE) {\n    return true\n  }\n\n  if (element.classList.contains('disabled')) {\n    return true\n  }\n\n  if (typeof element.disabled !== 'undefined') {\n    return element.disabled\n  }\n\n  return element.hasAttribute('disabled') && element.getAttribute('disabled') !== 'false'\n}\n\nconst findShadowRoot = element => {\n  if (!document.documentElement.attachShadow) {\n    return null\n  }\n\n  // Can find the shadow root otherwise it'll return the document\n  if (typeof element.getRootNode === 'function') {\n    const root = element.getRootNode()\n    return root instanceof ShadowRoot ? root : null\n  }\n\n  if (element instanceof ShadowRoot) {\n    return element\n  }\n\n  // when we don't find a shadow root\n  if (!element.parentNode) {\n    return null\n  }\n\n  return findShadowRoot(element.parentNode)\n}\n\nconst noop = () => {}\n\n/**\n * Trick to restart an element's animation\n *\n * @param {HTMLElement} element\n * @return void\n *\n * @see https://www.charistheo.io/blog/2021/02/restart-a-css-animation-with-javascript/#restarting-a-css-animation\n */\nconst reflow = element => {\n  element.offsetHeight // eslint-disable-line no-unused-expressions\n}\n\nconst getjQuery = () => {\n  if (window.jQuery && !document.body.hasAttribute('data-bs-no-jquery')) {\n    return window.jQuery\n  }\n\n  return null\n}\n\nconst DOMContentLoadedCallbacks = []\n\nconst onDOMContentLoaded = callback => {\n  if (document.readyState === 'loading') {\n    // add listener on the first call when the document is in loading state\n    if (!DOMContentLoadedCallbacks.length) {\n      document.addEventListener('DOMContentLoaded', () => {\n        for (const callback of DOMContentLoadedCallbacks) {\n          callback()\n        }\n      })\n    }\n\n    DOMContentLoadedCallbacks.push(callback)\n  } else {\n    callback()\n  }\n}\n\nconst isRTL = () => document.documentElement.dir === 'rtl'\n\nconst defineJQueryPlugin = plugin => {\n  onDOMContentLoaded(() => {\n    const $ = getjQuery()\n    /* istanbul ignore if */\n    if ($) {\n      const name = plugin.NAME\n      const JQUERY_NO_CONFLICT = $.fn[name]\n      $.fn[name] = plugin.jQueryInterface\n      $.fn[name].Constructor = plugin\n      $.fn[name].noConflict = () => {\n        $.fn[name] = JQUERY_NO_CONFLICT\n        return plugin.jQueryInterface\n      }\n    }\n  })\n}\n\nconst execute = callback => {\n  if (typeof callback === 'function') {\n    callback()\n  }\n}\n\nconst executeAfterTransition = (callback, transitionElement, waitForTransition = true) => {\n  if (!waitForTransition) {\n    execute(callback)\n    return\n  }\n\n  const durationPadding = 5\n  const emulatedDuration = getTransitionDurationFromElement(transitionElement) + durationPadding\n\n  let called = false\n\n  const handler = ({ target }) => {\n    if (target !== transitionElement) {\n      return\n    }\n\n    called = true\n    transitionElement.removeEventListener(TRANSITION_END, handler)\n    execute(callback)\n  }\n\n  transitionElement.addEventListener(TRANSITION_END, handler)\n  setTimeout(() => {\n    if (!called) {\n      triggerTransitionEnd(transitionElement)\n    }\n  }, emulatedDuration)\n}\n\n/**\n * Return the previous/next element of a list.\n *\n * @param {array} list    The list of elements\n * @param activeElement   The active element\n * @param shouldGetNext   Choose to get next or previous element\n * @param isCycleAllowed\n * @return {Element|elem} The proper element\n */\nconst getNextActiveElement = (list, activeElement, shouldGetNext, isCycleAllowed) => {\n  const listLength = list.length\n  let index = list.indexOf(activeElement)\n\n  // if the element does not exist in the list return an element\n  // depending on the direction and if cycle is allowed\n  if (index === -1) {\n    return !shouldGetNext && isCycleAllowed ? list[listLength - 1] : list[0]\n  }\n\n  index += shouldGetNext ? 1 : -1\n\n  if (isCycleAllowed) {\n    index = (index + listLength) % listLength\n  }\n\n  return list[Math.max(0, Math.min(index, listLength - 1))]\n}\n\nexport {\n  defineJQueryPlugin,\n  execute,\n  executeAfterTransition,\n  findShadowRoot,\n  getElement,\n  getElementFromSelector,\n  getjQuery,\n  getNextActiveElement,\n  getSelectorFromElement,\n  getTransitionDurationFromElement,\n  getUID,\n  isDisabled,\n  isElement,\n  isRTL,\n  isVisible,\n  noop,\n  onDOMContentLoaded,\n  reflow,\n  triggerTransitionEnd,\n  toType\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): dom/event-handler.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { getjQuery } from '../util/index'\n\n/**\n * Constants\n */\n\nconst namespaceRegex = /[^.]*(?=\\..*)\\.|.*/\nconst stripNameRegex = /\\..*/\nconst stripUidRegex = /::\\d+$/\nconst eventRegistry = {} // Events storage\nlet uidEvent = 1\nconst customEvents = {\n  mouseenter: 'mouseover',\n  mouseleave: 'mouseout'\n}\n\nconst nativeEvents = new Set([\n  'click',\n  'dblclick',\n  'mouseup',\n  'mousedown',\n  'contextmenu',\n  'mousewheel',\n  'DOMMouseScroll',\n  'mouseover',\n  'mouseout',\n  'mousemove',\n  'selectstart',\n  'selectend',\n  'keydown',\n  'keypress',\n  'keyup',\n  'orientationchange',\n  'touchstart',\n  'touchmove',\n  'touchend',\n  'touchcancel',\n  'pointerdown',\n  'pointermove',\n  'pointerup',\n  'pointerleave',\n  'pointercancel',\n  'gesturestart',\n  'gesturechange',\n  'gestureend',\n  'focus',\n  'blur',\n  'change',\n  'reset',\n  'select',\n  'submit',\n  'focusin',\n  'focusout',\n  'load',\n  'unload',\n  'beforeunload',\n  'resize',\n  'move',\n  'DOMContentLoaded',\n  'readystatechange',\n  'error',\n  'abort',\n  'scroll'\n])\n\n/**\n * Private methods\n */\n\nfunction makeEventUid(element, uid) {\n  return (uid && `${uid}::${uidEvent++}`) || element.uidEvent || uidEvent++\n}\n\nfunction getElementEvents(element) {\n  const uid = makeEventUid(element)\n\n  element.uidEvent = uid\n  eventRegistry[uid] = eventRegistry[uid] || {}\n\n  return eventRegistry[uid]\n}\n\nfunction bootstrapHandler(element, fn) {\n  return function handler(event) {\n    hydrateObj(event, { delegateTarget: element })\n\n    if (handler.oneOff) {\n      EventHandler.off(element, event.type, fn)\n    }\n\n    return fn.apply(element, [event])\n  }\n}\n\nfunction bootstrapDelegationHandler(element, selector, fn) {\n  return function handler(event) {\n    const domElements = element.querySelectorAll(selector)\n\n    for (let { target } = event; target && target !== this; target = target.parentNode) {\n      for (const domElement of domElements) {\n        if (domElement !== target) {\n          continue\n        }\n\n        hydrateObj(event, { delegateTarget: target })\n\n        if (handler.oneOff) {\n          EventHandler.off(element, event.type, selector, fn)\n        }\n\n        return fn.apply(target, [event])\n      }\n    }\n  }\n}\n\nfunction findHandler(events, callable, delegationSelector = null) {\n  return Object.values(events)\n    .find(event => event.callable === callable && event.delegationSelector === delegationSelector)\n}\n\nfunction normalizeParameters(originalTypeEvent, handler, delegationFunction) {\n  const isDelegated = typeof handler === 'string'\n  // todo: tooltip passes `false` instead of selector, so we need to check\n  const callable = isDelegated ? delegationFunction : (handler || delegationFunction)\n  let typeEvent = getTypeEvent(originalTypeEvent)\n\n  if (!nativeEvents.has(typeEvent)) {\n    typeEvent = originalTypeEvent\n  }\n\n  return [isDelegated, callable, typeEvent]\n}\n\nfunction addHandler(element, originalTypeEvent, handler, delegationFunction, oneOff) {\n  if (typeof originalTypeEvent !== 'string' || !element) {\n    return\n  }\n\n  let [isDelegated, callable, typeEvent] = normalizeParameters(originalTypeEvent, handler, delegationFunction)\n\n  // in case of mouseenter or mouseleave wrap the handler within a function that checks for its DOM position\n  // this prevents the handler from being dispatched the same way as mouseover or mouseout does\n  if (originalTypeEvent in customEvents) {\n    const wrapFunction = fn => {\n      return function (event) {\n        if (!event.relatedTarget || (event.relatedTarget !== event.delegateTarget && !event.delegateTarget.contains(event.relatedTarget))) {\n          return fn.call(this, event)\n        }\n      }\n    }\n\n    callable = wrapFunction(callable)\n  }\n\n  const events = getElementEvents(element)\n  const handlers = events[typeEvent] || (events[typeEvent] = {})\n  const previousFunction = findHandler(handlers, callable, isDelegated ? handler : null)\n\n  if (previousFunction) {\n    previousFunction.oneOff = previousFunction.oneOff && oneOff\n\n    return\n  }\n\n  const uid = makeEventUid(callable, originalTypeEvent.replace(namespaceRegex, ''))\n  const fn = isDelegated ?\n    bootstrapDelegationHandler(element, handler, callable) :\n    bootstrapHandler(element, callable)\n\n  fn.delegationSelector = isDelegated ? handler : null\n  fn.callable = callable\n  fn.oneOff = oneOff\n  fn.uidEvent = uid\n  handlers[uid] = fn\n\n  element.addEventListener(typeEvent, fn, isDelegated)\n}\n\nfunction removeHandler(element, events, typeEvent, handler, delegationSelector) {\n  const fn = findHandler(events[typeEvent], handler, delegationSelector)\n\n  if (!fn) {\n    return\n  }\n\n  element.removeEventListener(typeEvent, fn, Boolean(delegationSelector))\n  delete events[typeEvent][fn.uidEvent]\n}\n\nfunction removeNamespacedHandlers(element, events, typeEvent, namespace) {\n  const storeElementEvent = events[typeEvent] || {}\n\n  for (const handlerKey of Object.keys(storeElementEvent)) {\n    if (handlerKey.includes(namespace)) {\n      const event = storeElementEvent[handlerKey]\n      removeHandler(element, events, typeEvent, event.callable, event.delegationSelector)\n    }\n  }\n}\n\nfunction getTypeEvent(event) {\n  // allow to get the native events from namespaced events ('click.bs.button' --> 'click')\n  event = event.replace(stripNameRegex, '')\n  return customEvents[event] || event\n}\n\nconst EventHandler = {\n  on(element, event, handler, delegationFunction) {\n    addHandler(element, event, handler, delegationFunction, false)\n  },\n\n  one(element, event, handler, delegationFunction) {\n    addHandler(element, event, handler, delegationFunction, true)\n  },\n\n  off(element, originalTypeEvent, handler, delegationFunction) {\n    if (typeof originalTypeEvent !== 'string' || !element) {\n      return\n    }\n\n    const [isDelegated, callable, typeEvent] = normalizeParameters(originalTypeEvent, handler, delegationFunction)\n    const inNamespace = typeEvent !== originalTypeEvent\n    const events = getElementEvents(element)\n    const storeElementEvent = events[typeEvent] || {}\n    const isNamespace = originalTypeEvent.startsWith('.')\n\n    if (typeof callable !== 'undefined') {\n      // Simplest case: handler is passed, remove that listener ONLY.\n      if (!Object.keys(storeElementEvent).length) {\n        return\n      }\n\n      removeHandler(element, events, typeEvent, callable, isDelegated ? handler : null)\n      return\n    }\n\n    if (isNamespace) {\n      for (const elementEvent of Object.keys(events)) {\n        removeNamespacedHandlers(element, events, elementEvent, originalTypeEvent.slice(1))\n      }\n    }\n\n    for (const keyHandlers of Object.keys(storeElementEvent)) {\n      const handlerKey = keyHandlers.replace(stripUidRegex, '')\n\n      if (!inNamespace || originalTypeEvent.includes(handlerKey)) {\n        const event = storeElementEvent[keyHandlers]\n        removeHandler(element, events, typeEvent, event.callable, event.delegationSelector)\n      }\n    }\n  },\n\n  trigger(element, event, args) {\n    if (typeof event !== 'string' || !element) {\n      return null\n    }\n\n    const $ = getjQuery()\n    const typeEvent = getTypeEvent(event)\n    const inNamespace = event !== typeEvent\n\n    let jQueryEvent = null\n    let bubbles = true\n    let nativeDispatch = true\n    let defaultPrevented = false\n\n    if (inNamespace && $) {\n      jQueryEvent = $.Event(event, args)\n\n      $(element).trigger(jQueryEvent)\n      bubbles = !jQueryEvent.isPropagationStopped()\n      nativeDispatch = !jQueryEvent.isImmediatePropagationStopped()\n      defaultPrevented = jQueryEvent.isDefaultPrevented()\n    }\n\n    let evt = new Event(event, { bubbles, cancelable: true })\n    evt = hydrateObj(evt, args)\n\n    if (defaultPrevented) {\n      evt.preventDefault()\n    }\n\n    if (nativeDispatch) {\n      element.dispatchEvent(evt)\n    }\n\n    if (evt.defaultPrevented && jQueryEvent) {\n      jQueryEvent.preventDefault()\n    }\n\n    return evt\n  }\n}\n\nfunction hydrateObj(obj, meta) {\n  for (const [key, value] of Object.entries(meta || {})) {\n    try {\n      obj[key] = value\n    } catch {\n      Object.defineProperty(obj, key, {\n        configurable: true,\n        get() {\n          return value\n        }\n      })\n    }\n  }\n\n  return obj\n}\n\nexport default EventHandler\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): dom/data.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n/**\n * Constants\n */\n\nconst elementMap = new Map()\n\nexport default {\n  set(element, key, instance) {\n    if (!elementMap.has(element)) {\n      elementMap.set(element, new Map())\n    }\n\n    const instanceMap = elementMap.get(element)\n\n    // make it clear we only want one instance per element\n    // can be removed later when multiple key/instances are fine to be used\n    if (!instanceMap.has(key) && instanceMap.size !== 0) {\n      // eslint-disable-next-line no-console\n      console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(instanceMap.keys())[0]}.`)\n      return\n    }\n\n    instanceMap.set(key, instance)\n  },\n\n  get(element, key) {\n    if (elementMap.has(element)) {\n      return elementMap.get(element).get(key) || null\n    }\n\n    return null\n  },\n\n  remove(element, key) {\n    if (!elementMap.has(element)) {\n      return\n    }\n\n    const instanceMap = elementMap.get(element)\n\n    instanceMap.delete(key)\n\n    // free up element references if there are no instances left for an element\n    if (instanceMap.size === 0) {\n      elementMap.delete(element)\n    }\n  }\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): dom/manipulator.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nfunction normalizeData(value) {\n  if (value === 'true') {\n    return true\n  }\n\n  if (value === 'false') {\n    return false\n  }\n\n  if (value === Number(value).toString()) {\n    return Number(value)\n  }\n\n  if (value === '' || value === 'null') {\n    return null\n  }\n\n  if (typeof value !== 'string') {\n    return value\n  }\n\n  try {\n    return JSON.parse(decodeURIComponent(value))\n  } catch {\n    return value\n  }\n}\n\nfunction normalizeDataKey(key) {\n  return key.replace(/[A-Z]/g, chr => `-${chr.toLowerCase()}`)\n}\n\nconst Manipulator = {\n  setDataAttribute(element, key, value) {\n    element.setAttribute(`data-bs-${normalizeDataKey(key)}`, value)\n  },\n\n  removeDataAttribute(element, key) {\n    element.removeAttribute(`data-bs-${normalizeDataKey(key)}`)\n  },\n\n  getDataAttributes(element) {\n    if (!element) {\n      return {}\n    }\n\n    const attributes = {}\n    const bsKeys = Object.keys(element.dataset).filter(key => key.startsWith('bs') && !key.startsWith('bsConfig'))\n\n    for (const key of bsKeys) {\n      let pureKey = key.replace(/^bs/, '')\n      pureKey = pureKey.charAt(0).toLowerCase() + pureKey.slice(1, pureKey.length)\n      attributes[pureKey] = normalizeData(element.dataset[key])\n    }\n\n    return attributes\n  },\n\n  getDataAttribute(element, key) {\n    return normalizeData(element.getAttribute(`data-bs-${normalizeDataKey(key)}`))\n  }\n}\n\nexport default Manipulator\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): util/config.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { isElement, toType } from './index'\nimport Manipulator from '../dom/manipulator'\n\n/**\n * Class definition\n */\n\nclass Config {\n  // Getters\n  static get Default() {\n    return {}\n  }\n\n  static get DefaultType() {\n    return {}\n  }\n\n  static get NAME() {\n    throw new Error('You have to implement the static method \"NAME\", for each component!')\n  }\n\n  _getConfig(config) {\n    config = this._mergeConfigObj(config)\n    config = this._configAfterMerge(config)\n    this._typeCheckConfig(config)\n    return config\n  }\n\n  _configAfterMerge(config) {\n    return config\n  }\n\n  _mergeConfigObj(config, element) {\n    const jsonConfig = isElement(element) ? Manipulator.getDataAttribute(element, 'config') : {} // try to parse\n\n    return {\n      ...this.constructor.Default,\n      ...(typeof jsonConfig === 'object' ? jsonConfig : {}),\n      ...(isElement(element) ? Manipulator.getDataAttributes(element) : {}),\n      ...(typeof config === 'object' ? config : {})\n    }\n  }\n\n  _typeCheckConfig(config, configTypes = this.constructor.DefaultType) {\n    for (const property of Object.keys(configTypes)) {\n      const expectedTypes = configTypes[property]\n      const value = config[property]\n      const valueType = isElement(value) ? 'element' : toType(value)\n\n      if (!new RegExp(expectedTypes).test(valueType)) {\n        throw new TypeError(\n          `${this.constructor.NAME.toUpperCase()}: Option \"${property}\" provided type \"${valueType}\" but expected type \"${expectedTypes}\".`\n        )\n      }\n    }\n  }\n}\n\nexport default Config\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): base-component.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Data from './dom/data'\nimport { executeAfterTransition, getElement } from './util/index'\nimport EventHandler from './dom/event-handler'\nimport Config from './util/config'\n\n/**\n * Constants\n */\n\nconst VERSION = '5.2.0'\n\n/**\n * Class definition\n */\n\nclass BaseComponent extends Config {\n  constructor(element, config) {\n    super()\n\n    element = getElement(element)\n    if (!element) {\n      return\n    }\n\n    this._element = element\n    this._config = this._getConfig(config)\n\n    Data.set(this._element, this.constructor.DATA_KEY, this)\n  }\n\n  // Public\n  dispose() {\n    Data.remove(this._element, this.constructor.DATA_KEY)\n    EventHandler.off(this._element, this.constructor.EVENT_KEY)\n\n    for (const propertyName of Object.getOwnPropertyNames(this)) {\n      this[propertyName] = null\n    }\n  }\n\n  _queueCallback(callback, element, isAnimated = true) {\n    executeAfterTransition(callback, element, isAnimated)\n  }\n\n  _getConfig(config) {\n    config = this._mergeConfigObj(config, this._element)\n    config = this._configAfterMerge(config)\n    this._typeCheckConfig(config)\n    return config\n  }\n\n  // Static\n  static getInstance(element) {\n    return Data.get(getElement(element), this.DATA_KEY)\n  }\n\n  static getOrCreateInstance(element, config = {}) {\n    return this.getInstance(element) || new this(element, typeof config === 'object' ? config : null)\n  }\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get DATA_KEY() {\n    return `bs.${this.NAME}`\n  }\n\n  static get EVENT_KEY() {\n    return `.${this.DATA_KEY}`\n  }\n\n  static eventName(name) {\n    return `${name}${this.EVENT_KEY}`\n  }\n}\n\nexport default BaseComponent\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): util/component-functions.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport EventHandler from '../dom/event-handler'\nimport { getElementFromSelector, isDisabled } from './index'\n\nconst enableDismissTrigger = (component, method = 'hide') => {\n  const clickEvent = `click.dismiss${component.EVENT_KEY}`\n  const name = component.NAME\n\n  EventHandler.on(document, clickEvent, `[data-bs-dismiss=\"${name}\"]`, function (event) {\n    if (['A', 'AREA'].includes(this.tagName)) {\n      event.preventDefault()\n    }\n\n    if (isDisabled(this)) {\n      return\n    }\n\n    const target = getElementFromSelector(this) || this.closest(`.${name}`)\n    const instance = component.getOrCreateInstance(target)\n\n    // Method argument is left, for Alert and only, as it doesn't implement the 'hide' method\n    instance[method]()\n  })\n}\n\nexport {\n  enableDismissTrigger\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): alert.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { defineJQueryPlugin } from './util/index'\nimport EventHandler from './dom/event-handler'\nimport BaseComponent from './base-component'\nimport { enableDismissTrigger } from './util/component-functions'\n\n/**\n * Constants\n */\n\nconst NAME = 'alert'\nconst DATA_KEY = 'bs.alert'\nconst EVENT_KEY = `.${DATA_KEY}`\n\nconst EVENT_CLOSE = `close${EVENT_KEY}`\nconst EVENT_CLOSED = `closed${EVENT_KEY}`\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\n\n/**\n * Class definition\n */\n\nclass Alert extends BaseComponent {\n  // Getters\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  close() {\n    const closeEvent = EventHandler.trigger(this._element, EVENT_CLOSE)\n\n    if (closeEvent.defaultPrevented) {\n      return\n    }\n\n    this._element.classList.remove(CLASS_NAME_SHOW)\n\n    const isAnimated = this._element.classList.contains(CLASS_NAME_FADE)\n    this._queueCallback(() => this._destroyElement(), this._element, isAnimated)\n  }\n\n  // Private\n  _destroyElement() {\n    this._element.remove()\n    EventHandler.trigger(this._element, EVENT_CLOSED)\n    this.dispose()\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Alert.getOrCreateInstance(this)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config](this)\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nenableDismissTrigger(Alert, 'close')\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Alert)\n\nexport default Alert\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): button.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { defineJQueryPlugin } from './util/index'\nimport EventHandler from './dom/event-handler'\nimport BaseComponent from './base-component'\n\n/**\n * Constants\n */\n\nconst NAME = 'button'\nconst DATA_KEY = 'bs.button'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst CLASS_NAME_ACTIVE = 'active'\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"button\"]'\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\n/**\n * Class definition\n */\n\nclass Button extends BaseComponent {\n  // Getters\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle() {\n    // Toggle class and sync the `aria-pressed` attribute with the return value of the `.toggle()` method\n    this._element.setAttribute('aria-pressed', this._element.classList.toggle(CLASS_NAME_ACTIVE))\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Button.getOrCreateInstance(this)\n\n      if (config === 'toggle') {\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, event => {\n  event.preventDefault()\n\n  const button = event.target.closest(SELECTOR_DATA_TOGGLE)\n  const data = Button.getOrCreateInstance(button)\n\n  data.toggle()\n})\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Button)\n\nexport default Button\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): dom/selector-engine.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { isDisabled, isVisible } from '../util/index'\n\n/**\n * Constants\n */\n\nconst SelectorEngine = {\n  find(selector, element = document.documentElement) {\n    return [].concat(...Element.prototype.querySelectorAll.call(element, selector))\n  },\n\n  findOne(selector, element = document.documentElement) {\n    return Element.prototype.querySelector.call(element, selector)\n  },\n\n  children(element, selector) {\n    return [].concat(...element.children).filter(child => child.matches(selector))\n  },\n\n  parents(element, selector) {\n    const parents = []\n    let ancestor = element.parentNode.closest(selector)\n\n    while (ancestor) {\n      parents.push(ancestor)\n      ancestor = ancestor.parentNode.closest(selector)\n    }\n\n    return parents\n  },\n\n  prev(element, selector) {\n    let previous = element.previousElementSibling\n\n    while (previous) {\n      if (previous.matches(selector)) {\n        return [previous]\n      }\n\n      previous = previous.previousElementSibling\n    }\n\n    return []\n  },\n  // TODO: this is now unused; remove later along with prev()\n  next(element, selector) {\n    let next = element.nextElementSibling\n\n    while (next) {\n      if (next.matches(selector)) {\n        return [next]\n      }\n\n      next = next.nextElementSibling\n    }\n\n    return []\n  },\n\n  focusableChildren(element) {\n    const focusables = [\n      'a',\n      'button',\n      'input',\n      'textarea',\n      'select',\n      'details',\n      '[tabindex]',\n      '[contenteditable=\"true\"]'\n    ].map(selector => `${selector}:not([tabindex^=\"-\"])`).join(',')\n\n    return this.find(focusables, element).filter(el => !isDisabled(el) && isVisible(el))\n  }\n}\n\nexport default SelectorEngine\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): util/swipe.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Config from './config'\nimport EventHandler from '../dom/event-handler'\nimport { execute } from './index'\n\n/**\n * Constants\n */\n\nconst NAME = 'swipe'\nconst EVENT_KEY = '.bs.swipe'\nconst EVENT_TOUCHSTART = `touchstart${EVENT_KEY}`\nconst EVENT_TOUCHMOVE = `touchmove${EVENT_KEY}`\nconst EVENT_TOUCHEND = `touchend${EVENT_KEY}`\nconst EVENT_POINTERDOWN = `pointerdown${EVENT_KEY}`\nconst EVENT_POINTERUP = `pointerup${EVENT_KEY}`\nconst POINTER_TYPE_TOUCH = 'touch'\nconst POINTER_TYPE_PEN = 'pen'\nconst CLASS_NAME_POINTER_EVENT = 'pointer-event'\nconst SWIPE_THRESHOLD = 40\n\nconst Default = {\n  endCallback: null,\n  leftCallback: null,\n  rightCallback: null\n}\n\nconst DefaultType = {\n  endCallback: '(function|null)',\n  leftCallback: '(function|null)',\n  rightCallback: '(function|null)'\n}\n\n/**\n * Class definition\n */\n\nclass Swipe extends Config {\n  constructor(element, config) {\n    super()\n    this._element = element\n\n    if (!element || !Swipe.isSupported()) {\n      return\n    }\n\n    this._config = this._getConfig(config)\n    this._deltaX = 0\n    this._supportPointerEvents = Boolean(window.PointerEvent)\n    this._initEvents()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  dispose() {\n    EventHandler.off(this._element, EVENT_KEY)\n  }\n\n  // Private\n  _start(event) {\n    if (!this._supportPointerEvents) {\n      this._deltaX = event.touches[0].clientX\n\n      return\n    }\n\n    if (this._eventIsPointerPenTouch(event)) {\n      this._deltaX = event.clientX\n    }\n  }\n\n  _end(event) {\n    if (this._eventIsPointerPenTouch(event)) {\n      this._deltaX = event.clientX - this._deltaX\n    }\n\n    this._handleSwipe()\n    execute(this._config.endCallback)\n  }\n\n  _move(event) {\n    this._deltaX = event.touches && event.touches.length > 1 ?\n      0 :\n      event.touches[0].clientX - this._deltaX\n  }\n\n  _handleSwipe() {\n    const absDeltaX = Math.abs(this._deltaX)\n\n    if (absDeltaX <= SWIPE_THRESHOLD) {\n      return\n    }\n\n    const direction = absDeltaX / this._deltaX\n\n    this._deltaX = 0\n\n    if (!direction) {\n      return\n    }\n\n    execute(direction > 0 ? this._config.rightCallback : this._config.leftCallback)\n  }\n\n  _initEvents() {\n    if (this._supportPointerEvents) {\n      EventHandler.on(this._element, EVENT_POINTERDOWN, event => this._start(event))\n      EventHandler.on(this._element, EVENT_POINTERUP, event => this._end(event))\n\n      this._element.classList.add(CLASS_NAME_POINTER_EVENT)\n    } else {\n      EventHandler.on(this._element, EVENT_TOUCHSTART, event => this._start(event))\n      EventHandler.on(this._element, EVENT_TOUCHMOVE, event => this._move(event))\n      EventHandler.on(this._element, EVENT_TOUCHEND, event => this._end(event))\n    }\n  }\n\n  _eventIsPointerPenTouch(event) {\n    return this._supportPointerEvents && (event.pointerType === POINTER_TYPE_PEN || event.pointerType === POINTER_TYPE_TOUCH)\n  }\n\n  // Static\n  static isSupported() {\n    return 'ontouchstart' in document.documentElement || navigator.maxTouchPoints > 0\n  }\n}\n\nexport default Swipe\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): carousel.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  defineJQueryPlugin,\n  getElementFromSelector,\n  getNextActiveElement,\n  isRTL,\n  isVisible,\n  reflow,\n  triggerTransitionEnd\n} from './util/index'\nimport EventHandler from './dom/event-handler'\nimport Manipulator from './dom/manipulator'\nimport SelectorEngine from './dom/selector-engine'\nimport Swipe from './util/swipe'\nimport BaseComponent from './base-component'\n\n/**\n * Constants\n */\n\nconst NAME = 'carousel'\nconst DATA_KEY = 'bs.carousel'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst ARROW_LEFT_KEY = 'ArrowLeft'\nconst ARROW_RIGHT_KEY = 'ArrowRight'\nconst TOUCHEVENT_COMPAT_WAIT = 500 // Time for mouse compat events to fire after touch\n\nconst ORDER_NEXT = 'next'\nconst ORDER_PREV = 'prev'\nconst DIRECTION_LEFT = 'left'\nconst DIRECTION_RIGHT = 'right'\n\nconst EVENT_SLIDE = `slide${EVENT_KEY}`\nconst EVENT_SLID = `slid${EVENT_KEY}`\nconst EVENT_KEYDOWN = `keydown${EVENT_KEY}`\nconst EVENT_MOUSEENTER = `mouseenter${EVENT_KEY}`\nconst EVENT_MOUSELEAVE = `mouseleave${EVENT_KEY}`\nconst EVENT_DRAG_START = `dragstart${EVENT_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_CAROUSEL = 'carousel'\nconst CLASS_NAME_ACTIVE = 'active'\nconst CLASS_NAME_SLIDE = 'slide'\nconst CLASS_NAME_END = 'carousel-item-end'\nconst CLASS_NAME_START = 'carousel-item-start'\nconst CLASS_NAME_NEXT = 'carousel-item-next'\nconst CLASS_NAME_PREV = 'carousel-item-prev'\n\nconst SELECTOR_ACTIVE = '.active'\nconst SELECTOR_ITEM = '.carousel-item'\nconst SELECTOR_ACTIVE_ITEM = SELECTOR_ACTIVE + SELECTOR_ITEM\nconst SELECTOR_ITEM_IMG = '.carousel-item img'\nconst SELECTOR_INDICATORS = '.carousel-indicators'\nconst SELECTOR_DATA_SLIDE = '[data-bs-slide], [data-bs-slide-to]'\nconst SELECTOR_DATA_RIDE = '[data-bs-ride=\"carousel\"]'\n\nconst KEY_TO_DIRECTION = {\n  [ARROW_LEFT_KEY]: DIRECTION_RIGHT,\n  [ARROW_RIGHT_KEY]: DIRECTION_LEFT\n}\n\nconst Default = {\n  interval: 5000,\n  keyboard: true,\n  pause: 'hover',\n  ride: false,\n  touch: true,\n  wrap: true\n}\n\nconst DefaultType = {\n  interval: '(number|boolean)', // TODO:v6 remove boolean support\n  keyboard: 'boolean',\n  pause: '(string|boolean)',\n  ride: '(boolean|string)',\n  touch: 'boolean',\n  wrap: 'boolean'\n}\n\n/**\n * Class definition\n */\n\nclass Carousel extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._interval = null\n    this._activeElement = null\n    this._isSliding = false\n    this.touchTimeout = null\n    this._swipeHelper = null\n\n    this._indicatorsElement = SelectorEngine.findOne(SELECTOR_INDICATORS, this._element)\n    this._addEventListeners()\n\n    if (this._config.ride === CLASS_NAME_CAROUSEL) {\n      this.cycle()\n    }\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  next() {\n    this._slide(ORDER_NEXT)\n  }\n\n  nextWhenVisible() {\n    // FIXME TODO use `document.visibilityState`\n    // Don't call next when the page isn't visible\n    // or the carousel or its parent isn't visible\n    if (!document.hidden && isVisible(this._element)) {\n      this.next()\n    }\n  }\n\n  prev() {\n    this._slide(ORDER_PREV)\n  }\n\n  pause() {\n    if (this._isSliding) {\n      triggerTransitionEnd(this._element)\n    }\n\n    this._clearInterval()\n  }\n\n  cycle() {\n    this._clearInterval()\n    this._updateInterval()\n\n    this._interval = setInterval(() => this.nextWhenVisible(), this._config.interval)\n  }\n\n  _maybeEnableCycle() {\n    if (!this._config.ride) {\n      return\n    }\n\n    if (this._isSliding) {\n      EventHandler.one(this._element, EVENT_SLID, () => this.cycle())\n      return\n    }\n\n    this.cycle()\n  }\n\n  to(index) {\n    const items = this._getItems()\n    if (index > items.length - 1 || index < 0) {\n      return\n    }\n\n    if (this._isSliding) {\n      EventHandler.one(this._element, EVENT_SLID, () => this.to(index))\n      return\n    }\n\n    const activeIndex = this._getItemIndex(this._getActive())\n    if (activeIndex === index) {\n      return\n    }\n\n    const order = index > activeIndex ? ORDER_NEXT : ORDER_PREV\n\n    this._slide(order, items[index])\n  }\n\n  dispose() {\n    if (this._swipeHelper) {\n      this._swipeHelper.dispose()\n    }\n\n    super.dispose()\n  }\n\n  // Private\n  _configAfterMerge(config) {\n    config.defaultInterval = config.interval\n    return config\n  }\n\n  _addEventListeners() {\n    if (this._config.keyboard) {\n      EventHandler.on(this._element, EVENT_KEYDOWN, event => this._keydown(event))\n    }\n\n    if (this._config.pause === 'hover') {\n      EventHandler.on(this._element, EVENT_MOUSEENTER, () => this.pause())\n      EventHandler.on(this._element, EVENT_MOUSELEAVE, () => this._maybeEnableCycle())\n    }\n\n    if (this._config.touch && Swipe.isSupported()) {\n      this._addTouchEventListeners()\n    }\n  }\n\n  _addTouchEventListeners() {\n    for (const img of SelectorEngine.find(SELECTOR_ITEM_IMG, this._element)) {\n      EventHandler.on(img, EVENT_DRAG_START, event => event.preventDefault())\n    }\n\n    const endCallBack = () => {\n      if (this._config.pause !== 'hover') {\n        return\n      }\n\n      // If it's a touch-enabled device, mouseenter/leave are fired as\n      // part of the mouse compatibility events on first tap - the carousel\n      // would stop cycling until user tapped out of it;\n      // here, we listen for touchend, explicitly pause the carousel\n      // (as if it's the second time we tap on it, mouseenter compat event\n      // is NOT fired) and after a timeout (to allow for mouse compatibility\n      // events to fire) we explicitly restart cycling\n\n      this.pause()\n      if (this.touchTimeout) {\n        clearTimeout(this.touchTimeout)\n      }\n\n      this.touchTimeout = setTimeout(() => this._maybeEnableCycle(), TOUCHEVENT_COMPAT_WAIT + this._config.interval)\n    }\n\n    const swipeConfig = {\n      leftCallback: () => this._slide(this._directionToOrder(DIRECTION_LEFT)),\n      rightCallback: () => this._slide(this._directionToOrder(DIRECTION_RIGHT)),\n      endCallback: endCallBack\n    }\n\n    this._swipeHelper = new Swipe(this._element, swipeConfig)\n  }\n\n  _keydown(event) {\n    if (/input|textarea/i.test(event.target.tagName)) {\n      return\n    }\n\n    const direction = KEY_TO_DIRECTION[event.key]\n    if (direction) {\n      event.preventDefault()\n      this._slide(this._directionToOrder(direction))\n    }\n  }\n\n  _getItemIndex(element) {\n    return this._getItems().indexOf(element)\n  }\n\n  _setActiveIndicatorElement(index) {\n    if (!this._indicatorsElement) {\n      return\n    }\n\n    const activeIndicator = SelectorEngine.findOne(SELECTOR_ACTIVE, this._indicatorsElement)\n\n    activeIndicator.classList.remove(CLASS_NAME_ACTIVE)\n    activeIndicator.removeAttribute('aria-current')\n\n    const newActiveIndicator = SelectorEngine.findOne(`[data-bs-slide-to=\"${index}\"]`, this._indicatorsElement)\n\n    if (newActiveIndicator) {\n      newActiveIndicator.classList.add(CLASS_NAME_ACTIVE)\n      newActiveIndicator.setAttribute('aria-current', 'true')\n    }\n  }\n\n  _updateInterval() {\n    const element = this._activeElement || this._getActive()\n\n    if (!element) {\n      return\n    }\n\n    const elementInterval = Number.parseInt(element.getAttribute('data-bs-interval'), 10)\n\n    this._config.interval = elementInterval || this._config.defaultInterval\n  }\n\n  _slide(order, element = null) {\n    if (this._isSliding) {\n      return\n    }\n\n    const activeElement = this._getActive()\n    const isNext = order === ORDER_NEXT\n    const nextElement = element || getNextActiveElement(this._getItems(), activeElement, isNext, this._config.wrap)\n\n    if (nextElement === activeElement) {\n      return\n    }\n\n    const nextElementIndex = this._getItemIndex(nextElement)\n\n    const triggerEvent = eventName => {\n      return EventHandler.trigger(this._element, eventName, {\n        relatedTarget: nextElement,\n        direction: this._orderToDirection(order),\n        from: this._getItemIndex(activeElement),\n        to: nextElementIndex\n      })\n    }\n\n    const slideEvent = triggerEvent(EVENT_SLIDE)\n\n    if (slideEvent.defaultPrevented) {\n      return\n    }\n\n    if (!activeElement || !nextElement) {\n      // Some weirdness is happening, so we bail\n      // todo: change tests that use empty divs to avoid this check\n      return\n    }\n\n    const isCycling = Boolean(this._interval)\n    this.pause()\n\n    this._isSliding = true\n\n    this._setActiveIndicatorElement(nextElementIndex)\n    this._activeElement = nextElement\n\n    const directionalClassName = isNext ? CLASS_NAME_START : CLASS_NAME_END\n    const orderClassName = isNext ? CLASS_NAME_NEXT : CLASS_NAME_PREV\n\n    nextElement.classList.add(orderClassName)\n\n    reflow(nextElement)\n\n    activeElement.classList.add(directionalClassName)\n    nextElement.classList.add(directionalClassName)\n\n    const completeCallBack = () => {\n      nextElement.classList.remove(directionalClassName, orderClassName)\n      nextElement.classList.add(CLASS_NAME_ACTIVE)\n\n      activeElement.classList.remove(CLASS_NAME_ACTIVE, orderClassName, directionalClassName)\n\n      this._isSliding = false\n\n      triggerEvent(EVENT_SLID)\n    }\n\n    this._queueCallback(completeCallBack, activeElement, this._isAnimated())\n\n    if (isCycling) {\n      this.cycle()\n    }\n  }\n\n  _isAnimated() {\n    return this._element.classList.contains(CLASS_NAME_SLIDE)\n  }\n\n  _getActive() {\n    return SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM, this._element)\n  }\n\n  _getItems() {\n    return SelectorEngine.find(SELECTOR_ITEM, this._element)\n  }\n\n  _clearInterval() {\n    if (this._interval) {\n      clearInterval(this._interval)\n      this._interval = null\n    }\n  }\n\n  _directionToOrder(direction) {\n    if (isRTL()) {\n      return direction === DIRECTION_LEFT ? ORDER_PREV : ORDER_NEXT\n    }\n\n    return direction === DIRECTION_LEFT ? ORDER_NEXT : ORDER_PREV\n  }\n\n  _orderToDirection(order) {\n    if (isRTL()) {\n      return order === ORDER_PREV ? DIRECTION_LEFT : DIRECTION_RIGHT\n    }\n\n    return order === ORDER_PREV ? DIRECTION_RIGHT : DIRECTION_LEFT\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Carousel.getOrCreateInstance(this, config)\n\n      if (typeof config === 'number') {\n        data.to(config)\n        return\n      }\n\n      if (typeof config === 'string') {\n        if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_SLIDE, function (event) {\n  const target = getElementFromSelector(this)\n\n  if (!target || !target.classList.contains(CLASS_NAME_CAROUSEL)) {\n    return\n  }\n\n  event.preventDefault()\n\n  const carousel = Carousel.getOrCreateInstance(target)\n  const slideIndex = this.getAttribute('data-bs-slide-to')\n\n  if (slideIndex) {\n    carousel.to(slideIndex)\n    carousel._maybeEnableCycle()\n    return\n  }\n\n  if (Manipulator.getDataAttribute(this, 'slide') === 'next') {\n    carousel.next()\n    carousel._maybeEnableCycle()\n    return\n  }\n\n  carousel.prev()\n  carousel._maybeEnableCycle()\n})\n\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  const carousels = SelectorEngine.find(SELECTOR_DATA_RIDE)\n\n  for (const carousel of carousels) {\n    Carousel.getOrCreateInstance(carousel)\n  }\n})\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Carousel)\n\nexport default Carousel\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): collapse.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  defineJQueryPlugin,\n  getElement,\n  getElementFromSelector,\n  getSelectorFromElement,\n  reflow\n} from './util/index'\nimport EventHandler from './dom/event-handler'\nimport SelectorEngine from './dom/selector-engine'\nimport BaseComponent from './base-component'\n\n/**\n * Constants\n */\n\nconst NAME = 'collapse'\nconst DATA_KEY = 'bs.collapse'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_COLLAPSE = 'collapse'\nconst CLASS_NAME_COLLAPSING = 'collapsing'\nconst CLASS_NAME_COLLAPSED = 'collapsed'\nconst CLASS_NAME_DEEPER_CHILDREN = `:scope .${CLASS_NAME_COLLAPSE} .${CLASS_NAME_COLLAPSE}`\nconst CLASS_NAME_HORIZONTAL = 'collapse-horizontal'\n\nconst WIDTH = 'width'\nconst HEIGHT = 'height'\n\nconst SELECTOR_ACTIVES = '.collapse.show, .collapse.collapsing'\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"collapse\"]'\n\nconst Default = {\n  parent: null,\n  toggle: true\n}\n\nconst DefaultType = {\n  parent: '(null|element)',\n  toggle: 'boolean'\n}\n\n/**\n * Class definition\n */\n\nclass Collapse extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._isTransitioning = false\n    this._triggerArray = []\n\n    const toggleList = SelectorEngine.find(SELECTOR_DATA_TOGGLE)\n\n    for (const elem of toggleList) {\n      const selector = getSelectorFromElement(elem)\n      const filterElement = SelectorEngine.find(selector)\n        .filter(foundElement => foundElement === this._element)\n\n      if (selector !== null && filterElement.length) {\n        this._triggerArray.push(elem)\n      }\n    }\n\n    this._initializeChildren()\n\n    if (!this._config.parent) {\n      this._addAriaAndCollapsedClass(this._triggerArray, this._isShown())\n    }\n\n    if (this._config.toggle) {\n      this.toggle()\n    }\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle() {\n    if (this._isShown()) {\n      this.hide()\n    } else {\n      this.show()\n    }\n  }\n\n  show() {\n    if (this._isTransitioning || this._isShown()) {\n      return\n    }\n\n    let activeChildren = []\n\n    // find active children\n    if (this._config.parent) {\n      activeChildren = this._getFirstLevelChildren(SELECTOR_ACTIVES)\n        .filter(element => element !== this._element)\n        .map(element => Collapse.getOrCreateInstance(element, { toggle: false }))\n    }\n\n    if (activeChildren.length && activeChildren[0]._isTransitioning) {\n      return\n    }\n\n    const startEvent = EventHandler.trigger(this._element, EVENT_SHOW)\n    if (startEvent.defaultPrevented) {\n      return\n    }\n\n    for (const activeInstance of activeChildren) {\n      activeInstance.hide()\n    }\n\n    const dimension = this._getDimension()\n\n    this._element.classList.remove(CLASS_NAME_COLLAPSE)\n    this._element.classList.add(CLASS_NAME_COLLAPSING)\n\n    this._element.style[dimension] = 0\n\n    this._addAriaAndCollapsedClass(this._triggerArray, true)\n    this._isTransitioning = true\n\n    const complete = () => {\n      this._isTransitioning = false\n\n      this._element.classList.remove(CLASS_NAME_COLLAPSING)\n      this._element.classList.add(CLASS_NAME_COLLAPSE, CLASS_NAME_SHOW)\n\n      this._element.style[dimension] = ''\n\n      EventHandler.trigger(this._element, EVENT_SHOWN)\n    }\n\n    const capitalizedDimension = dimension[0].toUpperCase() + dimension.slice(1)\n    const scrollSize = `scroll${capitalizedDimension}`\n\n    this._queueCallback(complete, this._element, true)\n    this._element.style[dimension] = `${this._element[scrollSize]}px`\n  }\n\n  hide() {\n    if (this._isTransitioning || !this._isShown()) {\n      return\n    }\n\n    const startEvent = EventHandler.trigger(this._element, EVENT_HIDE)\n    if (startEvent.defaultPrevented) {\n      return\n    }\n\n    const dimension = this._getDimension()\n\n    this._element.style[dimension] = `${this._element.getBoundingClientRect()[dimension]}px`\n\n    reflow(this._element)\n\n    this._element.classList.add(CLASS_NAME_COLLAPSING)\n    this._element.classList.remove(CLASS_NAME_COLLAPSE, CLASS_NAME_SHOW)\n\n    for (const trigger of this._triggerArray) {\n      const element = getElementFromSelector(trigger)\n\n      if (element && !this._isShown(element)) {\n        this._addAriaAndCollapsedClass([trigger], false)\n      }\n    }\n\n    this._isTransitioning = true\n\n    const complete = () => {\n      this._isTransitioning = false\n      this._element.classList.remove(CLASS_NAME_COLLAPSING)\n      this._element.classList.add(CLASS_NAME_COLLAPSE)\n      EventHandler.trigger(this._element, EVENT_HIDDEN)\n    }\n\n    this._element.style[dimension] = ''\n\n    this._queueCallback(complete, this._element, true)\n  }\n\n  _isShown(element = this._element) {\n    return element.classList.contains(CLASS_NAME_SHOW)\n  }\n\n  // Private\n  _configAfterMerge(config) {\n    config.toggle = Boolean(config.toggle) // Coerce string values\n    config.parent = getElement(config.parent)\n    return config\n  }\n\n  _getDimension() {\n    return this._element.classList.contains(CLASS_NAME_HORIZONTAL) ? WIDTH : HEIGHT\n  }\n\n  _initializeChildren() {\n    if (!this._config.parent) {\n      return\n    }\n\n    const children = this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE)\n\n    for (const element of children) {\n      const selected = getElementFromSelector(element)\n\n      if (selected) {\n        this._addAriaAndCollapsedClass([element], this._isShown(selected))\n      }\n    }\n  }\n\n  _getFirstLevelChildren(selector) {\n    const children = SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN, this._config.parent)\n    // remove children if greater depth\n    return SelectorEngine.find(selector, this._config.parent).filter(element => !children.includes(element))\n  }\n\n  _addAriaAndCollapsedClass(triggerArray, isOpen) {\n    if (!triggerArray.length) {\n      return\n    }\n\n    for (const element of triggerArray) {\n      element.classList.toggle(CLASS_NAME_COLLAPSED, !isOpen)\n      element.setAttribute('aria-expanded', isOpen)\n    }\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    const _config = {}\n    if (typeof config === 'string' && /show|hide/.test(config)) {\n      _config.toggle = false\n    }\n\n    return this.each(function () {\n      const data = Collapse.getOrCreateInstance(this, _config)\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  // preventDefault only for <a> elements (which change the URL) not inside the collapsible element\n  if (event.target.tagName === 'A' || (event.delegateTarget && event.delegateTarget.tagName === 'A')) {\n    event.preventDefault()\n  }\n\n  const selector = getSelectorFromElement(this)\n  const selectorElements = SelectorEngine.find(selector)\n\n  for (const element of selectorElements) {\n    Collapse.getOrCreateInstance(element, { toggle: false }).toggle()\n  }\n})\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Collapse)\n\nexport default Collapse\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): dropdown.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport * as Popper from '@popperjs/core'\nimport {\n  defineJQueryPlugin,\n  getElement,\n  getNextActiveElement,\n  isDisabled,\n  isElement,\n  isRTL,\n  isVisible,\n  noop\n} from './util/index'\nimport EventHandler from './dom/event-handler'\nimport Manipulator from './dom/manipulator'\nimport SelectorEngine from './dom/selector-engine'\nimport BaseComponent from './base-component'\n\n/**\n * Constants\n */\n\nconst NAME = 'dropdown'\nconst DATA_KEY = 'bs.dropdown'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst ESCAPE_KEY = 'Escape'\nconst TAB_KEY = 'Tab'\nconst ARROW_UP_KEY = 'ArrowUp'\nconst ARROW_DOWN_KEY = 'ArrowDown'\nconst RIGHT_MOUSE_BUTTON = 2 // MouseEvent.button value for the secondary button, usually the right button\n\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_KEYDOWN_DATA_API = `keydown${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_KEYUP_DATA_API = `keyup${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_DROPUP = 'dropup'\nconst CLASS_NAME_DROPEND = 'dropend'\nconst CLASS_NAME_DROPSTART = 'dropstart'\nconst CLASS_NAME_DROPUP_CENTER = 'dropup-center'\nconst CLASS_NAME_DROPDOWN_CENTER = 'dropdown-center'\n\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"dropdown\"]:not(.disabled):not(:disabled)'\nconst SELECTOR_DATA_TOGGLE_SHOWN = `${SELECTOR_DATA_TOGGLE}.${CLASS_NAME_SHOW}`\nconst SELECTOR_MENU = '.dropdown-menu'\nconst SELECTOR_NAVBAR = '.navbar'\nconst SELECTOR_NAVBAR_NAV = '.navbar-nav'\nconst SELECTOR_VISIBLE_ITEMS = '.dropdown-menu .dropdown-item:not(.disabled):not(:disabled)'\n\nconst PLACEMENT_TOP = isRTL() ? 'top-end' : 'top-start'\nconst PLACEMENT_TOPEND = isRTL() ? 'top-start' : 'top-end'\nconst PLACEMENT_BOTTOM = isRTL() ? 'bottom-end' : 'bottom-start'\nconst PLACEMENT_BOTTOMEND = isRTL() ? 'bottom-start' : 'bottom-end'\nconst PLACEMENT_RIGHT = isRTL() ? 'left-start' : 'right-start'\nconst PLACEMENT_LEFT = isRTL() ? 'right-start' : 'left-start'\nconst PLACEMENT_TOPCENTER = 'top'\nconst PLACEMENT_BOTTOMCENTER = 'bottom'\n\nconst Default = {\n  autoClose: true,\n  boundary: 'clippingParents',\n  display: 'dynamic',\n  offset: [0, 2],\n  popperConfig: null,\n  reference: 'toggle'\n}\n\nconst DefaultType = {\n  autoClose: '(boolean|string)',\n  boundary: '(string|element)',\n  display: 'string',\n  offset: '(array|string|function)',\n  popperConfig: '(null|object|function)',\n  reference: '(string|element|object)'\n}\n\n/**\n * Class definition\n */\n\nclass Dropdown extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._popper = null\n    this._parent = this._element.parentNode // dropdown wrapper\n    this._menu = SelectorEngine.findOne(SELECTOR_MENU, this._parent)\n    this._inNavbar = this._detectNavbar()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle() {\n    return this._isShown() ? this.hide() : this.show()\n  }\n\n  show() {\n    if (isDisabled(this._element) || this._isShown()) {\n      return\n    }\n\n    const relatedTarget = {\n      relatedTarget: this._element\n    }\n\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW, relatedTarget)\n\n    if (showEvent.defaultPrevented) {\n      return\n    }\n\n    this._createPopper()\n\n    // If this is a touch-enabled device we add extra\n    // empty mouseover listeners to the body's immediate children;\n    // only needed because of broken event delegation on iOS\n    // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n    if ('ontouchstart' in document.documentElement && !this._parent.closest(SELECTOR_NAVBAR_NAV)) {\n      for (const element of [].concat(...document.body.children)) {\n        EventHandler.on(element, 'mouseover', noop)\n      }\n    }\n\n    this._element.focus()\n    this._element.setAttribute('aria-expanded', true)\n\n    this._menu.classList.add(CLASS_NAME_SHOW)\n    this._element.classList.add(CLASS_NAME_SHOW)\n    EventHandler.trigger(this._element, EVENT_SHOWN, relatedTarget)\n  }\n\n  hide() {\n    if (isDisabled(this._element) || !this._isShown()) {\n      return\n    }\n\n    const relatedTarget = {\n      relatedTarget: this._element\n    }\n\n    this._completeHide(relatedTarget)\n  }\n\n  dispose() {\n    if (this._popper) {\n      this._popper.destroy()\n    }\n\n    super.dispose()\n  }\n\n  update() {\n    this._inNavbar = this._detectNavbar()\n    if (this._popper) {\n      this._popper.update()\n    }\n  }\n\n  // Private\n  _completeHide(relatedTarget) {\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE, relatedTarget)\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    // If this is a touch-enabled device we remove the extra\n    // empty mouseover listeners we added for iOS support\n    if ('ontouchstart' in document.documentElement) {\n      for (const element of [].concat(...document.body.children)) {\n        EventHandler.off(element, 'mouseover', noop)\n      }\n    }\n\n    if (this._popper) {\n      this._popper.destroy()\n    }\n\n    this._menu.classList.remove(CLASS_NAME_SHOW)\n    this._element.classList.remove(CLASS_NAME_SHOW)\n    this._element.setAttribute('aria-expanded', 'false')\n    Manipulator.removeDataAttribute(this._menu, 'popper')\n    EventHandler.trigger(this._element, EVENT_HIDDEN, relatedTarget)\n  }\n\n  _getConfig(config) {\n    config = super._getConfig(config)\n\n    if (typeof config.reference === 'object' && !isElement(config.reference) &&\n      typeof config.reference.getBoundingClientRect !== 'function'\n    ) {\n      // Popper virtual elements require a getBoundingClientRect method\n      throw new TypeError(`${NAME.toUpperCase()}: Option \"reference\" provided type \"object\" without a required \"getBoundingClientRect\" method.`)\n    }\n\n    return config\n  }\n\n  _createPopper() {\n    if (typeof Popper === 'undefined') {\n      throw new TypeError('Bootstrap\\'s dropdowns require Popper (https://popper.js.org)')\n    }\n\n    let referenceElement = this._element\n\n    if (this._config.reference === 'parent') {\n      referenceElement = this._parent\n    } else if (isElement(this._config.reference)) {\n      referenceElement = getElement(this._config.reference)\n    } else if (typeof this._config.reference === 'object') {\n      referenceElement = this._config.reference\n    }\n\n    const popperConfig = this._getPopperConfig()\n    this._popper = Popper.createPopper(referenceElement, this._menu, popperConfig)\n  }\n\n  _isShown() {\n    return this._menu.classList.contains(CLASS_NAME_SHOW)\n  }\n\n  _getPlacement() {\n    const parentDropdown = this._parent\n\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPEND)) {\n      return PLACEMENT_RIGHT\n    }\n\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPSTART)) {\n      return PLACEMENT_LEFT\n    }\n\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPUP_CENTER)) {\n      return PLACEMENT_TOPCENTER\n    }\n\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPDOWN_CENTER)) {\n      return PLACEMENT_BOTTOMCENTER\n    }\n\n    // We need to trim the value because custom properties can also include spaces\n    const isEnd = getComputedStyle(this._menu).getPropertyValue('--bs-position').trim() === 'end'\n\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPUP)) {\n      return isEnd ? PLACEMENT_TOPEND : PLACEMENT_TOP\n    }\n\n    return isEnd ? PLACEMENT_BOTTOMEND : PLACEMENT_BOTTOM\n  }\n\n  _detectNavbar() {\n    return this._element.closest(SELECTOR_NAVBAR) !== null\n  }\n\n  _getOffset() {\n    const { offset } = this._config\n\n    if (typeof offset === 'string') {\n      return offset.split(',').map(value => Number.parseInt(value, 10))\n    }\n\n    if (typeof offset === 'function') {\n      return popperData => offset(popperData, this._element)\n    }\n\n    return offset\n  }\n\n  _getPopperConfig() {\n    const defaultBsPopperConfig = {\n      placement: this._getPlacement(),\n      modifiers: [{\n        name: 'preventOverflow',\n        options: {\n          boundary: this._config.boundary\n        }\n      },\n      {\n        name: 'offset',\n        options: {\n          offset: this._getOffset()\n        }\n      }]\n    }\n\n    // Disable Popper if we have a static display or Dropdown is in Navbar\n    if (this._inNavbar || this._config.display === 'static') {\n      Manipulator.setDataAttribute(this._menu, 'popper', 'static') // todo:v6 remove\n      defaultBsPopperConfig.modifiers = [{\n        name: 'applyStyles',\n        enabled: false\n      }]\n    }\n\n    return {\n      ...defaultBsPopperConfig,\n      ...(typeof this._config.popperConfig === 'function' ? this._config.popperConfig(defaultBsPopperConfig) : this._config.popperConfig)\n    }\n  }\n\n  _selectMenuItem({ key, target }) {\n    const items = SelectorEngine.find(SELECTOR_VISIBLE_ITEMS, this._menu).filter(element => isVisible(element))\n\n    if (!items.length) {\n      return\n    }\n\n    // if target isn't included in items (e.g. when expanding the dropdown)\n    // allow cycling to get the last item in case key equals ARROW_UP_KEY\n    getNextActiveElement(items, target, key === ARROW_DOWN_KEY, !items.includes(target)).focus()\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Dropdown.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    })\n  }\n\n  static clearMenus(event) {\n    if (event.button === RIGHT_MOUSE_BUTTON || (event.type === 'keyup' && event.key !== TAB_KEY)) {\n      return\n    }\n\n    const openToggles = SelectorEngine.find(SELECTOR_DATA_TOGGLE_SHOWN)\n\n    for (const toggle of openToggles) {\n      const context = Dropdown.getInstance(toggle)\n      if (!context || context._config.autoClose === false) {\n        continue\n      }\n\n      const composedPath = event.composedPath()\n      const isMenuTarget = composedPath.includes(context._menu)\n      if (\n        composedPath.includes(context._element) ||\n        (context._config.autoClose === 'inside' && !isMenuTarget) ||\n        (context._config.autoClose === 'outside' && isMenuTarget)\n      ) {\n        continue\n      }\n\n      // Tab navigation through the dropdown menu or events from contained inputs shouldn't close the menu\n      if (context._menu.contains(event.target) && ((event.type === 'keyup' && event.key === TAB_KEY) || /input|select|option|textarea|form/i.test(event.target.tagName))) {\n        continue\n      }\n\n      const relatedTarget = { relatedTarget: context._element }\n\n      if (event.type === 'click') {\n        relatedTarget.clickEvent = event\n      }\n\n      context._completeHide(relatedTarget)\n    }\n  }\n\n  static dataApiKeydownHandler(event) {\n    // If not an UP | DOWN | ESCAPE key => not a dropdown command\n    // If input/textarea && if key is other than ESCAPE => not a dropdown command\n\n    const isInput = /input|textarea/i.test(event.target.tagName)\n    const isEscapeEvent = event.key === ESCAPE_KEY\n    const isUpOrDownEvent = [ARROW_UP_KEY, ARROW_DOWN_KEY].includes(event.key)\n\n    if (!isUpOrDownEvent && !isEscapeEvent) {\n      return\n    }\n\n    if (isInput && !isEscapeEvent) {\n      return\n    }\n\n    event.preventDefault()\n\n    const getToggleButton = SelectorEngine.findOne(SELECTOR_DATA_TOGGLE, event.delegateTarget.parentNode)\n    const instance = Dropdown.getOrCreateInstance(getToggleButton)\n\n    if (isUpOrDownEvent) {\n      event.stopPropagation()\n      instance.show()\n      instance._selectMenuItem(event)\n      return\n    }\n\n    if (instance._isShown()) { // else is escape and we check if it is shown\n      event.stopPropagation()\n      instance.hide()\n      getToggleButton.focus()\n    }\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_KEYDOWN_DATA_API, SELECTOR_DATA_TOGGLE, Dropdown.dataApiKeydownHandler)\nEventHandler.on(document, EVENT_KEYDOWN_DATA_API, SELECTOR_MENU, Dropdown.dataApiKeydownHandler)\nEventHandler.on(document, EVENT_CLICK_DATA_API, Dropdown.clearMenus)\nEventHandler.on(document, EVENT_KEYUP_DATA_API, Dropdown.clearMenus)\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  event.preventDefault()\n  Dropdown.getOrCreateInstance(this).toggle()\n})\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Dropdown)\n\nexport default Dropdown\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): util/scrollBar.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport SelectorEngine from '../dom/selector-engine'\nimport Manipulator from '../dom/manipulator'\nimport { isElement } from './index'\n\n/**\n * Constants\n */\n\nconst SELECTOR_FIXED_CONTENT = '.fixed-top, .fixed-bottom, .is-fixed, .sticky-top'\nconst SELECTOR_STICKY_CONTENT = '.sticky-top'\nconst PROPERTY_PADDING = 'padding-right'\nconst PROPERTY_MARGIN = 'margin-right'\n\n/**\n * Class definition\n */\n\nclass ScrollBarHelper {\n  constructor() {\n    this._element = document.body\n  }\n\n  // Public\n  getWidth() {\n    // https://developer.mozilla.org/en-US/docs/Web/API/Window/innerWidth#usage_notes\n    const documentWidth = document.documentElement.clientWidth\n    return Math.abs(window.innerWidth - documentWidth)\n  }\n\n  hide() {\n    const width = this.getWidth()\n    this._disableOverFlow()\n    // give padding to element to balance the hidden scrollbar width\n    this._setElementAttributes(this._element, PROPERTY_PADDING, calculatedValue => calculatedValue + width)\n    // trick: We adjust positive paddingRight and negative marginRight to sticky-top elements to keep showing fullwidth\n    this._setElementAttributes(SELECTOR_FIXED_CONTENT, PROPERTY_PADDING, calculatedValue => calculatedValue + width)\n    this._setElementAttributes(SELECTOR_STICKY_CONTENT, PROPERTY_MARGIN, calculatedValue => calculatedValue - width)\n  }\n\n  reset() {\n    this._resetElementAttributes(this._element, 'overflow')\n    this._resetElementAttributes(this._element, PROPERTY_PADDING)\n    this._resetElementAttributes(SELECTOR_FIXED_CONTENT, PROPERTY_PADDING)\n    this._resetElementAttributes(SELECTOR_STICKY_CONTENT, PROPERTY_MARGIN)\n  }\n\n  isOverflowing() {\n    return this.getWidth() > 0\n  }\n\n  // Private\n  _disableOverFlow() {\n    this._saveInitialAttribute(this._element, 'overflow')\n    this._element.style.overflow = 'hidden'\n  }\n\n  _setElementAttributes(selector, styleProperty, callback) {\n    const scrollbarWidth = this.getWidth()\n    const manipulationCallBack = element => {\n      if (element !== this._element && window.innerWidth > element.clientWidth + scrollbarWidth) {\n        return\n      }\n\n      this._saveInitialAttribute(element, styleProperty)\n      const calculatedValue = window.getComputedStyle(element).getPropertyValue(styleProperty)\n      element.style.setProperty(styleProperty, `${callback(Number.parseFloat(calculatedValue))}px`)\n    }\n\n    this._applyManipulationCallback(selector, manipulationCallBack)\n  }\n\n  _saveInitialAttribute(element, styleProperty) {\n    const actualValue = element.style.getPropertyValue(styleProperty)\n    if (actualValue) {\n      Manipulator.setDataAttribute(element, styleProperty, actualValue)\n    }\n  }\n\n  _resetElementAttributes(selector, styleProperty) {\n    const manipulationCallBack = element => {\n      const value = Manipulator.getDataAttribute(element, styleProperty)\n      // We only want to remove the property if the value is `null`; the value can also be zero\n      if (value === null) {\n        element.style.removeProperty(styleProperty)\n        return\n      }\n\n      Manipulator.removeDataAttribute(element, styleProperty)\n      element.style.setProperty(styleProperty, value)\n    }\n\n    this._applyManipulationCallback(selector, manipulationCallBack)\n  }\n\n  _applyManipulationCallback(selector, callBack) {\n    if (isElement(selector)) {\n      callBack(selector)\n      return\n    }\n\n    for (const sel of SelectorEngine.find(selector, this._element)) {\n      callBack(sel)\n    }\n  }\n}\n\nexport default ScrollBarHelper\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): util/backdrop.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport EventHandler from '../dom/event-handler'\nimport { execute, executeAfterTransition, getElement, reflow } from './index'\nimport Config from './config'\n\n/**\n * Constants\n */\n\nconst NAME = 'backdrop'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\nconst EVENT_MOUSEDOWN = `mousedown.bs.${NAME}`\n\nconst Default = {\n  className: 'modal-backdrop',\n  clickCallback: null,\n  isAnimated: false,\n  isVisible: true, // if false, we use the backdrop helper without adding any element to the dom\n  rootElement: 'body' // give the choice to place backdrop under different elements\n}\n\nconst DefaultType = {\n  className: 'string',\n  clickCallback: '(function|null)',\n  isAnimated: 'boolean',\n  isVisible: 'boolean',\n  rootElement: '(element|string)'\n}\n\n/**\n * Class definition\n */\n\nclass Backdrop extends Config {\n  constructor(config) {\n    super()\n    this._config = this._getConfig(config)\n    this._isAppended = false\n    this._element = null\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  show(callback) {\n    if (!this._config.isVisible) {\n      execute(callback)\n      return\n    }\n\n    this._append()\n\n    const element = this._getElement()\n    if (this._config.isAnimated) {\n      reflow(element)\n    }\n\n    element.classList.add(CLASS_NAME_SHOW)\n\n    this._emulateAnimation(() => {\n      execute(callback)\n    })\n  }\n\n  hide(callback) {\n    if (!this._config.isVisible) {\n      execute(callback)\n      return\n    }\n\n    this._getElement().classList.remove(CLASS_NAME_SHOW)\n\n    this._emulateAnimation(() => {\n      this.dispose()\n      execute(callback)\n    })\n  }\n\n  dispose() {\n    if (!this._isAppended) {\n      return\n    }\n\n    EventHandler.off(this._element, EVENT_MOUSEDOWN)\n\n    this._element.remove()\n    this._isAppended = false\n  }\n\n  // Private\n  _getElement() {\n    if (!this._element) {\n      const backdrop = document.createElement('div')\n      backdrop.className = this._config.className\n      if (this._config.isAnimated) {\n        backdrop.classList.add(CLASS_NAME_FADE)\n      }\n\n      this._element = backdrop\n    }\n\n    return this._element\n  }\n\n  _configAfterMerge(config) {\n    // use getElement() with the default \"body\" to get a fresh Element on each instantiation\n    config.rootElement = getElement(config.rootElement)\n    return config\n  }\n\n  _append() {\n    if (this._isAppended) {\n      return\n    }\n\n    const element = this._getElement()\n    this._config.rootElement.append(element)\n\n    EventHandler.on(element, EVENT_MOUSEDOWN, () => {\n      execute(this._config.clickCallback)\n    })\n\n    this._isAppended = true\n  }\n\n  _emulateAnimation(callback) {\n    executeAfterTransition(callback, this._getElement(), this._config.isAnimated)\n  }\n}\n\nexport default Backdrop\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): util/focustrap.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport EventHandler from '../dom/event-handler'\nimport SelectorEngine from '../dom/selector-engine'\nimport Config from './config'\n\n/**\n * Constants\n */\n\nconst NAME = 'focustrap'\nconst DATA_KEY = 'bs.focustrap'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst EVENT_FOCUSIN = `focusin${EVENT_KEY}`\nconst EVENT_KEYDOWN_TAB = `keydown.tab${EVENT_KEY}`\n\nconst TAB_KEY = 'Tab'\nconst TAB_NAV_FORWARD = 'forward'\nconst TAB_NAV_BACKWARD = 'backward'\n\nconst Default = {\n  autofocus: true,\n  trapElement: null // The element to trap focus inside of\n}\n\nconst DefaultType = {\n  autofocus: 'boolean',\n  trapElement: 'element'\n}\n\n/**\n * Class definition\n */\n\nclass FocusTrap extends Config {\n  constructor(config) {\n    super()\n    this._config = this._getConfig(config)\n    this._isActive = false\n    this._lastTabNavDirection = null\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  activate() {\n    if (this._isActive) {\n      return\n    }\n\n    if (this._config.autofocus) {\n      this._config.trapElement.focus()\n    }\n\n    EventHandler.off(document, EVENT_KEY) // guard against infinite focus loop\n    EventHandler.on(document, EVENT_FOCUSIN, event => this._handleFocusin(event))\n    EventHandler.on(document, EVENT_KEYDOWN_TAB, event => this._handleKeydown(event))\n\n    this._isActive = true\n  }\n\n  deactivate() {\n    if (!this._isActive) {\n      return\n    }\n\n    this._isActive = false\n    EventHandler.off(document, EVENT_KEY)\n  }\n\n  // Private\n  _handleFocusin(event) {\n    const { trapElement } = this._config\n\n    if (event.target === document || event.target === trapElement || trapElement.contains(event.target)) {\n      return\n    }\n\n    const elements = SelectorEngine.focusableChildren(trapElement)\n\n    if (elements.length === 0) {\n      trapElement.focus()\n    } else if (this._lastTabNavDirection === TAB_NAV_BACKWARD) {\n      elements[elements.length - 1].focus()\n    } else {\n      elements[0].focus()\n    }\n  }\n\n  _handleKeydown(event) {\n    if (event.key !== TAB_KEY) {\n      return\n    }\n\n    this._lastTabNavDirection = event.shiftKey ? TAB_NAV_BACKWARD : TAB_NAV_FORWARD\n  }\n}\n\nexport default FocusTrap\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): modal.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { defineJQueryPlugin, getElementFromSelector, isRTL, isVisible, reflow } from './util/index'\nimport EventHandler from './dom/event-handler'\nimport SelectorEngine from './dom/selector-engine'\nimport ScrollBarHelper from './util/scrollbar'\nimport BaseComponent from './base-component'\nimport Backdrop from './util/backdrop'\nimport FocusTrap from './util/focustrap'\nimport { enableDismissTrigger } from './util/component-functions'\n\n/**\n * Constants\n */\n\nconst NAME = 'modal'\nconst DATA_KEY = 'bs.modal'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst ESCAPE_KEY = 'Escape'\n\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDE_PREVENTED = `hidePrevented${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_RESIZE = `resize${EVENT_KEY}`\nconst EVENT_MOUSEDOWN_DISMISS = `mousedown.dismiss${EVENT_KEY}`\nconst EVENT_KEYDOWN_DISMISS = `keydown.dismiss${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_OPEN = 'modal-open'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_STATIC = 'modal-static'\n\nconst OPEN_SELECTOR = '.modal.show'\nconst SELECTOR_DIALOG = '.modal-dialog'\nconst SELECTOR_MODAL_BODY = '.modal-body'\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"modal\"]'\n\nconst Default = {\n  backdrop: true,\n  focus: true,\n  keyboard: true\n}\n\nconst DefaultType = {\n  backdrop: '(boolean|string)',\n  focus: 'boolean',\n  keyboard: 'boolean'\n}\n\n/**\n * Class definition\n */\n\nclass Modal extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._dialog = SelectorEngine.findOne(SELECTOR_DIALOG, this._element)\n    this._backdrop = this._initializeBackDrop()\n    this._focustrap = this._initializeFocusTrap()\n    this._isShown = false\n    this._isTransitioning = false\n    this._scrollBar = new ScrollBarHelper()\n\n    this._addEventListeners()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget)\n  }\n\n  show(relatedTarget) {\n    if (this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW, {\n      relatedTarget\n    })\n\n    if (showEvent.defaultPrevented) {\n      return\n    }\n\n    this._isShown = true\n    this._isTransitioning = true\n\n    this._scrollBar.hide()\n\n    document.body.classList.add(CLASS_NAME_OPEN)\n\n    this._adjustDialog()\n\n    this._backdrop.show(() => this._showElement(relatedTarget))\n  }\n\n  hide() {\n    if (!this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE)\n\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    this._isShown = false\n    this._isTransitioning = true\n    this._focustrap.deactivate()\n\n    this._element.classList.remove(CLASS_NAME_SHOW)\n\n    this._queueCallback(() => this._hideModal(), this._element, this._isAnimated())\n  }\n\n  dispose() {\n    for (const htmlElement of [window, this._dialog]) {\n      EventHandler.off(htmlElement, EVENT_KEY)\n    }\n\n    this._backdrop.dispose()\n    this._focustrap.deactivate()\n    super.dispose()\n  }\n\n  handleUpdate() {\n    this._adjustDialog()\n  }\n\n  // Private\n  _initializeBackDrop() {\n    return new Backdrop({\n      isVisible: Boolean(this._config.backdrop), // 'static' option will be translated to true, and booleans will keep their value,\n      isAnimated: this._isAnimated()\n    })\n  }\n\n  _initializeFocusTrap() {\n    return new FocusTrap({\n      trapElement: this._element\n    })\n  }\n\n  _showElement(relatedTarget) {\n    // try to append dynamic modal\n    if (!document.body.contains(this._element)) {\n      document.body.append(this._element)\n    }\n\n    this._element.style.display = 'block'\n    this._element.removeAttribute('aria-hidden')\n    this._element.setAttribute('aria-modal', true)\n    this._element.setAttribute('role', 'dialog')\n    this._element.scrollTop = 0\n\n    const modalBody = SelectorEngine.findOne(SELECTOR_MODAL_BODY, this._dialog)\n    if (modalBody) {\n      modalBody.scrollTop = 0\n    }\n\n    reflow(this._element)\n\n    this._element.classList.add(CLASS_NAME_SHOW)\n\n    const transitionComplete = () => {\n      if (this._config.focus) {\n        this._focustrap.activate()\n      }\n\n      this._isTransitioning = false\n      EventHandler.trigger(this._element, EVENT_SHOWN, {\n        relatedTarget\n      })\n    }\n\n    this._queueCallback(transitionComplete, this._dialog, this._isAnimated())\n  }\n\n  _addEventListeners() {\n    EventHandler.on(this._element, EVENT_KEYDOWN_DISMISS, event => {\n      if (event.key !== ESCAPE_KEY) {\n        return\n      }\n\n      if (this._config.keyboard) {\n        event.preventDefault()\n        this.hide()\n        return\n      }\n\n      this._triggerBackdropTransition()\n    })\n\n    EventHandler.on(window, EVENT_RESIZE, () => {\n      if (this._isShown && !this._isTransitioning) {\n        this._adjustDialog()\n      }\n    })\n\n    EventHandler.on(this._element, EVENT_MOUSEDOWN_DISMISS, event => {\n      if (event.target !== event.currentTarget) { // click is inside modal-dialog\n        return\n      }\n\n      if (this._config.backdrop === 'static') {\n        this._triggerBackdropTransition()\n        return\n      }\n\n      if (this._config.backdrop) {\n        this.hide()\n      }\n    })\n  }\n\n  _hideModal() {\n    this._element.style.display = 'none'\n    this._element.setAttribute('aria-hidden', true)\n    this._element.removeAttribute('aria-modal')\n    this._element.removeAttribute('role')\n    this._isTransitioning = false\n\n    this._backdrop.hide(() => {\n      document.body.classList.remove(CLASS_NAME_OPEN)\n      this._resetAdjustments()\n      this._scrollBar.reset()\n      EventHandler.trigger(this._element, EVENT_HIDDEN)\n    })\n  }\n\n  _isAnimated() {\n    return this._element.classList.contains(CLASS_NAME_FADE)\n  }\n\n  _triggerBackdropTransition() {\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED)\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight\n    const initialOverflowY = this._element.style.overflowY\n    // return if the following background transition hasn't yet completed\n    if (initialOverflowY === 'hidden' || this._element.classList.contains(CLASS_NAME_STATIC)) {\n      return\n    }\n\n    if (!isModalOverflowing) {\n      this._element.style.overflowY = 'hidden'\n    }\n\n    this._element.classList.add(CLASS_NAME_STATIC)\n    this._queueCallback(() => {\n      this._element.classList.remove(CLASS_NAME_STATIC)\n      this._queueCallback(() => {\n        this._element.style.overflowY = initialOverflowY\n      }, this._dialog)\n    }, this._dialog)\n\n    this._element.focus()\n  }\n\n  /**\n   * The following methods are used to handle overflowing modals\n   */\n\n  _adjustDialog() {\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight\n    const scrollbarWidth = this._scrollBar.getWidth()\n    const isBodyOverflowing = scrollbarWidth > 0\n\n    if (isBodyOverflowing && !isModalOverflowing) {\n      const property = isRTL() ? 'paddingLeft' : 'paddingRight'\n      this._element.style[property] = `${scrollbarWidth}px`\n    }\n\n    if (!isBodyOverflowing && isModalOverflowing) {\n      const property = isRTL() ? 'paddingRight' : 'paddingLeft'\n      this._element.style[property] = `${scrollbarWidth}px`\n    }\n  }\n\n  _resetAdjustments() {\n    this._element.style.paddingLeft = ''\n    this._element.style.paddingRight = ''\n  }\n\n  // Static\n  static jQueryInterface(config, relatedTarget) {\n    return this.each(function () {\n      const data = Modal.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config](relatedTarget)\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  const target = getElementFromSelector(this)\n\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault()\n  }\n\n  EventHandler.one(target, EVENT_SHOW, showEvent => {\n    if (showEvent.defaultPrevented) {\n      // only register focus restorer if modal will actually get shown\n      return\n    }\n\n    EventHandler.one(target, EVENT_HIDDEN, () => {\n      if (isVisible(this)) {\n        this.focus()\n      }\n    })\n  })\n\n  // avoid conflict when clicking modal toggler while another one is open\n  const alreadyOpen = SelectorEngine.findOne(OPEN_SELECTOR)\n  if (alreadyOpen) {\n    Modal.getInstance(alreadyOpen).hide()\n  }\n\n  const data = Modal.getOrCreateInstance(target)\n\n  data.toggle(this)\n})\n\nenableDismissTrigger(Modal)\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Modal)\n\nexport default Modal\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): offcanvas.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  defineJQueryPlugin,\n  getElementFromSelector,\n  isDisabled,\n  isVisible\n} from './util/index'\nimport ScrollBarHelper from './util/scrollbar'\nimport EventHandler from './dom/event-handler'\nimport BaseComponent from './base-component'\nimport SelectorEngine from './dom/selector-engine'\nimport Backdrop from './util/backdrop'\nimport FocusTrap from './util/focustrap'\nimport { enableDismissTrigger } from './util/component-functions'\n\n/**\n * Constants\n */\n\nconst NAME = 'offcanvas'\nconst DATA_KEY = 'bs.offcanvas'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\nconst ESCAPE_KEY = 'Escape'\n\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_SHOWING = 'showing'\nconst CLASS_NAME_HIDING = 'hiding'\nconst CLASS_NAME_BACKDROP = 'offcanvas-backdrop'\nconst OPEN_SELECTOR = '.offcanvas.show'\n\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDE_PREVENTED = `hidePrevented${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_RESIZE = `resize${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_KEYDOWN_DISMISS = `keydown.dismiss${EVENT_KEY}`\n\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"offcanvas\"]'\n\nconst Default = {\n  backdrop: true,\n  keyboard: true,\n  scroll: false\n}\n\nconst DefaultType = {\n  backdrop: '(boolean|string)',\n  keyboard: 'boolean',\n  scroll: 'boolean'\n}\n\n/**\n * Class definition\n */\n\nclass Offcanvas extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._isShown = false\n    this._backdrop = this._initializeBackDrop()\n    this._focustrap = this._initializeFocusTrap()\n    this._addEventListeners()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget)\n  }\n\n  show(relatedTarget) {\n    if (this._isShown) {\n      return\n    }\n\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW, { relatedTarget })\n\n    if (showEvent.defaultPrevented) {\n      return\n    }\n\n    this._isShown = true\n    this._backdrop.show()\n\n    if (!this._config.scroll) {\n      new ScrollBarHelper().hide()\n    }\n\n    this._element.setAttribute('aria-modal', true)\n    this._element.setAttribute('role', 'dialog')\n    this._element.classList.add(CLASS_NAME_SHOWING)\n\n    const completeCallBack = () => {\n      if (!this._config.scroll || this._config.backdrop) {\n        this._focustrap.activate()\n      }\n\n      this._element.classList.add(CLASS_NAME_SHOW)\n      this._element.classList.remove(CLASS_NAME_SHOWING)\n      EventHandler.trigger(this._element, EVENT_SHOWN, { relatedTarget })\n    }\n\n    this._queueCallback(completeCallBack, this._element, true)\n  }\n\n  hide() {\n    if (!this._isShown) {\n      return\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE)\n\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    this._focustrap.deactivate()\n    this._element.blur()\n    this._isShown = false\n    this._element.classList.add(CLASS_NAME_HIDING)\n    this._backdrop.hide()\n\n    const completeCallback = () => {\n      this._element.classList.remove(CLASS_NAME_SHOW, CLASS_NAME_HIDING)\n      this._element.removeAttribute('aria-modal')\n      this._element.removeAttribute('role')\n\n      if (!this._config.scroll) {\n        new ScrollBarHelper().reset()\n      }\n\n      EventHandler.trigger(this._element, EVENT_HIDDEN)\n    }\n\n    this._queueCallback(completeCallback, this._element, true)\n  }\n\n  dispose() {\n    this._backdrop.dispose()\n    this._focustrap.deactivate()\n    super.dispose()\n  }\n\n  // Private\n  _initializeBackDrop() {\n    const clickCallback = () => {\n      if (this._config.backdrop === 'static') {\n        EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED)\n        return\n      }\n\n      this.hide()\n    }\n\n    // 'static' option will be translated to true, and booleans will keep their value\n    const isVisible = Boolean(this._config.backdrop)\n\n    return new Backdrop({\n      className: CLASS_NAME_BACKDROP,\n      isVisible,\n      isAnimated: true,\n      rootElement: this._element.parentNode,\n      clickCallback: isVisible ? clickCallback : null\n    })\n  }\n\n  _initializeFocusTrap() {\n    return new FocusTrap({\n      trapElement: this._element\n    })\n  }\n\n  _addEventListeners() {\n    EventHandler.on(this._element, EVENT_KEYDOWN_DISMISS, event => {\n      if (event.key !== ESCAPE_KEY) {\n        return\n      }\n\n      if (!this._config.keyboard) {\n        EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED)\n        return\n      }\n\n      this.hide()\n    })\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Offcanvas.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config](this)\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  const target = getElementFromSelector(this)\n\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault()\n  }\n\n  if (isDisabled(this)) {\n    return\n  }\n\n  EventHandler.one(target, EVENT_HIDDEN, () => {\n    // focus on trigger when it is closed\n    if (isVisible(this)) {\n      this.focus()\n    }\n  })\n\n  // avoid conflict when clicking a toggler of an offcanvas, while another is open\n  const alreadyOpen = SelectorEngine.findOne(OPEN_SELECTOR)\n  if (alreadyOpen && alreadyOpen !== target) {\n    Offcanvas.getInstance(alreadyOpen).hide()\n  }\n\n  const data = Offcanvas.getOrCreateInstance(target)\n  data.toggle(this)\n})\n\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  for (const selector of SelectorEngine.find(OPEN_SELECTOR)) {\n    Offcanvas.getOrCreateInstance(selector).show()\n  }\n})\n\nEventHandler.on(window, EVENT_RESIZE, () => {\n  for (const element of SelectorEngine.find('[aria-modal][class*=show][class*=offcanvas-]')) {\n    if (getComputedStyle(element).position !== 'fixed') {\n      Offcanvas.getOrCreateInstance(element).hide()\n    }\n  }\n})\n\nenableDismissTrigger(Offcanvas)\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Offcanvas)\n\nexport default Offcanvas\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): util/sanitizer.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst uriAttributes = new Set([\n  'background',\n  'cite',\n  'href',\n  'itemtype',\n  'longdesc',\n  'poster',\n  'src',\n  'xlink:href'\n])\n\nconst ARIA_ATTRIBUTE_PATTERN = /^aria-[\\w-]*$/i\n\n/**\n * A pattern that recognizes a commonly useful subset of URLs that are safe.\n *\n * Shout-out to Angular https://github.com/angular/angular/blob/12.2.x/packages/core/src/sanitization/url_sanitizer.ts\n */\nconst SAFE_URL_PATTERN = /^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i\n\n/**\n * A pattern that matches safe data URLs. Only matches image, video and audio types.\n *\n * Shout-out to Angular https://github.com/angular/angular/blob/12.2.x/packages/core/src/sanitization/url_sanitizer.ts\n */\nconst DATA_URL_PATTERN = /^data:(?:image\\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\\/(?:mpeg|mp4|ogg|webm)|audio\\/(?:mp3|oga|ogg|opus));base64,[\\d+/a-z]+=*$/i\n\nconst allowedAttribute = (attribute, allowedAttributeList) => {\n  const attributeName = attribute.nodeName.toLowerCase()\n\n  if (allowedAttributeList.includes(attributeName)) {\n    if (uriAttributes.has(attributeName)) {\n      return Boolean(SAFE_URL_PATTERN.test(attribute.nodeValue) || DATA_URL_PATTERN.test(attribute.nodeValue))\n    }\n\n    return true\n  }\n\n  // Check if a regular expression validates the attribute.\n  return allowedAttributeList.filter(attributeRegex => attributeRegex instanceof RegExp)\n    .some(regex => regex.test(attributeName))\n}\n\nexport const DefaultAllowlist = {\n  // Global attributes allowed on any supplied element below.\n  '*': ['class', 'dir', 'id', 'lang', 'role', ARIA_ATTRIBUTE_PATTERN],\n  a: ['target', 'href', 'title', 'rel'],\n  area: [],\n  b: [],\n  br: [],\n  col: [],\n  code: [],\n  div: [],\n  em: [],\n  hr: [],\n  h1: [],\n  h2: [],\n  h3: [],\n  h4: [],\n  h5: [],\n  h6: [],\n  i: [],\n  img: ['src', 'srcset', 'alt', 'title', 'width', 'height'],\n  li: [],\n  ol: [],\n  p: [],\n  pre: [],\n  s: [],\n  small: [],\n  span: [],\n  sub: [],\n  sup: [],\n  strong: [],\n  u: [],\n  ul: []\n}\n\nexport function sanitizeHtml(unsafeHtml, allowList, sanitizeFunction) {\n  if (!unsafeHtml.length) {\n    return unsafeHtml\n  }\n\n  if (sanitizeFunction && typeof sanitizeFunction === 'function') {\n    return sanitizeFunction(unsafeHtml)\n  }\n\n  const domParser = new window.DOMParser()\n  const createdDocument = domParser.parseFromString(unsafeHtml, 'text/html')\n  const elements = [].concat(...createdDocument.body.querySelectorAll('*'))\n\n  for (const element of elements) {\n    const elementName = element.nodeName.toLowerCase()\n\n    if (!Object.keys(allowList).includes(elementName)) {\n      element.remove()\n\n      continue\n    }\n\n    const attributeList = [].concat(...element.attributes)\n    const allowedAttributes = [].concat(allowList['*'] || [], allowList[elementName] || [])\n\n    for (const attribute of attributeList) {\n      if (!allowedAttribute(attribute, allowedAttributes)) {\n        element.removeAttribute(attribute.nodeName)\n      }\n    }\n  }\n\n  return createdDocument.body.innerHTML\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): util/template-factory.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { DefaultAllowlist, sanitizeHtml } from './sanitizer'\nimport { getElement, isElement } from '../util/index'\nimport SelectorEngine from '../dom/selector-engine'\nimport Config from './config'\n\n/**\n * Constants\n */\n\nconst NAME = 'TemplateFactory'\n\nconst Default = {\n  allowList: DefaultAllowlist,\n  content: {}, // { selector : text ,  selector2 : text2 , }\n  extraClass: '',\n  html: false,\n  sanitize: true,\n  sanitizeFn: null,\n  template: '<div></div>'\n}\n\nconst DefaultType = {\n  allowList: 'object',\n  content: 'object',\n  extraClass: '(string|function)',\n  html: 'boolean',\n  sanitize: 'boolean',\n  sanitizeFn: '(null|function)',\n  template: 'string'\n}\n\nconst DefaultContentType = {\n  entry: '(string|element|function|null)',\n  selector: '(string|element)'\n}\n\n/**\n * Class definition\n */\n\nclass TemplateFactory extends Config {\n  constructor(config) {\n    super()\n    this._config = this._getConfig(config)\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  getContent() {\n    return Object.values(this._config.content)\n      .map(config => this._resolvePossibleFunction(config))\n      .filter(Boolean)\n  }\n\n  hasContent() {\n    return this.getContent().length > 0\n  }\n\n  changeContent(content) {\n    this._checkContent(content)\n    this._config.content = { ...this._config.content, ...content }\n    return this\n  }\n\n  toHtml() {\n    const templateWrapper = document.createElement('div')\n    templateWrapper.innerHTML = this._maybeSanitize(this._config.template)\n\n    for (const [selector, text] of Object.entries(this._config.content)) {\n      this._setContent(templateWrapper, text, selector)\n    }\n\n    const template = templateWrapper.children[0]\n    const extraClass = this._resolvePossibleFunction(this._config.extraClass)\n\n    if (extraClass) {\n      template.classList.add(...extraClass.split(' '))\n    }\n\n    return template\n  }\n\n  // Private\n  _typeCheckConfig(config) {\n    super._typeCheckConfig(config)\n    this._checkContent(config.content)\n  }\n\n  _checkContent(arg) {\n    for (const [selector, content] of Object.entries(arg)) {\n      super._typeCheckConfig({ selector, entry: content }, DefaultContentType)\n    }\n  }\n\n  _setContent(template, content, selector) {\n    const templateElement = SelectorEngine.findOne(selector, template)\n\n    if (!templateElement) {\n      return\n    }\n\n    content = this._resolvePossibleFunction(content)\n\n    if (!content) {\n      templateElement.remove()\n      return\n    }\n\n    if (isElement(content)) {\n      this._putElementInTemplate(getElement(content), templateElement)\n      return\n    }\n\n    if (this._config.html) {\n      templateElement.innerHTML = this._maybeSanitize(content)\n      return\n    }\n\n    templateElement.textContent = content\n  }\n\n  _maybeSanitize(arg) {\n    return this._config.sanitize ? sanitizeHtml(arg, this._config.allowList, this._config.sanitizeFn) : arg\n  }\n\n  _resolvePossibleFunction(arg) {\n    return typeof arg === 'function' ? arg(this) : arg\n  }\n\n  _putElementInTemplate(element, templateElement) {\n    if (this._config.html) {\n      templateElement.innerHTML = ''\n      templateElement.append(element)\n      return\n    }\n\n    templateElement.textContent = element.textContent\n  }\n}\n\nexport default TemplateFactory\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): tooltip.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport * as Popper from '@popperjs/core'\nimport { defineJQueryPlugin, findShadowRoot, getElement, getUID, isRTL, noop } from './util/index'\nimport { DefaultAllowlist } from './util/sanitizer'\nimport EventHandler from './dom/event-handler'\nimport Manipulator from './dom/manipulator'\nimport BaseComponent from './base-component'\nimport TemplateFactory from './util/template-factory'\n\n/**\n * Constants\n */\n\nconst NAME = 'tooltip'\nconst DISALLOWED_ATTRIBUTES = new Set(['sanitize', 'allowList', 'sanitizeFn'])\n\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_MODAL = 'modal'\nconst CLASS_NAME_SHOW = 'show'\n\nconst SELECTOR_TOOLTIP_INNER = '.tooltip-inner'\nconst SELECTOR_MODAL = `.${CLASS_NAME_MODAL}`\n\nconst EVENT_MODAL_HIDE = 'hide.bs.modal'\n\nconst TRIGGER_HOVER = 'hover'\nconst TRIGGER_FOCUS = 'focus'\nconst TRIGGER_CLICK = 'click'\nconst TRIGGER_MANUAL = 'manual'\n\nconst EVENT_HIDE = 'hide'\nconst EVENT_HIDDEN = 'hidden'\nconst EVENT_SHOW = 'show'\nconst EVENT_SHOWN = 'shown'\nconst EVENT_INSERTED = 'inserted'\nconst EVENT_CLICK = 'click'\nconst EVENT_FOCUSIN = 'focusin'\nconst EVENT_FOCUSOUT = 'focusout'\nconst EVENT_MOUSEENTER = 'mouseenter'\nconst EVENT_MOUSELEAVE = 'mouseleave'\n\nconst AttachmentMap = {\n  AUTO: 'auto',\n  TOP: 'top',\n  RIGHT: isRTL() ? 'left' : 'right',\n  BOTTOM: 'bottom',\n  LEFT: isRTL() ? 'right' : 'left'\n}\n\nconst Default = {\n  allowList: DefaultAllowlist,\n  animation: true,\n  boundary: 'clippingParents',\n  container: false,\n  customClass: '',\n  delay: 0,\n  fallbackPlacements: ['top', 'right', 'bottom', 'left'],\n  html: false,\n  offset: [0, 0],\n  placement: 'top',\n  popperConfig: null,\n  sanitize: true,\n  sanitizeFn: null,\n  selector: false,\n  template: '<div class=\"tooltip\" role=\"tooltip\">' +\n            '<div class=\"tooltip-arrow\"></div>' +\n            '<div class=\"tooltip-inner\"></div>' +\n            '</div>',\n  title: '',\n  trigger: 'hover focus'\n}\n\nconst DefaultType = {\n  allowList: 'object',\n  animation: 'boolean',\n  boundary: '(string|element)',\n  container: '(string|element|boolean)',\n  customClass: '(string|function)',\n  delay: '(number|object)',\n  fallbackPlacements: 'array',\n  html: 'boolean',\n  offset: '(array|string|function)',\n  placement: '(string|function)',\n  popperConfig: '(null|object|function)',\n  sanitize: 'boolean',\n  sanitizeFn: '(null|function)',\n  selector: '(string|boolean)',\n  template: 'string',\n  title: '(string|element|function)',\n  trigger: 'string'\n}\n\n/**\n * Class definition\n */\n\nclass Tooltip extends BaseComponent {\n  constructor(element, config) {\n    if (typeof Popper === 'undefined') {\n      throw new TypeError('Bootstrap\\'s tooltips require Popper (https://popper.js.org)')\n    }\n\n    super(element, config)\n\n    // Private\n    this._isEnabled = true\n    this._timeout = 0\n    this._isHovered = false\n    this._activeTrigger = {}\n    this._popper = null\n    this._templateFactory = null\n    this._newContent = null\n\n    // Protected\n    this.tip = null\n\n    this._setListeners()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  enable() {\n    this._isEnabled = true\n  }\n\n  disable() {\n    this._isEnabled = false\n  }\n\n  toggleEnabled() {\n    this._isEnabled = !this._isEnabled\n  }\n\n  toggle(event) {\n    if (!this._isEnabled) {\n      return\n    }\n\n    if (event) {\n      const context = this._initializeOnDelegatedTarget(event)\n\n      context._activeTrigger.click = !context._activeTrigger.click\n\n      if (context._isWithActiveTrigger()) {\n        context._enter()\n      } else {\n        context._leave()\n      }\n\n      return\n    }\n\n    if (this._isShown()) {\n      this._leave()\n      return\n    }\n\n    this._enter()\n  }\n\n  dispose() {\n    clearTimeout(this._timeout)\n\n    EventHandler.off(this._element.closest(SELECTOR_MODAL), EVENT_MODAL_HIDE, this._hideModalHandler)\n\n    if (this.tip) {\n      this.tip.remove()\n    }\n\n    this._disposePopper()\n    super.dispose()\n  }\n\n  show() {\n    if (this._element.style.display === 'none') {\n      throw new Error('Please use show on visible elements')\n    }\n\n    if (!(this._isWithContent() && this._isEnabled)) {\n      return\n    }\n\n    const showEvent = EventHandler.trigger(this._element, this.constructor.eventName(EVENT_SHOW))\n    const shadowRoot = findShadowRoot(this._element)\n    const isInTheDom = (shadowRoot || this._element.ownerDocument.documentElement).contains(this._element)\n\n    if (showEvent.defaultPrevented || !isInTheDom) {\n      return\n    }\n\n    // todo v6 remove this OR make it optional\n    if (this.tip) {\n      this.tip.remove()\n      this.tip = null\n    }\n\n    const tip = this._getTipElement()\n\n    this._element.setAttribute('aria-describedby', tip.getAttribute('id'))\n\n    const { container } = this._config\n\n    if (!this._element.ownerDocument.documentElement.contains(this.tip)) {\n      container.append(tip)\n      EventHandler.trigger(this._element, this.constructor.eventName(EVENT_INSERTED))\n    }\n\n    if (this._popper) {\n      this._popper.update()\n    } else {\n      this._popper = this._createPopper(tip)\n    }\n\n    tip.classList.add(CLASS_NAME_SHOW)\n\n    // If this is a touch-enabled device we add extra\n    // empty mouseover listeners to the body's immediate children;\n    // only needed because of broken event delegation on iOS\n    // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n    if ('ontouchstart' in document.documentElement) {\n      for (const element of [].concat(...document.body.children)) {\n        EventHandler.on(element, 'mouseover', noop)\n      }\n    }\n\n    const complete = () => {\n      const previousHoverState = this._isHovered\n\n      this._isHovered = false\n      EventHandler.trigger(this._element, this.constructor.eventName(EVENT_SHOWN))\n\n      if (previousHoverState) {\n        this._leave()\n      }\n    }\n\n    this._queueCallback(complete, this.tip, this._isAnimated())\n  }\n\n  hide() {\n    if (!this._isShown()) {\n      return\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, this.constructor.eventName(EVENT_HIDE))\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    const tip = this._getTipElement()\n    tip.classList.remove(CLASS_NAME_SHOW)\n\n    // If this is a touch-enabled device we remove the extra\n    // empty mouseover listeners we added for iOS support\n    if ('ontouchstart' in document.documentElement) {\n      for (const element of [].concat(...document.body.children)) {\n        EventHandler.off(element, 'mouseover', noop)\n      }\n    }\n\n    this._activeTrigger[TRIGGER_CLICK] = false\n    this._activeTrigger[TRIGGER_FOCUS] = false\n    this._activeTrigger[TRIGGER_HOVER] = false\n    this._isHovered = false\n\n    const complete = () => {\n      if (this._isWithActiveTrigger()) {\n        return\n      }\n\n      if (!this._isHovered) {\n        tip.remove()\n      }\n\n      this._element.removeAttribute('aria-describedby')\n      EventHandler.trigger(this._element, this.constructor.eventName(EVENT_HIDDEN))\n\n      this._disposePopper()\n    }\n\n    this._queueCallback(complete, this.tip, this._isAnimated())\n  }\n\n  update() {\n    if (this._popper) {\n      this._popper.update()\n    }\n  }\n\n  // Protected\n  _isWithContent() {\n    return Boolean(this._getTitle())\n  }\n\n  _getTipElement() {\n    if (!this.tip) {\n      this.tip = this._createTipElement(this._newContent || this._getContentForTemplate())\n    }\n\n    return this.tip\n  }\n\n  _createTipElement(content) {\n    const tip = this._getTemplateFactory(content).toHtml()\n\n    // todo: remove this check on v6\n    if (!tip) {\n      return null\n    }\n\n    tip.classList.remove(CLASS_NAME_FADE, CLASS_NAME_SHOW)\n    // todo: on v6 the following can be achieved with CSS only\n    tip.classList.add(`bs-${this.constructor.NAME}-auto`)\n\n    const tipId = getUID(this.constructor.NAME).toString()\n\n    tip.setAttribute('id', tipId)\n\n    if (this._isAnimated()) {\n      tip.classList.add(CLASS_NAME_FADE)\n    }\n\n    return tip\n  }\n\n  setContent(content) {\n    this._newContent = content\n    if (this._isShown()) {\n      this._disposePopper()\n      this.show()\n    }\n  }\n\n  _getTemplateFactory(content) {\n    if (this._templateFactory) {\n      this._templateFactory.changeContent(content)\n    } else {\n      this._templateFactory = new TemplateFactory({\n        ...this._config,\n        // the `content` var has to be after `this._config`\n        // to override config.content in case of popover\n        content,\n        extraClass: this._resolvePossibleFunction(this._config.customClass)\n      })\n    }\n\n    return this._templateFactory\n  }\n\n  _getContentForTemplate() {\n    return {\n      [SELECTOR_TOOLTIP_INNER]: this._getTitle()\n    }\n  }\n\n  _getTitle() {\n    return this._resolvePossibleFunction(this._config.title) || this._config.originalTitle\n  }\n\n  // Private\n  _initializeOnDelegatedTarget(event) {\n    return this.constructor.getOrCreateInstance(event.delegateTarget, this._getDelegateConfig())\n  }\n\n  _isAnimated() {\n    return this._config.animation || (this.tip && this.tip.classList.contains(CLASS_NAME_FADE))\n  }\n\n  _isShown() {\n    return this.tip && this.tip.classList.contains(CLASS_NAME_SHOW)\n  }\n\n  _createPopper(tip) {\n    const placement = typeof this._config.placement === 'function' ?\n      this._config.placement.call(this, tip, this._element) :\n      this._config.placement\n    const attachment = AttachmentMap[placement.toUpperCase()]\n    return Popper.createPopper(this._element, tip, this._getPopperConfig(attachment))\n  }\n\n  _getOffset() {\n    const { offset } = this._config\n\n    if (typeof offset === 'string') {\n      return offset.split(',').map(value => Number.parseInt(value, 10))\n    }\n\n    if (typeof offset === 'function') {\n      return popperData => offset(popperData, this._element)\n    }\n\n    return offset\n  }\n\n  _resolvePossibleFunction(arg) {\n    return typeof arg === 'function' ? arg.call(this._element) : arg\n  }\n\n  _getPopperConfig(attachment) {\n    const defaultBsPopperConfig = {\n      placement: attachment,\n      modifiers: [\n        {\n          name: 'flip',\n          options: {\n            fallbackPlacements: this._config.fallbackPlacements\n          }\n        },\n        {\n          name: 'offset',\n          options: {\n            offset: this._getOffset()\n          }\n        },\n        {\n          name: 'preventOverflow',\n          options: {\n            boundary: this._config.boundary\n          }\n        },\n        {\n          name: 'arrow',\n          options: {\n            element: `.${this.constructor.NAME}-arrow`\n          }\n        },\n        {\n          name: 'preSetPlacement',\n          enabled: true,\n          phase: 'beforeMain',\n          fn: data => {\n            // Pre-set Popper's placement attribute in order to read the arrow sizes properly.\n            // Otherwise, Popper mixes up the width and height dimensions since the initial arrow style is for top placement\n            this._getTipElement().setAttribute('data-popper-placement', data.state.placement)\n          }\n        }\n      ]\n    }\n\n    return {\n      ...defaultBsPopperConfig,\n      ...(typeof this._config.popperConfig === 'function' ? this._config.popperConfig(defaultBsPopperConfig) : this._config.popperConfig)\n    }\n  }\n\n  _setListeners() {\n    const triggers = this._config.trigger.split(' ')\n\n    for (const trigger of triggers) {\n      if (trigger === 'click') {\n        EventHandler.on(this._element, this.constructor.eventName(EVENT_CLICK), this._config.selector, event => this.toggle(event))\n      } else if (trigger !== TRIGGER_MANUAL) {\n        const eventIn = trigger === TRIGGER_HOVER ?\n          this.constructor.eventName(EVENT_MOUSEENTER) :\n          this.constructor.eventName(EVENT_FOCUSIN)\n        const eventOut = trigger === TRIGGER_HOVER ?\n          this.constructor.eventName(EVENT_MOUSELEAVE) :\n          this.constructor.eventName(EVENT_FOCUSOUT)\n\n        EventHandler.on(this._element, eventIn, this._config.selector, event => {\n          const context = this._initializeOnDelegatedTarget(event)\n          context._activeTrigger[event.type === 'focusin' ? TRIGGER_FOCUS : TRIGGER_HOVER] = true\n          context._enter()\n        })\n        EventHandler.on(this._element, eventOut, this._config.selector, event => {\n          const context = this._initializeOnDelegatedTarget(event)\n          context._activeTrigger[event.type === 'focusout' ? TRIGGER_FOCUS : TRIGGER_HOVER] =\n            context._element.contains(event.relatedTarget)\n\n          context._leave()\n        })\n      }\n    }\n\n    this._hideModalHandler = () => {\n      if (this._element) {\n        this.hide()\n      }\n    }\n\n    EventHandler.on(this._element.closest(SELECTOR_MODAL), EVENT_MODAL_HIDE, this._hideModalHandler)\n\n    if (this._config.selector) {\n      this._config = {\n        ...this._config,\n        trigger: 'manual',\n        selector: ''\n      }\n    } else {\n      this._fixTitle()\n    }\n  }\n\n  _fixTitle() {\n    const title = this._config.originalTitle\n\n    if (!title) {\n      return\n    }\n\n    if (!this._element.getAttribute('aria-label') && !this._element.textContent.trim()) {\n      this._element.setAttribute('aria-label', title)\n    }\n\n    this._element.removeAttribute('title')\n  }\n\n  _enter() {\n    if (this._isShown() || this._isHovered) {\n      this._isHovered = true\n      return\n    }\n\n    this._isHovered = true\n\n    this._setTimeout(() => {\n      if (this._isHovered) {\n        this.show()\n      }\n    }, this._config.delay.show)\n  }\n\n  _leave() {\n    if (this._isWithActiveTrigger()) {\n      return\n    }\n\n    this._isHovered = false\n\n    this._setTimeout(() => {\n      if (!this._isHovered) {\n        this.hide()\n      }\n    }, this._config.delay.hide)\n  }\n\n  _setTimeout(handler, timeout) {\n    clearTimeout(this._timeout)\n    this._timeout = setTimeout(handler, timeout)\n  }\n\n  _isWithActiveTrigger() {\n    return Object.values(this._activeTrigger).includes(true)\n  }\n\n  _getConfig(config) {\n    const dataAttributes = Manipulator.getDataAttributes(this._element)\n\n    for (const dataAttribute of Object.keys(dataAttributes)) {\n      if (DISALLOWED_ATTRIBUTES.has(dataAttribute)) {\n        delete dataAttributes[dataAttribute]\n      }\n    }\n\n    config = {\n      ...dataAttributes,\n      ...(typeof config === 'object' && config ? config : {})\n    }\n    config = this._mergeConfigObj(config)\n    config = this._configAfterMerge(config)\n    this._typeCheckConfig(config)\n    return config\n  }\n\n  _configAfterMerge(config) {\n    config.container = config.container === false ? document.body : getElement(config.container)\n\n    if (typeof config.delay === 'number') {\n      config.delay = {\n        show: config.delay,\n        hide: config.delay\n      }\n    }\n\n    config.originalTitle = this._element.getAttribute('title') || ''\n    if (typeof config.title === 'number') {\n      config.title = config.title.toString()\n    }\n\n    if (typeof config.content === 'number') {\n      config.content = config.content.toString()\n    }\n\n    return config\n  }\n\n  _getDelegateConfig() {\n    const config = {}\n\n    for (const key in this._config) {\n      if (this.constructor.Default[key] !== this._config[key]) {\n        config[key] = this._config[key]\n      }\n    }\n\n    // In the future can be replaced with:\n    // const keysWithDifferentValues = Object.entries(this._config).filter(entry => this.constructor.Default[entry[0]] !== this._config[entry[0]])\n    // `Object.fromEntries(keysWithDifferentValues)`\n    return config\n  }\n\n  _disposePopper() {\n    if (this._popper) {\n      this._popper.destroy()\n      this._popper = null\n    }\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Tooltip.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    })\n  }\n}\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Tooltip)\n\nexport default Tooltip\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): popover.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { defineJQueryPlugin } from './util/index'\nimport Tooltip from './tooltip'\n\n/**\n * Constants\n */\n\nconst NAME = 'popover'\n\nconst SELECTOR_TITLE = '.popover-header'\nconst SELECTOR_CONTENT = '.popover-body'\n\nconst Default = {\n  ...Tooltip.Default,\n  content: '',\n  offset: [0, 8],\n  placement: 'right',\n  template: '<div class=\"popover\" role=\"tooltip\">' +\n    '<div class=\"popover-arrow\"></div>' +\n    '<h3 class=\"popover-header\"></h3>' +\n    '<div class=\"popover-body\"></div>' +\n    '</div>',\n  trigger: 'click'\n}\n\nconst DefaultType = {\n  ...Tooltip.DefaultType,\n  content: '(null|string|element|function)'\n}\n\n/**\n * Class definition\n */\n\nclass Popover extends Tooltip {\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Overrides\n  _isWithContent() {\n    return this._getTitle() || this._getContent()\n  }\n\n  // Private\n  _getContentForTemplate() {\n    return {\n      [SELECTOR_TITLE]: this._getTitle(),\n      [SELECTOR_CONTENT]: this._getContent()\n    }\n  }\n\n  _getContent() {\n    return this._resolvePossibleFunction(this._config.content)\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Popover.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    })\n  }\n}\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Popover)\n\nexport default Popover\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): scrollspy.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { defineJQueryPlugin, getElement, isDisabled, isVisible } from './util/index'\nimport EventHandler from './dom/event-handler'\nimport SelectorEngine from './dom/selector-engine'\nimport BaseComponent from './base-component'\n\n/**\n * Constants\n */\n\nconst NAME = 'scrollspy'\nconst DATA_KEY = 'bs.scrollspy'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst EVENT_ACTIVATE = `activate${EVENT_KEY}`\nconst EVENT_CLICK = `click${EVENT_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_DROPDOWN_ITEM = 'dropdown-item'\nconst CLASS_NAME_ACTIVE = 'active'\n\nconst SELECTOR_DATA_SPY = '[data-bs-spy=\"scroll\"]'\nconst SELECTOR_TARGET_LINKS = '[href]'\nconst SELECTOR_NAV_LIST_GROUP = '.nav, .list-group'\nconst SELECTOR_NAV_LINKS = '.nav-link'\nconst SELECTOR_NAV_ITEMS = '.nav-item'\nconst SELECTOR_LIST_ITEMS = '.list-group-item'\nconst SELECTOR_LINK_ITEMS = `${SELECTOR_NAV_LINKS}, ${SELECTOR_NAV_ITEMS} > ${SELECTOR_NAV_LINKS}, ${SELECTOR_LIST_ITEMS}`\nconst SELECTOR_DROPDOWN = '.dropdown'\nconst SELECTOR_DROPDOWN_TOGGLE = '.dropdown-toggle'\n\nconst Default = {\n  offset: null, // TODO: v6 @deprecated, keep it for backwards compatibility reasons\n  rootMargin: '0px 0px -25%',\n  smoothScroll: false,\n  target: null\n}\n\nconst DefaultType = {\n  offset: '(number|null)', // TODO v6 @deprecated, keep it for backwards compatibility reasons\n  rootMargin: 'string',\n  smoothScroll: 'boolean',\n  target: 'element'\n}\n\n/**\n * Class definition\n */\n\nclass ScrollSpy extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    // this._element is the observablesContainer and config.target the menu links wrapper\n    this._targetLinks = new Map()\n    this._observableSections = new Map()\n    this._rootElement = getComputedStyle(this._element).overflowY === 'visible' ? null : this._element\n    this._activeTarget = null\n    this._observer = null\n    this._previousScrollData = {\n      visibleEntryTop: 0,\n      parentScrollTop: 0\n    }\n    this.refresh() // initialize\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  refresh() {\n    this._initializeTargetsAndObservables()\n    this._maybeEnableSmoothScroll()\n\n    if (this._observer) {\n      this._observer.disconnect()\n    } else {\n      this._observer = this._getNewObserver()\n    }\n\n    for (const section of this._observableSections.values()) {\n      this._observer.observe(section)\n    }\n  }\n\n  dispose() {\n    this._observer.disconnect()\n    super.dispose()\n  }\n\n  // Private\n  _configAfterMerge(config) {\n    // TODO: on v6 target should be given explicitly & remove the {target: 'ss-target'} case\n    config.target = getElement(config.target) || document.body\n\n    return config\n  }\n\n  _maybeEnableSmoothScroll() {\n    if (!this._config.smoothScroll) {\n      return\n    }\n\n    // unregister any previous listeners\n    EventHandler.off(this._config.target, EVENT_CLICK)\n\n    EventHandler.on(this._config.target, EVENT_CLICK, SELECTOR_TARGET_LINKS, event => {\n      const observableSection = this._observableSections.get(event.target.hash)\n      if (observableSection) {\n        event.preventDefault()\n        const root = this._rootElement || window\n        const height = observableSection.offsetTop - this._element.offsetTop\n        if (root.scrollTo) {\n          root.scrollTo({ top: height, behavior: 'smooth' })\n          return\n        }\n\n        // Chrome 60 doesn't support `scrollTo`\n        root.scrollTop = height\n      }\n    })\n  }\n\n  _getNewObserver() {\n    const options = {\n      root: this._rootElement,\n      threshold: [0.1, 0.5, 1],\n      rootMargin: this._getRootMargin()\n    }\n\n    return new IntersectionObserver(entries => this._observerCallback(entries), options)\n  }\n\n  // The logic of selection\n  _observerCallback(entries) {\n    const targetElement = entry => this._targetLinks.get(`#${entry.target.id}`)\n    const activate = entry => {\n      this._previousScrollData.visibleEntryTop = entry.target.offsetTop\n      this._process(targetElement(entry))\n    }\n\n    const parentScrollTop = (this._rootElement || document.documentElement).scrollTop\n    const userScrollsDown = parentScrollTop >= this._previousScrollData.parentScrollTop\n    this._previousScrollData.parentScrollTop = parentScrollTop\n\n    for (const entry of entries) {\n      if (!entry.isIntersecting) {\n        this._activeTarget = null\n        this._clearActiveClass(targetElement(entry))\n\n        continue\n      }\n\n      const entryIsLowerThanPrevious = entry.target.offsetTop >= this._previousScrollData.visibleEntryTop\n      // if we are scrolling down, pick the bigger offsetTop\n      if (userScrollsDown && entryIsLowerThanPrevious) {\n        activate(entry)\n        // if parent isn't scrolled, let's keep the first visible item, breaking the iteration\n        if (!parentScrollTop) {\n          return\n        }\n\n        continue\n      }\n\n      // if we are scrolling up, pick the smallest offsetTop\n      if (!userScrollsDown && !entryIsLowerThanPrevious) {\n        activate(entry)\n      }\n    }\n  }\n\n  // TODO: v6 Only for backwards compatibility reasons. Use rootMargin only\n  _getRootMargin() {\n    return this._config.offset ? `${this._config.offset}px 0px -30%` : this._config.rootMargin\n  }\n\n  _initializeTargetsAndObservables() {\n    this._targetLinks = new Map()\n    this._observableSections = new Map()\n\n    const targetLinks = SelectorEngine.find(SELECTOR_TARGET_LINKS, this._config.target)\n\n    for (const anchor of targetLinks) {\n      // ensure that the anchor has an id and is not disabled\n      if (!anchor.hash || isDisabled(anchor)) {\n        continue\n      }\n\n      const observableSection = SelectorEngine.findOne(anchor.hash, this._element)\n\n      // ensure that the observableSection exists & is visible\n      if (isVisible(observableSection)) {\n        this._targetLinks.set(anchor.hash, anchor)\n        this._observableSections.set(anchor.hash, observableSection)\n      }\n    }\n  }\n\n  _process(target) {\n    if (this._activeTarget === target) {\n      return\n    }\n\n    this._clearActiveClass(this._config.target)\n    this._activeTarget = target\n    target.classList.add(CLASS_NAME_ACTIVE)\n    this._activateParents(target)\n\n    EventHandler.trigger(this._element, EVENT_ACTIVATE, { relatedTarget: target })\n  }\n\n  _activateParents(target) {\n    // Activate dropdown parents\n    if (target.classList.contains(CLASS_NAME_DROPDOWN_ITEM)) {\n      SelectorEngine.findOne(SELECTOR_DROPDOWN_TOGGLE, target.closest(SELECTOR_DROPDOWN))\n        .classList.add(CLASS_NAME_ACTIVE)\n      return\n    }\n\n    for (const listGroup of SelectorEngine.parents(target, SELECTOR_NAV_LIST_GROUP)) {\n      // Set triggered links parents as active\n      // With both <ul> and <nav> markup a parent is the previous sibling of any nav ancestor\n      for (const item of SelectorEngine.prev(listGroup, SELECTOR_LINK_ITEMS)) {\n        item.classList.add(CLASS_NAME_ACTIVE)\n      }\n    }\n  }\n\n  _clearActiveClass(parent) {\n    parent.classList.remove(CLASS_NAME_ACTIVE)\n\n    const activeNodes = SelectorEngine.find(`${SELECTOR_TARGET_LINKS}.${CLASS_NAME_ACTIVE}`, parent)\n    for (const node of activeNodes) {\n      node.classList.remove(CLASS_NAME_ACTIVE)\n    }\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = ScrollSpy.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  for (const spy of SelectorEngine.find(SELECTOR_DATA_SPY)) {\n    ScrollSpy.getOrCreateInstance(spy)\n  }\n})\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(ScrollSpy)\n\nexport default ScrollSpy\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): tab.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { defineJQueryPlugin, getElementFromSelector, getNextActiveElement, isDisabled } from './util/index'\nimport EventHandler from './dom/event-handler'\nimport SelectorEngine from './dom/selector-engine'\nimport BaseComponent from './base-component'\n\n/**\n * Constants\n */\n\nconst NAME = 'tab'\nconst DATA_KEY = 'bs.tab'\nconst EVENT_KEY = `.${DATA_KEY}`\n\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}`\nconst EVENT_KEYDOWN = `keydown${EVENT_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}`\n\nconst ARROW_LEFT_KEY = 'ArrowLeft'\nconst ARROW_RIGHT_KEY = 'ArrowRight'\nconst ARROW_UP_KEY = 'ArrowUp'\nconst ARROW_DOWN_KEY = 'ArrowDown'\n\nconst CLASS_NAME_ACTIVE = 'active'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_DROPDOWN = 'dropdown'\n\nconst SELECTOR_DROPDOWN_TOGGLE = '.dropdown-toggle'\nconst SELECTOR_DROPDOWN_MENU = '.dropdown-menu'\nconst SELECTOR_DROPDOWN_ITEM = '.dropdown-item'\nconst NOT_SELECTOR_DROPDOWN_TOGGLE = ':not(.dropdown-toggle)'\n\nconst SELECTOR_TAB_PANEL = '.list-group, .nav, [role=\"tablist\"]'\nconst SELECTOR_OUTER = '.nav-item, .list-group-item'\nconst SELECTOR_INNER = `.nav-link${NOT_SELECTOR_DROPDOWN_TOGGLE}, .list-group-item${NOT_SELECTOR_DROPDOWN_TOGGLE}, [role=\"tab\"]${NOT_SELECTOR_DROPDOWN_TOGGLE}`\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"tab\"], [data-bs-toggle=\"pill\"], [data-bs-toggle=\"list\"]' // todo:v6: could be only `tab`\nconst SELECTOR_INNER_ELEM = `${SELECTOR_INNER}, ${SELECTOR_DATA_TOGGLE}`\n\nconst SELECTOR_DATA_TOGGLE_ACTIVE = `.${CLASS_NAME_ACTIVE}[data-bs-toggle=\"tab\"], .${CLASS_NAME_ACTIVE}[data-bs-toggle=\"pill\"], .${CLASS_NAME_ACTIVE}[data-bs-toggle=\"list\"]`\n\n/**\n * Class definition\n */\n\nclass Tab extends BaseComponent {\n  constructor(element) {\n    super(element)\n    this._parent = this._element.closest(SELECTOR_TAB_PANEL)\n\n    if (!this._parent) {\n      return\n      // todo: should Throw exception on v6\n      // throw new TypeError(`${element.outerHTML} has not a valid parent ${SELECTOR_INNER_ELEM}`)\n    }\n\n    // Set up initial aria attributes\n    this._setInitialAttributes(this._parent, this._getChildren())\n\n    EventHandler.on(this._element, EVENT_KEYDOWN, event => this._keydown(event))\n  }\n\n  // Getters\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  show() { // Shows this elem and deactivate the active sibling if exists\n    const innerElem = this._element\n    if (this._elemIsActive(innerElem)) {\n      return\n    }\n\n    // Search for active tab on same parent to deactivate it\n    const active = this._getActiveElem()\n\n    const hideEvent = active ?\n      EventHandler.trigger(active, EVENT_HIDE, { relatedTarget: innerElem }) :\n      null\n\n    const showEvent = EventHandler.trigger(innerElem, EVENT_SHOW, { relatedTarget: active })\n\n    if (showEvent.defaultPrevented || (hideEvent && hideEvent.defaultPrevented)) {\n      return\n    }\n\n    this._deactivate(active, innerElem)\n    this._activate(innerElem, active)\n  }\n\n  // Private\n  _activate(element, relatedElem) {\n    if (!element) {\n      return\n    }\n\n    element.classList.add(CLASS_NAME_ACTIVE)\n\n    this._activate(getElementFromSelector(element)) // Search and activate/show the proper section\n\n    const complete = () => {\n      if (element.getAttribute('role') !== 'tab') {\n        element.classList.add(CLASS_NAME_SHOW)\n        return\n      }\n\n      element.focus()\n      element.removeAttribute('tabindex')\n      element.setAttribute('aria-selected', true)\n      this._toggleDropDown(element, true)\n      EventHandler.trigger(element, EVENT_SHOWN, {\n        relatedTarget: relatedElem\n      })\n    }\n\n    this._queueCallback(complete, element, element.classList.contains(CLASS_NAME_FADE))\n  }\n\n  _deactivate(element, relatedElem) {\n    if (!element) {\n      return\n    }\n\n    element.classList.remove(CLASS_NAME_ACTIVE)\n    element.blur()\n\n    this._deactivate(getElementFromSelector(element)) // Search and deactivate the shown section too\n\n    const complete = () => {\n      if (element.getAttribute('role') !== 'tab') {\n        element.classList.remove(CLASS_NAME_SHOW)\n        return\n      }\n\n      element.setAttribute('aria-selected', false)\n      element.setAttribute('tabindex', '-1')\n      this._toggleDropDown(element, false)\n      EventHandler.trigger(element, EVENT_HIDDEN, { relatedTarget: relatedElem })\n    }\n\n    this._queueCallback(complete, element, element.classList.contains(CLASS_NAME_FADE))\n  }\n\n  _keydown(event) {\n    if (!([ARROW_LEFT_KEY, ARROW_RIGHT_KEY, ARROW_UP_KEY, ARROW_DOWN_KEY].includes(event.key))) {\n      return\n    }\n\n    event.stopPropagation()// stopPropagation/preventDefault both added to support up/down keys without scrolling the page\n    event.preventDefault()\n    const isNext = [ARROW_RIGHT_KEY, ARROW_DOWN_KEY].includes(event.key)\n    const nextActiveElement = getNextActiveElement(this._getChildren().filter(element => !isDisabled(element)), event.target, isNext, true)\n\n    if (nextActiveElement) {\n      Tab.getOrCreateInstance(nextActiveElement).show()\n    }\n  }\n\n  _getChildren() { // collection of inner elements\n    return SelectorEngine.find(SELECTOR_INNER_ELEM, this._parent)\n  }\n\n  _getActiveElem() {\n    return this._getChildren().find(child => this._elemIsActive(child)) || null\n  }\n\n  _setInitialAttributes(parent, children) {\n    this._setAttributeIfNotExists(parent, 'role', 'tablist')\n\n    for (const child of children) {\n      this._setInitialAttributesOnChild(child)\n    }\n  }\n\n  _setInitialAttributesOnChild(child) {\n    child = this._getInnerElement(child)\n    const isActive = this._elemIsActive(child)\n    const outerElem = this._getOuterElement(child)\n    child.setAttribute('aria-selected', isActive)\n\n    if (outerElem !== child) {\n      this._setAttributeIfNotExists(outerElem, 'role', 'presentation')\n    }\n\n    if (!isActive) {\n      child.setAttribute('tabindex', '-1')\n    }\n\n    this._setAttributeIfNotExists(child, 'role', 'tab')\n\n    // set attributes to the related panel too\n    this._setInitialAttributesOnTargetPanel(child)\n  }\n\n  _setInitialAttributesOnTargetPanel(child) {\n    const target = getElementFromSelector(child)\n\n    if (!target) {\n      return\n    }\n\n    this._setAttributeIfNotExists(target, 'role', 'tabpanel')\n\n    if (child.id) {\n      this._setAttributeIfNotExists(target, 'aria-labelledby', `#${child.id}`)\n    }\n  }\n\n  _toggleDropDown(element, open) {\n    const outerElem = this._getOuterElement(element)\n    if (!outerElem.classList.contains(CLASS_DROPDOWN)) {\n      return\n    }\n\n    const toggle = (selector, className) => {\n      const element = SelectorEngine.findOne(selector, outerElem)\n      if (element) {\n        element.classList.toggle(className, open)\n      }\n    }\n\n    toggle(SELECTOR_DROPDOWN_TOGGLE, CLASS_NAME_ACTIVE)\n    toggle(SELECTOR_DROPDOWN_MENU, CLASS_NAME_SHOW)\n    toggle(SELECTOR_DROPDOWN_ITEM, CLASS_NAME_ACTIVE)\n    outerElem.setAttribute('aria-expanded', open)\n  }\n\n  _setAttributeIfNotExists(element, attribute, value) {\n    if (!element.hasAttribute(attribute)) {\n      element.setAttribute(attribute, value)\n    }\n  }\n\n  _elemIsActive(elem) {\n    return elem.classList.contains(CLASS_NAME_ACTIVE)\n  }\n\n  // Try to get the inner element (usually the .nav-link)\n  _getInnerElement(elem) {\n    return elem.matches(SELECTOR_INNER_ELEM) ? elem : SelectorEngine.findOne(SELECTOR_INNER_ELEM, elem)\n  }\n\n  // Try to get the outer element (usually the .nav-item)\n  _getOuterElement(elem) {\n    return elem.closest(SELECTOR_OUTER) || elem\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Tab.getOrCreateInstance(this)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault()\n  }\n\n  if (isDisabled(this)) {\n    return\n  }\n\n  Tab.getOrCreateInstance(this).show()\n})\n\n/**\n * Initialize on focus\n */\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  for (const element of SelectorEngine.find(SELECTOR_DATA_TOGGLE_ACTIVE)) {\n    Tab.getOrCreateInstance(element)\n  }\n})\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Tab)\n\nexport default Tab\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.0): toast.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { defineJQueryPlugin, reflow } from './util/index'\nimport EventHandler from './dom/event-handler'\nimport BaseComponent from './base-component'\nimport { enableDismissTrigger } from './util/component-functions'\n\n/**\n * Constants\n */\n\nconst NAME = 'toast'\nconst DATA_KEY = 'bs.toast'\nconst EVENT_KEY = `.${DATA_KEY}`\n\nconst EVENT_MOUSEOVER = `mouseover${EVENT_KEY}`\nconst EVENT_MOUSEOUT = `mouseout${EVENT_KEY}`\nconst EVENT_FOCUSIN = `focusin${EVENT_KEY}`\nconst EVENT_FOCUSOUT = `focusout${EVENT_KEY}`\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\n\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_HIDE = 'hide' // @deprecated - kept here only for backwards compatibility\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_SHOWING = 'showing'\n\nconst DefaultType = {\n  animation: 'boolean',\n  autohide: 'boolean',\n  delay: 'number'\n}\n\nconst Default = {\n  animation: true,\n  autohide: true,\n  delay: 5000\n}\n\n/**\n * Class definition\n */\n\nclass Toast extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._timeout = null\n    this._hasMouseInteraction = false\n    this._hasKeyboardInteraction = false\n    this._setListeners()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  show() {\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW)\n\n    if (showEvent.defaultPrevented) {\n      return\n    }\n\n    this._clearTimeout()\n\n    if (this._config.animation) {\n      this._element.classList.add(CLASS_NAME_FADE)\n    }\n\n    const complete = () => {\n      this._element.classList.remove(CLASS_NAME_SHOWING)\n      EventHandler.trigger(this._element, EVENT_SHOWN)\n\n      this._maybeScheduleHide()\n    }\n\n    this._element.classList.remove(CLASS_NAME_HIDE) // @deprecated\n    reflow(this._element)\n    this._element.classList.add(CLASS_NAME_SHOW, CLASS_NAME_SHOWING)\n\n    this._queueCallback(complete, this._element, this._config.animation)\n  }\n\n  hide() {\n    if (!this.isShown()) {\n      return\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE)\n\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    const complete = () => {\n      this._element.classList.add(CLASS_NAME_HIDE) // @deprecated\n      this._element.classList.remove(CLASS_NAME_SHOWING, CLASS_NAME_SHOW)\n      EventHandler.trigger(this._element, EVENT_HIDDEN)\n    }\n\n    this._element.classList.add(CLASS_NAME_SHOWING)\n    this._queueCallback(complete, this._element, this._config.animation)\n  }\n\n  dispose() {\n    this._clearTimeout()\n\n    if (this.isShown()) {\n      this._element.classList.remove(CLASS_NAME_SHOW)\n    }\n\n    super.dispose()\n  }\n\n  isShown() {\n    return this._element.classList.contains(CLASS_NAME_SHOW)\n  }\n\n  // Private\n\n  _maybeScheduleHide() {\n    if (!this._config.autohide) {\n      return\n    }\n\n    if (this._hasMouseInteraction || this._hasKeyboardInteraction) {\n      return\n    }\n\n    this._timeout = setTimeout(() => {\n      this.hide()\n    }, this._config.delay)\n  }\n\n  _onInteraction(event, isInteracting) {\n    switch (event.type) {\n      case 'mouseover':\n      case 'mouseout':\n        this._hasMouseInteraction = isInteracting\n        break\n      case 'focusin':\n      case 'focusout':\n        this._hasKeyboardInteraction = isInteracting\n        break\n      default:\n        break\n    }\n\n    if (isInteracting) {\n      this._clearTimeout()\n      return\n    }\n\n    const nextElement = event.relatedTarget\n    if (this._element === nextElement || this._element.contains(nextElement)) {\n      return\n    }\n\n    this._maybeScheduleHide()\n  }\n\n  _setListeners() {\n    EventHandler.on(this._element, EVENT_MOUSEOVER, event => this._onInteraction(event, true))\n    EventHandler.on(this._element, EVENT_MOUSEOUT, event => this._onInteraction(event, false))\n    EventHandler.on(this._element, EVENT_FOCUSIN, event => this._onInteraction(event, true))\n    EventHandler.on(this._element, EVENT_FOCUSOUT, event => this._onInteraction(event, false))\n  }\n\n  _clearTimeout() {\n    clearTimeout(this._timeout)\n    this._timeout = null\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Toast.getOrCreateInstance(this, config)\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config](this)\n      }\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nenableDismissTrigger(Toast)\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Toast)\n\nexport default Toast\n","exports.fetch = isFunction(global.fetch) && isFunction(global.ReadableStream)\n\nexports.writableStream = isFunction(global.WritableStream)\n\nexports.abortController = isFunction(global.AbortController)\n\nexports.blobConstructor = false\ntry {\n\tnew Blob([new ArrayBuffer(1)])\n\texports.blobConstructor = true\n} catch (e) {}\n\n// The xhr request to example.com may violate some restrictive CSP configurations,\n// so if we're running in a browser that supports `fetch`, avoid calling getXHR()\n// and assume support for certain features below.\nvar xhr\nfunction getXHR () {\n\t// Cache the xhr value\n\tif (xhr !== undefined) return xhr\n\n\tif (global.XMLHttpRequest) {\n\t\txhr = new global.XMLHttpRequest()\n\t\t// If XDomainRequest is available (ie only, where xhr might not work\n\t\t// cross domain), use the page location. Otherwise use example.com\n\t\t// Note: this doesn't actually make an http request.\n\t\ttry {\n\t\t\txhr.open('GET', global.XDomainRequest ? '/' : 'https://example.com')\n\t\t} catch(e) {\n\t\t\txhr = null\n\t\t}\n\t} else {\n\t\t// Service workers don't have XHR\n\t\txhr = null\n\t}\n\treturn xhr\n}\n\nfunction checkTypeSupport (type) {\n\tvar xhr = getXHR()\n\tif (!xhr) return false\n\ttry {\n\t\txhr.responseType = type\n\t\treturn xhr.responseType === type\n\t} catch (e) {}\n\treturn false\n}\n\n// For some strange reason, Safari 7.0 reports typeof global.ArrayBuffer === 'object'.\n// Safari 7.1 appears to have fixed this bug.\nvar haveArrayBuffer = typeof global.ArrayBuffer !== 'undefined'\nvar haveSlice = haveArrayBuffer && isFunction(global.ArrayBuffer.prototype.slice)\n\n// If fetch is supported, then arraybuffer will be supported too. Skip calling\n// checkTypeSupport(), since that calls getXHR().\nexports.arraybuffer = exports.fetch || (haveArrayBuffer && checkTypeSupport('arraybuffer'))\n\n// These next two tests unavoidably show warnings in Chrome. Since fetch will always\n// be used if it's available, just return false for these to avoid the warnings.\nexports.msstream = !exports.fetch && haveSlice && checkTypeSupport('ms-stream')\nexports.mozchunkedarraybuffer = !exports.fetch && haveArrayBuffer &&\n\tcheckTypeSupport('moz-chunked-arraybuffer')\n\n// If fetch is supported, then overrideMimeType will be supported too. Skip calling\n// getXHR().\nexports.overrideMimeType = exports.fetch || (getXHR() ? isFunction(getXHR().overrideMimeType) : false)\n\nexports.vbArray = isFunction(global.VBArray)\n\nfunction isFunction (value) {\n\treturn typeof value === 'function'\n}\n\nxhr = null // Help gc\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict';\n\nif (typeof process === 'undefined' ||\n    !process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","module.exports = require('events').EventEmitter;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('buffer').Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n","'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = require('safe-buffer').Buffer;\nvar util = require('util');\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    if (this.length === 1) return this.head.data;\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\nif (util && util.inspect && util.inspect.custom) {\n  module.exports.prototype[util.inspect.custom] = function () {\n    var obj = util.inspect({ length: this.length });\n    return this.constructor.name + ' ' + obj;\n  };\n}","'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      pna.nextTick(emitErrorNT, this, err);\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      pna.nextTick(emitErrorNT, _this, err);\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n\n  return this;\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var writableHwm = options.writableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  pna.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    pna.nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    pna.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    pna.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      pna.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n  if (state.corkedRequestsFree) {\n    state.corkedRequestsFree.next = corkReq;\n  } else {\n    state.corkedRequestsFree = corkReq;\n  }\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\n{\n  // avoid scope creep, the keys array can then be collected\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  pna.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  pna.nextTick(cb, err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar destroyImpl = require('./internal/streams/destroy');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var readableHwm = options.readableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    pna.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, unpipeInfo);\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        pna.nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    pna.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._readableState.highWaterMark;\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    pna.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return this.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n\n  cb(er);\n\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function') {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this2 = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this2.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\n","var capability = require('./capability')\nvar inherits = require('inherits')\nvar stream = require('readable-stream')\n\nvar rStates = exports.readyStates = {\n\tUNSENT: 0,\n\tOPENED: 1,\n\tHEADERS_RECEIVED: 2,\n\tLOADING: 3,\n\tDONE: 4\n}\n\nvar IncomingMessage = exports.IncomingMessage = function (xhr, response, mode, fetchTimer) {\n\tvar self = this\n\tstream.Readable.call(self)\n\n\tself._mode = mode\n\tself.headers = {}\n\tself.rawHeaders = []\n\tself.trailers = {}\n\tself.rawTrailers = []\n\n\t// Fake the 'close' event, but only once 'end' fires\n\tself.on('end', function () {\n\t\t// The nextTick is necessary to prevent the 'request' module from causing an infinite loop\n\t\tprocess.nextTick(function () {\n\t\t\tself.emit('close')\n\t\t})\n\t})\n\n\tif (mode === 'fetch') {\n\t\tself._fetchResponse = response\n\n\t\tself.url = response.url\n\t\tself.statusCode = response.status\n\t\tself.statusMessage = response.statusText\n\t\t\n\t\tresponse.headers.forEach(function (header, key){\n\t\t\tself.headers[key.toLowerCase()] = header\n\t\t\tself.rawHeaders.push(key, header)\n\t\t})\n\n\t\tif (capability.writableStream) {\n\t\t\tvar writable = new WritableStream({\n\t\t\t\twrite: function (chunk) {\n\t\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\t\tif (self._destroyed) {\n\t\t\t\t\t\t\treject()\n\t\t\t\t\t\t} else if(self.push(new Buffer(chunk))) {\n\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself._resumeFetch = resolve\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tclose: function () {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.push(null)\n\t\t\t\t},\n\t\t\t\tabort: function (err) {\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.emit('error', err)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\ttry {\n\t\t\t\tresponse.body.pipeTo(writable).catch(function (err) {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.emit('error', err)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t} catch (e) {} // pipeTo method isn't defined. Can't find a better way to feature test this\n\t\t}\n\t\t// fallback for when writableStream or pipeTo aren't available\n\t\tvar reader = response.body.getReader()\n\t\tfunction read () {\n\t\t\treader.read().then(function (result) {\n\t\t\t\tif (self._destroyed)\n\t\t\t\t\treturn\n\t\t\t\tif (result.done) {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tself.push(null)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tself.push(new Buffer(result.value))\n\t\t\t\tread()\n\t\t\t}).catch(function (err) {\n\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\tif (!self._destroyed)\n\t\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t}\n\t\tread()\n\t} else {\n\t\tself._xhr = xhr\n\t\tself._pos = 0\n\n\t\tself.url = xhr.responseURL\n\t\tself.statusCode = xhr.status\n\t\tself.statusMessage = xhr.statusText\n\t\tvar headers = xhr.getAllResponseHeaders().split(/\\r?\\n/)\n\t\theaders.forEach(function (header) {\n\t\t\tvar matches = header.match(/^([^:]+):\\s*(.*)/)\n\t\t\tif (matches) {\n\t\t\t\tvar key = matches[1].toLowerCase()\n\t\t\t\tif (key === 'set-cookie') {\n\t\t\t\t\tif (self.headers[key] === undefined) {\n\t\t\t\t\t\tself.headers[key] = []\n\t\t\t\t\t}\n\t\t\t\t\tself.headers[key].push(matches[2])\n\t\t\t\t} else if (self.headers[key] !== undefined) {\n\t\t\t\t\tself.headers[key] += ', ' + matches[2]\n\t\t\t\t} else {\n\t\t\t\t\tself.headers[key] = matches[2]\n\t\t\t\t}\n\t\t\t\tself.rawHeaders.push(matches[1], matches[2])\n\t\t\t}\n\t\t})\n\n\t\tself._charset = 'x-user-defined'\n\t\tif (!capability.overrideMimeType) {\n\t\t\tvar mimeType = self.rawHeaders['mime-type']\n\t\t\tif (mimeType) {\n\t\t\t\tvar charsetMatch = mimeType.match(/;\\s*charset=([^;])(;|$)/)\n\t\t\t\tif (charsetMatch) {\n\t\t\t\t\tself._charset = charsetMatch[1].toLowerCase()\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!self._charset)\n\t\t\t\tself._charset = 'utf-8' // best guess\n\t\t}\n\t}\n}\n\ninherits(IncomingMessage, stream.Readable)\n\nIncomingMessage.prototype._read = function () {\n\tvar self = this\n\n\tvar resolve = self._resumeFetch\n\tif (resolve) {\n\t\tself._resumeFetch = null\n\t\tresolve()\n\t}\n}\n\nIncomingMessage.prototype._onXHRProgress = function () {\n\tvar self = this\n\n\tvar xhr = self._xhr\n\n\tvar response = null\n\tswitch (self._mode) {\n\t\tcase 'text:vbarray': // For IE9\n\t\t\tif (xhr.readyState !== rStates.DONE)\n\t\t\t\tbreak\n\t\t\ttry {\n\t\t\t\t// This fails in IE8\n\t\t\t\tresponse = new global.VBArray(xhr.responseBody).toArray()\n\t\t\t} catch (e) {}\n\t\t\tif (response !== null) {\n\t\t\t\tself.push(new Buffer(response))\n\t\t\t\tbreak\n\t\t\t}\n\t\t\t// Falls through in IE8\t\n\t\tcase 'text':\n\t\t\ttry { // This will fail when readyState = 3 in IE9. Switch mode and wait for readyState = 4\n\t\t\t\tresponse = xhr.responseText\n\t\t\t} catch (e) {\n\t\t\t\tself._mode = 'text:vbarray'\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tif (response.length > self._pos) {\n\t\t\t\tvar newData = response.substr(self._pos)\n\t\t\t\tif (self._charset === 'x-user-defined') {\n\t\t\t\t\tvar buffer = new Buffer(newData.length)\n\t\t\t\t\tfor (var i = 0; i < newData.length; i++)\n\t\t\t\t\t\tbuffer[i] = newData.charCodeAt(i) & 0xff\n\n\t\t\t\t\tself.push(buffer)\n\t\t\t\t} else {\n\t\t\t\t\tself.push(newData, self._charset)\n\t\t\t\t}\n\t\t\t\tself._pos = response.length\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'arraybuffer':\n\t\t\tif (xhr.readyState !== rStates.DONE || !xhr.response)\n\t\t\t\tbreak\n\t\t\tresponse = xhr.response\n\t\t\tself.push(new Buffer(new Uint8Array(response)))\n\t\t\tbreak\n\t\tcase 'moz-chunked-arraybuffer': // take whole\n\t\t\tresponse = xhr.response\n\t\t\tif (xhr.readyState !== rStates.LOADING || !response)\n\t\t\t\tbreak\n\t\t\tself.push(new Buffer(new Uint8Array(response)))\n\t\t\tbreak\n\t\tcase 'ms-stream':\n\t\t\tresponse = xhr.response\n\t\t\tif (xhr.readyState !== rStates.LOADING)\n\t\t\t\tbreak\n\t\t\tvar reader = new global.MSStreamReader()\n\t\t\treader.onprogress = function () {\n\t\t\t\tif (reader.result.byteLength > self._pos) {\n\t\t\t\t\tself.push(new Buffer(new Uint8Array(reader.result.slice(self._pos))))\n\t\t\t\t\tself._pos = reader.result.byteLength\n\t\t\t\t}\n\t\t\t}\n\t\t\treader.onload = function () {\n\t\t\t\tself.push(null)\n\t\t\t}\n\t\t\t// reader.onerror = ??? // TODO: this\n\t\t\treader.readAsArrayBuffer(response)\n\t\t\tbreak\n\t}\n\n\t// The ms-stream case handles end separately in reader.onload()\n\tif (self._xhr.readyState === rStates.DONE && self._mode !== 'ms-stream') {\n\t\tself.push(null)\n\t}\n}\n","var Buffer = require('buffer').Buffer\n\nmodule.exports = function (buf) {\n\t// If the buffer is backed by a Uint8Array, a faster version will work\n\tif (buf instanceof Uint8Array) {\n\t\t// If the buffer isn't a subarray, return the underlying ArrayBuffer\n\t\tif (buf.byteOffset === 0 && buf.byteLength === buf.buffer.byteLength) {\n\t\t\treturn buf.buffer\n\t\t} else if (typeof buf.buffer.slice === 'function') {\n\t\t\t// Otherwise we need to get a proper copy\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength)\n\t\t}\n\t}\n\n\tif (Buffer.isBuffer(buf)) {\n\t\t// This is the slow version that will work with any Buffer\n\t\t// implementation (even in old browsers)\n\t\tvar arrayCopy = new Uint8Array(buf.length)\n\t\tvar len = buf.length\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tarrayCopy[i] = buf[i]\n\t\t}\n\t\treturn arrayCopy.buffer\n\t} else {\n\t\tthrow new Error('Argument must be a Buffer')\n\t}\n}\n","var capability = require('./capability')\nvar inherits = require('inherits')\nvar response = require('./response')\nvar stream = require('readable-stream')\nvar toArrayBuffer = require('to-arraybuffer')\n\nvar IncomingMessage = response.IncomingMessage\nvar rStates = response.readyStates\n\nfunction decideMode (preferBinary, useFetch) {\n\tif (capability.fetch && useFetch) {\n\t\treturn 'fetch'\n\t} else if (capability.mozchunkedarraybuffer) {\n\t\treturn 'moz-chunked-arraybuffer'\n\t} else if (capability.msstream) {\n\t\treturn 'ms-stream'\n\t} else if (capability.arraybuffer && preferBinary) {\n\t\treturn 'arraybuffer'\n\t} else if (capability.vbArray && preferBinary) {\n\t\treturn 'text:vbarray'\n\t} else {\n\t\treturn 'text'\n\t}\n}\n\nvar ClientRequest = module.exports = function (opts) {\n\tvar self = this\n\tstream.Writable.call(self)\n\n\tself._opts = opts\n\tself._body = []\n\tself._headers = {}\n\tif (opts.auth)\n\t\tself.setHeader('Authorization', 'Basic ' + new Buffer(opts.auth).toString('base64'))\n\tObject.keys(opts.headers).forEach(function (name) {\n\t\tself.setHeader(name, opts.headers[name])\n\t})\n\n\tvar preferBinary\n\tvar useFetch = true\n\tif (opts.mode === 'disable-fetch' || ('requestTimeout' in opts && !capability.abortController)) {\n\t\t// If the use of XHR should be preferred. Not typically needed.\n\t\tuseFetch = false\n\t\tpreferBinary = true\n\t} else if (opts.mode === 'prefer-streaming') {\n\t\t// If streaming is a high priority but binary compatibility and\n\t\t// the accuracy of the 'content-type' header aren't\n\t\tpreferBinary = false\n\t} else if (opts.mode === 'allow-wrong-content-type') {\n\t\t// If streaming is more important than preserving the 'content-type' header\n\t\tpreferBinary = !capability.overrideMimeType\n\t} else if (!opts.mode || opts.mode === 'default' || opts.mode === 'prefer-fast') {\n\t\t// Use binary if text streaming may corrupt data or the content-type header, or for speed\n\t\tpreferBinary = true\n\t} else {\n\t\tthrow new Error('Invalid value for opts.mode')\n\t}\n\tself._mode = decideMode(preferBinary, useFetch)\n\tself._fetchTimer = null\n\n\tself.on('finish', function () {\n\t\tself._onFinish()\n\t})\n}\n\ninherits(ClientRequest, stream.Writable)\n\nClientRequest.prototype.setHeader = function (name, value) {\n\tvar self = this\n\tvar lowerName = name.toLowerCase()\n\t// This check is not necessary, but it prevents warnings from browsers about setting unsafe\n\t// headers. To be honest I'm not entirely sure hiding these warnings is a good thing, but\n\t// http-browserify did it, so I will too.\n\tif (unsafeHeaders.indexOf(lowerName) !== -1)\n\t\treturn\n\n\tself._headers[lowerName] = {\n\t\tname: name,\n\t\tvalue: value\n\t}\n}\n\nClientRequest.prototype.getHeader = function (name) {\n\tvar header = this._headers[name.toLowerCase()]\n\tif (header)\n\t\treturn header.value\n\treturn null\n}\n\nClientRequest.prototype.removeHeader = function (name) {\n\tvar self = this\n\tdelete self._headers[name.toLowerCase()]\n}\n\nClientRequest.prototype._onFinish = function () {\n\tvar self = this\n\n\tif (self._destroyed)\n\t\treturn\n\tvar opts = self._opts\n\n\tvar headersObj = self._headers\n\tvar body = null\n\tif (opts.method !== 'GET' && opts.method !== 'HEAD') {\n\t\tif (capability.arraybuffer) {\n\t\t\tbody = toArrayBuffer(Buffer.concat(self._body))\n\t\t} else if (capability.blobConstructor) {\n\t\t\tbody = new global.Blob(self._body.map(function (buffer) {\n\t\t\t\treturn toArrayBuffer(buffer)\n\t\t\t}), {\n\t\t\t\ttype: (headersObj['content-type'] || {}).value || ''\n\t\t\t})\n\t\t} else {\n\t\t\t// get utf8 string\n\t\t\tbody = Buffer.concat(self._body).toString()\n\t\t}\n\t}\n\n\t// create flattened list of headers\n\tvar headersList = []\n\tObject.keys(headersObj).forEach(function (keyName) {\n\t\tvar name = headersObj[keyName].name\n\t\tvar value = headersObj[keyName].value\n\t\tif (Array.isArray(value)) {\n\t\t\tvalue.forEach(function (v) {\n\t\t\t\theadersList.push([name, v])\n\t\t\t})\n\t\t} else {\n\t\t\theadersList.push([name, value])\n\t\t}\n\t})\n\n\tif (self._mode === 'fetch') {\n\t\tvar signal = null\n\t\tvar fetchTimer = null\n\t\tif (capability.abortController) {\n\t\t\tvar controller = new AbortController()\n\t\t\tsignal = controller.signal\n\t\t\tself._fetchAbortController = controller\n\n\t\t\tif ('requestTimeout' in opts && opts.requestTimeout !== 0) {\n\t\t\t\tself._fetchTimer = global.setTimeout(function () {\n\t\t\t\t\tself.emit('requestTimeout')\n\t\t\t\t\tif (self._fetchAbortController)\n\t\t\t\t\t\tself._fetchAbortController.abort()\n\t\t\t\t}, opts.requestTimeout)\n\t\t\t}\n\t\t}\n\n\t\tglobal.fetch(self._opts.url, {\n\t\t\tmethod: self._opts.method,\n\t\t\theaders: headersList,\n\t\t\tbody: body || undefined,\n\t\t\tmode: 'cors',\n\t\t\tcredentials: opts.withCredentials ? 'include' : 'same-origin',\n\t\t\tsignal: signal\n\t\t}).then(function (response) {\n\t\t\tself._fetchResponse = response\n\t\t\tself._connect()\n\t\t}, function (reason) {\n\t\t\tglobal.clearTimeout(self._fetchTimer)\n\t\t\tif (!self._destroyed)\n\t\t\t\tself.emit('error', reason)\n\t\t})\n\t} else {\n\t\tvar xhr = self._xhr = new global.XMLHttpRequest()\n\t\ttry {\n\t\t\txhr.open(self._opts.method, self._opts.url, true)\n\t\t} catch (err) {\n\t\t\tprocess.nextTick(function () {\n\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\t// Can't set responseType on really old browsers\n\t\tif ('responseType' in xhr)\n\t\t\txhr.responseType = self._mode.split(':')[0]\n\n\t\tif ('withCredentials' in xhr)\n\t\t\txhr.withCredentials = !!opts.withCredentials\n\n\t\tif (self._mode === 'text' && 'overrideMimeType' in xhr)\n\t\t\txhr.overrideMimeType('text/plain; charset=x-user-defined')\n\n\t\tif ('requestTimeout' in opts) {\n\t\t\txhr.timeout = opts.requestTimeout\n\t\t\txhr.ontimeout = function () {\n\t\t\t\tself.emit('requestTimeout')\n\t\t\t}\n\t\t}\n\n\t\theadersList.forEach(function (header) {\n\t\t\txhr.setRequestHeader(header[0], header[1])\n\t\t})\n\n\t\tself._response = null\n\t\txhr.onreadystatechange = function () {\n\t\t\tswitch (xhr.readyState) {\n\t\t\t\tcase rStates.LOADING:\n\t\t\t\tcase rStates.DONE:\n\t\t\t\t\tself._onXHRProgress()\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\t// Necessary for streaming in Firefox, since xhr.response is ONLY defined\n\t\t// in onprogress, not in onreadystatechange with xhr.readyState = 3\n\t\tif (self._mode === 'moz-chunked-arraybuffer') {\n\t\t\txhr.onprogress = function () {\n\t\t\t\tself._onXHRProgress()\n\t\t\t}\n\t\t}\n\n\t\txhr.onerror = function () {\n\t\t\tif (self._destroyed)\n\t\t\t\treturn\n\t\t\tself.emit('error', new Error('XHR error'))\n\t\t}\n\n\t\ttry {\n\t\t\txhr.send(body)\n\t\t} catch (err) {\n\t\t\tprocess.nextTick(function () {\n\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t}\n}\n\n/**\n * Checks if xhr.status is readable and non-zero, indicating no error.\n * Even though the spec says it should be available in readyState 3,\n * accessing it throws an exception in IE8\n */\nfunction statusValid (xhr) {\n\ttry {\n\t\tvar status = xhr.status\n\t\treturn (status !== null && status !== 0)\n\t} catch (e) {\n\t\treturn false\n\t}\n}\n\nClientRequest.prototype._onXHRProgress = function () {\n\tvar self = this\n\n\tif (!statusValid(self._xhr) || self._destroyed)\n\t\treturn\n\n\tif (!self._response)\n\t\tself._connect()\n\n\tself._response._onXHRProgress()\n}\n\nClientRequest.prototype._connect = function () {\n\tvar self = this\n\n\tif (self._destroyed)\n\t\treturn\n\n\tself._response = new IncomingMessage(self._xhr, self._fetchResponse, self._mode, self._fetchTimer)\n\tself._response.on('error', function(err) {\n\t\tself.emit('error', err)\n\t})\n\n\tself.emit('response', self._response)\n}\n\nClientRequest.prototype._write = function (chunk, encoding, cb) {\n\tvar self = this\n\n\tself._body.push(chunk)\n\tcb()\n}\n\nClientRequest.prototype.abort = ClientRequest.prototype.destroy = function () {\n\tvar self = this\n\tself._destroyed = true\n\tglobal.clearTimeout(self._fetchTimer)\n\tif (self._response)\n\t\tself._response._destroyed = true\n\tif (self._xhr)\n\t\tself._xhr.abort()\n\telse if (self._fetchAbortController)\n\t\tself._fetchAbortController.abort()\n}\n\nClientRequest.prototype.end = function (data, encoding, cb) {\n\tvar self = this\n\tif (typeof data === 'function') {\n\t\tcb = data\n\t\tdata = undefined\n\t}\n\n\tstream.Writable.prototype.end.call(self, data, encoding, cb)\n}\n\nClientRequest.prototype.flushHeaders = function () {}\nClientRequest.prototype.setTimeout = function () {}\nClientRequest.prototype.setNoDelay = function () {}\nClientRequest.prototype.setSocketKeepAlive = function () {}\n\n// Taken from http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader%28%29-method\nvar unsafeHeaders = [\n\t'accept-charset',\n\t'accept-encoding',\n\t'access-control-request-headers',\n\t'access-control-request-method',\n\t'connection',\n\t'content-length',\n\t'cookie',\n\t'cookie2',\n\t'date',\n\t'dnt',\n\t'expect',\n\t'host',\n\t'keep-alive',\n\t'origin',\n\t'referer',\n\t'te',\n\t'trailer',\n\t'transfer-encoding',\n\t'upgrade',\n\t'via'\n]\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","module.exports = {\n  \"100\": \"Continue\",\n  \"101\": \"Switching Protocols\",\n  \"102\": \"Processing\",\n  \"200\": \"OK\",\n  \"201\": \"Created\",\n  \"202\": \"Accepted\",\n  \"203\": \"Non-Authoritative Information\",\n  \"204\": \"No Content\",\n  \"205\": \"Reset Content\",\n  \"206\": \"Partial Content\",\n  \"207\": \"Multi-Status\",\n  \"208\": \"Already Reported\",\n  \"226\": \"IM Used\",\n  \"300\": \"Multiple Choices\",\n  \"301\": \"Moved Permanently\",\n  \"302\": \"Found\",\n  \"303\": \"See Other\",\n  \"304\": \"Not Modified\",\n  \"305\": \"Use Proxy\",\n  \"307\": \"Temporary Redirect\",\n  \"308\": \"Permanent Redirect\",\n  \"400\": \"Bad Request\",\n  \"401\": \"Unauthorized\",\n  \"402\": \"Payment Required\",\n  \"403\": \"Forbidden\",\n  \"404\": \"Not Found\",\n  \"405\": \"Method Not Allowed\",\n  \"406\": \"Not Acceptable\",\n  \"407\": \"Proxy Authentication Required\",\n  \"408\": \"Request Timeout\",\n  \"409\": \"Conflict\",\n  \"410\": \"Gone\",\n  \"411\": \"Length Required\",\n  \"412\": \"Precondition Failed\",\n  \"413\": \"Payload Too Large\",\n  \"414\": \"URI Too Long\",\n  \"415\": \"Unsupported Media Type\",\n  \"416\": \"Range Not Satisfiable\",\n  \"417\": \"Expectation Failed\",\n  \"418\": \"I'm a teapot\",\n  \"421\": \"Misdirected Request\",\n  \"422\": \"Unprocessable Entity\",\n  \"423\": \"Locked\",\n  \"424\": \"Failed Dependency\",\n  \"425\": \"Unordered Collection\",\n  \"426\": \"Upgrade Required\",\n  \"428\": \"Precondition Required\",\n  \"429\": \"Too Many Requests\",\n  \"431\": \"Request Header Fields Too Large\",\n  \"451\": \"Unavailable For Legal Reasons\",\n  \"500\": \"Internal Server Error\",\n  \"501\": \"Not Implemented\",\n  \"502\": \"Bad Gateway\",\n  \"503\": \"Service Unavailable\",\n  \"504\": \"Gateway Timeout\",\n  \"505\": \"HTTP Version Not Supported\",\n  \"506\": \"Variant Also Negotiates\",\n  \"507\": \"Insufficient Storage\",\n  \"508\": \"Loop Detected\",\n  \"509\": \"Bandwidth Limit Exceeded\",\n  \"510\": \"Not Extended\",\n  \"511\": \"Network Authentication Required\"\n}\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","var ClientRequest = require('./lib/request')\nvar response = require('./lib/response')\nvar extend = require('xtend')\nvar statusCodes = require('builtin-status-codes')\nvar url = require('url')\n\nvar http = exports\n\nhttp.request = function (opts, cb) {\n\tif (typeof opts === 'string')\n\t\topts = url.parse(opts)\n\telse\n\t\topts = extend(opts)\n\n\t// Normally, the page is loaded from http or https, so not specifying a protocol\n\t// will result in a (valid) protocol-relative url. However, this won't work if\n\t// the protocol is something else, like 'file:'\n\tvar defaultProtocol = global.location.protocol.search(/^https?:$/) === -1 ? 'http:' : ''\n\n\tvar protocol = opts.protocol || defaultProtocol\n\tvar host = opts.hostname || opts.host\n\tvar port = opts.port\n\tvar path = opts.path || '/'\n\n\t// Necessary for IPv6 addresses\n\tif (host && host.indexOf(':') !== -1)\n\t\thost = '[' + host + ']'\n\n\t// This may be a relative url. The browser should always be able to interpret it correctly.\n\topts.url = (host ? (protocol + '//' + host) : '') + (port ? ':' + port : '') + path\n\topts.method = (opts.method || 'GET').toUpperCase()\n\topts.headers = opts.headers || {}\n\n\t// Also valid opts.auth, opts.mode\n\n\tvar req = new ClientRequest(opts)\n\tif (cb)\n\t\treq.on('response', cb)\n\treturn req\n}\n\nhttp.get = function get (opts, cb) {\n\tvar req = http.request(opts, cb)\n\treq.end()\n\treturn req\n}\n\nhttp.ClientRequest = ClientRequest\nhttp.IncomingMessage = response.IncomingMessage\n\nhttp.Agent = function () {}\nhttp.Agent.defaultMaxSockets = 4\n\nhttp.globalAgent = new http.Agent()\n\nhttp.STATUS_CODES = statusCodes\n\nhttp.METHODS = [\n\t'CHECKOUT',\n\t'CONNECT',\n\t'COPY',\n\t'DELETE',\n\t'GET',\n\t'HEAD',\n\t'LOCK',\n\t'M-SEARCH',\n\t'MERGE',\n\t'MKACTIVITY',\n\t'MKCOL',\n\t'MOVE',\n\t'NOTIFY',\n\t'OPTIONS',\n\t'PATCH',\n\t'POST',\n\t'PROPFIND',\n\t'PROPPATCH',\n\t'PURGE',\n\t'PUT',\n\t'REPORT',\n\t'SEARCH',\n\t'SUBSCRIBE',\n\t'TRACE',\n\t'UNLOCK',\n\t'UNSUBSCRIBE'\n]","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","export default class CoreFeature{\r\n\r\n\tconstructor(table){\r\n\t\tthis.table = table;\r\n\t}\r\n\r\n\t//////////////////////////////////////////\r\n\t/////////////// DataLoad /////////////////\r\n\t//////////////////////////////////////////\r\n\r\n\treloadData(data, silent, columnsChanged){\r\n\t\treturn this.table.dataLoader.load(data, undefined, undefined, undefined, silent, columnsChanged);\r\n\t}\r\n\r\n\t//////////////////////////////////////////\r\n\t///////////// Localization ///////////////\r\n\t//////////////////////////////////////////\r\n\r\n\tlangText(){\r\n\t\treturn this.table.modules.localize.getText(...arguments);\r\n\t}\r\n\r\n\tlangBind(){\r\n\t\treturn this.table.modules.localize.bind(...arguments);\r\n\t}\r\n\r\n\tlangLocale(){\r\n\t\treturn this.table.modules.localize.getLocale(...arguments);\r\n\t}\r\n\r\n\r\n\t//////////////////////////////////////////\r\n\t////////// Inter Table Comms /////////////\r\n\t//////////////////////////////////////////\r\n\r\n\tcommsConnections(){\r\n\t\treturn this.table.modules.comms.getConnections(...arguments);\r\n\t}\r\n\r\n\tcommsSend(){\r\n\t\treturn this.table.modules.comms.send(...arguments);\r\n\t}\r\n\r\n\t//////////////////////////////////////////\r\n\t//////////////// Layout  /////////////////\r\n\t//////////////////////////////////////////\r\n\r\n\tlayoutMode(){\r\n\t\treturn this.table.modules.layout.getMode();\r\n\t}\r\n\r\n\tlayoutRefresh(force){\r\n\t\treturn this.table.modules.layout.layout(force);\r\n\t}\r\n\r\n\r\n\t//////////////////////////////////////////\r\n\t/////////////// Event Bus ////////////////\r\n\t//////////////////////////////////////////\r\n\r\n\tsubscribe(){\r\n\t\treturn this.table.eventBus.subscribe(...arguments);\r\n\t}\r\n\r\n\tunsubscribe(){\r\n\t\treturn this.table.eventBus.unsubscribe(...arguments);\r\n\t}\r\n\r\n\tsubscribed(key){\r\n\t\treturn this.table.eventBus.subscribed(key);\r\n\t}\r\n\r\n\tsubscriptionChange(){\r\n\t\treturn this.table.eventBus.subscriptionChange(...arguments);\r\n\t}\r\n\r\n\tdispatch(){\r\n\t\treturn this.table.eventBus.dispatch(...arguments);\r\n\t}\r\n\r\n\tchain(){\r\n\t\treturn this.table.eventBus.chain(...arguments);\r\n\t}\r\n\r\n\tconfirm(){\r\n\t\treturn this.table.eventBus.confirm(...arguments);\r\n\t}\r\n\r\n\tdispatchExternal(){\r\n\t\treturn this.table.externalEvents.dispatch(...arguments);\r\n\t}\r\n\r\n\tsubscribedExternal(key){\r\n\t\treturn this.table.externalEvents.subscribed(key);\r\n\t}\r\n\r\n\tsubscriptionChangeExternal(){\r\n\t\treturn this.table.externalEvents.subscriptionChange(...arguments);\r\n\t}\r\n\r\n\t//////////////////////////////////////////\r\n\t//////////////// Options /////////////////\r\n\t//////////////////////////////////////////\r\n\r\n\toptions(key){\r\n\t\treturn this.table.options[key];\r\n\t}\r\n\r\n\tsetOption(key, value){\r\n\t\tif(typeof value !== \"undefined\"){\r\n\t\t\tthis.table.options[key] = value;\r\n\t\t}\r\n\r\n\t\treturn this.table.options[key];\r\n\t}\r\n\r\n\t//////////////////////////////////////////\r\n\t/////////// Deprecation Checks ///////////\r\n\t//////////////////////////////////////////\r\n\r\n\tdeprecationCheck(oldOption, newOption){\r\n\t\treturn this.table.deprecationAdvisor.check(oldOption, newOption);\r\n\t}\r\n\r\n\tdeprecationCheckMsg(oldOption, msg){\r\n\t\treturn this.table.deprecationAdvisor.checkMsg(oldOption, msg);\r\n\t}\r\n\r\n\tdeprecationMsg(msg){\r\n\t\treturn this.table.deprecationAdvisor.msg(msg);\r\n\t}\r\n\t//////////////////////////////////////////\r\n\t//////////////// Modules /////////////////\r\n\t//////////////////////////////////////////\r\n\r\n\tmodule(key){\r\n\t\treturn this.table.module(key);\r\n\t}\r\n}","export default class Helpers{\r\n\r\n\tstatic elVisible(el){\r\n\t\treturn !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\r\n\t}\r\n\r\n\tstatic elOffset(el){\r\n\t\tvar box = el.getBoundingClientRect();\r\n\r\n\t\treturn {\r\n\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\r\n\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\r\n\t\t};\r\n\t}\r\n\r\n\tstatic deepClone(obj, clone, list = []){\r\n\t\tvar objectProto = {}.__proto__,\r\n\t\tarrayProto = [].__proto__;\r\n\r\n\t\tif (!clone){\r\n\t\t\tclone = Object.assign(Array.isArray(obj) ? [] : {}, obj);\r\n\t\t}\r\n\r\n\t\tfor(var i in obj) {\r\n\t\t\tlet subject = obj[i],\r\n\t\t\tmatch, copy;\r\n\r\n\t\t\tif(subject != null && typeof subject === \"object\" && (subject.__proto__ === objectProto || subject.__proto__ === arrayProto)){\r\n\t\t\t\tmatch = list.findIndex((item) => {\r\n\t\t\t\t\treturn item.subject === subject;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(match > -1){\r\n\t\t\t\t\tclone[i] = list[match].copy;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcopy = Object.assign(Array.isArray(subject) ? [] : {}, subject);\r\n\r\n\t\t\t\t\tlist.unshift({subject, copy});\r\n\r\n\t\t\t\t\tclone[i] = this.deepClone(subject, copy, list);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn clone;\r\n\t}\r\n}","import CoreFeature from '../CoreFeature.js';\r\nimport Helpers from './Helpers.js';\r\n\r\nexport default class Popup extends CoreFeature{\r\n\tconstructor(table, element, parent){\r\n\t\tsuper(table);\r\n        \r\n\t\tthis.element = element;\r\n\t\tthis.container = this._lookupContainer();\r\n        \r\n\t\tthis.parent = parent;\r\n        \r\n\t\tthis.reversedX = false;\r\n\t\tthis.childPopup = null;\r\n\t\tthis.blurable = false;\r\n\t\tthis.blurCallback = null;\r\n\t\tthis.renderedCallback = null;\r\n        \r\n\t\tthis.visible = false;\r\n\t\tthis.hideable = true;\r\n        \r\n\t\tthis.element.classList.add(\"tabulator-popup-container\");\r\n        \r\n\t\tthis.blurEvent = this.hide.bind(this, false);\r\n\t\tthis.escEvent = this._escapeCheck.bind(this);\r\n\r\n\t\tthis.destroyBinding = this.tableDestroyed;\r\n\t\tthis.destroyed = false;\r\n\t}\r\n\r\n\ttableDestroyed(){\r\n\t\tthis.destroyed = true;\r\n\t\tthis.hide(true);\r\n\t}\r\n    \r\n\t_lookupContainer(){\r\n\t\tvar container = this.table.options.popupContainer;\r\n        \r\n\t\tif(typeof container === \"string\"){\r\n\t\t\tcontainer = document.querySelector(container);\r\n            \r\n\t\t\tif(!container){\r\n\t\t\t\tconsole.warn(\"Menu Error - no container element found matching selector:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\r\n\t\t\t}\r\n\t\t}else if (container === true){\r\n\t\t\tcontainer = this.table.element;\r\n\t\t}\r\n        \r\n\t\tif(container && !this._checkContainerIsParent(container)){\r\n\t\t\tcontainer = false;\r\n\t\t\tconsole.warn(\"Menu Error - container element does not contain this table:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\r\n\t\t}\r\n        \r\n\t\tif(!container){\r\n\t\t\tcontainer = document.body;\r\n\t\t}\r\n        \r\n\t\treturn container;\r\n\t}\r\n    \r\n\t_checkContainerIsParent(container, element = this.table.element){\r\n\t\tif(container === element){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn element.parentNode ? this._checkContainerIsParent(container, element.parentNode) : false;\r\n\t\t}\r\n\t}\r\n    \r\n\trenderCallback(callback){\r\n\t\tthis.renderedCallback = callback;\r\n\t}\r\n    \r\n\tcontainerEventCoords(e){\r\n\t\tvar touch = !(e instanceof MouseEvent);\r\n        \r\n\t\tvar x = touch ? e.touches[0].pageX : e.pageX;\r\n\t\tvar y = touch ? e.touches[0].pageY : e.pageY;\r\n        \r\n\t\tif(this.container !== document.body){\r\n\t\t\tlet parentOffset = Helpers.elOffset(this.container);\r\n            \r\n\t\t\tx -= parentOffset.left;\r\n\t\t\ty -= parentOffset.top;\r\n\t\t}\r\n        \r\n\t\treturn {x, y};\r\n\t}\r\n    \r\n\telementPositionCoords(element, position = \"right\"){\r\n\t\tvar offset = Helpers.elOffset(element),\r\n\t\tcontainerOffset, x, y;\r\n        \r\n\t\tif(this.container !== document.body){\r\n\t\t\tcontainerOffset = Helpers.elOffset(this.container);\r\n            \r\n\t\t\toffset.left -= containerOffset.left;\r\n\t\t\toffset.top -= containerOffset.top;\r\n\t\t}\r\n        \r\n\t\tswitch(position){\r\n\t\t\tcase \"right\":\r\n\t\t\t\tx = offset.left + element.offsetWidth;\r\n\t\t\t\ty = offset.top - 1;\r\n\t\t\t\tbreak;\r\n            \r\n\t\t\tcase \"bottom\":\r\n\t\t\t\tx = offset.left;\r\n\t\t\t\ty = offset.top + element.offsetHeight;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n        \r\n\t\treturn {x, y, offset};\r\n\t}\r\n    \r\n\tshow(origin, position){\r\n\t\tvar x, y, parentEl, parentOffset, coords;\r\n\r\n\t\tif(this.destroyed || this.table.destroyed){\r\n\t\t\treturn this;\r\n\t\t}\r\n        \r\n\t\tif(origin instanceof HTMLElement){\r\n\t\t\tparentEl = origin;\r\n\t\t\tcoords = this.elementPositionCoords(origin, position);\r\n            \r\n\t\t\tparentOffset = coords.offset;\r\n\t\t\tx = coords.x;\r\n\t\t\ty = coords.y;\r\n            \r\n\t\t}else if(typeof origin === \"number\"){\r\n\t\t\tparentOffset = {top:0, left:0};\r\n\t\t\tx = origin;\r\n\t\t\ty = position;\r\n\t\t}else{\r\n\t\t\tcoords = this.containerEventCoords(origin);\r\n            \r\n\t\t\tx = coords.x;\r\n\t\t\ty = coords.y;\r\n            \r\n\t\t\tthis.reversedX = false;\r\n\t\t}\r\n        \r\n\t\tthis.element.style.top = y + \"px\";\r\n\t\tthis.element.style.left = x + \"px\";\r\n        \r\n\t\tthis.container.appendChild(this.element);\r\n        \r\n\t\tif(typeof this.renderedCallback === \"function\"){\r\n\t\t\tthis.renderedCallback();\r\n\t\t}\r\n        \r\n\t\tthis._fitToScreen(x, y, parentEl, parentOffset, position);\r\n        \r\n\t\tthis.visible = true;\r\n\r\n\t\tthis.subscribe(\"table-destroy\", this.destroyBinding);\r\n\r\n\t\tthis.element.addEventListener(\"mousedown\", (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n        \r\n\t\treturn this;\r\n\t}\r\n    \r\n\t_fitToScreen(x, y, parentEl, parentOffset, position){\r\n\t\tvar scrollTop = this.container === document.body ? document.documentElement.scrollTop : this.container.scrollTop;\r\n\r\n\t\t//move menu to start on right edge if it is too close to the edge of the screen\r\n\t\tif((x + this.element.offsetWidth) >= this.container.offsetWidth || this.reversedX){\r\n\t\t\tthis.element.style.left = \"\";\r\n            \r\n\t\t\tif(parentEl){\r\n\t\t\t\tthis.element.style.right = (this.container.offsetWidth - parentOffset.left) + \"px\";\r\n\t\t\t}else{\r\n\t\t\t\tthis.element.style.right = (this.container.offsetWidth - x) + \"px\";\r\n\t\t\t}\r\n            \r\n\t\t\tthis.reversedX = true;\r\n\t\t}\r\n\r\n\t\t//move menu to start on bottom edge if it is too close to the edge of the screen\r\n\t\tif((y + this.element.offsetHeight) > Math.max(this.container.offsetHeight, scrollTop ? this.container.scrollHeight : 0)) {\r\n\t\t\tif(parentEl){\r\n\t\t\t\tswitch(position){\r\n\t\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight - parentEl.offsetHeight - 1) + \"px\";\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight + parentEl.offsetHeight + 1) + \"px\";\r\n\t\t\t\t}\r\n                \r\n\t\t\t}else{\r\n\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight) + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    \r\n\tisVisible(){\r\n\t\treturn this.visible;\r\n\t}\r\n    \r\n\thideOnBlur(callback){\r\n\t\tthis.blurable = true;\r\n        \r\n\t\tif(this.visible){\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\r\n\t\t\t\tthis.subscribe(\"cell-editing\", this.blurEvent);\r\n\t\t\t\tdocument.body.addEventListener(\"click\", this.blurEvent);\r\n\t\t\t\tdocument.body.addEventListener(\"contextmenu\", this.blurEvent);\r\n\t\t\t\tdocument.body.addEventListener(\"mousedown\", this.blurEvent);\r\n\t\t\t\twindow.addEventListener(\"resize\", this.blurEvent);\r\n\t\t\t\tdocument.body.addEventListener(\"keydown\", this.escEvent);\r\n\r\n\t\t\t}, 100);\r\n            \r\n\t\t\tthis.blurCallback = callback;\r\n\t\t}\r\n        \r\n\t\treturn this;\r\n\t}\r\n    \r\n\t_escapeCheck(e){\r\n\t\tif(e.keyCode == 27){\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t}\r\n\r\n\tblockHide(){\r\n\t\tthis.hideable = false;\r\n\t}\r\n\r\n\trestoreHide(){\r\n\t\tthis.hideable = true;\r\n\t}\r\n    \r\n\thide(silent = false){\r\n\t\tif(this.visible && this.hideable){\r\n\t\t\tif(this.blurable){\r\n\t\t\t\tdocument.body.removeEventListener(\"keydown\", this.escEvent);\r\n\t\t\t\tdocument.body.removeEventListener(\"click\", this.blurEvent);\r\n\t\t\t\tdocument.body.removeEventListener(\"contextmenu\", this.blurEvent);\r\n\t\t\t\tdocument.body.removeEventListener(\"mousedown\", this.blurEvent);\r\n\t\t\t\twindow.removeEventListener(\"resize\", this.blurEvent);\r\n\t\t\t\tthis.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\r\n\t\t\t\tthis.unsubscribe(\"cell-editing\", this.blurEvent);\r\n\t\t\t}\r\n            \r\n\t\t\tif(this.childPopup){\r\n\t\t\t\tthis.childPopup.hide();\r\n\t\t\t}\r\n            \r\n\t\t\tif(this.parent){\r\n\t\t\t\tthis.parent.childPopup = null;\r\n\t\t\t}\r\n            \r\n\t\t\tif(this.element.parentNode){\r\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\t}\r\n\r\n\t\t\tthis.visible = false;\r\n\r\n\t\t\tif(this.blurCallback && !silent){\r\n\t\t\t\tthis.blurCallback();\r\n\t\t\t}\r\n\r\n\t\t\tthis.unsubscribe(\"table-destroy\", this.destroyBinding);\r\n\t\t}\r\n        \r\n\t\treturn this;\r\n\t}\r\n    \r\n\tchild(element){\r\n\t\tif(this.childPopup){\r\n\t\t\tthis.childPopup.hide();\r\n\t\t}\r\n        \r\n\t\tthis.childPopup = new Popup(this.table, element, this);\r\n        \r\n\t\treturn this.childPopup;\r\n\t}\r\n}","import CoreFeature from './CoreFeature.js';\r\nimport Popup from './tools/Popup.js';\r\n\r\nclass Module extends CoreFeature{\r\n\r\n\tconstructor(table, name){\r\n\t\tsuper(table);\r\n\r\n\t\tthis._handler = null;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\t// setup module when table is initialized, to be overridden in module\r\n\t}\r\n\r\n\r\n\t///////////////////////////////////\r\n\t////// Options Registration ///////\r\n\t///////////////////////////////////\r\n\r\n\tregisterTableOption(key, value){\r\n\t\tthis.table.optionsList.register(key, value);\r\n\t}\r\n\r\n\tregisterColumnOption(key, value){\r\n\t\tthis.table.columnManager.optionsList.register(key, value);\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t/// Public Function Registration ///\r\n\t///////////////////////////////////\r\n\r\n\tregisterTableFunction(name, func){\r\n\t\tif(typeof this.table[name] === \"undefined\"){\r\n\t\t\tthis.table[name] = (...args) => {\r\n\t\t\t\tthis.table.initGuard(name);\r\n\r\n\t\t\t\treturn func(...args);\r\n\t\t\t};\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Unable to bind table function, name already in use\", name);\r\n\t\t}\r\n\t}\r\n\r\n\tregisterComponentFunction(component, func, handler){\r\n\t\treturn this.table.componentFunctionBinder.bind(component, func, handler);\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t////////// Data Pipeline //////////\r\n\t///////////////////////////////////\r\n\r\n\tregisterDataHandler(handler, priority){\r\n\t\tthis.table.rowManager.registerDataPipelineHandler(handler, priority);\r\n\t\tthis._handler = handler;\r\n\t}\r\n\r\n\tregisterDisplayHandler(handler, priority){\r\n\t\tthis.table.rowManager.registerDisplayPipelineHandler(handler, priority);\r\n\t\tthis._handler = handler;\r\n\t}\r\n\r\n\trefreshData(renderInPosition, handler){\r\n\t\tif(!handler){\r\n\t\t\thandler = this._handler;\r\n\t\t}\r\n\r\n\t\tif(handler){\r\n\t\t\tthis.table.rowManager.refreshActiveData(handler, false, renderInPosition);\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t//////// Footer Management ////////\r\n\t///////////////////////////////////\r\n\r\n\tfooterAppend(element){\r\n\t\treturn this.table.footerManager.append(element);\r\n\t}\r\n\r\n\tfooterPrepend(element){\r\n\t\treturn this.table.footerManager.prepend(element);\r\n\t}\r\n\r\n\tfooterRemove(element){\r\n\t\treturn this.table.footerManager.remove(element);\r\n\t} \r\n\r\n\t///////////////////////////////////\r\n\t//////// Popups Management ////////\r\n\t///////////////////////////////////\r\n\t\r\n\tpopup(menuEl, menuContainer){\r\n\t\treturn new Popup(this.table, menuEl, menuContainer);\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t//////// Alert Management ////////\r\n\t///////////////////////////////////\r\n\r\n\talert(content, type){\r\n\t\treturn this.table.alertManager.alert(content, type);\r\n\t}\r\n\r\n\tclearAlert(){\r\n\t\treturn this.table.alertManager.clear();\r\n\t}\r\n\t\r\n}\r\n\r\nexport default Module;","export default {};","import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/tools/Helpers.js';\r\n\r\nimport defaultAccessors from './defaults/accessors.js';\r\n\r\nclass Accessor extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"]; //list of accessor types\r\n\r\n\t\tthis.registerColumnOption(\"accessor\");\r\n\t\tthis.registerColumnOption(\"accessorParams\");\r\n\t\tthis.registerColumnOption(\"accessorData\");\r\n\t\tthis.registerColumnOption(\"accessorDataParams\");\r\n\t\tthis.registerColumnOption(\"accessorDownload\");\r\n\t\tthis.registerColumnOption(\"accessorDownloadParams\");\r\n\t\tthis.registerColumnOption(\"accessorClipboard\");\r\n\t\tthis.registerColumnOption(\"accessorClipboardParams\");\r\n\t\tthis.registerColumnOption(\"accessorPrint\");\r\n\t\tthis.registerColumnOption(\"accessorPrintParams\");\r\n\t\tthis.registerColumnOption(\"accessorHtmlOutput\");\r\n\t\tthis.registerColumnOption(\"accessorHtmlOutputParams\");\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\r\n\t\tthis.subscribe(\"row-data-retrieve\", this.transformRow.bind(this));\r\n\t}\r\n\r\n\t//initialize column accessor\r\n\tinitializeColumn(column){\r\n\t\tvar match = false,\r\n\t\tconfig = {};\r\n\r\n\t\tthis.allowedTypes.forEach((type) => {\r\n\t\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\r\n\t\t\taccessor;\r\n\r\n\t\t\tif(column.definition[key]){\r\n\t\t\t\taccessor = this.lookupAccessor(column.definition[key]);\r\n\r\n\t\t\t\tif(accessor){\r\n\t\t\t\t\tmatch = true;\r\n\r\n\t\t\t\t\tconfig[key] = {\r\n\t\t\t\t\t\taccessor:accessor,\r\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(match){\r\n\t\t\tcolumn.modules.accessor = config;\r\n\t\t}\r\n\t}\r\n\r\n\tlookupAccessor(value){\r\n\t\tvar accessor = false;\r\n\r\n\t\t//set column accessor\r\n\t\tswitch(typeof value){\r\n\t\t\tcase \"string\":\r\n\t\t\t\tif(Accessor.accessors[value]){\r\n\t\t\t\t\taccessor = Accessor.accessors[value];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\t\taccessor = value;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn accessor;\r\n\t}\r\n\r\n\t//apply accessor to row\r\n\ttransformRow(row, type){\r\n\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\r\n\t\trowComponent = row.getComponent();\r\n\r\n\t\t//clone data object with deep copy to isolate internal data from returned result\r\n\t\tvar data = Helpers.deepClone(row.data || {});\r\n\r\n\t\tthis.table.columnManager.traverse(function(column){\r\n\t\t\tvar value, accessor, params, colComponent;\r\n\r\n\t\t\tif(column.modules.accessor){\r\n\r\n\t\t\t\taccessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\r\n\r\n\t\t\t\tif(accessor){\r\n\t\t\t\t\tvalue = column.getFieldValue(data);\r\n\r\n\t\t\t\t\tif(value != \"undefined\"){\r\n\t\t\t\t\t\tcolComponent = column.getComponent();\r\n\t\t\t\t\t\tparams = typeof accessor.params === \"function\" ? accessor.params(value, data, type, colComponent, rowComponent) : accessor.params;\r\n\t\t\t\t\t\tcolumn.setFieldValue(data, accessor.accessor(value, data, type, params, colComponent, rowComponent));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n}\r\n\r\n//load defaults\r\nAccessor.moduleName = \"accessor\";\r\nAccessor.accessors = defaultAccessors;\r\n\r\nexport default Accessor;","export default {\r\n\tmethod: \"GET\",\r\n};","function generateParamsList(data, prefix){\r\n\tvar output = [];\r\n\r\n\tprefix = prefix || \"\";\r\n\r\n\tif(Array.isArray(data)){\r\n\t\tdata.forEach((item, i) => {\r\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\r\n\t\t});\r\n\t}else if (typeof data === \"object\"){\r\n\t\tfor (var key in data){\r\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\r\n\t\t}\r\n\t}else{\r\n\t\toutput.push({key:prefix, value:data});\r\n\t}\r\n\r\n\treturn output;\r\n}\r\n\r\nfunction serializeParams(params){\r\n\tvar output = generateParamsList(params),\r\n\tencoded = [];\r\n\r\n\toutput.forEach(function(item){\r\n\t\tencoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\r\n\t});\r\n\r\n\treturn encoded.join(\"&\");\r\n}\r\n\r\nexport default function(url, config, params){\r\n\tif(url){\r\n\t\tif(params && Object.keys(params).length){\r\n\t\t\tif(!config.method || config.method.toLowerCase() == \"get\"){\r\n\t\t\t\tconfig.method = \"get\";\r\n\r\n\t\t\t\turl += (url.includes(\"?\") ? \"&\" : \"?\") + serializeParams(params);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn url;\r\n}","export default function(url, config, params){\r\n\tvar contentType;\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\t\t//set url\r\n\t\turl = this.urlGenerator.call(this.table, url, config, params);\r\n\r\n\t\t//set body content if not GET request\r\n\t\tif(config.method.toUpperCase() != \"GET\"){\r\n\t\t\tcontentType = typeof this.table.options.ajaxContentType === \"object\" ?  this.table.options.ajaxContentType : this.contentTypeFormatters[this.table.options.ajaxContentType];\r\n\t\t\tif(contentType){\r\n\r\n\t\t\t\tfor(var key in contentType.headers){\r\n\t\t\t\t\tif(!config.headers){\r\n\t\t\t\t\t\tconfig.headers = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(typeof config.headers[key] === \"undefined\"){\r\n\t\t\t\t\t\tconfig.headers[key] = contentType.headers[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconfig.body = contentType.body.call(this, url, config, params);\r\n\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Ajax Error - Invalid ajaxContentType value:\", this.table.options.ajaxContentType);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(url){\r\n\t\t\t//configure headers\r\n\t\t\tif(typeof config.headers === \"undefined\"){\r\n\t\t\t\tconfig.headers = {};\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof config.headers.Accept === \"undefined\"){\r\n\t\t\t\tconfig.headers.Accept = \"application/json\";\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof config.headers[\"X-Requested-With\"] === \"undefined\"){\r\n\t\t\t\tconfig.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof config.mode === \"undefined\"){\r\n\t\t\t\tconfig.mode = \"cors\";\r\n\t\t\t}\r\n\r\n\t\t\tif(config.mode == \"cors\"){\r\n\t\t\t\tif(typeof config.headers[\"Origin\"] === \"undefined\"){\r\n\t\t\t\t\tconfig.headers[\"Origin\"] = window.location.origin;\r\n\t\t\t\t}\r\n        \r\n\t\t\t\tif(typeof config.credentials === \"undefined\"){\r\n\t\t\t\t\tconfig.credentials = 'same-origin';\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(typeof config.credentials === \"undefined\"){\r\n\t\t\t\t\tconfig.credentials = 'include';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//send request\r\n\t\t\tfetch(url, config)\r\n\t\t\t\t.then((response)=>{\r\n\t\t\t\t\tif(response.ok) {\r\n\t\t\t\t\t\tresponse.json()\r\n\t\t\t\t\t\t\t.then((data)=>{\r\n\t\t\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t\t\t}).catch((error)=>{\r\n\t\t\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t\t\t\tconsole.warn(\"Ajax Load Error - Invalid JSON returned\", error);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\r\n\t\t\t\t\t\treject(response);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error)=>{\r\n\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \", error);\r\n\t\t\t\t\treject(error);\r\n\t\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Ajax Load Error - No URL Set\");\r\n\t\t\tresolve([]);\r\n\t\t}\r\n\t});\r\n}","function generateParamsList(data, prefix){\r\n\tvar output = [];\r\n\r\n\tprefix = prefix || \"\";\r\n\r\n\tif(Array.isArray(data)){\r\n\t\tdata.forEach((item, i) => {\r\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\r\n\t\t});\r\n\t}else if (typeof data === \"object\"){\r\n\t\tfor (var key in data){\r\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\r\n\t\t}\r\n\t}else{\r\n\t\toutput.push({key:prefix, value:data});\r\n\t}\r\n\r\n\treturn output;\r\n}\r\n\r\nexport default {\r\n\t\"json\":{\r\n\t\theaders:{\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t},\r\n\t\tbody:function(url, config, params){\r\n\t\t\treturn JSON.stringify(params);\r\n\t\t},\r\n\t},\r\n\t\"form\":{\r\n\t\theaders:{\r\n\t\t},\r\n\t\tbody:function(url, config, params){\r\n\r\n\t\t\tvar output = generateParamsList(params),\r\n\t\t\tform = new FormData();\r\n\r\n\t\t\toutput.forEach(function(item){\r\n\t\t\t\tform.append(item.key, item.value);\r\n\t\t\t});\r\n\r\n\t\t\treturn form;\r\n\t\t},\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultConfig from './defaults/config.js';\r\nimport defaultURLGenerator from './defaults/urlGenerator.js';\r\nimport defaultLoaderPromise from './defaults/loaderPromise.js';\r\nimport defaultContentTypeFormatters from './defaults/contentTypeFormatters.js';\r\n\r\nclass Ajax extends Module{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.config = {}; //hold config object for ajax request\r\n\t\tthis.url = \"\"; //request URL\r\n\t\tthis.urlGenerator = false;\r\n\t\tthis.params = false; //request parameters\r\n\t\t\r\n\t\tthis.loaderPromise = false;\r\n\t\t\r\n\t\tthis.registerTableOption(\"ajaxURL\", false); //url for ajax loading\r\n\t\tthis.registerTableOption(\"ajaxURLGenerator\", false);\r\n\t\tthis.registerTableOption(\"ajaxParams\", {});  //params for ajax loading\r\n\t\tthis.registerTableOption(\"ajaxConfig\", \"get\"); //ajax request type\r\n\t\tthis.registerTableOption(\"ajaxContentType\", \"form\"); //ajax request type\r\n\t\tthis.registerTableOption(\"ajaxRequestFunc\", false); //promise function\r\n\t\t\r\n\t\tthis.registerTableOption(\"ajaxRequesting\", function(){});\r\n\t\tthis.registerTableOption(\"ajaxResponse\", false);\r\n\t\t\r\n\t\tthis.contentTypeFormatters = Ajax.contentTypeFormatters;\r\n\t}\r\n\t\r\n\t//initialize setup options\r\n\tinitialize(){\r\n\t\tthis.loaderPromise = this.table.options.ajaxRequestFunc || Ajax.defaultLoaderPromise;\r\n\t\tthis.urlGenerator = this.table.options.ajaxURLGenerator || Ajax.defaultURLGenerator;\r\n\t\t\r\n\t\tif(this.table.options.ajaxURL){\r\n\t\t\tthis.setUrl(this.table.options.ajaxURL);\r\n\t\t}\r\n\r\n\r\n\t\tthis.setDefaultConfig(this.table.options.ajaxConfig);\r\n\t\t\r\n\t\tthis.registerTableFunction(\"getAjaxUrl\", this.getUrl.bind(this));\r\n\t\t\r\n\t\tthis.subscribe(\"data-loading\", this.requestDataCheck.bind(this));\r\n\t\tthis.subscribe(\"data-params\", this.requestParams.bind(this));\r\n\t\tthis.subscribe(\"data-load\", this.requestData.bind(this));\r\n\t}\r\n\t\r\n\trequestParams(data, config, silent, params){\r\n\t\tvar ajaxParams = this.table.options.ajaxParams;\r\n\t\t\r\n\t\tif(ajaxParams){\r\n\t\t\tif(typeof ajaxParams === \"function\"){\r\n\t\t\t\tajaxParams = ajaxParams.call(this.table);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tparams = Object.assign(params, ajaxParams);\r\n\t\t}\t\t\r\n\t\t\r\n\t\treturn params;\r\n\t}\r\n\t\r\n\trequestDataCheck(data, params, config, silent){\r\n\t\treturn !!((!data && this.url) || typeof data === \"string\");\r\n\t}\r\n\t\r\n\trequestData(url, params, config, silent, previousData){\r\n\t\tvar ajaxConfig;\r\n\t\t\r\n\t\tif(!previousData && this.requestDataCheck(url)){\r\n\t\t\tif(url){\r\n\t\t\t\tthis.setUrl(url);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tajaxConfig = this.generateConfig(config);\r\n\t\t\t\r\n\t\t\treturn this.sendRequest(this.url, params, ajaxConfig);\r\n\t\t}else{\r\n\t\t\treturn previousData;\r\n\t\t}\r\n\t}\r\n\t\r\n\tsetDefaultConfig(config = {}){\r\n\t\tthis.config = Object.assign({}, Ajax.defaultConfig);\r\n\r\n\t\tif(typeof config == \"string\"){\r\n\t\t\tthis.config.method = config;\r\n\t\t}else{\r\n\t\t\tObject.assign(this.config, config);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//load config object\r\n\tgenerateConfig(config = {}){\r\n\t\tvar ajaxConfig = Object.assign({}, this.config);\r\n\t\t\r\n\t\tif(typeof config == \"string\"){\r\n\t\t\tajaxConfig.method = config;\r\n\t\t}else{\r\n\t\t\tObject.assign(ajaxConfig, config);\r\n\t\t}\r\n\t\t\r\n\t\treturn ajaxConfig;\r\n\t}\r\n\t\r\n\t//set request url\r\n\tsetUrl(url){\r\n\t\tthis.url = url;\r\n\t}\r\n\t\r\n\t//get request url\r\n\tgetUrl(){\r\n\t\treturn this.url;\r\n\t}\r\n\t\r\n\t//send ajax request\r\n\tsendRequest(url, params, config){\r\n\t\tif(this.table.options.ajaxRequesting.call(this.table, url, params) !== false){\r\n\t\t\treturn this.loaderPromise(url, config, params)\r\n\t\t\t\t.then((data)=>{\r\n\t\t\t\t\tif(this.table.options.ajaxResponse){\r\n\t\t\t\t\t\tdata = this.table.options.ajaxResponse.call(this.table, url, params, data);\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t});\r\n\t\t}else{\r\n\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nAjax.moduleName = \"ajax\";\r\n\r\n//load defaults\r\nAjax.defaultConfig = defaultConfig;\r\nAjax.defaultURLGenerator = defaultURLGenerator;\r\nAjax.defaultLoaderPromise = defaultLoaderPromise;\r\nAjax.contentTypeFormatters = defaultContentTypeFormatters;\r\n\r\nexport default Ajax;","export default {\r\n\treplace:function(rows){\r\n\t\treturn this.table.setData(rows);\r\n\t},\r\n\tupdate:function(rows){\r\n\t\treturn this.table.updateOrAddData(rows);\r\n\t},\r\n\tinsert:function(rows){\r\n\t\treturn this.table.addData(rows);\r\n\t},\r\n};","export default {\r\n\ttable:function(clipboard){\r\n\t\tvar data = [],\r\n\t\theaderFindSuccess = true,\r\n\t\tcolumns = this.table.columnManager.columns,\r\n\t\tcolumnMap = [],\r\n\t\trows = [];\r\n\r\n\t\t//get data from clipboard into array of columns and rows.\r\n\t\tclipboard = clipboard.split(\"\\n\");\r\n\r\n\t\tclipboard.forEach(function(row){\r\n\t\t\tdata.push(row.split(\"\\t\"));\r\n\t\t});\r\n\r\n\t\tif(data.length && !(data.length === 1 && data[0].length < 2)){\r\n\r\n\t\t\t//check if headers are present by title\r\n\t\t\tdata[0].forEach(function(value){\r\n\t\t\t\tvar column = columns.find(function(column){\r\n\t\t\t\t\treturn value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tcolumnMap.push(column);\r\n\t\t\t\t}else{\r\n\t\t\t\t\theaderFindSuccess = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//check if column headers are present by field\r\n\t\t\tif(!headerFindSuccess){\r\n\t\t\t\theaderFindSuccess = true;\r\n\t\t\t\tcolumnMap = [];\r\n\r\n\t\t\t\tdata[0].forEach(function(value){\r\n\t\t\t\t\tvar column = columns.find(function(column){\r\n\t\t\t\t\t\treturn value && column.field && value.trim() && column.field.trim() === value.trim();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(column){\r\n\t\t\t\t\t\tcolumnMap.push(column);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\theaderFindSuccess = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(!headerFindSuccess){\r\n\t\t\t\t\tcolumnMap = this.table.columnManager.columnsByIndex;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//remove header row if found\r\n\t\t\tif(headerFindSuccess){\r\n\t\t\t\tdata.shift();\r\n\t\t\t}\r\n\r\n\t\t\tdata.forEach(function(item){\r\n\t\t\t\tvar row = {};\r\n\r\n\t\t\t\titem.forEach(function(value, i){\r\n\t\t\t\t\tif(columnMap[i]){\r\n\t\t\t\t\t\trow[columnMap[i].field] = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\trows.push(row);\r\n\t\t\t});\r\n\r\n\t\t\treturn rows;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultPasteActions from './defaults/pasteActions.js';\r\nimport defaultPasteParsers from './defaults/pasteParsers.js';\r\n\r\nclass Clipboard extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.mode = true;\r\n\t\tthis.pasteParser = function(){};\r\n\t\tthis.pasteAction = function(){};\r\n\t\tthis.customSelection = false;\r\n\t\tthis.rowRange = false;\r\n\t\tthis.blocked = true; //block copy actions not originating from this command\r\n\r\n\t\tthis.registerTableOption(\"clipboard\", false); //enable clipboard\r\n\t\tthis.registerTableOption(\"clipboardCopyStyled\", true); //formatted table data\r\n\t\tthis.registerTableOption(\"clipboardCopyConfig\", false); //clipboard config\r\n\t\tthis.registerTableOption(\"clipboardCopyFormatter\", false); //DEPRECATED - REMOVE in 5.0\r\n\t\tthis.registerTableOption(\"clipboardCopyRowRange\", \"active\"); //restrict clipboard to visible rows only\r\n\t\tthis.registerTableOption(\"clipboardPasteParser\", \"table\"); //convert pasted clipboard data to rows\r\n\t\tthis.registerTableOption(\"clipboardPasteAction\", \"insert\"); //how to insert pasted data into the table\r\n\r\n\t\tthis.registerColumnOption(\"clipboard\");\r\n\t\tthis.registerColumnOption(\"titleClipboard\");\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.mode = this.table.options.clipboard;\r\n\r\n\t\tthis.rowRange = this.table.options.clipboardCopyRowRange;\r\n\r\n\t\tif(this.mode === true || this.mode === \"copy\"){\r\n\t\t\tthis.table.element.addEventListener(\"copy\", (e) => {\r\n\t\t\t\tvar plain, html, list;\r\n\r\n\t\t\t\tif(!this.blocked){\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tif(this.customSelection){\r\n\t\t\t\t\t\tplain = this.customSelection;\r\n\r\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\r\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\tlist = this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig, this.table.options.clipboardCopyStyled, this.rowRange, \"clipboard\");\r\n\r\n\t\t\t\t\t\thtml = this.table.modules.export.generateHTMLTable(list);\r\n\t\t\t\t\t\tplain = html ? this.generatePlainContent(list) : \"\";\r\n\r\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\r\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\r\n\t\t\t\t\t\t\thtml = this.table.options.clipboardCopyFormatter(\"html\", html);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (window.clipboardData && window.clipboardData.setData) {\r\n\t\t\t\t\t\twindow.clipboardData.setData('Text', plain);\r\n\t\t\t\t\t} else if (e.clipboardData && e.clipboardData.setData) {\r\n\t\t\t\t\t\te.clipboardData.setData('text/plain', plain);\r\n\t\t\t\t\t\tif(html){\r\n\t\t\t\t\t\t\te.clipboardData.setData('text/html', html);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\r\n\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/plain', plain);\r\n\t\t\t\t\t\tif(html){\r\n\t\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/html', html);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.dispatchExternal(\"clipboardCopied\", plain, html);\r\n\r\n\t\t\t\t\tthis.reset();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.mode === true || this.mode === \"paste\"){\r\n\t\t\tthis.table.element.addEventListener(\"paste\", (e) => {\r\n\t\t\t\tthis.paste(e);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.setPasteParser(this.table.options.clipboardPasteParser);\r\n\t\tthis.setPasteAction(this.table.options.clipboardPasteAction);\r\n\r\n\t\tthis.registerTableFunction(\"copyToClipboard\", this.copy.bind(this));\r\n\t}\r\n\r\n\treset(){\r\n\t\tthis.blocked = true;\r\n\t\tthis.customSelection = false;\r\n\t}\r\n\r\n\tgeneratePlainContent (list) {\r\n\t\tvar output = [];\r\n\r\n\t\tlist.forEach((row) => {\r\n\t\t\tvar rowData = [];\r\n\r\n\t\t\trow.columns.forEach((col) => {\r\n\t\t\t\tvar value = \"\";\r\n\r\n\t\t\t\tif(col){\r\n\r\n\t\t\t\t\tif(row.type === \"group\"){\r\n\t\t\t\t\t\tcol.value = col.component.getKey();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(col.value === null){\r\n\t\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tswitch(typeof col.value){\r\n\t\t\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\t\t\tvalue = JSON.stringify(col.value);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tvalue = col.value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowData.push(value);\r\n\t\t\t});\r\n\r\n\t\t\toutput.push(rowData.join(\"\\t\"));\r\n\t\t});\r\n\r\n\t\treturn output.join(\"\\n\");\r\n\t}\r\n\r\n\tcopy (range, internal) {\r\n\t\tvar sel, textRange;\r\n\t\tthis.blocked = false;\r\n\t\tthis.customSelection = false;\r\n\r\n\t\tif (this.mode === true || this.mode === \"copy\") {\r\n\r\n\t\t\tthis.rowRange = range || this.table.options.clipboardCopyRowRange;\r\n\r\n\t\t\tif (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\r\n\t\t\t\trange = document.createRange();\r\n\t\t\t\trange.selectNodeContents(this.table.element);\r\n\t\t\t\tsel = window.getSelection();\r\n\r\n\t\t\t\tif (sel.toString() && internal) {\r\n\t\t\t\t\tthis.customSelection = sel.toString();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsel.removeAllRanges();\r\n\t\t\t\tsel.addRange(range);\r\n\t\t\t} else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\r\n\t\t\t\ttextRange = document.body.createTextRange();\r\n\t\t\t\ttextRange.moveToElementText(this.table.element);\r\n\t\t\t\ttextRange.select();\r\n\t\t\t}\r\n\r\n\t\t\tdocument.execCommand('copy');\r\n\r\n\t\t\tif (sel) {\r\n\t\t\t\tsel.removeAllRanges();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//PASTE EVENT HANDLING\r\n\tsetPasteAction(action){\r\n\r\n\t\tswitch(typeof action){\r\n\t\t\tcase \"string\":\r\n\t\t\t\tthis.pasteAction = Clipboard.pasteActions[action];\r\n\r\n\t\t\t\tif(!this.pasteAction){\r\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste action found:\", action);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\t\tthis.pasteAction = action;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tsetPasteParser(parser){\r\n\t\tswitch(typeof parser){\r\n\t\t\tcase \"string\":\r\n\t\t\t\tthis.pasteParser = Clipboard.pasteParsers[parser];\r\n\r\n\t\t\t\tif(!this.pasteParser){\r\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste parser found:\", parser);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\t\tthis.pasteParser = parser;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tpaste(e){\r\n\t\tvar data, rowData, rows;\r\n\r\n\t\tif(this.checkPaseOrigin(e)){\r\n\r\n\t\t\tdata = this.getPasteData(e);\r\n\r\n\t\t\trowData = this.pasteParser.call(this, data);\r\n\r\n\t\t\tif(rowData){\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif(this.table.modExists(\"mutator\")){\r\n\t\t\t\t\trowData = this.mutateData(rowData);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trows = this.pasteAction.call(this, rowData);\r\n\r\n\t\t\t\tthis.dispatchExternal(\"clipboardPasted\", data, rowData, rows);\r\n\t\t\t}else{\r\n\t\t\t\tthis.dispatchExternal(\"clipboardPasteError\", data);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmutateData(data){\r\n\t\tvar output = [];\r\n\r\n\t\tif(Array.isArray(data)){\r\n\t\t\tdata.forEach((row) => {\r\n\t\t\t\toutput.push(this.table.modules.mutator.transformRow(row, \"clipboard\"));\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\toutput = data;\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\r\n\tcheckPaseOrigin(e){\r\n\t\tvar valid = true;\r\n\r\n\t\tif(e.target.tagName != \"DIV\" || this.table.modules.edit.currentCell){\r\n\t\t\tvalid = false;\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\t}\r\n\r\n\tgetPasteData(e){\r\n\t\tvar data;\r\n\r\n\t\tif (window.clipboardData && window.clipboardData.getData) {\r\n\t\t\tdata = window.clipboardData.getData('Text');\r\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\r\n\t\t\tdata = e.clipboardData.getData('text/plain');\r\n\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\r\n\t\t\tdata = e.originalEvent.clipboardData.getData('text/plain');\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n}\r\n\r\nClipboard.moduleName = \"clipboard\";\r\n\r\n//load defaults\r\nClipboard.pasteActions = defaultPasteActions;\r\nClipboard.pasteParsers = defaultPasteParsers;\r\n\r\nexport default Clipboard;","class CalcComponent{\r\n\tconstructor (row){\r\n\t\tthis._row = row;\r\n\r\n\t\treturn new Proxy(this, {\r\n\t\t\tget: function(target, name, receiver) {\r\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\r\n\t\t\t\t\treturn target[name];\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetData(transform){\r\n\t\treturn this._row.getData(transform);\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._row.getElement();\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._row.table;\r\n\t}\r\n\r\n\tgetCells(){\r\n\t\tvar cells = [];\r\n\r\n\t\tthis._row.getCells().forEach(function(cell){\r\n\t\t\tcells.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn cells;\r\n\t}\r\n\r\n\tgetCell(column){\r\n\t\tvar cell = this._row.getCell(column);\r\n\t\treturn cell ? cell.getComponent() : false;\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._row;\r\n\t}\r\n}\r\n\r\nexport default CalcComponent;","//public cell object\r\nexport default class CellComponent {\r\n\r\n\tconstructor (cell){\r\n\t\tthis._cell = cell;\r\n\r\n\t\treturn new Proxy(this, {\r\n\t\t\tget: function(target, name, receiver) {\r\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\r\n\t\t\t\t\treturn target[name];\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn target._cell.table.componentFunctionBinder.handle(\"cell\", target._cell, name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetValue(){\r\n\t\treturn this._cell.getValue();\r\n\t}\r\n\r\n\tgetOldValue(){\r\n\t\treturn this._cell.getOldValue();\r\n\t}\r\n\r\n\tgetInitialValue(){\r\n\t\treturn this._cell.initialValue;\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._cell.getElement();\r\n\t}\r\n\r\n\tgetRow(){\r\n\t\treturn this._cell.row.getComponent();\r\n\t}\r\n\r\n\tgetData(){\r\n\t\treturn this._cell.row.getData();\r\n\t}\r\n\r\n\tgetField(){\r\n\t\treturn this._cell.column.getField();\r\n\t}\r\n\r\n\tgetColumn(){\r\n\t\treturn this._cell.column.getComponent();\r\n\t}\r\n\r\n\tsetValue(value, mutate){\r\n\t\tif(typeof mutate == \"undefined\"){\r\n\t\t\tmutate = true;\r\n\t\t}\r\n\r\n\t\tthis._cell.setValue(value, mutate);\r\n\t}\r\n\r\n\trestoreOldValue(){\r\n\t\tthis._cell.setValueActual(this._cell.getOldValue());\r\n\t}\r\n\r\n\trestoreInitialValue(){\r\n\t\tthis._cell.setValueActual(this._cell.initialValue);\r\n\t}\r\n\r\n\tcheckHeight(){\r\n\t\tthis._cell.checkHeight();\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._cell.table;\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._cell;\r\n\t}\r\n}","import CoreFeature from '../CoreFeature.js';\r\nimport CellComponent from './CellComponent.js';\r\n\r\nexport default class Cell extends CoreFeature{\r\n\tconstructor(column, row){\r\n\t\tsuper(column.table);\r\n\r\n\t\tthis.table = column.table;\r\n\t\tthis.column = column;\r\n\t\tthis.row = row;\r\n\t\tthis.element = null;\r\n\t\tthis.value = null;\r\n\t\tthis.initialValue;\r\n\t\tthis.oldValue = null;\r\n\t\tthis.modules = {};\r\n\r\n\t\tthis.height = null;\r\n\t\tthis.width = null;\r\n\t\tthis.minWidth = null;\r\n\r\n\t\tthis.component = null;\r\n\r\n\t\tthis.loaded = false; //track if the cell has been added to the DOM yet\r\n\r\n\t\tthis.build();\r\n\t}\r\n\r\n\t//////////////// Setup Functions /////////////////\r\n\t//generate element\r\n\tbuild(){\r\n\t\tthis.generateElement();\r\n\r\n\t\tthis.setWidth();\r\n\r\n\t\tthis._configureCell();\r\n\r\n\t\tthis.setValueActual(this.column.getFieldValue(this.row.data));\r\n\r\n\t\tthis.initialValue = this.value;\r\n\t}\r\n\r\n\tgenerateElement(){\r\n\t\tthis.element = document.createElement('div');\r\n\t\tthis.element.className = \"tabulator-cell\";\r\n\t\tthis.element.setAttribute(\"role\", \"gridcell\");\r\n\t}\r\n\r\n\t_configureCell(){\r\n\t\tvar element = this.element,\r\n\t\tfield = this.column.getField(),\r\n\t\tvertAligns = {\r\n\t\t\ttop:\"flex-start\",\r\n\t\t\tbottom:\"flex-end\",\r\n\t\t\tmiddle:\"center\",\r\n\t\t},\r\n\t\thozAligns = {\r\n\t\t\tleft:\"flex-start\",\r\n\t\t\tright:\"flex-end\",\r\n\t\t\tcenter:\"center\",\r\n\t\t};\r\n\r\n\t\t//set text alignment\r\n\t\telement.style.textAlign = this.column.hozAlign;\r\n\r\n\t\tif(this.column.vertAlign){\r\n\t\t\telement.style.display = \"inline-flex\";\r\n\r\n\t\t\telement.style.alignItems = vertAligns[this.column.vertAlign] || \"\";\r\n\r\n\t\t\tif(this.column.hozAlign){\r\n\t\t\t\telement.style.justifyContent = hozAligns[this.column.hozAlign] || \"\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(field){\r\n\t\t\telement.setAttribute(\"tabulator-field\", field);\r\n\t\t}\r\n\r\n\t\t//add class to cell if needed\r\n\t\tif(this.column.definition.cssClass){\r\n\t\t\tvar classNames = this.column.definition.cssClass.split(\" \");\r\n\t\t\tclassNames.forEach((className) => {\r\n\t\t\t\telement.classList.add(className);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.dispatch(\"cell-init\", this);\r\n\r\n\t\t//hide cell if not visible\r\n\t\tif(!this.column.visible){\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t//generate cell contents\r\n\t_generateContents(){\r\n\t\tvar val;\r\n\r\n\t\tval = this.chain(\"cell-format\", this, null, () => {\r\n\t\t\treturn this.element.innerHTML = this.value;\r\n\t\t});\r\n\r\n\t\tswitch(typeof val){\r\n\t\t\tcase \"object\":\r\n\t\t\t\tif(val instanceof Node){\r\n\r\n\t\t\t\t\t//clear previous cell contents\r\n\t\t\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\t\t\t\tthis.element.appendChild(val);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.element.innerHTML = \"\";\r\n\r\n\t\t\t\t\tif(val != null){\r\n\t\t\t\t\t\tconsole.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"undefined\":\r\n\t\t\t\tthis.element.innerHTML = \"\";\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthis.element.innerHTML = val;\r\n\t\t}\r\n\t}\r\n\r\n\tcellRendered(){\r\n\t\tthis.dispatch(\"cell-rendered\", this);\r\n\t}\r\n\r\n\t//////////////////// Getters ////////////////////\r\n\tgetElement(containerOnly){\r\n\t\tif(!this.loaded){\r\n\t\t\tthis.loaded = true;\r\n\t\t\tif(!containerOnly){\r\n\t\t\t\tthis.layoutElement();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tgetValue(){\r\n\t\treturn this.value;\r\n\t}\r\n\r\n\tgetOldValue(){\r\n\t\treturn this.oldValue;\r\n\t}\r\n\r\n\t//////////////////// Actions ////////////////////\r\n\tsetValue(value, mutate, force){\r\n\t\tvar changed = this.setValueProcessData(value, mutate, force);\r\n\r\n\t\tif(changed){\r\n\t\t\tthis.dispatch(\"cell-value-updated\", this);\r\n\r\n\t\t\tthis.cellRendered();\r\n\r\n\t\t\tif(this.column.definition.cellEdited){\r\n\t\t\t\tthis.column.definition.cellEdited.call(this.table, this.getComponent());\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatchExternal(\"cellEdited\", this.getComponent());\r\n\r\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\r\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetValueProcessData(value, mutate, force){\r\n\t\tvar changed = false;\r\n\r\n\t\tif(this.value !== value || force){\r\n\r\n\t\t\tchanged = true;\r\n\r\n\t\t\tif(mutate){\r\n\t\t\t\tvalue = this.chain(\"cell-value-changing\", [this, value], null, value);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setValueActual(value);\r\n\r\n\t\tif(changed){\r\n\t\t\tthis.dispatch(\"cell-value-changed\", this);\r\n\t\t}\r\n\r\n\t\treturn changed;\r\n\t}\r\n\r\n\tsetValueActual(value){\r\n\t\tthis.oldValue = this.value;\r\n\r\n\t\tthis.value = value;\r\n\r\n\t\tthis.dispatch(\"cell-value-save-before\", this);\r\n\r\n\t\tthis.column.setFieldValue(this.row.data, value);\r\n\r\n\t\tthis.dispatch(\"cell-value-save-after\", this);\r\n\r\n\t\tif(this.loaded){\r\n\t\t\tthis.layoutElement();\r\n\t\t}\r\n\t}\r\n\r\n\tlayoutElement(){\r\n\t\tthis._generateContents();\r\n\r\n\t\tthis.dispatch(\"cell-layout\", this);\r\n\t}\r\n\r\n\tsetWidth(){\r\n\t\tthis.width = this.column.width;\r\n\t\tthis.element.style.width = this.column.widthStyled;\r\n\t}\r\n\r\n\tclearWidth(){\r\n\t\tthis.width = \"\";\r\n\t\tthis.element.style.width = \"\";\r\n\t}\r\n\r\n\tgetWidth(){\r\n\t\treturn this.width || this.element.offsetWidth;\r\n\t}\r\n\r\n\tsetMinWidth(){\r\n\t\tthis.minWidth = this.column.minWidth;\r\n\t\tthis.element.style.minWidth = this.column.minWidthStyled;\r\n\t}\r\n\r\n\tsetMaxWidth(){\r\n\t\tthis.maxWidth = this.column.maxWidth;\r\n\t\tthis.element.style.maxWidth = this.column.maxWidthStyled;\r\n\t}\r\n\r\n\tcheckHeight(){\r\n\t\t// var height = this.element.css(\"height\");\r\n\t\tthis.row.reinitializeHeight();\r\n\t}\r\n\r\n\tclearHeight(){\r\n\t\tthis.element.style.height = \"\";\r\n\t\tthis.height = null;\r\n\r\n\t\tthis.dispatch(\"cell-height\", this, \"\");\r\n\t}\r\n\r\n\tsetHeight(){\r\n\t\tthis.height = this.row.height;\r\n\t\tthis.element.style.height = this.row.heightStyled;\r\n\r\n\t\tthis.dispatch(\"cell-height\", this, this.row.heightStyled);\r\n\t}\r\n\r\n\tgetHeight(){\r\n\t\treturn this.height || this.element.offsetHeight;\r\n\t}\r\n\r\n\tshow(){\r\n\t\tthis.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\r\n\t}\r\n\r\n\thide(){\r\n\t\tthis.element.style.display = \"none\";\r\n\t}\r\n\r\n\tdelete(){\r\n\t\tthis.dispatch(\"cell-delete\", this);\r\n\r\n\t\tif(!this.table.rowManager.redrawBlock && this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n\r\n\t\tthis.element = false;\r\n\t\tthis.column.deleteCell(this);\r\n\t\tthis.row.deleteCell(this);\r\n\t\tthis.calcs = {};\r\n\t}\r\n\r\n\tgetIndex(){\r\n\t\treturn this.row.getCellIndex(this);\r\n\t}\r\n\r\n\t//////////////// Object Generation /////////////////\r\n\tgetComponent(){\r\n\t\tif(!this.component){\r\n\t\t\tthis.component = new CellComponent(this);\r\n\t\t}\r\n\r\n\t\treturn this.component;\r\n\t}\r\n}\r\n","import Column from './Column.js';\r\n\r\n//public column object\r\nexport default class ColumnComponent {\r\n\tconstructor (column){\r\n\t\tthis._column = column;\r\n\t\tthis.type = \"ColumnComponent\";\r\n\r\n\t\treturn new Proxy(this, {\r\n\t\t\tget: function(target, name, receiver) {\r\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\r\n\t\t\t\t\treturn target[name];\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn target._column.table.componentFunctionBinder.handle(\"column\", target._column, name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._column.getElement();\r\n\t}\r\n\r\n\tgetDefinition(){\r\n\t\treturn this._column.getDefinition();\r\n\t}\r\n\r\n\tgetField(){\r\n\t\treturn this._column.getField();\r\n\t}\r\n\r\n\tgetTitleDownload() {\r\n\t\treturn this._column.getTitleDownload();\r\n\t}\r\n\r\n\tgetCells(){\r\n\t\tvar cells = [];\r\n\r\n\t\tthis._column.cells.forEach(function(cell){\r\n\t\t\tcells.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn cells;\r\n\t}\r\n\r\n\tisVisible(){\r\n\t\treturn this._column.visible;\r\n\t}\r\n\r\n\tshow(){\r\n\t\tif(this._column.isGroup){\r\n\t\t\tthis._column.columns.forEach(function(column){\r\n\t\t\t\tcolumn.show();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis._column.show();\r\n\t\t}\r\n\t}\r\n\r\n\thide(){\r\n\t\tif(this._column.isGroup){\r\n\t\t\tthis._column.columns.forEach(function(column){\r\n\t\t\t\tcolumn.hide();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis._column.hide();\r\n\t\t}\r\n\t}\r\n\r\n\ttoggle(){\r\n\t\tif(this._column.visible){\r\n\t\t\tthis.hide();\r\n\t\t}else{\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t}\r\n\r\n\tdelete(){\r\n\t\treturn this._column.delete();\r\n\t}\r\n\r\n\tgetSubColumns(){\r\n\t\tvar output = [];\r\n\r\n\t\tif(this._column.columns.length){\r\n\t\t\tthis._column.columns.forEach(function(column){\r\n\t\t\t\toutput.push(column.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetParentColumn(){\r\n\t\treturn this._column.parent instanceof Column ? this._column.parent.getComponent() : false;\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._column;\r\n\t}\r\n\r\n\tscrollTo(){\r\n\t\treturn this._column.table.columnManager.scrollToColumn(this._column);\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._column.table;\r\n\t}\r\n\r\n\tmove(to, after){\r\n\t\tvar toColumn = this._column.table.columnManager.findColumn(to);\r\n\r\n\t\tif(toColumn){\r\n\t\t\tthis._column.table.columnManager.moveColumn(this._column, toColumn, after);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\r\n\t\t}\r\n\t}\r\n\r\n\tgetNextColumn(){\r\n\t\tvar nextCol = this._column.nextColumn();\r\n\r\n\t\treturn nextCol ? nextCol.getComponent() : false;\r\n\t}\r\n\r\n\tgetPrevColumn(){\r\n\t\tvar prevCol = this._column.prevColumn();\r\n\r\n\t\treturn prevCol ? prevCol.getComponent() : false;\r\n\t}\r\n\r\n\tupdateDefinition(updates){\r\n\t\treturn this._column.updateDefinition(updates);\r\n\t}\r\n\r\n\tgetWidth(){\r\n\t\treturn this._column.getWidth();\r\n\t}\r\n\r\n\tsetWidth(width){\r\n\t\tvar result;\r\n\r\n\t\tif(width === true){\r\n\t\t\tresult =  this._column.reinitializeWidth(true);\r\n\t\t}else{\r\n\t\t\tresult =  this._column.setWidth(width);\r\n\t\t}\r\n\r\n\t\tthis._column.table.columnManager.rerenderColumns(true);\r\n\r\n\t\treturn result;\r\n\t}\r\n}","export default {\r\n\t\"title\": undefined,\r\n\t\"field\": undefined,\r\n\t\"columns\": undefined,\r\n\t\"visible\": undefined,\r\n\t\"hozAlign\": undefined,\r\n\t\"vertAlign\": undefined,\r\n\t\"width\": undefined,\r\n\t\"minWidth\": 40,\r\n\t\"maxWidth\": undefined,\r\n\t\"maxInitialWidth\": undefined,\r\n\t\"cssClass\": undefined,\r\n\t\"variableHeight\": undefined,\r\n\t\"headerVertical\": undefined,\r\n\t\"headerHozAlign\": undefined,\r\n\t\"editableTitle\": undefined,\r\n};","import CoreFeature from '../CoreFeature.js';\r\nimport ColumnComponent from './ColumnComponent.js';\r\nimport defaultOptions from './defaults/options.js';\r\n\r\nimport Cell from '../cell/Cell.js';\r\n\r\nclass Column extends CoreFeature{\r\n\r\n\tconstructor(def, parent){\r\n\t\tsuper(parent.table);\r\n\r\n\t\tthis.definition = def; //column definition\r\n\t\tthis.parent = parent; //hold parent object\r\n\t\tthis.type = \"column\"; //type of element\r\n\t\tthis.columns = []; //child columns\r\n\t\tthis.cells = []; //cells bound to this column\r\n\t\tthis.element = this.createElement(); //column header element\r\n\t\tthis.contentElement = false;\r\n\t\tthis.titleHolderElement = false;\r\n\t\tthis.titleElement = false;\r\n\t\tthis.groupElement = this.createGroupElement(); //column group holder element\r\n\t\tthis.isGroup = false;\r\n\t\tthis.hozAlign = \"\"; //horizontal text alignment\r\n\t\tthis.vertAlign = \"\"; //vert text alignment\r\n\r\n\t\t//multi dimensional filed handling\r\n\t\tthis.field =\"\";\r\n\t\tthis.fieldStructure = \"\";\r\n\t\tthis.getFieldValue = \"\";\r\n\t\tthis.setFieldValue = \"\";\r\n\r\n\t\tthis.titleDownload = null;\r\n\t\tthis.titleFormatterRendered = false;\r\n\r\n\t\tthis.mapDefinitions();\r\n\r\n\t\tthis.setField(this.definition.field);\r\n\r\n\t\tthis.modules = {}; //hold module variables;\r\n\r\n\t\tthis.width = null; //column width\r\n\t\tthis.widthStyled = \"\"; //column width pre-styled to improve render efficiency\r\n\t\tthis.maxWidth = null; //column maximum width\r\n\t\tthis.maxWidthStyled = \"\"; //column maximum pre-styled to improve render efficiency\r\n\t\tthis.maxInitialWidth = null;\r\n\t\tthis.minWidth = null; //column minimum width\r\n\t\tthis.minWidthStyled = \"\"; //column minimum pre-styled to improve render efficiency\r\n\t\tthis.widthFixed = false; //user has specified a width for this column\r\n\r\n\t\tthis.visible = true; //default visible state\r\n\r\n\t\tthis.component = null;\r\n\r\n\t\t//initialize column\r\n\t\tif(this.definition.columns){\r\n\r\n\t\t\tthis.isGroup = true;\r\n\r\n\t\t\tthis.definition.columns.forEach((def, i) => {\r\n\t\t\t\tvar newCol = new Column(def, this);\r\n\t\t\t\tthis.attachColumn(newCol);\r\n\t\t\t});\r\n\r\n\t\t\tthis.checkColumnVisibility();\r\n\t\t}else{\r\n\t\t\tparent.registerColumnField(this);\r\n\t\t}\r\n\r\n\t\tthis._initialize();\r\n\t}\r\n\r\n\tcreateElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-col\");\r\n\t\tel.setAttribute(\"role\", \"columnheader\");\r\n\t\tel.setAttribute(\"aria-sort\", \"none\");\r\n\r\n\t\tswitch(this.table.options.columnHeaderVertAlign){\r\n\t\t\tcase \"middle\":\r\n\t\t\t\tel.style.justifyContent = \"center\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"bottom\":\r\n\t\t\t\tel.style.justifyContent = \"flex-end\";\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tcreateGroupElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-col-group-cols\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tmapDefinitions(){\r\n\t\tvar defaults = this.table.options.columnDefaults;\r\n\r\n\t\t//map columnDefaults onto column definitions\r\n\t\tif(defaults){\r\n\t\t\tfor(let key in defaults){\r\n\t\t\t\tif(typeof this.definition[key] === \"undefined\"){\r\n\t\t\t\t\tthis.definition[key] = defaults[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.definition = this.table.columnManager.optionsList.generate(Column.defaultOptionList, this.definition);\r\n\t}\r\n\r\n\tcheckDefinition(){\r\n\t\tObject.keys(this.definition).forEach((key) => {\r\n\t\t\tif(Column.defaultOptionList.indexOf(key) === -1){\r\n\t\t\t\tconsole.warn(\"Invalid column definition option in '\" + (this.field || this.definition.title) + \"' column:\", key);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsetField(field){\r\n\t\tthis.field = field;\r\n\t\tthis.fieldStructure = field ? (this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field]) : [];\r\n\t\tthis.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\r\n\t\tthis.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\r\n\t}\r\n\r\n\t//register column position with column manager\r\n\tregisterColumnPosition(column){\r\n\t\tthis.parent.registerColumnPosition(column);\r\n\t}\r\n\r\n\t//register column position with column manager\r\n\tregisterColumnField(column){\r\n\t\tthis.parent.registerColumnField(column);\r\n\t}\r\n\r\n\t//trigger position registration\r\n\treRegisterPosition(){\r\n\t\tif(this.isGroup){\r\n\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\tcolumn.reRegisterPosition();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis.registerColumnPosition(this);\r\n\t\t}\r\n\t}\r\n\r\n\t//build header element\r\n\t_initialize(){\r\n\t\tvar def = this.definition;\r\n\r\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\tif(def.headerVertical){\r\n\t\t\tthis.element.classList.add(\"tabulator-col-vertical\");\r\n\r\n\t\t\tif(def.headerVertical === \"flip\"){\r\n\t\t\t\tthis.element.classList.add(\"tabulator-col-vertical-flip\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.contentElement = this._buildColumnHeaderContent();\r\n\r\n\t\tthis.element.appendChild(this.contentElement);\r\n\r\n\t\tif(this.isGroup){\r\n\t\t\tthis._buildGroupHeader();\r\n\t\t}else{\r\n\t\t\tthis._buildColumnHeader();\r\n\t\t}\r\n\r\n\t\tthis.dispatch(\"column-init\", this);\r\n\t}\r\n\r\n\t//build header element for header\r\n\t_buildColumnHeader(){\r\n\t\tvar def = this.definition;\r\n\r\n\t\tthis.dispatch(\"column-layout\", this);\r\n\r\n\t\t//set column visibility\r\n\t\tif(typeof def.visible != \"undefined\"){\r\n\t\t\tif(def.visible){\r\n\t\t\t\tthis.show(true);\r\n\t\t\t}else{\r\n\t\t\t\tthis.hide(true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//assign additional css classes to column header\r\n\t\tif(def.cssClass){\r\n\t\t\tvar classNames = def.cssClass.split(\" \");\r\n\t\t\tclassNames.forEach((className) => {\r\n\t\t\t\tthis.element.classList.add(className);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(def.field){\r\n\t\t\tthis.element.setAttribute(\"tabulator-field\", def.field);\r\n\t\t}\r\n\r\n\t\t//set min width if present\r\n\t\tthis.setMinWidth(parseInt(def.minWidth));\r\n\r\n\t\tif (def.maxInitialWidth) {\r\n\t\t\tthis.maxInitialWidth = parseInt(def.maxInitialWidth);\r\n\t\t}\r\n\t\t\r\n\t\tif(def.maxWidth){\r\n\t\t\tthis.setMaxWidth(parseInt(def.maxWidth));\r\n\t\t}\r\n\r\n\t\tthis.reinitializeWidth();\r\n\r\n\t\t//set horizontal text alignment\r\n\t\tthis.hozAlign = this.definition.hozAlign;\r\n\t\tthis.vertAlign = this.definition.vertAlign;\r\n\r\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\r\n\t}\r\n\r\n\t_buildColumnHeaderContent(){\r\n\t\tvar contentElement = document.createElement(\"div\");\r\n\t\tcontentElement.classList.add(\"tabulator-col-content\");\r\n\r\n\t\tthis.titleHolderElement = document.createElement(\"div\");\r\n\t\tthis.titleHolderElement.classList.add(\"tabulator-col-title-holder\");\r\n\r\n\t\tcontentElement.appendChild(this.titleHolderElement);\r\n\r\n\t\tthis.titleElement = this._buildColumnHeaderTitle();\r\n\r\n\t\tthis.titleHolderElement.appendChild(this.titleElement);\r\n\r\n\t\treturn contentElement;\r\n\t}\r\n\r\n\t//build title element of column\r\n\t_buildColumnHeaderTitle(){\r\n\t\tvar def = this.definition;\r\n\r\n\t\tvar titleHolderElement = document.createElement(\"div\");\r\n\t\ttitleHolderElement.classList.add(\"tabulator-col-title\");\r\n\r\n\t\tif(def.editableTitle){\r\n\t\t\tvar titleElement = document.createElement(\"input\");\r\n\t\t\ttitleElement.classList.add(\"tabulator-title-editor\");\r\n\r\n\t\t\ttitleElement.addEventListener(\"click\", (e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\ttitleElement.focus();\r\n\t\t\t});\r\n\r\n\t\t\ttitleElement.addEventListener(\"change\", () => {\r\n\t\t\t\tdef.title = titleElement.value;\r\n\t\t\t\tthis.dispatchExternal(\"columnTitleChanged\", this.getComponent());\r\n\t\t\t});\r\n\r\n\t\t\ttitleHolderElement.appendChild(titleElement);\r\n\r\n\t\t\tif(def.field){\r\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\r\n\t\t\t\t\ttitleElement.value = text || (def.title || \"&nbsp;\");\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\ttitleElement.value  = def.title || \"&nbsp;\";\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tif(def.field){\r\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\r\n\t\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, text || (def.title || \"&nbsp;\"));\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn titleHolderElement;\r\n\t}\r\n\r\n\t_formatColumnHeaderTitle(el, title){\r\n\t\tvar contents = this.chain(\"column-format\", [this, title, el], null, () => {\r\n\t\t\treturn title;\r\n\t\t});\r\n\r\n\t\tswitch(typeof contents){\r\n\t\t\tcase \"object\":\r\n\t\t\t\tif(contents instanceof Node){\r\n\t\t\t\t\tel.appendChild(contents);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tel.innerHTML = \"\";\r\n\t\t\t\t\tconsole.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"undefined\":\r\n\t\t\t\tel.innerHTML = \"\";\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tel.innerHTML = contents;\r\n\t\t}\r\n\t}\r\n\r\n\t//build header element for column group\r\n\t_buildGroupHeader(){\r\n\t\tthis.element.classList.add(\"tabulator-col-group\");\r\n\t\tthis.element.setAttribute(\"role\", \"columngroup\");\r\n\t\tthis.element.setAttribute(\"aria-title\", this.definition.title);\r\n\r\n\t\t//asign additional css classes to column header\r\n\t\tif(this.definition.cssClass){\r\n\t\t\tvar classNames = this.definition.cssClass.split(\" \");\r\n\t\t\tclassNames.forEach((className) => {\r\n\t\t\t\tthis.element.classList.add(className);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\r\n\r\n\t\tthis.element.appendChild(this.groupElement);\r\n\t}\r\n\r\n\t//flat field lookup\r\n\t_getFlatData(data){\r\n\t\treturn data[this.field];\r\n\t}\r\n\r\n\t//nested field lookup\r\n\t_getNestedData(data){\r\n\t\tvar dataObj = data,\r\n\t\tstructure = this.fieldStructure,\r\n\t\tlength = structure.length,\r\n\t\toutput;\r\n\r\n\t\tfor(let i = 0; i < length; i++){\r\n\r\n\t\t\tdataObj = dataObj[structure[i]];\r\n\r\n\t\t\toutput = dataObj;\r\n\r\n\t\t\tif(!dataObj){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//flat field set\r\n\t_setFlatData(data, value){\r\n\t\tif(this.field){\r\n\t\t\tdata[this.field] = value;\r\n\t\t}\r\n\t}\r\n\r\n\t//nested field set\r\n\t_setNestedData(data, value){\r\n\t\tvar dataObj = data,\r\n\t\tstructure = this.fieldStructure,\r\n\t\tlength = structure.length;\r\n\r\n\t\tfor(let i = 0; i < length; i++){\r\n\r\n\t\t\tif(i == length -1){\r\n\t\t\t\tdataObj[structure[i]] = value;\r\n\t\t\t}else{\r\n\t\t\t\tif(!dataObj[structure[i]]){\r\n\t\t\t\t\tif(typeof value !== \"undefined\"){\r\n\t\t\t\t\t\tdataObj[structure[i]] = {};\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdataObj = dataObj[structure[i]];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//attach column to this group\r\n\tattachColumn(column){\r\n\t\tif(this.groupElement){\r\n\t\t\tthis.columns.push(column);\r\n\t\t\tthis.groupElement.appendChild(column.getElement());\r\n\r\n\t\t\tcolumn.columnRendered();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Warning - Column being attached to another column instead of column group\");\r\n\t\t}\r\n\t}\r\n\r\n\t//vertically align header in column\r\n\tverticalAlign(alignment, height){\r\n\r\n\t\t//calculate height of column header and group holder element\r\n\t\tvar parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : (height || this.parent.getHeadersElement().clientHeight);\r\n\t\t// var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\r\n\r\n\t\tthis.element.style.height = parentHeight + \"px\";\r\n\r\n\t\tthis.dispatch(\"column-height\", this, this.element.style.height);\r\n\r\n\t\tif(this.isGroup){\r\n\t\t\tthis.groupElement.style.minHeight = (parentHeight - this.contentElement.offsetHeight) + \"px\";\r\n\t\t}\r\n\r\n\t\t//vertically align cell contents\r\n\t\t// if(!this.isGroup && alignment !== \"top\"){\r\n\t\t// \tif(alignment === \"bottom\"){\r\n\t\t// \t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) + \"px\";\r\n\t\t// \t}else{\r\n\t\t// \t\tthis.element.style.paddingTop = ((this.element.clientHeight - this.contentElement.offsetHeight) / 2) + \"px\";\r\n\t\t// \t}\r\n\t\t// }\r\n\r\n\t\tthis.columns.forEach(function(column){\r\n\t\t\tcolumn.verticalAlign(alignment);\r\n\t\t});\r\n\t}\r\n\r\n\t//clear vertical alignment\r\n\tclearVerticalAlign(){\r\n\t\tthis.element.style.paddingTop = \"\";\r\n\t\tthis.element.style.height = \"\";\r\n\t\tthis.element.style.minHeight = \"\";\r\n\t\tthis.groupElement.style.minHeight = \"\";\r\n\r\n\t\tthis.columns.forEach(function(column){\r\n\t\t\tcolumn.clearVerticalAlign();\r\n\t\t});\r\n\r\n\t\tthis.dispatch(\"column-height\", this, \"\");\r\n\t}\r\n\r\n\t//// Retrieve Column Information ////\r\n\t//return column header element\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\t//return column group element\r\n\tgetGroupElement(){\r\n\t\treturn this.groupElement;\r\n\t}\r\n\r\n\t//return field name\r\n\tgetField(){\r\n\t\treturn this.field;\r\n\t}\r\n\r\n\tgetTitleDownload() {\r\n\t\treturn this.titleDownload;\r\n\t}\r\n\r\n\t//return the first column in a group\r\n\tgetFirstColumn(){\r\n\t\tif(!this.isGroup){\r\n\t\t\treturn this;\r\n\t\t}else{\r\n\t\t\tif(this.columns.length){\r\n\t\t\t\treturn this.columns[0].getFirstColumn();\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//return the last column in a group\r\n\tgetLastColumn(){\r\n\t\tif(!this.isGroup){\r\n\t\t\treturn this;\r\n\t\t}else{\r\n\t\t\tif(this.columns.length){\r\n\t\t\t\treturn this.columns[this.columns.length -1].getLastColumn();\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//return all columns in a group\r\n\tgetColumns(traverse){\r\n\t\tvar columns = [];\r\n\r\n\t\tif(traverse){\r\n\t\t\tthis.columns.forEach((column) => {\r\n\t\t\t\tcolumns.push(column);\r\n\t\t\t\t\t\r\n\t\t\t\tcolumns = columns.concat(column.getColumns(true));\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tcolumns = this.columns;\r\n\t\t}\r\n\t\t\r\n\t\treturn columns;\r\n\t}\r\n\r\n\t//return all columns in a group\r\n\tgetCells(){\r\n\t\treturn this.cells;\r\n\t}\r\n\r\n\t//retrieve the top column in a group of columns\r\n\tgetTopColumn(){\r\n\t\tif(this.parent.isGroup){\r\n\t\t\treturn this.parent.getTopColumn();\r\n\t\t}else{\r\n\t\t\treturn this;\r\n\t\t}\r\n\t}\r\n\r\n\t//return column definition object\r\n\tgetDefinition(updateBranches){\r\n\t\tvar colDefs = [];\r\n\r\n\t\tif(this.isGroup && updateBranches){\r\n\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\tcolDefs.push(column.getDefinition(true));\r\n\t\t\t});\r\n\r\n\t\t\tthis.definition.columns = colDefs;\r\n\t\t}\r\n\r\n\t\treturn this.definition;\r\n\t}\r\n\r\n\t//////////////////// Actions ////////////////////\r\n\tcheckColumnVisibility(){\r\n\t\tvar visible = false;\r\n\r\n\t\tthis.columns.forEach(function(column){\r\n\t\t\tif(column.visible){\r\n\t\t\t\tvisible = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(visible){\r\n\t\t\tthis.show();\r\n\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\r\n\t\t}else{\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t//show column\r\n\tshow(silent, responsiveToggle){\r\n\t\tif(!this.visible){\r\n\t\t\tthis.visible = true;\r\n\r\n\t\t\tthis.element.style.display = \"\";\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.checkColumnVisibility();\r\n\t\t\t}\r\n\r\n\t\t\tthis.cells.forEach(function(cell){\r\n\t\t\t\tcell.show();\r\n\t\t\t});\r\n\r\n\t\t\tif(!this.isGroup && this.width === null){\r\n\t\t\t\tthis.reinitializeWidth();\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\r\n\r\n\t\t\tthis.dispatch(\"column-show\", this, responsiveToggle);\r\n\r\n\t\t\tif(!silent){\r\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), true);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.matchChildWidths();\r\n\t\t\t}\r\n\r\n\t\t\tif(!this.silent){\r\n\t\t\t\tthis.table.columnManager.rerenderColumns();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//hide column\r\n\thide(silent, responsiveToggle){\r\n\t\tif(this.visible){\r\n\t\t\tthis.visible = false;\r\n\r\n\t\t\tthis.element.style.display = \"none\";\r\n\r\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.checkColumnVisibility();\r\n\t\t\t}\r\n\r\n\t\t\tthis.cells.forEach(function(cell){\r\n\t\t\t\tcell.hide();\r\n\t\t\t});\r\n\r\n\t\t\tthis.dispatch(\"column-hide\", this, responsiveToggle);\r\n\r\n\t\t\tif(!silent){\r\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.matchChildWidths();\r\n\t\t\t}\r\n\r\n\t\t\tif(!this.silent){\r\n\t\t\t\tthis.table.columnManager.rerenderColumns();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmatchChildWidths(){\r\n\t\tvar childWidth = 0;\r\n\r\n\t\tif(this.contentElement && this.columns.length){\r\n\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\tif(column.visible){\r\n\t\t\t\t\tchildWidth += column.getWidth();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.contentElement.style.maxWidth = (childWidth - 1) + \"px\";\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.matchChildWidths();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tremoveChild(child){\r\n\t\tvar index = this.columns.indexOf(child);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.columns.splice(index, 1);\r\n\t\t}\r\n\r\n\t\tif(!this.columns.length){\r\n\t\t\tthis.delete();\r\n\t\t}\r\n\t}\r\n\r\n\tsetWidth(width){\r\n\t\tthis.widthFixed = true;\r\n\t\tthis.setWidthActual(width);\r\n\t}\r\n\r\n\tsetWidthActual(width){\r\n\t\tif(isNaN(width)){\r\n\t\t\twidth = Math.floor((this.table.element.clientWidth/100) * parseInt(width));\r\n\t\t}\r\n\r\n\t\twidth = Math.max(this.minWidth, width);\r\n\r\n\t\tif(this.maxWidth){\r\n\t\t\twidth = Math.min(this.maxWidth, width);\r\n\t\t}\r\n\r\n\t\tthis.width = width;\r\n\t\tthis.widthStyled = width ? width + \"px\" : \"\";\r\n\r\n\t\tthis.element.style.width = this.widthStyled;\r\n\r\n\t\tif(!this.isGroup){\r\n\t\t\tthis.cells.forEach(function(cell){\r\n\t\t\t\tcell.setWidth();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.parent.isGroup){\r\n\t\t\tthis.parent.matchChildWidths();\r\n\t\t}\r\n\r\n\t\tthis.dispatch(\"column-width\", this);\r\n\t}\r\n\r\n\tcheckCellHeights(){\r\n\t\tvar rows = [];\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tif(cell.row.heightInitialized){\r\n\t\t\t\tif(cell.row.getElement().offsetParent !== null){\r\n\t\t\t\t\trows.push(cell.row);\r\n\t\t\t\t\tcell.row.clearCellHeight();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcell.row.heightInitialized = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\trow.calcHeight();\r\n\t\t});\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\trow.setCellHeight();\r\n\t\t});\r\n\t}\r\n\r\n\tgetWidth(){\r\n\t\tvar width = 0;\r\n\r\n\t\tif(this.isGroup){\r\n\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\tif(column.visible){\r\n\t\t\t\t\twidth += column.getWidth();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\twidth = this.width;\r\n\t\t}\r\n\r\n\t\treturn width;\r\n\t}\r\n\r\n\tgetHeight(){\r\n\t\treturn Math.ceil(this.element.getBoundingClientRect().height);\r\n\t}\r\n\r\n\tsetMinWidth(minWidth){\r\n\t\tif(this.maxWidth && minWidth > this.maxWidth){\r\n\t\t\tminWidth = this.maxWidth;\r\n\r\n\t\t\tconsole.warn(\"the minWidth (\"+ minWidth + \"px) for column '\" + this.field + \"' cannot be bigger that its maxWidth (\"+ this.maxWidthStyled + \")\");\r\n\t\t}\r\n\r\n\t\tthis.minWidth = minWidth;\r\n\t\tthis.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\r\n\r\n\t\tthis.element.style.minWidth = this.minWidthStyled;\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tcell.setMinWidth();\r\n\t\t});\r\n\t}\r\n\r\n\tsetMaxWidth(maxWidth){\r\n\t\tif(this.minWidth && maxWidth < this.minWidth){\r\n\t\t\tmaxWidth = this.minWidth;\r\n\r\n\t\t\tconsole.warn(\"the maxWidth (\"+ maxWidth + \"px) for column '\" + this.field + \"' cannot be smaller that its minWidth (\"+ this.minWidthStyled + \")\");\r\n\t\t}\r\n\r\n\t\tthis.maxWidth = maxWidth;\r\n\t\tthis.maxWidthStyled = maxWidth ? maxWidth + \"px\" : \"\";\r\n\r\n\t\tthis.element.style.maxWidth = this.maxWidthStyled;\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tcell.setMaxWidth();\r\n\t\t});\r\n\t}\r\n\r\n\tdelete(){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(this.isGroup){\r\n\t\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\t\tcolumn.delete();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatch(\"column-delete\", this);\r\n\r\n\t\t\tvar cellCount = this.cells.length;\r\n\r\n\t\t\tfor(let i = 0; i < cellCount; i++){\r\n\t\t\t\tthis.cells[0].delete();\r\n\t\t\t}\r\n\r\n\t\t\tif(this.element.parentNode){\r\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\t}\r\n\r\n\t\t\tthis.element = false;\r\n\t\t\tthis.contentElement = false;\r\n\t\t\tthis.titleElement = false;\r\n\t\t\tthis.groupElement = false;\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.removeChild(this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.columnManager.deregisterColumn(this);\r\n\r\n\t\t\tthis.table.columnManager.rerenderColumns(true);\r\n\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tcolumnRendered(){\r\n\t\tif(this.titleFormatterRendered){\r\n\t\t\tthis.titleFormatterRendered();\r\n\t\t}\r\n\r\n\t\tthis.dispatch(\"column-rendered\", this);\r\n\t}\r\n\r\n\t//////////////// Cell Management /////////////////\r\n\t//generate cell for this column\r\n\tgenerateCell(row){\r\n\t\tvar cell = new Cell(this, row);\r\n\r\n\t\tthis.cells.push(cell);\r\n\r\n\t\treturn cell;\r\n\t}\r\n\r\n\tnextColumn(){\r\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\r\n\t\treturn index > -1 ? this._nextVisibleColumn(index + 1) : false;\r\n\t}\r\n\r\n\t_nextVisibleColumn(index){\r\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\r\n\t\treturn !column || column.visible ? column : this._nextVisibleColumn(index + 1);\r\n\t}\r\n\r\n\tprevColumn(){\r\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\r\n\t\treturn index > -1 ? this._prevVisibleColumn(index - 1) : false;\r\n\t}\r\n\r\n\t_prevVisibleColumn(index){\r\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\r\n\t\treturn !column || column.visible ? column : this._prevVisibleColumn(index - 1);\r\n\t}\r\n\r\n\treinitializeWidth(force){\r\n\t\tthis.widthFixed = false;\r\n\r\n\t\t//set width if present\r\n\t\tif(typeof this.definition.width !== \"undefined\" && !force){\r\n\t\t\t// maxInitialWidth ignored here as width specified\r\n\t\t\tthis.setWidth(this.definition.width);\r\n\t\t}\r\n\r\n\t\tthis.dispatch(\"column-width-fit-before\", this);\r\n\r\n\t\tthis.fitToData(force);\r\n\r\n\t\tthis.dispatch(\"column-width-fit-after\", this);\r\n\t}\r\n\r\n\t//set column width to maximum cell width for non group columns\r\n\tfitToData(force){\r\n\t\tif(this.isGroup){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(!this.widthFixed){\r\n\t\t\tthis.element.style.width = \"\";\r\n\r\n\t\t\tthis.cells.forEach((cell) => {\r\n\t\t\t\tcell.clearWidth();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar maxWidth = this.element.offsetWidth;\r\n\r\n\t\tif(!this.width || !this.widthFixed){\r\n\t\t\tthis.cells.forEach((cell) => {\r\n\t\t\t\tvar width = cell.getWidth();\r\n\r\n\t\t\t\tif(width > maxWidth){\r\n\t\t\t\t\tmaxWidth = width;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(maxWidth){\r\n\t\t\t\tvar setTo = maxWidth + 1;\r\n\t\t\t\tif (this.maxInitialWidth && !force) {\r\n\t\t\t\t\tsetTo = Math.min(setTo, this.maxInitialWidth);\r\n\t\t\t\t}\r\n\t\t\t\tthis.setWidthActual(setTo);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tupdateDefinition(updates){\r\n\t\tvar definition;\r\n\r\n\t\tif(!this.isGroup){\r\n\t\t\tif(!this.parent.isGroup){\r\n\t\t\t\tdefinition = Object.assign({}, this.getDefinition());\r\n\t\t\t\tdefinition = Object.assign(definition, updates);\r\n\r\n\t\t\t\treturn this.table.columnManager.addColumn(definition, false, this)\r\n\t\t\t\t\t.then((column) => {\r\n\r\n\t\t\t\t\t\tif(definition.field == this.field){\r\n\t\t\t\t\t\t\tthis.field = false; //clear field name to prevent deletion of duplicate column from arrays\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn this.delete()\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\treturn column.getComponent();\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\r\n\t\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\r\n\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\r\n\t\t}\r\n\t}\r\n\r\n\tdeleteCell(cell){\r\n\t\tvar index = this.cells.indexOf(cell);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.cells.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\t//////////////// Object Generation /////////////////\r\n\tgetComponent(){\r\n\t\tif(!this.component){\r\n\t\t\tthis.component = new ColumnComponent(this);\r\n\t\t}\r\n\r\n\t\treturn this.component;\r\n\t}\r\n}\r\n\r\nColumn.defaultOptionList = defaultOptions;\r\n\r\nexport default Column;\r\n","//public row object\r\nexport default class RowComponent {\r\n\r\n\tconstructor (row){\r\n\t\tthis._row = row;\r\n\r\n\t\treturn new Proxy(this, {\r\n\t\t\tget: function(target, name, receiver) {\r\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\r\n\t\t\t\t\treturn target[name];\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetData(transform){\r\n\t\treturn this._row.getData(transform);\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._row.getElement();\r\n\t}\r\n\r\n\tgetCells(){\r\n\t\tvar cells = [];\r\n\r\n\t\tthis._row.getCells().forEach(function(cell){\r\n\t\t\tcells.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn cells;\r\n\t}\r\n\r\n\tgetCell(column){\r\n\t\tvar cell = this._row.getCell(column);\r\n\t\treturn cell ? cell.getComponent() : false;\r\n\t}\r\n\r\n\tgetIndex(){\r\n\t\treturn this._row.getData(\"data\")[this._row.table.options.index];\r\n\t}\r\n\r\n\tgetPosition(){\r\n\t\treturn this._row.getPosition();\r\n\t}\r\n\r\n\twatchPosition(callback){\r\n\t\treturn this._row.watchPosition(callback);\r\n\t}\r\n\r\n\tdelete(){\r\n\t\treturn this._row.delete();\r\n\t}\r\n\r\n\tscrollTo(){\r\n\t\treturn this._row.table.rowManager.scrollToRow(this._row);\r\n\t}\r\n\r\n\tmove(to, after){\r\n\t\tthis._row.moveToRow(to, after);\r\n\t}\r\n\r\n\tupdate(data){\r\n\t\treturn this._row.updateData(data);\r\n\t}\r\n\r\n\tnormalizeHeight(){\r\n\t\tthis._row.normalizeHeight(true);\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._row;\r\n\t}\r\n\r\n\treformat(){\r\n\t\treturn this._row.reinitialize();\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._row.table;\r\n\t}\r\n\r\n\tgetNextRow(){\r\n\t\tvar row = this._row.nextRow();\r\n\t\treturn row ? row.getComponent() : row;\r\n\t}\r\n\r\n\tgetPrevRow(){\r\n\t\tvar row = this._row.prevRow();\r\n\t\treturn row ? row.getComponent() : row;\r\n\t}\r\n}","import CoreFeature from '../CoreFeature.js';\r\nimport RowComponent from './RowComponent.js';\r\nimport Helpers from '../tools/Helpers.js';\r\n\r\nexport default class Row extends CoreFeature{\r\n\tconstructor (data, parent, type = \"row\"){\r\n\t\tsuper(parent.table);\r\n\t\t\r\n\t\tthis.parent = parent;\r\n\t\tthis.data = {};\r\n\t\tthis.type = type; //type of element\r\n\t\tthis.element = false;\r\n\t\tthis.modules = {}; //hold module variables;\r\n\t\tthis.cells = [];\r\n\t\tthis.height = 0; //hold element height\r\n\t\tthis.heightStyled = \"\"; //hold element height pre-styled to improve render efficiency\r\n\t\tthis.manualHeight = false; //user has manually set row height\r\n\t\tthis.outerHeight = 0; //hold elements outer height\r\n\t\tthis.initialized = false; //element has been rendered\r\n\t\tthis.heightInitialized = false; //element has resized cells to fit\r\n\t\tthis.position = 0; //store position of element in row list\r\n\t\tthis.positionWatchers = [];\r\n\t\t\r\n\t\tthis.component = null;\r\n\t\t\r\n\t\tthis.created = false;\r\n\t\t\r\n\t\tthis.setData(data);\r\n\t}\r\n\t\r\n\tcreate(){\r\n\t\tif(!this.created){\r\n\t\t\tthis.created = true;\r\n\t\t\tthis.generateElement();\r\n\t\t}\r\n\t}\r\n\t\r\n\tcreateElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\t\r\n\t\tel.classList.add(\"tabulator-row\");\r\n\t\tel.setAttribute(\"role\", \"row\");\r\n\t\t\r\n\t\tthis.element = el;\r\n\t}\r\n\t\r\n\tgetElement(){\r\n\t\tthis.create();\r\n\t\treturn this.element;\r\n\t}\r\n\t\r\n\tdetachElement(){\r\n\t\tif (this.element && this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n\t}\r\n\t\r\n\tgenerateElement(){\r\n\t\tthis.createElement();\r\n\t\tthis.dispatch(\"row-init\", this);\r\n\t}\r\n\t\r\n\tgenerateCells(){\r\n\t\tthis.cells = this.table.columnManager.generateCells(this);\r\n\t}\r\n\t\r\n\t//functions to setup on first render\r\n\tinitialize(force){\r\n\t\tthis.create();\r\n\t\t\r\n\t\tif(!this.initialized || force){\r\n\t\t\t\r\n\t\t\tthis.deleteCells();\r\n\t\t\t\r\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\t\t\t\r\n\t\t\tthis.dispatch(\"row-layout-before\", this);\r\n\t\t\t\r\n\t\t\tthis.generateCells();\r\n\t\t\t\r\n\t\t\tthis.initialized = true;\r\n\t\t\t\r\n\t\t\tthis.table.columnManager.renderer.renderRowCells(this);\r\n\t\t\t\r\n\t\t\tif(force){\r\n\t\t\t\tthis.normalizeHeight();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.dispatch(\"row-layout\", this);\r\n\t\t\t\r\n\t\t\tif(this.table.options.rowFormatter){\r\n\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.dispatch(\"row-layout-after\", this);\r\n\t\t}else{\r\n\t\t\tthis.table.columnManager.renderer.rerenderRowCells(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\treinitializeHeight(){\r\n\t\tthis.heightInitialized = false;\r\n\t\t\r\n\t\tif(this.element && this.element.offsetParent !== null){\r\n\t\t\tthis.normalizeHeight(true);\r\n\t\t}\r\n\t}\r\n\r\n\tdeinitialize(){\r\n\t\tthis.initialized = false;\r\n\t}\r\n\t\r\n\tdeinitializeHeight(){\r\n\t\tthis.heightInitialized = false;\r\n\t}\r\n\t\r\n\treinitialize(children){\r\n\t\tthis.initialized = false;\r\n\t\tthis.heightInitialized = false;\r\n\t\t\r\n\t\tif(!this.manualHeight){\r\n\t\t\tthis.height = 0;\r\n\t\t\tthis.heightStyled = \"\";\r\n\t\t}\r\n\t\t\r\n\t\tif(this.element && this.element.offsetParent !== null){\r\n\t\t\tthis.initialize(true);\r\n\t\t}\r\n\t\t\r\n\t\tthis.dispatch(\"row-relayout\", this);\r\n\t}\r\n\t\r\n\t//get heights when doing bulk row style calcs in virtual DOM\r\n\tcalcHeight(force){\r\n\t\tvar maxHeight = 0,\r\n\t\tminHeight;\r\n\t\t\r\n\t\tif(this.table.options.rowHeight){\r\n\t\t\tthis.height = this.table.options.rowHeight;\r\n\t\t}else{\r\n\t\t\tminHeight = this.table.options.resizableRows ? this.element.clientHeight : 0;\r\n\t\t\t\r\n\t\t\tthis.cells.forEach(function(cell){\r\n\t\t\t\tvar height = cell.getHeight();\r\n\t\t\t\tif(height > maxHeight){\r\n\t\t\t\t\tmaxHeight = height;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif(force){\r\n\t\t\t\tthis.height = Math.max(maxHeight, minHeight);\r\n\t\t\t}else{\r\n\t\t\t\tthis.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.heightStyled = this.height ? this.height + \"px\" : \"\";\r\n\t\tthis.outerHeight = this.element.offsetHeight;\r\n\t}\r\n\t\r\n\t//set of cells\r\n\tsetCellHeight(){\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tcell.setHeight();\r\n\t\t});\r\n\t\t\r\n\t\tthis.heightInitialized = true;\r\n\t}\r\n\t\r\n\tclearCellHeight(){\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tcell.clearHeight();\r\n\t\t});\r\n\t}\r\n\t\r\n\t//normalize the height of elements in the row\r\n\tnormalizeHeight(force){\r\n\t\tif(force && !this.table.options.rowHeight){\r\n\t\t\tthis.clearCellHeight();\r\n\t\t}\r\n\t\t\r\n\t\tthis.calcHeight(force);\r\n\t\t\r\n\t\tthis.setCellHeight();\r\n\t}\r\n\t\r\n\t//set height of rows\r\n\tsetHeight(height, force){\r\n\t\tif(this.height != height || force){\r\n\t\t\t\r\n\t\t\tthis.manualHeight = true;\r\n\t\t\t\r\n\t\t\tthis.height = height;\r\n\t\t\tthis.heightStyled = height ? height + \"px\" : \"\";\r\n\t\t\t\r\n\t\t\tthis.setCellHeight();\r\n\t\t\t\r\n\t\t\t// this.outerHeight = this.element.outerHeight();\r\n\t\t\tthis.outerHeight = this.element.offsetHeight;\r\n\t\t}\r\n\t}\r\n\t\r\n\t//return rows outer height\r\n\tgetHeight(){\r\n\t\treturn this.outerHeight;\r\n\t}\r\n\t\r\n\t//return rows outer Width\r\n\tgetWidth(){\r\n\t\treturn this.element.offsetWidth;\r\n\t}\r\n\t\r\n\t//////////////// Cell Management /////////////////\r\n\tdeleteCell(cell){\r\n\t\tvar index = this.cells.indexOf(cell);\r\n\t\t\r\n\t\tif(index > -1){\r\n\t\t\tthis.cells.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//////////////// Data Management /////////////////\r\n\tsetData(data){\r\n\t\tthis.data = this.chain(\"row-data-init-before\", [this, data], undefined, data);\r\n\t\t\r\n\t\tthis.dispatch(\"row-data-init-after\", this);\r\n\t}\r\n\t\r\n\t//update the rows data\r\n\tupdateData(updatedData){\r\n\t\tvar visible = this.element && Helpers.elVisible(this.element),\r\n\t\ttempData = {},\r\n\t\tnewRowData;\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\r\n\t\t\tif(typeof updatedData === \"string\"){\r\n\t\t\t\tupdatedData = JSON.parse(updatedData);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.dispatch(\"row-data-save-before\", this);\r\n\t\t\t\r\n\t\t\tif(this.subscribed(\"row-data-changing\")){\r\n\t\t\t\ttempData = Object.assign(tempData, this.data);\r\n\t\t\t\ttempData = Object.assign(tempData, updatedData);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tnewRowData = this.chain(\"row-data-changing\", [this, tempData, updatedData], null, updatedData);\r\n\t\t\t\r\n\t\t\t//set data\r\n\t\t\tfor (let attrname in newRowData) {\r\n\t\t\t\tthis.data[attrname] = newRowData[attrname];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.dispatch(\"row-data-save-after\", this);\r\n\t\t\t\r\n\t\t\t//update affected cells only\r\n\t\t\tfor (let attrname in updatedData) {\r\n\t\t\t\t\r\n\t\t\t\tlet columns = this.table.columnManager.getColumnsByFieldRoot(attrname);\r\n\t\t\t\t\r\n\t\t\t\tcolumns.forEach((column) => {\r\n\t\t\t\t\tlet cell = this.getCell(column.getField());\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(cell){\r\n\t\t\t\t\t\tlet value = column.getFieldValue(newRowData);\r\n\t\t\t\t\t\tif(cell.getValue() != value){\r\n\t\t\t\t\t\t\tcell.setValueProcessData(value);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(visible){\r\n\t\t\t\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//Partial reinitialization if visible\r\n\t\t\tif(visible){\r\n\t\t\t\tthis.normalizeHeight(true);\r\n\t\t\t\t\r\n\t\t\t\tif(this.table.options.rowFormatter){\r\n\t\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.initialized = false;\r\n\t\t\t\tthis.height = 0;\r\n\t\t\t\tthis.heightStyled = \"\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.dispatch(\"row-data-changed\", this, visible, updatedData);\r\n\t\t\t\r\n\t\t\t//this.reinitialize();\r\n\t\t\t\r\n\t\t\tthis.dispatchExternal(\"rowUpdated\", this.getComponent());\r\n\t\t\t\r\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\r\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\t\r\n\tgetData(transform){\r\n\t\tif(transform){\r\n\t\t\treturn this.chain(\"row-data-retrieve\", [this, transform], null, this.data);\r\n\t\t}\r\n\t\t\r\n\t\treturn this.data;\r\n\t}\r\n\t\r\n\tgetCell(column){\r\n\t\tvar match = false;\r\n\t\t\r\n\t\tcolumn = this.table.columnManager.findColumn(column);\r\n\t\t\r\n\t\tif(!this.initialized){\r\n\t\t\tthis.generateCells();\r\n\t\t}\r\n\t\t\r\n\t\tmatch = this.cells.find(function(cell){\r\n\t\t\treturn cell.column === column;\r\n\t\t});\r\n\t\t\r\n\t\treturn match;\r\n\t}\r\n\t\r\n\tgetCellIndex(findCell){\r\n\t\treturn this.cells.findIndex(function(cell){\r\n\t\t\treturn cell === findCell;\r\n\t\t});\r\n\t}\r\n\t\r\n\tfindCell(subject){\r\n\t\treturn this.cells.find((cell) => {\r\n\t\t\treturn cell.element === subject;\r\n\t\t});\r\n\t}\r\n\t\r\n\tgetCells(){\r\n\t\tif(!this.initialized){\r\n\t\t\tthis.generateCells();\r\n\t\t}\r\n\t\t\r\n\t\treturn this.cells;\r\n\t}\r\n\t\r\n\tnextRow(){\r\n\t\tvar row = this.table.rowManager.nextDisplayRow(this, true);\r\n\t\treturn row || false;\r\n\t}\r\n\t\r\n\tprevRow(){\r\n\t\tvar row = this.table.rowManager.prevDisplayRow(this, true);\r\n\t\treturn row || false;\r\n\t}\r\n\t\r\n\tmoveToRow(to, before){\r\n\t\tvar toRow = this.table.rowManager.findRow(to);\r\n\t\t\r\n\t\tif(toRow){\r\n\t\t\tthis.table.rowManager.moveRowActual(this, toRow, !before);\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\", false, true);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", to);\r\n\t\t}\r\n\t}\r\n\t\r\n\t///////////////////// Actions  /////////////////////\r\n\tdelete(){\r\n\t\tthis.dispatch(\"row-delete\", this);\r\n\t\t\r\n\t\tthis.deleteActual();\r\n\t\t\r\n\t\treturn Promise.resolve();\r\n\t}\r\n\t\r\n\tdeleteActual(blockRedraw){\r\n\t\tthis.detachModules();\r\n\t\t\r\n\t\tthis.table.rowManager.deleteRow(this, blockRedraw);\r\n\t\t\r\n\t\tthis.deleteCells();\r\n\t\t\r\n\t\tthis.initialized = false;\r\n\t\tthis.heightInitialized = false;\r\n\t\tthis.element = false;\r\n\t\t\r\n\t\tthis.dispatch(\"row-deleted\", this);\r\n\t}\r\n\t\r\n\tdetachModules(){\r\n\t\tthis.dispatch(\"row-deleting\", this);\r\n\t}\r\n\t\r\n\tdeleteCells(){\r\n\t\tvar cellCount = this.cells.length;\r\n\t\t\r\n\t\tfor(let i = 0; i < cellCount; i++){\r\n\t\t\tthis.cells[0].delete();\r\n\t\t}\r\n\t}\r\n\t\r\n\twipe(){\r\n\t\tthis.detachModules();\r\n\t\tthis.deleteCells();\r\n\t\t\r\n\t\tif(this.element){\r\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\t\t\t\r\n\t\t\tif(this.element.parentNode){\r\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.element = false;\r\n\t\tthis.modules = {};\r\n\t}\r\n\r\n\tisDisplayed(){\r\n\t\treturn this.table.rowManager.getDisplayRows().includes(this);\r\n\t}\r\n\r\n\tgetPosition(){\r\n\t\treturn this.isDisplayed() ? this.position : false;\r\n\t}\r\n\r\n\tsetPosition(position){\r\n\t\tif(position != this.position){\r\n\t\t\tthis.position = position;\r\n\r\n\t\t\tthis.positionWatchers.forEach((callback) => {\r\n\t\t\t\tcallback(this.position);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\twatchPosition(callback){\r\n\t\tthis.positionWatchers.push(callback);\r\n\r\n\t\tcallback(this.position);\r\n\t}\r\n\t\r\n\tgetGroup(){\r\n\t\treturn this.modules.group || false;\r\n\t}\r\n\t\r\n\t//////////////// Object Generation /////////////////\r\n\tgetComponent(){\r\n\t\tif(!this.component){\r\n\t\t\tthis.component = new RowComponent(this);\r\n\t\t}\r\n\t\t\r\n\t\treturn this.component;\r\n\t}\r\n}","export default {\r\n\t\"avg\":function(values, data, calcParams){\r\n\t\tvar output = 0,\r\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2;\r\n\r\n\t\tif(values.length){\r\n\t\t\toutput = values.reduce(function(sum, value){\r\n\t\t\t\treturn Number(sum) + Number(value);\r\n\t\t\t});\r\n\r\n\t\t\toutput = output / values.length;\r\n\r\n\t\t\toutput = precision !== false ? output.toFixed(precision) : output;\r\n\t\t}\r\n\r\n\t\treturn parseFloat(output).toString();\r\n\t},\r\n\t\"max\":function(values, data, calcParams){\r\n\t\tvar output = null,\r\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\r\n\r\n\t\tvalues.forEach(function(value){\r\n\r\n\t\t\tvalue = Number(value);\r\n\r\n\t\t\tif(value > output || output === null){\r\n\t\t\t\toutput = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\r\n\t},\r\n\t\"min\":function(values, data, calcParams){\r\n\t\tvar output = null,\r\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\r\n\r\n\t\tvalues.forEach(function(value){\r\n\r\n\t\t\tvalue = Number(value);\r\n\r\n\t\t\tif(value < output || output === null){\r\n\t\t\t\toutput = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\r\n\t},\r\n\t\"sum\":function(values, data, calcParams){\r\n\t\tvar output = 0,\r\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\r\n\r\n\t\tif(values.length){\r\n\t\t\tvalues.forEach(function(value){\r\n\t\t\t\tvalue = Number(value);\r\n\r\n\t\t\t\toutput += !isNaN(value) ? Number(value) : 0;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn precision !== false ? output.toFixed(precision) : output;\r\n\t},\r\n\t\"concat\":function(values, data, calcParams){\r\n\t\tvar output = 0;\r\n\r\n\t\tif(values.length){\r\n\t\t\toutput = values.reduce(function(sum, value){\r\n\t\t\t\treturn String(sum) + String(value);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t},\r\n\t\"count\":function(values, data, calcParams){\r\n\t\tvar output = 0;\r\n\r\n\t\tif(values.length){\r\n\t\t\tvalues.forEach(function(value){\r\n\t\t\t\tif(value){\r\n\t\t\t\t\toutput ++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport CalcComponent from './CalcComponent.js';\r\n\r\nimport Cell from '../../core/cell/Cell.js';\r\nimport Column from '../../core/column/Column.js';\r\nimport Row from '../../core/row/Row.js';\r\n\r\nimport defaultCalculations from './defaults/calculations.js';\r\n\r\nclass ColumnCalcs extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.topCalcs = [];\r\n\t\tthis.botCalcs = [];\r\n\t\tthis.genColumn = false;\r\n\t\tthis.topElement = this.createElement();\r\n\t\tthis.botElement = this.createElement();\r\n\t\tthis.topRow = false;\r\n\t\tthis.botRow = false;\r\n\t\tthis.topInitialized = false;\r\n\t\tthis.botInitialized = false;\r\n\r\n\t\tthis.registerTableOption(\"columnCalcs\", true);\r\n\r\n\t\tthis.registerColumnOption(\"topCalc\");\r\n\t\tthis.registerColumnOption(\"topCalcParams\");\r\n\t\tthis.registerColumnOption(\"topCalcFormatter\");\r\n\t\tthis.registerColumnOption(\"topCalcFormatterParams\");\r\n\t\tthis.registerColumnOption(\"bottomCalc\");\r\n\t\tthis.registerColumnOption(\"bottomCalcParams\");\r\n\t\tthis.registerColumnOption(\"bottomCalcFormatter\");\r\n\t\tthis.registerColumnOption(\"bottomCalcFormatterParams\");\r\n\t}\r\n\r\n\tcreateElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.classList.add(\"tabulator-calcs-holder\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.genColumn = new Column({field:\"value\"}, this);\r\n\r\n\t\tthis.subscribe(\"cell-value-changed\", this.cellValueChanged.bind(this));\r\n\t\tthis.subscribe(\"column-init\", this.initializeColumnCheck.bind(this));\r\n\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\r\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\r\n\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\r\n\t\tthis.subscribe(\"column-moved\", this.recalcActiveRows.bind(this));\r\n\t\tthis.subscribe(\"column-add\", this.recalcActiveRows.bind(this));\r\n\t\tthis.subscribe(\"data-refreshed\", this.recalcActiveRowsRefresh.bind(this));\r\n\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\r\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\r\n\r\n\t\tthis.registerTableFunction(\"getCalcResults\", this.getResults.bind(this));\r\n\t\tthis.registerTableFunction(\"recalc\", this.userRecalc.bind(this));\r\n\t}\r\n\r\n\ttableRedraw(force){\r\n\t\tthis.recalc(this.table.rowManager.activeRows);\r\n\r\n\t\tif(force){\r\n\t\t\tthis.redraw();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\tuserRecalc(){\r\n\t\tthis.recalc(this.table.rowManager.activeRows);\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\tvisibleRows(viewable, rows){\r\n\t\tif(this.topRow){\r\n\t\t\trows.unshift(this.topRow);\r\n\t\t}\r\n\r\n\t\tif(this.botRow){\r\n\t\t\trows.push(this.botRow);\r\n\t\t}\r\n\t\r\n\t\treturn rows;\r\n\t}\r\n\r\n\trowsUpdated(row){\r\n\t\tif(this.table.options.groupBy){\r\n\t\t\tthis.recalcRowGroup(row);\r\n\t\t}else{\r\n\t\t\tthis.recalcActiveRows();\r\n\t\t}\r\n\t}\r\n\r\n\trecalcActiveRowsRefresh(){\r\n\t\tif(this.table.options.groupBy && this.table.options.dataTreeStartExpanded && this.table.options.dataTree){\r\n\t\t\tthis.recalcAll();\r\n\t\t}else{\r\n\t\t\tthis.recalcActiveRows();\r\n\t\t}\r\n\t}\r\n\r\n\trecalcActiveRows(){\r\n\t\tthis.recalc(this.table.rowManager.activeRows);\r\n\t}\r\n\r\n\tcellValueChanged(cell){\r\n\t\tif(cell.column.definition.topCalc || cell.column.definition.bottomCalc){\r\n\t\t\tif(this.table.options.groupBy){\r\n\t\t\t\tif(this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\"){\r\n\t\t\t\t\tthis.recalcActiveRows();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.columnCalcs != \"table\"){\r\n\t\t\t\t\tthis.recalcRowGroup(cell.row);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.recalcActiveRows();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeColumnCheck(column){\r\n\t\tif(column.definition.topCalc || column.definition.bottomCalc){\r\n\t\t\tthis.initializeColumn(column);\r\n\t\t}\r\n\t}\r\n\r\n\t//initialize column calcs\r\n\tinitializeColumn(column){\r\n\t\tvar def = column.definition;\r\n\r\n\t\tvar config = {\r\n\t\t\ttopCalcParams:def.topCalcParams || {},\r\n\t\t\tbotCalcParams:def.bottomCalcParams || {},\r\n\t\t};\r\n\r\n\t\tif(def.topCalc){\r\n\r\n\t\t\tswitch(typeof def.topCalc){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\t\tif(ColumnCalcs.calculations[def.topCalc]){\r\n\t\t\t\t\t\tconfig.topCalc = ColumnCalcs.calculations[def.topCalc];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\t\tconfig.topCalc = def.topCalc;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(config.topCalc){\r\n\t\t\t\tcolumn.modules.columnCalcs = config;\r\n\t\t\t\tthis.topCalcs.push(column);\r\n\r\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\r\n\t\t\t\t\tthis.initializeTopRow();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(def.bottomCalc){\r\n\t\t\tswitch(typeof def.bottomCalc){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\t\tif(ColumnCalcs.calculations[def.bottomCalc]){\r\n\t\t\t\t\t\tconfig.botCalc = ColumnCalcs.calculations[def.bottomCalc];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\t\tconfig.botCalc = def.bottomCalc;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(config.botCalc){\r\n\t\t\t\tcolumn.modules.columnCalcs = config;\r\n\t\t\t\tthis.botCalcs.push(column);\r\n\r\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\r\n\t\t\t\t\tthis.initializeBottomRow();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//dummy functions to handle being mock column manager\r\n\tregisterColumnField(){}\r\n\r\n\tremoveCalcs(){\r\n\t\tvar changed = false;\r\n\r\n\t\tif(this.topInitialized){\r\n\t\t\tthis.topInitialized = false;\r\n\t\t\tthis.topElement.parentNode.removeChild(this.topElement);\r\n\t\t\tchanged = true;\r\n\t\t}\r\n\r\n\t\tif(this.botInitialized){\r\n\t\t\tthis.botInitialized = false;\r\n\t\t\tthis.footerRemove(this.botElement);\r\n\t\t\tchanged = true;\r\n\t\t}\r\n\r\n\t\tif(changed){\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeTopRow(){\r\n\t\tif(!this.topInitialized){\r\n\t\t\tthis.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\r\n\t\t\tthis.topInitialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeBottomRow(){\r\n\t\tif(!this.botInitialized){\r\n\t\t\tthis.footerPrepend(this.botElement);\r\n\t\t\tthis.botInitialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tscrollHorizontal(left){\r\n\t\tif(this.botInitialized && this.botRow){\r\n\t\t\tif(this.table.rtl){\r\n\t\t\t\tthis.botRow.getElement().style.marginRight = (left) + \"px\";\r\n\t\t\t}else{\r\n\t\t\t\tthis.botRow.getElement().style.marginLeft = (-left) + \"px\";\r\n\t\t\t}\t\r\n\t\t}\r\n\t}\r\n\r\n\trecalc(rows){\r\n\t\tvar data, row;\r\n\r\n\t\tif(this.topInitialized || this.botInitialized){\r\n\t\t\tdata = this.rowsToData(rows);\r\n\r\n\t\t\tif(this.topInitialized){\r\n\t\t\t\tif(this.topRow){\r\n\t\t\t\t\tthis.topRow.deleteCells();\r\n\t\t\t\t}\r\n\r\n\t\t\t\trow = this.generateRow(\"top\", data);\r\n\t\t\t\tthis.topRow = row;\r\n\t\t\t\twhile(this.topElement.firstChild) this.topElement.removeChild(this.topElement.firstChild);\r\n\t\t\t\tthis.topElement.appendChild(row.getElement());\r\n\t\t\t\trow.initialize(true);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.botInitialized){\r\n\t\t\t\tif(this.botRow){\r\n\t\t\t\t\tthis.botRow.deleteCells();\r\n\t\t\t\t}\r\n\r\n\t\t\t\trow = this.generateRow(\"bottom\", data);\r\n\t\t\t\tthis.botRow = row;\r\n\t\t\t\twhile(this.botElement.firstChild) this.botElement.removeChild(this.botElement.firstChild);\r\n\t\t\t\tthis.botElement.appendChild(row.getElement());\r\n\t\t\t\trow.initialize(true);\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\r\n\t\t\t//set resizable handles\r\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\t\tthis.table.modules.frozenColumns.layout();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trecalcRowGroup(row){\r\n\t\tthis.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\r\n\t}\r\n\r\n\trecalcAll(){\r\n\t\tif(this.topCalcs.length || this.botCalcs.length){\r\n\t\t\tif(this.table.options.columnCalcs !== \"group\"){\r\n\t\t\t\tthis.recalcActiveRows();\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.groupBy && this.table.options.columnCalcs !== \"table\"){\r\n\r\n\t\t\t\tvar groups = this.table.modules.groupRows.getChildGroups();\r\n\r\n\t\t\t\tgroups.forEach((group) => {\r\n\t\t\t\t\tthis.recalcGroup(group);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trecalcGroup(group){\r\n\t\tvar data, rowData;\r\n\r\n\t\tif(group){\r\n\t\t\tif(group.calcs){\r\n\t\t\t\tif(group.calcs.bottom){\r\n\t\t\t\t\tdata = this.rowsToData(group.rows);\r\n\t\t\t\t\trowData = this.generateRowData(\"bottom\", data);\r\n\r\n\t\t\t\t\tgroup.calcs.bottom.updateData(rowData);\r\n\t\t\t\t\tgroup.calcs.bottom.reinitialize();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(group.calcs.top){\r\n\t\t\t\t\tdata = this.rowsToData(group.rows);\r\n\t\t\t\t\trowData = this.generateRowData(\"top\", data);\r\n\r\n\t\t\t\t\tgroup.calcs.top.updateData(rowData);\r\n\t\t\t\t\tgroup.calcs.top.reinitialize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//generate top stats row\r\n\tgenerateTopRow(rows){\r\n\t\treturn this.generateRow(\"top\", this.rowsToData(rows));\r\n\t}\r\n\t//generate bottom stats row\r\n\tgenerateBottomRow(rows){\r\n\t\treturn this.generateRow(\"bottom\", this.rowsToData(rows));\r\n\t}\r\n\r\n\trowsToData(rows){\r\n\t\tvar data = [];\r\n\t\t\r\n\t\trows.forEach((row) => {\r\n\t\t\tdata.push(row.getData());\r\n\r\n\t\t\tif(this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs){\r\n\t\t\t\tif(row.modules.dataTree && row.modules.dataTree.open){\r\n\t\t\t\t\tvar children = this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(row));\r\n\t\t\t\t\tdata = data.concat(children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\t//generate stats row\r\n\tgenerateRow(pos, data){\r\n\t\tvar rowData = this.generateRowData(pos, data),\r\n\t\trow;\r\n\r\n\t\tif(this.table.modExists(\"mutator\")){\r\n\t\t\tthis.table.modules.mutator.disable();\r\n\t\t}\r\n\r\n\t\trow = new Row(rowData, this, \"calc\");\r\n\r\n\t\tif(this.table.modExists(\"mutator\")){\r\n\t\t\tthis.table.modules.mutator.enable();\r\n\t\t}\r\n\r\n\t\trow.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\r\n\r\n\t\trow.component = false;\r\n\r\n\t\trow.getComponent = () => {\r\n\t\t\tif(!row.component){\r\n\t\t\t\trow.component = new CalcComponent(row);\r\n\t\t\t}\r\n\r\n\t\t\treturn row.component;\r\n\t\t};\r\n\r\n\t\trow.generateCells = () => {\r\n\r\n\t\t\tvar cells = [];\r\n\r\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\r\n\t\t\t\t//set field name of mock column\r\n\t\t\t\tthis.genColumn.setField(column.getField());\r\n\t\t\t\tthis.genColumn.hozAlign = column.hozAlign;\r\n\r\n\t\t\t\tif(column.definition[pos + \"CalcFormatter\"] && this.table.modExists(\"format\")){\r\n\t\t\t\t\tthis.genColumn.modules.format = {\r\n\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\r\n\t\t\t\t\t\tparams: column.definition[pos + \"CalcFormatterParams\"] || {},\r\n\t\t\t\t\t};\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.genColumn.modules.format = {\r\n\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(\"plaintext\"),\r\n\t\t\t\t\t\tparams:{}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//ensure css class definition is replicated to calculation cell\r\n\t\t\t\tthis.genColumn.definition.cssClass = column.definition.cssClass;\r\n\r\n\t\t\t\t//generate cell and assign to correct column\r\n\t\t\t\tvar cell = new Cell(this.genColumn, row);\r\n\t\t\t\tcell.getElement();\r\n\t\t\t\tcell.column = column;\r\n\t\t\t\tcell.setWidth();\r\n\r\n\t\t\t\tcolumn.cells.push(cell);\r\n\t\t\t\tcells.push(cell);\r\n\r\n\t\t\t\tif(!column.visible){\r\n\t\t\t\t\tcell.hide();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\trow.cells = cells;\r\n\t\t};\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\t//generate stats row\r\n\tgenerateRowData(pos, data){\r\n\t\tvar rowData = {},\r\n\t\tcalcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\r\n\t\ttype = pos == \"top\" ? \"topCalc\" : \"botCalc\",\r\n\t\tparams, paramKey;\r\n\r\n\t\tcalcs.forEach(function(column){\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tif(column.modules.columnCalcs && column.modules.columnCalcs[type]){\r\n\t\t\t\tdata.forEach(function(item){\r\n\t\t\t\t\tvalues.push(column.getFieldValue(item));\r\n\t\t\t\t});\r\n\r\n\t\t\t\tparamKey = type + \"Params\";\r\n\t\t\t\tparams = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\r\n\r\n\t\t\t\tcolumn.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn rowData;\r\n\t}\r\n\r\n\thasTopCalcs(){\r\n\t\treturn\t!!(this.topCalcs.length);\r\n\t}\r\n\r\n\thasBottomCalcs(){\r\n\t\treturn\t!!(this.botCalcs.length);\r\n\t}\r\n\r\n\t//handle table redraw\r\n\tredraw(){\r\n\t\tif(this.topRow){\r\n\t\t\tthis.topRow.normalizeHeight(true);\r\n\t\t}\r\n\t\tif(this.botRow){\r\n\t\t\tthis.botRow.normalizeHeight(true);\r\n\t\t}\r\n\t}\r\n\r\n\t//return the calculated\r\n\tgetResults(){\r\n\t\tvar results = {},\r\n\t\tgroups;\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tgroups = this.table.modules.groupRows.getGroups(true);\r\n\r\n\t\t\tgroups.forEach((group) => {\r\n\t\t\t\tresults[group.getKey()] = this.getGroupResults(group);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tresults = {\r\n\t\t\t\ttop: this.topRow ? this.topRow.getData() : {},\r\n\t\t\t\tbottom: this.botRow ? this.botRow.getData() : {},\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\n\t//get results from a group\r\n\tgetGroupResults(group){\r\n\t\tvar groupObj = group._getSelf(),\r\n\t\tsubGroups = group.getSubGroups(),\r\n\t\tsubGroupResults = {},\r\n\t\tresults = {};\r\n\r\n\t\tsubGroups.forEach((subgroup) => {\r\n\t\t\tsubGroupResults[subgroup.getKey()] = this.getGroupResults(subgroup);\r\n\t\t});\r\n\r\n\t\tresults = {\r\n\t\t\ttop: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\r\n\t\t\tbottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\r\n\t\t\tgroups: subGroupResults,\r\n\t\t};\r\n\r\n\t\treturn results;\r\n\t}\r\n}\r\n\r\nColumnCalcs.moduleName = \"columnCalcs\";\r\n\r\n//load defaults\r\nColumnCalcs.calculations = defaultCalculations;\r\n\r\nexport default ColumnCalcs;","import Module from '../../core/Module.js';\r\n\r\nimport Row from '../../core/row/Row.js';\r\n\r\nimport RowComponent from '../../core/row/RowComponent.js';\r\n\r\nclass DataTree extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.indent = 10;\r\n\t\tthis.field = \"\";\r\n\t\tthis.collapseEl = null;\r\n\t\tthis.expandEl = null;\r\n\t\tthis.branchEl = null;\r\n\t\tthis.elementField = false;\r\n\r\n\t\tthis.startOpen = function(){};\r\n\r\n\t\tthis.displayIndex = 0;\r\n\r\n\t\tthis.registerTableOption(\"dataTree\", false); //enable data tree\r\n\t\tthis.registerTableOption(\"dataTreeFilter\", true); //filter child rows\r\n\t\tthis.registerTableOption(\"dataTreeSort\", true); //sort child rows\r\n\t\tthis.registerTableOption(\"dataTreeElementColumn\", false);\r\n\t\tthis.registerTableOption(\"dataTreeBranchElement\", true);//show data tree branch element\r\n\t\tthis.registerTableOption(\"dataTreeChildIndent\", 9); //data tree child indent in px\r\n\t\tthis.registerTableOption(\"dataTreeChildField\", \"_children\");//data tre column field to look for child rows\r\n\t\tthis.registerTableOption(\"dataTreeCollapseElement\", false);//data tree row collapse element\r\n\t\tthis.registerTableOption(\"dataTreeExpandElement\", false);//data tree row expand element\r\n\t\tthis.registerTableOption(\"dataTreeStartExpanded\", false);\r\n\t\tthis.registerTableOption(\"dataTreeChildColumnCalcs\", false);//include visible data tree rows in column calculations\r\n\t\tthis.registerTableOption(\"dataTreeSelectPropagate\", false);//selecting a parent row selects its children\r\n\r\n\t\t//register component functions\r\n\t\tthis.registerComponentFunction(\"row\", \"treeCollapse\", this.collapseRow.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"treeExpand\", this.expandRow.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"treeToggle\", this.toggleRow.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"getTreeParent\", this.getTreeParent.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"getTreeChildren\", this.getRowChildren.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"addTreeChild\", this.addTreeChildRow.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"isTreeExpanded\", this.isRowExpanded.bind(this));\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tif(this.table.options.dataTree){\r\n\t\t\tvar dummyEl = null,\r\n\t\t\toptions = this.table.options;\r\n\r\n\t\t\tthis.field = options.dataTreeChildField;\r\n\t\t\tthis.indent = options.dataTreeChildIndent;\r\n\r\n\t\t\tif(this.options(\"movableRows\")){\r\n\t\t\t\tconsole.warn(\"The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior\");\r\n\t\t\t}\r\n\r\n\t\t\tif(options.dataTreeBranchElement){\r\n\r\n\t\t\t\tif(options.dataTreeBranchElement === true){\r\n\t\t\t\t\tthis.branchEl = document.createElement(\"div\");\r\n\t\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(typeof options.dataTreeBranchElement === \"string\"){\r\n\t\t\t\t\t\tdummyEl = document.createElement(\"div\");\r\n\t\t\t\t\t\tdummyEl.innerHTML = options.dataTreeBranchElement;\r\n\t\t\t\t\t\tthis.branchEl = dummyEl.firstChild;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.branchEl = options.dataTreeBranchElement;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(options.dataTreeCollapseElement){\r\n\t\t\t\tif(typeof options.dataTreeCollapseElement === \"string\"){\r\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\r\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeCollapseElement;\r\n\t\t\t\t\tthis.collapseEl = dummyEl.firstChild;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.collapseEl = options.dataTreeCollapseElement;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.collapseEl = document.createElement(\"div\");\r\n\t\t\t\tthis.collapseEl.classList.add(\"tabulator-data-tree-control\");\r\n\t\t\t\tthis.collapseEl.tabIndex = 0;\r\n\t\t\t\tthis.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(options.dataTreeExpandElement){\r\n\t\t\t\tif(typeof options.dataTreeExpandElement === \"string\"){\r\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\r\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeExpandElement;\r\n\t\t\t\t\tthis.expandEl = dummyEl.firstChild;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.expandEl = options.dataTreeExpandElement;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.expandEl = document.createElement(\"div\");\r\n\t\t\t\tthis.expandEl.classList.add(\"tabulator-data-tree-control\");\r\n\t\t\t\tthis.expandEl.tabIndex = 0;\r\n\t\t\t\tthis.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\r\n\t\t\t}\r\n\r\n\r\n\t\t\tswitch(typeof options.dataTreeStartExpanded){\r\n\t\t\t\tcase \"boolean\":\r\n\t\t\t\t\tthis.startOpen = function(row, index){\r\n\t\t\t\t\t\treturn options.dataTreeStartExpanded;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\t\tthis.startOpen = options.dataTreeStartExpanded;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthis.startOpen = function(row, index){\r\n\t\t\t\t\t\treturn options.dataTreeStartExpanded[index];\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\r\n\t\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\r\n\t\t\tthis.subscribe(\"row-deleted\", this.rowDelete.bind(this),0);\r\n\t\t\tthis.subscribe(\"row-data-changed\", this.rowDataChanged.bind(this), 10);\r\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellValueChanged.bind(this));\r\n\t\t\tthis.subscribe(\"edit-cancelled\", this.cellValueChanged.bind(this));\r\n\t\t\tthis.subscribe(\"column-moving-rows\", this.columnMoving.bind(this));\r\n\t\t\tthis.subscribe(\"table-built\", this.initializeElementField.bind(this));\r\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedrawing.bind(this));\r\n\r\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 30);\r\n\t\t}\r\n\t}\r\n\r\n\ttableRedrawing(force){\r\n\t\tvar rows;\r\n\r\n\t\tif(force){\r\n\t\t\trows = this.table.rowManager.getRows();\r\n\t\t\t\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tthis.reinitializeRowChildren(row);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeElementField(){\r\n\t\tvar firstCol = this.table.columnManager.getFirstVisibleColumn();\r\n\r\n\t\tthis.elementField = this.table.options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\r\n\t}\r\n\t\r\n\tgetRowChildren(row){\r\n\t\treturn this.getTreeChildren(row, true);\r\n\t}\r\n\r\n\tcolumnMoving(){\r\n\t\tvar rows = [];\r\n\r\n\t\tthis.table.rowManager.rows.forEach((row) => {\r\n\t\t\trows = rows.concat(this.getTreeChildren(row, false, true));\r\n\t\t});\r\n\r\n\t\treturn rows;\r\n\t}\r\n\r\n\trowDataChanged(row, visible, updatedData){\r\n\t\tif(this.redrawNeeded(updatedData)){\r\n\t\t\tthis.initializeRow(row);\r\n\r\n\t\t\tif(visible){\r\n\t\t\t\tthis.layoutRow(row);\r\n\t\t\t\tthis.refreshData(true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcellValueChanged(cell){\r\n\t\tvar field = cell.column.getField();\r\n\r\n\t\tif(field === this.elementField){\r\n\t\t\tthis.layoutRow(cell.row);\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar childArray = row.getData()[this.field];\r\n\t\tvar isArray = Array.isArray(childArray);\r\n\r\n\t\tvar children = isArray || (!isArray && typeof childArray === \"object\" && childArray !== null);\r\n\r\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.branchEl){\r\n\t\t\trow.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\r\n\t\t}\r\n\r\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.controlEl){\r\n\t\t\trow.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\r\n\t\t}\r\n\r\n\t\trow.modules.dataTree = {\r\n\t\t\tindex: row.modules.dataTree ? row.modules.dataTree.index : 0,\r\n\t\t\topen: children ? (row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0)) : false,\r\n\t\t\tcontrolEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\r\n\t\t\tbranchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\r\n\t\t\tparent: row.modules.dataTree ? row.modules.dataTree.parent : false,\r\n\t\t\tchildren:children,\r\n\t\t};\r\n\t}\r\n\r\n\treinitializeRowChildren(row){\r\n\t\tvar children = this.getTreeChildren(row, false, true);\r\n\r\n\t\tchildren.forEach(function(child){\r\n\t\t\tchild.reinitialize(true);\r\n\t\t});\r\n\t}\r\n\r\n\tlayoutRow(row){\r\n\t\tvar cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\r\n\t\tel = cell.getElement(),\r\n\t\tconfig = row.modules.dataTree;\r\n\r\n\t\tif(config.branchEl){\r\n\t\t\tif(config.branchEl.parentNode){\r\n\t\t\t\tconfig.branchEl.parentNode.removeChild(config.branchEl);\r\n\t\t\t}\r\n\t\t\tconfig.branchEl = false;\r\n\t\t}\r\n\r\n\t\tif(config.controlEl){\r\n\t\t\tif(config.controlEl.parentNode){\r\n\t\t\t\tconfig.controlEl.parentNode.removeChild(config.controlEl);\r\n\t\t\t}\r\n\t\t\tconfig.controlEl = false;\r\n\t\t}\r\n\r\n\t\tthis.generateControlElement(row, el);\r\n\r\n\t\trow.getElement().classList.add(\"tabulator-tree-level-\" + config.index);\r\n\r\n\t\tif(config.index){\r\n\t\t\tif(this.branchEl){\r\n\t\t\t\tconfig.branchEl = this.branchEl.cloneNode(true);\r\n\t\t\t\tel.insertBefore(config.branchEl, el.firstChild);\r\n\r\n\t\t\t\tif(this.table.rtl){\r\n\t\t\t\t\tconfig.branchEl.style.marginRight = (((config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconfig.branchEl.style.marginLeft = (((config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\r\n\t\t\t\tif(this.table.rtl){\r\n\t\t\t\t\tel.style.paddingRight = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) + (config.index * this.indent) + \"px\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tel.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + (config.index * this.indent) + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateControlElement(row, el){\r\n\t\tvar config = row.modules.dataTree,\r\n\t\toldControl = config.controlEl;\r\n\r\n\t\tel = el || row.getCells()[0].getElement();\r\n\r\n\t\tif(config.children !== false){\r\n\r\n\t\t\tif(config.open){\r\n\t\t\t\tconfig.controlEl = this.collapseEl.cloneNode(true);\r\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tthis.collapseRow(row);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconfig.controlEl = this.expandEl.cloneNode(true);\r\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tthis.expandRow(row);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconfig.controlEl.addEventListener(\"mousedown\", (e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\r\n\t\t\tif(oldControl && oldControl.parentNode === el){\r\n\t\t\t\toldControl.parentNode.replaceChild(config.controlEl,oldControl);\r\n\t\t\t}else{\r\n\t\t\t\tel.insertBefore(config.controlEl, el.firstChild);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetDisplayIndex (index) {\r\n\t\tthis.displayIndex = index;\r\n\t}\r\n\r\n\tgetDisplayIndex () {\r\n\t\treturn this.displayIndex;\r\n\t}\r\n\r\n\tgetRows(rows){\r\n\t\tvar output = [];\r\n\r\n\t\trows.forEach((row, i) => {\r\n\t\t\tvar config, children;\r\n\r\n\t\t\toutput.push(row);\r\n\r\n\t\t\tif(row instanceof Row){\r\n\r\n\t\t\t\trow.create();\r\n\r\n\t\t\t\tconfig = row.modules.dataTree.children;\r\n\r\n\t\t\t\tif(!config.index && config.children !== false){\r\n\t\t\t\t\tchildren = this.getChildren(row);\r\n\r\n\t\t\t\t\tchildren.forEach((child) => {\r\n\t\t\t\t\t\tchild.create();\r\n\t\t\t\t\t\toutput.push(child);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetChildren(row, allChildren){\r\n\t\tvar config = row.modules.dataTree,\r\n\t\tchildren = [],\r\n\t\toutput = [];\r\n\r\n\t\tif(config.children !== false && (config.open || allChildren)){\r\n\t\t\tif(!Array.isArray(config.children)){\r\n\t\t\t\tconfig.children = this.generateChildren(row);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\r\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\r\n\t\t\t}else{\r\n\t\t\t\tchildren = config.children;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"sort\") && this.table.options.dataTreeSort){\r\n\t\t\t\tthis.table.modules.sort.sort(children);\r\n\t\t\t}\r\n\r\n\t\t\tchildren.forEach((child) => {\r\n\t\t\t\toutput.push(child);\r\n\r\n\t\t\t\tvar subChildren = this.getChildren(child);\r\n\r\n\t\t\t\tsubChildren.forEach((sub) => {\r\n\t\t\t\t\toutput.push(sub);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgenerateChildren(row){\r\n\t\tvar children = [];\r\n\r\n\t\tvar childArray = row.getData()[this.field];\r\n\r\n\t\tif(!Array.isArray(childArray)){\r\n\t\t\tchildArray = [childArray];\r\n\t\t}\r\n\r\n\t\tchildArray.forEach((childData) => {\r\n\t\t\tvar childRow = new Row(childData || {}, this.table.rowManager);\r\n\r\n\t\t\tchildRow.create();\r\n\r\n\t\t\tchildRow.modules.dataTree.index = row.modules.dataTree.index + 1;\r\n\t\t\tchildRow.modules.dataTree.parent = row;\r\n\r\n\t\t\tif(childRow.modules.dataTree.children){\r\n\t\t\t\tchildRow.modules.dataTree.open = this.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\r\n\t\t\t}\r\n\t\t\tchildren.push(childRow);\r\n\t\t});\r\n\r\n\t\treturn children;\r\n\t}\r\n\r\n\texpandRow(row, silent){\r\n\t\tvar config = row.modules.dataTree;\r\n\r\n\t\tif(config.children !== false){\r\n\t\t\tconfig.open = true;\r\n\r\n\t\t\trow.reinitialize();\r\n\r\n\t\t\tthis.refreshData(true);\r\n\r\n\t\t\tthis.dispatchExternal(\"dataTreeRowExpanded\", row.getComponent(), row.modules.dataTree.index);\r\n\t\t}\r\n\t}\r\n\r\n\tcollapseRow(row){\r\n\t\tvar config = row.modules.dataTree;\r\n\r\n\t\tif(config.children !== false){\r\n\t\t\tconfig.open = false;\r\n\r\n\t\t\trow.reinitialize();\r\n\r\n\t\t\tthis.refreshData(true);\r\n\r\n\t\t\tthis.dispatchExternal(\"dataTreeRowCollapsed\", row.getComponent(), row.modules.dataTree.index);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleRow(row){\r\n\t\tvar config = row.modules.dataTree;\r\n\r\n\t\tif(config.children !== false){\r\n\t\t\tif(config.open){\r\n\t\t\t\tthis.collapseRow(row);\r\n\t\t\t}else{\r\n\t\t\t\tthis.expandRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tisRowExpanded(row){\r\n\t\treturn row.modules.dataTree.open;\r\n\t}\r\n\r\n\tgetTreeParent(row){\r\n\t\treturn row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\r\n\t}\r\n\r\n\tgetTreeParentRoot(row){\r\n\t\treturn row.modules.dataTree && row.modules.dataTree.parent ? this.getTreeParentRoot(row.modules.dataTree.parent) : row;\r\n\t}\r\n\r\n\tgetFilteredTreeChildren(row){\r\n\t\tvar config = row.modules.dataTree,\r\n\t\toutput = [], children;\r\n\r\n\t\tif(config.children){\r\n\r\n\t\t\tif(!Array.isArray(config.children)){\r\n\t\t\t\tconfig.children = this.generateChildren(row);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\r\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\r\n\t\t\t}else{\r\n\t\t\t\tchildren = config.children;\r\n\t\t\t}\r\n\r\n\t\t\tchildren.forEach((childRow) => {\r\n\t\t\t\tif(childRow instanceof Row){\r\n\t\t\t\t\toutput.push(childRow);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\trowDelete(row){\r\n\t\tvar parent = row.modules.dataTree.parent,\r\n\t\tchildIndex;\r\n\r\n\t\tif(parent){\r\n\t\t\tchildIndex = this.findChildIndex(row, parent);\r\n\r\n\t\t\tif(childIndex !== false){\r\n\t\t\t\tparent.data[this.field].splice(childIndex, 1);\r\n\t\t\t}\r\n\r\n\t\t\tif(!parent.data[this.field].length){\r\n\t\t\t\tdelete parent.data[this.field];\r\n\t\t\t}\r\n\r\n\t\t\tthis.initializeRow(parent);\r\n\t\t\tthis.layoutRow(parent);\r\n\t\t}\r\n\r\n\t\tthis.refreshData(true);\r\n\t}\r\n\r\n\taddTreeChildRow(row, data, top, index){\r\n\t\tvar childIndex = false;\r\n\r\n\t\tif(typeof data === \"string\"){\r\n\t\t\tdata = JSON.parse(data);\r\n\t\t}\r\n\r\n\t\tif(!Array.isArray(row.data[this.field])){\r\n\t\t\trow.data[this.field] = [];\r\n\r\n\t\t\trow.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\r\n\t\t}\r\n\r\n\t\tif(typeof index !== \"undefined\"){\r\n\t\t\tchildIndex = this.findChildIndex(index, row);\r\n\r\n\t\t\tif(childIndex !== false){\r\n\t\t\t\trow.data[this.field].splice((top ? childIndex : childIndex + 1), 0, data);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(childIndex === false){\r\n\t\t\tif(top){\r\n\t\t\t\trow.data[this.field].unshift(data);\r\n\t\t\t}else{\r\n\t\t\t\trow.data[this.field].push(data);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.initializeRow(row);\r\n\t\tthis.layoutRow(row);\r\n\r\n\t\tthis.refreshData(true);\r\n\t}\r\n\r\n\tfindChildIndex(subject, parent){\r\n\t\tvar match = false;\r\n\r\n\t\tif(typeof subject == \"object\"){\r\n\r\n\t\t\tif(subject instanceof Row){\r\n\t\t\t\t//subject is row element\r\n\t\t\t\tmatch = subject.data;\r\n\t\t\t}else if(subject instanceof RowComponent){\r\n\t\t\t\t//subject is public row component\r\n\t\t\t\tmatch = subject._getSelf().data;\r\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\r\n\t\t\t\tif(parent.modules.dataTree){\r\n\t\t\t\t\tmatch = parent.modules.dataTree.children.find((childRow) => {\r\n\t\t\t\t\t\treturn childRow instanceof Row ? childRow.element === subject : false;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(match){\r\n\t\t\t\t\t\tmatch = match.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else if(subject === null){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\r\n\t\t}else if(typeof subject == \"undefined\"){\r\n\t\t\tmatch = false;\r\n\t\t}else{\r\n\t\t\t//subject should be treated as the index of the row\r\n\t\t\tmatch = parent.data[this.field].find((row) => {\r\n\t\t\t\treturn row.data[this.table.options.index] == subject;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(match){\r\n\r\n\t\t\tif(Array.isArray(parent.data[this.field])){\r\n\t\t\t\tmatch = parent.data[this.field].indexOf(match);\r\n\t\t\t}\r\n\r\n\t\t\tif(match == -1){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//catch all for any other type of input\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetTreeChildren(row, component, recurse){\r\n\t\tvar config = row.modules.dataTree,\r\n\t\toutput = [];\r\n\r\n\t\tif(config.children){\r\n\r\n\t\t\tif(!Array.isArray(config.children)){\r\n\t\t\t\tconfig.children = this.generateChildren(row);\r\n\t\t\t}\r\n\r\n\t\t\tconfig.children.forEach((childRow) => {\r\n\t\t\t\tif(childRow instanceof Row){\r\n\t\t\t\t\toutput.push(component ? childRow.getComponent() : childRow);\r\n\r\n\t\t\t\t\tif(recurse){\r\n\t\t\t\t\t\toutput = output.concat(this.getTreeChildren(childRow, component, recurse));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetChildField(){\r\n\t\treturn this.field;\r\n\t}\r\n\r\n\tredrawNeeded(data){\r\n\t\treturn (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\r\n\t}\r\n}\r\n\r\nDataTree.moduleName = \"dataTree\";\r\n\r\nexport default DataTree;","export default function(list, options = {}, setFileContents){\r\n\tvar delimiter = options.delimiter ? options.delimiter : \",\",\r\n\tfileContents = [],\r\n\theaders = [];\r\n\r\n\tlist.forEach((row) => {\r\n\t\tvar item = [];\r\n\r\n\t\tswitch(row.type){\r\n\t\t\tcase \"group\":\r\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process row groups\");\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"calc\":\r\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column calculations\");\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"header\":\r\n\t\t\t\trow.columns.forEach((col, i) => {\r\n\t\t\t\t\tif(col && col.depth === 1){\r\n\t\t\t\t\t\theaders[i] = typeof col.value == \"undefined\"  || col.value === null ? \"\" : ('\"' + String(col.value).split('\"').join('\"\"') + '\"');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"row\":\r\n\t\t\t\trow.columns.forEach((col) => {\r\n\r\n\t\t\t\t\tif(col){\r\n\r\n\t\t\t\t\t\tswitch(typeof col.value){\r\n\t\t\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\t\t\tcol.value = col.value !== null ? JSON.stringify(col.value) : \"\";\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\t\t\t\tcol.value = \"\";\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\titem.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tfileContents.push(item.join(delimiter));\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tif(headers.length){\r\n\t\tfileContents.unshift(headers.join(delimiter));\r\n\t}\r\n\r\n\tfileContents = fileContents.join(\"\\n\");\r\n\r\n\tif(options.bom){\r\n\t\tfileContents = \"\\ufeff\" + fileContents;\r\n\t}\r\n\r\n\tsetFileContents(fileContents, \"text/csv\");\r\n}\r\n","export default function(list, options, setFileContents){\r\n\tvar fileContents = [];\r\n\r\n\tlist.forEach((row) => {\r\n\t\tvar item = {};\r\n\r\n\t\tswitch(row.type){\r\n\t\t\tcase \"header\":\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"group\":\r\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"calc\":\r\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"row\":\r\n\t\t\t\trow.columns.forEach((col) => {\r\n\t\t\t\t\tif(col){\r\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tfileContents.push(item);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tfileContents = JSON.stringify(fileContents, null, '\\t');\r\n\r\n\tsetFileContents(fileContents, \"application/json\");\r\n}","export default function(list, options = {}, setFileContents){\r\n\tvar header = [],\r\n\tbody = [],\r\n\tautoTableParams = {},\r\n\trowGroupStyles = options.rowGroupStyles || {\r\n\t\tfontStyle: \"bold\",\r\n\t\tfontSize: 12,\r\n\t\tcellPadding: 6,\r\n\t\tfillColor: 220,\r\n\t},\r\n\trowCalcStyles = options.rowCalcStyles || {\r\n\t\tfontStyle: \"bold\",\r\n\t\tfontSize: 10,\r\n\t\tcellPadding: 4,\r\n\t\tfillColor: 232,\r\n\t},\r\n\tjsPDFParams = options.jsPDF || {},\r\n\ttitle = options.title ? options.title : \"\";\r\n\r\n\tif(!jsPDFParams.orientation){\r\n\t\tjsPDFParams.orientation = options.orientation || \"landscape\";\r\n\t}\r\n\r\n\tif(!jsPDFParams.unit){\r\n\t\tjsPDFParams.unit = \"pt\";\r\n\t}\r\n\r\n\t//parse row list\r\n\tlist.forEach((row) => {\r\n\t\tswitch(row.type){\r\n\t\t\tcase \"header\":\r\n\t\t\t\theader.push(parseRow(row));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"group\":\r\n\t\t\t\tbody.push(parseRow(row, rowGroupStyles));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"calc\":\r\n\t\t\t\tbody.push(parseRow(row, rowCalcStyles));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"row\":\r\n\t\t\t\tbody.push(parseRow(row));\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tfunction parseRow(row, styles){\r\n\t\tvar rowData = [];\r\n\r\n\t\trow.columns.forEach((col) =>{\r\n\t\t\tvar cell;\r\n\r\n\t\t\tif(col){\r\n\t\t\t\tswitch(typeof col.value){\r\n\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\tcol.value = col.value !== null ? JSON.stringify(col.value) : \"\";\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\t\tcol.value = \"\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcell = {\r\n\t\t\t\t\tcontent:col.value,\r\n\t\t\t\t\tcolSpan:col.width,\r\n\t\t\t\t\trowSpan:col.height,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(styles){\r\n\t\t\t\t\tcell.styles = styles;\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowData.push(cell);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn rowData;\r\n\t}\r\n\r\n\r\n\t//configure PDF\r\n\tvar doc = new jspdf.jsPDF(jsPDFParams); //set document to landscape, better for most tables\r\n\r\n\tif(options.autoTable){\r\n\t\tif(typeof options.autoTable === \"function\"){\r\n\t\t\tautoTableParams = options.autoTable(doc) || {};\r\n\t\t}else{\r\n\t\t\tautoTableParams = options.autoTable;\r\n\t\t}\r\n\t}\r\n\r\n\tif(title){\r\n\t\tautoTableParams.didDrawPage = function(data) {\r\n\t\t\tdoc.text(title, 40, 30);\r\n\t\t};\r\n\t}\r\n\r\n\tautoTableParams.head = header;\r\n\tautoTableParams.body = body;\r\n\r\n\tdoc.autoTable(autoTableParams);\r\n\r\n\tif(options.documentProcessing){\r\n\t\toptions.documentProcessing(doc);\r\n\t}\r\n\r\n\tsetFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\r\n}\r\n","import CoreFeature from '../../../../core/CoreFeature.js';\r\n\r\nexport default function(list, options, setFileContents){\r\n\tvar self = this,\r\n\tsheetName = options.sheetName || \"Sheet1\",\r\n\tworkbook = XLSX.utils.book_new(),\r\n\ttableFeatures = new CoreFeature(this),\r\n\toutput;\r\n\r\n\tworkbook.SheetNames = [];\r\n\tworkbook.Sheets = {};\r\n\r\n\tfunction generateSheet(){\r\n\t\tvar rows = [],\r\n\t\tmerges = [],\r\n\t\tworksheet = {},\r\n\t\trange = {s: {c:0, r:0}, e: {c:(list[0] ? list[0].columns.reduce((a, b) => a + (b && b.width ? b.width : 1), 0) : 0), r:list.length }};\r\n\r\n\t\t//parse row list\r\n\t\tlist.forEach((row, i) => {\r\n\t\t\tvar rowData = [];\r\n\r\n\t\t\trow.columns.forEach(function(col, j){\r\n\r\n\t\t\t\tif(col){\r\n\t\t\t\t\trowData.push(!(col.value instanceof Date) && typeof col.value === \"object\" ? JSON.stringify(col.value) : col.value);\r\n\r\n\t\t\t\t\tif(col.width > 1 || col.height > -1){\r\n\t\t\t\t\t\tif(col.height > 1 || col.width > 1){\r\n\t\t\t\t\t\t\tmerges.push({s:{r:i,c:j},e:{r:i + col.height - 1,c:j + col.width - 1}});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\trowData.push(\"\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\trows.push(rowData);\r\n\t\t});\r\n\r\n\t\t//convert rows to worksheet\r\n\t\tXLSX.utils.sheet_add_aoa(worksheet, rows);\r\n\r\n\t\tworksheet['!ref'] = XLSX.utils.encode_range(range);\r\n\r\n\t\tif(merges.length){\r\n\t\t\tworksheet[\"!merges\"] = merges;\r\n\t\t}\r\n\r\n\t\treturn worksheet;\r\n\t}\r\n\r\n\tif(options.sheetOnly){\r\n\t\tsetFileContents(generateSheet());\r\n\t\treturn;\r\n\t}\r\n\r\n\tif(options.sheets){\r\n\t\tfor(var sheet in options.sheets){\r\n\r\n\t\t\tif(options.sheets[sheet] === true){\r\n\t\t\t\tworkbook.SheetNames.push(sheet);\r\n\t\t\t\tworkbook.Sheets[sheet] = generateSheet();\r\n\t\t\t}else{\r\n\r\n\t\t\t\tworkbook.SheetNames.push(sheet);\r\n\r\n\t\t\t\ttableFeatures.commsSend(options.sheets[sheet], \"download\", \"intercept\",{\r\n\t\t\t\t\ttype:\"xlsx\",\r\n\t\t\t\t\toptions:{sheetOnly:true},\r\n\t\t\t\t\tactive:self.active,\r\n\t\t\t\t\tintercept:function(data){\r\n\t\t\t\t\t\tworkbook.Sheets[sheet] = data;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tworkbook.SheetNames.push(sheetName);\r\n\t\tworkbook.Sheets[sheetName] = generateSheet();\r\n\t}\r\n\r\n\tif(options.documentProcessing){\r\n\t\tworkbook = options.documentProcessing(workbook);\r\n\t}\r\n\r\n\t//convert workbook to binary array\r\n\tfunction s2ab(s) {\r\n\t\tvar buf = new ArrayBuffer(s.length);\r\n\t\tvar view = new Uint8Array(buf);\r\n\t\tfor (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\r\n\t\treturn buf;\r\n\t}\r\n\r\n\toutput = XLSX.write(workbook, {bookType:'xlsx', bookSST:true, type: 'binary'});\r\n\r\n\tsetFileContents(s2ab(output), \"application/octet-stream\");\r\n}","export default function(list, options, setFileContents){\r\n\tif(this.modExists(\"export\", true)){\r\n\t\tsetFileContents(this.modules.export.generateHTMLTable(list), \"text/html\");\r\n\t}\r\n}","export default function (list, options, setFileContents) {\r\n\tconst fileContents = [];\r\n\r\n\tlist.forEach((row) => {\r\n\t\tconst item = {};\r\n\r\n\t\tswitch (row.type) {\r\n\t\t\tcase \"header\":\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"group\":\r\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"calc\":\r\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"row\":\r\n\t\t\t\trow.columns.forEach((col) => {\r\n\t\t\t\t\tif (col) {\r\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tfileContents.push(JSON.stringify(item));\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tsetFileContents(fileContents.join(\"\\n\"), \"application/x-ndjson\");\r\n}","import csv from './downloaders/csv.js';\r\nimport json from './downloaders/json.js';\r\nimport pdf from './downloaders/pdf.js';\r\nimport xlsx from './downloaders/xlsx.js';\r\nimport html from './downloaders/html.js';\r\nimport jsonLines from './downloaders/jsonLines.js';\r\n\r\nexport default {\r\n\tcsv:csv,\r\n\tjson:json,\r\n\tjsonLines:jsonLines,\r\n\tpdf:pdf,\r\n\txlsx:xlsx,\r\n\thtml:html,\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultDownloaders from './defaults/downloaders.js';\r\n\r\nclass Download extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.registerTableOption(\"downloadEncoder\", function(data, mimeType){\r\n\t\t\treturn new Blob([data],{type:mimeType});\r\n\t\t}); //function to manipulate download data\r\n\t\tthis.registerTableOption(\"downloadReady\", undefined); //warn of function deprecation\r\n\t\tthis.registerTableOption(\"downloadConfig\", {}); //download config\r\n\t\tthis.registerTableOption(\"downloadRowRange\", \"active\"); //restrict download to active rows only\r\n\r\n\t\tthis.registerColumnOption(\"download\");\r\n\t\tthis.registerColumnOption(\"titleDownload\");\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.deprecatedOptionsCheck();\r\n\r\n\t\tthis.registerTableFunction(\"download\", this.download.bind(this));\r\n\t\tthis.registerTableFunction(\"downloadToTab\", this.downloadToTab.bind(this));\r\n\t}\r\n\r\n\tdeprecatedOptionsCheck(){\r\n\t\tthis.deprecationCheck(\"downloadReady\", \"downloadEncoder\");\r\n\t}\t\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\tdownloadToTab(type, filename, options, active){\r\n\t\tthis.download(type, filename, options, active, true);\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\t//trigger file download\r\n\tdownload(type, filename, options, range, interceptCallback){\r\n\t\tvar downloadFunc = false;\r\n\r\n\t\tfunction buildLink(data, mime){\r\n\t\t\tif(interceptCallback){\r\n\t\t\t\tif(interceptCallback === true){\r\n\t\t\t\t\tthis.triggerDownload(data, mime, type, filename, true);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tinterceptCallback(data);\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.triggerDownload(data, mime, type, filename);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(typeof type == \"function\"){\r\n\t\t\tdownloadFunc = type;\r\n\t\t}else{\r\n\t\t\tif(Download.downloaders[type]){\r\n\t\t\t\tdownloadFunc = Download.downloaders[type];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Download Error - No such download type found: \", type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(downloadFunc){\r\n\t\t\tvar list = this.generateExportList(range);\r\n\r\n\t\t\tdownloadFunc.call(this.table, list , options || {}, buildLink.bind(this));\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateExportList(range){\r\n\t\tvar list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\");\r\n\r\n\t\t//assign group header formatter\r\n\t\tvar groupHeader = this.table.options.groupHeaderDownload;\r\n\r\n\t\tif(groupHeader && !Array.isArray(groupHeader)){\r\n\t\t\tgroupHeader = [groupHeader];\r\n\t\t}\r\n\r\n\t\tlist.forEach((row) => {\r\n\t\t\tvar group;\r\n\r\n\t\t\tif(row.type === \"group\"){\r\n\t\t\t\tgroup = row.columns[0];\r\n\r\n\t\t\t\tif(groupHeader && groupHeader[row.indent]){\r\n\t\t\t\t\tgroup.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn list;\r\n\t}\r\n\r\n\ttriggerDownload(data, mime, type, filename, newTab){\r\n\t\tvar element = document.createElement('a'),\r\n\t\tblob = this.table.options.downloadEncoder(data, mime);\r\n\r\n\t\tif(blob){\r\n\t\t\tif(newTab){\r\n\t\t\t\twindow.open(window.URL.createObjectURL(blob));\r\n\t\t\t}else{\r\n\t\t\t\tfilename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\r\n\t\t\t\t\r\n\t\t\t\tif(navigator.msSaveOrOpenBlob){\r\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob, filename);\r\n\t\t\t\t}else{\r\n\t\t\t\t\telement.setAttribute('href', window.URL.createObjectURL(blob));\r\n\r\n\t\t\t\t\t//set file title\r\n\t\t\t\t\telement.setAttribute('download', filename);\r\n\r\n\t\t\t\t\t//trigger download\r\n\t\t\t\t\telement.style.display = 'none';\r\n\t\t\t\t\tdocument.body.appendChild(element);\r\n\t\t\t\t\telement.click();\r\n\r\n\t\t\t\t\t//remove temporary link element\r\n\t\t\t\t\tdocument.body.removeChild(element);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatchExternal(\"downloadComplete\");\r\n\t\t}\r\n\t}\r\n\r\n\tcommsReceived(table, action, data){\r\n\t\tswitch(action){\r\n\t\t\tcase \"intercept\":\r\n\t\t\t\tthis.download(data.type, \"\", data.options, data.active, data.intercept);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nDownload.moduleName = \"download\";\r\n\r\n//load defaults\r\nDownload.downloaders = defaultDownloaders;\r\n\r\nexport default Download;","export default function maskInput(el, options){\r\n\tvar mask = options.mask,\r\n\tmaskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\r\n\tmaskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\r\n\tmaskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\";\r\n\r\n\tfunction fillSymbols(index){\r\n\t\tvar symbol = mask[index];\r\n\t\tif(typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber){\r\n\t\t\tel.value = el.value + \"\" + symbol;\r\n\t\t\tfillSymbols(index+1);\r\n\t\t}\r\n\t}\r\n\r\n\tel.addEventListener(\"keydown\", (e) => {\r\n\t\tvar index = el.value.length,\r\n\t\tchar = e.key;\r\n\r\n\t\tif(e.keyCode > 46){\r\n\t\t\tif(index >= mask.length){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\treturn false;\r\n\t\t\t}else{\r\n\t\t\t\tswitch(mask[index]){\r\n\t\t\t\t\tcase maskLetter:\r\n\t\t\t\t\t\tif(char.toUpperCase() == char.toLowerCase()){\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase maskNumber:\r\n\t\t\t\t\t\tif(isNaN(char)){\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase maskWildcard:\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif(char !== mask[index]){\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t});\r\n\r\n\tel.addEventListener(\"keyup\", (e) => {\r\n\t\tif(e.keyCode > 46){\r\n\t\t\tif(options.maskAutoFill){\r\n\t\t\t\tfillSymbols(el.value.length);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\r\n\tif(!el.placeholder){\r\n\t\tel.placeholder = mask;\r\n\t}\r\n\r\n\tif(options.maskAutoFill){\r\n\t\tfillSymbols(el.value.length);\r\n\t}\r\n}","import maskInput from '../../inputMask.js';\r\n\r\n//input element\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\t//create and style input\r\n\tvar cellValue = cell.getValue(),\r\n\tinput = document.createElement(\"input\");\r\n\r\n\tinput.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\r\n\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\r\n\r\n\tonRendered(function(){\r\n\t\tinput.focus({preventScroll: true});\r\n\t\tinput.style.height = \"100%\";\r\n\r\n\t\tif(editorParams.selectContents){\r\n\t\t\tinput.select();\r\n\t\t}\r\n\t});\r\n\r\n\tfunction onChange(e){\r\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\r\n\t\t\tif(success(input.value)){\r\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcancel();\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on blur or change\r\n\tinput.addEventListener(\"change\", onChange);\r\n\tinput.addEventListener(\"blur\", onChange);\r\n\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\t// case 9:\r\n\t\t\tcase 13:\r\n\t\t\t\tonChange(e);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 27:\r\n\t\t\t\tcancel();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 35:\r\n\t\t\tcase 36:\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tif(editorParams.mask){\r\n\t\tmaskInput(input, editorParams);\r\n\t}\r\n\r\n\treturn input;\r\n}","import maskInput from '../../inputMask.js';\r\n\r\n//resizable text area element\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar cellValue = cell.getValue(),\r\n\tvertNav = editorParams.verticalNavigation || \"hybrid\",\r\n\tvalue = String(cellValue !== null && typeof cellValue !== \"undefined\"  ? cellValue : \"\"),\r\n\tinput = document.createElement(\"textarea\"),\r\n\tscrollHeight = 0;\r\n\r\n\t//create and style input\r\n\tinput.style.display = \"block\";\r\n\tinput.style.padding = \"2px\";\r\n\tinput.style.height = \"100%\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\tinput.style.whiteSpace = \"pre-wrap\";\r\n\tinput.style.resize = \"none\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = value;\r\n\r\n\tonRendered(function(){\r\n\t\tinput.focus({preventScroll: true});\r\n\t\tinput.style.height = \"100%\";\r\n\r\n\t\tinput.scrollHeight;\r\n\t\tinput.style.height = input.scrollHeight + \"px\";\r\n\t\tcell.getRow().normalizeHeight();\r\n\r\n\t\tif(editorParams.selectContents){\r\n\t\t\tinput.select();\r\n\t\t}\r\n\t});\r\n\r\n\tfunction onChange(e){\r\n\r\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\r\n\r\n\t\t\tif(success(input.value)){\r\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\r\n\t\t\t}\r\n\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tcell.getRow().normalizeHeight();\r\n\t\t\t},300);\r\n\t\t}else{\r\n\t\t\tcancel();\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on blur or change\r\n\tinput.addEventListener(\"change\", onChange);\r\n\tinput.addEventListener(\"blur\", onChange);\r\n\r\n\tinput.addEventListener(\"keyup\", function(){\r\n\r\n\t\tinput.style.height = \"\";\r\n\r\n\t\tvar heightNow = input.scrollHeight;\r\n\r\n\t\tinput.style.height = heightNow + \"px\";\r\n\r\n\t\tif(heightNow != scrollHeight){\r\n\t\t\tscrollHeight = heightNow;\r\n\t\t\tcell.getRow().normalizeHeight();\r\n\t\t}\r\n\t});\r\n\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\r\n\t\tswitch(e.keyCode){\r\n\r\n\t\t\tcase 13:\r\n\t\t\t\tif(e.shiftKey && editorParams.shiftEnterSubmit){\r\n\t\t\t\t\tonChange(e);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 27:\r\n\t\t\t\tcancel();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 38: //up arrow\r\n\t\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart)){\r\n\t\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 40: //down arrow\r\n\t\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart !== input.value.length)){\r\n\t\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 35:\r\n\t\t\tcase 36:\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tif(editorParams.mask){\r\n\t\tmaskInput(input, editorParams);\r\n\t}\r\n\r\n\treturn input;\r\n}","import maskInput from '../../inputMask.js';\r\n\r\n//input element with type of number\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar cellValue = cell.getValue(),\r\n\tvertNav = editorParams.verticalNavigation || \"editor\",\r\n\tinput = document.createElement(\"input\");\r\n\r\n\tinput.setAttribute(\"type\", \"number\");\r\n\r\n\tif(typeof editorParams.max != \"undefined\"){\r\n\t\tinput.setAttribute(\"max\", editorParams.max);\r\n\t}\r\n\r\n\tif(typeof editorParams.min != \"undefined\"){\r\n\t\tinput.setAttribute(\"min\", editorParams.min);\r\n\t}\r\n\r\n\tif(typeof editorParams.step != \"undefined\"){\r\n\t\tinput.setAttribute(\"step\", editorParams.step);\r\n\t}\r\n\r\n\t//create and style input\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = cellValue;\r\n\r\n\tvar blurFunc = function(e){\r\n\t\tonChange();\r\n\t};\r\n\r\n\tonRendered(function () {\r\n\t\t//submit new value on blur\r\n\t\tinput.removeEventListener(\"blur\", blurFunc);\r\n\r\n\t\tinput.focus({preventScroll: true});\r\n\t\tinput.style.height = \"100%\";\r\n\r\n\t\t//submit new value on blur\r\n\t\tinput.addEventListener(\"blur\", blurFunc);\r\n\r\n\t\tif(editorParams.selectContents){\r\n\t\t\tinput.select();\r\n\t\t}\r\n\t});\r\n\r\n\tfunction onChange(){\r\n\t\tvar value = input.value;\r\n\r\n\t\tif(!isNaN(value) && value !==\"\"){\r\n\t\t\tvalue = Number(value);\r\n\t\t}\r\n\r\n\t\tif(value !== cellValue){\r\n\t\t\tif(success(value)){\r\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcancel();\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 13:\r\n\t\t\t// case 9:\r\n\t\t\t\tonChange();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 27:\r\n\t\t\t\tcancel();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 38: //up arrow\r\n\t\t\tcase 40: //down arrow\r\n\t\t\t\tif(vertNav == \"editor\"){\r\n\t\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 35:\r\n\t\t\tcase 36:\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tif(editorParams.mask){\r\n\t\tmaskInput(input, editorParams);\r\n\t}\r\n\r\n\treturn input;\r\n}","//input element with type of number\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar cellValue = cell.getValue(),\r\n\tinput = document.createElement(\"input\");\r\n\r\n\tinput.setAttribute(\"type\", \"range\");\r\n\r\n\tif (typeof editorParams.max != \"undefined\") {\r\n\t\tinput.setAttribute(\"max\", editorParams.max);\r\n\t}\r\n\r\n\tif (typeof editorParams.min != \"undefined\") {\r\n\t\tinput.setAttribute(\"min\", editorParams.min);\r\n\t}\r\n\r\n\tif (typeof editorParams.step != \"undefined\") {\r\n\t\tinput.setAttribute(\"step\", editorParams.step);\r\n\t}\r\n\r\n\t//create and style input\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = cellValue;\r\n\r\n\tonRendered(function () {\r\n\t\tinput.focus({preventScroll: true});\r\n\t\tinput.style.height = \"100%\";\r\n\t});\r\n\r\n\tfunction onChange(){\r\n\t\tvar value = input.value;\r\n\r\n\t\tif(!isNaN(value) && value !==\"\"){\r\n\t\t\tvalue = Number(value);\r\n\t\t}\r\n\r\n\t\tif(value != cellValue){\r\n\t\t\tif(success(value)){\r\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcancel();\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on blur\r\n\tinput.addEventListener(\"blur\", function(e){\r\n\t\tonChange();\r\n\t});\r\n\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 13:\r\n\t\t\t// case 9:\r\n\t\t\t\tonChange();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 27:\r\n\t\t\t\tcancel();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\treturn input;\r\n}","//input element\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar inputFormat = editorParams.format,\r\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null;\r\n\t\r\n\t//create and style input\r\n\tvar cellValue = cell.getValue(),\r\n\tinput = document.createElement(\"input\");\r\n\t\r\n\tfunction convertDate(value){\r\n\t\tvar newDatetime;\r\n\t\t\r\n\t\tif(DT.isDateTime(value)){\r\n\t\t\tnewDatetime = value;\r\n\t\t}else if(inputFormat === \"iso\"){\r\n\t\t\tnewDatetime = DT.fromISO(String(value));\r\n\t\t}else{\r\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\r\n\t\t}\r\n\t\t\r\n\t\treturn newDatetime.toFormat(\"yyyy-MM-dd\");\r\n\t}\r\n\t\r\n\tinput.type = \"date\";\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.max){\r\n\t\tinput.setAttribute(\"max\", inputFormat ? convertDate(editorParams.max) : editorParams.max);\r\n\t}\r\n\r\n\tif(editorParams.min){\r\n\t\tinput.setAttribute(\"min\", inputFormat ? convertDate(editorParams.min) : editorParams.min);\r\n\t}\r\n\t\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\r\n\t\r\n\tif(inputFormat){\r\n\t\tif(DT){\t\t\r\n\t\t\tcellValue = convertDate(cellValue);\t\t\t\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'inputFormat' param is dependant on luxon.js\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tinput.value = cellValue;\r\n\t\r\n\tonRendered(function(){\r\n\t\tinput.focus({preventScroll: true});\r\n\t\tinput.style.height = \"100%\";\r\n\t\t\r\n\t\tif(editorParams.selectContents){\r\n\t\t\tinput.select();\r\n\t\t}\r\n\t});\r\n\t\r\n\tfunction onChange(e){\r\n\t\tvar value = input.value;\r\n\t\t\r\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\r\n\t\t\t\r\n\t\t\tif(value && inputFormat){\r\n\t\t\t\tvalue = DT.fromFormat(String(value), \"yyyy-MM-dd\").toFormat(inputFormat);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(success(value)){\r\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcancel();\r\n\t\t}\r\n\t}\r\n\t\r\n\t//submit new value on blur or change\r\n\tinput.addEventListener(\"change\", onChange);\r\n\tinput.addEventListener(\"blur\", onChange);\r\n\t\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\t// case 9:\r\n\t\t\tcase 13:\r\n\t\t\t\tonChange(e);\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 27:\r\n\t\t\t\tcancel();\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 35:\r\n\t\t\tcase 36:\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\t\r\n\treturn input;\r\n}","//input element\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar inputFormat = editorParams.format,\r\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null, \r\n\tnewDatetime;\r\n\r\n\t//create and style input\r\n\tvar cellValue = cell.getValue(),\r\n\tinput = document.createElement(\"input\");\r\n\t\r\n\tinput.type = \"time\";\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\t\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\r\n\t\r\n\tif(inputFormat){\r\n\t\tif(DT){\r\n\t\t\tif(DT.isDateTime(cellValue)){\r\n\t\t\t\tnewDatetime = cellValue;\r\n\t\t\t}else if(inputFormat === \"iso\"){\r\n\t\t\t\tnewDatetime = DT.fromISO(String(cellValue));\r\n\t\t\t}else{\r\n\t\t\t\tnewDatetime = DT.fromFormat(String(cellValue), inputFormat);\r\n\t\t\t}\r\n\r\n\t\t\tcellValue = newDatetime.toFormat(\"hh:mm\");\r\n\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'inputFormat' param is dependant on luxon.js\");\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = cellValue;\r\n\t\r\n\tonRendered(function(){\r\n\t\tinput.focus({preventScroll: true});\r\n\t\tinput.style.height = \"100%\";\r\n\t\t\r\n\t\tif(editorParams.selectContents){\r\n\t\t\tinput.select();\r\n\t\t}\r\n\t});\r\n\t\r\n\tfunction onChange(e){\r\n\t\tvar value = input.value;\r\n\r\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\r\n\r\n\t\t\tif(value && inputFormat){\r\n\t\t\t\tvalue = DT.fromFormat(String(value), \"hh:mm\").toFormat(inputFormat);\r\n\t\t\t}\r\n\r\n\t\t\tif(success(value)){\r\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcancel();\r\n\t\t}\r\n\t}\r\n\t\r\n\t//submit new value on blur or change\r\n\tinput.addEventListener(\"change\", onChange);\r\n\tinput.addEventListener(\"blur\", onChange);\r\n\t\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\t// case 9:\r\n\t\t\tcase 13:\r\n\t\t\t\tonChange(e);\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 27:\r\n\t\t\t\tcancel();\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 35:\r\n\t\t\tcase 36:\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\t\r\n\treturn input;\r\n}","//input element\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar inputFormat = editorParams.format,\r\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null, \r\n\tnewDatetime;\r\n\r\n\t//create and style input\r\n\tvar cellValue = cell.getValue(),\r\n\tinput = document.createElement(\"input\");\r\n\t\r\n\tinput.type = \"datetime-local\";\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\t\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\r\n\t\r\n\tif(inputFormat){\r\n\t\tif(DT){\r\n\t\t\tif(DT.isDateTime(cellValue)){\r\n\t\t\t\tnewDatetime = cellValue;\r\n\t\t\t}else if(inputFormat === \"iso\"){\r\n\t\t\t\tnewDatetime = DT.fromISO(String(cellValue));\r\n\t\t\t}else{\r\n\t\t\t\tnewDatetime = DT.fromFormat(String(cellValue), inputFormat);\r\n\t\t\t}\r\n\r\n\t\t\tcellValue = newDatetime.toFormat(\"yyyy-MM-dd\")  + \"T\" + newDatetime.toFormat(\"hh:mm\");\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'inputFormat' param is dependant on luxon.js\");\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = cellValue;\r\n\t\r\n\tonRendered(function(){\r\n\t\tinput.focus({preventScroll: true});\r\n\t\tinput.style.height = \"100%\";\r\n\t\t\r\n\t\tif(editorParams.selectContents){\r\n\t\t\tinput.select();\r\n\t\t}\r\n\t});\r\n\t\r\n\tfunction onChange(e){\r\n\t\tvar value = input.value;\r\n\r\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\r\n\r\n\t\t\tif(value && inputFormat){\r\n\t\t\t\tvalue = DT.fromISO(String(value)).toFormat(inputFormat);\r\n\t\t\t}\r\n\r\n\t\t\tif(success(value)){\r\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcancel();\r\n\t\t}\r\n\t}\r\n\t\r\n\t//submit new value on blur or change\r\n\tinput.addEventListener(\"change\", onChange);\r\n\tinput.addEventListener(\"blur\", onChange);\r\n\t\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\t// case 9:\r\n\t\t\tcase 13:\r\n\t\t\t\tonChange(e);\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 27:\r\n\t\t\t\tcancel();\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 35:\r\n\t\t\tcase 36:\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\t\r\n\treturn input;\r\n}","import maskInput from './inputMask.js';\r\nimport urlBuilder from '../Ajax/defaults/urlGenerator.js';\r\n\r\nexport default class Edit{\r\n\tconstructor(editor, cell, onRendered, success, cancel, editorParams){\r\n\t\tthis.edit = editor;\r\n\t\tthis.table = editor.table;\r\n\t\tthis.cell = cell;\r\n\t\tthis.params = this._initializeParams(editorParams);\r\n\t\t\r\n\t\tthis.data = [];\r\n\t\tthis.displayItems = [];\r\n\t\tthis.currentItems = [];\r\n\t\tthis.focusedItem = null;\r\n\t\t\r\n\t\tthis.input = this._createInputElement();\r\n\t\tthis.listEl = this._createListElement();\r\n\t\t\r\n\t\tthis.initialValues = null; \r\n\t\t\r\n\t\tthis.isFilter = !cell._getSelf;\r\n\t\t\r\n\t\tthis.filterTimeout = null;\r\n\t\tthis.filtered = false;\r\n\t\tthis.typing = false;\r\n\t\t\r\n\t\tthis.values = []; \r\n\t\tthis.popup = null;  \r\n\t\t\r\n\t\tthis.listIteration = 0;\r\n\t\t\r\n\t\tthis.lastAction=\"\";\r\n\t\t\r\n\t\tthis.blurable = true;\r\n\t\t\r\n\t\tthis.actions = {\r\n\t\t\tsuccess:success,\r\n\t\t\tcancel:cancel\r\n\t\t};\r\n\t\t\r\n\t\tthis._deprecatedOptionsCheck();\r\n\t\tthis._initializeValue();\r\n\t\t\r\n\t\tonRendered(this._onRendered.bind(this));\r\n\t}\r\n\t\r\n\t_deprecatedOptionsCheck(){\r\n\t\tif(this.params.listItemFormatter){\r\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The listItemFormatter editor param has been deprecated, please see the latest editor documentation for updated options\");\r\n\t\t}\r\n\t\t\r\n\t\tif(this.params.sortValuesList){\r\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The sortValuesList editor param has been deprecated, please see the latest editor documentation for updated options\");\r\n\t\t}\r\n\t\t\r\n\t\tif(this.params.searchFunc){\r\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The searchFunc editor param has been deprecated, please see the latest editor documentation for updated options\");\r\n\t\t}\r\n\t\t\r\n\t\tif(this.params.searchingPlaceholder){\r\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The searchingPlaceholder editor param has been deprecated, please see the latest editor documentation for updated options\");\r\n\t\t}\r\n\t}\r\n\t\r\n\t_initializeValue(){\r\n\t\tvar initialValue = this.cell.getValue();\r\n\t\t\r\n\t\tif(typeof initialValue === \"undefined\" && typeof this.params.defaultValue !== \"undefined\"){\r\n\t\t\tinitialValue = this.params.defaultValue;\r\n\t\t}\r\n\t\t\r\n\t\tthis.initialValues = this.params.multiselect ? initialValue : [initialValue];\r\n\t\t\r\n\t\tif(this.isFilter){\r\n\t\t\tthis.input.value = this.initialValues ? this.initialValues.join(\",\") : \"\";\r\n\t\t\tthis.headerFilterInitialListGen();            \r\n\t\t}\r\n\t}\r\n\t\r\n\t_onRendered(){\r\n\t\tvar cellEl = this.cell.getElement();\r\n\t\t\r\n\t\tfunction clickStop(e){\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\t\t\r\n\t\tthis.input.style.height = \"100%\";\r\n\t\tthis.input.focus({preventScroll: true});\r\n\t\t\r\n\t\t\r\n\t\tcellEl.addEventListener(\"click\", clickStop);\r\n\t\t\r\n\t\tsetTimeout(() => {\r\n\t\t\tcellEl.removeEventListener(\"click\", clickStop);\r\n\t\t}, 1000);\r\n\t\t\r\n\t\tthis.input.addEventListener(\"mousedown\", this._preventPopupBlur.bind(this));\r\n\t}\r\n\t\r\n\t_createListElement(){\r\n\t\tvar listEl = document.createElement(\"div\");\r\n\t\tlistEl.classList.add(\"tabulator-edit-list\");\r\n\t\t\r\n\t\tlistEl.addEventListener(\"mousedown\", this._preventBlur.bind(this));\r\n\t\tlistEl.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\r\n\t\t\r\n\t\treturn listEl;\r\n\t}\r\n\t\r\n\t_setListWidth(){\r\n\t\tvar element = this.isFilter ? this.input : this.cell.getElement();\r\n\t\t\r\n\t\tthis.listEl.style.minWidth = element.offsetWidth + \"px\";\r\n\t\t\r\n\t\tif(this.params.maxWidth){\r\n\t\t\tif(this.params.maxWidth === true){\r\n\t\t\t\tthis.listEl.style.maxWidth = element.offsetWidth + \"px\";\r\n\t\t\t}else if(typeof this.params.maxWidth === \"number\"){\r\n\t\t\t\tthis.listEl.style.maxWidth = this.params.maxWidth + \"px\";\r\n\t\t\t}else{\r\n\t\t\t\tthis.listEl.style.maxWidth = this.params.maxWidth;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t_createInputElement(){\r\n\t\tvar attribs = this.params.elementAttributes;\r\n\t\tvar input = document.createElement(\"input\");\r\n\t\t\r\n\t\tinput.setAttribute(\"type\", this.params.clearable ? \"search\" : \"text\");\r\n\t\t\r\n\t\tinput.style.padding = \"4px\";\r\n\t\tinput.style.width = \"100%\";\r\n\t\tinput.style.boxSizing = \"border-box\";\r\n\t\t\r\n\t\tif(!this.params.autocomplete){\r\n\t\t\tinput.style.cursor = \"default\";\r\n\t\t\tinput.style.caretColor = \"transparent\";\r\n\t\t\t// input.readOnly = (this.edit.currentCell != false);\r\n\t\t}\r\n\t\t\r\n\t\tif(attribs && typeof attribs == \"object\"){\r\n\t\t\tfor (let key in attribs){\r\n\t\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\t\tkey = key.slice(1);\r\n\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + attribs[\"+\" + key]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tinput.setAttribute(key, attribs[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(this.params.mask){\r\n\t\t\tmaskInput(input, this.params);\r\n\t\t}\r\n\t\t\r\n\t\tthis._bindInputEvents(input);\r\n\t\t\r\n\t\treturn input;\r\n\t}\r\n\t\r\n\t_initializeParams(params){\r\n\t\tvar valueKeys = [\"values\", \"valuesURL\", \"valuesLookup\"],\r\n\t\tvalueCheck;\r\n\t\t\r\n\t\tparams = Object.assign({}, params);\r\n\t\t\r\n\t\tparams.verticalNavigation = params.verticalNavigation || \"editor\";\r\n\t\tparams.placeholderLoading = typeof params.placeholderLoading === \"undefined\" ? \"Searching ...\" : params.placeholderLoading;\r\n\t\tparams.placeholderEmpty = typeof params.placeholderEmpty === \"undefined\" ? \"No Results Found\" : params.placeholderEmpty;\r\n\t\tparams.filterDelay = typeof params.filterDelay === \"undefined\" ? 300 : params.filterDelay;\r\n\t\t\r\n\t\tparams.emptyValue = Object.keys(params).includes(\"emptyValue\") ? params.emptyValue : \"\";\r\n\t\t\r\n\t\tvalueCheck = Object.keys(params).filter(key => valueKeys.includes(key)).length;\r\n\t\t\r\n\t\tif(!valueCheck){\r\n\t\t\tconsole.warn(\"list editor config error - either the values, valuesURL, or valuesLookup option must be set\");\r\n\t\t}else if(valueCheck > 1){\r\n\t\t\tconsole.warn(\"list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor\");\r\n\t\t}\r\n\t\t\r\n\t\tif(params.autocomplete){\r\n\t\t\tif(params.multiselect){\r\n\t\t\t\tparams.multiselect = false;\r\n\t\t\t\tconsole.warn(\"list editor config error - multiselect option is not available when autocomplete is enabled\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(params.freetext){\r\n\t\t\t\tparams.freetext = false;\r\n\t\t\t\tconsole.warn(\"list editor config error - freetext option is only available when autocomplete is enabled\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(params.filterFunc){\r\n\t\t\t\tparams.filterFunc = false;\r\n\t\t\t\tconsole.warn(\"list editor config error - filterFunc option is only available when autocomplete is enabled\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(params.filterRemote){\r\n\t\t\t\tparams.filterRemote = false;\r\n\t\t\t\tconsole.warn(\"list editor config error - filterRemote option is only available when autocomplete is enabled\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(params.mask){\r\n\t\t\t\tparams.mask = false;\r\n\t\t\t\tconsole.warn(\"list editor config error - mask option is only available when autocomplete is enabled\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(params.allowEmpty){\r\n\t\t\t\tparams.allowEmpty = false;\r\n\t\t\t\tconsole.warn(\"list editor config error - allowEmpty option is only available when autocomplete is enabled\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(params.listOnEmpty){\r\n\t\t\t\tparams.listOnEmpty = false;\r\n\t\t\t\tconsole.warn(\"list editor config error - listOnEmpty option is only available when autocomplete is enabled\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(params.filterRemote && !(typeof params.valuesLookup === \"function\" || params.valuesURL)){\r\n\t\t\tparams.filterRemote = false;\r\n\t\t\tconsole.warn(\"list editor config error - filterRemote option should only be used when values list is populated from a remote source\");\r\n\t\t}\r\n\t\treturn params;\r\n\t}\r\n\t//////////////////////////////////////\r\n\t////////// Event Handling ////////////\r\n\t//////////////////////////////////////\r\n\t\r\n\t_bindInputEvents(input){\r\n\t\tinput.addEventListener(\"focus\", this._inputFocus.bind(this));\r\n\t\tinput.addEventListener(\"click\", this._inputClick.bind(this));\r\n\t\tinput.addEventListener(\"blur\", this._inputBlur.bind(this));\r\n\t\tinput.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\r\n\t\tinput.addEventListener(\"search\", this._inputSearch.bind(this));\r\n\t\t\r\n\t\tif(this.params.autocomplete){\r\n\t\t\tinput.addEventListener(\"keyup\", this._inputKeyUp.bind(this));\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t_inputFocus(e){\r\n\t\tthis.rebuildOptionsList();\r\n\t}\r\n\t\r\n\t_filter(){\r\n\t\tif(this.params.filterRemote){\r\n\t\t\tclearTimeout(this.filterTimeout);\r\n\t\t\t\r\n\t\t\tthis.filterTimeout = setTimeout(() => {\r\n\t\t\t\tthis.rebuildOptionsList();\r\n\t\t\t}, this.params.filterDelay);\r\n\t\t}else{\r\n\t\t\tthis._filterList();\r\n\t\t}\r\n\t}\r\n\t\r\n\t_inputClick(e){\r\n\t\te.stopPropagation();\r\n\t}\r\n\t\r\n\t_inputBlur(e){\r\n\t\tif(this.blurable){\r\n\t\t\tif(this.popup){\r\n\t\t\t\tthis.popup.hide();\r\n\t\t\t}else{\r\n\t\t\t\tthis._resolveValue(true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t_inputSearch(){\r\n\t\tthis._clearChoices();\r\n\t}\r\n\t\r\n\t_inputKeyDown(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\t\r\n\t\t\tcase 38: //up arrow\r\n\t\t\t\tthis._keyUp(e);\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 40: //down arrow\r\n\t\t\t\tthis._keyDown(e);\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 37: //left arrow\r\n\t\t\tcase 39: //right arrow\r\n\t\t\t\tthis._keySide(e);\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 13: //enter\r\n\t\t\t\tthis._keyEnter();\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 27: //escape\r\n\t\t\t\tthis._keyEsc();\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 36: //home\r\n\t\t\tcase 35: //end\r\n\t\t\t\tthis._keyHomeEnd(e);\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 9: //tab\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tdefault:\r\n\t\t\t\tthis._keySelectLetter(e);\r\n\t\t}\r\n\t}\r\n\t\r\n\t_inputKeyUp(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 38: //up arrow\r\n\t\t\tcase 37: //left arrow\r\n\t\t\tcase 39: //up arrow\r\n\t\t\tcase 40: //right arrow\r\n\t\t\tcase 13: //enter\r\n\t\t\tcase 27: //escape\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tdefault:\r\n\t\t\t\tthis._keyAutoCompLetter(e);\r\n\t\t}\r\n\t}\r\n\t\r\n\t_preventPopupBlur(){\r\n\t\tif(this.popup){\r\n\t\t\tthis.popup.blockHide();\r\n\t\t}\r\n\t\t\r\n\t\tsetTimeout(() =>{\r\n\t\t\tif(this.popup){\r\n\t\t\t\tthis.popup.restoreHide();\r\n\t\t\t}\r\n\t\t}, 10);\r\n\t}\r\n\t\r\n\t_preventBlur(){\r\n\t\tthis.blurable = false;\r\n\t\t\r\n\t\tsetTimeout(() =>{\r\n\t\t\tthis.blurable = true;\r\n\t\t}, 10);\r\n\t}\r\n\t\r\n\t//////////////////////////////////////\r\n\t//////// Keyboard Navigation /////////\r\n\t//////////////////////////////////////\r\n\t\r\n\t_keyUp(e){\r\n\t\tvar index = this.displayItems.indexOf(this.focusedItem);\r\n\t\t\r\n\t\tif(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index)){\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\t\r\n\t\t\tif(index > 0){\r\n\t\t\t\tthis._focusItem(this.displayItems[index - 1]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t_keyDown(e){\r\n\t\tvar index = this.displayItems.indexOf(this.focusedItem);\r\n\t\t\r\n\t\tif(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index < this.displayItems.length - 1)){\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\t\r\n\t\t\tif(index < this.displayItems.length - 1){\r\n\t\t\t\tif(index == -1){\r\n\t\t\t\t\tthis._focusItem(this.displayItems[0]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._focusItem(this.displayItems[index + 1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t_keySide(e){\r\n\t\te.stopImmediatePropagation();\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\t}\r\n\t\r\n\t_keyEnter(e){\r\n\t\tif(this.params.autocomplete && this.lastAction === \"typing\"){\r\n\t\t\tthis._resolveValue(true);\r\n\t\t}else{\r\n\t\t\tif(this.focusedItem){\r\n\t\t\t\tthis._chooseItem(this.focusedItem);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t_keyEsc(e){\r\n\t\tthis._cancel();\r\n\t}\r\n\t\r\n\t_keyHomeEnd(e){\r\n\t\tif(this.params.autocomplete){\r\n\t\t\t//prevent table navigation while using input element\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t}\r\n\t}\r\n\t\r\n\t_keySelectLetter(e){\r\n\t\tif(!this.params.autocomplete){\r\n\t\t\t// if(this.edit.currentCell === false){\r\n\t\t\te.preventDefault();\r\n\t\t\t// }\r\n\t\t\t\r\n\t\t\tif(e.keyCode >= 38 && e.keyCode <= 90){\r\n\t\t\t\tthis._scrollToValue(e.keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t_keyAutoCompLetter(e){\r\n\t\tthis._filter();\r\n\t\tthis.lastAction = \"typing\";\r\n\t\tthis.typing = true;\r\n\t}\r\n\t\r\n\t\r\n\t_scrollToValue(char){\r\n\t\tclearTimeout(this.filterTimeout);\r\n\t\t\r\n\t\tvar character = String.fromCharCode(char).toLowerCase();\r\n\t\tthis.filterTerm += character.toLowerCase();\r\n\t\t\r\n\t\tvar match = this.displayItems.find((item) => {\r\n\t\t\treturn typeof item.label !== \"undefined\" && item.label.toLowerCase().startsWith(this.filterTerm);\r\n\t\t});\r\n\t\t\r\n\t\tif(match){\r\n\t\t\tthis._focusItem(match);\r\n\t\t}\r\n\t\t\r\n\t\tthis.filterTimeout = setTimeout(() => {\r\n\t\t\tthis.filterTerm = \"\";\r\n\t\t}, 800);\r\n\t}\r\n\t\r\n\t_focusItem(item){\r\n\t\tthis.lastAction = \"focus\";\r\n\t\t\r\n\t\tif(this.focusedItem && this.focusedItem.element){\r\n\t\t\tthis.focusedItem.element.classList.remove(\"focused\");\r\n\t\t}\r\n\t\t\r\n\t\tthis.focusedItem = item;\r\n\t\t\r\n\t\tif(item && item.element){\r\n\t\t\titem.element.classList.add(\"focused\");\r\n\t\t\titem.element.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t//////////////////////////////////////\r\n\t/////// Data List Generation /////////\r\n\t//////////////////////////////////////\r\n\theaderFilterInitialListGen(){\r\n\t\tthis._generateOptions(true);\r\n\t}\r\n\t\r\n\trebuildOptionsList(){\r\n\t\tthis._generateOptions()\r\n\t\t\t.then(this._sortOptions.bind(this))\r\n\t\t\t.then(this._buildList.bind(this))\r\n\t\t\t.then(this._showList.bind(this))\r\n\t\t\t.catch((e) => {\r\n\t\t\t\tif(!Number.isInteger(e)){\r\n\t\t\t\t\tconsole.error(\"List generation error\", e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\t\r\n\t_filterList(){\r\n\t\tthis._buildList(this._filterOptions());\r\n\t\tthis._showList();\r\n\t}\r\n\t\r\n\t_generateOptions(silent){\r\n\t\tvar values = [];\r\n\t\tvar iteration = ++ this.listIteration;\r\n\t\t\r\n\t\tthis.filtered = false;\r\n\t\t\r\n\t\tif(this.params.values){\r\n\t\t\tvalues = this.params.values;\r\n\t\t}else if (this.params.valuesURL){\r\n\t\t\tvalues = this._ajaxRequest(this.params.valuesURL, this.input.value);\r\n\t\t}else{\r\n\t\t\tif(typeof this.params.valuesLookup === \"function\"){\r\n\t\t\t\tvalues = this.params.valuesLookup(this.cell, this.input.value);\r\n\t\t\t}else if(this.params.valuesLookup){\r\n\t\t\t\tvalues = this._uniqueColumnValues(this.params.valuesLookupField);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(values instanceof Promise){\r\n\t\t\tif(!silent){\r\n\t\t\t\tthis._addPlaceholder(this.params.placeholderLoading);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn values.then()\r\n\t\t\t\t.then((responseValues) => {\r\n\t\t\t\t\tif(this.listIteration === iteration){\r\n\t\t\t\t\t\treturn this._parseList(responseValues);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn Promise.reject(iteration);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}else{\r\n\t\t\treturn Promise.resolve(this._parseList(values));\r\n\t\t}\r\n\t}\r\n\t\r\n\t_addPlaceholder(contents){\r\n\t\tvar placeholder = document.createElement(\"div\");\r\n\t\t\r\n\t\tif(typeof contents === \"function\"){\r\n\t\t\tcontents = contents(this.cell.getComponent(), this.listEl);\r\n\t\t}\r\n\t\t\r\n\t\tif(contents){\r\n\t\t\tthis._clearList();\r\n\t\t\t\r\n\t\t\tif(contents instanceof HTMLElement){\r\n\t\t\t\tplaceholder = contents;\r\n\t\t\t}else{\r\n\t\t\t\tplaceholder.classList.add(\"tabulator-edit-list-placeholder\");\r\n\t\t\t\tplaceholder.innerHTML = contents;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.listEl.appendChild(placeholder);\r\n\t\t\t\r\n\t\t\tthis._showList();\r\n\t\t}\r\n\t}\r\n\t\r\n\t_ajaxRequest(url, term){\r\n\t\tvar params = this.params.filterRemote ? {term:term} : {};\r\n\t\turl = urlBuilder(url, {}, params);\r\n\t\t\r\n\t\treturn fetch(url)\r\n\t\t\t.then((response)=>{\r\n\t\t\t\tif(response.ok) {\r\n\t\t\t\t\treturn response.json()\r\n\t\t\t\t\t\t.catch((error)=>{\r\n\t\t\t\t\t\t\tconsole.warn(\"List Ajax Load Error - Invalid JSON returned\", error);\r\n\t\t\t\t\t\t\treturn Promise.reject(error);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.error(\"List Ajax Load Error - Connection Error: \" + response.status, response.statusText);\r\n\t\t\t\t\treturn Promise.reject(response);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error)=>{\r\n\t\t\t\tconsole.error(\"List Ajax Load Error - Connection Error: \", error);\r\n\t\t\t\treturn Promise.reject(error);\r\n\t\t\t});\r\n\t}\r\n\t\r\n\t_uniqueColumnValues(field){\r\n\t\tvar output = {},\r\n\t\tdata = this.table.getData(this.params.valuesLookup),\r\n\t\tcolumn;\r\n\t\t\r\n\t\tif(field){\r\n\t\t\tcolumn = this.table.columnManager.getColumnByField(field);\r\n\t\t}else{\r\n\t\t\tcolumn = this.cell.getColumn()._getSelf();\r\n\t\t}\r\n\t\t\r\n\t\tif(column){\r\n\t\t\tdata.forEach((row) => {\r\n\t\t\t\tvar val = column.getFieldValue(row);\r\n\t\t\t\t\r\n\t\t\t\tif(val !== null && typeof val !== \"undefined\" && val !== \"\"){\r\n\t\t\t\t\toutput[val] = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"unable to find matching column to create select lookup list:\", field);\r\n\t\t\toutput = [];\r\n\t\t}\r\n\t\t\r\n\t\treturn Object.keys(output);\r\n\t}\r\n\t\r\n\t\r\n\t_parseList(inputValues){\r\n\t\tvar data = [];\r\n\t\t\r\n\t\tif(!Array.isArray(inputValues)){\r\n\t\t\tinputValues = Object.entries(inputValues).map(([key, value]) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlabel:value,\r\n\t\t\t\t\tvalue:key,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tinputValues.forEach((value) => {\r\n\t\t\tif(typeof value !== \"object\"){\r\n\t\t\t\tvalue = {\r\n\t\t\t\t\tlabel:value,\r\n\t\t\t\t\tvalue:value,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._parseListItem(value, data, 0);\r\n\t\t});\r\n\t\t\r\n\t\tif(!this.currentItems.length && this.params.freetext){\r\n\t\t\tthis.input.value = this.initialValues;\r\n\t\t\tthis.typing = true;\r\n\t\t\tthis.lastAction = \"typing\";\r\n\t\t}\r\n\t\t\r\n\t\tthis.data = data;\r\n\t\t\r\n\t\treturn data;    \r\n\t}\r\n\t\r\n\t_parseListItem(option, data, level){\r\n\t\tvar item = {};\r\n\t\t\r\n\t\tif(option.options){\r\n\t\t\titem = this._parseListGroup(option, level + 1);\r\n\t\t}else{\r\n\t\t\titem = {\r\n\t\t\t\tlabel:option.label,\r\n\t\t\t\tvalue:option.value,\r\n\t\t\t\titemParams:option.itemParams,\r\n\t\t\t\telementAttributes: option.elementAttributes,\r\n\t\t\t\telement:false,\r\n\t\t\t\tselected:false,\r\n\t\t\t\tvisible:true,\r\n\t\t\t\tlevel:level,\r\n\t\t\t\toriginal:option,\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tif(this.initialValues && this.initialValues.indexOf(option.value) > -1){\r\n\t\t\t\tthis._chooseItem(item, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tdata.push(item);\r\n\t}\r\n\t\r\n\t_parseListGroup(option, level){\r\n\t\tvar item = {\r\n\t\t\tlabel:option.label,\r\n\t\t\tgroup:true,\r\n\t\t\titemParams:option.itemParams,\r\n\t\t\telementAttributes:option.elementAttributes,\r\n\t\t\telement:false,\r\n\t\t\tvisible:true,\r\n\t\t\tlevel:level,\r\n\t\t\toptions:[],\r\n\t\t\toriginal:option,\r\n\t\t};\r\n\t\t\r\n\t\toption.options.forEach((child) => {\r\n\t\t\tthis._parseListItem(child, item.options, level);\r\n\t\t});\r\n\t\t\r\n\t\treturn item;\r\n\t}\r\n\t\r\n\t_sortOptions(options){\r\n\t\tvar sorter;\r\n\t\t\r\n\t\tif(this.params.sort){\r\n\t\t\tsorter = typeof this.params.sort === \"function\" ? this.params.sort : this._defaultSortFunction.bind(this);\r\n\t\t\t\r\n\t\t\tthis._sortGroup(sorter, options);\r\n\t\t}\r\n\t\t\r\n\t\treturn options;\r\n\t}\r\n\t\r\n\t_sortGroup(sorter, options){\r\n\t\toptions.sort((a,b) => {\r\n\t\t\treturn sorter(a.label, b.label, a.value, b.value, a.original, b.original);\r\n\t\t});\r\n\t\t\r\n\t\toptions.forEach((option) => {\r\n\t\t\tif(option.group){\r\n\t\t\t\tthis._sortGroup(sorter, option.options);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t_defaultSortFunction(as, bs){\r\n\t\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\r\n\t\tvar emptyAlign = 0;\r\n\t\t\r\n\t\tif(this.params.sort === \"desc\"){\r\n\t\t\t[as, bs] = [bs, as];\r\n\t\t}\r\n\t\t\r\n\t\t//handle empty values\r\n\t\tif(!as && as!== 0){\r\n\t\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\r\n\t\t}else if(!bs && bs!== 0){\r\n\t\t\temptyAlign =  1;\r\n\t\t}else{\r\n\t\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\r\n\t\t\ta = String(as).toLowerCase();\r\n\t\t\tb = String(bs).toLowerCase();\r\n\t\t\tif(a === b) return 0;\r\n\t\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\r\n\t\t\ta = a.match(rx);\r\n\t\t\tb = b.match(rx);\r\n\t\t\tL = a.length > b.length ? b.length : a.length;\r\n\t\t\twhile(i < L){\r\n\t\t\t\ta1= a[i];\r\n\t\t\t\tb1= b[i++];\r\n\t\t\t\tif(a1 !== b1){\r\n\t\t\t\t\tif(isFinite(a1) && isFinite(b1)){\r\n\t\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\r\n\t\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\r\n\t\t\t\t\t\treturn a1 - b1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse return a1 > b1 ? 1 : -1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn a.length > b.length;\r\n\t\t}\r\n\t\t\r\n\t\treturn emptyAlign;\r\n\t}\r\n\t\r\n\t_filterOptions(){\r\n\t\tvar filterFunc = this.params.filterFunc || this._defaultFilterFunc,\r\n\t\tterm = this.input.value;\r\n\t\t\r\n\t\tif(term){\r\n\t\t\tthis.filtered = true;\r\n\t\t\t\r\n\t\t\tthis.data.forEach((item) => {\r\n\t\t\t\tthis._filterItem(filterFunc, term, item);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis.filtered = false;\r\n\t\t}\r\n\t\t\r\n\t\treturn this.data;\r\n\t}\r\n\t\r\n\t_filterItem(func, term, item){\r\n\t\tvar matches = false;\r\n\t\t\r\n\t\tif(!item.group){\r\n\t\t\titem.visible = func(term, item.label, item.value, item.original);\r\n\t\t}else{\r\n\t\t\titem.options.forEach((option) => {\r\n\t\t\t\tif(this._filterItem(func, term, option)){\r\n\t\t\t\t\tmatches = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\titem.visible = matches;\r\n\t\t}\r\n\t\t\r\n\t\treturn item.visible;\r\n\t}\r\n\t\r\n\t_defaultFilterFunc(term, label, value, item){\r\n\t\tterm = String(term).toLowerCase();\r\n\t\t\r\n\t\tif(label !== null && typeof label !== \"undefined\"){\r\n\t\t\tif(String(label).toLowerCase().indexOf(term) > -1 || String(value).toLowerCase().indexOf(term) > -1){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t//////////////////////////////////////\r\n\t/////////// Display List /////////////\r\n\t//////////////////////////////////////\r\n\t\r\n\t_clearList(){\r\n\t\twhile(this.listEl.firstChild) this.listEl.removeChild(this.listEl.firstChild);\r\n\t\t\r\n\t\tthis.displayItems = [];\r\n\t}\r\n\t\r\n\t_buildList(data){\r\n\t\tthis._clearList();\r\n\t\t\r\n\t\tdata.forEach((option) => {\r\n\t\t\tthis._buildItem(option);\r\n\t\t});\r\n\t\t\r\n\t\tif(!this.displayItems.length){\r\n\t\t\tthis._addPlaceholder(this.params.placeholderEmpty);\r\n\t\t}  \r\n\t}\r\n\t\r\n\t_buildItem(item){\r\n\t\tvar el = item.element,\r\n\t\tcontents;\r\n\t\t\r\n\t\tif(!this.filtered || item.visible){\r\n\t\t\t\r\n\t\t\tif(!el){\r\n\t\t\t\tel = document.createElement(\"div\");\r\n\t\t\t\tel.tabIndex = 0;\r\n\t\t\t\t\r\n\t\t\t\tcontents = this.params.itemFormatter ? this.params.itemFormatter(item.label, item.value, item.original, el) : item.label;\r\n\t\t\t\t\r\n\t\t\t\tif(contents instanceof HTMLElement){\r\n\t\t\t\t\tel.appendChild(contents);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tel.innerHTML = contents;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(item.group){\r\n\t\t\t\t\tel.classList.add(\"tabulator-edit-list-group\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tel.classList.add(\"tabulator-edit-list-item\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tel.classList.add(\"tabulator-edit-list-group-level-\" + item.level);\r\n\t\t\t\t\r\n\t\t\t\tif(item.elementAttributes && typeof item.elementAttributes == \"object\"){\r\n\t\t\t\t\tfor (let key in item.elementAttributes){\r\n\t\t\t\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\t\t\t\tkey = key.slice(1);\r\n\t\t\t\t\t\t\tel.setAttribute(key, this.input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tel.setAttribute(key, item.elementAttributes[key]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(item.group){\r\n\t\t\t\t\tel.addEventListener(\"click\", this._groupClick.bind(this, item));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tel.addEventListener(\"click\", this._itemClick.bind(this, item));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tel.addEventListener(\"mousedown\", this._preventBlur.bind(this));\r\n\t\t\t\t\r\n\t\t\t\titem.element = el;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._styleItem(item);\r\n\t\t\t\r\n\t\t\tthis.listEl.appendChild(el);\r\n\t\t\t\r\n\t\t\tif(item.group){\r\n\t\t\t\titem.options.forEach((option) => {\r\n\t\t\t\t\tthis._buildItem(option);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tthis.displayItems.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t_showList(){\r\n\t\tvar startVis = this.popup && this.popup.isVisible();\r\n\t\t\r\n\t\tif(this.input.parentNode){\r\n\t\t\tif(this.params.autocomplete && this.input.value === \"\" && !this.params.listOnEmpty){\r\n\t\t\t\tif(this.popup){\r\n\t\t\t\t\tthis.popup.hide(true);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._setListWidth();\r\n\t\t\t\r\n\t\t\tif(!this.popup){\r\n\t\t\t\tthis.popup = this.edit.popup(this.listEl);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.popup.show(this.cell.getElement(), \"bottom\");\r\n\t\t\t\r\n\t\t\tif(!startVis){\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.popup.hideOnBlur(this._resolveValue.bind(this, true));\r\n\t\t\t\t}, 10);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t_styleItem(item){\r\n\t\tif(item && item.element){\r\n\t\t\tif(item.selected){\r\n\t\t\t\titem.element.classList.add(\"active\");\r\n\t\t\t}else{\r\n\t\t\t\titem.element.classList.remove(\"active\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t//////////////////////////////////////\r\n\t///////// User Interaction ///////////\r\n\t//////////////////////////////////////\r\n\t\r\n\t_itemClick(item, e){\r\n\t\te.stopPropagation();\r\n\t\t\r\n\t\tthis._chooseItem(item);\r\n\t}\r\n\t\r\n\t_groupClick(item, e){\r\n\t\te.stopPropagation();\r\n\t}\r\n\t\r\n\t\r\n\t//////////////////////////////////////\r\n\t////// Current Item Management ///////\r\n\t//////////////////////////////////////\r\n\t\r\n\t_cancel(){\r\n\t\tthis.popup.hide(true);\r\n\t\tthis.actions.cancel();\r\n\t}\r\n\t\r\n\t_clearChoices(){\r\n\t\tthis.typing = true;\r\n\t\t\r\n\t\tthis.currentItems.forEach((item) => {\r\n\t\t\titem.selected = false;\r\n\t\t\tthis._styleItem(item);\r\n\t\t});\r\n\t\t\r\n\t\tthis.currentItems = [];\r\n\t\t\r\n\t\tthis.focusedItem = null;\r\n\t}\r\n\t\r\n\t_chooseItem(item, silent){\r\n\t\tvar index;\r\n\t\t\r\n\t\tthis.typing = false;\r\n\t\t\r\n\t\tif(this.params.multiselect){\r\n\t\t\tindex = this.currentItems.indexOf(item);\r\n\t\t\t\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.currentItems.splice(index, 1);\r\n\t\t\t\titem.selected = false;\r\n\t\t\t}else{\r\n\t\t\t\tthis.currentItems.push(item);\r\n\t\t\t\titem.selected = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.input.value = this.currentItems.map(item => item.label).join(\",\");\r\n\t\t\t\r\n\t\t\tthis._styleItem(item);\r\n\t\t\t\r\n\t\t}else{\r\n\t\t\tthis.currentItems = [item];\r\n\t\t\titem.selected = true;\r\n\t\t\t\r\n\t\t\tthis.input.value = item.label;\r\n\t\t\t\r\n\t\t\tthis._styleItem(item);\r\n\t\t\t\r\n\t\t\tif(!silent){\r\n\t\t\t\tthis._resolveValue();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis._focusItem(item);\r\n\t}\r\n\t\r\n\t_resolveValue(blur){\r\n\t\tvar output, initialValue;\r\n\r\n\t\tif(this.popup){\r\n\t\t\tthis.popup.hide(true);\r\n\t\t}\r\n\t\t\r\n\t\tif(this.params.multiselect){\r\n\t\t\toutput = this.currentItems.map(item => item.value);\r\n\t\t}else{\r\n\t\t\tif(blur && this.params.autocomplete && this.typing){\r\n\t\t\t\tif(this.params.freetext || (this.params.allowEmpty && this.input.value === \"\")){\r\n\t\t\t\t\toutput = this.input.value;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.actions.cancel();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(this.currentItems[0]){\r\n\t\t\t\t\toutput = this.currentItems[0].value;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tinitialValue = this.initialValues[0];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(initialValue === null || typeof initialValue === \"undefined\" || initialValue === \"\"){\r\n\t\t\t\t\t\toutput = initialValue;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\toutput = this.params.emptyValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(output === \"\"){\r\n\t\t\toutput = this.params.emptyValue;\r\n\t\t}\r\n\t\t\r\n\t\tthis.actions.success(output);\r\n\t\t\r\n\t\tif(this.isFilter){\r\n\t\t\tthis.initialValues = output && !Array.isArray(output) ? [output] : output;\r\n\t\t\tthis.currentItems = [];\r\n\t\t}\r\n\t}\r\n\t\r\n}\r\n","import List from '../../List.js';\r\n\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\r\n\tthis.deprecationMsg(\"The select editor has been deprecated, please use the new list editor\");\r\n\r\n\tvar list = new List(this, cell, onRendered, success, cancel, editorParams);\r\n\r\n\treturn list.input;\r\n}","import List from '../../List.js';\r\n\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar list = new List(this, cell, onRendered, success, cancel, editorParams);\r\n\r\n\treturn list.input;\r\n}","import List from '../../List.js';\r\n\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\r\n\tthis.deprecationMsg(\"The autocomplete editor has been deprecated, please use the new list editor with the 'autocomplete' editorParam\");\r\n\r\n\teditorParams.autocomplete = true;\r\n\r\n\tvar list = new List(this, cell, onRendered, success, cancel, editorParams);\r\n\r\n\treturn list.input;\r\n}","//star rating\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar self = this,\r\n\telement = cell.getElement(),\r\n\tvalue = cell.getValue(),\r\n\tmaxStars = element.getElementsByTagName(\"svg\").length || 5,\r\n\tsize = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\r\n\tstars = [],\r\n\tstarsHolder = document.createElement(\"div\"),\r\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\r\n\r\n\r\n\t//change star type\r\n\tfunction starChange(val){\r\n\t\tstars.forEach(function(star, i){\r\n\t\t\tif(i < val){\r\n\t\t\t\tif(self.table.browser == \"ie\"){\r\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-active\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\r\n\t\t\t}else{\r\n\t\t\t\tif(self.table.browser == \"ie\"){\r\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-inactive\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//build stars\r\n\tfunction buildStar(i){\r\n\r\n\t\tvar starHolder =  document.createElement(\"span\");\r\n\t\tvar nextStar = star.cloneNode(true);\r\n\r\n\t\tstars.push(nextStar);\r\n\r\n\t\tstarHolder.addEventListener(\"mouseenter\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\tstarChange(i);\r\n\t\t});\r\n\r\n\t\tstarHolder.addEventListener(\"mousemove\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t});\r\n\r\n\t\tstarHolder.addEventListener(\"click\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\tsuccess(i);\r\n\t\t\telement.blur();\r\n\t\t});\r\n\r\n\t\tstarHolder.appendChild(nextStar);\r\n\t\tstarsHolder.appendChild(starHolder);\r\n\r\n\t}\r\n\r\n\t//handle keyboard navigation value change\r\n\tfunction changeValue(val){\r\n\t\tvalue = val;\r\n\t\tstarChange(val);\r\n\t}\r\n\r\n\t//style cell\r\n\telement.style.whiteSpace = \"nowrap\";\r\n\telement.style.overflow = \"hidden\";\r\n\telement.style.textOverflow = \"ellipsis\";\r\n\r\n\t//style holding element\r\n\tstarsHolder.style.verticalAlign = \"middle\";\r\n\tstarsHolder.style.display = \"inline-block\";\r\n\tstarsHolder.style.padding = \"4px\";\r\n\r\n\t//style star\r\n\tstar.setAttribute(\"width\", size);\r\n\tstar.setAttribute(\"height\", size);\r\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\r\n\tstar.setAttribute(\"xml:space\", \"preserve\");\r\n\tstar.style.padding = \"0 1px\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tstarsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tstarsHolder.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//create correct number of stars\r\n\tfor(var i=1;i<= maxStars;i++){\r\n\t\tbuildStar(i);\r\n\t}\r\n\r\n\t//ensure value does not exceed number of stars\r\n\tvalue = Math.min(parseInt(value), maxStars);\r\n\r\n\t// set initial styling of stars\r\n\tstarChange(value);\r\n\r\n\tstarsHolder.addEventListener(\"mousemove\", function(e){\r\n\t\tstarChange(0);\r\n\t});\r\n\r\n\tstarsHolder.addEventListener(\"click\", function(e){\r\n\t\tsuccess(0);\r\n\t});\r\n\r\n\telement.addEventListener(\"blur\", function(e){\r\n\t\tcancel();\r\n\t});\r\n\r\n\t//allow key based navigation\r\n\telement.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 39: //right arrow\r\n\t\t\t\tchangeValue(value + 1);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 37: //left arrow\r\n\t\t\t\tchangeValue(value - 1);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 13: //enter\r\n\t\t\t\tsuccess(value);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 27: //escape\r\n\t\t\t\tcancel();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\treturn starsHolder;\r\n}","//draggable progress bar\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar element = cell.getElement(),\r\n\tmax = typeof editorParams.max === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"max\")) || 100) : editorParams.max,\r\n\tmin = typeof editorParams.min === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"min\")) || 0) : editorParams.min,\r\n\tpercent = (max - min) / 100,\r\n\tvalue = cell.getValue() || 0,\r\n\thandle = document.createElement(\"div\"),\r\n\tbar = document.createElement(\"div\"),\r\n\tmouseDrag, mouseDragWidth;\r\n\r\n\t//set new value\r\n\tfunction updateValue(){\r\n\t\tvar style = window.getComputedStyle(element, null);\r\n\r\n\t\tvar calcVal = (percent * Math.round(bar.offsetWidth / ((element.clientWidth - parseInt(style.getPropertyValue(\"padding-left\")) - parseInt(style.getPropertyValue(\"padding-right\")))/100))) + min;\r\n\t\tsuccess(calcVal);\r\n\t\telement.setAttribute(\"aria-valuenow\", calcVal);\r\n\t\telement.setAttribute(\"aria-label\", value);\r\n\t}\r\n\r\n\t//style handle\r\n\thandle.style.position = \"absolute\";\r\n\thandle.style.right = \"0\";\r\n\thandle.style.top = \"0\";\r\n\thandle.style.bottom = \"0\";\r\n\thandle.style.width = \"5px\";\r\n\thandle.classList.add(\"tabulator-progress-handle\");\r\n\r\n\t//style bar\r\n\tbar.style.display = \"inline-block\";\r\n\tbar.style.position = \"relative\";\r\n\t// bar.style.top = \"8px\";\r\n\t// bar.style.bottom = \"8px\";\r\n\t// bar.style.left = \"4px\";\r\n\t// bar.style.marginRight = \"4px\";\r\n\tbar.style.height = \"100%\";\r\n\tbar.style.backgroundColor = \"#488CE9\";\r\n\tbar.style.maxWidth = \"100%\";\r\n\tbar.style.minWidth = \"0%\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tbar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tbar.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//style cell\r\n\telement.style.padding = \"4px 4px\";\r\n\r\n\t//make sure value is in range\r\n\tvalue = Math.min(parseFloat(value), max);\r\n\tvalue = Math.max(parseFloat(value), min);\r\n\r\n\t//workout percentage\r\n\tvalue = Math.round((value - min) / percent);\r\n\t// bar.style.right = value + \"%\";\r\n\tbar.style.width = value + \"%\";\r\n\r\n\telement.setAttribute(\"aria-valuemin\", min);\r\n\telement.setAttribute(\"aria-valuemax\", max);\r\n\r\n\tbar.appendChild(handle);\r\n\r\n\thandle.addEventListener(\"mousedown\", function(e){\r\n\t\tmouseDrag = e.screenX;\r\n\t\tmouseDragWidth = bar.offsetWidth;\r\n\t});\r\n\r\n\thandle.addEventListener(\"mouseover\", function(){\r\n\t\thandle.style.cursor = \"ew-resize\";\r\n\t});\r\n\r\n\telement.addEventListener(\"mousemove\", function(e){\r\n\t\tif(mouseDrag){\r\n\t\t\tbar.style.width = (mouseDragWidth + e.screenX - mouseDrag) + \"px\";\r\n\t\t}\r\n\t});\r\n\r\n\telement.addEventListener(\"mouseup\", function(e){\r\n\t\tif(mouseDrag){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\r\n\t\t\tmouseDrag = false;\r\n\t\t\tmouseDragWidth = false;\r\n\r\n\t\t\tupdateValue();\r\n\t\t}\r\n\t});\r\n\r\n\t//allow key based navigation\r\n\telement.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 39: //right arrow\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tbar.style.width = (bar.clientWidth + element.clientWidth/100) + \"px\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 37: //left arrow\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tbar.style.width = (bar.clientWidth - element.clientWidth/100) + \"px\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 9: //tab\r\n\t\t\tcase 13: //enter\r\n\t\t\t\tupdateValue();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 27: //escape\r\n\t\t\t\tcancel();\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\t});\r\n\r\n\telement.addEventListener(\"blur\", function(){\r\n\t\tcancel();\r\n\t});\r\n\r\n\treturn bar;\r\n}","//checkbox\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar value = cell.getValue(),\r\n\tinput = document.createElement(\"input\"),\r\n\ttristate = editorParams.tristate,\r\n\tindetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\r\n\tindetermState = false,\r\n\ttrueValueSet = Object.keys(editorParams).includes(\"trueValue\"),\r\n\tfalseValueSet = Object.keys(editorParams).includes(\"falseValue\");\r\n\r\n\tinput.setAttribute(\"type\", \"checkbox\");\r\n\tinput.style.marginTop = \"5px\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = value;\r\n\r\n\tif(tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")){\r\n\t\tindetermState = true;\r\n\t\tinput.indeterminate = true;\r\n\t}\r\n\r\n\tif(this.table.browser != \"firefox\"){ //prevent blur issue on mac firefox\r\n\t\tonRendered(function(){\r\n\t\t\tinput.focus({preventScroll: true});\r\n\t\t});\r\n\t}\r\n\r\n\tinput.checked = trueValueSet ? value === editorParams.trueValue : (value === true || value === \"true\" || value === \"True\" || value === 1);\r\n\r\n\tonRendered(function(){\r\n\t\tinput.focus();\r\n\t});\r\n\r\n\tfunction setValue(blur){\r\n\t\tvar checkedValue = input.checked;\r\n\r\n\t\tif(trueValueSet && checkedValue){\r\n\t\t\tcheckedValue = editorParams.trueValue;\r\n\t\t}else if(falseValueSet && !checkedValue){\r\n\t\t\tcheckedValue = editorParams.falseValue;\r\n\t\t}\r\n\r\n\t\tif(tristate){\r\n\t\t\tif(!blur){\r\n\t\t\t\tif(input.checked && !indetermState){\r\n\t\t\t\t\tinput.checked = false;\r\n\t\t\t\t\tinput.indeterminate = true;\r\n\t\t\t\t\tindetermState = true;\r\n\t\t\t\t\treturn indetermValue;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tindetermState = false;\r\n\t\t\t\t\treturn checkedValue;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(indetermState){\r\n\t\t\t\t\treturn indetermValue;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn checkedValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn checkedValue;\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on blur\r\n\tinput.addEventListener(\"change\", function(e){\r\n\t\tsuccess(setValue());\r\n\t});\r\n\r\n\tinput.addEventListener(\"blur\", function(e){\r\n\t\tsuccess(setValue(true));\r\n\t});\r\n\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tif(e.keyCode == 13){\r\n\t\t\tsuccess(setValue());\r\n\t\t}\r\n\t\tif(e.keyCode == 27){\r\n\t\t\tcancel();\r\n\t\t}\r\n\t});\r\n\r\n\treturn input;\r\n}","import input from './editors/input.js';\r\nimport textarea from './editors/textarea.js';\r\nimport number from './editors/number.js';\r\nimport range from './editors/range.js';\r\nimport date from './editors/date.js';\r\nimport time from './editors/time.js';\r\nimport datetime from './editors/datetime.js';\r\nimport select from './editors/select.js';\r\nimport list from './editors/list.js';\r\nimport autocomplete from './editors/autocomplete.js';\r\nimport star from './editors/star.js';\r\nimport progress from './editors/progress.js';\r\nimport tickCross from './editors/tickCross.js';\r\n\r\nexport default {\r\n\tinput:input,\r\n\ttextarea:textarea,\r\n\tnumber:number,\r\n\trange:range,\r\n\tdate:date,\r\n\ttime:time,\r\n\tdatetime:datetime,\r\n\tselect:select,\r\n\tlist:list,\r\n\tautocomplete:autocomplete,\r\n\tstar:star,\r\n\tprogress:progress,\r\n\ttickCross:tickCross,\r\n};","import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/tools/Helpers.js';\r\n\r\nimport defaultEditors from './defaults/editors.js';\r\n\r\nclass Edit extends Module{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.currentCell = false; //hold currently editing cell\r\n\t\tthis.mouseClick = false; //hold mousedown state to prevent click binding being overridden by editor opening\r\n\t\tthis.recursionBlock = false; //prevent focus recursion\r\n\t\tthis.invalidEdit = false;\r\n\t\tthis.editedCells = [];\r\n\t\t\r\n\t\tthis.editors = Edit.editors;\r\n\t\t\r\n\t\tthis.registerColumnOption(\"editable\");\r\n\t\tthis.registerColumnOption(\"editor\");\r\n\t\tthis.registerColumnOption(\"editorParams\");\r\n\t\t\r\n\t\tthis.registerColumnOption(\"cellEditing\");\r\n\t\tthis.registerColumnOption(\"cellEdited\");\r\n\t\tthis.registerColumnOption(\"cellEditCancelled\");\r\n\t\t\r\n\t\tthis.registerTableFunction(\"getEditedCells\", this.getEditedCells.bind(this));\r\n\t\tthis.registerTableFunction(\"clearCellEdited\", this.clearCellEdited.bind(this));\r\n\t\tthis.registerTableFunction(\"navigatePrev\", this.navigatePrev.bind(this));\r\n\t\tthis.registerTableFunction(\"navigateNext\", this.navigateNext.bind(this));\r\n\t\tthis.registerTableFunction(\"navigateLeft\", this.navigateLeft.bind(this));\r\n\t\tthis.registerTableFunction(\"navigateRight\", this.navigateRight.bind(this));\r\n\t\tthis.registerTableFunction(\"navigateUp\", this.navigateUp.bind(this));\r\n\t\tthis.registerTableFunction(\"navigateDown\", this.navigateDown.bind(this));\r\n\t\t\r\n\t\tthis.registerComponentFunction(\"cell\", \"isEdited\", this.cellIsEdited.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"clearEdited\", this.clearEdited.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"edit\", this.editCell.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"cancelEdit\", this.cellCancelEdit.bind(this));\r\n\t\t\r\n\t\tthis.registerComponentFunction(\"cell\", \"navigatePrev\", this.navigatePrev.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"navigateNext\", this.navigateNext.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"navigateLeft\", this.navigateLeft.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"navigateRight\", this.navigateRight.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"navigateUp\", this.navigateUp.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"navigateDown\", this.navigateDown.bind(this));\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"cell-init\", this.bindEditor.bind(this));\r\n\t\tthis.subscribe(\"cell-delete\", this.clearEdited.bind(this));\r\n\t\tthis.subscribe(\"cell-value-changed\", this.updateCellClass.bind(this));\r\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\r\n\t\tthis.subscribe(\"column-delete\", this.columnDeleteCheck.bind(this));\r\n\t\tthis.subscribe(\"row-deleting\", this.rowDeleteCheck.bind(this));\r\n\t\tthis.subscribe(\"data-refreshing\", this.cancelEdit.bind(this));\r\n\t\t\r\n\t\tthis.subscribe(\"keybinding-nav-prev\", this.navigatePrev.bind(this, undefined));\r\n\t\tthis.subscribe(\"keybinding-nav-next\", this.keybindingNavigateNext.bind(this));\r\n\t\tthis.subscribe(\"keybinding-nav-left\", this.navigateLeft.bind(this, undefined));\r\n\t\tthis.subscribe(\"keybinding-nav-right\", this.navigateRight.bind(this, undefined));\r\n\t\tthis.subscribe(\"keybinding-nav-up\", this.navigateUp.bind(this, undefined));\r\n\t\tthis.subscribe(\"keybinding-nav-down\", this.navigateDown.bind(this, undefined));\r\n\t}\r\n\t\r\n\t\r\n\t///////////////////////////////////\r\n\t////// Keybinding Functions ///////\r\n\t///////////////////////////////////\r\n\t\r\n\tkeybindingNavigateNext(e){\r\n\t\tvar cell = this.currentCell,\r\n\t\tnewRow = this.options(\"tabEndNewRow\");\r\n\t\t\r\n\t\tif(cell){\r\n\t\t\tif(!this.navigateNext(cell, e)){\r\n\t\t\t\tif(newRow){\r\n\t\t\t\t\tcell.getElement().firstChild.blur();\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(newRow === true){\r\n\t\t\t\t\t\tnewRow = this.table.addRow({});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(typeof newRow == \"function\"){\r\n\t\t\t\t\t\t\tnewRow = this.table.addRow(newRow(cell.row.getComponent()));\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tnewRow = this.table.addRow(Object.assign({}, newRow));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tnewRow.then(() => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tcell.getComponent().navigateNext();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t///////// Cell Functions //////////\r\n\t///////////////////////////////////\r\n\t\r\n\tcellIsEdited(cell){\r\n\t\treturn !! cell.modules.edit && cell.modules.edit.edited;\r\n\t}\r\n\t\r\n\tcellCancelEdit(cell){\r\n\t\tif(cell === this.currentCell){\r\n\t\t\tthis.table.modules.edit.cancelEdit();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Cancel Editor Error - This cell is not currently being edited \");\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\tupdateCellClass(cell){\r\n\t\tif(this.allowEdit(cell)) {\r\n\t\t\tcell.getElement().classList.add(\"tabulator-editable\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcell.getElement().classList.remove(\"tabulator-editable\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tclearCellEdited(cells){\r\n\t\tif(!cells){\r\n\t\t\tcells = this.table.modules.edit.getEditedCells();\r\n\t\t}\r\n\t\t\r\n\t\tif(!Array.isArray(cells)){\r\n\t\t\tcells = [cells];\r\n\t\t}\r\n\t\t\r\n\t\tcells.forEach((cell) => {\r\n\t\t\tthis.table.modules.edit.clearEdited(cell._getSelf());\r\n\t\t});\r\n\t}\r\n\t\r\n\tnavigatePrev(cell = this.currentCell, e){\r\n\t\tvar nextCell, prevRow;\r\n\t\t\r\n\t\tif(cell){\r\n\t\t\t\r\n\t\t\tif(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tnextCell = this.navigateLeft();\r\n\t\t\t\r\n\t\t\tif(nextCell){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tprevRow = this.table.rowManager.prevDisplayRow(cell.row, true);\r\n\t\t\t\t\r\n\t\t\t\tif(prevRow){\r\n\t\t\t\t\tnextCell = this.findNextEditableCell(prevRow, prevRow.cells.length);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(nextCell){\r\n\t\t\t\t\t\tnextCell.getComponent().edit();\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tnavigateNext(cell = this.currentCell, e){\r\n\t\tvar nextCell, nextRow;\r\n\t\t\r\n\t\tif(cell){\r\n\t\t\t\r\n\t\t\tif(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tnextCell = this.navigateRight();\r\n\t\t\t\r\n\t\t\tif(nextCell){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\r\n\t\t\t\t\r\n\t\t\t\tif(nextRow){\r\n\t\t\t\t\tnextCell = this.findNextEditableCell(nextRow, -1);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(nextCell){\r\n\t\t\t\t\t\tnextCell.getComponent().edit();\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tnavigateLeft(cell = this.currentCell, e){\r\n\t\tvar index, nextCell;\r\n\t\t\r\n\t\tif(cell){\r\n\t\t\t\r\n\t\t\tif(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tindex = cell.getIndex();\r\n\t\t\tnextCell = this.findPrevEditableCell(cell.row, index);\r\n\t\t\t\r\n\t\t\tif(nextCell){\r\n\t\t\t\tnextCell.getComponent().edit();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tnavigateRight(cell = this.currentCell, e){\r\n\t\tvar index, nextCell;\r\n\t\t\r\n\t\tif(cell){\r\n\t\t\t\r\n\t\t\tif(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tindex = cell.getIndex();\r\n\t\t\tnextCell = this.findNextEditableCell(cell.row, index);\r\n\t\t\t\r\n\t\t\tif(nextCell){\r\n\t\t\t\tnextCell.getComponent().edit();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tnavigateUp(cell = this.currentCell, e){\r\n\t\tvar index, nextRow;\r\n\t\t\r\n\t\tif(cell){\r\n\t\t\t\r\n\t\t\tif(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tindex = cell.getIndex();\r\n\t\t\tnextRow = this.table.rowManager.prevDisplayRow(cell.row, true);\r\n\t\t\t\r\n\t\t\tif(nextRow){\r\n\t\t\t\tnextRow.cells[index].getComponent().edit();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tnavigateDown(cell = this.currentCell, e){\r\n\t\tvar index, nextRow;\r\n\t\t\r\n\t\tif(cell){\r\n\t\t\t\r\n\t\t\tif(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tindex = cell.getIndex();\r\n\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\r\n\t\t\t\r\n\t\t\tif(nextRow){\r\n\t\t\t\tnextRow.cells[index].getComponent().edit();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tfindNextEditableCell(row, index){\r\n\t\tvar nextCell = false;\r\n\t\t\r\n\t\tif(index < row.cells.length-1){\r\n\t\t\tfor(var i = index+1; i < row.cells.length; i++){\r\n\t\t\t\tlet cell = row.cells[i];\r\n\t\t\t\t\r\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\r\n\t\t\t\t\tlet allowEdit = this.allowEdit(cell);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(allowEdit){\r\n\t\t\t\t\t\tnextCell = cell;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn nextCell;\r\n\t}\r\n\t\r\n\tfindPrevEditableCell(row, index){\r\n\t\tvar prevCell = false;\r\n\t\t\r\n\t\tif(index > 0){\r\n\t\t\tfor(var i = index-1; i >= 0; i--){\r\n\t\t\t\tlet cell = row.cells[i];\r\n\t\t\t\t\r\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\r\n\t\t\t\t\tlet allowEdit = this.allowEdit(cell);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(allowEdit){\r\n\t\t\t\t\t\tprevCell = cell;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn prevCell;\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\t\r\n\tinitializeColumnCheck(column){\r\n\t\tif(typeof column.definition.editor !== \"undefined\"){\r\n\t\t\tthis.initializeColumn(column);\r\n\t\t}\r\n\t}\r\n\t\r\n\tcolumnDeleteCheck(column){\r\n\t\tif(this.currentCell && this.currentCell.column === column){\r\n\t\t\tthis.cancelEdit();\r\n\t\t}\r\n\t}\r\n\t\r\n\trowDeleteCheck(row){\r\n\t\tif(this.currentCell && this.currentCell.row === row){\r\n\t\t\tthis.cancelEdit();\r\n\t\t}\r\n\t}\r\n\t\r\n\t//initialize column editor\r\n\tinitializeColumn(column){\r\n\t\tvar config = {\r\n\t\t\teditor:false,\r\n\t\t\tblocked:false,\r\n\t\t\tcheck:column.definition.editable,\r\n\t\t\tparams:column.definition.editorParams || {}\r\n\t\t};\r\n\t\t\r\n\t\t//set column editor\r\n\t\tswitch(typeof column.definition.editor){\r\n\t\t\tcase \"string\":\r\n\t\t\t\tif(this.editors[column.definition.editor]){\r\n\t\t\t\t\tconfig.editor = this.editors[column.definition.editor];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Editor Error - No such editor found: \", column.definition.editor);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase \"function\":\r\n\t\t\t\tconfig.editor = column.definition.editor;\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase \"boolean\":\r\n\t\t\t\tif(column.definition.editor === true){\r\n\t\t\t\t\tif(typeof column.definition.formatter !== \"function\"){\r\n\t\t\t\t\t\tif(this.editors[column.definition.formatter]){\r\n\t\t\t\t\t\t\tconfig.editor = this.editors[column.definition.formatter];\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tconfig.editor = this.editors[\"input\"];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t\tif(config.editor){\r\n\t\t\tcolumn.modules.edit = config;\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetCurrentCell(){\r\n\t\treturn this.currentCell ? this.currentCell.getComponent() : false;\r\n\t}\r\n\t\r\n\tclearEditor(cancel){\r\n\t\tvar cell = this.currentCell,\r\n\t\tcellEl;\r\n\t\t\r\n\t\tthis.invalidEdit = false;\r\n\t\t\r\n\t\tif(cell){\r\n\t\t\tthis.currentCell = false;\r\n\t\t\t\r\n\t\t\tcellEl = cell.getElement();\r\n\t\t\t\r\n\t\t\tthis.dispatch(\"edit-editor-clear\", cell, cancel);\r\n\t\t\t\r\n\t\t\tcellEl.classList.remove(\"tabulator-editing\");\r\n\t\t\t\r\n\t\t\twhile(cellEl.firstChild) cellEl.removeChild(cellEl.firstChild);\r\n\t\t\t\r\n\t\t\tcell.row.getElement().classList.remove(\"tabulator-editing\");\r\n\t\t\t\r\n\t\t\tcell.table.element.classList.remove(\"tabulator-editing\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tcancelEdit(){\r\n\t\tif(this.currentCell){\r\n\t\t\tvar cell = this.currentCell;\r\n\t\t\tvar component = this.currentCell.getComponent();\r\n\t\t\t\r\n\t\t\tthis.clearEditor(true);\r\n\t\t\tcell.setValueActual(cell.getValue());\r\n\t\t\tcell.cellRendered();\r\n\t\t\t\r\n\t\t\tif(cell.column.definition.editor == \"textarea\" || cell.column.definition.variableHeight){\r\n\t\t\t\tcell.row.normalizeHeight(true);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(cell.column.definition.cellEditCancelled){\r\n\t\t\t\tcell.column.definition.cellEditCancelled.call(this.table, component);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.dispatch(\"edit-cancelled\", cell);\r\n\t\t\tthis.dispatchExternal(\"cellEditCancelled\", component);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//return a formatted value for a cell\r\n\tbindEditor(cell){\r\n\t\tif(cell.column.modules.edit){\r\n\t\t\tvar self = this,\r\n\t\t\telement = cell.getElement(true);\r\n\t\t\t\r\n\t\t\tthis.updateCellClass(cell);\r\n\t\t\telement.setAttribute(\"tabindex\", 0);\r\n\t\t\t\r\n\t\t\telement.addEventListener(\"click\", function(e){\r\n\t\t\t\tif(!element.classList.contains(\"tabulator-editing\")){\r\n\t\t\t\t\telement.focus({preventScroll: true});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\telement.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\tif (e.button === 2) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tself.mouseClick = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\telement.addEventListener(\"focus\", function(e){\r\n\t\t\t\tif(!self.recursionBlock){\r\n\t\t\t\t\tself.edit(cell, e, false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\tfocusCellNoEvent(cell, block){\r\n\t\tthis.recursionBlock = true;\r\n\t\t\r\n\t\tif(!(block && this.table.browser === \"ie\")){\r\n\t\t\tcell.getElement().focus({preventScroll: true});\r\n\t\t}\r\n\t\t\r\n\t\tthis.recursionBlock = false;\r\n\t}\r\n\t\r\n\teditCell(cell, forceEdit){\r\n\t\tthis.focusCellNoEvent(cell);\r\n\t\tthis.edit(cell, false, forceEdit);\r\n\t}\r\n\t\r\n\tfocusScrollAdjust(cell){\r\n\t\tif(this.table.rowManager.getRenderMode() == \"virtual\"){\r\n\t\t\tvar topEdge = this.table.rowManager.element.scrollTop,\r\n\t\t\tbottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\r\n\t\t\trowEl = cell.row.getElement();\r\n\t\t\t\r\n\t\t\tif(rowEl.offsetTop < topEdge){\r\n\t\t\t\tthis.table.rowManager.element.scrollTop -= (topEdge - rowEl.offsetTop);\r\n\t\t\t}else{\r\n\t\t\t\tif(rowEl.offsetTop + rowEl.offsetHeight  > bottomEdge){\r\n\t\t\t\t\tthis.table.rowManager.element.scrollTop += (rowEl.offsetTop + rowEl.offsetHeight - bottomEdge);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar leftEdge = this.table.rowManager.element.scrollLeft,\r\n\t\t\trightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\r\n\t\t\tcellEl = cell.getElement();\r\n\t\t\t\r\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\t\tleftEdge += parseInt(this.table.modules.frozenColumns.leftMargin);\r\n\t\t\t\trightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\r\n\t\t\t\tleftEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\r\n\t\t\t\trightEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(cellEl.offsetLeft < leftEdge){\r\n\t\t\t\t\r\n\t\t\t\tthis.table.rowManager.element.scrollLeft -= (leftEdge - cellEl.offsetLeft);\r\n\t\t\t}else{\r\n\t\t\t\tif(cellEl.offsetLeft + cellEl.offsetWidth  > rightEdge){\r\n\t\t\t\t\tthis.table.rowManager.element.scrollLeft += (cellEl.offsetLeft + cellEl.offsetWidth - rightEdge);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tallowEdit(cell) {\r\n\t\tvar check = cell.column.modules.edit ? true : false;\r\n\r\n\t\tif(cell.column.modules.edit){\r\n\t\t\tswitch(typeof cell.column.modules.edit.check){\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\t\tcheck = cell.column.modules.edit.check(cell.getComponent());\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\t\tcheck = !!cell.row.data[cell.column.modules.edit.check];\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"boolean\":\r\n\t\t\t\t\tcheck = cell.column.modules.edit.check;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn check;\r\n\t}\r\n\t\r\n\tedit(cell, e, forceEdit){\r\n\t\tvar self = this,\r\n\t\tallowEdit = true,\r\n\t\trendered = function(){},\r\n\t\telement = cell.getElement(),\r\n\t\tcellEditor, component, params;\r\n\t\t\r\n\t\t//prevent editing if another cell is refusing to leave focus (eg. validation fail)\r\n\t\tif(this.currentCell){\r\n\t\t\tif(!this.invalidEdit){\r\n\t\t\t\tthis.cancelEdit();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\t//handle successful value change\r\n\t\tfunction success(value){\r\n\t\t\tif(self.currentCell === cell){\r\n\t\t\t\tvar valid = self.chain(\"edit-success\", [cell, value], true, true);\r\n\t\t\t\t\r\n\t\t\t\tif(valid === true || self.table.options.validationMode === \"highlight\"){\r\n\t\t\t\t\tself.clearEditor();\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(!cell.modules.edit){\r\n\t\t\t\t\t\tcell.modules.edit = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcell.modules.edit.edited = true;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(self.editedCells.indexOf(cell) == -1){\r\n\t\t\t\t\t\tself.editedCells.push(cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcell.setValue(value, true);\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn valid === true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tself.invalidEdit = true;\r\n\t\t\t\t\tself.focusCellNoEvent(cell, true);\r\n\t\t\t\t\trendered();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//handle aborted edit\r\n\t\tfunction cancel(){\r\n\t\t\tif(self.currentCell === cell){\r\n\t\t\t\tself.cancelEdit();\r\n\t\t\t}else{\r\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction onRendered(callback){\r\n\t\t\trendered = callback;\r\n\t\t}\r\n\t\t\r\n\t\tif(!cell.column.modules.edit.blocked){\r\n\t\t\tif(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tallowEdit = this.allowEdit(cell);\r\n\t\t\t\r\n\t\t\tif(allowEdit || forceEdit){\r\n\t\t\t\t\r\n\t\t\t\tself.cancelEdit();\r\n\t\t\t\t\r\n\t\t\t\tself.currentCell = cell;\r\n\t\t\t\t\r\n\t\t\t\tthis.focusScrollAdjust(cell);\r\n\t\t\t\t\r\n\t\t\t\tcomponent = cell.getComponent();\r\n\t\t\t\t\r\n\t\t\t\tif(this.mouseClick){\r\n\t\t\t\t\tthis.mouseClick = false;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(cell.column.definition.cellClick){\r\n\t\t\t\t\t\tcell.column.definition.cellClick.call(this.table, e, component);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(cell.column.definition.cellEditing){\r\n\t\t\t\t\tcell.column.definition.cellEditing.call(this.table, component);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.dispatch(\"cell-editing\", cell);\r\n\t\t\t\tthis.dispatchExternal(\"cellEditing\", component);\r\n\t\t\t\t\r\n\t\t\t\tparams = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\r\n\t\t\t\t\r\n\t\t\t\tcellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\r\n\t\t\t\t\r\n\t\t\t\t//if editor returned, add to DOM, if false, abort edit\r\n\t\t\t\tif(cellEditor !== false){\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(cellEditor instanceof Node){\r\n\t\t\t\t\t\telement.classList.add(\"tabulator-editing\");\r\n\t\t\t\t\t\tcell.row.getElement().classList.add(\"tabulator-editing\");\r\n\t\t\t\t\t\tcell.table.element.classList.add(\"tabulator-editing\");\r\n\t\t\t\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\t\t\t\t\t\telement.appendChild(cellEditor);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//trigger onRendered Callback\r\n\t\t\t\t\t\trendered();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//prevent editing from triggering rowClick event\r\n\t\t\t\t\t\tvar children = element.children;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\t\t\tchildren[i].addEventListener(\"click\", function(e){\r\n\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\r\n\t\t\t\t\t\telement.blur();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\telement.blur();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tthis.mouseClick = false;\r\n\t\t\t\telement.blur();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.mouseClick = false;\r\n\t\t\telement.blur();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetEditedCells(){\r\n\t\tvar output = [];\r\n\t\t\r\n\t\tthis.editedCells.forEach((cell) => {\r\n\t\t\toutput.push(cell.getComponent());\r\n\t\t});\r\n\t\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tclearEdited(cell){\r\n\t\tvar editIndex;\r\n\t\t\r\n\t\tif(cell.modules.edit && cell.modules.edit.edited){\r\n\t\t\tcell.modules.edit.edited = false;\r\n\t\t\t\r\n\t\t\tthis.dispatch(\"edit-edited-clear\", cell);\r\n\t\t}\r\n\t\t\r\n\t\teditIndex = this.editedCells.indexOf(cell);\r\n\t\t\r\n\t\tif(editIndex > -1){\r\n\t\t\tthis.editedCells.splice(editIndex, 1);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nEdit.moduleName = \"edit\";\r\n\r\n//load defaults\r\nEdit.editors = defaultEditors;\r\n\r\n\r\nexport default Edit;\r\n","class ExportRow{\r\n\tconstructor(type, columns, component, indent){\r\n\t\tthis.type = type;\r\n\t\tthis.columns = columns;\r\n\t\tthis.component = component || false;\r\n\t\tthis.indent = indent || 0;\r\n\t}\r\n}\r\n\r\nexport default ExportRow;","class ExportColumn{\r\n\tconstructor(value, component, width, height, depth){\r\n\t\tthis.value = value;\r\n\t\tthis.component = component || false;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.depth = depth;\r\n\t}\r\n}\r\n\r\nexport default ExportColumn;","import Module from '../../core/Module.js';\r\n\r\nimport ExportRow from './ExportRow.js';\r\nimport ExportColumn from './ExportColumn.js';\r\n\r\nclass Export extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.config = {};\r\n\t\tthis.cloneTableStyle = true;\r\n\t\tthis.colVisProp = \"\";\r\n\r\n\t\tthis.registerTableOption(\"htmlOutputConfig\", false); //html output config\r\n\r\n\t\tthis.registerColumnOption(\"htmlOutput\");\r\n\t\tthis.registerColumnOption(\"titleHtmlOutput\");\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.registerTableFunction(\"getHtml\", this.getHtml.bind(this));\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\tgenerateExportList(config, style, range, colVisProp){\r\n\t\tthis.cloneTableStyle = style;\r\n\t\tthis.config = config || {};\r\n\t\tthis.colVisProp = colVisProp;\r\n\r\n\t\tvar headers = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders()) : [];\r\n\t\tvar body = this.bodyToExportRows(this.rowLookup(range));\r\n\r\n\t\treturn headers.concat(body);\r\n\t}\r\n\r\n\tgenerateTable(config, style, range, colVisProp){\r\n\t\tvar list = this.generateExportList(config, style, range, colVisProp);\r\n\r\n\t\treturn this.generateTableElement(list);\r\n\t}\r\n\r\n\trowLookup(range){\r\n\t\tvar rows = [];\r\n\r\n\t\tif(typeof range == \"function\"){\r\n\t\t\trange.call(this.table).forEach((row) =>{\r\n\t\t\t\trow = this.table.rowManager.findRow(row);\r\n\r\n\t\t\t\tif(row){\r\n\t\t\t\t\trows.push(row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tswitch(range){\r\n\t\t\t\tcase true:\r\n\t\t\t\tcase \"visible\":\r\n\t\t\t\t\trows = this.table.rowManager.getVisibleRows(false, true);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"all\":\r\n\t\t\t\t\trows = this.table.rowManager.rows;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"selected\":\r\n\t\t\t\t\trows = this.table.modules.selectRow.selectedRows;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"active\":\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif(this.table.options.pagination){\r\n\t\t\t\t\t\trows = this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length - 2);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trows = this.table.rowManager.getDisplayRows();\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Object.assign([], rows);\r\n\t}\r\n\r\n\tgenerateColumnGroupHeaders(){\r\n\t\tvar output = [];\r\n\r\n\t\tvar columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\r\n\r\n\t\tcolumns.forEach((column) => {\r\n\t\t\tvar colData = this.processColumnGroup(column);\r\n\r\n\t\t\tif(colData){\r\n\t\t\t\toutput.push(colData);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tprocessColumnGroup(column){\r\n\t\tvar subGroups = column.columns,\r\n\t\tmaxDepth = 0,\r\n\t\ttitle = column.definition[\"title\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))] || column.definition.title;\r\n\r\n\t\tvar groupData = {\r\n\t\t\ttitle:title,\r\n\t\t\tcolumn:column,\r\n\t\t\tdepth:1,\r\n\t\t};\r\n\r\n\t\tif(subGroups.length){\r\n\t\t\tgroupData.subGroups = [];\r\n\t\t\tgroupData.width = 0;\r\n\r\n\t\t\tsubGroups.forEach((subGroup) => {\r\n\t\t\t\tvar subGroupData = this.processColumnGroup(subGroup);\r\n\r\n\t\t\t\tif(subGroupData){\r\n\t\t\t\t\tgroupData.width += subGroupData.width;\r\n\t\t\t\t\tgroupData.subGroups.push(subGroupData);\r\n\r\n\t\t\t\t\tif(subGroupData.depth > maxDepth){\r\n\t\t\t\t\t\tmaxDepth = subGroupData.depth;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgroupData.depth += maxDepth;\r\n\r\n\t\t\tif(!groupData.width){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.columnVisCheck(column)){\r\n\t\t\t\tgroupData.width = 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn groupData;\r\n\t}\r\n\r\n\tcolumnVisCheck(column){\r\n\t\tvar visProp = column.definition[this.colVisProp];\r\n\r\n\t\tif(typeof visProp === \"function\"){\r\n\t\t\tvisProp = visProp.call(this.table, column.getComponent());\r\n\t\t}\r\n\r\n\t\treturn visProp !== false && (column.visible || (!column.visible && visProp));\r\n\t}\r\n\r\n\theadersToExportRows(columns){\r\n\t\tvar headers = [],\r\n\t\theaderDepth = 0,\r\n\t\texportRows = [];\r\n\r\n\t\tfunction parseColumnGroup(column, level){\r\n\r\n\t\t\tvar depth = headerDepth - level;\r\n\r\n\t\t\tif(typeof headers[level] === \"undefined\"){\r\n\t\t\t\theaders[level] = [];\r\n\t\t\t}\r\n\r\n\t\t\tcolumn.height = column.subGroups ? 1 : (depth - column.depth) + 1;\r\n\r\n\t\t\theaders[level].push(column);\r\n\r\n\t\t\tif(column.height > 1){\r\n\t\t\t\tfor(let i = 1; i < column.height; i ++){\r\n\r\n\t\t\t\t\tif(typeof headers[level + i] === \"undefined\"){\r\n\t\t\t\t\t\theaders[level + i] = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\theaders[level + i].push(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(column.width > 1){\r\n\t\t\t\tfor(let i = 1; i < column.width; i ++){\r\n\t\t\t\t\theaders[level].push(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(column.subGroups){\r\n\t\t\t\tcolumn.subGroups.forEach(function(subGroup){\r\n\t\t\t\t\tparseColumnGroup(subGroup, level+1);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//calculate maximum header depth\r\n\t\tcolumns.forEach(function(column){\r\n\t\t\tif(column.depth > headerDepth){\r\n\t\t\t\theaderDepth = column.depth;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tcolumns.forEach(function(column){\r\n\t\t\tparseColumnGroup(column,0);\r\n\t\t});\r\n\r\n\t\theaders.forEach((header) => {\r\n\t\t\tvar columns = [];\r\n\r\n\t\t\theader.forEach((col) => {\r\n\t\t\t\tif(col){\r\n\t\t\t\t\tlet title = typeof col.title === \"undefined\" ? \"\" : col.title;\r\n\t\t\t\t\tcolumns.push(new ExportColumn(title, col.column.getComponent(), col.width, col.height, col.depth));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcolumns.push(null);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\texportRows.push(new ExportRow(\"header\", columns));\r\n\t\t});\r\n\r\n\t\treturn exportRows;\r\n\t}\r\n\r\n\tbodyToExportRows(rows){\r\n\r\n\t\tvar columns = [];\r\n\t\tvar exportRows = [];\r\n\r\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\t\t\tif (this.columnVisCheck(column)) {\r\n\t\t\t\tcolumns.push(column.getComponent());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")){\r\n\t\t\tif(this.table.modules.columnCalcs.topInitialized){\r\n\t\t\t\trows.unshift(this.table.modules.columnCalcs.topRow);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modules.columnCalcs.botInitialized){\r\n\t\t\t\trows.push(this.table.modules.columnCalcs.botRow);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trows = rows.filter((row) => {\r\n\t\t\tswitch(row.type){\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\t\treturn this.config.rowGroups !== false;\r\n\r\n\t\t\t\tcase \"calc\":\r\n\t\t\t\t\treturn this.config.columnCalcs !== false;\r\n\r\n\t\t\t\tcase \"row\":\r\n\t\t\t\t\treturn !(this.table.options.dataTree && this.config.dataTree === false && row.modules.dataTree.parent);\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\trows.forEach((row, i) => {\r\n\t\t\tvar rowData = row.getData(this.colVisProp);\r\n\t\t\tvar exportCols = [];\r\n\t\t\tvar indent = 0;\r\n\r\n\t\t\tswitch(row.type){\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\t\tindent = row.level;\r\n\t\t\t\t\texportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"calc\" :\r\n\t\t\t\tcase \"row\" :\r\n\t\t\t\t\tcolumns.forEach((col) => {\r\n\t\t\t\t\t\texportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\r\n\t\t\t\t\t\tindent = row.modules.dataTree.index;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\texportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\r\n\t\t});\r\n\r\n\t\treturn exportRows;\r\n\t}\r\n\r\n\tgenerateTableElement(list){\r\n\t\tvar table = document.createElement(\"table\"),\r\n\t\theaderEl = document.createElement(\"thead\"),\r\n\t\tbodyEl = document.createElement(\"tbody\"),\r\n\t\tstyles = this.lookupTableStyles(),\r\n\t\trowFormatter = this.table.options[\"rowFormatter\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))],\r\n\t\tsetup = {};\r\n\r\n\t\tsetup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\r\n\r\n\t\tif(this.table.options.dataTree &&this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")){\r\n\t\t\tsetup.treeElementField = this.table.modules.dataTree.elementField;\r\n\t\t}\r\n\r\n\t\t//assign group header formatter\r\n\t\tsetup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))];\r\n\r\n\t\tif(setup.groupHeader && !Array.isArray(setup.groupHeader)){\r\n\t\t\tsetup.groupHeader = [setup.groupHeader];\r\n\t\t}\r\n\r\n\t\ttable.classList.add(\"tabulator-print-table\");\r\n\r\n\t\tthis.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\r\n\r\n\r\n\t\tif(list.length > 1000){\r\n\t\t\tconsole.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\r\n\t\t}\r\n\r\n\t\tlist.forEach((row, i) => {\r\n\t\t\tlet rowEl;\r\n\r\n\t\t\tswitch(row.type){\r\n\t\t\t\tcase \"header\":\r\n\t\t\t\t\theaderEl.appendChild(this.generateHeaderElement(row, setup, styles));\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\t\tbodyEl.appendChild(this.generateGroupElement(row, setup, styles));\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"calc\":\r\n\t\t\t\t\tbodyEl.appendChild(this.generateCalcElement(row, setup, styles));\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"row\":\r\n\t\t\t\t\trowEl = this.generateRowElement(row, setup, styles);\r\n\r\n\t\t\t\t\tthis.mapElementStyles(((i % 2) && styles.evenRow) ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\r\n\t\t\t\t\tbodyEl.appendChild(rowEl);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(headerEl.innerHTML){\r\n\t\t\ttable.appendChild(headerEl);\r\n\t\t}\r\n\r\n\t\ttable.appendChild(bodyEl);\r\n\r\n\r\n\t\tthis.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\r\n\t\treturn table;\r\n\t}\r\n\r\n\tlookupTableStyles(){\r\n\t\tvar styles = {};\r\n\r\n\t\t//lookup row styles\r\n\t\tif(this.cloneTableStyle && window.getComputedStyle){\r\n\t\t\tstyles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\r\n\t\t\tstyles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\r\n\t\t\tstyles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\r\n\t\t\tstyles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\r\n\t\t\tstyles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\r\n\r\n\t\t\tif(styles.firstRow){\r\n\t\t\t\tstyles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\r\n\t\t\t\tstyles.firstCell = styles.styleCells[0];\r\n\t\t\t\tstyles.lastCell = styles.styleCells[styles.styleCells.length - 1];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn styles;\r\n\t}\r\n\r\n\tgenerateHeaderElement(row, setup, styles){\r\n\t\tvar rowEl = document.createElement(\"tr\");\r\n\r\n\t\trow.columns.forEach((column) => {\r\n\t\t\tif(column){\r\n\t\t\t\tvar cellEl = document.createElement(\"th\");\r\n\t\t\t\tvar classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\r\n\r\n\t\t\t\tcellEl.colSpan = column.width;\r\n\t\t\t\tcellEl.rowSpan = column.height;\r\n\r\n\t\t\t\tcellEl.innerHTML = column.value;\r\n\r\n\t\t\t\tif(this.cloneTableStyle){\r\n\t\t\t\t\tcellEl.style.boxSizing = \"border-box\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tclassNames.forEach(function(className) {\r\n\t\t\t\t\tcellEl.classList.add(className);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\r\n\t\t\t\tthis.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\r\n\r\n\t\t\t\tif(column.component._column.visible){\r\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(column.component._column.definition.width){\r\n\t\t\t\t\t\tcellEl.style.width = column.component._column.definition.width + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(column.component._column.parent){\r\n\t\t\t\t\tthis.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowEl.appendChild(cellEl);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn rowEl;\r\n\t}\r\n\r\n\tgenerateGroupElement(row, setup, styles){\r\n\r\n\t\tvar rowEl = document.createElement(\"tr\"),\r\n\t\tcellEl = document.createElement(\"td\"),\r\n\t\tgroup = row.columns[0];\r\n\r\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\r\n\r\n\t\tif(setup.groupHeader && setup.groupHeader[row.indent]){\r\n\t\t\tgroup.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\r\n\t\t}else{\r\n\t\t\tif(setup.groupHeader !== false){\r\n\t\t\t\tgroup.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcellEl.colSpan = group.width;\r\n\t\tcellEl.innerHTML = group.value;\r\n\r\n\t\trowEl.classList.add(\"tabulator-print-table-group\");\r\n\t\trowEl.classList.add(\"tabulator-group-level-\" + row.indent);\r\n\r\n\t\tif(group.component.isVisible()){\r\n\t\t\trowEl.classList.add(\"tabulator-group-visible\");\r\n\t\t}\r\n\r\n\t\tthis.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\r\n\t\tthis.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\r\n\r\n\t\trowEl.appendChild(cellEl);\r\n\r\n\t\treturn rowEl;\r\n\t}\r\n\r\n\tgenerateCalcElement(row, setup, styles){\r\n\t\tvar rowEl = this.generateRowElement(row, setup, styles);\r\n\r\n\t\trowEl.classList.add(\"tabulator-print-table-calcs\");\r\n\t\tthis.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\r\n\r\n\t\treturn rowEl;\r\n\t}\r\n\r\n\tgenerateRowElement(row, setup, styles){\r\n\t\tvar rowEl = document.createElement(\"tr\");\r\n\r\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\r\n\r\n\t\trow.columns.forEach((col, i) => {\r\n\t\t\tif(col){\r\n\t\t\t\tvar cellEl = document.createElement(\"td\"),\r\n\t\t\t\tcolumn = col.component._column,\r\n\t\t\t\tindex = this.table.columnManager.findColumnIndex(column),\r\n\t\t\t\tvalue = col.value,\r\n\t\t\t\tcellStyle;\r\n\r\n\t\t\t\tvar cellWrapper = {\r\n\t\t\t\t\tmodules:{},\r\n\t\t\t\t\tgetValue:function(){\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetField:function(){\r\n\t\t\t\t\t\treturn column.definition.field;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetElement:function(){\r\n\t\t\t\t\t\treturn cellEl;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetColumn:function(){\r\n\t\t\t\t\t\treturn column.getComponent();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetData:function(){\r\n\t\t\t\t\t\treturn row.component.getData();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetRow:function(){\r\n\t\t\t\t\t\treturn row.component;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetComponent:function(){\r\n\t\t\t\t\t\treturn cellWrapper;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcolumn:column,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\r\n\r\n\t\t\t\tclassNames.forEach(function(className) {\r\n\t\t\t\t\tcellEl.classList.add(className);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.table.modExists(\"format\") && this.config.formatCells !== false){\r\n\t\t\t\t\tvalue = this.table.modules.format.formatExportValue(cellWrapper, this.colVisProp);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tswitch(typeof value){\r\n\t\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\t\tvalue = value !== null ? JSON.stringify(value) : \"\";\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(value instanceof Node){\r\n\t\t\t\t\tcellEl.appendChild(value);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcellEl.innerHTML = value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcellStyle = styles.styleCells && styles.styleCells[index] ? styles.styleCells[index] : styles.firstCell;\r\n\r\n\t\t\t\tif(cellStyle){\r\n\t\t\t\t\tthis.mapElementStyles(cellStyle, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"text-align\"]);\r\n\r\n\t\t\t\t\tif(column.definition.align){\r\n\t\t\t\t\t\tcellEl.style.textAlign = column.definition.align;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\r\n\t\t\t\t\tif((setup.treeElementField && setup.treeElementField == column.field) || (!setup.treeElementField && i == 0)){\r\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.controlEl){\r\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.branchEl){\r\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowEl.appendChild(cellEl);\r\n\r\n\t\t\t\tif(cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback){\r\n\t\t\t\t\tcellWrapper.modules.format.renderedCallback();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(setup.rowFormatter && this.config.formatCells !== false){\r\n\t\t\t\t\tsetup.rowFormatter(row.component);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn rowEl;\r\n\t}\r\n\r\n\tgenerateHTMLTable(list){\r\n\t\tvar holder = document.createElement(\"div\");\r\n\r\n\t\tholder.appendChild(this.generateTableElement(list));\r\n\r\n\t\treturn holder.innerHTML;\r\n\t}\r\n\r\n\tgetHtml(visible, style, config, colVisProp){\r\n\t\tvar list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\r\n\r\n\t\treturn this.generateHTMLTable(list);\r\n\t}\r\n\r\n\tmapElementStyles(from, to, props){\r\n\t\tif(this.cloneTableStyle && from && to){\r\n\r\n\t\t\tvar lookup = {\r\n\t\t\t\t\"background-color\" : \"backgroundColor\",\r\n\t\t\t\t\"color\" : \"fontColor\",\r\n\t\t\t\t\"width\" : \"width\",\r\n\t\t\t\t\"font-weight\" : \"fontWeight\",\r\n\t\t\t\t\"font-family\" : \"fontFamily\",\r\n\t\t\t\t\"font-size\" : \"fontSize\",\r\n\t\t\t\t\"text-align\" : \"textAlign\",\r\n\t\t\t\t\"border-top\" : \"borderTop\",\r\n\t\t\t\t\"border-left\" : \"borderLeft\",\r\n\t\t\t\t\"border-right\" : \"borderRight\",\r\n\t\t\t\t\"border-bottom\" : \"borderBottom\",\r\n\t\t\t\t\"padding-top\" : \"paddingTop\",\r\n\t\t\t\t\"padding-left\" : \"paddingLeft\",\r\n\t\t\t\t\"padding-right\" : \"paddingRight\",\r\n\t\t\t\t\"padding-bottom\" : \"paddingBottom\",\r\n\t\t\t};\r\n\r\n\t\t\tif(window.getComputedStyle){\r\n\t\t\t\tvar fromStyle = window.getComputedStyle(from);\r\n\r\n\t\t\t\tprops.forEach(function(prop){\r\n\t\t\t\t\tto.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nExport.moduleName = \"export\";\r\n\r\nexport default Export;\r\n","export default {\r\n\r\n\t//equal to\r\n\t\"=\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal == filterVal ? true : false;\r\n\t},\r\n\r\n\t//less than\r\n\t\"<\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal < filterVal ? true : false;\r\n\t},\r\n\r\n\t//less than or equal to\r\n\t\"<=\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal <= filterVal ? true : false;\r\n\t},\r\n\r\n\t//greater than\r\n\t\">\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal > filterVal ? true : false;\r\n\t},\r\n\r\n\t//greater than or equal to\r\n\t\">=\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal >= filterVal ? true : false;\r\n\t},\r\n\r\n\t//not equal to\r\n\t\"!=\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal != filterVal ? true : false;\r\n\t},\r\n\r\n\t\"regex\":function(filterVal, rowVal, rowData, filterParams){\r\n\r\n\t\tif(typeof filterVal == \"string\"){\r\n\t\t\tfilterVal = new RegExp(filterVal);\r\n\t\t}\r\n\r\n\t\treturn filterVal.test(rowVal);\r\n\t},\r\n\r\n\t//contains the string\r\n\t\"like\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\r\n\t\t\treturn rowVal === filterVal ? true : false;\r\n\t\t}else{\r\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\r\n\t\t\t\treturn String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//contains the keywords\r\n\t\"keywords\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tvar keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\r\n\t\tvalue = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\r\n\t\tmatches = [];\r\n\r\n\t\tkeywords.forEach((keyword) =>{\r\n\t\t\tif(value.includes(keyword)){\r\n\t\t\t\tmatches.push(true);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\r\n\t},\r\n\r\n\t//starts with the string\r\n\t\"starts\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\r\n\t\t\treturn rowVal === filterVal ? true : false;\r\n\t\t}else{\r\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\r\n\t\t\t\treturn String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//ends with the string\r\n\t\"ends\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\r\n\t\t\treturn rowVal === filterVal ? true : false;\r\n\t\t}else{\r\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\r\n\t\t\t\treturn String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//in array\r\n\t\"in\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tif(Array.isArray(filterVal)){\r\n\t\t\treturn filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Filter Error - filter value is not an array:\", filterVal);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultFilters from './defaults/filters.js';\r\n\r\nclass Filter extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.filterList = []; //hold filter list\r\n\t\tthis.headerFilters = {}; //hold column filters\r\n\t\tthis.headerFilterColumns = []; //hold columns that use header filters\r\n\r\n\t\tthis.prevHeaderFilterChangeCheck = \"\";\r\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\r\n\r\n\t\tthis.changed = false; //has filtering changed since last render\r\n\t\tthis.tableInitialized = false;\r\n\r\n\t\tthis.registerTableOption(\"filterMode\", \"local\"); //local or remote filtering\r\n\r\n\t\tthis.registerTableOption(\"initialFilter\", false); //initial filtering criteria\r\n\t\tthis.registerTableOption(\"initialHeaderFilter\", false); //initial header filtering criteria\r\n\t\tthis.registerTableOption(\"headerFilterLiveFilterDelay\", 300); //delay before updating column after user types in header filter\r\n\r\n\t\tthis.registerColumnOption(\"headerFilter\");\r\n\t\tthis.registerColumnOption(\"headerFilterPlaceholder\");\r\n\t\tthis.registerColumnOption(\"headerFilterParams\");\r\n\t\tthis.registerColumnOption(\"headerFilterEmptyCheck\");\r\n\t\tthis.registerColumnOption(\"headerFilterFunc\");\r\n\t\tthis.registerColumnOption(\"headerFilterFuncParams\");\r\n\t\tthis.registerColumnOption(\"headerFilterLiveFilter\");\r\n\r\n\t\tthis.registerTableFunction(\"searchRows\", this.searchRows.bind(this));\r\n\t\tthis.registerTableFunction(\"searchData\", this.searchData.bind(this));\r\n\r\n\t\tthis.registerTableFunction(\"setFilter\", this.userSetFilter.bind(this));\r\n\t\tthis.registerTableFunction(\"refreshFilter\", this.userRefreshFilter.bind(this));\r\n\t\tthis.registerTableFunction(\"addFilter\", this.userAddFilter.bind(this));\r\n\t\tthis.registerTableFunction(\"getFilters\", this.getFilters.bind(this));\r\n\t\tthis.registerTableFunction(\"setHeaderFilterFocus\", this.userSetHeaderFilterFocus.bind(this));\r\n\t\tthis.registerTableFunction(\"getHeaderFilterValue\", this.userGetHeaderFilterValue.bind(this));\r\n\t\tthis.registerTableFunction(\"setHeaderFilterValue\", this.userSetHeaderFilterValue.bind(this));\r\n\t\tthis.registerTableFunction(\"getHeaderFilters\", this.getHeaderFilters.bind(this));\r\n\t\tthis.registerTableFunction(\"removeFilter\", this.userRemoveFilter.bind(this));\r\n\t\tthis.registerTableFunction(\"clearFilter\", this.userClearFilter.bind(this));\r\n\t\tthis.registerTableFunction(\"clearHeaderFilter\", this.userClearHeaderFilter.bind(this));\r\n\r\n\t\tthis.registerComponentFunction(\"column\", \"headerFilterFocus\", this.setHeaderFilterFocus.bind(this));\r\n\t\tthis.registerComponentFunction(\"column\", \"reloadHeaderFilter\", this.reloadHeaderFilter.bind(this));\r\n\t\tthis.registerComponentFunction(\"column\", \"getHeaderFilterValue\", this.getHeaderFilterValue.bind(this));\r\n\t\tthis.registerComponentFunction(\"column\", \"setHeaderFilterValue\", this.setHeaderFilterValue.bind(this));\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"column-init\", this.initializeColumnHeaderFilter.bind(this));\r\n\t\tthis.subscribe(\"column-width-fit-before\", this.hideHeaderFilterElements.bind(this));\r\n\t\tthis.subscribe(\"column-width-fit-after\", this.showHeaderFilterElements.bind(this));\r\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\r\n\r\n\t\tif(this.table.options.filterMode === \"remote\"){\r\n\t\t\tthis.subscribe(\"data-params\", this.remoteFilterParams.bind(this));\r\n\t\t}\r\n\r\n\t\tthis.registerDataHandler(this.filter.bind(this), 10);\r\n\t}\r\n\r\n\ttableBuilt(){\r\n\t\tif(this.table.options.initialFilter){\r\n\t\t\tthis.setFilter(this.table.options.initialFilter);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.initialHeaderFilter){\r\n\t\t\tthis.table.options.initialHeaderFilter.forEach((item) => {\r\n\r\n\t\t\t\tvar column = this.table.columnManager.findColumn(item.field);\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tthis.setHeaderFilterValue(column, item.value);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", item.field);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.tableInitialized = true;\r\n\t}\r\n\r\n\tremoteFilterParams(data, config, silent, params){\r\n\t\tparams.filter = this.getFilters(true, true);\r\n\t\treturn params;\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\t//set standard filters\r\n\tuserSetFilter(field, type, value, params){\r\n\t\tthis.setFilter(field, type, value, params);\r\n\t\tthis.refreshFilter();\r\n\t}\r\n\r\n\t//set standard filters\r\n\tuserRefreshFilter(){\r\n\t\tthis.refreshFilter();\r\n\t}\r\n\r\n\t//add filter to array\r\n\tuserAddFilter(field, type, value, params){\r\n\t\tthis.addFilter(field, type, value, params);\r\n\t\tthis.refreshFilter();\r\n\t}\r\n\r\n\tuserSetHeaderFilterFocus(field){\r\n\t\tvar column = this.table.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\tthis.setHeaderFilterFocus(column);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Filter Focus Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tuserGetHeaderFilterValue(field) {\r\n\t\tvar column = this.table.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\treturn this.getHeaderFilterValue(column);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\r\n\t\t}\r\n\t}\r\n\r\n\tuserSetHeaderFilterValue(field, value){\r\n\t\tvar column = this.table.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\tthis.setHeaderFilterValue(column, value);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//remove filter from array\r\n\tuserRemoveFilter(field, type, value){\r\n\t\tthis.removeFilter(field, type, value);\r\n\t\tthis.refreshFilter();\r\n\t}\r\n\r\n\t//clear filters\r\n\tuserClearFilter(all){\r\n\t\tthis.clearFilter(all);\r\n\t\tthis.refreshFilter();\r\n\t}\r\n\r\n\t//clear header filters\r\n\tuserClearHeaderFilter(){\r\n\t\tthis.clearHeaderFilter();\r\n\t\tthis.refreshFilter();\r\n\t}\r\n\r\n\r\n\t//search for specific row components\r\n\tsearchRows(field, type, value){\r\n\t\treturn this.search(\"rows\", field, type, value);\r\n\t}\r\n\r\n\t//search for specific data\r\n\tsearchData(field, type, value){\r\n\t\treturn this.search(\"data\", field, type, value);\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\tinitializeColumnHeaderFilter(column){\r\n\t\tvar def = column.definition;\r\n\r\n\t\tif(def.headerFilter){\r\n\r\n\t\t\tif(typeof def.headerFilterPlaceholder !== \"undefined\" && def.field){\r\n\t\t\t\tthis.module(\"localize\").setHeaderFilterColumnPlaceholder(def.field, def.headerFilterPlaceholder);\r\n\t\t\t}\r\n\r\n\t\t\tthis.initializeColumn(column);\r\n\t\t}\r\n\t}\r\n\r\n\t//initialize column header filter\r\n\tinitializeColumn(column, value){\r\n\t\tvar self = this,\r\n\t\tfield = column.getField();\r\n\r\n\t\t//handle successfully value change\r\n\t\tfunction success(value){\r\n\t\t\tvar filterType = (column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\") || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\r\n\t\t\ttype = \"\",\r\n\t\t\tfilterChangeCheck = \"\",\r\n\t\t\tfilterFunc;\r\n\r\n\t\t\tif(typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value){\r\n\r\n\t\t\t\tcolumn.modules.filter.prevSuccess = value;\r\n\r\n\t\t\t\tif(!column.modules.filter.emptyFunc(value)){\r\n\t\t\t\t\tcolumn.modules.filter.value = value;\r\n\r\n\t\t\t\t\tswitch(typeof column.definition.headerFilterFunc){\r\n\t\t\t\t\t\tcase \"string\":\r\n\t\t\t\t\t\t\tif(Filter.filters[column.definition.headerFilterFunc]){\r\n\t\t\t\t\t\t\t\ttype = column.definition.headerFilterFunc;\r\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\r\n\t\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\r\n\r\n\t\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\r\n\r\n\t\t\t\t\t\t\t\t\treturn Filter.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tconsole.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase \"function\":\r\n\t\t\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\r\n\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\r\n\r\n\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\r\n\r\n\t\t\t\t\t\t\t\treturn column.definition.headerFilterFunc(value, fieldVal, data, params);\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\ttype = filterFunc;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!filterFunc){\r\n\t\t\t\t\t\tswitch(filterType){\r\n\t\t\t\t\t\t\tcase \"partial\":\r\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\t\t\t\tvar colVal = column.getFieldValue(data);\r\n\r\n\t\t\t\t\t\t\t\t\tif(typeof colVal !== 'undefined' && colVal !== null){\r\n\t\t\t\t\t\t\t\t\t\treturn String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\ttype = \"like\";\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\t\t\t\treturn column.getFieldValue(data) == value;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\ttype = \"=\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tself.headerFilters[field] = {value:value, func:filterFunc, type:type};\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdelete self.headerFilters[field];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcolumn.modules.filter.value = value;\r\n\r\n\t\t\t\tfilterChangeCheck = JSON.stringify(self.headerFilters);\r\n\r\n\t\t\t\tif(self.prevHeaderFilterChangeCheck !== filterChangeCheck){\r\n\t\t\t\t\tself.prevHeaderFilterChangeCheck = filterChangeCheck;\r\n\r\n\t\t\t\t\tself.trackChanges();\r\n\t\t\t\t\tself.refreshFilter();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tcolumn.modules.filter = {\r\n\t\t\tsuccess:success,\r\n\t\t\tattrType:false,\r\n\t\t\ttagType:false,\r\n\t\t\temptyFunc:false,\r\n\t\t};\r\n\r\n\t\tthis.generateHeaderFilterElement(column);\r\n\t}\r\n\r\n\tgenerateHeaderFilterElement(column, initialValue, reinitialize){\r\n\t\tvar self = this,\r\n\t\tsuccess = column.modules.filter.success,\r\n\t\tfield = column.getField(),\r\n\t\tfilterElement, editor, editorElement, cellWrapper, typingTimer, searchTrigger, params;\r\n\r\n\t\tcolumn.modules.filter.value = initialValue;\r\n\r\n\t\t//handle aborted edit\r\n\t\tfunction cancel(){}\r\n\r\n\t\tif(column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode){\r\n\t\t\tcolumn.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\r\n\t\t}\r\n\r\n\t\tif(field){\r\n\r\n\t\t\t//set empty value function\r\n\t\t\tcolumn.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function(value){\r\n\t\t\t\treturn !value && value !== 0;\r\n\t\t\t};\r\n\r\n\t\t\tfilterElement = document.createElement(\"div\");\r\n\t\t\tfilterElement.classList.add(\"tabulator-header-filter\");\r\n\r\n\t\t\t//set column editor\r\n\t\t\tswitch(typeof column.definition.headerFilter){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\t\tif(self.table.modules.edit.editors[column.definition.headerFilter]){\r\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.headerFilter];\r\n\r\n\t\t\t\t\t\tif((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\r\n\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\r\n\t\t\t\t\t\t\t\treturn value !== true && value !== false;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\t\teditor = column.definition.headerFilter;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"boolean\":\r\n\t\t\t\t\tif(column.modules.edit && column.modules.edit.editor){\r\n\t\t\t\t\t\teditor = column.modules.edit.editor;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]){\r\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.formatter];\r\n\r\n\t\t\t\t\t\t\tif((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\r\n\t\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\r\n\t\t\t\t\t\t\t\t\treturn value !== true && value !== false;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[\"input\"];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif(editor){\r\n\r\n\t\t\t\tcellWrapper = {\r\n\t\t\t\t\tgetValue:function(){\r\n\t\t\t\t\t\treturn typeof initialValue !== \"undefined\" ? initialValue : \"\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetField:function(){\r\n\t\t\t\t\t\treturn column.definition.field;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetElement:function(){\r\n\t\t\t\t\t\treturn filterElement;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetColumn:function(){\r\n\t\t\t\t\t\treturn column.getComponent();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetTable:() => {\r\n\t\t\t\t\t\treturn this.table;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetRow:function(){\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tnormalizeHeight:function(){\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tparams = column.definition.headerFilterParams || {};\r\n\r\n\t\t\t\tparams = typeof params === \"function\" ? params.call(self.table, cellWrapper) : params;\r\n\r\n\t\t\t\teditorElement = editor.call(this.table.modules.edit, cellWrapper, function(){}, success, cancel, params);\r\n\r\n\t\t\t\tif(!editorElement){\r\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!(editorElement instanceof Node)){\r\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//set Placeholder Text\r\n\t\t\t\tself.langBind(\"headerFilters|columns|\" + column.definition.field, function(value){\r\n\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : self.langText(\"headerFilters|default\"));\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//focus on element on click\r\n\t\t\t\teditorElement.addEventListener(\"click\", function(e){\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\teditorElement.focus();\r\n\t\t\t\t});\r\n\r\n\t\t\t\teditorElement.addEventListener(\"focus\", (e) => {\r\n\t\t\t\t\tvar left = this.table.columnManager.element.scrollLeft;\r\n\r\n\t\t\t\t\tvar headerPos = this.table.rowManager.element.scrollLeft + parseInt(this.table.columnManager.element.style.marginLeft);\r\n\r\n\t\t\t\t\tif(left !== headerPos){\r\n\t\t\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\r\n\t\t\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//live update filters as user types\r\n\t\t\t\ttypingTimer = false;\r\n\r\n\t\t\t\tsearchTrigger = function(e){\r\n\t\t\t\t\tif(typingTimer){\r\n\t\t\t\t\t\tclearTimeout(typingTimer);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttypingTimer = setTimeout(function(){\r\n\t\t\t\t\t\tsuccess(editorElement.value);\r\n\t\t\t\t\t},self.table.options.headerFilterLiveFilterDelay);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tcolumn.modules.filter.headerElement = editorElement;\r\n\t\t\t\tcolumn.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\" ;\r\n\t\t\t\tcolumn.modules.filter.tagType = editorElement.tagName.toLowerCase();\r\n\r\n\t\t\t\tif(column.definition.headerFilterLiveFilter !== false){\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!(\r\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'autocomplete' ||\r\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'tickCross' ||\r\n\t\t\t\t\t\t\t((column.definition.editor === 'autocomplete' ||\r\n\t\t\t\t\t\t\t\tcolumn.definition.editor === 'tickCross') &&\r\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === true)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\teditorElement.addEventListener(\"keyup\", searchTrigger);\r\n\t\t\t\t\t\teditorElement.addEventListener(\"search\", searchTrigger);\r\n\r\n\r\n\t\t\t\t\t\t//update number filtered columns on change\r\n\t\t\t\t\t\tif(column.modules.filter.attrType == \"number\"){\r\n\t\t\t\t\t\t\teditorElement.addEventListener(\"change\", function(e){\r\n\t\t\t\t\t\t\t\tsuccess(editorElement.value);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//change text inputs to search inputs to allow for clearing of field\r\n\t\t\t\t\t\tif(column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\"){\r\n\t\t\t\t\t\t\teditorElement.setAttribute(\"type\", \"search\");\r\n\t\t\t\t\t\t// editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//prevent input and select elements from propagating click to column sorters etc\r\n\t\t\t\t\tif(column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\"){\r\n\t\t\t\t\t\teditorElement.addEventListener(\"mousedown\",function(e){\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfilterElement.appendChild(editorElement);\r\n\r\n\t\t\t\tcolumn.contentElement.appendChild(filterElement);\r\n\r\n\t\t\t\tif(!reinitialize){\r\n\t\t\t\t\tself.headerFilterColumns.push(column);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\r\n\t\t}\r\n\t}\r\n\r\n\t//hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\r\n\thideHeaderFilterElements(){\r\n\t\tthis.headerFilterColumns.forEach(function(column){\r\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = 'none';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\r\n\tshowHeaderFilterElements(){\r\n\t\tthis.headerFilterColumns.forEach(function(column){\r\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = '';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//programmatically set focus of header filter\r\n\tsetHeaderFilterFocus(column){\r\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\tcolumn.modules.filter.headerElement.focus();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\r\n\t\t}\r\n\t}\r\n\r\n\t//programmatically get value of header filter\r\n\tgetHeaderFilterValue(column){\r\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\treturn column.modules.filter.value;\r\n\t\t} else {\r\n\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\r\n\t\t}\r\n\t}\r\n\r\n\t//programmatically set value of header filter\r\n\tsetHeaderFilterValue(column, value){\r\n\t\tif (column){\r\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\t\tthis.generateHeaderFilterElement(column, value, true);\r\n\t\t\t\tcolumn.modules.filter.success(value);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treloadHeaderFilter(column){\r\n\t\tif (column){\r\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\t\tthis.generateHeaderFilterElement(column, column.modules.filter.value, true);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trefreshFilter(){\r\n\t\tif(this.tableInitialized){\r\n\t\t\tif(this.table.options.filterMode === \"remote\"){\r\n\t\t\t\tthis.reloadData(null, false, false);\r\n\t\t\t}else{\r\n\t\t\t\tthis.refreshData(true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//TODO - Persist left position of row manager\r\n\t\t// left = this.scrollLeft;\r\n\t\t// this.scrollHorizontal(left);\r\n\t}\r\n\r\n\t//check if the filters has changed since last use\r\n\ttrackChanges(){\r\n\t\tthis.changed = true;\r\n\t\tthis.dispatch(\"filter-changed\");\r\n\t}\r\n\r\n\t//check if the filters has changed since last use\r\n\thasChanged(){\r\n\t\tvar changed = this.changed;\r\n\t\tthis.changed = false;\r\n\t\treturn changed;\r\n\t}\r\n\r\n\t//set standard filters\r\n\tsetFilter(field, type, value, params){\r\n\t\tthis.filterList = [];\r\n\r\n\t\tif(!Array.isArray(field)){\r\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\r\n\t\t}\r\n\r\n\t\tthis.addFilter(field);\r\n\t}\r\n\r\n\t//add filter to array\r\n\taddFilter(field, type, value, params){\r\n\t\tvar changed = false;\r\n\r\n\t\tif(!Array.isArray(field)){\r\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\r\n\t\t}\r\n\r\n\t\tfield.forEach((filter) => {\r\n\t\t\tfilter = this.findFilter(filter);\r\n\r\n\t\t\tif(filter){\r\n\t\t\t\tthis.filterList.push(filter);\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(changed){\r\n\t\t\tthis.trackChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tfindFilter(filter){\r\n\t\tvar column;\r\n\r\n\t\tif(Array.isArray(filter)){\r\n\t\t\treturn this.findSubFilters(filter);\r\n\t\t}\r\n\r\n\t\tvar filterFunc = false;\r\n\r\n\t\tif(typeof filter.field == \"function\"){\r\n\t\t\tfilterFunc = function(data){\r\n\t\t\t\treturn filter.field(data, filter.type || {});// pass params to custom filter function\r\n\t\t\t};\r\n\t\t}else{\r\n\r\n\t\t\tif(Filter.filters[filter.type]){\r\n\r\n\t\t\t\tcolumn = this.table.columnManager.getColumnByField(filter.field);\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\r\n\t\t\t\t\t};\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfilter.func = filterFunc;\r\n\r\n\t\treturn filter.func ? filter : false;\r\n\t}\r\n\r\n\tfindSubFilters(filters){\r\n\t\tvar output = [];\r\n\r\n\t\tfilters.forEach((filter) => {\r\n\t\t\tfilter = this.findFilter(filter);\r\n\r\n\t\t\tif(filter){\r\n\t\t\t\toutput.push(filter);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output.length ? output : false;\r\n\t}\r\n\r\n\t//get all filters\r\n\tgetFilters(all, ajax){\r\n\t\tvar output = [];\r\n\r\n\t\tif(all){\r\n\t\t\toutput = this.getHeaderFilters();\r\n\t\t}\r\n\r\n\t\tif(ajax){\r\n\t\t\toutput.forEach(function(item){\r\n\t\t\t\tif(typeof item.type == \"function\"){\r\n\t\t\t\t\titem.type = \"function\";\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\toutput = output.concat(this.filtersToArray(this.filterList, ajax));\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//filter to Object\r\n\tfiltersToArray(filterList, ajax){\r\n\t\tvar output = [];\r\n\r\n\t\tfilterList.forEach((filter) => {\r\n\t\t\tvar item;\r\n\r\n\t\t\tif(Array.isArray(filter)){\r\n\t\t\t\toutput.push(this.filtersToArray(filter, ajax));\r\n\t\t\t}else{\r\n\t\t\t\titem = {field:filter.field, type:filter.type, value:filter.value};\r\n\r\n\t\t\t\tif(ajax){\r\n\t\t\t\t\tif(typeof item.type == \"function\"){\r\n\t\t\t\t\t\titem.type = \"function\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//get all filters\r\n\tgetHeaderFilters(){\r\n\t\tvar output = [];\r\n\r\n\t\tfor(var key in this.headerFilters){\r\n\t\t\toutput.push({field:key, type:this.headerFilters[key].type, value:this.headerFilters[key].value});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//remove filter from array\r\n\tremoveFilter(field, type, value){\r\n\t\tif(!Array.isArray(field)){\r\n\t\t\tfield = [{field:field, type:type, value:value}];\r\n\t\t}\r\n\r\n\t\tfield.forEach((filter) => {\r\n\t\t\tvar index = -1;\r\n\r\n\t\t\tif(typeof filter.field == \"object\"){\r\n\t\t\t\tindex = this.filterList.findIndex((element) => {\r\n\t\t\t\t\treturn filter === element;\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tindex = this.filterList.findIndex((element) => {\r\n\t\t\t\t\treturn filter.field === element.field && filter.type === element.type  && filter.value === element.value;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.filterList.splice(index, 1);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.trackChanges();\r\n\t}\r\n\r\n\t//clear filters\r\n\tclearFilter(all){\r\n\t\tthis.filterList = [];\r\n\r\n\t\tif(all){\r\n\t\t\tthis.clearHeaderFilter();\r\n\t\t}\r\n\r\n\t\tthis.trackChanges();\r\n\t}\r\n\r\n\t//clear header filters\r\n\tclearHeaderFilter(){\r\n\t\tthis.headerFilters = {};\r\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\r\n\r\n\t\tthis.headerFilterColumns.forEach((column) => {\r\n\t\t\tif(typeof column.modules.filter.value !== \"undefined\"){\r\n\t\t\t\tdelete column.modules.filter.value;\r\n\t\t\t}\r\n\t\t\tcolumn.modules.filter.prevSuccess = undefined;\r\n\t\t\tthis.reloadHeaderFilter(column);\r\n\t\t});\r\n\r\n\t\tthis.trackChanges();\r\n\t}\r\n\r\n\t//search data and return matching rows\r\n\tsearch (searchType, field, type, value){\r\n\t\tvar activeRows = [],\r\n\t\tfilterList = [];\r\n\r\n\t\tif(!Array.isArray(field)){\r\n\t\t\tfield = [{field:field, type:type, value:value}];\r\n\t\t}\r\n\r\n\t\tfield.forEach((filter) => {\r\n\t\t\tfilter = this.findFilter(filter);\r\n\r\n\t\t\tif(filter){\r\n\t\t\t\tfilterList.push(filter);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.table.rowManager.rows.forEach((row) => {\r\n\t\t\tvar match = true;\r\n\r\n\t\t\tfilterList.forEach((filter) => {\r\n\t\t\t\tif(!this.filterRecurse(filter, row.getData())){\r\n\t\t\t\t\tmatch = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(match){\r\n\t\t\t\tactiveRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\treturn activeRows;\r\n\t}\r\n\r\n\t//filter row array\r\n\tfilter(rowList, filters){\r\n\t\tvar activeRows = [],\r\n\t\tactiveRowComponents = [];\r\n\r\n\t\tif(this.subscribedExternal(\"dataFiltering\")){\r\n\t\t\tthis.dispatchExternal(\"dataFiltering\", this.getFilters(true));\r\n\t\t}\r\n\r\n\t\tif(this.table.options.filterMode !== \"remote\" && (this.filterList.length || Object.keys(this.headerFilters).length)){\r\n\r\n\t\t\trowList.forEach((row) => {\r\n\t\t\t\tif(this.filterRow(row)){\r\n\t\t\t\t\tactiveRows.push(row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t}else{\r\n\t\t\tactiveRows = rowList.slice(0);\r\n\t\t}\r\n\r\n\t\tif(this.subscribedExternal(\"dataFiltered\")){\r\n\r\n\t\t\tactiveRows.forEach((row) => {\r\n\t\t\t\tactiveRowComponents.push(row.getComponent());\r\n\t\t\t});\r\n\r\n\t\t\tthis.dispatchExternal(\"dataFiltered\", this.getFilters(true), activeRowComponents);\r\n\t\t}\r\n\r\n\t\treturn activeRows;\r\n\t}\r\n\r\n\t//filter individual row\r\n\tfilterRow(row, filters){\r\n\t\tvar match = true,\r\n\t\tdata = row.getData();\r\n\r\n\t\tthis.filterList.forEach((filter) => {\r\n\t\t\tif(!this.filterRecurse(filter, data)){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tfor(var field in this.headerFilters){\r\n\t\t\tif(!this.headerFilters[field].func(data)){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tfilterRecurse(filter, data){\r\n\t\tvar match = false;\r\n\r\n\t\tif(Array.isArray(filter)){\r\n\t\t\tfilter.forEach((subFilter) => {\r\n\t\t\t\tif(this.filterRecurse(subFilter, data)){\r\n\t\t\t\t\tmatch = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tmatch = filter.func(data);\r\n\t\t}\r\n\r\n\t\treturn match;\r\n\t}\r\n}\r\n\r\nFilter.moduleName = \"filter\";\r\n\r\n//load defaults\r\nFilter.filters = defaultFilters;\r\n\r\nexport default Filter;","export default function(cell, formatterParams, onRendered){\r\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\r\n}","export default function(cell, formatterParams, onRendered){\r\n\treturn cell.getValue();\r\n}","export default function(cell, formatterParams, onRendered){\r\n\tcell.getElement().style.whiteSpace = \"pre-wrap\";\r\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\r\n}","export default function(cell, formatterParams, onRendered){\r\n\tvar floatVal = parseFloat(cell.getValue()),\r\n\tsign = \"\",\r\n\tnumber, integer, decimal, rgx;\r\n\r\n\tvar decimalSym = formatterParams.decimal || \".\";\r\n\tvar thousandSym = formatterParams.thousand || \",\";\r\n\tvar negativeSign = formatterParams.negativeSign || \"-\";\r\n\tvar symbol = formatterParams.symbol || \"\";\r\n\tvar after = !!formatterParams.symbolAfter;\r\n\tvar precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\r\n\r\n\tif(isNaN(floatVal)){\r\n\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\r\n\t}\r\n\r\n\tif(floatVal < 0){\r\n\t\tfloatVal = Math.abs(floatVal);\r\n\t\tsign = negativeSign;\r\n\t}\r\n\r\n\tnumber = precision !== false ? floatVal.toFixed(precision) : floatVal;\r\n\tnumber = String(number).split(\".\");\r\n\r\n\tinteger = number[0];\r\n\tdecimal = number.length > 1 ? decimalSym + number[1] : \"\";\r\n\r\n\tif (formatterParams.thousand !== false) {\r\n\t\trgx = /(\\d+)(\\d{3})/;\r\n\r\n\t\twhile (rgx.test(integer)){\r\n\t\t\tinteger = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\r\n\t\t}\r\n\t}\r\n\r\n\treturn after ? sign + integer + decimal + symbol : sign + symbol + integer + decimal;\r\n}","export default function(cell, formatterParams, onRendered){\r\n\tvar value = cell.getValue(),\r\n\turlPrefix = formatterParams.urlPrefix || \"\",\r\n\tdownload = formatterParams.download,\r\n\tlabel = value,\r\n\tel = document.createElement(\"a\"),\r\n\tdata;\r\n\r\n\tfunction labelTraverse(path, data){\r\n\t\tvar item = path.shift(),\r\n\t\tvalue = data[item];\r\n\t\t\r\n\t\tif(path.length && typeof value === \"object\"){\r\n\t\t\treturn labelTraverse(path, value);\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tif(formatterParams.labelField){\r\n\t\tdata = cell.getData();\r\n\t\tlabel = labelTraverse(formatterParams.labelField.split(this.table.options.nestedFieldSeparator), data);\r\n\t}\r\n\r\n\tif(formatterParams.label){\r\n\t\tswitch(typeof formatterParams.label){\r\n\t\t\tcase \"string\":\r\n\t\t\t\tlabel = formatterParams.label;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\t\tlabel = formatterParams.label(cell);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tif(label){\r\n\t\tif(formatterParams.urlField){\r\n\t\t\tdata = cell.getData();\r\n\t\t\tvalue = data[formatterParams.urlField];\r\n\t\t}\r\n\r\n\t\tif(formatterParams.url){\r\n\t\t\tswitch(typeof formatterParams.url){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\t\tvalue = formatterParams.url;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\t\tvalue = formatterParams.url(cell);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tel.setAttribute(\"href\", urlPrefix + value);\r\n\r\n\t\tif(formatterParams.target){\r\n\t\t\tel.setAttribute(\"target\", formatterParams.target);\r\n\t\t}\r\n\r\n\t\tif(formatterParams.download){\r\n\r\n\t\t\tif(typeof download == \"function\"){\r\n\t\t\t\tdownload = download(cell);\r\n\t\t\t}else{\r\n\t\t\t\tdownload = download === true ? \"\" : download;\r\n\t\t\t}\r\n\r\n\t\t\tel.setAttribute(\"download\", download);\r\n\t\t}\r\n\r\n\t\tel.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\r\n\r\n\t\treturn el;\r\n\t}else{\r\n\t\treturn \"&nbsp;\";\r\n\t}\r\n}","export default function(cell, formatterParams, onRendered){\r\n\tvar el = document.createElement(\"img\"),\r\n\tsrc = cell.getValue();\r\n\r\n\tif(formatterParams.urlPrefix){\r\n\t\tsrc = formatterParams.urlPrefix + cell.getValue();\r\n\t}\r\n\r\n\tif(formatterParams.urlSuffix){\r\n\t\tsrc = src + formatterParams.urlSuffix;\r\n\t}\r\n\r\n\tel.setAttribute(\"src\", src);\r\n\r\n\tswitch(typeof formatterParams.height){\r\n\t\tcase \"number\":\r\n\t\t\tel.style.height = formatterParams.height + \"px\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"string\":\r\n\t\t\tel.style.height = formatterParams.height;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tswitch(typeof formatterParams.width){\r\n\t\tcase \"number\":\r\n\t\t\tel.style.width = formatterParams.width + \"px\";\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"string\":\r\n\t\t\tel.style.width = formatterParams.width;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tel.addEventListener(\"load\", function(){\r\n\t\tcell.getRow().normalizeHeight();\r\n\t});\r\n\r\n\treturn el;\r\n}","export default function(cell, formatterParams, onRendered){\r\n\tvar value = cell.getValue(),\r\n\telement = cell.getElement(),\r\n\tempty = formatterParams.allowEmpty,\r\n\ttruthy = formatterParams.allowTruthy,\r\n\ttrueValueSet = Object.keys(formatterParams).includes(\"trueValue\"),\r\n\ttick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\r\n\tcross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\r\n\r\n\tif((trueValueSet && value === formatterParams.trueValue) || (!trueValueSet && ((truthy && value) || (value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\")))){\r\n\t\telement.setAttribute(\"aria-checked\", true);\r\n\t\treturn tick || \"\";\r\n\t}else{\r\n\t\tif(empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")){\r\n\t\t\telement.setAttribute(\"aria-checked\", \"mixed\");\r\n\t\t\treturn \"\";\r\n\t\t}else{\r\n\t\t\telement.setAttribute(\"aria-checked\", false);\r\n\t\t\treturn cross || \"\";\r\n\t\t}\r\n\t}\r\n}","export default function(cell, formatterParams, onRendered){\r\n\tvar DT = window.DateTime || luxon.DateTime;\r\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\r\n\tvar\toutputFormat = formatterParams.outputFormat || \"dd/MM/yyyy HH:mm:ss\";\r\n\tvar\tinvalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\r\n\tvar value = cell.getValue();\r\n\r\n\tif(typeof DT != \"undefined\"){\r\n\t\tvar newDatetime;\r\n\r\n\t\tif(DT.isDateTime(value)){\r\n\t\t\tnewDatetime = value;\r\n\t\t}else if(inputFormat === \"iso\"){\r\n\t\t\tnewDatetime = DT.fromISO(String(value));\r\n\t\t}else{\r\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\r\n\t\t}\r\n\r\n\t\tif(newDatetime.isValid){\r\n\t\t\tif(formatterParams.timezone){\r\n\t\t\t\tnewDatetime = newDatetime.setZone(formatterParams.timezone);\r\n\t\t\t}\r\n\r\n\t\t\treturn newDatetime.toFormat(outputFormat);\r\n\t\t}else{\r\n\t\t\tif(invalid === true || !value){\r\n\t\t\t\treturn value;\r\n\t\t\t}else if(typeof invalid === \"function\"){\r\n\t\t\t\treturn invalid(value);\r\n\t\t\t}else{\r\n\t\t\t\treturn invalid;\r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tconsole.error(\"Format Error - 'datetime' formatter is dependant on luxon.js\");\r\n\t}\r\n}","export default function (cell, formatterParams, onRendered) {\r\n\tvar DT = window.DateTime || luxon.DateTime;\r\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\r\n\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\r\n\tvar suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\r\n\tvar unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : \"days\";\r\n\tvar humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\r\n\tvar date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : DT.now();\r\n\tvar value = cell.getValue();\r\n\r\n\tif(typeof DT != \"undefined\"){\r\n\t\tvar newDatetime;\r\n\r\n\t\tif(DT.isDateTime(value)){\r\n\t\t\tnewDatetime = value;\r\n\t\t}else if(inputFormat === \"iso\"){\r\n\t\t\tnewDatetime = DT.fromISO(String(value));\r\n\t\t}else{\r\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\r\n\t\t}\r\n\r\n\t\tif (newDatetime.isValid){\r\n\t\t\tif(humanize){\r\n\t\t\t\treturn newDatetime.diff(date, unit).toHuman()  + (suffix ? \" \" + suffix : \"\");\r\n\t\t\t}else{\r\n\t\t\t\treturn parseInt(newDatetime.diff(date, unit)[unit]) + (suffix ? \" \" + suffix : \"\");\r\n\t\t\t}\r\n\t\t} else {\r\n\r\n\t\t\tif (invalid === true) {\r\n\t\t\t\treturn value;\r\n\t\t\t} else if (typeof invalid === \"function\") {\r\n\t\t\t\treturn invalid(value);\r\n\t\t\t} else {\r\n\t\t\t\treturn invalid;\r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tconsole.error(\"Format Error - 'datetimediff' formatter is dependant on luxon.js\");\r\n\t}\r\n}","export default function (cell, formatterParams, onRendered) {\r\n\tvar value = cell.getValue();\r\n\r\n\tif (typeof formatterParams[value] === \"undefined\") {\r\n\t\tconsole.warn('Missing display value for ' + value);\r\n\t\treturn value;\r\n\t}\r\n\r\n\treturn formatterParams[value];\r\n}","export default function(cell, formatterParams, onRendered){\r\n\tvar value = cell.getValue(),\r\n\telement = cell.getElement(),\r\n\tmaxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\r\n\tstars = document.createElement(\"span\"),\r\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\r\n\tstarActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\r\n\tstarInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\r\n\r\n\t//style stars holder\r\n\tstars.style.verticalAlign = \"middle\";\r\n\r\n\t//style star\r\n\tstar.setAttribute(\"width\", \"14\");\r\n\tstar.setAttribute(\"height\", \"14\");\r\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\r\n\tstar.setAttribute(\"xml:space\", \"preserve\");\r\n\tstar.style.padding = \"0 1px\";\r\n\r\n\tvalue = value && !isNaN(value) ? parseInt(value) : 0;\r\n\r\n\tvalue = Math.max(0, Math.min(value, maxStars));\r\n\r\n\tfor(var i=1;i<= maxStars;i++){\r\n\t\tvar nextStar = star.cloneNode(true);\r\n\t\tnextStar.innerHTML = i <= value ? starActive : starInactive;\r\n\r\n\t\tstars.appendChild(nextStar);\r\n\t}\r\n\r\n\telement.style.whiteSpace = \"nowrap\";\r\n\telement.style.overflow = \"hidden\";\r\n\telement.style.textOverflow = \"ellipsis\";\r\n\r\n\telement.setAttribute(\"aria-label\", value);\r\n\r\n\treturn stars;\r\n}","export default function(cell, formatterParams, onRendered){\r\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\r\n\tel = document.createElement(\"span\"),\r\n\tmax = formatterParams && formatterParams.max ? formatterParams.max : 100,\r\n\tmin = formatterParams && formatterParams.min ? formatterParams.min : 0,\r\n\tcolors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\r\n\tcolor = \"#666666\",\r\n\tpercent, percentValue;\r\n\r\n\tif(isNaN(value) || typeof cell.getValue() === \"undefined\"){\r\n\t\treturn;\r\n\t}\r\n\r\n\tel.classList.add(\"tabulator-traffic-light\");\r\n\r\n\t//make sure value is in range\r\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\r\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\r\n\r\n\t//workout percentage\r\n\tpercent = (max - min) / 100;\r\n\tpercentValue = Math.round((percentValue - min) / percent);\r\n\r\n\t//set color\r\n\tswitch(typeof colors){\r\n\t\tcase \"string\":\r\n\t\t\tcolor = colors;\r\n\t\t\tbreak;\r\n\t\tcase \"function\":\r\n\t\t\tcolor = colors(value);\r\n\t\t\tbreak;\r\n\t\tcase \"object\":\r\n\t\t\tif(Array.isArray(colors)){\r\n\t\t\t\tvar unit = 100 / colors.length;\r\n\t\t\t\tvar index = Math.floor(percentValue / unit);\r\n\r\n\t\t\t\tindex = Math.min(index, colors.length - 1);\r\n\t\t\t\tindex = Math.max(index, 0);\r\n\t\t\t\tcolor = colors[index];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t}\r\n\r\n\tel.style.backgroundColor = color;\r\n\r\n\treturn el;\r\n}","import CellComponent from '../../../../core/cell/CellComponent.js';\r\n\r\nexport default function(cell, formatterParams = {}, onRendered){ //progress bar\r\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\r\n\telement = cell.getElement(),\r\n\tmax = formatterParams.max ? formatterParams.max : 100,\r\n\tmin = formatterParams.min ? formatterParams.min : 0,\r\n\tlegendAlign = formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\r\n\tpercent, percentValue, color, legend, legendColor;\r\n\r\n\t//make sure value is in range\r\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\r\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\r\n\r\n\t//workout percentage\r\n\tpercent = (max - min) / 100;\r\n\tpercentValue = Math.round((percentValue - min) / percent);\r\n\r\n\t//set bar color\r\n\tswitch(typeof formatterParams.color){\r\n\t\tcase \"string\":\r\n\t\t\tcolor = formatterParams.color;\r\n\t\t\tbreak;\r\n\t\tcase \"function\":\r\n\t\t\tcolor = formatterParams.color(value);\r\n\t\t\tbreak;\r\n\t\tcase \"object\":\r\n\t\t\tif(Array.isArray(formatterParams.color)){\r\n\t\t\t\tlet unit = 100 / formatterParams.color.length;\r\n\t\t\t\tlet index = Math.floor(percentValue / unit);\r\n\r\n\t\t\t\tindex = Math.min(index, formatterParams.color.length - 1);\r\n\t\t\t\tindex = Math.max(index, 0);\r\n\t\t\t\tcolor = formatterParams.color[index];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\tcolor = \"#2DC214\";\r\n\t}\r\n\r\n\t//generate legend\r\n\tswitch(typeof formatterParams.legend){\r\n\t\tcase \"string\":\r\n\t\t\tlegend = formatterParams.legend;\r\n\t\t\tbreak;\r\n\t\tcase \"function\":\r\n\t\t\tlegend = formatterParams.legend(value);\r\n\t\t\tbreak;\r\n\t\tcase \"boolean\":\r\n\t\t\tlegend = value;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tlegend = false;\r\n\t}\r\n\r\n\t//set legend color\r\n\tswitch(typeof formatterParams.legendColor){\r\n\t\tcase \"string\":\r\n\t\t\tlegendColor = formatterParams.legendColor;\r\n\t\t\tbreak;\r\n\t\tcase \"function\":\r\n\t\t\tlegendColor = formatterParams.legendColor(value);\r\n\t\t\tbreak;\r\n\t\tcase \"object\":\r\n\t\t\tif(Array.isArray(formatterParams.legendColor)){\r\n\t\t\t\tlet unit = 100 / formatterParams.legendColor.length;\r\n\t\t\t\tlet index = Math.floor(percentValue / unit);\r\n\r\n\t\t\t\tindex = Math.min(index, formatterParams.legendColor.length - 1);\r\n\t\t\t\tindex = Math.max(index, 0);\r\n\t\t\t\tlegendColor = formatterParams.legendColor[index];\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tlegendColor = \"#000\";\r\n\t}\r\n\r\n\telement.style.minWidth = \"30px\";\r\n\telement.style.position = \"relative\";\r\n\r\n\telement.setAttribute(\"aria-label\", percentValue);\r\n\r\n\tvar barEl = document.createElement(\"div\");\r\n\tbarEl.style.display = \"inline-block\";\r\n\tbarEl.style.width = percentValue + \"%\";\r\n\tbarEl.style.backgroundColor = color;\r\n\tbarEl.style.height = \"100%\";\r\n\r\n\tbarEl.setAttribute('data-max', max);\r\n\tbarEl.setAttribute('data-min', min);\r\n\r\n\tvar barContainer = document.createElement(\"div\");\r\n\tbarContainer.style.position = \"relative\";\r\n\tbarContainer.style.width = \"100%\";\r\n\tbarContainer.style.height = \"100%\";\r\n\r\n\tif(legend){\r\n\t\tvar legendEl = document.createElement(\"div\");\r\n\t\tlegendEl.style.position = \"absolute\";\r\n\t\tlegendEl.style.top = 0;\r\n\t\tlegendEl.style.left = 0;\r\n\t\tlegendEl.style.textAlign = legendAlign;\r\n\t\tlegendEl.style.width = \"100%\";\r\n\t\tlegendEl.style.color = legendColor;\r\n\t\tlegendEl.innerHTML = legend;\r\n\t}\r\n\r\n\tonRendered(function(){\r\n\r\n\t\t//handle custom element needed if formatter is to be included in printed/downloaded output\r\n\t\tif(!(cell instanceof CellComponent)){\r\n\t\t\tvar holderEl = document.createElement(\"div\");\r\n\t\t\tholderEl.style.position = \"absolute\";\r\n\t\t\tholderEl.style.top = \"4px\";\r\n\t\t\tholderEl.style.bottom = \"4px\";\r\n\t\t\tholderEl.style.left = \"4px\";\r\n\t\t\tholderEl.style.right = \"4px\";\r\n\r\n\t\t\telement.appendChild(holderEl);\r\n\r\n\t\t\telement = holderEl;\r\n\t\t}\r\n\r\n\t\telement.appendChild(barContainer);\r\n\t\tbarContainer.appendChild(barEl);\r\n\r\n\t\tif(legend){\r\n\t\t\tbarContainer.appendChild(legendEl);\r\n\t\t}\r\n\t});\r\n\r\n\treturn \"\";\r\n}","export default function(cell, formatterParams, onRendered){\r\n\tcell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\r\n\treturn \"\";\r\n}","export default function(cell, formatterParams, onRendered){\r\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\r\n}","export default function(cell, formatterParams, onRendered){\r\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\r\n}","export default function(cell, formatterParams, onRendered){\r\n\tvar content = document.createElement(\"span\");\r\n\tvar row = cell.getRow();\r\n\r\n\trow.watchPosition((position) => {\r\n\t\tcontent.innerText = position;\r\n\t});\r\n\t\r\n\treturn content;\r\n}","export default function(cell, formatterParams, onRendered){\r\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\r\n\treturn \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\r\n}","export default function(cell, formatterParams, onRendered){\r\n\tvar el = document.createElement(\"div\"),\r\n\tconfig = cell.getRow()._row.modules.responsiveLayout;\r\n\r\n\tel.classList.add(\"tabulator-responsive-collapse-toggle\");\r\n\tel.innerHTML = \"<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>\";\r\n\r\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\r\n\r\n\tfunction toggleList(isOpen){\r\n\t\tvar collapseEl = config.element;\r\n\r\n\t\tconfig.open = isOpen;\r\n\r\n\t\tif(collapseEl){\r\n\r\n\t\t\tif(config.open){\r\n\t\t\t\tel.classList.add(\"open\");\r\n\t\t\t\tcollapseEl.style.display = '';\r\n\t\t\t}else{\r\n\t\t\t\tel.classList.remove(\"open\");\r\n\t\t\t\tcollapseEl.style.display = 'none';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tel.addEventListener(\"click\", function(e){\r\n\t\te.stopImmediatePropagation();\r\n\t\ttoggleList(!config.open);\r\n\t\tcell.getTable().rowManager.adjustTableSize();\r\n\t});\r\n\r\n\ttoggleList(config.open);\r\n\r\n\treturn el;\r\n}","import RowComponent from '../../../../core/row/RowComponent.js';\r\n\r\nexport default function(cell, formatterParams, onRendered){\r\n\tvar checkbox = document.createElement(\"input\");\r\n\tvar blocked = false;\r\n\r\n\tcheckbox.type = 'checkbox';\r\n\r\n\tcheckbox.setAttribute(\"aria-label\", \"Select Row\");\r\n\t\r\n\tif(this.table.modExists(\"selectRow\", true)){\r\n\r\n\t\tcheckbox.addEventListener(\"click\", (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\tif(typeof cell.getRow == 'function'){\r\n\t\t\tvar row = cell.getRow();\r\n\r\n\t\t\tif(row instanceof RowComponent){\r\n\r\n\t\t\t\tcheckbox.addEventListener(\"change\", (e) => {\r\n\t\t\t\t\tif(this.table.options.selectableRangeMode === \"click\"){\r\n\t\t\t\t\t\tif(!blocked){\r\n\t\t\t\t\t\t\trow.toggleSelect();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tblocked = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trow.toggleSelect();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.table.options.selectableRangeMode === \"click\"){\r\n\t\t\t\t\tcheckbox.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\t\tblocked = true;\r\n\t\t\t\t\t\tthis.table.modules.selectRow.handleComplexRowClick(row._row, e);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcheckbox.checked = row.isSelected && row.isSelected();\r\n\t\t\t\tthis.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\r\n\t\t\t}else{\r\n\t\t\t\tcheckbox = \"\";\r\n\t\t\t}\r\n\t\t}else {\r\n\t\t\tcheckbox.addEventListener(\"change\", (e) => {\r\n\t\t\t\tif(this.table.modules.selectRow.selectedRows.length){\r\n\t\t\t\t\tthis.table.deselectRow();\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.table.selectRow(formatterParams.rowRange);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\r\n\t\t}\r\n\t}\r\n\r\n\treturn checkbox;\r\n}","import plaintext from './formatters/plaintext.js';\r\nimport html from './formatters/html.js';\r\nimport textarea from './formatters/textarea.js';\r\nimport money from './formatters/money.js';\r\nimport link from './formatters/link.js';\r\nimport image from './formatters/image.js';\r\nimport tickCross from './formatters/tickCross.js';\r\nimport datetime from './formatters/datetime.js';\r\nimport datetimediff from './formatters/datetimediff.js';\r\nimport lookup from './formatters/lookup.js';\r\nimport star from './formatters/star.js';\r\nimport traffic from './formatters/traffic.js';\r\nimport progress from './formatters/progress.js';\r\nimport color from './formatters/color.js';\r\nimport buttonTick from './formatters/buttonTick.js';\r\nimport buttonCross from './formatters/buttonCross.js';\r\nimport rownum from './formatters/rownum.js';\r\nimport handle from './formatters/handle.js';\r\nimport responsiveCollapse from './formatters/responsiveCollapse.js';\r\nimport rowSelection from './formatters/rowSelection.js';\r\n\r\nexport default {\r\n\tplaintext:plaintext,\r\n\thtml:html,\r\n\ttextarea:textarea,\r\n\tmoney:money,\r\n\tlink:link,\r\n\timage:image,\r\n\ttickCross:tickCross,\r\n\tdatetime:datetime,\r\n\tdatetimediff:datetimediff,\r\n\tlookup:lookup,\r\n\tstar:star,\r\n\ttraffic:traffic,\r\n\tprogress:progress,\r\n\tcolor:color,\r\n\tbuttonTick:buttonTick,\r\n\tbuttonCross:buttonCross,\r\n\trownum:rownum,\r\n\thandle:handle,\r\n\tresponsiveCollapse:responsiveCollapse,\r\n\trowSelection:rowSelection,\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultFormatters from './defaults/formatters.js';\r\n\r\nclass Format extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.registerColumnOption(\"formatter\");\r\n\t\tthis.registerColumnOption(\"formatterParams\");\r\n\r\n\t\tthis.registerColumnOption(\"formatterPrint\");\r\n\t\tthis.registerColumnOption(\"formatterPrintParams\");\r\n\t\tthis.registerColumnOption(\"formatterClipboard\");\r\n\t\tthis.registerColumnOption(\"formatterClipboardParams\");\r\n\t\tthis.registerColumnOption(\"formatterHtmlOutput\");\r\n\t\tthis.registerColumnOption(\"formatterHtmlOutputParams\");\r\n\t\tthis.registerColumnOption(\"titleFormatter\");\r\n\t\tthis.registerColumnOption(\"titleFormatterParams\");\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"cell-format\", this.formatValue.bind(this));\r\n\t\tthis.subscribe(\"cell-rendered\", this.cellRendered.bind(this));\r\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\r\n\t\tthis.subscribe(\"column-format\", this.formatHeader.bind(this));\r\n\t}\r\n\r\n\t//initialize column formatter\r\n\tinitializeColumn(column){\r\n\t\tcolumn.modules.format = this.lookupFormatter(column, \"\");\r\n\r\n\t\tif(typeof column.definition.formatterPrint !== \"undefined\"){\r\n\t\t\tcolumn.modules.format.print = this.lookupFormatter(column, \"Print\");\r\n\t\t}\r\n\r\n\t\tif(typeof column.definition.formatterClipboard !== \"undefined\"){\r\n\t\t\tcolumn.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\r\n\t\t}\r\n\r\n\t\tif(typeof column.definition.formatterHtmlOutput !== \"undefined\"){\r\n\t\t\tcolumn.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\r\n\t\t}\r\n\t}\r\n\r\n\tlookupFormatter(column, type){\r\n\t\tvar config = {params:column.definition[\"formatter\" + type + \"Params\"] || {}},\r\n\t\tformatter = column.definition[\"formatter\" + type];\r\n\r\n\t\t//set column formatter\r\n\t\tswitch(typeof formatter){\r\n\t\t\tcase \"string\":\r\n\t\t\t\tif(Format.formatters[formatter]){\r\n\t\t\t\t\tconfig.formatter = Format.formatters[formatter];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\r\n\t\t\t\t\tconfig.formatter = Format.formatters.plaintext;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\t\tconfig.formatter = formatter;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tconfig.formatter = Format.formatters.plaintext;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn config;\r\n\t}\r\n\r\n\tcellRendered(cell){\r\n\t\tif(cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered){\r\n\t\t\tcell.modules.format.renderedCallback();\r\n\t\t\tcell.modules.format.rendered = true;\r\n\t\t}\r\n\t}\r\n\r\n\t//return a formatted value for a column header\r\n\tformatHeader(column, title, el){\r\n\t\tvar formatter, params, onRendered, mockCell;\r\n\r\n\t\tif(column.definition.titleFormatter){\r\n\t\t\tformatter = this.getFormatter(column.definition.titleFormatter);\r\n\r\n\t\t\tonRendered = (callback) => {\r\n\t\t\t\tcolumn.titleFormatterRendered = callback;\r\n\t\t\t};\r\n\r\n\t\t\tmockCell = {\r\n\t\t\t\tgetValue:function(){\r\n\t\t\t\t\treturn title;\r\n\t\t\t\t},\r\n\t\t\t\tgetElement:function(){\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tparams = column.definition.titleFormatterParams || {};\r\n\r\n\t\t\tparams = typeof params === \"function\" ? params() : params;\r\n\r\n\t\t\treturn formatter.call(this, mockCell, params, onRendered);\r\n\t\t}else{\r\n\t\t\treturn title;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t//return a formatted value for a cell\r\n\tformatValue(cell){\r\n\t\tvar component = cell.getComponent(),\r\n\t\tparams = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\r\n\r\n\t\tfunction onRendered(callback){\r\n\t\t\tif(!cell.modules.format){\r\n\t\t\t\tcell.modules.format = {};\r\n\t\t\t}\r\n\r\n\t\t\tcell.modules.format.renderedCallback = callback;\r\n\t\t\tcell.modules.format.rendered = false;\r\n\t\t}\r\n\r\n\t\treturn cell.column.modules.format.formatter.call(this, component, params, onRendered);\r\n\t}\r\n\r\n\tformatExportValue(cell, type){\r\n\t\tvar formatter = cell.column.modules.format[type],\r\n\t\tparams;\r\n\r\n\t\tif(formatter){\r\n\t\t\tparams = typeof formatter.params === \"function\" ? formatter.params(cell.getComponent()) : formatter.params;\r\n\r\n\t\t\tfunction onRendered(callback){\r\n\t\t\t\tif(!cell.modules.format){\r\n\t\t\t\t\tcell.modules.format = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcell.modules.format.renderedCallback = callback;\r\n\t\t\t\tcell.modules.format.rendered = false;\r\n\t\t\t}\r\n\r\n\t\t\treturn formatter.formatter.call(this, cell.getComponent(), params, onRendered);\r\n\r\n\t\t}else{\r\n\t\t\treturn this.formatValue(cell);\r\n\t\t}\r\n\t}\r\n\r\n\tsanitizeHTML(value){\r\n\t\tif(value){\r\n\t\t\tvar entityMap = {\r\n\t\t\t\t'&': '&amp;',\r\n\t\t\t\t'<': '&lt;',\r\n\t\t\t\t'>': '&gt;',\r\n\t\t\t\t'\"': '&quot;',\r\n\t\t\t\t\"'\": '&#39;',\r\n\t\t\t\t'/': '&#x2F;',\r\n\t\t\t\t'`': '&#x60;',\r\n\t\t\t\t'=': '&#x3D;'\r\n\t\t\t};\r\n\r\n\t\t\treturn String(value).replace(/[&<>\"'`=/]/g, function (s) {\r\n\t\t\t\treturn entityMap[s];\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n\temptyToSpace(value){\r\n\t\treturn value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\r\n\t}\r\n\r\n\t//get formatter for cell\r\n\tgetFormatter(formatter){\r\n\t\tswitch(typeof formatter){\r\n\t\t\tcase \"string\":\r\n\t\t\t\tif(Format.formatters[formatter]){\r\n\t\t\t\t\tformatter = Format.formatters[formatter];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\r\n\t\t\t\t\tformatter = Format.formatters.plaintext;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\t\t//Custom formatter Function, do nothing\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tformatter = Format.formatters.plaintext;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn formatter;\r\n\t}\r\n}\r\n\r\nFormat.moduleName = \"format\";\r\n\r\n//load defaults\r\nFormat.formatters = defaultFormatters;\r\n\r\nexport default Format;","import Module from '../../core/Module.js';\r\n\r\nclass FrozenColumns extends Module{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.leftColumns = [];\r\n\t\tthis.rightColumns = [];\r\n\t\tthis.leftMargin = 0;\r\n\t\tthis.rightMargin = 0;\r\n\t\tthis.rightPadding = 0;\r\n\t\tthis.initializationMode = \"left\";\r\n\t\tthis.active = false;\r\n\t\tthis.blocked = true;\r\n\t\t\r\n\t\tthis.registerColumnOption(\"frozen\");\r\n\t}\r\n\t\r\n\t//reset initial state\r\n\treset(){\r\n\t\tthis.initializationMode = \"left\";\r\n\t\tthis.leftColumns = [];\r\n\t\tthis.rightColumns = [];\r\n\t\tthis.leftMargin = 0;\r\n\t\tthis.rightMargin = 0;\r\n\t\tthis.rightMargin = 0;\r\n\t\tthis.active = false;\r\n\t\t\r\n\t\tthis.table.columnManager.headersElement.style.marginLeft = 0;\r\n\t\tthis.table.columnManager.element.style.paddingRight = 0;\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"cell-layout\", this.layoutCell.bind(this));\r\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\r\n\t\tthis.subscribe(\"column-width\", this.layout.bind(this));\r\n\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\r\n\t\tthis.subscribe(\"table-layout\", this.layout.bind(this));\r\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\r\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\r\n\t\tthis.subscribe(\"columns-loading\", this.reset.bind(this));\r\n\t\t\r\n\t\tthis.subscribe(\"column-add\", this.reinitializeColumns.bind(this));\r\n\t\tthis.subscribe(\"column-delete\", this.reinitializeColumns.bind(this));\r\n\t\t\r\n\t\tthis.subscribe(\"table-redraw\", this.layout.bind(this));\r\n\t\tthis.subscribe(\"layout-refreshing\", this.blockLayout.bind(this));\r\n\t\tthis.subscribe(\"layout-refreshed\", this.unblockLayout.bind(this));\r\n\t}\r\n\t\r\n\tblockLayout(){\r\n\t\tthis.blocked = true;\r\n\t}\r\n\t\r\n\tunblockLayout(){\r\n\t\tthis.blocked = false;\r\n\t}\r\n\t\r\n\tlayoutCell(cell){\r\n\t\tthis.layoutElement(cell.element, cell.column);\r\n\t}\r\n\t\r\n\treinitializeColumns(){\r\n\t\tthis.reset();\r\n\t\t\r\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\t\t\tthis.initializeColumn(column);\r\n\t\t});\r\n\t}\r\n\t\r\n\t//initialize specific column\r\n\tinitializeColumn(column){\r\n\t\tvar config = {margin:0, edge:false};\r\n\t\t\r\n\t\tif(!column.isGroup){\r\n\t\t\t\r\n\t\t\tif(this.frozenCheck(column)){\r\n\t\t\t\t\r\n\t\t\t\tconfig.position = this.initializationMode;\r\n\t\t\t\t\r\n\t\t\t\tif(this.initializationMode == \"left\"){\r\n\t\t\t\t\tthis.leftColumns.push(column);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.rightColumns.unshift(column);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.active = true;\r\n\t\t\t\t\r\n\t\t\t\tcolumn.modules.frozen = config;\r\n\t\t\t}else{\r\n\t\t\t\tthis.initializationMode = \"right\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfrozenCheck(column){\r\n\t\tif(column.parent.isGroup && column.definition.frozen){\r\n\t\t\tconsole.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\r\n\t\t}\r\n\t\t\r\n\t\tif(column.parent.isGroup){\r\n\t\t\treturn this.frozenCheck(column.parent);\r\n\t\t}else{\r\n\t\t\treturn column.definition.frozen;\r\n\t\t}\r\n\t}\r\n\t\r\n\t//quick layout to smooth horizontal scrolling\r\n\tscrollHorizontal(){\t\r\n\t\tif(this.active){\t\t\r\n\t\t\tthis.calcMargins(true);\r\n\t\t\t\r\n\t\t\tthis.layoutColumnPosition();\r\n\t\t\t\r\n\t\t\tthis.layoutCalcRows();\r\n\t\t\t\r\n\t\t\tthis.reinitializeRows();\r\n\t\t}\r\n\t}\r\n\t\r\n\t//calculate margins for rows\r\n\tcalcMargins(scroll){\r\n\t\t\r\n\t\tif(!scroll){\r\n\t\t\tthis.leftMargin = this._calcSpace(this.leftColumns, this.leftColumns.length) + \"px\";\t\t\t\r\n\t\t\tthis.rightMargin = this._calcSpace(this.rightColumns, this.rightColumns.length) + \"px\";\t\r\n\t\t\tthis.table.rowManager.tableElement.style.marginRight = this.rightMargin;\r\n\t\t}\r\n\t\t\r\n\t\t//calculate right frozen columns\r\n\t\tthis.rightPadding = this.table.rowManager.element.clientWidth + this.table.columnManager.scrollLeft;\r\n\t}\r\n\t\r\n\t//layout calculation rows\r\n\tlayoutCalcRows(){\r\n\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\tif(this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow){\r\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.topRow);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow){\r\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.botRow);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(this.table.modExists(\"groupRows\")){\r\n\t\t\t\tthis.layoutGroupCalcs(this.table.modules.groupRows.getGroups());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tlayoutGroupCalcs(groups){\r\n\t\tgroups.forEach((group) => {\r\n\t\t\tif(group.calcs.top){\r\n\t\t\t\tthis.layoutRow(group.calcs.top);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(group.calcs.bottom){\r\n\t\t\t\tthis.layoutRow(group.calcs.bottom);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(group.groupList && group.groupList.length){\r\n\t\t\t\tthis.layoutGroupCalcs(group.groupList);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t//calculate column positions and layout headers\r\n\tlayoutColumnPosition(allCells){\r\n\t\tvar leftParents = [];\r\n\t\t\r\n\t\tvar leftMargin = 0;\r\n\t\tvar rightMargin = 0;\r\n\t\t\r\n\t\tthis.table.columnManager.headersElement.style.marginLeft = this.leftMargin;\r\n\t\tthis.table.columnManager.element.style.paddingRight = this.rightMargin;\r\n\t\t\r\n\t\tthis.leftColumns.forEach((column, i) => {\t\r\n\t\t\tcolumn.modules.frozen.marginValue = leftMargin + this.table.columnManager.scrollLeft;\r\n\t\t\tcolumn.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\r\n\t\t\t\r\n\t\t\tif(column.visible){\r\n\t\t\t\tleftMargin += column.getWidth();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(i == this.leftColumns.length - 1){\r\n\t\t\t\tcolumn.modules.frozen.edge = true;\r\n\t\t\t}else{\r\n\t\t\t\tcolumn.modules.frozen.edge = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(column.parent.isGroup){\r\n\t\t\t\tvar parentEl = this.getColGroupParentElement(column);\r\n\t\t\t\tif(!leftParents.includes(parentEl)){\r\n\t\t\t\t\tthis.layoutElement(parentEl, column);\r\n\t\t\t\t\tleftParents.push(parentEl);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(column.modules.frozen.edge){\r\n\t\t\t\t\tparentEl.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.layoutElement(column.getElement(), column);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(allCells){\r\n\t\t\t\tcolumn.cells.forEach((cell) => {\r\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tthis.rightColumns.forEach((column, i) => {\r\n\t\t\t\r\n\t\t\tif(column.visible){\r\n\t\t\t\trightMargin += column.getWidth();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcolumn.modules.frozen.marginValue = this.rightPadding - rightMargin;\r\n\t\t\tcolumn.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\r\n\t\t\t\r\n\t\t\tif(i == this.rightColumns.length - 1){\r\n\t\t\t\tcolumn.modules.frozen.edge = true;\r\n\t\t\t}else{\r\n\t\t\t\tcolumn.modules.frozen.edge = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif(column.parent.isGroup){\r\n\t\t\t\tthis.layoutElement(this.getColGroupParentElement(column), column);\r\n\t\t\t}else{\r\n\t\t\t\tthis.layoutElement(column.getElement(), column);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(allCells){\r\n\t\t\t\tcolumn.cells.forEach((cell) => {\r\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tgetColGroupParentElement(column){\r\n\t\treturn column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\r\n\t}\r\n\t\r\n\t//layout columns appropriately\r\n\tlayout(){\t\r\n\t\tif(this.active && !this.blocked){\r\n\t\t\t//calculate row padding\r\n\t\t\tthis.calcMargins();\r\n\t\t\t\r\n\t\t\t//calculate left columns\r\n\t\t\tthis.layoutColumnPosition();\r\n\r\n\t\t\tthis.reinitializeRows();\r\n\t\t\t\r\n\t\t\tthis.layoutCalcRows();\r\n\t\t}\r\n\t}\r\n\t\r\n\treinitializeRows(){\r\n\t\tvar visibleRows = this.table.rowManager.getVisibleRows(true);\r\n\t\tvar otherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\r\n\t\t\r\n\t\totherRows.forEach((row) =>{\r\n\t\t\trow.deinitialize();\r\n\t\t});\r\n\t\t\r\n\t\tvisibleRows.forEach((row) =>{\r\n\t\t\tif(row.type === \"row\"){\r\n\t\t\t\tthis.layoutRow(row);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tlayoutRow(row){\r\n\t\t// console.trace(\"row\")\r\n\t\tvar rowEl = row.getElement();\r\n\t\t\r\n\t\trowEl.style.paddingLeft = this.leftMargin;\r\n\t\t\r\n\t\tif(this.table.options.layout === \"fitDataFill\" && this.rightColumns.length){\r\n\t\t\tthis.table.rowManager.getTableElement().style.minWidth = \"calc(100% - \" + this.rightMargin + \")\";\r\n\t\t}\r\n\t\t\r\n\t\tthis.leftColumns.forEach((column) => {\r\n\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\r\n\t\t\tif(cell){\r\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tthis.rightColumns.forEach((column) => {\r\n\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\r\n\t\t\tif(cell){\r\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tlayoutElement(element, column){\r\n\t\t\r\n\t\tif(column.modules.frozen){\r\n\t\t\telement.style.position = \"absolute\";\r\n\t\t\telement.style.left = column.modules.frozen.margin;\r\n\t\t\t\r\n\t\t\telement.classList.add(\"tabulator-frozen\");\r\n\t\t\t\r\n\t\t\tif(column.modules.frozen.edge){\r\n\t\t\t\telement.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t_calcSpace(columns, index){\r\n\t\tvar width = 0;\r\n\t\t\r\n\t\tfor (let i = 0; i < index; i++){\r\n\t\t\tif(columns[i].visible){\r\n\t\t\t\twidth += columns[i].getWidth();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn width;\r\n\t}\r\n}\r\n\r\nFrozenColumns.moduleName = \"frozenColumns\";\r\n\r\nexport default FrozenColumns;","import Module from '../../core/Module.js';\r\n\r\nclass FrozenRows extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.topElement = document.createElement(\"div\");\r\n\t\tthis.rows = [];\r\n\r\n\t\t//register component functions\r\n\t\tthis.registerComponentFunction(\"row\", \"freeze\", this.freezeRow.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"unfreeze\", this.unfreezeRow.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"isFrozen\", this.isRowFrozen.bind(this));\r\n\r\n\t\t//register table options\r\n\t\tthis.registerTableOption(\"frozenRowsField\", \"id\"); //field to choose frozen rows by\r\n\t\tthis.registerTableOption(\"frozenRows\", false); //holder for frozen row identifiers\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.rows = [];\r\n\r\n\t\tthis.topElement.classList.add(\"tabulator-frozen-rows-holder\");\r\n\r\n\t\t// this.table.columnManager.element.append(this.topElement);\r\n\t\tthis.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\r\n\r\n\t\tthis.subscribe(\"row-deleting\", this.detachRow.bind(this));\r\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\r\n\r\n\t\tthis.registerDisplayHandler(this.getRows.bind(this), 10);\r\n\r\n\t\tif(this.table.options.frozenRows){\r\n\t\t\tthis.subscribe(\"data-processed\", this.initializeRows.bind(this));\r\n\t\t\tthis.subscribe(\"row-added\", this.initializeRow.bind(this));\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeRows(){\r\n\t\tthis.table.rowManager.getRows().forEach((row) => {\r\n\t\t\tthis.initializeRow(row);\r\n\t\t});\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar frozenRows = this.table.options.frozenRows,\r\n\t\trowType = typeof frozenRows;\r\n\r\n\t\tif(rowType === \"number\"){\r\n\t\t\tif(row.getPosition() && (row.getPosition() + this.rows.length) <= frozenRows){\r\n\t\t\t\tthis.freezeRow(row);\r\n\t\t\t}\r\n\t\t}else if(rowType === \"function\"){\r\n\t\t\tif(frozenRows.call(this.table, row.getComponent())){\r\n\t\t\t\tthis.freezeRow(row);\r\n\t\t\t}\r\n\t\t}else if(Array.isArray(frozenRows)){\r\n\t\t\tif(frozenRows.includes(row.data[this.options(\"frozenRowsField\")])){\r\n\t\t\t\tthis.freezeRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tisRowFrozen(row){\r\n\t\tvar index = this.rows.indexOf(row);\r\n\t\treturn index > -1;\r\n\t}\r\n\r\n\tisFrozen(){\r\n\t\treturn !!this.rows.length;\r\n\t}\r\n\r\n\tvisibleRows(viewable, rows){\r\n\t\tthis.rows.forEach((row) => {\r\n\t\t\trows.push(row);\r\n\t\t});\r\n\r\n\t\treturn rows;\r\n\t}\r\n\r\n\t//filter frozen rows out of display data\r\n\tgetRows(rows){\r\n\t\tvar output = rows.slice(0);\r\n\r\n\t\tthis.rows.forEach(function(row){\r\n\t\t\tvar index = output.indexOf(row);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\toutput.splice(index, 1);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tfreezeRow(row){\r\n\t\tif(!row.modules.frozen){\r\n\t\t\trow.modules.frozen = true;\r\n\t\t\tthis.topElement.appendChild(row.getElement());\r\n\t\t\trow.initialize();\r\n\t\t\trow.normalizeHeight();\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\r\n\t\t\tthis.rows.push(row);\r\n\r\n\t\t\tthis.refreshData(false, \"display\");\r\n\r\n\t\t\tthis.styleRows();\r\n\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Freeze Error - Row is already frozen\");\r\n\t\t}\r\n\t}\r\n\r\n\tunfreezeRow(row){\r\n\t\tif(row.modules.frozen){\r\n\r\n\t\t\trow.modules.frozen = false;\r\n\r\n\t\t\tthis.detachRow(row);\r\n\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\r\n\t\t\tthis.refreshData(false, \"display\");\r\n\r\n\t\t\tif(this.rows.length){\r\n\t\t\t\tthis.styleRows();\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Freeze Error - Row is already unfrozen\");\r\n\t\t}\r\n\t}\r\n\r\n\tdetachRow(row){\r\n\t\tvar index = this.rows.indexOf(row);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tvar rowEl = row.getElement();\r\n\r\n\t\t\tif(rowEl.parentNode){\r\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\t\t\t}\r\n\r\n\t\t\tthis.rows.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tstyleRows(row){\r\n\t\tthis.rows.forEach((row, i) => {\r\n\t\t\tthis.table.rowManager.styleRow(row, i);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nFrozenRows.moduleName = \"frozenRows\";\r\n\r\nexport default FrozenRows;","//public group object\r\nclass GroupComponent {\r\n\tconstructor (group){\r\n\t\tthis._group = group;\r\n\t\tthis.type = \"GroupComponent\";\r\n\r\n\t\treturn new Proxy(this, {\r\n\t\t\tget: function(target, name, receiver) {\r\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\r\n\t\t\t\t\treturn target[name];\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn target._group.groupManager.table.componentFunctionBinder.handle(\"row\", target._group, name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetKey(){\r\n\t\treturn this._group.key;\r\n\t}\r\n\r\n\tgetField(){\r\n\t\treturn this._group.field;\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._group.element;\r\n\t}\r\n\r\n\tgetRows(){\r\n\t\treturn this._group.getRows(true);\r\n\t}\r\n\r\n\tgetSubGroups(){\r\n\t\treturn this._group.getSubGroups(true);\r\n\t}\r\n\r\n\tgetParentGroup(){\r\n\t\treturn this._group.parent ? this._group.parent.getComponent() : false;\r\n\t}\r\n\r\n\tisVisible(){\r\n\t\treturn this._group.visible;\r\n\t}\r\n\r\n\tshow(){\r\n\t\tthis._group.show();\r\n\t}\r\n\r\n\thide(){\r\n\t\tthis._group.hide();\r\n\t}\r\n\r\n\ttoggle(){\r\n\t\tthis._group.toggleVisibility();\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._group;\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._group.groupManager.table;\r\n\t}\r\n}\r\n\r\nexport default GroupComponent;","import Helpers from '../../core/tools/Helpers.js';\r\nimport GroupComponent from './GroupComponent.js';\r\n\r\n//Group functions\r\nclass Group{\r\n\t\r\n\tconstructor(groupManager, parent, level, key, field, generator, oldGroup){\r\n\t\tthis.groupManager = groupManager;\r\n\t\tthis.parent = parent;\r\n\t\tthis.key = key;\r\n\t\tthis.level = level;\r\n\t\tthis.field = field;\r\n\t\tthis.hasSubGroups = level < (groupManager.groupIDLookups.length - 1);\r\n\t\tthis.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\r\n\t\tthis.type = \"group\"; //type of element\r\n\t\tthis.old = oldGroup;\r\n\t\tthis.rows = [];\r\n\t\tthis.groups = [];\r\n\t\tthis.groupList = [];\r\n\t\tthis.generator = generator;\r\n\t\tthis.element = false;\r\n\t\tthis.elementContents = false;\r\n\t\tthis.height = 0;\r\n\t\tthis.outerHeight = 0;\r\n\t\tthis.initialized = false;\r\n\t\tthis.calcs = {};\r\n\t\tthis.initialized = false;\r\n\t\tthis.modules = {};\r\n\t\tthis.arrowElement = false;\r\n\t\t\r\n\t\tthis.visible = oldGroup ? oldGroup.visible : (typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0]);\r\n\t\t\r\n\t\tthis.component = null;\r\n\t\t\r\n\t\tthis.createElements();\r\n\t\tthis.addBindings();\r\n\t\t\r\n\t\tthis.createValueGroups();\r\n\t}\r\n\t\r\n\twipe(){\r\n\t\tif(this.groupList.length){\r\n\t\t\tthis.groupList.forEach(function(group){\r\n\t\t\t\tgroup.wipe();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis.rows.forEach((row) => {\r\n\t\t\t\tif(row.modules){\r\n\t\t\t\t\tdelete row.modules.group;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tthis.element = false;\r\n\t\tthis.arrowElement = false;\r\n\t\tthis.elementContents = false;\r\n\t}\r\n\t\r\n\tcreateElements(){\r\n\t\tvar arrow = document.createElement(\"div\");\r\n\t\tarrow.classList.add(\"tabulator-arrow\");\r\n\t\t\r\n\t\tthis.element = document.createElement(\"div\");\r\n\t\tthis.element.classList.add(\"tabulator-row\");\r\n\t\tthis.element.classList.add(\"tabulator-group\");\r\n\t\tthis.element.classList.add(\"tabulator-group-level-\" + this.level);\r\n\t\tthis.element.setAttribute(\"role\", \"rowgroup\");\r\n\t\t\r\n\t\tthis.arrowElement = document.createElement(\"div\");\r\n\t\tthis.arrowElement.classList.add(\"tabulator-group-toggle\");\r\n\t\tthis.arrowElement.appendChild(arrow);\r\n\t\t\r\n\t\t//setup movable rows\r\n\t\tif(this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")){\r\n\t\t\tthis.groupManager.table.modules.moveRow.initializeGroupHeader(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tcreateValueGroups(){\r\n\t\tvar level = this.level + 1;\r\n\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\r\n\t\t\tthis.groupManager.allowedValues[level].forEach((value) => {\r\n\t\t\t\tthis._createGroup(value, level);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\taddBindings(){\r\n\t\tvar toggleElement;\r\n\t\t\r\n\t\tif(this.groupManager.table.options.groupToggleElement){\r\n\t\t\ttoggleElement = this.groupManager.table.options.groupToggleElement == \"arrow\" ? this.arrowElement : this.element;\r\n\t\t\t\r\n\t\t\ttoggleElement.addEventListener(\"click\", (e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\tthis.toggleVisibility();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t_createGroup(groupID, level){\r\n\t\tvar groupKey = level + \"_\" + groupID;\r\n\t\tvar group = new Group(this.groupManager, this, level, groupID,  this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\r\n\t\t\r\n\t\tthis.groups[groupKey] = group;\r\n\t\tthis.groupList.push(group);\r\n\t}\r\n\t\r\n\t_addRowToGroup(row){\r\n\t\t\r\n\t\tvar level = this.level + 1;\r\n\t\t\r\n\t\tif(this.hasSubGroups){\r\n\t\t\tvar groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\r\n\t\t\tgroupKey = level + \"_\" + groupID;\r\n\t\t\t\r\n\t\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\r\n\t\t\t\tif(this.groups[groupKey]){\r\n\t\t\t\t\tthis.groups[groupKey].addRow(row);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!this.groups[groupKey]){\r\n\t\t\t\t\tthis._createGroup(groupID, level);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.groups[groupKey].addRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t_addRow(row){\r\n\t\tthis.rows.push(row);\r\n\t\trow.modules.group = this;\r\n\t}\r\n\t\r\n\tinsertRow(row, to, after){\r\n\t\tvar data = this.conformRowData({});\r\n\t\t\r\n\t\trow.updateData(data);\r\n\t\t\r\n\t\tvar toIndex = this.rows.indexOf(to);\r\n\t\t\r\n\t\tif(toIndex > -1){\r\n\t\t\tif(after){\r\n\t\t\t\tthis.rows.splice(toIndex+1, 0, row);\r\n\t\t\t}else{\r\n\t\t\t\tthis.rows.splice(toIndex, 0, row);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(after){\r\n\t\t\t\tthis.rows.push(row);\r\n\t\t\t}else{\r\n\t\t\t\tthis.rows.unshift(row);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\trow.modules.group = this;\r\n\t\t\r\n\t\tthis.generateGroupHeaderContents();\r\n\t\t\r\n\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\r\n\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\r\n\t\t}\r\n\t\t\r\n\t\tthis.groupManager.updateGroupRows(true);\r\n\t}\r\n\t\r\n\tscrollHeader(left){\r\n\t\tif(this.arrowElement){\r\n\t\t\tthis.arrowElement.style.marginLeft = left;\r\n\t\t\t\r\n\t\t\tthis.groupList.forEach(function(child){\r\n\t\t\t\tchild.scrollHeader(left);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetRowIndex(row){}\r\n\t\r\n\t//update row data to match grouping constraints\r\n\tconformRowData(data){\r\n\t\tif(this.field){\r\n\t\t\tdata[this.field] = this.key;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\r\n\t\t}\r\n\t\t\r\n\t\tif(this.parent){\r\n\t\t\tdata = this.parent.conformRowData(data);\r\n\t\t}\r\n\t\t\r\n\t\treturn data;\r\n\t}\r\n\t\r\n\tremoveRow(row){\r\n\t\tvar index = this.rows.indexOf(row);\r\n\t\tvar el = row.getElement();\r\n\t\t\r\n\t\t\r\n\t\tif(index > -1){\r\n\t\t\tthis.rows.splice(index, 1);\r\n\t\t}\r\n\t\t\r\n\t\tif(!this.groupManager.table.options.groupValues && !this.rows.length){\r\n\t\t\tif(this.parent){\r\n\t\t\t\tthis.parent.removeGroup(this);\r\n\t\t\t}else{\r\n\t\t\t\tthis.groupManager.removeGroup(this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.groupManager.updateGroupRows(true);\r\n\t\t}else{\r\n\t\t\t\r\n\t\t\tif(el.parentNode){\r\n\t\t\t\tel.parentNode.removeChild(el);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.generateGroupHeaderContents();\r\n\t\t\t\r\n\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\r\n\t\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\tremoveGroup(group){\r\n\t\tvar groupKey = group.level + \"_\" + group.key,\r\n\t\tindex;\r\n\t\t\r\n\t\tif(this.groups[groupKey]){\r\n\t\t\tdelete this.groups[groupKey];\r\n\t\t\t\r\n\t\t\tindex = this.groupList.indexOf(group);\r\n\t\t\t\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.groupList.splice(index, 1);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(!this.groupList.length){\r\n\t\t\t\tif(this.parent){\r\n\t\t\t\t\tthis.parent.removeGroup(this);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.groupManager.removeGroup(this);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetHeadersAndRows(noCalc){\r\n\t\tvar output = [];\r\n\t\t\r\n\t\toutput.push(this);\r\n\t\t\r\n\t\tthis._visSet();\r\n\t\t\r\n\t\tif(this.visible){\r\n\t\t\tif(this.groupList.length){\r\n\t\t\t\tthis.groupList.forEach(function(group){\r\n\t\t\t\t\toutput = output.concat(group.getHeadersAndRows(noCalc));\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tif(!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\r\n\t\t\t\t\tif(this.calcs.top){\r\n\t\t\t\t\t\tthis.calcs.top.detachElement();\r\n\t\t\t\t\t\tthis.calcs.top.deleteCells();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\r\n\t\t\t\t\toutput.push(this.calcs.top);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\toutput = output.concat(this.rows);\r\n\t\t\t\t\r\n\t\t\t\tif(!noCalc && this.groupManager.table.options.columnCalcs != \"table\" &&  this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\r\n\t\t\t\t\tif(this.calcs.bottom){\r\n\t\t\t\t\t\tthis.calcs.bottom.detachElement();\r\n\t\t\t\t\t\tthis.calcs.bottom.deleteCells();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\r\n\t\t\t\t\toutput.push(this.calcs.bottom);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\"){\r\n\t\t\t\t\r\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\")){\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(!noCalc && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\r\n\t\t\t\t\t\tif(this.calcs.top){\r\n\t\t\t\t\t\t\tthis.calcs.top.detachElement();\r\n\t\t\t\t\t\t\tthis.calcs.top.deleteCells();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\r\n\t\t\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\r\n\t\t\t\t\t\t\toutput.push(this.calcs.top);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(!noCalc && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\r\n\t\t\t\t\t\tif(this.calcs.bottom){\r\n\t\t\t\t\t\t\tthis.calcs.bottom.detachElement();\r\n\t\t\t\t\t\t\tthis.calcs.bottom.deleteCells();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\r\n\t\t\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\r\n\t\t\t\t\t\t\toutput.push(this.calcs.bottom);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tgetData(visible, transform){\r\n\t\tvar output = [];\r\n\t\t\r\n\t\tthis._visSet();\r\n\t\t\r\n\t\tif(!visible || (visible && this.visible)){\r\n\t\t\tthis.rows.forEach((row) => {\r\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tgetRowCount(){\r\n\t\tvar count = 0;\r\n\t\t\r\n\t\tif(this.groupList.length){\r\n\t\t\tthis.groupList.forEach((group) => {\r\n\t\t\t\tcount += group.getRowCount();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tcount = this.rows.length;\r\n\t\t}\r\n\t\treturn count;\r\n\t}\r\n\t\r\n\ttoggleVisibility(){\r\n\t\tif(this.visible){\r\n\t\t\tthis.hide();\r\n\t\t}else{\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t}\r\n\t\r\n\thide(){\r\n\t\tthis.visible = false;\r\n\t\t\r\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination){\r\n\t\t\t\r\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\r\n\t\t\t\r\n\t\t\tif(this.groupList.length){\r\n\t\t\t\tthis.groupList.forEach((group) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\r\n\t\t\t\t\t\r\n\t\t\t\t\trows.forEach((row) => {\r\n\t\t\t\t\t\trow.detachElement();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tthis.rows.forEach((row) => {\r\n\t\t\t\t\tvar rowEl = row.getElement();\r\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\r\n\t\t\t\r\n\t\t\tthis.groupManager.checkBasicModeGroupHeaderWidth();\r\n\t\t\t\r\n\t\t}else{\r\n\t\t\tthis.groupManager.updateGroupRows(true);\r\n\t\t}\r\n\t\t\r\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), false);\r\n\t}\r\n\t\r\n\tshow(){\r\n\t\tthis.visible = true;\r\n\t\t\r\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination){\r\n\t\t\t\r\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\r\n\t\t\t\r\n\t\t\tvar prev = this.generateElement();\r\n\t\t\t\r\n\t\t\tif(this.groupList.length){\r\n\t\t\t\tthis.groupList.forEach((group) => {\r\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\r\n\t\t\t\t\t\r\n\t\t\t\t\trows.forEach((row) => {\r\n\t\t\t\t\t\tvar rowEl = row.getElement();\r\n\t\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\r\n\t\t\t\t\t\trow.initialize();\r\n\t\t\t\t\t\tprev = rowEl;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tthis.rows.forEach((row) => {\r\n\t\t\t\t\tvar rowEl = row.getElement();\r\n\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\r\n\t\t\t\t\trow.initialize();\r\n\t\t\t\t\tprev = rowEl;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\r\n\t\t\t\r\n\t\t\tthis.groupManager.checkBasicModeGroupHeaderWidth();\r\n\t\t}else{\r\n\t\t\tthis.groupManager.updateGroupRows(true);\r\n\t\t}\r\n\t\t\r\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), true);\r\n\t}\r\n\t\r\n\t_visSet(){\r\n\t\tvar data = [];\r\n\t\t\r\n\t\tif(typeof this.visible == \"function\"){\r\n\t\t\t\r\n\t\t\tthis.rows.forEach(function(row){\r\n\t\t\t\tdata.push(row.getData());\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetRowGroup(row){\r\n\t\tvar match = false;\r\n\t\tif(this.groupList.length){\r\n\t\t\tthis.groupList.forEach(function(group){\r\n\t\t\t\tvar result = group.getRowGroup(row);\r\n\t\t\t\t\r\n\t\t\t\tif(result){\r\n\t\t\t\t\tmatch = result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tif(this.rows.find(function(item){\r\n\t\t\t\treturn item === row;\r\n\t\t\t})){\r\n\t\t\t\tmatch = this;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn match;\r\n\t}\r\n\t\r\n\tgetSubGroups(component){\r\n\t\tvar output = [];\r\n\t\t\r\n\t\tthis.groupList.forEach(function(child){\r\n\t\t\toutput.push(component ? child.getComponent() : child);\r\n\t\t});\r\n\t\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tgetRows(component){\r\n\t\tvar output = [];\r\n\t\t\r\n\t\tthis.rows.forEach(function(row){\r\n\t\t\toutput.push(component ? row.getComponent() : row);\r\n\t\t});\r\n\t\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tgenerateGroupHeaderContents(){\r\n\t\tvar data = [];\r\n\t\t\r\n\t\tthis.rows.forEach(function(row){\r\n\t\t\tdata.push(row.getData());\r\n\t\t});\r\n\t\t\r\n\t\tthis.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\r\n\t\t\r\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\t\t\r\n\t\tif(typeof this.elementContents === \"string\"){\r\n\t\t\tthis.element.innerHTML = this.elementContents;\r\n\t\t}else{\r\n\t\t\tthis.element.appendChild(this.elementContents);\r\n\t\t}\r\n\t\t\r\n\t\tthis.element.insertBefore(this.arrowElement, this.element.firstChild);\r\n\t}\r\n\t\r\n\tgetPath(path = []) {\r\n\t\tpath.unshift(this.key);\r\n\t\tif(this.parent) {\r\n\t\t\tthis.parent.getPath(path);\r\n\t\t}\r\n\t\treturn path;\r\n\t}\r\n\t\r\n\t////////////// Standard Row Functions //////////////\r\n\t\r\n\tgetElement(){\r\n\t\treturn this.elementContents ? this.element : this.generateElement();\r\n\t}\r\n\t\r\n\tgenerateElement(){\r\n\t\tthis.addBindings = false;\r\n\t\t\r\n\t\tthis._visSet();\r\n\t\t\r\n\t\tif(this.visible){\r\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\r\n\t\t}else{\r\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\r\n\t\t}\r\n\t\t\r\n\t\tfor(var i = 0; i < this.element.childNodes.length; ++i){\r\n\t\t\tthis.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\r\n\t\t}\r\n\t\t\r\n\t\tthis.generateGroupHeaderContents();\r\n\t\t\r\n\t\t// this.addBindings();\r\n\t\t\r\n\t\treturn this.element;\r\n\t}\r\n\t\r\n\tdetachElement(){\r\n\t\tif (this.element && this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//normalize the height of elements in the row\r\n\tnormalizeHeight(){\r\n\t\tthis.setHeight(this.element.clientHeight);\r\n\t}\r\n\t\r\n\tinitialize(force){\r\n\t\tif(!this.initialized || force){\r\n\t\t\tthis.normalizeHeight();\r\n\t\t\tthis.initialized = true;\r\n\t\t}\r\n\t}\r\n\t\r\n\treinitialize(){\r\n\t\tthis.initialized = false;\r\n\t\tthis.height = 0;\r\n\t\t\r\n\t\tif(Helpers.elVisible(this.element)){\r\n\t\t\tthis.initialize(true);\r\n\t\t}\r\n\t}\r\n\t\r\n\tsetHeight(height){\r\n\t\tif(this.height != height){\r\n\t\t\tthis.height = height;\r\n\t\t\tthis.outerHeight = this.element.offsetHeight;\r\n\t\t}\r\n\t}\r\n\t\r\n\t//return rows outer height\r\n\tgetHeight(){\r\n\t\treturn this.outerHeight;\r\n\t}\r\n\t\r\n\tgetGroup(){\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\treinitializeHeight(){}\r\n\t\r\n\tcalcHeight(){}\r\n\t\r\n\tsetCellHeight(){}\r\n\t\r\n\tclearCellHeight(){}\r\n\t\r\n\tdeinitializeHeight(){}\r\n\t\r\n\t//////////////// Object Generation /////////////////\r\n\tgetComponent(){\r\n\t\tif(!this.component){\r\n\t\t\tthis.component = new GroupComponent(this);\r\n\t\t}\r\n\t\t\r\n\t\treturn this.component;\r\n\t}\r\n}\r\n\r\nexport default Group;","import Module from '../../core/Module.js';\r\n\r\nimport Group from './Group.js';\r\n\r\nclass GroupRows extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.groupIDLookups = false; //enable table grouping and set field to group by\r\n\t\tthis.startOpen = [function(){return false;}]; //starting state of group\r\n\t\tthis.headerGenerator = [function(){return \"\";}];\r\n\t\tthis.groupList = []; //ordered list of groups\r\n\t\tthis.allowedValues = false;\r\n\t\tthis.groups = {}; //hold row groups\r\n\t\tthis.displayIndex = 0; //index in display pipeline\r\n\r\n\t\tthis.displayHandler = this.getRows.bind(this);\r\n\r\n\t\t//register table options\r\n\t\tthis.registerTableOption(\"groupBy\", false); //enable table grouping and set field to group by\r\n\t\tthis.registerTableOption(\"groupStartOpen\", true); //starting state of group\r\n\t\tthis.registerTableOption(\"groupValues\", false);\r\n\t\tthis.registerTableOption(\"groupUpdateOnCellEdit\", false);\r\n\t\tthis.registerTableOption(\"groupHeader\", false); //header generation function\r\n\t\tthis.registerTableOption(\"groupHeaderPrint\", null);\r\n\t\tthis.registerTableOption(\"groupHeaderClipboard\", null);\r\n\t\tthis.registerTableOption(\"groupHeaderHtmlOutput\", null);\r\n\t\tthis.registerTableOption(\"groupHeaderDownload\", null);\r\n\t\tthis.registerTableOption(\"groupToggleElement\", \"arrow\");\r\n\t\tthis.registerTableOption(\"groupClosedShowCalcs\", false);\r\n\r\n\t\t//register table functions\r\n\t\tthis.registerTableFunction(\"setGroupBy\", this.setGroupBy.bind(this));\r\n\t\tthis.registerTableFunction(\"setGroupValues\", this.setGroupValues.bind(this));\r\n\t\tthis.registerTableFunction(\"setGroupStartOpen\", this.setGroupStartOpen.bind(this));\r\n\t\tthis.registerTableFunction(\"setGroupHeader\", this.setGroupHeader.bind(this));\r\n\t\tthis.registerTableFunction(\"getGroups\", this.userGetGroups.bind(this));\r\n\t\tthis.registerTableFunction(\"getGroupedData\", this.userGetGroupedData.bind(this));\r\n\r\n\t\t//register component functions\r\n\t\tthis.registerComponentFunction(\"row\", \"getGroup\", this.rowGetGroup.bind(this));\r\n\t}\r\n\r\n\t//initialize group configuration\r\n\tinitialize(){\r\n\t\tif(this.table.options.groupBy){\r\n\t\t\tif(this.table.options.groupUpdateOnCellEdit){\r\n\t\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\r\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.reassignRowToGroup.bind(this), 0);\r\n\t\t\t}\r\n\r\n\t\t\tthis.subscribe(\"table-built\", this.configureGroupSetup.bind(this));\r\n\t\t\t\r\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleting.bind(this));\r\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\r\n\t\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHeaders.bind(this));\r\n\t\t\tthis.subscribe(\"rows-wipe\", this.wipe.bind(this));\r\n\t\t\tthis.subscribe(\"rows-added\", this.rowsUpdated.bind(this));\r\n\t\t\tthis.subscribe(\"row-moving\", this.rowMoving.bind(this));\r\n\t\t\tthis.subscribe(\"row-adding-index\", this.rowAddingIndex.bind(this));\r\n\r\n\t\t\tthis.subscribe(\"rows-sample\", this.rowSample.bind(this));\r\n\r\n\t\t\tthis.subscribe(\"render-virtual-fill\", this.virtualRenderFill.bind(this));\r\n\r\n\t\t\tthis.registerDisplayHandler(this.displayHandler, 20);\r\n\r\n\t\t\tthis.initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tconfigureGroupSetup(){\r\n\t\tif(this.table.options.groupBy){\r\n\t\t\tvar groupBy = this.table.options.groupBy,\r\n\t\t\tstartOpen = this.table.options.groupStartOpen,\r\n\t\t\tgroupHeader = this.table.options.groupHeader;\r\n\r\n\t\t\tthis.allowedValues = this.table.options.groupValues;\r\n\r\n\t\t\tif(Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length){\r\n\t\t\t\tconsole.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\r\n\t\t\t}\r\n\r\n\t\t\tthis.headerGenerator = [function(){return \"\";}];\r\n\t\t\tthis.startOpen = [function(){return false;}]; //starting state of group\r\n\r\n\t\t\tthis.langBind(\"groups|item\", (langValue, lang) => {\r\n\t\t\t\tthis.headerGenerator[0] = (value, count, data) => { //header layout function\r\n\t\t\t\t\treturn (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + ((count === 1) ? langValue : lang.groups.items) + \")</span>\";\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\t\tthis.groupIDLookups = [];\r\n\r\n\t\t\tif(Array.isArray(groupBy)){\r\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\"){\r\n\t\t\t\t\tthis.table.modules.columnCalcs.removeCalcs();\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\"){\r\n\r\n\t\t\t\t\tvar cols = this.table.columnManager.getRealColumns();\r\n\r\n\t\t\t\t\tcols.forEach((col) => {\r\n\t\t\t\t\t\tif(col.definition.topCalc){\r\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeTopRow();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(col.definition.bottomCalc){\r\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeBottomRow();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!Array.isArray(groupBy)){\r\n\t\t\t\tgroupBy = [groupBy];\r\n\t\t\t}\r\n\r\n\t\t\tgroupBy.forEach((group, i) => {\r\n\t\t\t\tvar lookupFunc, column;\r\n\r\n\t\t\t\tif(typeof group == \"function\"){\r\n\t\t\t\t\tlookupFunc = group;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcolumn = this.table.columnManager.getColumnByField(group);\r\n\r\n\t\t\t\t\tif(column){\r\n\t\t\t\t\t\tlookupFunc = function(data){\r\n\t\t\t\t\t\t\treturn column.getFieldValue(data);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tlookupFunc = function(data){\r\n\t\t\t\t\t\t\treturn data[group];\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.groupIDLookups.push({\r\n\t\t\t\t\tfield: typeof group === \"function\" ? false : group,\r\n\t\t\t\t\tfunc:lookupFunc,\r\n\t\t\t\t\tvalues:this.allowedValues ? this.allowedValues[i] : false,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tif(startOpen){\r\n\t\t\t\tif(!Array.isArray(startOpen)){\r\n\t\t\t\t\tstartOpen = [startOpen];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstartOpen.forEach((level) => {\r\n\t\t\t\t\tlevel = typeof level == \"function\" ? level : function(){return true;};\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.startOpen = startOpen;\r\n\t\t\t}\r\n\r\n\t\t\tif(groupHeader){\r\n\t\t\t\tthis.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.groupList = [];\r\n\t\t\tthis.groups = {};\r\n\t\t}\r\n\t}\r\n\r\n\trowSample(rows, prevValue){\r\n\t\tvar group = this.getGroups(false)[0];\r\n\r\n\t\tprevValue.push(group.getRows(false)[0]);\r\n\r\n\t\treturn prevValue;\r\n\t}\r\n\r\n\tvirtualRenderFill(){\r\n\t\tvar el = this.table.rowManager.tableElement;\r\n\t\tvar rows = this.table.rowManager.getVisibleRows();\r\n\r\n\t\trows = rows.filter((row) => {\r\n\t\t\treturn row.type !== \"group\";\r\n\t\t});\r\n\r\n\t\tel.style.minWidth = !rows.length ? this.table.columnManager.getWidth() + \"px\" : \"\";\r\n\r\n\t\t// if(this.table.options.groupBy){\r\n\t\t// \tif(this.layoutMode() != \"fitDataFill\" && rowsCount == this.table.modules.groupRows.countGroups()){\r\n\t\t// \t\tel.style.minWidth = this.table.columnManager.getWidth() + \"px\";\r\n\t\t// \t}\r\n\t\t// }\r\n\t}\r\n\r\n\trowAddingIndex(row, index, top){\r\n\t\tthis.assignRowToGroup(row);\r\n\r\n\t\tvar groupRows = row.modules.group.rows;\r\n\r\n\t\tif(groupRows.length > 1){\r\n\t\t\tif(!index || (index && groupRows.indexOf(index) == -1)){\r\n\t\t\t\tif(top){\r\n\t\t\t\t\tif(groupRows[0] !== row){\r\n\t\t\t\t\t\tindex = groupRows[0];\r\n\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(groupRows[groupRows.length -1] !== row){\r\n\t\t\t\t\t\tindex = groupRows[groupRows.length -1];\r\n\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn index;\r\n\t}\r\n\r\n\ttrackChanges(){\r\n\t\tthis.dispatch(\"group-changed\");\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\tsetGroupBy(groups){\r\n\t\tthis.table.options.groupBy = groups;\r\n\r\n\t\tif(!this.initialized){\r\n\t\t\tthis.initialize();\r\n\t\t}\r\n\r\n\t\tthis.configureGroupSetup();\r\n\r\n\t\tthis.refreshData();\r\n\r\n\t\tthis.trackChanges();\r\n\t}\r\n\r\n\tsetGroupValues(groupValues){\r\n\t\tthis.table.options.groupValues = groupValues;\r\n\t\tthis.configureGroupSetup();\r\n\t\tthis.refreshData();\r\n\r\n\t\tthis.trackChanges();\r\n\t}\r\n\r\n\tsetGroupStartOpen(values){\r\n\t\tthis.table.options.groupStartOpen = values;\r\n\t\tthis.configureGroupSetup();\r\n\r\n\t\tif(this.table.options.groupBy){\r\n\t\t\tthis.refreshData();\r\n\r\n\t\t\tthis.trackChanges();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\r\n\t\t}\r\n\t}\r\n\r\n\tsetGroupHeader(values){\r\n\t\tthis.table.options.groupHeader = values;\r\n\t\tthis.configureGroupSetup();\r\n\r\n\t\tif(this.table.options.groupBy){\r\n\t\t\tthis.refreshData();\r\n\r\n\t\t\tthis.trackChanges();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\r\n\t\t}\r\n\t}\r\n\r\n\tuserGetGroups(values){\r\n\t\treturn this.getGroups(true);\r\n\t}\r\n\r\n\t// get grouped table data in the same format as getData()\r\n\tuserGetGroupedData(){\r\n\t\treturn this.table.options.groupBy ?\r\n\t\t\tthis.getGroupedData() : this.getData();\r\n\t}\r\n\r\n\r\n\t///////////////////////////////////////\r\n\t///////// Component Functions /////////\r\n\t///////////////////////////////////////\r\n\r\n\trowGetGroup(row){\r\n\t\treturn row.modules.group ? row.modules.group.getComponent() : false;\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\trowMoving(from, to, after){\r\n\t\tif(!after && to instanceof Group){\r\n\t\t\tto = this.table.rowManager.prevDisplayRow(from) || to;\r\n\t\t}\r\n\r\n\t\tvar toGroup = to instanceof Group ? to : to.modules.group;\r\n\t\tvar fromGroup = from instanceof Group ? from : from.modules.group;\r\n\r\n\t\tif(toGroup === fromGroup){\r\n\t\t\tthis.table.rowManager.moveRowInArray(toGroup.rows, from, to, after);\r\n\t\t}else{\r\n\t\t\tif(fromGroup){\r\n\t\t\t\tfromGroup.removeRow(from);\r\n\t\t\t}\r\n\r\n\t\t\ttoGroup.insertRow(from, to, after);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\trowDeleting(row){\r\n\t\t//remove from group\r\n\t\tif(row.modules.group){\r\n\t\t\trow.modules.group.removeRow(row);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\trowsUpdated(row){\r\n\t\tthis.updateGroupRows(true);\r\n\t}\r\n\r\n\tcellUpdated(cell){\r\n\t\tthis.reassignRowToGroup(cell.row);\r\n\t}\r\n\r\n\r\n\tsetDisplayIndex(index){\r\n\t\tthis.displayIndex = index;\r\n\t}\r\n\r\n\tgetDisplayIndex(){\r\n\t\treturn this.displayIndex;\r\n\t}\r\n\r\n\t//return appropriate rows with group headers\r\n\tgetRows(rows){\r\n\t\tif(this.table.options.groupBy && this.groupIDLookups.length){\r\n\r\n\t\t\tthis.dispatchExternal(\"dataGrouping\");\r\n\r\n\t\t\tthis.generateGroups(rows);\r\n\r\n\t\t\tif(this.subscribedExternal(\"dataGrouped\")){\r\n\t\t\t\tthis.dispatchExternal(\"dataGrouped\", this.getGroups(true));\r\n\t\t\t}\r\n\r\n\t\t\treturn this.updateGroupRows();\r\n\r\n\t\t}else{\r\n\t\t\treturn rows.slice(0);\r\n\t\t}\r\n\t}\r\n\r\n\tgetGroups(component){\r\n\t\tvar groupComponents = [];\r\n\r\n\t\tthis.groupList.forEach(function(group){\r\n\t\t\tgroupComponents.push(component ? group.getComponent() : group);\r\n\t\t});\r\n\r\n\t\treturn groupComponents;\r\n\t}\r\n\r\n\tgetChildGroups(group){\r\n\t\tvar groupComponents = [];\r\n\r\n\t\tif(!group){\r\n\t\t\tgroup = this;\r\n\t\t}\r\n\r\n\t\tgroup.groupList.forEach((child) => {\r\n\t\t\tif(child.groupList.length){\r\n\t\t\t\tgroupComponents = groupComponents.concat(this.getChildGroups(child));\r\n\t\t\t}else{\r\n\t\t\t\tgroupComponents.push(child);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn groupComponents;\r\n\t}\r\n\r\n\twipe(){\r\n\t\tthis.groupList.forEach(function(group){\r\n\t\t\tgroup.wipe();\r\n\t\t});\r\n\t}\r\n\r\n\tpullGroupListData(groupList) {\r\n\t\tvar groupListData = [];\r\n\r\n\t\tgroupList.forEach((group) => {\r\n\t\t\tvar groupHeader = {};\r\n\t\t\tgroupHeader.level = 0;\r\n\t\t\tgroupHeader.rowCount = 0;\r\n\t\t\tgroupHeader.headerContent = \"\";\r\n\t\t\tvar childData = [];\r\n\r\n\t\t\tif (group.hasSubGroups) {\r\n\t\t\t\tchildData = this.pullGroupListData(group.groupList);\r\n\r\n\t\t\t\tgroupHeader.level = group.level;\r\n\t\t\t\tgroupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\r\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\r\n\r\n\t\t\t\tgroupListData.push(groupHeader);\r\n\t\t\t\tgroupListData = groupListData.concat(childData);\r\n\t\t\t}\r\n\r\n\t\t\telse {\r\n\t\t\t\tgroupHeader.level = group.level;\r\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\r\n\t\t\t\tgroupHeader.rowCount = group.getRows().length;\r\n\r\n\t\t\t\tgroupListData.push(groupHeader);\r\n\r\n\t\t\t\tgroup.getRows().forEach((row) => {\r\n\t\t\t\t\tgroupListData.push(row.getData(\"data\"));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn groupListData;\r\n\t}\r\n\r\n\tgetGroupedData(){\r\n\r\n\t\treturn this.pullGroupListData(this.groupList);\r\n\t}\r\n\r\n\tgetRowGroup(row){\r\n\t\tvar match = false;\r\n\r\n\t\tif(this.options(\"dataTree\")){\r\n\t\t\trow = this.table.modules.dataTree.getTreeParentRoot(row);\r\n\t\t}\r\n\r\n\t\tthis.groupList.forEach((group) => {\r\n\t\t\tvar result = group.getRowGroup(row);\r\n\r\n\t\t\tif(result){\r\n\t\t\t\tmatch = result;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tcountGroups(){\r\n\t\treturn this.groupList.length;\r\n\t}\r\n\r\n\tgenerateGroups(rows){\r\n\t\tvar oldGroups = this.groups;\r\n\r\n\t\tthis.groups = {};\r\n\t\tthis.groupList = [];\r\n\r\n\t\tif(this.allowedValues && this.allowedValues[0]){\r\n\t\t\tthis.allowedValues[0].forEach((value) => {\r\n\t\t\t\tthis.createGroup(value, 0, oldGroups);\r\n\t\t\t});\r\n\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tthis.assignRowToExistingGroup(row, oldGroups);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tthis.assignRowToGroup(row, oldGroups);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcreateGroup(groupID, level, oldGroups){\r\n\t\tvar groupKey = level + \"_\" + groupID,\r\n\t\tgroup;\r\n\r\n\t\toldGroups = oldGroups || [];\r\n\r\n\t\tgroup = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\r\n\r\n\t\tthis.groups[groupKey] = group;\r\n\t\tthis.groupList.push(group);\r\n\t}\r\n\r\n\tassignRowToExistingGroup(row, oldGroups){\r\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\r\n\t\tgroupKey = \"0_\" + groupID;\r\n\r\n\t\tif(this.groups[groupKey]){\r\n\t\t\tthis.groups[groupKey].addRow(row);\r\n\t\t}\r\n\t}\r\n\r\n\tassignRowToGroup(row, oldGroups){\r\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\r\n\t\tnewGroupNeeded = !this.groups[\"0_\" + groupID];\r\n\r\n\t\tif(newGroupNeeded){\r\n\t\t\tthis.createGroup(groupID, 0, oldGroups);\r\n\t\t}\r\n\r\n\t\tthis.groups[\"0_\" + groupID].addRow(row);\r\n\r\n\t\treturn !newGroupNeeded;\r\n\t}\r\n\r\n\treassignRowToGroup(row){\r\n\t\tif(row.type === \"row\"){\r\n\t\t\tvar oldRowGroup = row.modules.group,\r\n\t\t\toldGroupPath = oldRowGroup.getPath(),\r\n\t\t\tnewGroupPath = this.getExpectedPath(row),\r\n\t\t\tsamePath;\r\n\r\n\t\t\t// figure out if new group path is the same as old group path\r\n\t\t\tsamePath = (oldGroupPath.length == newGroupPath.length) && oldGroupPath.every((element, index) => {\r\n\t\t\t\treturn element === newGroupPath[index];\r\n\t\t\t});\r\n\r\n\t\t\t// refresh if they new path and old path aren't the same (aka the row's groupings have changed)\r\n\t\t\tif(!samePath) {\r\n\t\t\t\toldRowGroup.removeRow(row);\r\n\t\t\t\tthis.assignRowToGroup(row, this.groups);\r\n\t\t\t\tthis.refreshData(true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetExpectedPath(row) {\r\n\t\tvar groupPath = [], rowData = row.getData();\r\n\r\n\t\tthis.groupIDLookups.forEach((groupId) => {\r\n\t\t\tgroupPath.push(groupId.func(rowData));\r\n\t\t});\r\n\r\n\t\treturn groupPath;\r\n\t}\r\n\r\n\tupdateGroupRows(force){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.groupList.forEach((group) => {\r\n\t\t\toutput = output.concat(group.getHeadersAndRows());\r\n\t\t});\r\n\r\n\t\tif(force){\r\n\t\t\tthis.refreshData(true, this.displayHandler);\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tscrollHeaders(left){\r\n\t\tif(this.table.options.renderHorizontal === \"virtual\"){\r\n\t\t\tleft -= this.table.columnManager.renderer.vDomPadLeft;\r\n\t\t}\r\n\r\n\t\tleft = left + \"px\";\r\n\r\n\t\tthis.groupList.forEach((group) => {\r\n\t\t\tgroup.scrollHeader(left);\r\n\t\t});\r\n\t}\r\n\r\n\tremoveGroup(group){\r\n\t\tvar groupKey = group.level + \"_\" + group.key,\r\n\t\tindex;\r\n\r\n\t\tif(this.groups[groupKey]){\r\n\t\t\tdelete this.groups[groupKey];\r\n\r\n\t\t\tindex = this.groupList.indexOf(group);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.groupList.splice(index, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcheckBasicModeGroupHeaderWidth(){\r\n\t\tvar element = this.table.rowManager.tableElement,\r\n\t\tonlyGroupHeaders = true;\r\n\r\n\t\tthis.table.rowManager.getDisplayRows().forEach((row, index) =>{\r\n\t\t\tthis.table.rowManager.styleRow(row, index);\r\n\t\t\telement.appendChild(row.getElement());\r\n\t\t\trow.initialize(true);\r\n\r\n\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\tonlyGroupHeaders = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(onlyGroupHeaders){\r\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\r\n\t\t}else{\r\n\t\t\telement.style.minWidth = \"\";\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nGroupRows.moduleName = \"groupRows\";\r\n\r\nexport default GroupRows;","export default {\r\n\tcellEdit: function(action){\r\n\t\taction.component.setValueProcessData(action.data.oldValue);\r\n\t\taction.component.cellRendered();\r\n\t},\r\n\r\n\trowAdd: function(action){\r\n\t\taction.component.deleteActual();\r\n\t},\r\n\r\n\trowDelete: function(action){\r\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\r\n\t\t}\r\n\r\n\t\tthis._rebindRow(action.component, newRow);\r\n\t},\r\n\r\n\trowMove: function(action){\r\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posFrom], !action.data.after);\r\n\t\tthis.table.rowManager.redraw();\r\n\t},\r\n};","export default {\r\n\tcellEdit: function(action){\r\n\t\taction.component.setValueProcessData(action.data.newValue);\r\n\t\taction.component.cellRendered();\r\n\t},\r\n\r\n\trowAdd: function(action){\r\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\r\n\t\t}\r\n\r\n\t\tthis._rebindRow(action.component, newRow);\r\n\t},\r\n\r\n\trowDelete:function(action){\r\n\t\taction.component.deleteActual();\r\n\t},\r\n\r\n\trowMove: function(action){\r\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posTo], action.data.after);\r\n\t\tthis.table.rowManager.redraw();\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\nimport Row from '../../core/row/Row.js';\r\nimport Cell from '../../core/cell/Cell.js';\r\n\r\nimport defaultUndoers from './defaults/undoers.js';\r\nimport defaultRedoers from './defaults/redoers.js';\r\n\r\nclass History extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.history = [];\r\n\t\tthis.index = -1;\r\n\r\n\t\tthis.registerTableOption(\"history\", false); //enable edit history\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tif(this.table.options.history){\r\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\r\n\t\t\tthis.subscribe(\"cell-delete\", this.clearComponentHistory.bind(this));\r\n\t\t\tthis.subscribe(\"row-delete\", this.rowDeleted.bind(this));\r\n\t\t\tthis.subscribe(\"rows-wipe\", this.clear.bind(this));\r\n\t\t\tthis.subscribe(\"row-added\", this.rowAdded.bind(this));\r\n\t\t\tthis.subscribe(\"row-move\", this.rowMoved.bind(this));\r\n\t\t}\r\n\r\n\t\tthis.registerTableFunction(\"undo\", this.undo.bind(this));\r\n\t\tthis.registerTableFunction(\"redo\", this.redo.bind(this));\r\n\t\tthis.registerTableFunction(\"getHistoryUndoSize\", this.getHistoryUndoSize.bind(this));\r\n\t\tthis.registerTableFunction(\"getHistoryRedoSize\", this.getHistoryRedoSize.bind(this));\r\n\t\tthis.registerTableFunction(\"clearHistory\", this.clear.bind(this));\r\n\t}\r\n\r\n\trowMoved(from, to, after){\r\n\t\tthis.action(\"rowMove\", from, {posFrom:from.getPosition(), posTo:to.getPosition(), to:to, after:after});\r\n\t}\r\n\r\n\trowAdded(row, data, pos, index){\r\n\t\tthis.action(\"rowAdd\", row, {data:data, pos:pos, index:index});\r\n\t}\r\n\r\n\trowDeleted(row){\r\n\t\tvar index, rows;\r\n\r\n\t\tif(this.table.options.groupBy){\r\n\r\n\t\t\trows = row.getComponent().getGroup()._getSelf().rows;\r\n\t\t\tindex = rows.indexOf(row);\r\n\r\n\t\t\tif(index){\r\n\t\t\t\tindex = rows[index-1];\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tindex = row.table.rowManager.getRowIndex(row);\r\n\r\n\t\t\tif(index){\r\n\t\t\t\tindex = row.table.rowManager.rows[index-1];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.action(\"rowDelete\", row, {data:row.getData(), pos:!index, index:index});\r\n\t}\r\n\r\n\tcellUpdated(cell){\r\n\t\tthis.action(\"cellEdit\", cell, {oldValue:cell.oldValue, newValue:cell.value});\r\n\t}\r\n\r\n\tclear(){\r\n\t\tthis.history = [];\r\n\t\tthis.index = -1;\r\n\t}\r\n\r\n\taction(type, component, data){\r\n\t\tthis.history = this.history.slice(0, this.index + 1);\r\n\r\n\t\tthis.history.push({\r\n\t\t\ttype:type,\r\n\t\t\tcomponent:component,\r\n\t\t\tdata:data,\r\n\t\t});\r\n\r\n\t\tthis.index ++;\r\n\t}\r\n\r\n\tgetHistoryUndoSize(){\r\n\t\treturn this.index + 1;\r\n\t}\r\n\r\n\tgetHistoryRedoSize(){\r\n\t\treturn this.history.length - (this.index + 1);\r\n\t}\r\n\r\n\tclearComponentHistory(component){\r\n\t\tvar index = this.history.findIndex(function(item){\r\n\t\t\treturn item.component === component;\r\n\t\t});\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.history.splice(index, 1);\r\n\t\t\tif(index <= this.index){\r\n\t\t\t\tthis.index--;\r\n\t\t\t}\r\n\r\n\t\t\tthis.clearComponentHistory(component);\r\n\t\t}\r\n\t}\r\n\r\n\tundo(){\r\n\t\tif(this.index > -1){\r\n\t\t\tlet action = this.history[this.index];\r\n\r\n\t\t\tHistory.undoers[action.type].call(this, action);\r\n\r\n\t\t\tthis.index--;\r\n\r\n\t\t\tthis.dispatchExternal(\"historyUndo\", action.type, action.component.getComponent(), action.data);\r\n\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"History Undo Error - No more history to undo\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tredo(){\r\n\t\tif(this.history.length-1 > this.index){\r\n\r\n\t\t\tthis.index++;\r\n\r\n\t\t\tlet action = this.history[this.index];\r\n\r\n\t\t\tHistory.redoers[action.type].call(this, action);\r\n\r\n\t\t\tthis.dispatchExternal(\"historyRedo\", action.type, action.component.getComponent(), action.data);\r\n\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"History Redo Error - No more history to redo\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//rebind rows to new element after deletion\r\n\t_rebindRow(oldRow, newRow){\r\n\t\tthis.history.forEach(function(action){\r\n\t\t\tif(action.component instanceof Row){\r\n\t\t\t\tif(action.component === oldRow){\r\n\t\t\t\t\taction.component = newRow;\r\n\t\t\t\t}\r\n\t\t\t}else if(action.component instanceof Cell){\r\n\t\t\t\tif(action.component.row === oldRow){\r\n\t\t\t\t\tvar field = action.component.column.getField();\r\n\r\n\t\t\t\t\tif(field){\r\n\t\t\t\t\t\taction.component = newRow.getCell(field);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nHistory.moduleName = \"history\";\r\n\r\n//load defaults\r\nHistory.undoers = defaultUndoers;\r\nHistory.redoers = defaultRedoers;\r\n\r\nexport default History;","import Module from '../../core/Module.js';\r\n\r\nclass HtmlTableImport extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.fieldIndex = [];\r\n\t\tthis.hasIndex = false;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.tableElementCheck();\r\n\t}\r\n\r\n\ttableElementCheck(){\r\n\t\tif(this.table.originalElement && this.table.originalElement.tagName === \"TABLE\"){\r\n\t\t\tif(this.table.originalElement.childNodes.length){\r\n\t\t\t\tthis.parseTable();\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element.\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tparseTable(){\r\n\t\tvar element = this.table.originalElement,\r\n\t\toptions = this.table.options,\r\n\t\theaders = element.getElementsByTagName(\"th\"),\r\n\t\trows = element.getElementsByTagName(\"tbody\")[0],\r\n\t\tdata = [];\r\n\r\n\t\tthis.hasIndex = false;\r\n\r\n\t\tthis.dispatchExternal(\"htmlImporting\");\r\n\r\n\t\trows = rows ? rows.getElementsByTagName(\"tr\") : [];\r\n\r\n\t\t//check for Tabulator inline options\r\n\t\tthis._extractOptions(element, options);\r\n\r\n\t\tif(headers.length){\r\n\t\t\tthis._extractHeaders(headers, rows);\r\n\t\t}else{\r\n\t\t\tthis._generateBlankHeaders(headers, rows);\r\n\t\t}\r\n\r\n\t\t//iterate through table rows and build data set\r\n\t\tfor(var index = 0; index < rows.length; index++){\r\n\t\t\tvar row = rows[index],\r\n\t\t\tcells = row.getElementsByTagName(\"td\"),\r\n\t\t\titem = {};\r\n\r\n\t\t\t//create index if the don't exist in table\r\n\t\t\tif(!this.hasIndex){\r\n\t\t\t\titem[options.index] = index;\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\t\tvar cell = cells[i];\r\n\t\t\t\tif(typeof this.fieldIndex[i] !== \"undefined\"){\r\n\t\t\t\t\titem[this.fieldIndex[i]] = cell.innerHTML;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//add row data to item\r\n\t\t\tdata.push(item);\r\n\t\t}\r\n\r\n\t\toptions.data = data;\r\n\r\n\t\tthis.dispatchExternal(\"htmlImported\");\r\n\t}\r\n\r\n\t//extract tabulator attribute options\r\n\t_extractOptions(element, options, defaultOptions){\r\n\t\tvar attributes = element.attributes;\r\n\t\tvar optionsArr = defaultOptions ? Object.keys(defaultOptions) : Object.keys(options);\r\n\t\tvar optionsList = {};\r\n\r\n\t\toptionsArr.forEach((item) => {\r\n\t\t\toptionsList[item.toLowerCase()] = item;\r\n\t\t});\r\n\r\n\t\tfor(var index in attributes){\r\n\t\t\tvar attrib = attributes[index];\r\n\t\t\tvar name;\r\n\r\n\t\t\tif(attrib && typeof attrib == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0){\r\n\t\t\t\tname = attrib.name.replace(\"tabulator-\", \"\");\r\n\r\n\t\t\t\tif(typeof optionsList[name] !== \"undefined\"){\r\n\t\t\t\t\toptions[optionsList[name]] = this._attribValue(attrib.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//get value of attribute\r\n\t_attribValue(value){\r\n\t\tif(value === \"true\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif(value === \"false\"){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\t//find column if it has already been defined\r\n\t_findCol(title){\r\n\t\tvar match = this.table.options.columns.find((column) => {\r\n\t\t\treturn column.title === title;\r\n\t\t});\r\n\r\n\t\treturn match || false;\r\n\t}\r\n\r\n\t//extract column from headers\r\n\t_extractHeaders(headers, rows){\r\n\t\tfor(var index = 0; index < headers.length; index++){\r\n\t\t\tvar header = headers[index],\r\n\t\t\texists = false,\r\n\t\t\tcol = this._findCol(header.textContent),\r\n\t\t\twidth;\r\n\r\n\t\t\tif(col){\r\n\t\t\t\texists = true;\r\n\t\t\t}else{\r\n\t\t\t\tcol = {title:header.textContent.trim()};\r\n\t\t\t}\r\n\r\n\t\t\tif(!col.field) {\r\n\t\t\t\tcol.field = header.textContent.trim().toLowerCase().replace(\" \", \"_\");\r\n\t\t\t}\r\n\r\n\t\t\twidth = header.getAttribute(\"width\");\r\n\r\n\t\t\tif(width && !col.width)\t{\r\n\t\t\t\tcol.width = width;\r\n\t\t\t}\r\n\r\n\t\t\t//check for Tabulator inline options\r\n\t\t\tthis._extractOptions(header, col, this.table.columnManager.optionsList.registeredDefaults);\r\n\r\n\t\t\tthis.fieldIndex[index] = col.field;\r\n\r\n\t\t\tif(col.field == this.table.options.index){\r\n\t\t\t\tthis.hasIndex = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(!exists){\r\n\t\t\t\tthis.table.options.columns.push(col);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t//generate blank headers\r\n\t_generateBlankHeaders(headers, rows){\r\n\t\tfor(var index = 0; index < headers.length; index++){\r\n\t\t\tvar header = headers[index],\r\n\t\t\tcol = {title:\"\", field:\"col\" + index};\r\n\r\n\t\t\tthis.fieldIndex[index] = col.field;\r\n\r\n\t\t\tvar width = header.getAttribute(\"width\");\r\n\r\n\t\t\tif(width){\r\n\t\t\t\tcol.width = width;\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.options.columns.push(col);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nHtmlTableImport.moduleName = \"htmlTableImport\";\r\n\r\nexport default HtmlTableImport;","function csvImporter(input){\r\n\tvar data = [],\r\n\trow = 0, \r\n\tcol = 0,\r\n\tinQuote = false;\r\n    \r\n\t//Iterate over each character\r\n\tfor (let index = 0; index < input.length; index++) {\r\n\t\tlet char = input[index], \r\n\t\tnextChar = input[index+1];      \r\n        \r\n\t\t//Initialize empty row\r\n\t\tif(!data[row]){\r\n\t\t\tdata[row] = [];\r\n\t\t}\r\n\r\n\t\t//Initialize empty column\r\n\t\tif(!data[row][col]){\r\n\t\t\tdata[row][col] = \"\";\r\n\t\t}\r\n        \r\n\t\t//Handle quotation mark inside string\r\n\t\tif (char == '\"' && inQuote && nextChar == '\"') { \r\n\t\t\tdata[row][col] += char; \r\n\t\t\tindex++;\r\n\t\t\tcontinue; \r\n\t\t}\r\n        \r\n\t\t//Begin / End Quote\r\n\t\tif (char == '\"') { \r\n\t\t\tinQuote = !inQuote;\r\n\t\t\tcontinue;\r\n\t\t}\r\n        \r\n\t\t//Next column (if not in quote)\r\n\t\tif (char == ',' && !inQuote) { \r\n\t\t\tcol++;\r\n\t\t\tcontinue; \r\n\t\t}\r\n        \r\n\t\t//New row if new line and not in quote (CRLF) \r\n\t\tif (char == '\\r' && nextChar == '\\n' && !inQuote) { \r\n\t\t\tcol = 0; \r\n\t\t\trow++; \r\n\t\t\tindex++; \r\n\t\t\tcontinue; \r\n\t\t}\r\n        \r\n\t\t//New row if new line and not in quote (CR or LF) \r\n\t\tif ((char == '\\r' || char == '\\n') && !inQuote) { \r\n\t\t\tcol = 0;\r\n\t\t\trow++;\r\n\t\t\tcontinue; \r\n\t\t}\r\n\r\n\t\t//Normal Character, append to column\r\n\t\tdata[row][col] += char;\r\n\t}\r\n\r\n\treturn data;\r\n}\r\n\r\nexport default csvImporter;","export default function(input){\r\n\ttry {\r\n\t\treturn JSON.parse(input);\r\n\t} catch(e) {\r\n\t\tconsole.warn(\"JSON Import Error - File contents is invalid JSON\", e);\r\n\t\treturn Promise.reject();\r\n\t}\r\n}","function arrayImporter(input){\r\n\treturn input;\r\n}\r\n\r\nexport default arrayImporter;","import csv from './importers/csv.js';\r\nimport json from './importers/json.js';\r\nimport array from './importers/array.js';\r\n\r\nexport default {\r\n\tcsv:csv,\r\n\tjson:json,\r\n\tarray:array,\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultImporters from './defaults/importers.js';\r\n\r\nclass Import extends Module{\r\n    \r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n        \r\n\t\tthis.registerTableOption(\"importFormat\");\r\n\t\tthis.registerTableOption(\"importReader\", \"text\");\r\n\t}\r\n    \r\n\tinitialize(){\r\n\t\tthis.registerTableFunction(\"import\", this.importFromFile.bind(this));\r\n\r\n\t\tif(this.table.options.importFormat){\r\n\t\t\tthis.subscribe(\"data-loading\", this.loadDataCheck.bind(this), 10);\r\n\t\t\tthis.subscribe(\"data-load\", this.loadData.bind(this), 10);\r\n\t\t}\r\n\t}\r\n\r\n\tloadDataCheck(data){\r\n\t\treturn this.table.options.importFormat && (typeof data === \"string\" || (Array.isArray(data) && data.length && Array.isArray(data)));\r\n\t}\r\n\r\n\tloadData(data, params, config, silent, previousData){\r\n\t\treturn this.importData(this.lookupImporter(), data)\r\n\t\t\t.then(this.structureData.bind(this))\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.error(\"Import Error:\", err || \"Unable to import data\");\r\n\t\t\t\treturn Promise.reject(err);\r\n\t\t\t});\r\n\t}\r\n\r\n\tlookupImporter(importFormat){\r\n\t\tvar importer;\r\n        \r\n\t\tif(!importFormat){\r\n\t\t\timportFormat = this.table.options.importFormat;\r\n\t\t}\r\n        \r\n\t\tif(typeof importFormat === \"string\"){\r\n\t\t\timporter = Import.importers[importFormat];\r\n\t\t}else{\r\n\t\t\timporter = importFormat;\r\n\t\t}\r\n\r\n\t\tif(!importer){\r\n\t\t\tconsole.error(\"Import Error - Importer not found:\", importFormat);\r\n\t\t}\r\n        \r\n\t\treturn importer;\r\n\t}\r\n    \r\n\timportFromFile(importFormat, extension){\r\n\t\tvar importer = this.lookupImporter(importFormat);\r\n        \r\n\t\tif(importer){\r\n\t\t\treturn this.pickFile(extension)\r\n\t\t\t\t.then(this.importData.bind(this, importer))\r\n\t\t\t\t.then(this.structureData.bind(this))\r\n\t\t\t\t.then(this.setData.bind(this))\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tconsole.error(\"Import Error:\", err || \"Unable to import file\");\r\n\t\t\t\t\treturn Promise.reject(err);\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n    \r\n\tpickFile(extensions){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar input = document.createElement(\"input\");\r\n\t\t\tinput.type = \"file\";\r\n\t\t\tinput.accept = extensions;\r\n            \r\n\t\t\tinput.addEventListener(\"change\", (e) => {\r\n\t\t\t\tvar file = input.files[0],\r\n\t\t\t\treader = new FileReader();\r\n                \r\n\t\t\t\tswitch(this.table.options.importReader){\r\n\t\t\t\t\tcase \"buffer\":\r\n\t\t\t\t\t\treader.readAsArrayBuffer(file);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"binary\":\r\n\t\t\t\t\t\treader.readAsBinaryString(file);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"url\":\r\n\t\t\t\t\t\treader.readAsDataURL(file);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"text\":\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treader.readAsText(file);\r\n\t\t\t\t}\r\n                  \r\n\t\t\t\treader.onload = (e) => {\r\n\t\t\t\t\tresolve(reader.result);\r\n\t\t\t\t};\r\n                \r\n\t\t\t\treader.onerror = (e) => {\r\n\t\t\t\t\tconsole.warn(\"File Load Error - Unable to read file\");\r\n\t\t\t\t\treject();\r\n\t\t\t\t};\r\n\t\t\t});\r\n            \r\n\t\t\tinput.click();\r\n\t\t});\r\n\t}\r\n    \r\n\timportData(importer, fileContents){\r\n\t\tvar data = importer.call(this.table, fileContents);\r\n        \r\n\t\tif(data instanceof Promise){\r\n\t\t\treturn data;\r\n\t\t}else{\r\n\t\t\treturn data ? Promise.resolve(data) : Promise.reject();\r\n\t\t}\r\n\t}\r\n\r\n\tstructureData(parsedData){\r\n\t\tvar data = [];\r\n        \r\n\t\tif(Array.isArray(parsedData) && parsedData.length && Array.isArray(parsedData[0])){\r\n\t\t\tif(this.table.options.autoColumns){\r\n\t\t\t\tdata = this.structureArrayToObject(parsedData);\r\n\t\t\t}else{\r\n\t\t\t\tdata = this.structureArrayToColumns(parsedData);\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t}else{\r\n\t\t\treturn parsedData;\r\n\t\t}\r\n\t}\r\n\r\n\tstructureArrayToObject(parsedData){\r\n\t\tvar columns = parsedData.shift();\r\n\r\n\t\tvar data = parsedData.map((values) => {\r\n\t\t\tvar row = {};\r\n\r\n\t\t\tcolumns.forEach((key, i) => {\r\n\t\t\t\trow[key] = values[i];\r\n\t\t\t});\r\n\r\n\t\t\treturn row;\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tstructureArrayToColumns(parsedData){\r\n\t\tvar data = [],\r\n\t\tcolumns = this.table.getColumns();\r\n\r\n\t\t//remove first row if it is the column names\r\n\t\tif(columns[0] && parsedData[0][0]){\r\n\t\t\tif(columns[0].getDefinition().title === parsedData[0][0]){\r\n\t\t\t\tparsedData.shift();\r\n\t\t\t}\r\n\t\t}\r\n        \r\n\t\t//convert row arrays to objects\r\n\t\tparsedData.forEach((rowData) => {\r\n\t\t\tvar row = {};\r\n\r\n\t\t\trowData.forEach((value, index) => {\r\n\t\t\t\tvar column = columns[index];\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\trow[column.getField()] = value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tdata.push(row);\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n    \r\n\tsetData(data){\r\n\t\treturn this.table.setData(data);\r\n\t}\r\n}\r\n\r\nImport.moduleName = \"import\";\r\n\r\n//load defaults\r\nImport.importers = defaultImporters;\r\n\r\nexport default Import;","import Module from '../../core/Module.js';\r\n\r\nimport Cell from '../../core/cell/Cell.js';\r\nimport Column from '../../core/column/Column.js';\r\n\r\nclass Interaction extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.eventMap = {\r\n\t\t\t//row events\r\n\t\t\trowClick:\"row-click\",\r\n\t\t\trowDblClick:\"row-dblclick\",\r\n\t\t\trowContext:\"row-contextmenu\",\r\n\t\t\trowMouseEnter:\"row-mouseenter\",\r\n\t\t\trowMouseLeave:\"row-mouseleave\",\r\n\t\t\trowMouseOver:\"row-mouseover\",\r\n\t\t\trowMouseOut:\"row-mouseout\",\r\n\t\t\trowMouseMove:\"row-mousemove\",\r\n\t\t\trowTap:\"row\",\r\n\t\t\trowDblTap:\"row\",\r\n\t\t\trowTapHold:\"row\",\r\n\r\n\t\t\t//cell events\r\n\t\t\tcellClick:\"cell-click\",\r\n\t\t\tcellDblClick:\"cell-dblclick\",\r\n\t\t\tcellContext:\"cell-contextmenu\",\r\n\t\t\tcellMouseEnter:\"cell-mouseenter\",\r\n\t\t\tcellMouseLeave:\"cell-mouseleave\",\r\n\t\t\tcellMouseOver:\"cell-mouseover\",\r\n\t\t\tcellMouseOut:\"cell-mouseout\",\r\n\t\t\tcellMouseMove:\"cell-mousemove\",\r\n\t\t\tcellTap:\"cell\",\r\n\t\t\tcellDblTap:\"cell\",\r\n\t\t\tcellTapHold:\"cell\",\r\n\r\n\t\t\t//column header events\r\n\t\t\theaderClick:\"column-click\",\r\n\t\t\theaderDblClick:\"column-dblclick\",\r\n\t\t\theaderContext:\"column-contextmenu\",\r\n\t\t\theaderMouseEnter:\"column-mouseenter\",\r\n\t\t\theaderMouseLeave:\"column-mouseleave\",\r\n\t\t\theaderMouseOver:\"column-mouseover\",\r\n\t\t\theaderMouseOut:\"column-mouseout\",\r\n\t\t\theaderMouseMove:\"column-mousemove\",\r\n\t\t\theaderTap:\"column\",\r\n\t\t\theaderDblTap:\"column\",\r\n\t\t\theaderTapHold:\"column\",\r\n\r\n\t\t\t//group header\r\n\t\t\tgroupClick:\"group-click\",\r\n\t\t\tgroupDblClick:\"group-dblclick\",\r\n\t\t\tgroupContext:\"group-contextmenu\",\r\n\t\t\tgroupMouseEnter:\"group-mouseenter\",\r\n\t\t\tgroupMouseLeave:\"group-mouseleave\",\r\n\t\t\tgroupMouseOver:\"group-mouseover\",\r\n\t\t\tgroupMouseOut:\"group-mouseout\",\r\n\t\t\tgroupMouseMove:\"group-mousemove\",\r\n\t\t\tgroupTap:\"group\",\r\n\t\t\tgroupDblTap:\"group\",\r\n\t\t\tgroupTapHold:\"group\",\r\n\t\t};\r\n\r\n\t\tthis.subscribers = {};\r\n\r\n\t\tthis.touchSubscribers = {};\r\n\r\n\t\tthis.columnSubscribers = {};\r\n\r\n\t\tthis.touchWatchers = {\r\n\t\t\trow:{\r\n\t\t\t\ttap:null,\r\n\t\t\t\ttapDbl:null,\r\n\t\t\t\ttapHold:null,\r\n\t\t\t},\r\n\t\t\tcell:{\r\n\t\t\t\ttap:null,\r\n\t\t\t\ttapDbl:null,\r\n\t\t\t\ttapHold:null,\r\n\t\t\t},\r\n\t\t\tcolumn:{\r\n\t\t\t\ttap:null,\r\n\t\t\t\ttapDbl:null,\r\n\t\t\t\ttapHold:null,\r\n\t\t\t},\r\n\t\t\tgroup:{\r\n\t\t\t\ttap:null,\r\n\t\t\t\ttapDbl:null,\r\n\t\t\t\ttapHold:null,\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.registerColumnOption(\"headerClick\");\r\n\t\tthis.registerColumnOption(\"headerDblClick\");\r\n\t\tthis.registerColumnOption(\"headerContext\");\r\n\t\tthis.registerColumnOption(\"headerMouseEnter\");\r\n\t\tthis.registerColumnOption(\"headerMouseLeave\");\r\n\t\tthis.registerColumnOption(\"headerMouseOver\");\r\n\t\tthis.registerColumnOption(\"headerMouseOut\");\r\n\t\tthis.registerColumnOption(\"headerMouseMove\");\r\n\t\tthis.registerColumnOption(\"headerTap\");\r\n\t\tthis.registerColumnOption(\"headerDblTap\");\r\n\t\tthis.registerColumnOption(\"headerTapHold\");\r\n\r\n\t\tthis.registerColumnOption(\"cellClick\");\r\n\t\tthis.registerColumnOption(\"cellDblClick\");\r\n\t\tthis.registerColumnOption(\"cellContext\");\r\n\t\tthis.registerColumnOption(\"cellMouseEnter\");\r\n\t\tthis.registerColumnOption(\"cellMouseLeave\");\r\n\t\tthis.registerColumnOption(\"cellMouseOver\");\r\n\t\tthis.registerColumnOption(\"cellMouseOut\");\r\n\t\tthis.registerColumnOption(\"cellMouseMove\");\r\n\t\tthis.registerColumnOption(\"cellTap\");\r\n\t\tthis.registerColumnOption(\"cellDblTap\");\r\n\t\tthis.registerColumnOption(\"cellTapHold\");\r\n\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.initializeExternalEvents();\r\n\r\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\r\n\t\tthis.subscribe(\"cell-dblclick\", this.cellContentsSelectionFixer.bind(this));\r\n\t}\r\n\r\n\tcellContentsSelectionFixer(e, cell){\r\n\t\tvar range;\r\n\r\n\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\tif (this.table.modules.edit.currentCell === this){\r\n\t\t\t\treturn; //prevent instant selection of editor content\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\ttry{\r\n\t\t\tif (document.selection) { // IE\r\n\t\t\t\trange = document.body.createTextRange();\r\n\t\t\t\trange.moveToElementText(cell.getElement());\r\n\t\t\t\trange.select();\r\n\t\t\t} else if (window.getSelection) {\r\n\t\t\t\trange = document.createRange();\r\n\t\t\t\trange.selectNode(cell.getElement());\r\n\t\t\t\twindow.getSelection().removeAllRanges();\r\n\t\t\t\twindow.getSelection().addRange(range);\r\n\t\t\t}\r\n\t\t}catch(e){}\r\n\t}\r\n\r\n\tinitializeExternalEvents(){\r\n\t\tfor(let key in this.eventMap){\r\n\t\t\tthis.subscriptionChangeExternal(key, this.subscriptionChanged.bind(this, key));\r\n\t\t}\r\n\t}\r\n\r\n\tsubscriptionChanged(key, added){\r\n\t\tif(added){\r\n\t\t\tif(!this.subscribers[key]){\r\n\t\t\t\tif(this.eventMap[key].includes(\"-\")){\r\n\t\t\t\t\tthis.subscribers[key] = this.handle.bind(this, key);\r\n\t\t\t\t\tthis.subscribe(this.eventMap[key], this.subscribers[key]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.subscribeTouchEvents(key);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.eventMap[key].includes(\"-\")){\r\n\t\t\t\tif(this.subscribers[key] && !this.columnSubscribers[key]  && !this.subscribedExternal(key)){\r\n\t\t\t\t\tthis.unsubscribe(this.eventMap[key], this.subscribers[key]);\r\n\t\t\t\t\tdelete this.subscribers[key];\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.unsubscribeTouchEvents(key);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tsubscribeTouchEvents(key){\r\n\t\tvar type = this.eventMap[key];\r\n\r\n\t\tif(!this.touchSubscribers[type + \"-touchstart\"]){\r\n\t\t\tthis.touchSubscribers[type + \"-touchstart\"] = this.handleTouch.bind(this, type, \"start\");\r\n\t\t\tthis.touchSubscribers[type + \"-touchend\"] = this.handleTouch.bind(this, type, \"end\");\r\n\r\n\t\t\tthis.subscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\r\n\t\t\tthis.subscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\r\n\t\t}\r\n\r\n\t\tthis.subscribers[key] = true;\r\n\t}\r\n\r\n\tunsubscribeTouchEvents(key){\r\n\t\tvar noTouch = true,\r\n\t\ttype = this.eventMap[key];\r\n\r\n\t\tif(this.subscribers[key] && !this.subscribedExternal(key)){\r\n\t\t\tdelete this.subscribers[key];\r\n\r\n\t\t\tfor(let i in this.eventMap){\r\n\t\t\t\tif(this.eventMap[i] === type){\r\n\t\t\t\t\tif(this.subscribers[i]){\r\n\t\t\t\t\t\tnoTouch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(noTouch){\r\n\t\t\t\tthis.unsubscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\r\n\t\t\t\tthis.unsubscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\r\n\r\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchstart\"];\r\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchend\"];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeColumn(column){\r\n\t\tvar def = column.definition;\r\n\r\n\t\tfor(let key in this.eventMap){\r\n\t\t\tif(def[key]){\r\n\t\t\t\tthis.subscriptionChanged(key, true);\r\n\r\n\t\t\t\tif(!this.columnSubscribers[key]){\r\n\t\t\t\t\tthis.columnSubscribers[key] = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.columnSubscribers[key].push(column);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandle(action, e, component){\r\n\t\tthis.dispatchEvent(action, e, component);\r\n\t}\r\n\r\n\thandleTouch(type, action, e, component){\r\n\t\tvar watchers = this.touchWatchers[type];\r\n\r\n\t\tif(type === \"column\"){\r\n\t\t\ttype = \"header\";\r\n\t\t}\r\n\r\n\t\tswitch(action){\r\n\t\t\tcase \"start\":\r\n\t\t\t\twatchers.tap = true;\r\n\r\n\t\t\t\tclearTimeout(watchers.tapHold);\r\n\r\n\t\t\t\twatchers.tapHold = setTimeout(() => {\r\n\t\t\t\t\tclearTimeout(watchers.tapHold);\r\n\t\t\t\t\twatchers.tapHold = null;\r\n\r\n\t\t\t\t\twatchers.tap = null;\r\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\r\n\t\t\t\t\twatchers.tapDbl = null;\r\n\r\n\t\t\t\t\tthis.dispatchEvent(type + \"TapHold\", e,  component);\r\n\t\t\t\t}, 1000);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"end\":\r\n\t\t\t\tif(watchers.tap){\r\n\r\n\t\t\t\t\twatchers.tap = null;\r\n\t\t\t\t\tthis.dispatchEvent(type + \"Tap\", e,  component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(watchers.tapDbl){\r\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\r\n\t\t\t\t\twatchers.tapDbl = null;\r\n\r\n\t\t\t\t\tthis.dispatchEvent(type + \"DblTap\", e,  component);\r\n\t\t\t\t}else{\r\n\t\t\t\t\twatchers.tapDbl = setTimeout(() => {\r\n\t\t\t\t\t\tclearTimeout(watchers.tapDbl);\r\n\t\t\t\t\t\twatchers.tapDbl = null;\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tclearTimeout(watchers.tapHold);\r\n\t\t\t\twatchers.tapHold = null;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tdispatchEvent(action, e, component){\r\n\t\tvar componentObj = component.getComponent(),\r\n\t\tcallback;\r\n\r\n\t\tif(this.columnSubscribers[action]){\r\n\r\n\t\t\tif(component instanceof Cell){\r\n\t\t\t\tcallback = component.column.definition[action];\r\n\t\t\t}else if(component instanceof Column){\r\n\t\t\t\tcallback = component.definition[action];\r\n\t\t\t}\r\n\r\n\t\t\tif(callback){\r\n\t\t\t\tcallback(e, componentObj);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.dispatchExternal(action, e, componentObj);\r\n\t}\r\n}\r\n\r\nInteraction.moduleName = \"interaction\";\r\n\r\nexport default Interaction;\r\n","export default {\r\n\tnavPrev:\"shift + 9\",\r\n\tnavNext:9,\r\n\tnavUp:38,\r\n\tnavDown:40,\r\n\tscrollPageUp:33,\r\n\tscrollPageDown:34,\r\n\tscrollToStart:36,\r\n\tscrollToEnd:35,\r\n\tundo:[\"ctrl + 90\", \"meta + 90\"],\r\n\tredo:[\"ctrl + 89\", \"meta + 89\"],\r\n\tcopyToClipboard:[\"ctrl + 67\", \"meta + 89\"],\r\n};","export default {\r\n\tkeyBlock:function(e){\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\t},\r\n\tscrollPageUp:function(e){\r\n\t\tvar rowManager = this.table.rowManager,\r\n\t\tnewPos = rowManager.scrollTop - rowManager.element.clientHeight;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(rowManager.displayRowsCount){\r\n\t\t\tif(newPos >= 0){\r\n\t\t\t\trowManager.element.scrollTop = newPos;\r\n\t\t\t}else{\r\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.table.element.focus();\r\n\t},\r\n\tscrollPageDown:function(e){\r\n\t\tvar rowManager = this.table.rowManager,\r\n\t\tnewPos = rowManager.scrollTop + rowManager.element.clientHeight,\r\n\t\tscrollMax = rowManager.element.scrollHeight;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(rowManager.displayRowsCount){\r\n\t\t\tif(newPos <= scrollMax){\r\n\t\t\t\trowManager.element.scrollTop = newPos;\r\n\t\t\t}else{\r\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.table.element.focus();\r\n\r\n\t},\r\n\tscrollToStart:function(e){\r\n\t\tvar rowManager = this.table.rowManager;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(rowManager.displayRowsCount){\r\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\r\n\t\t}\r\n\r\n\t\tthis.table.element.focus();\r\n\t},\r\n\tscrollToEnd:function(e){\r\n\t\tvar rowManager = this.table.rowManager;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(rowManager.displayRowsCount){\r\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\r\n\t\t}\r\n\r\n\t\tthis.table.element.focus();\r\n\t},\r\n\tnavPrev:function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-prev\", e);\r\n\t},\r\n\r\n\tnavNext:function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-next\", e);\r\n\t},\r\n\r\n\tnavLeft:function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-left\", e);\r\n\t},\r\n\r\n\tnavRight:function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-right\", e);\r\n\t},\r\n\r\n\tnavUp:function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-up\", e);\r\n\t},\r\n\r\n\tnavDown:function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-down\", e);\r\n\t},\r\n\r\n\tundo:function(e){\r\n\t\tvar cell = false;\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\r\n\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(!cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.table.modules.history.undo();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tredo:function(e){\r\n\t\tvar cell = false;\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\r\n\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(!cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.table.modules.history.redo();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcopyToClipboard:function(e){\r\n\t\tif(!this.table.modules.edit.currentCell){\r\n\t\t\tif(this.table.modExists(\"clipboard\", true)){\r\n\t\t\t\tthis.table.modules.clipboard.copy(false, true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultBindings from './defaults/bindings.js';\r\nimport defaultActions from './defaults/actions.js';\r\n\r\nclass Keybindings extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.watchKeys = null;\r\n\t\tthis.pressedKeys = null;\r\n\t\tthis.keyupBinding = false;\r\n\t\tthis.keydownBinding = false;\r\n\r\n\t\tthis.registerTableOption(\"keybindings\", {}); //array for keybindings\r\n\t\tthis.registerTableOption(\"tabEndNewRow\", false); //create new row when tab to end of table\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tvar bindings = this.table.options.keybindings,\r\n\t\tmergedBindings = {};\r\n\r\n\t\tthis.watchKeys = {};\r\n\t\tthis.pressedKeys = [];\r\n\r\n\t\tif(bindings !== false){\r\n\t\t\tObject.assign(mergedBindings, Keybindings.bindings);\r\n\t\t\tObject.assign(mergedBindings, bindings);\r\n\r\n\t\t\tthis.mapBindings(mergedBindings);\r\n\t\t\tthis.bindEvents();\r\n\t\t}\r\n\r\n\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\r\n\t}\r\n\r\n\tmapBindings(bindings){\r\n\t\tfor(let key in bindings){\r\n\t\t\tif(Keybindings.actions[key]){\r\n\t\t\t\tif(bindings[key]){\r\n\t\t\t\t\tif(typeof bindings[key] !== \"object\"){\r\n\t\t\t\t\t\tbindings[key] = [bindings[key]];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbindings[key].forEach((binding) => {\r\n\t\t\t\t\t\tvar bindingList = Array.isArray(binding) ?  binding : [binding];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tbindingList.forEach((item) => {\r\n\t\t\t\t\t\t\tthis.mapBinding(key, item);\r\n\t\t\t\t\t\t});\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Key Binding Error - no such action:\", key);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmapBinding(action, symbolsList){\r\n\t\tvar binding = {\r\n\t\t\taction: Keybindings.actions[action],\r\n\t\t\tkeys: [],\r\n\t\t\tctrl: false,\r\n\t\t\tshift: false,\r\n\t\t\tmeta: false,\r\n\t\t};\r\n\r\n\t\tvar symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\r\n\r\n\t\tsymbols.forEach((symbol) => {\r\n\t\t\tswitch(symbol){\r\n\t\t\t\tcase \"ctrl\":\r\n\t\t\t\t\tbinding.ctrl = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"shift\":\r\n\t\t\t\t\tbinding.shift = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"meta\":\r\n\t\t\t\t\tbinding.meta = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tsymbol = isNaN(symbol) ? symbol.toUpperCase().charCodeAt(0) : parseInt(symbol);\r\n\t\t\t\t\tbinding.keys.push(symbol);\r\n\r\n\t\t\t\t\tif(!this.watchKeys[symbol]){\r\n\t\t\t\t\t\tthis.watchKeys[symbol] = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.watchKeys[symbol].push(binding);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tbindEvents(){\r\n\t\tvar self = this;\r\n\r\n\t\tthis.keyupBinding = function(e){\r\n\t\t\tvar code = e.keyCode;\r\n\t\t\tvar bindings = self.watchKeys[code];\r\n\r\n\t\t\tif(bindings){\r\n\r\n\t\t\t\tself.pressedKeys.push(code);\r\n\r\n\t\t\t\tbindings.forEach(function(binding){\r\n\t\t\t\t\tself.checkBinding(e, binding);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.keydownBinding = function(e){\r\n\t\t\tvar code = e.keyCode;\r\n\t\t\tvar bindings = self.watchKeys[code];\r\n\r\n\t\t\tif(bindings){\r\n\r\n\t\t\t\tvar index = self.pressedKeys.indexOf(code);\r\n\r\n\t\t\t\tif(index > -1){\r\n\t\t\t\t\tself.pressedKeys.splice(index, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.table.element.addEventListener(\"keydown\", this.keyupBinding);\r\n\r\n\t\tthis.table.element.addEventListener(\"keyup\", this.keydownBinding);\r\n\t}\r\n\r\n\tclearBindings(){\r\n\t\tif(this.keyupBinding){\r\n\t\t\tthis.table.element.removeEventListener(\"keydown\", this.keyupBinding);\r\n\t\t}\r\n\r\n\t\tif(this.keydownBinding){\r\n\t\t\tthis.table.element.removeEventListener(\"keyup\", this.keydownBinding);\r\n\t\t}\r\n\t}\r\n\r\n\tcheckBinding(e, binding){\r\n\t\tvar match = true;\r\n\r\n\t\tif(e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta){\r\n\t\t\tbinding.keys.forEach((key) => {\r\n\t\t\t\tvar index = this.pressedKeys.indexOf(key);\r\n\r\n\t\t\t\tif(index == -1){\r\n\t\t\t\t\tmatch = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(match){\r\n\t\t\t\tbinding.action.call(this, e);\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nKeybindings.moduleName = \"keybindings\";\r\n\r\n//load defaults\r\nKeybindings.bindings = defaultBindings;\r\nKeybindings.actions = defaultActions;\r\n\r\nexport default Keybindings;","import Module from '../../core/Module.js';\r\n\r\nclass Menu extends Module{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.menuContainer = null;\r\n\t\tthis.nestedMenuBlock = false;\r\n\t\t\r\n\t\tthis.currentComponent = null;\r\n\t\tthis.rootPopup = null;\r\n\t\t\r\n\t\tthis.columnSubscribers = {};\r\n\t\t\r\n\t\tthis.registerTableOption(\"menuContainer\", undefined); //deprecated\r\n\r\n\t\tthis.registerTableOption(\"rowContextMenu\", false);\r\n\t\tthis.registerTableOption(\"rowClickMenu\", false);\r\n\t\tthis.registerTableOption(\"groupContextMenu\", false);\r\n\t\tthis.registerTableOption(\"groupClickMenu\", false);\r\n\t\t\r\n\t\tthis.registerColumnOption(\"headerContextMenu\");\r\n\t\tthis.registerColumnOption(\"headerClickMenu\");\r\n\t\tthis.registerColumnOption(\"headerMenu\");\r\n\t\tthis.registerColumnOption(\"headerMenuIcon\");\r\n\t\tthis.registerColumnOption(\"contextMenu\");\r\n\t\tthis.registerColumnOption(\"clickMenu\");\r\n\t\t\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tthis.deprecatedOptionsCheck();\r\n\t\tthis.initializeRowWatchers();\r\n\t\tthis.initializeGroupWatchers();\r\n\t\t\r\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\r\n\t}\r\n\r\n\tdeprecatedOptionsCheck(){\r\n\t\tif(!this.deprecationCheck(\"menuContainer\", \"popupContainer\")){\r\n\t\t\tthis.table.options.popupContainer = this.table.options.menuContainer;\r\n\t\t}\r\n\t}\t\r\n\t\r\n\tinitializeRowWatchers(){\r\n\t\tif(this.table.options.rowContextMenu){\r\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\r\n\t\t\tthis.table.on(\"rowTapHold\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\r\n\t\t}\r\n\t\t\r\n\t\tif(this.table.options.rowClickMenu){\r\n\t\t\tthis.subscribe(\"row-click\", this.loadMenuEvent.bind(this, this.table.options.rowClickMenu));\r\n\t\t}\r\n\t}\r\n\t\r\n\tinitializeGroupWatchers(){\r\n\t\tif(this.table.options.groupContextMenu){\r\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\r\n\t\t\tthis.table.on(\"groupTapHold\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\r\n\t\t}\r\n\t\t\r\n\t\tif(this.table.options.groupClickMenu){\r\n\t\t\tthis.subscribe(\"group-click\", this.loadMenuEvent.bind(this, this.table.options.groupClickMenu));\r\n\t\t}\r\n\t}\r\n\t\r\n\tinitializeColumn(column){\r\n\t\tvar\tdef = column.definition;\r\n\t\t\r\n\t\t//handle column events\r\n\t\tif(def.headerContextMenu && !this.columnSubscribers.headerContextMenu){\r\n\t\t\tthis.columnSubscribers.headerContextMenu = this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\");\r\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextMenu);\r\n\t\t\tthis.table.on(\"headerTapHold\", this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\"));\r\n\t\t}\r\n\t\t\r\n\t\tif(def.headerClickMenu && !this.columnSubscribers.headerClickMenu){\r\n\t\t\tthis.columnSubscribers.headerClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerClickMenu\");\r\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickMenu);\r\n\t\t}\r\n\t\t\r\n\t\tif(def.headerMenu){\r\n\t\t\tthis.initializeColumnHeaderMenu(column);\r\n\t\t}\r\n\t\t\r\n\t\t//handle cell events\r\n\t\tif(def.contextMenu && !this.columnSubscribers.contextMenu){\r\n\t\t\tthis.columnSubscribers.contextMenu = this.loadMenuTableCellEvent.bind(this, \"contextMenu\");\r\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextMenu);\r\n\t\t\tthis.table.on(\"cellTapHold\", this.loadMenuTableCellEvent.bind(this, \"contextMenu\"));\r\n\t\t}\r\n\t\t\r\n\t\tif(def.clickMenu && !this.columnSubscribers.clickMenu){\r\n\t\t\tthis.columnSubscribers.clickMenu = this.loadMenuTableCellEvent.bind(this, \"clickMenu\");\r\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickMenu);\r\n\t\t}\r\n\t}\r\n\t\r\n\tinitializeColumnHeaderMenu(column){\r\n\t\tvar icon = column.definition.headerMenuIcon,\r\n\t\theaderMenuEl;\r\n\t\t\r\n\t\theaderMenuEl = document.createElement(\"span\");\r\n\t\theaderMenuEl.classList.add(\"tabulator-header-popup-button\");\r\n\r\n\t\tif(icon){\r\n\t\t\tif(typeof icon === \"function\"){\r\n\t\t\t\ticon = icon(column.getComponent());\r\n\t\t\t}\r\n\r\n\t\t\tif(icon instanceof HTMLElement){\r\n\t\t\t\theaderMenuEl.appendChild(icon);\r\n\t\t\t}else{\r\n\t\t\t\theaderMenuEl.innerHTML = icon;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\theaderMenuEl.innerHTML = \"&vellip;\";\r\n\t\t}\r\n\t\t\r\n\t\theaderMenuEl.addEventListener(\"click\", (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\t\r\n\t\t\tthis.loadMenuEvent(column.definition.headerMenu, e, column);\r\n\t\t});\r\n\t\t\r\n\t\tcolumn.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\r\n\t}\r\n\t\r\n\tloadMenuTableCellEvent(option, e, cell){\r\n\t\tif(cell._cell){\r\n\t\t\tcell = cell._cell;\r\n\t\t}\r\n\t\t\r\n\t\tif(cell.column.definition[option]){\r\n\t\t\tthis.loadMenuEvent(cell.column.definition[option], e, cell);\r\n\t\t}\r\n\t}\r\n\t\r\n\tloadMenuTableColumnEvent(option, e, column){\r\n\t\tif(column._column){\r\n\t\t\tcolumn = column._column;\r\n\t\t}\r\n\t\t\r\n\t\tif(column.definition[option]){\r\n\t\t\tthis.loadMenuEvent(column.definition[option], e, column);\r\n\t\t}\r\n\t}\r\n\t\r\n\tloadMenuEvent(menu, e, component){\r\n\t\tif(component._group){\r\n\t\t\tcomponent = component._group;\r\n\t\t}else if(component._row){\r\n\t\t\tcomponent = component._row;\r\n\t\t}\r\n\t\t\r\n\t\tmenu = typeof menu == \"function\" ? menu.call(this.table, e, component.getComponent()) : menu;\r\n\t\t\r\n\t\tthis.loadMenu(e, component, menu);\r\n\t}\r\n\t\r\n\tloadMenu(e, component, menu, parentEl, parentPopup){\r\n\t\tvar touch = !(e instanceof MouseEvent),\t\t\r\n\t\tmenuEl = document.createElement(\"div\"),\r\n\t\tpopup;\r\n\t\t\r\n\t\tmenuEl.classList.add(\"tabulator-menu\");\r\n\t\t\r\n\t\tif(!touch){\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\r\n\t\t//abort if no menu set\r\n\t\tif(!menu || !menu.length){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif(!parentEl){\r\n\t\t\tif(this.nestedMenuBlock){\r\n\t\t\t\t//abort if child menu already open\r\n\t\t\t\tif(this.rootPopup){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.nestedMenuBlock = setTimeout(() => {\r\n\t\t\t\t\tthis.nestedMenuBlock = false;\r\n\t\t\t\t}, 100);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(this.rootPopup){\r\n\t\t\t\tthis.rootPopup.hide();\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.rootPopup = popup = this.popup(menuEl);\r\n\t\t\t\r\n\t\t}else{\r\n\t\t\tpopup = parentPopup.child(menuEl);\r\n\t\t}\r\n\t\t\r\n\t\tmenu.forEach((item) => {\r\n\t\t\tvar itemEl = document.createElement(\"div\"),\r\n\t\t\tlabel = item.label,\r\n\t\t\tdisabled = item.disabled;\r\n\t\t\t\r\n\t\t\tif(item.separator){\r\n\t\t\t\titemEl.classList.add(\"tabulator-menu-separator\");\r\n\t\t\t}else{\r\n\t\t\t\titemEl.classList.add(\"tabulator-menu-item\");\r\n\t\t\t\t\r\n\t\t\t\tif(typeof label == \"function\"){\r\n\t\t\t\t\tlabel = label.call(this.table, component.getComponent());\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(label instanceof Node){\r\n\t\t\t\t\titemEl.appendChild(label);\r\n\t\t\t\t}else{\r\n\t\t\t\t\titemEl.innerHTML = label;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(typeof disabled == \"function\"){\r\n\t\t\t\t\tdisabled = disabled.call(this.table, component.getComponent());\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(disabled){\r\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-disabled\");\r\n\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(item.menu && item.menu.length){\r\n\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\tthis.loadMenu(e, component, item.menu, itemEl, popup);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(item.action){\r\n\t\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\t\t\t\titem.action(e, component.getComponent());\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(item.menu && item.menu.length){\r\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-submenu\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tmenuEl.appendChild(itemEl);\r\n\t\t});\r\n\t\t\r\n\t\tmenuEl.addEventListener(\"click\", (e) => {\r\n\t\t\tthis.rootPopup.hide();\r\n\t\t});\r\n\t\t\r\n\t\tpopup.show(parentEl || e);\r\n\t\t\r\n\t\tif(popup === this.rootPopup){\r\n\t\t\tthis.rootPopup.hideOnBlur(() => {\r\n\t\t\t\tthis.rootPopup = null;\r\n\t\t\t\t\r\n\t\t\t\tif(this.currentComponent){\r\n\t\t\t\t\tthis.dispatchExternal(\"menuClosed\", this.currentComponent.getComponent());\r\n\t\t\t\t\tthis.currentComponent = null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.currentComponent = component;\r\n\r\n\t\t\tthis.dispatchExternal(\"menuOpened\", component.getComponent());\r\n\t\t}\r\n\t}\r\n}\r\n\r\nMenu.moduleName = \"menu\";\r\n\r\nexport default Menu;\r\n","import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/tools/Helpers.js';\r\n\r\nclass MoveColumns extends Module{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.placeholderElement = this.createPlaceholderElement();\r\n\t\tthis.hoverElement = false; //floating column header element\r\n\t\tthis.checkTimeout = false; //click check timeout holder\r\n\t\tthis.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\r\n\t\tthis.moving = false; //currently moving column\r\n\t\tthis.toCol = false; //destination column\r\n\t\tthis.toColAfter = false; //position of moving column relative to the destination column\r\n\t\tthis.startX = 0; //starting position within header element\r\n\t\tthis.autoScrollMargin = 40; //auto scroll on edge when within margin\r\n\t\tthis.autoScrollStep = 5; //auto scroll distance in pixels\r\n\t\tthis.autoScrollTimeout = false; //auto scroll timeout\r\n\t\tthis.touchMove = false;\r\n\t\t\r\n\t\tthis.moveHover = this.moveHover.bind(this);\r\n\t\tthis.endMove = this.endMove.bind(this);\r\n\t\t\r\n\t\tthis.registerTableOption(\"movableColumns\", false); //enable movable columns\r\n\t}\r\n\t\r\n\tcreatePlaceholderElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\t\r\n\t\tel.classList.add(\"tabulator-col\");\r\n\t\tel.classList.add(\"tabulator-col-placeholder\");\r\n\t\t\r\n\t\treturn el;\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tif(this.table.options.movableColumns){\r\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\r\n\t\t}\r\n\t}\r\n\t\r\n\tinitializeColumn(column){\r\n\t\tvar self = this,\r\n\t\tconfig = {},\r\n\t\tcolEl;\r\n\t\t\r\n\t\tif(!column.modules.frozen && !column.isGroup){\r\n\t\t\tcolEl = column.getElement();\r\n\t\t\t\r\n\t\t\tconfig.mousemove = function(e){\r\n\t\t\t\tif(column.parent === self.moving.parent){\r\n\t\t\t\t\tif((((self.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(colEl).left) + self.table.columnManager.element.scrollLeft) > (column.getWidth() / 2)){\r\n\t\t\t\t\t\tif(self.toCol !== column || !self.toColAfter){\r\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\r\n\t\t\t\t\t\t\tself.moveColumn(column, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(self.toCol !== column || self.toColAfter){\r\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl);\r\n\t\t\t\t\t\t\tself.moveColumn(column, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}.bind(self);\r\n\t\t\t\r\n\t\t\tcolEl.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\tself.touchMove = false;\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\r\n\t\t\t\t\t\tself.startMove(e, column);\r\n\t\t\t\t\t}, self.checkPeriod);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tcolEl.addEventListener(\"mouseup\", function(e){\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tif(self.checkTimeout){\r\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tself.bindTouchEvents(column);\r\n\t\t}\r\n\t\t\r\n\t\tcolumn.modules.moveColumn = config;\r\n\t}\r\n\t\r\n\tbindTouchEvents(column){\r\n\t\tvar colEl = column.getElement(),\r\n\t\tstartXMove = false, //shifting center position of the cell\r\n\t\tnextCol, prevCol, nextColWidth, prevColWidth, nextColWidthLast, prevColWidthLast;\r\n\t\t\r\n\t\tcolEl.addEventListener(\"touchstart\", (e) => {\r\n\t\t\tthis.checkTimeout = setTimeout(() => {\r\n\t\t\t\tthis.touchMove = true;\r\n\t\t\t\tnextCol = column.nextColumn();\r\n\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth()/2 : 0;\r\n\t\t\t\tprevCol = column.prevColumn();\r\n\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth()/2 : 0;\r\n\t\t\t\tnextColWidthLast = 0;\r\n\t\t\t\tprevColWidthLast = 0;\r\n\t\t\t\tstartXMove = false;\r\n\t\t\t\t\r\n\t\t\t\tthis.startMove(e, column);\r\n\t\t\t}, this.checkPeriod);\r\n\t\t}, {passive: true});\r\n\t\t\r\n\t\tcolEl.addEventListener(\"touchmove\", (e) => {\r\n\t\t\tvar diff, moveToCol;\r\n\t\t\t\r\n\t\t\tif(this.moving){\r\n\t\t\t\tthis.moveHover(e);\r\n\t\t\t\t\r\n\t\t\t\tif(!startXMove){\r\n\t\t\t\t\tstartXMove = e.touches[0].pageX;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tdiff = e.touches[0].pageX - startXMove;\r\n\t\t\t\t\r\n\t\t\t\tif(diff > 0){\r\n\t\t\t\t\tif(nextCol && diff - nextColWidthLast > nextColWidth){\r\n\t\t\t\t\t\tmoveToCol = nextCol;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(moveToCol !== column){\r\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\r\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement().nextSibling);\r\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(prevCol && -diff - prevColWidthLast >  prevColWidth){\r\n\t\t\t\t\t\tmoveToCol = prevCol;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(moveToCol !== column){\r\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\r\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement());\r\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(moveToCol){\r\n\t\t\t\t\tnextCol = moveToCol.nextColumn();\r\n\t\t\t\t\tnextColWidthLast = nextColWidth;\r\n\t\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\r\n\t\t\t\t\tprevCol = moveToCol.prevColumn();\r\n\t\t\t\t\tprevColWidthLast = prevColWidth;\r\n\t\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, {passive: true});\r\n\t\t\r\n\t\tcolEl.addEventListener(\"touchend\", (e) => {\r\n\t\t\tif(this.checkTimeout){\r\n\t\t\t\tclearTimeout(this.checkTimeout);\r\n\t\t\t}\r\n\t\t\tif(this.moving){\r\n\t\t\t\tthis.endMove(e);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tstartMove(e, column){\r\n\t\tvar element = column.getElement(),\r\n\t\theaderElement = this.table.columnManager.getElement(),\r\n\t\theadersElement = this.table.columnManager.getHeadersElement();\r\n\t\t\r\n\t\tthis.moving = column;\r\n\t\tthis.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(element).left;\r\n\t\t\r\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\r\n\t\t\r\n\t\t//create placeholder\r\n\t\tthis.placeholderElement.style.width = column.getWidth() + \"px\";\r\n\t\tthis.placeholderElement.style.height = column.getHeight() + \"px\";\r\n\t\t\r\n\t\telement.parentNode.insertBefore(this.placeholderElement, element);\r\n\t\telement.parentNode.removeChild(element);\r\n\t\t\r\n\t\t//create hover element\r\n\t\tthis.hoverElement = element.cloneNode(true);\r\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\r\n\t\t\r\n\t\tthis.table.columnManager.getElement().appendChild(this.hoverElement);\r\n\t\t\r\n\t\tthis.hoverElement.style.left = \"0\";\r\n\t\tthis.hoverElement.style.bottom = (headerElement.clientHeight - headersElement.offsetHeight) + \"px\";\r\n\t\t\r\n\t\tif(!this.touchMove){\r\n\t\t\tthis._bindMouseMove();\r\n\t\t\t\r\n\t\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\r\n\t\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\r\n\t\t}\r\n\t\t\r\n\t\tthis.moveHover(e);\r\n\t}\r\n\t\r\n\t_bindMouseMove(){\r\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\r\n\t\t\tif(column.modules.moveColumn.mousemove){\r\n\t\t\t\tcolumn.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t_unbindMouseMove(){\r\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\r\n\t\t\tif(column.modules.moveColumn.mousemove){\r\n\t\t\t\tcolumn.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tmoveColumn(column, after){\r\n\t\tvar movingCells = this.moving.getCells();\r\n\t\t\r\n\t\tthis.toCol = column;\r\n\t\tthis.toColAfter = after;\r\n\t\t\r\n\t\tif(after){\r\n\t\t\tcolumn.getCells().forEach(function(cell, i){\r\n\t\t\t\tvar cellEl = cell.getElement(true);\r\n\t\t\t\t\r\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\r\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tcolumn.getCells().forEach(function(cell, i){\r\n\t\t\t\tvar cellEl = cell.getElement(true);\r\n\t\t\t\t\r\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\r\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\tendMove(e){\r\n\t\tif(e.which === 1 || this.touchMove){\r\n\t\t\tthis._unbindMouseMove();\r\n\t\t\t\r\n\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\r\n\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\r\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\r\n\t\t\t\r\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\r\n\t\t\t\r\n\t\t\tif(this.toCol){\r\n\t\t\t\tthis.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.moving = false;\r\n\t\t\tthis.toCol = false;\r\n\t\t\tthis.toColAfter = false;\r\n\t\t\t\r\n\t\t\tif(!this.touchMove){\r\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\r\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tmoveHover(e){\r\n\t\tvar columnHolder = this.table.columnManager.getElement(),\r\n\t\tscrollLeft = columnHolder.scrollLeft,\r\n\t\txPos = ((this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(columnHolder).left) + scrollLeft,\r\n\t\tscrollPos;\r\n\t\t\r\n\t\tthis.hoverElement.style.left = (xPos - this.startX) + \"px\";\r\n\t\t\r\n\t\tif(xPos - scrollLeft < this.autoScrollMargin){\r\n\t\t\tif(!this.autoScrollTimeout){\r\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\r\n\t\t\t\t\tscrollPos = Math.max(0,scrollLeft-5);\r\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\r\n\t\t\t\t\tthis.autoScrollTimeout = false;\r\n\t\t\t\t}, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(scrollLeft + columnHolder.clientWidth - xPos < this.autoScrollMargin){\r\n\t\t\tif(!this.autoScrollTimeout){\r\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\r\n\t\t\t\t\tscrollPos = Math.min(columnHolder.clientWidth, scrollLeft+5);\r\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\r\n\t\t\t\t\tthis.autoScrollTimeout = false;\r\n\t\t\t\t}, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nMoveColumns.moduleName = \"moveColumn\";\r\n\r\nexport default MoveColumns;\r\n","import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/tools/Helpers.js';\r\n\r\nclass MoveRows extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.placeholderElement = this.createPlaceholderElement();\r\n\t\tthis.hoverElement = false; //floating row header element\r\n\t\tthis.checkTimeout = false; //click check timeout holder\r\n\t\tthis.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\r\n\t\tthis.moving = false; //currently moving row\r\n\t\tthis.toRow = false; //destination row\r\n\t\tthis.toRowAfter = false; //position of moving row relative to the destination row\r\n\t\tthis.hasHandle = false; //row has handle instead of fully movable row\r\n\t\tthis.startY = 0; //starting Y position within header element\r\n\t\tthis.startX = 0; //starting X position within header element\r\n\r\n\t\tthis.moveHover = this.moveHover.bind(this);\r\n\t\tthis.endMove = this.endMove.bind(this);\r\n\t\tthis.tableRowDropEvent = false;\r\n\r\n\t\tthis.touchMove = false;\r\n\r\n\t\tthis.connection = false;\r\n\t\tthis.connectionSelectorsTables = false;\r\n\t\tthis.connectionSelectorsElements = false;\r\n\t\tthis.connectionElements = [];\r\n\t\tthis.connections = [];\r\n\r\n\t\tthis.connectedTable = false;\r\n\t\tthis.connectedRow = false;\r\n\r\n\t\tthis.registerTableOption(\"movableRows\", false); //enable movable rows\r\n\t\tthis.registerTableOption(\"movableRowsConnectedTables\", false); //tables for movable rows to be connected to\r\n\t\tthis.registerTableOption(\"movableRowsConnectedElements\", false); //other elements for movable rows to be connected to\r\n\t\tthis.registerTableOption(\"movableRowsSender\", false);\r\n\t\tthis.registerTableOption(\"movableRowsReceiver\", \"insert\");\r\n\r\n\t\tthis.registerColumnOption(\"rowHandle\");\r\n\t}\r\n\r\n\tcreatePlaceholderElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-row\");\r\n\t\tel.classList.add(\"tabulator-row-placeholder\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tif(this.table.options.movableRows){\r\n\t\t\tthis.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\r\n\t\t\tthis.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\r\n\r\n\t\t\tthis.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\r\n\r\n\t\t\tthis.subscribe(\"cell-init\", this.initializeCell.bind(this));\r\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\r\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeGroupHeader(group){\r\n\t\tvar self = this,\r\n\t\tconfig = {};\r\n\r\n\t\t//inter table drag drop\r\n\t\tconfig.mouseup = function(e){\r\n\t\t\tself.tableRowDrop(e, group);\r\n\t\t}.bind(self);\r\n\r\n\t\t//same table drag drop\r\n\t\tconfig.mousemove = function(e){\r\n\t\t\tvar rowEl;\r\n\r\n\t\t\tif(((e.pageY - Helpers.elOffset(group.element).top) + self.table.rowManager.element.scrollTop) > (group.getHeight() / 2)){\r\n\t\t\t\tif(self.toRow !== group || !self.toRowAfter){\r\n\t\t\t\t\trowEl = group.getElement();\r\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\r\n\t\t\t\t\tself.moveRow(group, true);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(self.toRow !== group || self.toRowAfter){\r\n\t\t\t\t\trowEl = group.getElement();\r\n\t\t\t\t\tif(rowEl.previousSibling){\r\n\t\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\r\n\t\t\t\t\t\tself.moveRow(group, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}.bind(self);\r\n\r\n\t\tgroup.modules.moveRow = config;\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar self = this,\r\n\t\tconfig = {},\r\n\t\trowEl;\r\n\r\n\t\t//inter table drag drop\r\n\t\tconfig.mouseup = function(e){\r\n\t\t\tself.tableRowDrop(e, row);\r\n\t\t}.bind(self);\r\n\r\n\t\t//same table drag drop\r\n\t\tconfig.mousemove = function(e){\r\n\t\t\tvar rowEl = row.getElement();\r\n\r\n\t\t\tif(((e.pageY - Helpers.elOffset(rowEl).top) + self.table.rowManager.element.scrollTop) > (row.getHeight() / 2)){\r\n\t\t\t\tif(self.toRow !== row || !self.toRowAfter){\r\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\r\n\t\t\t\t\tself.moveRow(row, true);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(self.toRow !== row || self.toRowAfter){\r\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\r\n\t\t\t\t\tself.moveRow(row, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}.bind(self);\r\n\r\n\r\n\t\tif(!this.hasHandle){\r\n\r\n\t\t\trowEl = row.getElement();\r\n\r\n\t\t\trowEl.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\r\n\t\t\t\t\t\tself.startMove(e, row);\r\n\t\t\t\t\t}, self.checkPeriod);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\trowEl.addEventListener(\"mouseup\", function(e){\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tif(self.checkTimeout){\r\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.bindTouchEvents(row, row.getElement());\r\n\t\t}\r\n\r\n\t\trow.modules.moveRow = config;\r\n\t}\r\n\r\n\tinitializeColumn(column){\r\n\t\tif(column.definition.rowHandle && this.table.options.movableRows !== false){\r\n\t\t\tthis.hasHandle = true;\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeCell(cell){\r\n\t\tif(cell.column.definition.rowHandle && this.table.options.movableRows !== false){\r\n\t\t\tvar self = this,\r\n\t\t\tcellEl = cell.getElement(true);\r\n\r\n\t\t\tcellEl.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\r\n\t\t\t\t\t\tself.startMove(e, cell.row);\r\n\t\t\t\t\t}, self.checkPeriod);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tcellEl.addEventListener(\"mouseup\", function(e){\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tif(self.checkTimeout){\r\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.bindTouchEvents(cell.row, cellEl);\r\n\t\t}\r\n\t}\r\n\r\n\tbindTouchEvents(row, element){\r\n\t\tvar startYMove = false, //shifting center position of the cell\r\n\t\tnextRow, prevRow, nextRowHeight, prevRowHeight, nextRowHeightLast, prevRowHeightLast;\r\n\r\n\t\telement.addEventListener(\"touchstart\", (e) => {\r\n\t\t\tthis.checkTimeout = setTimeout(() => {\r\n\t\t\t\tthis.touchMove = true;\r\n\t\t\t\tnextRow = row.nextRow();\r\n\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight()/2 : 0;\r\n\t\t\t\tprevRow = row.prevRow();\r\n\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight()/2 : 0;\r\n\t\t\t\tnextRowHeightLast = 0;\r\n\t\t\t\tprevRowHeightLast = 0;\r\n\t\t\t\tstartYMove = false;\r\n\r\n\t\t\t\tthis.startMove(e, row);\r\n\t\t\t}, this.checkPeriod);\r\n\t\t}, {passive: true});\r\n\t\tthis.moving, this.toRow, this.toRowAfter;\r\n\t\telement.addEventListener(\"touchmove\", (e) => {\r\n\r\n\t\t\tvar diff, moveToRow;\r\n\r\n\t\t\tif(this.moving){\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tthis.moveHover(e);\r\n\r\n\t\t\t\tif(!startYMove){\r\n\t\t\t\t\tstartYMove = e.touches[0].pageY;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdiff = e.touches[0].pageY - startYMove;\r\n\r\n\t\t\t\tif(diff > 0){\r\n\t\t\t\t\tif(nextRow && diff - nextRowHeightLast > nextRowHeight){\r\n\t\t\t\t\t\tmoveToRow = nextRow;\r\n\r\n\t\t\t\t\t\tif(moveToRow !== row){\r\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\r\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement().nextSibling);\r\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(prevRow && -diff - prevRowHeightLast >  prevRowHeight){\r\n\t\t\t\t\t\tmoveToRow = prevRow;\r\n\r\n\t\t\t\t\t\tif(moveToRow !== row){\r\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\r\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement());\r\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(moveToRow){\r\n\t\t\t\t\tnextRow = moveToRow.nextRow();\r\n\t\t\t\t\tnextRowHeightLast = nextRowHeight;\r\n\t\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\r\n\t\t\t\t\tprevRow = moveToRow.prevRow();\r\n\t\t\t\t\tprevRowHeightLast = prevRowHeight;\r\n\t\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\telement.addEventListener(\"touchend\", (e) => {\r\n\t\t\tif(this.checkTimeout){\r\n\t\t\t\tclearTimeout(this.checkTimeout);\r\n\t\t\t}\r\n\t\t\tif(this.moving){\r\n\t\t\t\tthis.endMove(e);\r\n\t\t\t\tthis.touchMove = false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_bindMouseMove(){\r\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\r\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\r\n\t\t\t\trow.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_unbindMouseMove(){\r\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\r\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\r\n\t\t\t\trow.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstartMove(e, row){\r\n\t\tvar element = row.getElement();\r\n\r\n\t\tthis.setStartPosition(e, row);\r\n\r\n\t\tthis.moving = row;\r\n\r\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\r\n\r\n\t\t//create placeholder\r\n\t\tthis.placeholderElement.style.width = row.getWidth() + \"px\";\r\n\t\tthis.placeholderElement.style.height = row.getHeight() + \"px\";\r\n\r\n\t\tif(!this.connection){\r\n\t\t\telement.parentNode.insertBefore(this.placeholderElement, element);\r\n\t\t\telement.parentNode.removeChild(element);\r\n\t\t}else{\r\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-sending\");\r\n\t\t\tthis.connectToTables(row);\r\n\t\t}\r\n\r\n\t\t//create hover element\r\n\t\tthis.hoverElement = element.cloneNode(true);\r\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\r\n\r\n\t\tif(this.connection){\r\n\t\t\tdocument.body.appendChild(this.hoverElement);\r\n\t\t\tthis.hoverElement.style.left = \"0\";\r\n\t\t\tthis.hoverElement.style.top = \"0\";\r\n\t\t\tthis.hoverElement.style.width = this.table.element.clientWidth + \"px\";\r\n\t\t\tthis.hoverElement.style.whiteSpace = \"nowrap\";\r\n\t\t\tthis.hoverElement.style.overflow = \"hidden\";\r\n\t\t\tthis.hoverElement.style.pointerEvents = \"none\";\r\n\t\t}else{\r\n\t\t\tthis.table.rowManager.getTableElement().appendChild(this.hoverElement);\r\n\r\n\t\t\tthis.hoverElement.style.left = \"0\";\r\n\t\t\tthis.hoverElement.style.top = \"0\";\r\n\r\n\t\t\tthis._bindMouseMove();\r\n\t\t}\r\n\r\n\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\r\n\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\r\n\r\n\t\tthis.dispatchExternal(\"rowMoving\", row.getComponent());\r\n\r\n\t\tthis.moveHover(e);\r\n\t}\r\n\r\n\tsetStartPosition(e, row){\r\n\t\tvar pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\r\n\t\tpageY = this.touchMove ? e.touches[0].pageY : e.pageY,\r\n\t\telement, position;\r\n\r\n\t\telement = row.getElement();\r\n\t\tif(this.connection){\r\n\t\t\tposition = element.getBoundingClientRect();\r\n\r\n\t\t\tthis.startX = position.left - pageX + window.pageXOffset;\r\n\t\t\tthis.startY = position.top - pageY + window.pageYOffset;\r\n\t\t}else{\r\n\t\t\tthis.startY = (pageY - element.getBoundingClientRect().top);\r\n\t\t}\r\n\t}\r\n\r\n\tendMove(e){\r\n\t\tif(!e || e.which === 1 || this.touchMove){\r\n\t\t\tthis._unbindMouseMove();\r\n\r\n\t\t\tif(!this.connection){\r\n\t\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\r\n\t\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\r\n\t\t\t}\r\n\r\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\r\n\r\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\r\n\r\n\t\t\tif(this.toRow){\r\n\t\t\t\tthis.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\r\n\t\t\t}else{\r\n\t\t\t\tthis.dispatchExternal(\"rowMoveCancelled\", this.moving.getComponent());\r\n\t\t\t}\r\n\r\n\t\t\tthis.moving = false;\r\n\t\t\tthis.toRow = false;\r\n\t\t\tthis.toRowAfter = false;\r\n\r\n\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\r\n\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\r\n\r\n\t\t\tif(this.connection){\r\n\t\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-sending\");\r\n\t\t\t\tthis.disconnectFromTables();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmoveRow(row, after){\r\n\t\tthis.toRow = row;\r\n\t\tthis.toRowAfter = after;\r\n\t}\r\n\r\n\tmoveHover(e){\r\n\t\tif(this.connection){\r\n\t\t\tthis.moveHoverConnections.call(this, e);\r\n\t\t}else{\r\n\t\t\tthis.moveHoverTable.call(this, e);\r\n\t\t}\r\n\t}\r\n\r\n\tmoveHoverTable(e){\r\n\t\tvar rowHolder = this.table.rowManager.getElement(),\r\n\t\tscrollTop = rowHolder.scrollTop,\r\n\t\tyPos = ((this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top) + scrollTop;\r\n\t\t\r\n\t\tthis.hoverElement.style.top = Math.min(yPos - this.startY, this.table.rowManager.element.scrollHeight - this.hoverElement.offsetHeight) + \"px\";\r\n\t}\r\n\r\n\tmoveHoverConnections(e){\r\n\t\tthis.hoverElement.style.left = (this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX)) + \"px\";\r\n\t\tthis.hoverElement.style.top = (this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY)) + \"px\";\r\n\t}\r\n\r\n\telementRowDrop(e, element, row){\r\n\t\tthis.dispatchExternal(\"movableRowsElementDrop\", e, element, row ? row.getComponent() : false);\r\n\t}\r\n\r\n\t//establish connection with other tables\r\n\tconnectToTables(row){\r\n\t\tvar connectionTables;\r\n\r\n\t\tif(this.connectionSelectorsTables){\r\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\r\n\r\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStart\", connectionTables);\r\n\r\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\r\n\t\t\t\trow:row,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.connectionSelectorsElements){\r\n\r\n\t\t\tthis.connectionElements = [];\r\n\r\n\t\t\tif(!Array.isArray(this.connectionSelectorsElements)){\r\n\t\t\t\tthis.connectionSelectorsElements = [this.connectionSelectorsElements];\r\n\t\t\t}\r\n\r\n\t\t\tthis.connectionSelectorsElements.forEach((query) => {\r\n\t\t\t\tif(typeof query === \"string\"){\r\n\t\t\t\t\tthis.connectionElements = this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.connectionElements.push(query);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.connectionElements.forEach((element) => {\r\n\t\t\t\tvar dropEvent = (e) => {\r\n\t\t\t\t\tthis.elementRowDrop(e, element, this.moving);\r\n\t\t\t\t};\r\n\r\n\t\t\t\telement.addEventListener(\"mouseup\", dropEvent);\r\n\t\t\t\telement.tabulatorElementDropEvent = dropEvent;\r\n\r\n\t\t\t\telement.classList.add(\"tabulator-movingrow-receiving\");\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t//disconnect from other tables\r\n\tdisconnectFromTables(){\r\n\t\tvar connectionTables;\r\n\r\n\t\tif(this.connectionSelectorsTables){\r\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\r\n\r\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStop\", connectionTables);\r\n\r\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\r\n\t\t}\r\n\r\n\t\tthis.connectionElements.forEach((element) => {\r\n\t\t\telement.classList.remove(\"tabulator-movingrow-receiving\");\r\n\t\t\telement.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\r\n\t\t\tdelete element.tabulatorElementDropEvent;\r\n\t\t});\r\n\t}\r\n\r\n\t//accept incomming connection\r\n\tconnect(table, row){\r\n\t\tif(!this.connectedTable){\r\n\t\t\tthis.connectedTable = table;\r\n\t\t\tthis.connectedRow = row;\r\n\r\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-receiving\");\r\n\r\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\r\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\r\n\t\t\t\t\trow.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.tableRowDropEvent = this.tableRowDrop.bind(this);\r\n\r\n\t\t\tthis.table.element.addEventListener(\"mouseup\", this.tableRowDropEvent);\r\n\r\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStart\", row, table);\r\n\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//close incoming connection\r\n\tdisconnect(table){\r\n\t\tif(table === this.connectedTable){\r\n\t\t\tthis.connectedTable = false;\r\n\t\t\tthis.connectedRow = false;\r\n\r\n\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-receiving\");\r\n\r\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) =>{\r\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\r\n\t\t\t\t\trow.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.table.element.removeEventListener(\"mouseup\", this.tableRowDropEvent);\r\n\r\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStop\", table);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Row Error - trying to disconnect from non connected table\");\r\n\t\t}\r\n\t}\r\n\r\n\tdropComplete(table, row, success){\r\n\t\tvar sender = false;\r\n\r\n\t\tif(success){\r\n\r\n\t\t\tswitch(typeof this.table.options.movableRowsSender){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\t\tsender = this.senders[this.table.options.movableRowsSender];\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\t\tsender = this.table.options.movableRowsSender;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif(sender){\r\n\t\t\t\tsender.call(this, this.moving ? this.moving.getComponent() : undefined, row ? row.getComponent() : undefined, table);\r\n\t\t\t}else{\r\n\t\t\t\tif(this.table.options.movableRowsSender){\r\n\t\t\t\t\tconsole.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatchExternal(\"movableRowsSent\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\r\n\t\t}else{\r\n\t\t\tthis.dispatchExternal(\"movableRowsSentFailed\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\r\n\t\t}\r\n\r\n\t\tthis.endMove();\r\n\t}\r\n\r\n\ttableRowDrop(e, row){\r\n\t\tvar receiver = false,\r\n\t\tsuccess = false;\r\n\r\n\t\te.stopImmediatePropagation();\r\n\r\n\t\tswitch(typeof this.table.options.movableRowsReceiver){\r\n\t\t\tcase \"string\":\r\n\t\t\t\treceiver = this.receivers[this.table.options.movableRowsReceiver];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\t\treceiver = this.table.options.movableRowsReceiver;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(receiver){\r\n\t\t\tsuccess = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver);\r\n\t\t}\r\n\r\n\t\tif(success){\r\n\t\t\tthis.dispatchExternal(\"movableRowsReceived\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\r\n\t\t}else{\r\n\t\t\tthis.dispatchExternal(\"movableRowsReceivedFailed\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\r\n\t\t}\r\n\r\n\t\tthis.commsSend(this.connectedTable, \"moveRow\", \"dropcomplete\", {\r\n\t\t\trow:row,\r\n\t\t\tsuccess:success,\r\n\t\t});\r\n\t}\r\n\r\n\tcommsReceived(table, action, data){\r\n\t\tswitch(action){\r\n\t\t\tcase \"connect\":\r\n\t\t\t\treturn this.connect(table, data.row);\r\n\r\n\t\t\tcase \"disconnect\":\r\n\t\t\t\treturn this.disconnect(table);\r\n\r\n\t\t\tcase \"dropcomplete\":\r\n\t\t\t\treturn this.dropComplete(table, data.row, data.success);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nMoveRows.prototype.receivers = {\r\n\tinsert:function(fromRow, toRow, fromTable){\r\n\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\r\n\t\treturn true;\r\n\t},\r\n\r\n\tadd:function(fromRow, toRow, fromTable){\r\n\t\tthis.table.addRow(fromRow.getData());\r\n\t\treturn true;\r\n\t},\r\n\r\n\tupdate:function(fromRow, toRow, fromTable){\r\n\t\tif(toRow){\r\n\t\t\ttoRow.update(fromRow.getData());\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\treplace:function(fromRow, toRow, fromTable){\r\n\t\tif(toRow){\r\n\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\r\n\t\t\ttoRow.delete();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n};\r\n\r\nMoveRows.prototype.senders = {\r\n\tdelete:function(fromRow, toRow, toTable){\r\n\t\tfromRow.delete();\r\n\t}\r\n};\r\n\r\nMoveRows.moduleName = \"moveRow\";\r\n\r\nexport default MoveRows;","export default {};","import Module from '../../core/Module.js';\r\n\r\nimport defaultMutators from './defaults/mutators.js';\r\n\r\nclass Mutator extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of mutation types\r\n\t\tthis.enabled = true;\r\n\r\n\t\tthis.registerColumnOption(\"mutator\");\r\n\t\tthis.registerColumnOption(\"mutatorParams\");\r\n\t\tthis.registerColumnOption(\"mutatorData\");\r\n\t\tthis.registerColumnOption(\"mutatorDataParams\");\r\n\t\tthis.registerColumnOption(\"mutatorEdit\");\r\n\t\tthis.registerColumnOption(\"mutatorEditParams\");\r\n\t\tthis.registerColumnOption(\"mutatorClipboard\");\r\n\t\tthis.registerColumnOption(\"mutatorClipboardParams\");\r\n\t\tthis.registerColumnOption(\"mutateLink\");\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"cell-value-changing\", this.transformCell.bind(this));\r\n\t\tthis.subscribe(\"cell-value-changed\", this.mutateLink.bind(this));\r\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\r\n\t\tthis.subscribe(\"row-data-init-before\", this.rowDataChanged.bind(this));\r\n\t\tthis.subscribe(\"row-data-changing\", this.rowDataChanged.bind(this));\r\n\t}\r\n\r\n\trowDataChanged(row, tempData, updatedData){\r\n\t\treturn this.transformRow(tempData, \"data\", updatedData);\r\n\t}\r\n\r\n\t//initialize column mutator\r\n\tinitializeColumn(column){\r\n\t\tvar match = false,\r\n\t\tconfig = {};\r\n\r\n\t\tthis.allowedTypes.forEach((type) => {\r\n\t\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\r\n\t\t\tmutator;\r\n\r\n\t\t\tif(column.definition[key]){\r\n\t\t\t\tmutator = this.lookupMutator(column.definition[key]);\r\n\r\n\t\t\t\tif(mutator){\r\n\t\t\t\t\tmatch = true;\r\n\r\n\t\t\t\t\tconfig[key] = {\r\n\t\t\t\t\t\tmutator:mutator,\r\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(match){\r\n\t\t\tcolumn.modules.mutate = config;\r\n\t\t}\r\n\t}\r\n\r\n\tlookupMutator(value){\r\n\t\tvar mutator = false;\r\n\r\n\t\t//set column mutator\r\n\t\tswitch(typeof value){\r\n\t\t\tcase \"string\":\r\n\t\t\t\tif(Mutator.mutators[value]){\r\n\t\t\t\t\tmutator = Mutator.mutators[value];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\t\tmutator = value;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn mutator;\r\n\t}\r\n\r\n\t//apply mutator to row\r\n\ttransformRow(data, type, updatedData){\r\n\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\r\n\t\tvalue;\r\n\r\n\t\tif(this.enabled){\r\n\r\n\t\t\tthis.table.columnManager.traverse((column) => {\r\n\t\t\t\tvar mutator, params, component;\r\n\r\n\t\t\t\tif(column.modules.mutate){\r\n\t\t\t\t\tmutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\r\n\r\n\t\t\t\t\tif(mutator){\r\n\t\t\t\t\t\tvalue = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\r\n\r\n\t\t\t\t\t\tif(type == \"data\" || typeof value !== \"undefined\"){\r\n\t\t\t\t\t\t\tcomponent = column.getComponent();\r\n\t\t\t\t\t\t\tparams = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\r\n\t\t\t\t\t\t\tcolumn.setFieldValue(data, mutator.mutator(value, data, type, params, component));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\t//apply mutator to new cell value\r\n\ttransformCell(cell, value){\r\n\t\tif(cell.column.modules.mutate){\r\n\t\t\tvar mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\r\n\t\t\ttempData = {};\r\n\r\n\t\t\tif(mutator){\r\n\t\t\t\ttempData = Object.assign(tempData, cell.row.getData());\r\n\t\t\t\tcell.column.setFieldValue(tempData, value);\r\n\t\t\t\treturn mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tmutateLink(cell){\r\n\t\tvar links = cell.column.definition.mutateLink;\r\n\r\n\t\tif(links){\r\n\t\t\tif(!Array.isArray(links)){\r\n\t\t\t\tlinks = [links];\r\n\t\t\t}\r\n\r\n\t\t\tlinks.forEach((link) => {\r\n\t\t\t\tvar linkCell = cell.row.getCell(link);\r\n\r\n\t\t\t\tif(linkCell){\r\n\t\t\t\t\tlinkCell.setValue(linkCell.getValue(), true, true);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tenable(){\r\n\t\tthis.enabled = true;\r\n\t}\r\n\r\n\tdisable(){\r\n\t\tthis.enabled = false;\r\n\t}\r\n}\r\n\r\nMutator.moduleName = \"mutator\";\r\n\r\n//load defaults\r\nMutator.mutators = defaultMutators;\r\n\r\nexport default Mutator;","export default function(pageSize, currentRow, currentPage, totalRows, totalPages){\r\n\tvar el = document.createElement(\"span\"),\r\n\tshowingEl = document.createElement(\"span\"),\r\n\tvalueEl = document.createElement(\"span\"),\r\n\tofEl = document.createElement(\"span\"),\r\n\ttotalEl = document.createElement(\"span\"),\r\n\trowsEl = document.createElement(\"span\");\r\n\r\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\r\n\t\tshowingEl.innerHTML = value;\r\n\t});\r\n\r\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\r\n\t\tofEl.innerHTML = value;\r\n\t});\r\n\r\n\tthis.table.modules.localize.langBind(\"pagination|counter|rows\", (value) => {\r\n\t\trowsEl.innerHTML = value;\r\n\t});\r\n\r\n\tif(totalRows){\r\n\t\tvalueEl.innerHTML = \" \" + currentRow + \"-\" + Math.min((currentRow + pageSize - 1), totalRows) + \" \";\r\n\t\t\r\n\t\ttotalEl.innerHTML = \" \" + totalRows + \" \";\r\n\t\t\r\n\t\tel.appendChild(showingEl);\r\n\t\tel.appendChild(valueEl);\r\n\t\tel.appendChild(ofEl);\r\n\t\tel.appendChild(totalEl);\r\n\t\tel.appendChild(rowsEl);\r\n\t}else{\r\n\t\tvalueEl.innerHTML = \" 0 \";\r\n\r\n\t\tel.appendChild(showingEl);\r\n\t\tel.appendChild(valueEl);\r\n\t\tel.appendChild(rowsEl);\r\n\t}\r\n\t\r\n\treturn el;\r\n}","export default function(pageSize, currentRow, currentPage, totalRows, totalPages){\r\n\r\n\tvar el = document.createElement(\"span\"),\r\n\tshowingEl = document.createElement(\"span\"),\r\n\tvalueEl = document.createElement(\"span\"),\r\n\tofEl = document.createElement(\"span\"),\r\n\ttotalEl = document.createElement(\"span\"),\r\n\trowsEl = document.createElement(\"span\");\r\n\t\r\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\r\n\t\tshowingEl.innerHTML = value;\r\n\t});\r\n\t\r\n\tvalueEl.innerHTML = \" \" + currentPage + \" \";\r\n\t\r\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\r\n\t\tofEl.innerHTML = value;\r\n\t});\r\n\t\r\n\ttotalEl.innerHTML = \" \" + totalPages + \" \";\r\n\t\r\n\tthis.table.modules.localize.langBind(\"pagination|counter|pages\", (value) => {\r\n\t\trowsEl.innerHTML = value;\r\n\t});\r\n\t\r\n\tel.appendChild(showingEl);\r\n\tel.appendChild(valueEl);\r\n\tel.appendChild(ofEl);\r\n\tel.appendChild(totalEl);\r\n\tel.appendChild(rowsEl);\r\n\t\r\n\treturn el;\r\n}","import rows from './pageCounters/rows.js';\r\nimport pages from './pageCounters/pages.js';\r\n\r\n\r\nexport default {\r\n\trows:rows,\r\n\tpages:pages,\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultPageCounters from './defaults/pageCounters.js';\r\n\r\nclass Page extends Module{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.mode = \"local\";\r\n\t\tthis.progressiveLoad = false;\r\n\t\t\r\n\t\tthis.element = null;\r\n\t\tthis.pageCounterElement = null;\r\n\t\tthis.pageCounter = null;\r\n\t\t\r\n\t\tthis.size = 0;\r\n\t\tthis.page = 1;\r\n\t\tthis.count = 5;\r\n\t\tthis.max = 1;\r\n\r\n\t\tthis.remoteRowCountEstimate = null;\r\n\t\t\r\n\t\tthis.displayIndex = 0; //index in display pipeline\r\n\t\t\r\n\t\tthis.initialLoad = true;\r\n\t\tthis.dataChanging = false; //flag to check if data is being changed by this module\r\n\t\t\r\n\t\tthis.pageSizes = [];\r\n\t\t\r\n\t\tthis.registerTableOption(\"pagination\", false); //set pagination type\r\n\t\tthis.registerTableOption(\"paginationMode\", \"local\"); //local or remote pagination\r\n\t\tthis.registerTableOption(\"paginationSize\", false); //set number of rows to a page\r\n\t\tthis.registerTableOption(\"paginationInitialPage\", 1); //initial page to show on load\r\n\t\tthis.registerTableOption(\"paginationCounter\", false);  // set pagination counter\r\n\t\tthis.registerTableOption(\"paginationCounterElement\", false);  // set pagination counter\r\n\t\tthis.registerTableOption(\"paginationButtonCount\", 5);  // set count of page button\r\n\t\tthis.registerTableOption(\"paginationSizeSelector\", false); //add pagination size selector element\r\n\t\tthis.registerTableOption(\"paginationElement\", false); //element to hold pagination numbers\r\n\t\t// this.registerTableOption(\"paginationDataSent\", {}); //pagination data sent to the server\r\n\t\t// this.registerTableOption(\"paginationDataReceived\", {}); //pagination data received from the server\r\n\t\tthis.registerTableOption(\"paginationAddRow\", \"page\"); //add rows on table or page\r\n\t\t\r\n\t\tthis.registerTableOption(\"progressiveLoad\", false); //progressive loading\r\n\t\tthis.registerTableOption(\"progressiveLoadDelay\", 0); //delay between requests\r\n\t\tthis.registerTableOption(\"progressiveLoadScrollMargin\", 0); //margin before scroll begins\r\n\t\t\r\n\t\tthis.registerTableFunction(\"setMaxPage\", this.setMaxPage.bind(this));\r\n\t\tthis.registerTableFunction(\"setPage\", this.setPage.bind(this));\r\n\t\tthis.registerTableFunction(\"setPageToRow\", this.userSetPageToRow.bind(this));\r\n\t\tthis.registerTableFunction(\"setPageSize\", this.userSetPageSize.bind(this));\r\n\t\tthis.registerTableFunction(\"getPageSize\", this.getPageSize.bind(this));\r\n\t\tthis.registerTableFunction(\"previousPage\", this.previousPage.bind(this));\r\n\t\tthis.registerTableFunction(\"nextPage\", this.nextPage.bind(this));\r\n\t\tthis.registerTableFunction(\"getPage\", this.getPage.bind(this));\r\n\t\tthis.registerTableFunction(\"getPageMax\", this.getPageMax.bind(this));\r\n\t\t\r\n\t\t//register component functions\r\n\t\tthis.registerComponentFunction(\"row\", \"pageTo\", this.setPageToRow.bind(this));\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tif(this.table.options.pagination){\r\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\r\n\t\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\r\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\r\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\r\n\t\t\tthis.subscribe(\"footer-redraw\", this.footerRedraw.bind(this));\r\n\r\n\t\t\tif(this.table.options.paginationAddRow == \"page\"){\r\n\t\t\t\tthis.subscribe(\"row-adding-position\", this.rowAddingPosition.bind(this));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(this.table.options.paginationMode === \"remote\"){\r\n\t\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\r\n\t\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(this.table.options.progressiveLoad){\r\n\t\t\t\tconsole.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.registerDisplayHandler(this.restOnRenderBefore.bind(this), 40);\r\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 50);\r\n\t\t\t\r\n\t\t\tthis.createElements();\r\n\t\t\tthis.initializePageCounter();\r\n\t\t\tthis.initializePaginator();\r\n\t\t}else if(this.table.options.progressiveLoad){\r\n\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\r\n\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\r\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\r\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\r\n\t\t\t\r\n\t\t\tthis.initializeProgressive(this.table.options.progressiveLoad);\r\n\t\t\t\r\n\t\t\tif(this.table.options.progressiveLoad === \"scroll\"){\r\n\t\t\t\tthis.subscribe(\"scroll-vertical\", this.scrollVertical.bind(this));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\trowAddingPosition(row, top){\r\n\t\tvar rowManager = this.table.rowManager,\r\n\t\tdisplayRows = rowManager.getDisplayRows(),\r\n\t\tindex;\r\n\t\t\r\n\t\tif(top){\r\n\t\t\tif(displayRows.length){\r\n\t\t\t\tindex = displayRows[0];\r\n\t\t\t}else{\r\n\t\t\t\tif(rowManager.activeRows.length){\r\n\t\t\t\t\tindex = rowManager.activeRows[rowManager.activeRows.length-1];\r\n\t\t\t\t\ttop = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(displayRows.length){\r\n\t\t\t\tindex = displayRows[displayRows.length - 1];\r\n\t\t\t\ttop = displayRows.length < this.size ? false : true;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn {index, top};\r\n\t}\r\n\t\r\n\tcalculatePageSizes(){\r\n\t\tvar testElRow, testElCell;\r\n\t\t\r\n\t\tif(this.table.options.paginationSize){\r\n\t\t\tthis.size = this.table.options.paginationSize;\r\n\t\t}else{\r\n\t\t\ttestElRow = document.createElement(\"div\");\r\n\t\t\ttestElRow.classList.add(\"tabulator-row\");\r\n\t\t\ttestElRow.style.visibility = \"hidden\";\r\n\t\t\t\r\n\t\t\ttestElCell = document.createElement(\"div\");\r\n\t\t\ttestElCell.classList.add(\"tabulator-cell\");\r\n\t\t\ttestElCell.innerHTML = \"Page Row Test\";\r\n\t\t\t\r\n\t\t\ttestElRow.appendChild(testElCell);\r\n\t\t\t\r\n\t\t\tthis.table.rowManager.getTableElement().appendChild(testElRow);\r\n\t\t\t\r\n\t\t\tthis.size = Math.floor(this.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\r\n\t\t\t\r\n\t\t\tthis.table.rowManager.getTableElement().removeChild(testElRow);\r\n\t\t}\r\n\r\n\t\tthis.dispatchExternal(\"pageSizeChanged\", this.size);\r\n\t\t\r\n\t\tthis.generatePageSizeSelectList();\r\n\t}\r\n\t\r\n\tinitialLoadComplete(){\r\n\t\tthis.initialLoad = false;\r\n\t}\r\n\t\r\n\tremotePageParams(data, config, silent, params){\r\n\t\tif(!this.initialLoad){\r\n\t\t\tif((this.progressiveLoad && !silent) || (!this.progressiveLoad && !this.dataChanging)){\r\n\t\t\t\tthis.reset(true);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//configure request params\r\n\t\tparams.page = this.page;\r\n\t\t\r\n\t\t//set page size if defined\r\n\t\tif(this.size){\r\n\t\t\tparams.size = this.size;\r\n\t\t}\r\n\t\t\r\n\t\treturn params;\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\t\r\n\tuserSetPageToRow(row){\r\n\t\tif(this.table.options.pagination){\r\n\t\t\trow = this.rowManager.findRow(row);\r\n\t\t\t\r\n\t\t\tif(row){\r\n\t\t\t\treturn this.setPageToRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn Promise.reject();\r\n\t}\r\n\t\r\n\tuserSetPageSize(size){\r\n\t\tif(this.table.options.pagination){\r\n\t\t\tthis.setPageSize(size);\r\n\t\t\treturn this.setPage(1);\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\t\r\n\tscrollVertical(top, dir){\r\n\t\tvar element, diff, margin;\r\n\t\tif(!dir && !this.table.dataLoader.loading){\r\n\t\t\telement = this.table.rowManager.getElement();\r\n\t\t\tdiff = element.scrollHeight - element.clientHeight - top;\r\n\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (element.clientHeight * 2);\r\n\t\t\t\r\n\t\t\tif(diff < margin){\r\n\t\t\t\tthis.nextPage()\r\n\t\t\t\t\t.catch(() => {}); //consume the exception thrown when on the last page\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\trestOnRenderBefore(rows, renderInPosition){\r\n\t\tif(!renderInPosition){\r\n\t\t\tif(this.mode === \"local\"){\r\n\t\t\t\tthis.reset();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn rows;\r\n\t}\r\n\t\r\n\trowsUpdated(){\r\n\t\tthis.refreshData(true, \"all\");\r\n\t}\r\n\t\r\n\tcreateElements(){\r\n\t\tvar button;\r\n\t\t\r\n\t\tthis.element = document.createElement(\"span\");\r\n\t\tthis.element.classList.add(\"tabulator-paginator\");\r\n\t\t\r\n\t\tthis.pagesElement = document.createElement(\"span\");\r\n\t\tthis.pagesElement.classList.add(\"tabulator-pages\");\r\n\t\t\r\n\t\tbutton = document.createElement(\"button\");\r\n\t\tbutton.classList.add(\"tabulator-page\");\r\n\t\tbutton.setAttribute(\"type\", \"button\");\r\n\t\tbutton.setAttribute(\"role\", \"button\");\r\n\t\tbutton.setAttribute(\"aria-label\", \"\");\r\n\t\tbutton.setAttribute(\"title\", \"\");\r\n\t\t\r\n\t\tthis.firstBut = button.cloneNode(true);\r\n\t\tthis.firstBut.setAttribute(\"data-page\", \"first\");\r\n\t\t\r\n\t\tthis.prevBut = button.cloneNode(true);\r\n\t\tthis.prevBut.setAttribute(\"data-page\", \"prev\");\r\n\t\t\r\n\t\tthis.nextBut = button.cloneNode(true);\r\n\t\tthis.nextBut.setAttribute(\"data-page\", \"next\");\r\n\t\t\r\n\t\tthis.lastBut = button.cloneNode(true);\r\n\t\tthis.lastBut.setAttribute(\"data-page\", \"last\");\r\n\t\t\r\n\t\tif(this.table.options.paginationSizeSelector){\r\n\t\t\tthis.pageSizeSelect = document.createElement(\"select\");\r\n\t\t\tthis.pageSizeSelect.classList.add(\"tabulator-page-size\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tgeneratePageSizeSelectList(){\r\n\t\tvar pageSizes = [];\r\n\t\t\r\n\t\tif(this.pageSizeSelect){\r\n\t\t\t\r\n\t\t\tif(Array.isArray(this.table.options.paginationSizeSelector)){\r\n\t\t\t\tpageSizes = this.table.options.paginationSizeSelector;\r\n\t\t\t\tthis.pageSizes = pageSizes;\r\n\t\t\t\t\r\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\r\n\t\t\t\t\tpageSizes.unshift(this.size);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t\r\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\r\n\t\t\t\t\tpageSizes = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (let i = 1; i < 5; i++){\r\n\t\t\t\t\t\tpageSizes.push(this.size * i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.pageSizes = pageSizes;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tpageSizes = this.pageSizes;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\twhile(this.pageSizeSelect.firstChild) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\r\n\t\t\t\r\n\t\t\tpageSizes.forEach((item) => {\r\n\t\t\t\tvar itemEl = document.createElement(\"option\");\r\n\t\t\t\titemEl.value = item;\r\n\t\t\t\t\r\n\t\t\t\tif(item === true){\r\n\t\t\t\t\tthis.langBind(\"pagination|all\", function(value){\r\n\t\t\t\t\t\titemEl.innerHTML = value;\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\titemEl.innerHTML = item;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tthis.pageSizeSelect.appendChild(itemEl);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.pageSizeSelect.value = this.size;\r\n\t\t}\r\n\t}\r\n\t\r\n\tinitializePageCounter(){\r\n\t\tvar counter = this.table.options.paginationCounter,\r\n\t\tpageCounter = null;\r\n\t\t\r\n\t\tif(counter){\r\n\t\t\tif(typeof counter === \"function\"){\r\n\t\t\t\tpageCounter = counter;\r\n\t\t\t}else{\r\n\t\t\t\tpageCounter = Page.pageCounters[counter];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(pageCounter){\r\n\t\t\t\tthis.pageCounter = pageCounter;\r\n\t\t\t\t\r\n\t\t\t\tthis.pageCounterElement = document.createElement(\"span\");\r\n\t\t\t\tthis.pageCounterElement.classList.add(\"tabulator-page-counter\");\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Pagination Error - No such page counter found: \", counter);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t//setup pagination\r\n\tinitializePaginator(hidden){\r\n\t\tvar pageSelectLabel, paginationCounterHolder;\r\n\t\t\r\n\t\tif(!hidden){\r\n\t\t\t//build pagination element\r\n\t\t\t\r\n\t\t\t//bind localizations\r\n\t\t\tthis.langBind(\"pagination|first\", (value) => {\r\n\t\t\t\tthis.firstBut.innerHTML = value;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.langBind(\"pagination|first_title\", (value) => {\r\n\t\t\t\tthis.firstBut.setAttribute(\"aria-label\", value);\r\n\t\t\t\tthis.firstBut.setAttribute(\"title\", value);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.langBind(\"pagination|prev\", (value) => {\r\n\t\t\t\tthis.prevBut.innerHTML = value;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.langBind(\"pagination|prev_title\", (value) => {\r\n\t\t\t\tthis.prevBut.setAttribute(\"aria-label\", value);\r\n\t\t\t\tthis.prevBut.setAttribute(\"title\", value);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.langBind(\"pagination|next\", (value) => {\r\n\t\t\t\tthis.nextBut.innerHTML = value;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.langBind(\"pagination|next_title\", (value) => {\r\n\t\t\t\tthis.nextBut.setAttribute(\"aria-label\", value);\r\n\t\t\t\tthis.nextBut.setAttribute(\"title\", value);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.langBind(\"pagination|last\", (value) => {\r\n\t\t\t\tthis.lastBut.innerHTML = value;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.langBind(\"pagination|last_title\", (value) => {\r\n\t\t\t\tthis.lastBut.setAttribute(\"aria-label\", value);\r\n\t\t\t\tthis.lastBut.setAttribute(\"title\", value);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//click bindings\r\n\t\t\tthis.firstBut.addEventListener(\"click\", () => {\r\n\t\t\t\tthis.setPage(1);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.prevBut.addEventListener(\"click\", () => {\r\n\t\t\t\tthis.previousPage();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.nextBut.addEventListener(\"click\", () => {\r\n\t\t\t\tthis.nextPage();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.lastBut.addEventListener(\"click\", () => {\r\n\t\t\t\tthis.setPage(this.max);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif(this.table.options.paginationElement){\r\n\t\t\t\tthis.element = this.table.options.paginationElement;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(this.pageSizeSelect){\r\n\t\t\t\tpageSelectLabel = document.createElement(\"label\");\r\n\t\t\t\t\r\n\t\t\t\tthis.langBind(\"pagination|page_size\", (value) => {\r\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"aria-label\", value);\r\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"title\", value);\r\n\t\t\t\t\tpageSelectLabel.innerHTML = value;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.element.appendChild(pageSelectLabel);\r\n\t\t\t\tthis.element.appendChild(this.pageSizeSelect);\r\n\t\t\t\t\r\n\t\t\t\tthis.pageSizeSelect.addEventListener(\"change\", (e) => {\r\n\t\t\t\t\tthis.setPageSize(this.pageSizeSelect.value == \"true\" ? true : this.pageSizeSelect.value);\r\n\t\t\t\t\tthis.setPage(1);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//append to DOM\r\n\t\t\tthis.element.appendChild(this.firstBut);\r\n\t\t\tthis.element.appendChild(this.prevBut);\r\n\t\t\tthis.element.appendChild(this.pagesElement);\r\n\t\t\tthis.element.appendChild(this.nextBut);\r\n\t\t\tthis.element.appendChild(this.lastBut);\r\n\t\t\t\r\n\t\t\tif(!this.table.options.paginationElement){\r\n\t\t\t\tif(this.table.options.paginationCounter){\r\n\r\n\t\t\t\t\tpaginationCounterHolder; \r\n\r\n\t\t\t\t\tif(this.table.options.paginationCounterElement){\r\n\t\t\t\t\t\tif(this.table.options.paginationCounterElement instanceof HTMLElement){\r\n\t\t\t\t\t\t\tthis.table.options.paginationCounterElement.appendChild(this.pageCounterElement);\r\n\t\t\t\t\t\t}else if(typeof this.table.options.paginationCounterElement === \"string\"){\r\n\t\t\t\t\t\t\tpaginationCounterHolder = document.querySelector(this.table.options.paginationCounterElement);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(paginationCounterHolder){\r\n\t\t\t\t\t\t\t\tpaginationCounterHolder.appendChild(this.pageCounterElement);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tconsole.warn(\"Pagination Error - Unable to find element matching paginationCounterElement selector:\", this.table.options.paginationCounterElement);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.footerAppend(this.pageCounterElement);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.footerAppend(this.element);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.page = this.table.options.paginationInitialPage;\r\n\t\t\tthis.count = this.table.options.paginationButtonCount;\r\n\t\t}\r\n\t\t\r\n\t\t//set default values\r\n\t\tthis.mode = this.table.options.paginationMode;\r\n\t}\r\n\t\r\n\tinitializeProgressive(mode){\r\n\t\tthis.initializePaginator(true);\r\n\t\tthis.mode = \"progressive_\" + mode;\r\n\t\tthis.progressiveLoad = true;\r\n\t}\r\n\t\r\n\ttrackChanges(){\r\n\t\tthis.dispatch(\"page-changed\");\r\n\t}\r\n\t\r\n\tsetDisplayIndex(index){\r\n\t\tthis.displayIndex = index;\r\n\t}\r\n\t\r\n\tgetDisplayIndex(){\r\n\t\treturn this.displayIndex;\r\n\t}\r\n\t\r\n\t//calculate maximum page from number of rows\r\n\tsetMaxRows(rowCount){\r\n\t\tif(!rowCount){\r\n\t\t\tthis.max = 1;\r\n\t\t}else{\r\n\t\t\tthis.max = this.size === true ?  1 : Math.ceil(rowCount/this.size);\r\n\t\t}\r\n\t\t\r\n\t\tif(this.page > this.max){\r\n\t\t\tthis.page = this.max;\r\n\t\t}\r\n\t}\r\n\t\r\n\t//reset to first page without triggering action\r\n\treset(force){\r\n\t\tif(!this.initialLoad){\r\n\t\t\tif(this.mode == \"local\" || force){\r\n\t\t\t\tthis.page = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t//set the maximum page\r\n\tsetMaxPage(max){\r\n\t\t\r\n\t\tmax = parseInt(max);\r\n\t\t\r\n\t\tthis.max = max || 1;\r\n\t\t\r\n\t\tif(this.page > this.max){\r\n\t\t\tthis.page = this.max;\r\n\t\t\tthis.trigger();\r\n\t\t}\r\n\t}\r\n\t\r\n\t//set current page number\r\n\tsetPage(page){\r\n\t\tswitch(page){\r\n\t\t\tcase \"first\":\r\n\t\t\t\treturn this.setPage(1);\r\n\t\r\n\t\t\tcase \"prev\":\r\n\t\t\t\treturn this.previousPage();\r\n\t\t\t\r\n\t\t\tcase \"next\":\r\n\t\t\t\treturn this.nextPage();\r\n\t\t\t\r\n\t\t\tcase \"last\":\r\n\t\t\t\treturn this.setPage(this.max);\r\n\t\t}\r\n\t\t\r\n\t\tpage = parseInt(page);\r\n\t\t\r\n\t\tif((page > 0 && page <= this.max) || this.mode !== \"local\"){\r\n\t\t\tthis.page = page;\r\n\t\t\t\r\n\t\t\tthis.trackChanges();\r\n\t\t\t\r\n\t\t\treturn this.trigger();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Pagination Error - Requested page is out of range of 1 - \" + this.max + \":\", page);\r\n\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n\t\r\n\tsetPageToRow(row){\r\n\t\tvar rows = this.table.rowManager.getDisplayRows(this.displayIndex - 1);\r\n\t\tvar index = rows.indexOf(row);\r\n\t\t\r\n\t\tif(index > -1){\r\n\t\t\tvar page = this.size === true ? 1 : Math.ceil((index + 1) / this.size);\r\n\t\t\t\r\n\t\t\treturn this.setPage(page);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Pagination Error - Requested row is not visible\");\r\n\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n\t\r\n\tsetPageSize(size){\r\n\t\tif(size !== true){\r\n\t\t\tsize = parseInt(size);\r\n\t\t}\r\n\r\n\t\tif(size > 0){\r\n\t\t\tthis.size = size;\r\n\t\t\tthis.dispatchExternal(\"pageSizeChanged\", size);\r\n\t\t}\r\n\t\t\r\n\t\tif(this.pageSizeSelect){\r\n\t\t\t// this.pageSizeSelect.value = size;\r\n\t\t\tthis.generatePageSizeSelectList();\r\n\t\t}\r\n\t\t\r\n\t\tthis.trackChanges();\r\n\t}\r\n\t\r\n\t_setPageCounter(totalRows, size, currentRow){\r\n\t\tvar content;\r\n\t\t\r\n\t\tif(this.pageCounter){\r\n\r\n\t\t\tif(this.mode === \"remote\"){\r\n\t\t\t\tsize = this.size;\r\n\t\t\t\tcurrentRow = ((this.page - 1) * this.size) + 1;\r\n\t\t\t\ttotalRows = this.remoteRowCountEstimate;\r\n\t\t\t}\r\n\r\n\t\t\tcontent = this.pageCounter.call(this, size, currentRow, this.page, totalRows, this.max);\r\n\t\t\t\r\n\t\t\tswitch(typeof content){\r\n\t\t\t\tcase \"object\":\r\n\t\t\t\t\tif(content instanceof Node){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t//clear previous cell contents\r\n\t\t\t\t\t\twhile(this.pageCounterElement.firstChild) this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tthis.pageCounterElement.appendChild(content);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tif(content != null){\r\n\t\t\t\t\t\t\tconsole.warn(\"Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:\", content);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthis.pageCounterElement.innerHTML = content;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t//setup the pagination buttons\r\n\t_setPageButtons(){\r\n\t\tlet leftSize = Math.floor((this.count-1) / 2);\r\n\t\tlet rightSize = Math.ceil((this.count-1) / 2);\r\n\t\tlet min = this.max - this.page + leftSize + 1 < this.count ? this.max-this.count+1: Math.max(this.page-leftSize,1);\r\n\t\tlet max = this.page <= rightSize? Math.min(this.count, this.max) :Math.min(this.page+rightSize, this.max);\r\n\t\t\r\n\t\twhile(this.pagesElement.firstChild) this.pagesElement.removeChild(this.pagesElement.firstChild);\r\n\t\t\r\n\t\tif(this.page == 1){\r\n\t\t\tthis.firstBut.disabled = true;\r\n\t\t\tthis.prevBut.disabled = true;\r\n\t\t}else{\r\n\t\t\tthis.firstBut.disabled = false;\r\n\t\t\tthis.prevBut.disabled = false;\r\n\t\t}\r\n\t\t\r\n\t\tif(this.page == this.max){\r\n\t\t\tthis.lastBut.disabled = true;\r\n\t\t\tthis.nextBut.disabled = true;\r\n\t\t}else{\r\n\t\t\tthis.lastBut.disabled = false;\r\n\t\t\tthis.nextBut.disabled = false;\r\n\t\t}\r\n\t\t\r\n\t\tfor(let i = min; i <= max; i++){\r\n\t\t\tif(i>0 && i <= this.max){\r\n\t\t\t\tthis.pagesElement.appendChild(this._generatePageButton(i));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.footerRedraw();\r\n\t}\r\n\t\r\n\t_generatePageButton(page){\r\n\t\tvar button = document.createElement(\"button\");\r\n\t\t\r\n\t\tbutton.classList.add(\"tabulator-page\");\r\n\t\tif(page == this.page){\r\n\t\t\tbutton.classList.add(\"active\");\r\n\t\t}\r\n\t\t\r\n\t\tbutton.setAttribute(\"type\", \"button\");\r\n\t\tbutton.setAttribute(\"role\", \"button\");\r\n\t\t\r\n\t\tthis.langBind(\"pagination|page_title\", (value) => {\r\n\t\t\tbutton.setAttribute(\"aria-label\", value + \" \" + page);\r\n\t\t\tbutton.setAttribute(\"title\", value + \" \" + page);\r\n\t\t});\r\n\t\t\r\n\t\tbutton.setAttribute(\"data-page\", page);\r\n\t\tbutton.textContent = page;\r\n\t\t\r\n\t\tbutton.addEventListener(\"click\", (e) => {\r\n\t\t\tthis.setPage(page);\r\n\t\t});\r\n\t\t\r\n\t\treturn button;\r\n\t}\r\n\t\r\n\t//previous page\r\n\tpreviousPage(){\r\n\t\tif(this.page > 1){\r\n\t\t\tthis.page--;\r\n\t\t\t\r\n\t\t\tthis.trackChanges();\r\n\t\t\t\r\n\t\t\treturn this.trigger();\r\n\t\t\t\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\r\n\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n\t\r\n\t//next page\r\n\tnextPage(){\r\n\t\tif(this.page < this.max){\r\n\t\t\tthis.page++;\r\n\t\t\t\r\n\t\t\tthis.trackChanges();\r\n\t\t\t\r\n\t\t\treturn this.trigger();\r\n\t\t\t\r\n\t\t}else{\r\n\t\t\tif(!this.progressiveLoad){\r\n\t\t\t\tconsole.warn(\"Pagination Error - Next page would be greater than maximum page of \" + this.max + \":\", this.max + 1);\r\n\t\t\t}\r\n\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n\t\r\n\t//return current page number\r\n\tgetPage(){\r\n\t\treturn this.page;\r\n\t}\r\n\t\r\n\t//return max page number\r\n\tgetPageMax(){\r\n\t\treturn this.max;\r\n\t}\r\n\t\r\n\tgetPageSize(size){\r\n\t\treturn this.size;\r\n\t}\r\n\t\r\n\tgetMode(){\r\n\t\treturn this.mode;\r\n\t}\r\n\t\r\n\t//return appropriate rows for current page\r\n\tgetRows(data){\r\n\t\tvar actualRowPageSize = 0,\r\n\t\toutput, start, end, actualStartRow;\r\n\r\n\t\tvar actualRows = data.filter((row) => {\r\n\t\t\treturn row.type === \"row\";\r\n\t\t});\r\n\t\t\r\n\t\tif(this.mode == \"local\"){\r\n\t\t\toutput = [];\r\n\t\t\t\r\n\t\t\tthis.setMaxRows(data.length);\r\n\t\t\t\r\n\t\t\tif(this.size === true){\r\n\t\t\t\tstart = 0;\r\n\t\t\t\tend = data.length;\r\n\t\t\t}else{\r\n\t\t\t\tstart = this.size * (this.page - 1);\r\n\t\t\t\tend = start + parseInt(this.size);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._setPageButtons();\r\n\t\t\t\r\n\t\t\tfor(let i = start; i < end; i++){\r\n\t\t\t\tlet row = data[i];\r\n\r\n\t\t\t\tif(row){\r\n\t\t\t\t\toutput.push(row);\r\n\r\n\t\t\t\t\tif(row.type === \"row\"){\r\n\t\t\t\t\t\tif(!actualStartRow){\r\n\t\t\t\t\t\t\tactualStartRow = row;\r\n\t\t\t\t\t\t}\t\r\n\r\n\t\t\t\t\t\tactualRowPageSize++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._setPageCounter(actualRows.length, actualRowPageSize, actualStartRow ? (actualRows.indexOf(actualStartRow) + 1) : 0);\r\n\t\t\t\r\n\t\t\treturn output;\r\n\t\t}else{\r\n\t\t\tthis._setPageButtons();\r\n\t\t\tthis._setPageCounter(actualRows.length);\r\n\t\t\t\r\n\t\t\treturn data.slice(0);\r\n\t\t}\r\n\t}\r\n\t\r\n\ttrigger(){\r\n\t\tvar left;\r\n\t\t\r\n\t\tswitch(this.mode){\r\n\t\t\tcase \"local\":\r\n\t\t\t\tleft = this.table.rowManager.scrollLeft;\r\n\t\t\t\r\n\t\t\t\tthis.refreshData();\r\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\r\n\t\t\t\r\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\", this.getPage());\r\n\t\t\t\r\n\t\t\t\treturn Promise.resolve();\r\n\t\t\t\r\n\t\t\tcase \"remote\":\r\n\t\t\t\tthis.dataChanging = true;\r\n\t\t\t\treturn this.reloadData(null)\r\n\t\t\t\t\t.finally(() => {\r\n\t\t\t\t\t\tthis.dataChanging = false;\r\n\t\t\t\t\t});\r\n\t\t\t\r\n\t\t\tcase \"progressive_load\":\r\n\t\t\tcase \"progressive_scroll\":\r\n\t\t\t\treturn this.reloadData(null, true);\r\n\t\t\t\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.warn(\"Pagination Error - no such pagination mode:\", this.mode);\r\n\t\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n\t\r\n\t_parseRemoteData(data){\r\n\t\tvar margin;\r\n\t\t\r\n\t\tif(typeof data.last_page === \"undefined\"){\r\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").last_page || \"last_page\") + \"' property\");\r\n\t\t}\r\n\t\t\r\n\t\tif(data.data){\r\n\t\t\tthis.max = parseInt(data.last_page) || 1;\r\n\r\n\t\t\tthis.remoteRowCountEstimate = typeof data.last_row !== \"undefined\" ? data.last_row : (data.last_page * this.size - (this.page == data.last_page ? (this.size - data.data.length) : 0));\r\n\t\t\t\r\n\t\t\tif(this.progressiveLoad){\r\n\t\t\t\tswitch(this.mode){\r\n\t\t\t\t\tcase \"progressive_load\":\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tif(this.page == 1){\r\n\t\t\t\t\t\t\tthis.table.rowManager.setData(data.data, false, this.page == 1);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.table.rowManager.addRows(data.data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tif(this.page < this.max){\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tthis.nextPage();\r\n\t\t\t\t\t\t\t}, this.table.options.progressiveLoadDelay);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t\t\tcase \"progressive_scroll\":\r\n\t\t\t\t\t\tdata = this.page === 1 ? data.data : this.table.rowManager.getData().concat(data.data);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tthis.table.rowManager.setData(data, this.page !== 1, this.page == 1);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (this.table.rowManager.element.clientHeight * 2);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tif(this.table.rowManager.element.scrollHeight <= (this.table.rowManager.element.clientHeight + margin)){\r\n\t\t\t\t\t\t\tif(this.page < this.max){\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tthis.nextPage();\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn false;\r\n\t\t\t}else{\r\n\t\t\t\t// left = this.table.rowManager.scrollLeft;\r\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\",  this.getPage());\r\n\t\t\t\t// this.table.rowManager.scrollHorizontal(left);\r\n\t\t\t\t// this.table.columnManager.scrollHorizontal(left);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").data || \"data\") + \"' property\");\r\n\t\t}\r\n\t\t\r\n\t\treturn data.data;\r\n\t}\r\n\t\r\n\t//handle the footer element being redrawn\r\n\tfooterRedraw(){\r\n\t\tvar footer = this.table.footerManager.containerElement;\r\n\r\n\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\r\n\t\t\tthis.pagesElement.style.display = 'none';\r\n\t\t}else{\r\n\t\t\tthis.pagesElement.style.display = '';\r\n\t\t\t\r\n\t\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\r\n\t\t\t\tthis.pagesElement.style.display = 'none';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nPage.moduleName = \"page\";\r\n\r\n//load defaults\r\nPage.pageCounters = defaultPageCounters;\r\n\r\nexport default Page;\r\n","// read persistance information from storage\r\nexport default {\r\n\tlocal:function(id, type){\r\n\t\tvar data = localStorage.getItem(id + \"-\" + type);\r\n\r\n\t\treturn data ? JSON.parse(data) : false;\r\n\t},\r\n\tcookie:function(id, type){\r\n\t\tvar cookie = document.cookie,\r\n\t\tkey = id + \"-\" + type,\r\n\t\tcookiePos = cookie.indexOf(key + \"=\"),\r\n\t\tend, data;\r\n\r\n\t\t//if cookie exists, decode and load column data into tabulator\r\n\t\tif(cookiePos > -1){\r\n\t\t\tcookie = cookie.slice(cookiePos);\r\n\r\n\t\t\tend = cookie.indexOf(\";\");\r\n\r\n\t\t\tif(end > -1){\r\n\t\t\t\tcookie = cookie.slice(0, end);\r\n\t\t\t}\r\n\r\n\t\t\tdata = cookie.replace(key + \"=\", \"\");\r\n\t\t}\r\n\r\n\t\treturn data ? JSON.parse(data) : false;\r\n\t}\r\n};\r\n","//write persistence information to storage\r\nexport default {\r\n\tlocal:function(id, type, data){\r\n\t\tlocalStorage.setItem(id + \"-\" + type, JSON.stringify(data));\r\n\t},\r\n\tcookie:function(id, type, data){\r\n\t\tvar expireDate = new Date();\r\n\r\n\t\texpireDate.setDate(expireDate.getDate() + 10000);\r\n\r\n\t\tdocument.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\r\n\t}\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultReaders from './defaults/readers.js';\r\nimport defaultWriters from './defaults/writers.js';\r\n\r\nclass Persistence extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.mode = \"\";\r\n\t\tthis.id = \"\";\r\n\t\t// this.persistProps = [\"field\", \"width\", \"visible\"];\r\n\t\tthis.defWatcherBlock = false;\r\n\t\tthis.config = {};\r\n\t\tthis.readFunc = false;\r\n\t\tthis.writeFunc = false;\r\n\r\n\t\tthis.registerTableOption(\"persistence\", false);\r\n\t\tthis.registerTableOption(\"persistenceID\", \"\"); //key for persistent storage\r\n\t\tthis.registerTableOption(\"persistenceMode\", true); //mode for storing persistence information\r\n\t\tthis.registerTableOption(\"persistenceReaderFunc\", false); //function for handling persistence data reading\r\n\t\tthis.registerTableOption(\"persistenceWriterFunc\", false); //function for handling persistence data writing\r\n\t}\r\n\r\n\t// Test for whether localStorage is available for use.\r\n\tlocalStorageTest() {\r\n\t\tvar  testKey =  \"_tabulator_test\";\r\n\r\n\t\ttry {\r\n\t\t\twindow.localStorage.setItem( testKey, testKey);\r\n\t\t\twindow.localStorage.removeItem( testKey );\r\n\t\t\treturn true;\r\n\t\t} catch(e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//setup parameters\r\n\tinitialize(){\r\n\t\tif(this.table.options.persistence){\r\n\t\t\t//determine persistent layout storage type\r\n\t\t\tvar mode = this.table.options.persistenceMode,\r\n\t\t\tid = this.table.options.persistenceID,\r\n\t\t\tretrievedData;\r\n\r\n\t\t\tthis.mode = mode !== true ?  mode : (this.localStorageTest() ? \"local\" : \"cookie\");\r\n\r\n\t\t\tif(this.table.options.persistenceReaderFunc){\r\n\t\t\t\tif(typeof this.table.options.persistenceReaderFunc === \"function\"){\r\n\t\t\t\t\tthis.readFunc = this.table.options.persistenceReaderFunc;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(Persistence.readers[this.table.options.persistenceReaderFunc]){\r\n\t\t\t\t\t\tthis.readFunc = Persistence.readers[this.table.options.persistenceReaderFunc];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(Persistence.readers[this.mode]){\r\n\t\t\t\t\tthis.readFunc = Persistence.readers[this.mode];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.mode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.persistenceWriterFunc){\r\n\t\t\t\tif(typeof this.table.options.persistenceWriterFunc === \"function\"){\r\n\t\t\t\t\tthis.writeFunc = this.table.options.persistenceWriterFunc;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(Persistence.writers[this.table.options.persistenceWriterFunc]){\r\n\t\t\t\t\t\tthis.writeFunc = Persistence.writers[this.table.options.persistenceWriterFunc];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(Persistence.writers[this.mode]){\r\n\t\t\t\t\tthis.writeFunc = Persistence.writers[this.mode];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid writer set\", this.mode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//set storage tag\r\n\t\t\tthis.id = \"tabulator-\" + (id || (this.table.element.getAttribute(\"id\") || \"\"));\r\n\r\n\t\t\tthis.config = {\r\n\t\t\t\tsort:this.table.options.persistence === true || this.table.options.persistence.sort,\r\n\t\t\t\tfilter:this.table.options.persistence === true || this.table.options.persistence.filter,\r\n\t\t\t\tgroup:this.table.options.persistence === true || this.table.options.persistence.group,\r\n\t\t\t\tpage:this.table.options.persistence === true || this.table.options.persistence.page,\r\n\t\t\t\tcolumns:this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns,\r\n\t\t\t};\r\n\r\n\t\t\t//load pagination data if needed\r\n\t\t\tif(this.config.page){\r\n\t\t\t\tretrievedData = this.retrieveData(\"page\");\r\n\r\n\t\t\t\tif(retrievedData){\r\n\t\t\t\t\tif(typeof retrievedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)){\r\n\t\t\t\t\t\tthis.table.options.paginationSize = retrievedData.paginationSize;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(typeof retrievedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)){\r\n\t\t\t\t\t\tthis.table.options.paginationInitialPage = retrievedData.paginationInitialPage;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//load group data if needed\r\n\t\t\tif(this.config.group){\r\n\t\t\t\tretrievedData = this.retrieveData(\"group\");\r\n\r\n\t\t\t\tif(retrievedData){\r\n\t\t\t\t\tif(typeof retrievedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)){\r\n\t\t\t\t\t\tthis.table.options.groupBy = retrievedData.groupBy;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(typeof retrievedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)){\r\n\t\t\t\t\t\tthis.table.options.groupStartOpen = retrievedData.groupStartOpen;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(typeof retrievedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)){\r\n\t\t\t\t\t\tthis.table.options.groupHeader = retrievedData.groupHeader;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.config.columns){\r\n\t\t\t\tthis.table.options.columns = this.load(\"columns\", this.table.options.columns);\r\n\t\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\r\n\t\t\t\tthis.subscribe(\"column-show\", this.save.bind(this, \"columns\"));\r\n\t\t\t\tthis.subscribe(\"column-hide\", this.save.bind(this, \"columns\"));\r\n\t\t\t\tthis.subscribe(\"column-moved\", this.save.bind(this, \"columns\"));\r\n\t\t\t}\r\n\r\n\t\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this), 0);\r\n\r\n\t\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\r\n\r\n\t\t\tthis.subscribe(\"filter-changed\", this.eventSave.bind(this, \"filter\"));\r\n\t\t\tthis.subscribe(\"sort-changed\", this.eventSave.bind(this, \"sort\"));\r\n\t\t\tthis.subscribe(\"group-changed\", this.eventSave.bind(this, \"group\"));\r\n\t\t\tthis.subscribe(\"page-changed\", this.eventSave.bind(this, \"page\"));\r\n\t\t\tthis.subscribe(\"column-resized\", this.eventSave.bind(this, \"columns\"));\r\n\t\t\tthis.subscribe(\"layout-refreshed\", this.eventSave.bind(this, \"columns\"));\r\n\t\t}\r\n\r\n\t\tthis.registerTableFunction(\"getColumnLayout\", this.getColumnLayout.bind(this));\r\n\t\tthis.registerTableFunction(\"setColumnLayout\", this.setColumnLayout.bind(this));\r\n\t}\r\n\r\n\teventSave(type){\r\n\t\tif(this.config[type]){\r\n\t\t\tthis.save(type);\r\n\t\t}\r\n\t}\r\n\r\n\ttableBuilt(){\r\n\t\tvar sorters, filters;\r\n\r\n\t\tif(this.config.sort){\r\n\t\t\tsorters = this.load(\"sort\");\r\n\r\n\t\t\tif(!sorters === false){\r\n\t\t\t\tthis.table.options.initialSort = sorters;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.config.filter){\r\n\t\t\tfilters = this.load(\"filter\");\r\n\r\n\t\t\tif(!filters === false){\r\n\t\t\t\tthis.table.options.initialFilter = filters;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttableRedraw(force){\r\n\t\tif(force && this.config.columns){\r\n\t\t\tthis.save(\"columns\");\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\tgetColumnLayout(){\r\n\t\treturn this.parseColumns(this.table.columnManager.getColumns());\r\n\t}\r\n\r\n\tsetColumnLayout(layout){\r\n\t\tthis.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns, layout));\r\n\t\treturn true;\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\tinitializeColumn(column){\r\n\t\tvar def, keys;\r\n\r\n\t\tif(this.config.columns){\r\n\t\t\tthis.defWatcherBlock = true;\r\n\r\n\t\t\tdef = column.getDefinition();\r\n\r\n\t\t\tkeys = this.config.columns === true ? Object.keys(def) : this.config.columns;\r\n\r\n\t\t\tkeys.forEach((key)=>{\r\n\t\t\t\tvar props = Object.getOwnPropertyDescriptor(def, key);\r\n\t\t\t\tvar value = def[key];\r\n\t\t\t\tif(props){\r\n\t\t\t\t\tObject.defineProperty(def, key, {\r\n\t\t\t\t\t\tset: function(newValue){\r\n\t\t\t\t\t\t\tvalue = newValue;\r\n\r\n\t\t\t\t\t\t\tif(!this.defWatcherBlock){\r\n\t\t\t\t\t\t\t\tthis.save(\"columns\");\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif(props.set){\r\n\t\t\t\t\t\t\t\tprops.set(newValue);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget:function(){\r\n\t\t\t\t\t\t\tif(props.get){\r\n\t\t\t\t\t\t\t\tprops.get();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.defWatcherBlock = false;\r\n\t\t}\r\n\t}\r\n\r\n\t//load saved definitions\r\n\tload(type, current){\r\n\t\tvar data = this.retrieveData(type);\r\n\r\n\t\tif(current){\r\n\t\t\tdata = data ? this.mergeDefinition(current, data) : current;\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\t//retrieve data from memory\r\n\tretrieveData(type){\r\n\t\treturn this.readFunc ? this.readFunc(this.id, type) : false;\r\n\t}\r\n\r\n\t//merge old and new column definitions\r\n\tmergeDefinition(oldCols, newCols){\r\n\t\tvar output = [];\r\n\r\n\t\tnewCols = newCols || [];\r\n\r\n\t\tnewCols.forEach((column, to) => {\r\n\t\t\tvar from = this._findColumn(oldCols, column),\r\n\t\t\tkeys;\r\n\r\n\t\t\tif(from){\r\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\r\n\t\t\t\t\tkeys =  Object.keys(from);\r\n\t\t\t\t\tkeys.push(\"width\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tkeys = this.config.columns;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkeys.forEach((key)=>{\r\n\t\t\t\t\tif(key !== \"columns\" && typeof column[key] !== \"undefined\"){\r\n\t\t\t\t\t\tfrom[key] = column[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(from.columns){\r\n\t\t\t\t\tfrom.columns = this.mergeDefinition(from.columns, column.columns);\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput.push(from);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\toldCols.forEach((column, i) => {\r\n\t\t\tvar from = this._findColumn(newCols, column);\r\n\r\n\t\t\tif (!from) {\r\n\t\t\t\tif(output.length>i){\r\n\t\t\t\t\toutput.splice(i, 0, column);\r\n\t\t\t\t}else{\r\n\t\t\t\t\toutput.push(column);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//find matching columns\r\n\t_findColumn(columns, subject){\r\n\t\tvar type = subject.columns ? \"group\" : (subject.field ? \"field\" : \"object\");\r\n\r\n\t\treturn columns.find(function(col){\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\t\treturn col.title === subject.title && col.columns.length === subject.columns.length;\r\n\r\n\t\t\t\tcase \"field\":\r\n\t\t\t\t\treturn col.field === subject.field;\r\n\r\n\t\t\t\tcase \"object\":\r\n\t\t\t\t\treturn col === subject;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//save data\r\n\tsave(type){\r\n\t\tvar data = {};\r\n\r\n\t\tswitch(type){\r\n\t\t\tcase \"columns\":\r\n\t\t\t\tdata = this.parseColumns(this.table.columnManager.getColumns());\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"filter\":\r\n\t\t\t\tdata = this.table.modules.filter.getFilters();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"sort\":\r\n\t\t\t\tdata = this.validateSorters(this.table.modules.sort.getSort());\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"group\":\r\n\t\t\t\tdata = this.getGroupConfig();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"page\":\r\n\t\t\t\tdata = this.getPageConfig();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(this.writeFunc){\r\n\t\t\tthis.writeFunc(this.id, type, data);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//ensure sorters contain no function data\r\n\tvalidateSorters(data){\r\n\t\tdata.forEach(function(item){\r\n\t\t\titem.column = item.field;\r\n\t\t\tdelete item.field;\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tgetGroupConfig(){\r\n\t\tvar data = {};\r\n\r\n\t\tif(this.config.group){\r\n\t\t\tif(this.config.group === true || this.config.group.groupBy){\r\n\t\t\t\tdata.groupBy = this.table.options.groupBy;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.config.group === true || this.config.group.groupStartOpen){\r\n\t\t\t\tdata.groupStartOpen = this.table.options.groupStartOpen;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.config.group === true || this.config.group.groupHeader){\r\n\t\t\t\tdata.groupHeader = this.table.options.groupHeader;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tgetPageConfig(){\r\n\t\tvar data = {};\r\n\r\n\t\tif(this.config.page){\r\n\t\t\tif(this.config.page === true || this.config.page.size){\r\n\t\t\t\tdata.paginationSize = this.table.modules.page.getPageSize();\r\n\t\t\t}\r\n\r\n\t\t\tif(this.config.page === true || this.config.page.page){\r\n\t\t\t\tdata.paginationInitialPage = this.table.modules.page.getPage();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\r\n\t//parse columns for data to store\r\n\tparseColumns(columns){\r\n\t\tvar definitions = [],\r\n\t\texcludedKeys = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\r\n\r\n\t\tcolumns.forEach((column) => {\r\n\t\t\tvar defStore = {},\r\n\t\t\tcolDef = column.getDefinition(),\r\n\t\t\tkeys;\r\n\r\n\t\t\tif(column.isGroup){\r\n\t\t\t\tdefStore.title = colDef.title;\r\n\t\t\t\tdefStore.columns = this.parseColumns(column.getColumns());\r\n\t\t\t}else{\r\n\t\t\t\tdefStore.field = column.getField();\r\n\r\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\r\n\t\t\t\t\tkeys =  Object.keys(colDef);\r\n\t\t\t\t\tkeys.push(\"width\");\r\n\t\t\t\t\tkeys.push(\"visible\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tkeys = this.config.columns;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkeys.forEach((key)=>{\r\n\t\t\t\t\tswitch(key){\r\n\t\t\t\t\t\tcase \"width\":\r\n\t\t\t\t\t\t\tdefStore.width = column.getWidth();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"visible\":\r\n\t\t\t\t\t\t\tdefStore.visible = column.visible;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tif(typeof colDef[key] !== \"function\" && excludedKeys.indexOf(key) === -1){\r\n\t\t\t\t\t\t\t\tdefStore[key] = colDef[key];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tdefinitions.push(defStore);\r\n\t\t});\r\n\r\n\t\treturn definitions;\r\n\t}\r\n}\r\n\r\nPersistence.moduleName = \"persistence\";\r\n\r\nPersistence.moduleInitOrder = -10;\r\n\r\n//load defaults\r\nPersistence.readers = defaultReaders;\r\nPersistence.writers = defaultWriters;\r\n\r\nexport default Persistence;","import Module from '../../core/Module.js';\r\n\r\nclass Popup extends Module{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.columnSubscribers = {};\r\n\t\t\r\n\t\tthis.registerTableOption(\"rowContextPopup\", false);\r\n\t\tthis.registerTableOption(\"rowClickPopup\", false);\r\n\t\tthis.registerTableOption(\"groupContextPopup\", false);\r\n\t\tthis.registerTableOption(\"groupClickPopup\", false);\r\n\t\t\r\n\t\tthis.registerColumnOption(\"headerContextPopup\");\r\n\t\tthis.registerColumnOption(\"headerClickPopup\");\r\n\t\tthis.registerColumnOption(\"headerPopup\");\r\n\t\tthis.registerColumnOption(\"headerPopupIcon\");\r\n\t\tthis.registerColumnOption(\"contextPopup\");\r\n\t\tthis.registerColumnOption(\"clickPopup\");\r\n\t\t\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tthis.initializeRowWatchers();\r\n\t\tthis.initializeGroupWatchers();\r\n\t\t\r\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\r\n\t}\r\n\t\r\n\tinitializeRowWatchers(){\r\n\t\tif(this.table.options.rowContextPopup){\r\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\r\n\t\t\tthis.table.on(\"rowTapHold\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\r\n\t\t}\r\n\t\t\r\n\t\tif(this.table.options.rowClickPopup){\r\n\t\t\tthis.subscribe(\"row-click\", this.loadPopupEvent.bind(this, this.table.options.rowClickPopup));\r\n\t\t}\r\n\t}\r\n\t\r\n\tinitializeGroupWatchers(){\r\n\t\tif(this.table.options.groupContextPopup){\r\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\r\n\t\t\tthis.table.on(\"groupTapHold\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\r\n\t\t}\r\n\t\t\r\n\t\tif(this.table.options.groupClickPopup){\r\n\t\t\tthis.subscribe(\"group-click\", this.loadPopupEvent.bind(this, this.table.options.groupClickPopup));\r\n\t\t}\r\n\t}\r\n\t\r\n\tinitializeColumn(column){\r\n\t\tvar def = column.definition;\r\n\t\t\r\n\t\t//handle column events\r\n\t\tif(def.headerContextPopup && !this.columnSubscribers.headerContextPopup){\r\n\t\t\tthis.columnSubscribers.headerContextPopup = this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\");\r\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextPopup);\r\n\t\t\tthis.table.on(\"headerTapHold\", this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\"));\r\n\t\t}\r\n\t\t\r\n\t\tif(def.headerClickPopup && !this.columnSubscribers.headerClickPopup){\r\n\t\t\tthis.columnSubscribers.headerClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerClickPopup\");\r\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickPopup);\r\n\t\t}\r\n\t\t\r\n\t\tif(def.headerPopup){\r\n\t\t\tthis.initializeColumnHeaderPopup(column);\r\n\t\t}\r\n\t\t\r\n\t\t//handle cell events\r\n\t\tif(def.contextPopup && !this.columnSubscribers.contextPopup){\r\n\t\t\tthis.columnSubscribers.contextPopup = this.loadPopupTableCellEvent.bind(this, \"contextPopup\");\r\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextPopup);\r\n\t\t\tthis.table.on(\"cellTapHold\", this.loadPopupTableCellEvent.bind(this, \"contextPopup\"));\r\n\t\t}\r\n\t\t\r\n\t\tif(def.clickPopup && !this.columnSubscribers.clickPopup){\r\n\t\t\tthis.columnSubscribers.clickPopup = this.loadPopupTableCellEvent.bind(this, \"clickPopup\");\r\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickPopup);\r\n\t\t}\r\n\t}\r\n\t\r\n\tinitializeColumnHeaderPopup(column){\r\n\t\tvar icon = column.definition.headerPopupIcon,\r\n\t\theaderPopupEl;\r\n\t\t\r\n\t\theaderPopupEl = document.createElement(\"span\");\r\n\t\theaderPopupEl.classList.add(\"tabulator-header-popup-button\");\r\n\r\n\t\tif(icon){\r\n\t\t\tif(typeof icon === \"function\"){\r\n\t\t\t\ticon = icon(column.getComponent());\r\n\t\t\t}\r\n\r\n\t\t\tif(icon instanceof HTMLElement){\r\n\t\t\t\theaderPopupEl.appendChild(icon);\r\n\t\t\t}else{\r\n\t\t\t\theaderPopupEl.innerHTML = icon;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\theaderPopupEl.innerHTML = \"&vellip;\";\r\n\t\t}\r\n\t\t\r\n\t\theaderPopupEl.addEventListener(\"click\", (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\t\r\n\t\t\tthis.loadPopupEvent(column.definition.headerPopup, e, column);\r\n\t\t});\r\n\t\t\r\n\t\tcolumn.titleElement.insertBefore(headerPopupEl, column.titleElement.firstChild);\r\n\t}\r\n\t\r\n\tloadPopupTableCellEvent(option, e, cell){\r\n\t\tif(cell._cell){\r\n\t\t\tcell = cell._cell;\r\n\t\t}\r\n\t\t\r\n\t\tif(cell.column.definition[option]){\r\n\t\t\tthis.loadPopupEvent(cell.column.definition[option], e, cell);\r\n\t\t}\r\n\t}\r\n\t\r\n\tloadPopupTableColumnEvent(option, e, column){\r\n\t\tif(column._column){\r\n\t\t\tcolumn = column._column;\r\n\t\t}\r\n\t\t\r\n\t\tif(column.definition[option]){\r\n\t\t\tthis.loadPopupEvent(column.definition[option], e, column);\r\n\t\t}\r\n\t}\r\n\t\r\n\tloadPopupEvent(contents, e, component){\r\n\t\tvar renderedCallback;\r\n\r\n\t\tfunction onRendered(callback){\r\n\t\t\trenderedCallback = callback;\r\n\t\t}\r\n\t\t\r\n\t\tif(component._group){\r\n\t\t\tcomponent = component._group;\r\n\t\t}else if(component._row){\r\n\t\t\tcomponent = component._row;\r\n\t\t}\r\n\t\t\r\n\t\tcontents = typeof contents == \"function\" ? contents.call(this.table, e, component.getComponent(),  onRendered) : contents;\r\n\t\t\r\n\t\tthis.loadPopup(e, component, contents, renderedCallback);\r\n\t}\r\n\t\r\n\tloadPopup(e, component, contents, renderedCallback){\r\n\t\tvar touch = !(e instanceof MouseEvent),\r\n\t\tcontentsEl, popup;\r\n\t\t\r\n\t\tif(contents instanceof HTMLElement){\r\n\t\t\tcontentsEl = contents;\r\n\t\t}else{\r\n\t\t\tcontentsEl = document.createElement(\"div\");\r\n\t\t\tcontentsEl.innerHTML = contents;\r\n\t\t}\r\n\t\t\r\n\t\tcontentsEl.classList.add(\"tabulator-popup\");\r\n\r\n\t\tcontentsEl.addEventListener(\"click\", (e) =>{\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\tif(!touch){\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\t\r\n\t\tpopup = this.popup(contentsEl);\r\n\r\n\t\tif(typeof renderedCallback === \"function\"){\r\n\t\t\tpopup.renderCallback(renderedCallback);\r\n\t\t}\r\n\t\t\r\n\t\tpopup.show(e).hideOnBlur(() => {\r\n\t\t\tthis.dispatchExternal(\"popupClosed\", component.getComponent());\r\n\t\t});\r\n\r\n\r\n\r\n\t\tthis.dispatchExternal(\"popupOpened\", component.getComponent());\r\n\t}\r\n}\r\n\r\nPopup.moduleName = \"popup\";\r\n\r\nexport default Popup;\r\n","import Module from '../../core/Module.js';\r\n\r\nclass Print extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.element = false;\r\n\t\tthis.manualBlock = false;\r\n\r\n\t\tthis.registerTableOption(\"printAsHtml\", false); //enable print as html\r\n\t\tthis.registerTableOption(\"printFormatter\", false); //printing page formatter\r\n\t\tthis.registerTableOption(\"printHeader\", false); //page header contents\r\n\t\tthis.registerTableOption(\"printFooter\", false); //page footer contents\r\n\t\tthis.registerTableOption(\"printStyled\", true); //enable print as html styling\r\n\t\tthis.registerTableOption(\"printRowRange\", \"visible\"); //restrict print to visible rows only\r\n\t\tthis.registerTableOption(\"printConfig\", {}); //print config options\r\n\r\n\t\tthis.registerColumnOption(\"print\");\r\n\t\tthis.registerColumnOption(\"titlePrint\");\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tif(this.table.options.printAsHtml){\r\n\t\t\twindow.addEventListener(\"beforeprint\", this.replaceTable.bind(this));\r\n\t\t\twindow.addEventListener(\"afterprint\", this.cleanup.bind(this));\r\n\t\t}\r\n\r\n\t\tthis.registerTableFunction(\"print\", this.printFullscreen.bind(this));\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\treplaceTable(){\r\n\t\tif(!this.manualBlock){\r\n\t\t\tthis.element = document.createElement(\"div\");\r\n\t\t\tthis.element.classList.add(\"tabulator-print-table\");\r\n\r\n\t\t\tthis.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\r\n\r\n\t\t\tthis.table.element.style.display = \"none\";\r\n\r\n\t\t\tthis.table.element.parentNode.insertBefore(this.element, this.table.element);\r\n\t\t}\r\n\t}\r\n\r\n\tcleanup(){\r\n\t\tdocument.body.classList.remove(\"tabulator-print-fullscreen-hide\");\r\n\r\n\t\tif(this.element && this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\tthis.table.element.style.display = \"\";\r\n\t\t}\r\n\t}\r\n\r\n\tprintFullscreen(visible, style, config){\r\n\t\tvar scrollX = window.scrollX,\r\n\t\tscrollY = window.scrollY,\r\n\t\theaderEl = document.createElement(\"div\"),\r\n\t\tfooterEl = document.createElement(\"div\"),\r\n\t\ttableEl = this.table.modules.export.generateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible || this.table.options.printRowRange, \"print\"),\r\n\t\theaderContent, footerContent;\r\n\r\n\t\tthis.manualBlock = true;\r\n\r\n\t\tthis.element = document.createElement(\"div\");\r\n\t\tthis.element.classList.add(\"tabulator-print-fullscreen\");\r\n\r\n\t\tif(this.table.options.printHeader){\r\n\t\t\theaderEl.classList.add(\"tabulator-print-header\");\r\n\r\n\t\t\theaderContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\r\n\r\n\t\t\tif(typeof headerContent == \"string\"){\r\n\t\t\t\theaderEl.innerHTML = headerContent;\r\n\t\t\t}else{\r\n\t\t\t\theaderEl.appendChild(headerContent);\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.appendChild(headerEl);\r\n\t\t}\r\n\r\n\t\tthis.element.appendChild(tableEl);\r\n\r\n\t\tif(this.table.options.printFooter){\r\n\t\t\tfooterEl.classList.add(\"tabulator-print-footer\");\r\n\r\n\t\t\tfooterContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\r\n\r\n\r\n\t\t\tif(typeof footerContent == \"string\"){\r\n\t\t\t\tfooterEl.innerHTML = footerContent;\r\n\t\t\t}else{\r\n\t\t\t\tfooterEl.appendChild(footerContent);\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.appendChild(footerEl);\r\n\t\t}\r\n\r\n\t\tdocument.body.classList.add(\"tabulator-print-fullscreen-hide\");\r\n\t\tdocument.body.appendChild(this.element);\r\n\r\n\t\tif(this.table.options.printFormatter){\r\n\t\t\tthis.table.options.printFormatter(this.element, tableEl);\r\n\t\t}\r\n\r\n\t\twindow.print();\r\n\r\n\t\tthis.cleanup();\r\n\r\n\t\twindow.scrollTo(scrollX, scrollY);\r\n\r\n\t\tthis.manualBlock = false;\r\n\t}\r\n}\r\n\r\nPrint.moduleName = \"print\";\r\n\r\nexport default Print;","import Module from '../../core/Module.js';\r\n\r\nclass ReactiveData extends Module{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.data = false;\r\n\t\tthis.blocked = false; //block reactivity while performing update\r\n\t\tthis.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\r\n\t\tthis.currentVersion = 0;\r\n\t\t\r\n\t\tthis.registerTableOption(\"reactiveData\", false); //enable data reactivity\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tif(this.table.options.reactiveData){\r\n\t\t\tthis.subscribe(\"cell-value-save-before\", this.block.bind(this, \"cellsave\"));\r\n\t\t\tthis.subscribe(\"cell-value-save-after\", this.unblock.bind(this, \"cellsave\"));\r\n\t\t\tthis.subscribe(\"row-data-save-before\", this.block.bind(this, \"rowsave\"));\r\n\t\t\tthis.subscribe(\"row-data-save-after\", this.unblock.bind(this, \"rowsave\"));\r\n\t\t\tthis.subscribe(\"row-data-init-after\", this.watchRow.bind(this));\r\n\t\t\tthis.subscribe(\"data-processing\", this.watchData.bind(this));\r\n\t\t\tthis.subscribe(\"table-destroy\", this.unwatchData.bind(this));\r\n\t\t}\r\n\t}\r\n\t\r\n\twatchData(data){\r\n\t\tvar self = this,\r\n\t\tversion;\r\n\t\t\r\n\t\tthis.currentVersion ++;\r\n\t\t\r\n\t\tversion = this.currentVersion;\r\n\t\t\r\n\t\tthis.unwatchData();\r\n\t\t\r\n\t\tthis.data = data;\r\n\t\t\r\n\t\t//override array push function\r\n\t\tthis.origFuncs.push = data.push;\r\n\t\t\r\n\t\tObject.defineProperty(this.data, \"push\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function(){\r\n\t\t\t\tvar args = Array.from(arguments),\r\n\t\t\t\tresult;\r\n\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\t\r\n\t\t\t\t\tself.block(\"data-push\");\r\n\r\n\t\t\t\t\targs.forEach((arg) => {\r\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, false);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tresult = self.origFuncs.push.apply(data, arguments);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.unblock(\"data-push\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t//override array unshift function\r\n\t\tthis.origFuncs.unshift = data.unshift;\r\n\t\t\r\n\t\tObject.defineProperty(this.data, \"unshift\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function(){\r\n\t\t\t\tvar args = Array.from(arguments),\r\n\t\t\t\tresult;\r\n\t\t\t\t\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\tself.block(\"data-unshift\");\r\n\t\t\t\t\t\r\n\t\t\t\t\targs.forEach((arg) => {\r\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, true);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tresult = self.origFuncs.unshift.apply(data, arguments);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.unblock(\"data-unshift\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\t//override array shift function\r\n\t\tthis.origFuncs.shift = data.shift;\r\n\t\t\r\n\t\tObject.defineProperty(this.data, \"shift\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function(){\r\n\t\t\t\tvar row, result;\r\n\t\t\t\t\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\tself.block(\"data-shift\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(self.data.length){\r\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[0]);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(row){\r\n\t\t\t\t\t\t\trow.deleteActual();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresult = self.origFuncs.shift.call(data);\r\n\r\n\t\t\t\t\tself.unblock(\"data-shift\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t//override array pop function\r\n\t\tthis.origFuncs.pop = data.pop;\r\n\t\t\r\n\t\tObject.defineProperty(this.data, \"pop\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function(){\r\n\t\t\t\tvar row, result;\r\n\t\t\t\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\tself.block(\"data-pop\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(self.data.length){\r\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(row){\r\n\t\t\t\t\t\t\trow.deleteActual();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresult = self.origFuncs.pop.call(data);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.unblock(\"data-pop\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\t//override array splice function\r\n\t\tthis.origFuncs.splice = data.splice;\r\n\t\t\r\n\t\tObject.defineProperty(this.data, \"splice\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function(){\r\n\t\t\t\tvar args = Array.from(arguments),\r\n\t\t\t\tstart = args[0] < 0 ? data.length + args[0] : args[0],\r\n\t\t\t\tend = args[1],\r\n\t\t\t\tnewRows = args[2] ? args.slice(2) : false,\r\n\t\t\t\tstartRow, result;\r\n\t\t\t\t\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\tself.block(\"data-splice\");\r\n\t\t\t\t\t//add new rows\r\n\t\t\t\t\tif(newRows){\r\n\t\t\t\t\t\tstartRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(startRow){\r\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\r\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, startRow, true);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tnewRows = newRows.slice().reverse();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\r\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, false, true);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t//delete removed rows\r\n\t\t\t\t\tif(end !== 0){\r\n\t\t\t\t\t\tvar oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\toldRows.forEach((rowData, i) => {\r\n\t\t\t\t\t\t\tvar row = self.table.rowManager.getRowFromDataObject(rowData);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(row){\r\n\t\t\t\t\t\t\t\trow.deleteActual(i !== oldRows.length - 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(newRows || end !== 0){\r\n\t\t\t\t\t\tself.table.rowManager.reRenderInPosition();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresult = self.origFuncs.splice.apply(data, arguments);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.unblock(\"data-splice\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn result ;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tunwatchData(){\r\n\t\tif(this.data !== false){\r\n\t\t\tfor(var key in this.origFuncs){\r\n\t\t\t\tObject.defineProperty(this.data, key, {\r\n\t\t\t\t\tenumerable: true,\r\n\t\t\t\t\tconfigurable:true,\r\n\t\t\t\t\twritable:true,\r\n\t\t\t\t\tvalue: this.origFuncs.key,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\twatchRow(row){\r\n\t\tvar data = row.getData();\r\n\t\t\r\n\t\tfor(var key in data){\r\n\t\t\tthis.watchKey(row, data, key);\r\n\t\t}\r\n\t\t\r\n\t\tif(this.table.options.dataTree){\r\n\t\t\tthis.watchTreeChildren(row);\r\n\t\t}\r\n\t}\r\n\t\r\n\twatchTreeChildren (row){\r\n\t\tvar self = this,\r\n\t\tchildField = row.getData()[this.table.options.dataTreeChildField],\r\n\t\torigFuncs = {};\r\n\t\t\r\n\t\tif(childField){\r\n\t\t\t\r\n\t\t\torigFuncs.push = childField.push;\r\n\t\t\t\r\n\t\t\tObject.defineProperty(childField, \"push\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: () => {\r\n\t\t\t\t\tif(!self.blocked){\r\n\t\t\t\t\t\tself.block(\"tree-push\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar result = origFuncs.push.apply(childField, arguments);\r\n\t\t\t\t\t\tthis.rebuildTree(row);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tself.unblock(\"tree-push\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\torigFuncs.unshift = childField.unshift;\r\n\t\t\t\r\n\t\t\tObject.defineProperty(childField, \"unshift\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: () => {\r\n\t\t\t\t\tif(!self.blocked){\r\n\t\t\t\t\t\tself.block(\"tree-unshift\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar result =  origFuncs.unshift.apply(childField, arguments);\r\n\t\t\t\t\t\tthis.rebuildTree(row);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tself.unblock(\"tree-unshift\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\torigFuncs.shift = childField.shift;\r\n\t\t\t\r\n\t\t\tObject.defineProperty(childField, \"shift\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: () => {\r\n\t\t\t\t\tif(!self.blocked){\r\n\t\t\t\t\t\tself.block(\"tree-shift\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar result =  origFuncs.shift.call(childField);\r\n\t\t\t\t\t\tthis.rebuildTree(row);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tself.unblock(\"tree-shift\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\torigFuncs.pop = childField.pop;\r\n\t\t\t\r\n\t\t\tObject.defineProperty(childField, \"pop\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: () => {\r\n\t\t\t\t\tif(!self.blocked){\r\n\t\t\t\t\t\tself.block(\"tree-pop\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar result =  origFuncs.pop.call(childField);\r\n\t\t\t\t\t\tthis.rebuildTree(row);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tself.unblock(\"tree-pop\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\torigFuncs.splice = childField.splice;\r\n\t\t\t\r\n\t\t\tObject.defineProperty(childField, \"splice\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: () => {\r\n\t\t\t\t\tif(!self.blocked){\r\n\t\t\t\t\t\tself.block(\"tree-splice\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar result =  origFuncs.splice.apply(childField, arguments);\r\n\t\t\t\t\t\tthis.rebuildTree(row);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tself.unblock(\"tree-splice\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\trebuildTree(row){\r\n\t\tthis.table.modules.dataTree.initializeRow(row);\r\n\t\tthis.table.modules.dataTree.layoutRow(row);\r\n\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\r\n\t}\r\n\t\r\n\twatchKey(row, data, key){\r\n\t\tvar self = this,\r\n\t\tprops = Object.getOwnPropertyDescriptor(data, key),\r\n\t\tvalue = data[key],\r\n\t\tversion = this.currentVersion;\r\n\t\t\r\n\t\tObject.defineProperty(data, key, {\r\n\t\t\tset: (newValue) => {\r\n\t\t\t\tvalue = newValue;\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\tself.block(\"key\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar update = {};\r\n\t\t\t\t\tupdate[key] = newValue;\r\n\t\t\t\t\trow.updateData(update);\r\n\t\t\t\t\t\r\n\t\t\t\t\tself.unblock(\"key\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(props.set){\r\n\t\t\t\t\tprops.set(newValue);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget:() => {\r\n\t\t\t\t\r\n\t\t\t\tif(props.get){\r\n\t\t\t\t\tprops.get();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tunwatchRow(row){\r\n\t\tvar data = row.getData();\r\n\t\t\r\n\t\tfor(var key in data){\r\n\t\t\tObject.defineProperty(data, key, {\r\n\t\t\t\tvalue:data[key],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\tblock(key){\r\n\t\tif(!this.blocked){\r\n\t\t\tthis.blocked = key;\r\n\t\t}\r\n\t}\r\n\t\r\n\tunblock(key){\r\n\t\tif(this.blocked === key){\r\n\t\t\tthis.blocked = false;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nReactiveData.moduleName = \"reactiveData\";\r\n\r\nexport default ReactiveData;\r\n\r\n\r\n\r\n","import Module from '../../core/Module.js';\r\n\r\nclass ResizeColumns extends Module{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.startColumn = false;\r\n\t\tthis.startX = false;\r\n\t\tthis.startWidth = false;\r\n\t\tthis.latestX = false;\r\n\t\tthis.handle = null;\r\n\t\tthis.initialNextColumn = null;\r\n\t\tthis.nextColumn = null;\r\n\t\t\r\n\t\tthis.initialized = false;\r\n\t\tthis.registerColumnOption(\"resizable\", true);\r\n\t\tthis.registerTableOption(\"resizableColumnFit\", false);\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"column-rendered\", this.layoutColumnHeader.bind(this));\r\n\t}\r\n\t\r\n\tinitializeEventWatchers(){\r\n\t\tif(!this.initialized){\r\n\t\t\t\r\n\t\t\tthis.subscribe(\"cell-rendered\", this.layoutCellHandles.bind(this));\r\n\t\t\tthis.subscribe(\"cell-delete\", this.deInitializeComponent.bind(this));\r\n\t\t\t\r\n\t\t\tthis.subscribe(\"cell-height\", this.resizeHandle.bind(this));\r\n\t\t\tthis.subscribe(\"column-moved\", this.columnLayoutUpdated.bind(this));\r\n\t\t\t\r\n\t\t\tthis.subscribe(\"column-hide\", this.deInitializeColumn.bind(this));\r\n\t\t\tthis.subscribe(\"column-show\", this.columnLayoutUpdated.bind(this));\r\n\t\t\tthis.subscribe(\"column-width\", this.columnWidthUpdated.bind(this));\r\n\t\t\t\r\n\t\t\tthis.subscribe(\"column-delete\", this.deInitializeComponent.bind(this));\r\n\t\t\tthis.subscribe(\"column-height\", this.resizeHandle.bind(this));\r\n\t\t\t\r\n\t\t\tthis.initialized = true;\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tlayoutCellHandles(cell){\r\n\t\tif(cell.row.type === \"row\"){\r\n\t\t\tthis.deInitializeComponent(cell);\r\n\t\t\tthis.initializeColumn(\"cell\", cell, cell.column, cell.element);\r\n\t\t}\r\n\t}\r\n\t\r\n\tlayoutColumnHeader(column){\r\n\t\tif(column.definition.resizable){\r\n\t\t\tthis.initializeEventWatchers();\r\n\t\t\tthis.deInitializeComponent(column);\r\n\t\t\tthis.initializeColumn(\"header\", column, column, column.element);\r\n\t\t}\r\n\t}\r\n\t\r\n\tcolumnLayoutUpdated(column){\r\n\t\tvar prev = column.prevColumn();\r\n\t\t\r\n\t\tthis.reinitializeColumn(column);\r\n\t\t\r\n\t\tif(prev){\r\n\t\t\tthis.reinitializeColumn(prev);\r\n\t\t}\r\n\t}\r\n\t\r\n\tcolumnWidthUpdated(column){\r\n\t\tif(column.modules.frozen){\r\n\t\t\tif(this.table.modules.frozenColumns.leftColumns.includes(column)){\r\n\t\t\t\tthis.table.modules.frozenColumns.leftColumns.forEach((col) => {\r\n\t\t\t\t\tthis.reinitializeColumn(col);\r\n\t\t\t\t});\r\n\t\t\t}else if(this.table.modules.frozenColumns.rightColumns.includes(column)){\r\n\t\t\t\tthis.table.modules.frozenColumns.rightColumns.forEach((col) => {\r\n\t\t\t\t\tthis.reinitializeColumn(col);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treinitializeColumn(column){\r\n\t\tvar frozenOffset = column.modules.frozen ? (column.modules.frozen.marginValue + column.getWidth() + \"px\") : false;\r\n\t\t\r\n\t\t\r\n\t\tcolumn.cells.forEach((cell) => {\r\n\t\t\tif(cell.modules.resize && cell.modules.resize.handleEl){\r\n\t\t\t\tif(frozenOffset){\r\n\t\t\t\t\tcell.modules.resize.handleEl.style.left = frozenOffset;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcell.element.after(cell.modules.resize.handleEl);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tif(column.modules.resize && column.modules.resize.handleEl){\r\n\t\t\tif(frozenOffset){\r\n\t\t\t\tcolumn.modules.resize.handleEl.style.left = frozenOffset;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcolumn.element.after(column.modules.resize.handleEl);\r\n\t\t}\r\n\t}\r\n\t\r\n\tinitializeColumn(type, component, column, element){\r\n\t\tvar self = this,\r\n\t\tvariableHeight = false,\r\n\t\tmode = column.definition.resizable,\r\n\t\tconfig = {},\r\n\t\tnearestColumn = column.getLastColumn();\r\n\t\t\r\n\t\t//set column resize mode\r\n\t\tif(type === \"header\"){\r\n\t\t\tvariableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\r\n\t\t\tconfig = {variableHeight:variableHeight};\r\n\t\t}\r\n\t\t\r\n\t\tif((mode === true || mode == type) && this._checkResizability(nearestColumn)){\r\n\t\t\t\r\n\t\t\tvar handle = document.createElement('span');\r\n\t\t\thandle.className = \"tabulator-col-resize-handle\";\r\n\t\t\t\r\n\t\t\thandle.addEventListener(\"click\", function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tvar handleDown = function(e){\r\n\t\t\t\tself.startColumn = column;\r\n\t\t\t\tself.initialNextColumn = self.nextColumn = nearestColumn.nextColumn();\r\n\t\t\t\tself._mouseDown(e, nearestColumn, handle);\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\thandle.addEventListener(\"mousedown\", handleDown);\r\n\t\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\r\n\t\t\t\r\n\t\t\t//resize column on  double click\r\n\t\t\thandle.addEventListener(\"dblclick\", (e) => {\r\n\t\t\t\tvar oldWidth = nearestColumn.getWidth();\r\n\t\t\t\t\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tnearestColumn.reinitializeWidth(true);\r\n\t\t\t\t\r\n\t\t\t\tif(oldWidth !== nearestColumn.getWidth()){\r\n\t\t\t\t\tself.dispatch(\"column-resized\", nearestColumn);\r\n\t\t\t\t\tself.table.externalEvents.dispatch(\"columnResized\", nearestColumn.getComponent());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif(column.modules.frozen){\r\n\t\t\t\thandle.style.position = \"absolute\";\r\n\t\t\t\thandle.style.left = column.modules.frozen.marginValue + column.getWidth() + \"px\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconfig.handleEl = handle;\r\n\t\t\t\r\n\t\t\tif(element.parentNode && column.visible){\r\n\t\t\t\telement.after(handle);\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tcomponent.modules.resize = config;\r\n\t}\r\n\t\r\n\tdeInitializeColumn(column){\r\n\t\tthis.deInitializeComponent(column);\r\n\t\t\r\n\t\tcolumn.cells.forEach((cell) => {\r\n\t\t\tthis.deInitializeComponent(cell);\r\n\t\t});\r\n\t}\r\n\t\r\n\tdeInitializeComponent(component){\r\n\t\tvar handleEl;\r\n\t\t\r\n\t\tif(component.modules.resize){\r\n\t\t\thandleEl = component.modules.resize.handleEl;\r\n\t\t\t\r\n\t\t\tif(handleEl && handleEl.parentElement){\r\n\t\t\t\thandleEl.parentElement.removeChild(handleEl);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tresizeHandle(component, height){\r\n\t\tif(component.modules.resize && component.modules.resize.handleEl){\r\n\t\t\tcomponent.modules.resize.handleEl.style.height = height;\r\n\t\t}\r\n\t}\r\n\t\r\n\t_checkResizability(column){\r\n\t\treturn column.definition.resizable;\r\n\t}\r\n\t\r\n\t_mouseDown(e, column, handle){\r\n\t\tvar self = this;\r\n\t\t\r\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\r\n\t\t\r\n\t\tfunction mouseMove(e){\r\n\t\t\tvar x = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX,\r\n\t\t\tstartDiff = x - self.startX,\r\n\t\t\tmoveDiff = x - self.latestX,\r\n\t\t\tblockedBefore, blockedAfter;\r\n\t\t\t\r\n\t\t\tself.latestX = x;\r\n\t\t\t\r\n\t\t\tif(self.table.rtl){\r\n\t\t\t\tstartDiff = -startDiff;\r\n\t\t\t\tmoveDiff = -moveDiff;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tblockedBefore = column.width == column.minWidth || column.width == column.maxWidth;\r\n\t\t\t\r\n\t\t\tcolumn.setWidth(self.startWidth + startDiff);\r\n\t\t\t\r\n\t\t\tblockedAfter = column.width == column.minWidth || column.width == column.maxWidth;\r\n\t\t\t\r\n\t\t\tif(moveDiff < 0){\r\n\t\t\t\tself.nextColumn = self.initialNextColumn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(self.table.options.resizableColumnFit && self.nextColumn && !(blockedBefore && blockedAfter)){\r\n\t\t\t\tlet colWidth = self.nextColumn.getWidth();\r\n\t\t\t\t\r\n\t\t\t\tif(moveDiff > 0){\r\n\t\t\t\t\tif(colWidth <= self.nextColumn.minWidth){\r\n\t\t\t\t\t\tself.nextColumn = self.nextColumn.nextColumn();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(self.nextColumn){\r\n\t\t\t\t\tself.nextColumn.setWidth(self.nextColumn.getWidth() - moveDiff);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tself.table.columnManager.rerenderColumns(true);\r\n\t\t\t\r\n\t\t\tif(!self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\r\n\t\t\t\tcolumn.checkCellHeights();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction mouseUp(e){\r\n\t\t\t\r\n\t\t\t//block editor from taking action while resizing is taking place\r\n\t\t\tif(self.startColumn.modules.edit){\r\n\t\t\t\tself.startColumn.modules.edit.blocked = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\r\n\t\t\t\tcolumn.checkCellHeights();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseUp);\r\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\r\n\t\t\t\r\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\r\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\r\n\t\t\t\r\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\r\n\t\t\t\r\n\t\t\tif(self.startWidth !== column.getWidth()){\r\n\t\t\t\tself.dispatch(\"column-resized\", column);\r\n\t\t\t\tself.table.externalEvents.dispatch(\"columnResized\", column.getComponent());\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\te.stopPropagation(); //prevent resize from interfering with movable columns\r\n\t\t\r\n\t\t//block editor from taking action while resizing is taking place\r\n\t\tif(self.startColumn.modules.edit){\r\n\t\t\tself.startColumn.modules.edit.blocked = true;\r\n\t\t}\r\n\t\t\r\n\t\tself.startX = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX;\r\n\t\tself.latestX = self.startX;\r\n\t\tself.startWidth = column.getWidth();\r\n\t\t\r\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\r\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\r\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\r\n\t\thandle.addEventListener(\"touchend\", mouseUp);\r\n\t}\r\n}\r\n\r\nResizeColumns.moduleName = \"resizeColumns\";\r\n\r\nexport default ResizeColumns;","import Module from '../../core/Module.js';\r\n\r\nclass ResizeRows extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.startColumn = false;\r\n\t\tthis.startY = false;\r\n\t\tthis.startHeight = false;\r\n\t\tthis.handle = null;\r\n\t\tthis.prevHandle = null;\r\n\r\n\t\tthis.registerTableOption(\"resizableRows\", false); //resizable rows\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tif(this.table.options.resizableRows){\r\n\t\t\tthis.subscribe(\"row-layout-after\", this.initializeRow.bind(this));\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar self = this,\r\n\t\trowEl = row.getElement();\r\n\r\n\t\tvar handle = document.createElement('div');\r\n\t\thandle.className = \"tabulator-row-resize-handle\";\r\n\r\n\t\tvar prevHandle = document.createElement('div');\r\n\t\tprevHandle.className = \"tabulator-row-resize-handle prev\";\r\n\r\n\t\thandle.addEventListener(\"click\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\tvar handleDown = function(e){\r\n\t\t\tself.startRow = row;\r\n\t\t\tself._mouseDown(e, row, handle);\r\n\t\t};\r\n\r\n\t\thandle.addEventListener(\"mousedown\", handleDown);\r\n\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\r\n\r\n\t\tprevHandle.addEventListener(\"click\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\tvar prevHandleDown =  function(e){\r\n\t\t\tvar prevRow = self.table.rowManager.prevDisplayRow(row);\r\n\r\n\t\t\tif(prevRow){\r\n\t\t\t\tself.startRow = prevRow;\r\n\t\t\t\tself._mouseDown(e, prevRow, prevHandle);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tprevHandle.addEventListener(\"mousedown\",prevHandleDown);\r\n\t\tprevHandle.addEventListener(\"touchstart\",prevHandleDown, {passive: true});\r\n\r\n\t\trowEl.appendChild(handle);\r\n\t\trowEl.appendChild(prevHandle);\r\n\t}\r\n\r\n\t_mouseDown(e, row, handle){\r\n\t\tvar self = this;\r\n\r\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\r\n\r\n\t\tfunction mouseMove(e){\r\n\t\t\trow.setHeight(self.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - self.startY));\r\n\t\t}\r\n\r\n\t\tfunction mouseUp(e){\r\n\r\n\t\t\t// //block editor from taking action while resizing is taking place\r\n\t\t\t// if(self.startColumn.modules.edit){\r\n\t\t\t// \tself.startColumn.modules.edit.blocked = false;\r\n\t\t\t// }\r\n\r\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseMove);\r\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\r\n\r\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\r\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\r\n\r\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\r\n\r\n\t\t\tself.dispatchExternal(\"rowResized\", row.getComponent());\r\n\t\t}\r\n\r\n\t\te.stopPropagation(); //prevent resize from interfering with movable columns\r\n\r\n\t\t//block editor from taking action while resizing is taking place\r\n\t\t// if(self.startColumn.modules.edit){\r\n\t\t// \tself.startColumn.modules.edit.blocked = true;\r\n\t\t// }\r\n\r\n\t\tself.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\r\n\t\tself.startHeight = row.getHeight();\r\n\r\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\r\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\r\n\r\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\r\n\t\thandle.addEventListener(\"touchend\", mouseUp);\r\n\t}\r\n}\r\n\r\nResizeRows.moduleName = \"resizeRows\";\r\n\r\nexport default ResizeRows;","import Module from '../../core/Module.js';\r\n\r\nclass ResizeTable extends Module{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.binding = false;\r\n\t\tthis.visibilityObserver = false;\r\n\t\tthis.resizeObserver = false;\r\n\t\tthis.containerObserver = false;\r\n\t\t\r\n\t\tthis.tableHeight = 0;\r\n\t\tthis.tableWidth = 0;\r\n\t\tthis.containerHeight = 0;\r\n\t\tthis.containerWidth = 0;\r\n\t\t\r\n\t\tthis.autoResize = false;\r\n\t\t\r\n\t\tthis.visible = false;\r\n\t\t\r\n\t\tthis.initialized = false;\r\n\t\tthis.initialRedraw = false;\r\n\t\t\r\n\t\tthis.registerTableOption(\"autoResize\", true); //auto resize table\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tif(this.table.options.autoResize){\r\n\t\t\tvar table = this.table,\r\n\t\t\ttableStyle;\r\n\t\t\t\r\n\t\t\tthis.tableHeight = table.element.clientHeight;\r\n\t\t\tthis.tableWidth = table.element.clientWidth;\r\n\t\t\t\r\n\t\t\tif(table.element.parentNode){\r\n\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\r\n\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(typeof IntersectionObserver !== \"undefined\" && typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\"){\r\n\t\t\t\t\r\n\t\t\t\tthis.initializeVisibilityObserver();\r\n\t\t\t\t\r\n\t\t\t\tthis.autoResize = true;\r\n\t\t\t\t\r\n\t\t\t\tthis.resizeObserver = new ResizeObserver((entry) => {\r\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\r\n\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(this.tableHeight != nodeHeight || this.tableWidth != nodeWidth){\r\n\t\t\t\t\t\t\tthis.tableHeight = nodeHeight;\r\n\t\t\t\t\t\t\tthis.tableWidth = nodeWidth;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(table.element.parentNode){\r\n\t\t\t\t\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\r\n\t\t\t\t\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.redrawTable();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.resizeObserver.observe(table.element);\r\n\t\t\t\t\r\n\t\t\t\ttableStyle = window.getComputedStyle(table.element);\r\n\t\t\t\t\r\n\t\t\t\tif(this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))){\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.containerObserver = new ResizeObserver((entry) => {\r\n\t\t\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\r\n\t\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(this.containerHeight != nodeHeight || this.containerWidth != nodeWidth){\r\n\t\t\t\t\t\t\t\tthis.containerHeight = nodeHeight;\r\n\t\t\t\t\t\t\t\tthis.containerWidth = nodeWidth;\r\n\t\t\t\t\t\t\t\tthis.tableHeight = table.element.clientHeight;\r\n\t\t\t\t\t\t\t\tthis.tableWidth = table.element.clientWidth;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.redrawTable();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.containerObserver.observe(this.table.element.parentNode);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.subscribe(\"table-resize\", this.tableResized.bind(this));\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tthis.binding = function(){\r\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile && !table.modules.edit.currentCell)){\r\n\t\t\t\t\t\ttable.columnManager.rerenderColumns(true);\r\n\t\t\t\t\t\ttable.redraw();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\twindow.addEventListener(\"resize\", this.binding);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\r\n\t\t}\r\n\t}\r\n\t\r\n\tinitializeVisibilityObserver(){\r\n\t\tthis.visibilityObserver = new IntersectionObserver((entries) => {\r\n\t\t\tthis.visible = entries[0].isIntersecting;\r\n\r\n\t\t\tif(!this.initialized){\r\n\t\t\t\tthis.initialized = true;\r\n\t\t\t\tthis.initialRedraw = !this.visible;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.visible){\r\n\t\t\t\tthis.redrawTable(this.initialRedraw);\r\n\t\t\t\tthis.initialRedraw = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\tthis.visibilityObserver.observe(this.table.element);\r\n\t}\r\n\t\r\n\tredrawTable(force){\r\n\t\tif(this.initialized && this.visible){\r\n\t\t\tthis.table.columnManager.rerenderColumns(true);\r\n\t\t\tthis.table.redraw(force);\r\n\t\t}\r\n\t}\r\n\t\r\n\ttableResized(){\r\n\t\tthis.table.rowManager.redraw();\r\n\t}\r\n\t\r\n\tclearBindings(){\r\n\t\tif(this.binding){\r\n\t\t\twindow.removeEventListener(\"resize\", this.binding);\r\n\t\t}\r\n\t\t\r\n\t\tif(this.resizeObserver){\r\n\t\t\tthis.resizeObserver.unobserve(this.table.element);\r\n\t\t}\r\n\t\t\r\n\t\tif(this.visibilityObserver){\r\n\t\t\tthis.visibilityObserver.unobserve(this.table.element);\r\n\t\t}\r\n\t\t\r\n\t\tif(this.containerObserver){\r\n\t\t\tthis.containerObserver.unobserve(this.table.element.parentNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nResizeTable.moduleName = \"resizeTable\";\r\n\r\nexport default ResizeTable;","import Module from '../../core/Module.js';\r\n\r\nclass ResponsiveLayout extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.columns = [];\r\n\t\tthis.hiddenColumns = [];\r\n\t\tthis.mode = \"\";\r\n\t\tthis.index = 0;\r\n\t\tthis.collapseFormatter = [];\r\n\t\tthis.collapseStartOpen = true;\r\n\t\tthis.collapseHandleColumn = false;\r\n\r\n\t\tthis.registerTableOption(\"responsiveLayout\", false); //responsive layout flags\r\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseStartOpen\", true); //start showing collapsed data\r\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseUseFormatters\", true); //responsive layout collapse formatter\r\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseFormatter\", false); //responsive layout collapse formatter\r\n\r\n\t\tthis.registerColumnOption(\"responsive\");\r\n\t}\r\n\r\n\t//generate responsive columns list\r\n\tinitialize(){\r\n\t\tif(this.table.options.responsiveLayout){\r\n\t\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\r\n\t\t\tthis.subscribe(\"column-show\", this.updateColumnVisibility.bind(this));\r\n\t\t\tthis.subscribe(\"column-hide\", this.updateColumnVisibility.bind(this));\r\n\t\t\tthis.subscribe(\"columns-loaded\", this.initializeResponsivity.bind(this));\r\n\t\t\tthis.subscribe(\"column-moved\", this.initializeResponsivity.bind(this));\r\n\t\t\tthis.subscribe(\"column-add\", this.initializeResponsivity.bind(this));\r\n\t\t\tthis.subscribe(\"column-delete\", this.initializeResponsivity.bind(this));\r\n\r\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedraw.bind(this));\r\n\t\t\t\r\n\t\t\tif(this.table.options.responsiveLayout === \"collapse\"){\r\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.generateCollapsedRowContent.bind(this));\r\n\t\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\r\n\t\t\t\tthis.subscribe(\"row-layout\", this.layoutRow.bind(this));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttableRedraw(force){\r\n\t\tif([\"fitColumns\", \"fitDataStretch\"].indexOf(this.layoutMode()) === -1){\r\n\t\t\tif(!force){\r\n\t\t\t\tthis.update();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeResponsivity(){\r\n\t\tvar columns = [];\r\n\r\n\t\tthis.mode = this.table.options.responsiveLayout;\r\n\t\tthis.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\r\n\t\tthis.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\r\n\t\tthis.hiddenColumns = [];\r\n\r\n\t\t//determine level of responsivity for each column\r\n\t\tthis.table.columnManager.columnsByIndex.forEach((column, i) => {\r\n\t\t\tif(column.modules.responsive){\r\n\t\t\t\tif(column.modules.responsive.order && column.modules.responsive.visible){\r\n\t\t\t\t\tcolumn.modules.responsive.index = i;\r\n\t\t\t\t\tcolumns.push(column);\r\n\r\n\t\t\t\t\tif(!column.visible && this.mode === \"collapse\"){\r\n\t\t\t\t\t\tthis.hiddenColumns.push(column);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//sort list by responsivity\r\n\t\tcolumns = columns.reverse();\r\n\t\tcolumns = columns.sort((a, b) => {\r\n\t\t\tvar diff = b.modules.responsive.order - a.modules.responsive.order;\r\n\t\t\treturn diff || (b.modules.responsive.index - a.modules.responsive.index);\r\n\t\t});\r\n\r\n\t\tthis.columns = columns;\r\n\r\n\t\tif(this.mode === \"collapse\"){\r\n\t\t\tthis.generateCollapsedContent();\r\n\t\t}\r\n\r\n\t\t//assign collapse column\r\n\t\tfor (let col of this.table.columnManager.columnsByIndex){\r\n\t\t\tif(col.definition.formatter == \"responsiveCollapse\"){\r\n\t\t\t\tthis.collapseHandleColumn = col;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.collapseHandleColumn){\r\n\t\t\tif(this.hiddenColumns.length){\r\n\t\t\t\tthis.collapseHandleColumn.show();\r\n\t\t\t}else{\r\n\t\t\t\tthis.collapseHandleColumn.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//define layout information\r\n\tinitializeColumn(column){\r\n\t\tvar def = column.getDefinition();\r\n\r\n\t\tcolumn.modules.responsive = {order: typeof def.responsive === \"undefined\" ? 1 : def.responsive, visible:def.visible === false ? false : true};\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar el;\r\n\r\n\t\tif(row.type !== \"calc\"){\r\n\t\t\tel = document.createElement(\"div\");\r\n\t\t\tel.classList.add(\"tabulator-responsive-collapse\");\r\n\r\n\t\t\trow.modules.responsiveLayout = {\r\n\t\t\t\telement:el,\r\n\t\t\t\topen:this.collapseStartOpen,\r\n\t\t\t};\r\n\r\n\t\t\tif(!this.collapseStartOpen){\r\n\t\t\t\tel.style.display = 'none';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tlayoutRow(row){\r\n\t\tvar rowEl = row.getElement();\r\n\r\n\t\tif(row.modules.responsiveLayout){\r\n\t\t\trowEl.appendChild(row.modules.responsiveLayout.element);\r\n\t\t\tthis.generateCollapsedRowContent(row);\r\n\t\t}\r\n\t}\r\n\r\n\t//update column visibility\r\n\tupdateColumnVisibility(column, responsiveToggle){\r\n\t\tif(!responsiveToggle && column.modules.responsive){\r\n\t\t\tcolumn.modules.responsive.visible = column.visible;\r\n\t\t\tthis.initializeResponsivity();\r\n\t\t}\r\n\t}\r\n\r\n\thideColumn(column){\r\n\t\tvar colCount = this.hiddenColumns.length;\r\n\r\n\t\tcolumn.hide(false, true);\r\n\r\n\t\tif(this.mode === \"collapse\"){\r\n\t\t\tthis.hiddenColumns.unshift(column);\r\n\t\t\tthis.generateCollapsedContent();\r\n\r\n\t\t\tif(this.collapseHandleColumn && !colCount){\r\n\t\t\t\tthis.collapseHandleColumn.show();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tshowColumn(column){\r\n\t\tvar index;\r\n\r\n\t\tcolumn.show(false, true);\r\n\t\t//set column width to prevent calculation loops on uninitialized columns\r\n\t\tcolumn.setWidth(column.getWidth());\r\n\r\n\t\tif(this.mode === \"collapse\"){\r\n\t\t\tindex = this.hiddenColumns.indexOf(column);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.hiddenColumns.splice(index, 1);\r\n\t\t\t}\r\n\r\n\t\t\tthis.generateCollapsedContent();\r\n\r\n\t\t\tif(this.collapseHandleColumn && !this.hiddenColumns.length){\r\n\t\t\t\tthis.collapseHandleColumn.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//redraw columns to fit space\r\n\tupdate(){\r\n\t\tvar self = this,\r\n\t\tworking = true;\r\n\r\n\t\twhile(working){\r\n\r\n\t\t\tlet width = self.table.modules.layout.getMode() == \"fitColumns\" ? self.table.columnManager.getFlexBaseWidth() : self.table.columnManager.getWidth();\r\n\r\n\t\t\tlet diff = (self.table.options.headerVisible ? self.table.columnManager.element.clientWidth : self.table.element.clientWidth) - width;\r\n\r\n\t\t\tif(diff < 0){\r\n\t\t\t\t//table is too wide\r\n\t\t\t\tlet column = self.columns[self.index];\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tself.hideColumn(column);\r\n\t\t\t\t\tself.index ++;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tworking = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\r\n\t\t\t\t//table has spare space\r\n\t\t\t\tlet column = self.columns[self.index -1];\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tif(diff > 0){\r\n\t\t\t\t\t\tif(diff >= column.getWidth()){\r\n\t\t\t\t\t\t\tself.showColumn(column);\r\n\t\t\t\t\t\t\tself.index --;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tworking = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tworking = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tworking = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.table.rowManager.activeRowsCount){\r\n\t\t\t\tself.table.rowManager.renderEmptyScroll();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateCollapsedContent(){\r\n\t\tvar self = this,\r\n\t\trows = this.table.rowManager.getDisplayRows();\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\tself.generateCollapsedRowContent(row);\r\n\t\t});\r\n\t}\r\n\r\n\tgenerateCollapsedRowContent(row){\r\n\t\tvar el, contents;\r\n\r\n\t\tif(row.modules.responsiveLayout){\r\n\t\t\tel = row.modules.responsiveLayout.element;\r\n\r\n\t\t\twhile(el.firstChild) el.removeChild(el.firstChild);\r\n\r\n\t\t\tcontents = this.collapseFormatter(this.generateCollapsedRowData(row));\r\n\t\t\tif(contents){\r\n\t\t\t\tel.appendChild(contents);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateCollapsedRowData(row){\r\n\t\tvar self = this,\r\n\t\tdata = row.getData(),\r\n\t\toutput = [],\r\n\t\tmockCellComponent;\r\n\r\n\t\tthis.hiddenColumns.forEach(function(column){\r\n\t\t\tvar value = column.getFieldValue(data);\r\n\r\n\t\t\tif(column.definition.title && column.field){\r\n\t\t\t\tif(column.modules.format && self.table.options.responsiveLayoutCollapseUseFormatters){\r\n\r\n\t\t\t\t\tmockCellComponent = {\r\n\t\t\t\t\t\tvalue:false,\r\n\t\t\t\t\t\tdata:{},\r\n\t\t\t\t\t\tgetValue:function(){\r\n\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetData:function(){\r\n\t\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetElement:function(){\r\n\t\t\t\t\t\t\treturn document.createElement(\"div\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetRow:function(){\r\n\t\t\t\t\t\t\treturn row.getComponent();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetColumn:function(){\r\n\t\t\t\t\t\t\treturn column.getComponent();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tfunction onRendered(callback){\r\n\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\toutput.push({\r\n\t\t\t\t\t\tfield: column.field,\r\n\t\t\t\t\t\ttitle: column.definition.title,\r\n\t\t\t\t\t\tvalue: column.modules.format.formatter.call(self.table.modules.format, mockCellComponent, column.modules.format.params, onRendered)\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\toutput.push({\r\n\t\t\t\t\t\tfield: column.field,\r\n\t\t\t\t\t\ttitle: column.definition.title,\r\n\t\t\t\t\t\tvalue: value\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tformatCollapsedData(data){\r\n\t\tvar list = document.createElement(\"table\");\r\n\r\n\t\tdata.forEach(function(item){\r\n\t\t\tvar row = document.createElement(\"tr\");\r\n\t\t\tvar titleData = document.createElement(\"td\");\r\n\t\t\tvar valueData = document.createElement(\"td\");\r\n\t\t\tvar node_content;\r\n\r\n\t\t\tvar titleHighlight = document.createElement(\"strong\");\r\n\t\t\ttitleData.appendChild(titleHighlight);\r\n\t\t\tthis.langBind(\"columns|\" + item.field, function(text){\r\n\t\t\t\ttitleHighlight.innerHTML = text || item.title;\r\n\t\t\t});\r\n\r\n\t\t\tif(item.value instanceof Node){\r\n\t\t\t\tnode_content = document.createElement(\"div\");\r\n\t\t\t\tnode_content.appendChild(item.value);\r\n\t\t\t\tvalueData.appendChild(node_content);\r\n\t\t\t}else{\r\n\t\t\t\tvalueData.innerHTML = item.value;\r\n\t\t\t}\r\n\r\n\t\t\trow.appendChild(titleData);\r\n\t\t\trow.appendChild(valueData);\r\n\t\t\tlist.appendChild(row);\r\n\t\t}, this);\r\n\r\n\t\treturn Object.keys(data).length ? list : \"\";\r\n\t}\r\n}\r\n\r\nResponsiveLayout.moduleName = \"responsiveLayout\";\r\n\r\nexport default ResponsiveLayout;\r\n","import Module from '../../core/Module.js';\r\n\r\nclass SelectRow extends Module{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.selecting = false; //flag selecting in progress\r\n\t\tthis.lastClickedRow = false; //last clicked row\r\n\t\tthis.selectPrev = []; //hold previously selected element for drag drop selection\r\n\t\tthis.selectedRows = []; //hold selected rows\r\n\t\tthis.headerCheckboxElement = null; // hold header select element\r\n\t\t\r\n\t\tthis.registerTableOption(\"selectable\", \"highlight\"); //highlight rows on hover\r\n\t\tthis.registerTableOption(\"selectableRangeMode\", \"drag\");  //highlight rows on hover\r\n\t\tthis.registerTableOption(\"selectableRollingSelection\", true); //roll selection once maximum number of selectable rows is reached\r\n\t\tthis.registerTableOption(\"selectablePersistence\", true); // maintain selection when table view is updated\r\n\t\tthis.registerTableOption(\"selectableCheck\", function(data, row){return true;}); //check whether row is selectable\r\n\t\t\r\n\t\tthis.registerTableFunction(\"selectRow\", this.selectRows.bind(this));\r\n\t\tthis.registerTableFunction(\"deselectRow\", this.deselectRows.bind(this));\r\n\t\tthis.registerTableFunction(\"toggleSelectRow\", this.toggleRow.bind(this));\r\n\t\tthis.registerTableFunction(\"getSelectedRows\", this.getSelectedRows.bind(this));\r\n\t\tthis.registerTableFunction(\"getSelectedData\", this.getSelectedData.bind(this));\r\n\t\t\r\n\t\t//register component functions\r\n\t\tthis.registerComponentFunction(\"row\", \"select\", this.selectRows.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"deselect\", this.deselectRows.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"toggleSelect\", this.toggleRow.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"isSelected\", this.isRowSelected.bind(this));\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tif(this.table.options.selectable !== false){\r\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\r\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleted.bind(this));\r\n\t\t\tthis.subscribe(\"rows-wipe\", this.clearSelectionData.bind(this));\r\n\t\t\tthis.subscribe(\"rows-retrieve\", this.rowRetrieve.bind(this));\r\n\t\t\t\r\n\t\t\tif(this.table.options.selectable && !this.table.options.selectablePersistence){\r\n\t\t\t\tthis.subscribe(\"data-refreshing\", this.deselectRows.bind(this));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\trowRetrieve(type, prevValue){\r\n\t\treturn type === \"selected\" ? this.selectedRows : prevValue;\r\n\t}\r\n\t\r\n\trowDeleted(row){\r\n\t\tthis._deselectRow(row, true);\r\n\t}\r\n\t\r\n\tclearSelectionData(silent){\r\n\t\tthis.selecting = false;\r\n\t\tthis.lastClickedRow = false;\r\n\t\tthis.selectPrev = [];\r\n\t\tthis.selectedRows = [];\r\n\t\t\r\n\t\tif(silent !== true){\r\n\t\t\tthis._rowSelectionChanged();\r\n\t\t}\r\n\t}\r\n\t\r\n\tinitializeRow(row){\r\n\t\tvar self = this,\r\n\t\telement = row.getElement();\r\n\t\t\r\n\t\t// trigger end of row selection\r\n\t\tvar endSelect = function(){\r\n\t\t\t\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tself.selecting = false;\r\n\t\t\t}, 50);\r\n\t\t\t\r\n\t\t\tdocument.body.removeEventListener(\"mouseup\", endSelect);\r\n\t\t};\r\n\t\t\r\n\t\trow.modules.select = {selected:false};\r\n\t\t\r\n\t\t//set row selection class\r\n\t\tif(self.table.options.selectableCheck.call(this.table, row.getComponent())){\r\n\t\t\telement.classList.add(\"tabulator-selectable\");\r\n\t\t\telement.classList.remove(\"tabulator-unselectable\");\r\n\t\t\t\r\n\t\t\tif(self.table.options.selectable && self.table.options.selectable != \"highlight\"){\r\n\t\t\t\tif(self.table.options.selectableRangeMode === \"click\"){\r\n\t\t\t\t\telement.addEventListener(\"click\", this.handleComplexRowClick.bind(this, row));\r\n\t\t\t\t}else{\r\n\t\t\t\t\telement.addEventListener(\"click\", function(e){\r\n\t\t\t\t\t\tif(!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(!self.selecting){\r\n\t\t\t\t\t\t\tself.toggleRow(row);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\telement.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\t\t\tif(e.shiftKey){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.selecting = true;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.selectPrev = [];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"mouseup\", endSelect);\r\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"keyup\", endSelect);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.toggleRow(row);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\telement.addEventListener(\"mouseenter\", function(e){\r\n\t\t\t\t\t\tif(self.selecting){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t\tself.toggleRow(row);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(self.selectPrev[1] == row){\r\n\t\t\t\t\t\t\t\tself.toggleRow(self.selectPrev[0]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\telement.addEventListener(\"mouseout\", function(e){\r\n\t\t\t\t\t\tif(self.selecting){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t\tself.selectPrev.unshift(row);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}else{\r\n\t\t\telement.classList.add(\"tabulator-unselectable\");\r\n\t\t\telement.classList.remove(\"tabulator-selectable\");\r\n\t\t}\r\n\t}\r\n\t\r\n\thandleComplexRowClick(row, e){\r\n\t\tif(e.shiftKey){\r\n\t\t\tthis.table._clearSelection();\r\n\t\t\tthis.lastClickedRow = this.lastClickedRow || row;\r\n\t\t\t\r\n\t\t\tvar lastClickedRowIdx = this.table.rowManager.getDisplayRowIndex(this.lastClickedRow);\r\n\t\t\tvar rowIdx = this.table.rowManager.getDisplayRowIndex(row);\r\n\t\t\t\r\n\t\t\tvar fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\r\n\t\t\tvar toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\r\n\t\t\t\r\n\t\t\tvar rows = this.table.rowManager.getDisplayRows().slice(0);\r\n\t\t\tvar toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\r\n\t\t\t\r\n\t\t\tif(e.ctrlKey || e.metaKey){\r\n\t\t\t\ttoggledRows.forEach((toggledRow)=>{\r\n\t\t\t\t\tif(toggledRow !== this.lastClickedRow){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(this.table.options.selectable !== true && !this.isRowSelected(row)){\r\n\t\t\t\t\t\t\tif(this.selectedRows.length < this.table.options.selectable){\r\n\t\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.lastClickedRow = row;\r\n\t\t\t}else{\r\n\t\t\t\tthis.deselectRows(undefined, true);\r\n\t\t\t\t\r\n\t\t\t\tif(this.table.options.selectable !== true){\r\n\t\t\t\t\tif(toggledRows.length > this.table.options.selectable){\r\n\t\t\t\t\t\ttoggledRows = toggledRows.slice(0, this.table.options.selectable);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.selectRows(toggledRows);\r\n\t\t\t}\r\n\t\t\tthis.table._clearSelection();\r\n\t\t}\r\n\t\telse if(e.ctrlKey || e.metaKey){\r\n\t\t\tthis.toggleRow(row);\r\n\t\t\tthis.lastClickedRow = row;\r\n\t\t}else{\r\n\t\t\tthis.deselectRows(undefined, true);\r\n\t\t\tthis.selectRows(row);\r\n\t\t\tthis.lastClickedRow = row;\r\n\t\t}\r\n\t}\r\n\t\r\n\t//toggle row selection\r\n\ttoggleRow(row){\r\n\t\tif(this.table.options.selectableCheck.call(this.table, row.getComponent())){\r\n\t\t\tif(row.modules.select && row.modules.select.selected){\r\n\t\t\t\tthis._deselectRow(row);\r\n\t\t\t}else{\r\n\t\t\t\tthis._selectRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t//select a number of rows\r\n\tselectRows(rows){\r\n\t\tvar rowMatch;\r\n\t\t\r\n\t\tswitch(typeof rows){\r\n\t\t\tcase \"undefined\":\r\n\t\t\t\tthis.table.rowManager.rows.forEach((row) => {\r\n\t\t\t\t\tthis._selectRow(row, true, true);\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t\t\tthis._rowSelectionChanged();\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase \"string\":\r\n\t\t\t\r\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\r\n\t\t\t\r\n\t\t\t\tif(rowMatch){\r\n\t\t\t\t\tthis._selectRow(rowMatch, true, true);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.table.rowManager.getRows(rows).forEach((row) => {\r\n\t\t\t\t\t\tthis._selectRow(row, true, true);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tthis._rowSelectionChanged();\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tdefault:\r\n\t\t\t\tif(Array.isArray(rows)){\r\n\t\t\t\t\trows.forEach((row) => {\r\n\t\t\t\t\t\tthis._selectRow(row, true, true);\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t\tthis._rowSelectionChanged();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._selectRow(rows, false, true);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t\r\n\t//select an individual row\r\n\t_selectRow(rowInfo, silent, force){\r\n\t\t//handle max row count\r\n\t\tif(!isNaN(this.table.options.selectable) && this.table.options.selectable !== true && !force){\r\n\t\t\tif(this.selectedRows.length >= this.table.options.selectable){\r\n\t\t\t\tif(this.table.options.selectableRollingSelection){\r\n\t\t\t\t\tthis._deselectRow(this.selectedRows[0]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tvar row = this.table.rowManager.findRow(rowInfo);\r\n\t\t\r\n\t\tif(row){\r\n\t\t\tif(this.selectedRows.indexOf(row) == -1){\r\n\t\t\t\trow.getElement().classList.add(\"tabulator-selected\");\r\n\t\t\t\tif(!row.modules.select){\r\n\t\t\t\t\trow.modules.select = {};\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\trow.modules.select.selected = true;\r\n\t\t\t\tif(row.modules.select.checkboxEl){\r\n\t\t\t\t\trow.modules.select.checkboxEl.checked = true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.selectedRows.push(row);\r\n\t\t\t\t\r\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\r\n\t\t\t\t\tthis.childRowSelection(row, true);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.dispatchExternal(\"rowSelected\", row.getComponent());\r\n\t\t\t\t\r\n\t\t\t\tthis._rowSelectionChanged(silent);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(!silent){\r\n\t\t\t\tconsole.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tisRowSelected(row){\r\n\t\treturn this.selectedRows.indexOf(row) !== -1;\r\n\t}\r\n\t\r\n\t//deselect a number of rows\r\n\tdeselectRows(rows, silent){\r\n\t\tvar self = this,\r\n\t\trowCount;\r\n\t\t\r\n\t\tif(typeof rows == \"undefined\"){\r\n\t\t\t\r\n\t\t\trowCount = self.selectedRows.length;\r\n\t\t\t\r\n\t\t\tfor(let i = 0; i < rowCount; i++){\r\n\t\t\t\tself._deselectRow(self.selectedRows[0], true);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(rowCount){\r\n\t\t\t\tself._rowSelectionChanged(silent);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}else{\r\n\t\t\tif(Array.isArray(rows)){\r\n\t\t\t\trows.forEach(function(row){\r\n\t\t\t\t\tself._deselectRow(row, true);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tself._rowSelectionChanged(silent);\r\n\t\t\t}else{\r\n\t\t\t\tself._deselectRow(rows, silent);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t//deselect an individual row\r\n\t_deselectRow(rowInfo, silent){\r\n\t\tvar self = this,\r\n\t\trow = self.table.rowManager.findRow(rowInfo),\r\n\t\tindex;\r\n\t\t\r\n\t\tif(row){\r\n\t\t\tindex = self.selectedRows.findIndex(function(selectedRow){\r\n\t\t\t\treturn selectedRow == row;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif(index > -1){\r\n\t\t\t\t\r\n\t\t\t\trow.getElement().classList.remove(\"tabulator-selected\");\r\n\t\t\t\tif(!row.modules.select){\r\n\t\t\t\t\trow.modules.select = {};\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\trow.modules.select.selected = false;\r\n\t\t\t\tif(row.modules.select.checkboxEl){\r\n\t\t\t\t\trow.modules.select.checkboxEl.checked = false;\r\n\t\t\t\t}\r\n\t\t\t\tself.selectedRows.splice(index, 1);\r\n\t\t\t\t\r\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\r\n\t\t\t\t\tthis.childRowSelection(row, false);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.dispatchExternal(\"rowDeselected\", row.getComponent());\r\n\t\t\t\t\r\n\t\t\t\tself._rowSelectionChanged(silent);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(!silent){\r\n\t\t\t\tconsole.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetSelectedData(){\r\n\t\tvar data = [];\r\n\t\t\r\n\t\tthis.selectedRows.forEach(function(row){\r\n\t\t\tdata.push(row.getData());\r\n\t\t});\r\n\t\t\r\n\t\treturn data;\r\n\t}\r\n\t\r\n\tgetSelectedRows(){\r\n\t\t\r\n\t\tvar rows = [];\r\n\t\t\r\n\t\tthis.selectedRows.forEach(function(row){\r\n\t\t\trows.push(row.getComponent());\r\n\t\t});\r\n\t\t\r\n\t\treturn rows;\r\n\t}\r\n\t\r\n\t_rowSelectionChanged(silent){\r\n\t\tif(this.headerCheckboxElement){\r\n\t\t\tif(this.selectedRows.length === 0){\r\n\t\t\t\tthis.headerCheckboxElement.checked = false;\r\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\r\n\t\t\t} else if(this.table.rowManager.rows.length === this.selectedRows.length){\r\n\t\t\t\tthis.headerCheckboxElement.checked = true;\r\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.headerCheckboxElement.indeterminate = true;\r\n\t\t\t\tthis.headerCheckboxElement.checked = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(!silent){\r\n\t\t\tthis.dispatchExternal(\"rowSelectionChanged\", this.getSelectedData(), this.getSelectedRows());\r\n\t\t}\r\n\t}\r\n\t\r\n\tregisterRowSelectCheckbox (row, element) {\r\n\t\tif(!row._row.modules.select){\r\n\t\t\trow._row.modules.select = {};\r\n\t\t}\r\n\t\t\r\n\t\trow._row.modules.select.checkboxEl = element;\r\n\t}\r\n\t\r\n\tregisterHeaderSelectCheckbox (element) {\r\n\t\tthis.headerCheckboxElement = element;\r\n\t}\r\n\t\r\n\tchildRowSelection(row, select){\r\n\t\tvar children = this.table.modules.dataTree.getChildren(row, true);\r\n\t\t\r\n\t\tif(select){\r\n\t\t\tfor(let child of children){\r\n\t\t\t\tthis._selectRow(child, true);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tfor(let child of children){\r\n\t\t\t\tthis._deselectRow(child, true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nSelectRow.moduleName = \"selectRow\";\r\n\r\nexport default SelectRow;","//sort numbers\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar alignEmptyValues = params.alignEmptyValues;\r\n\tvar decimal = params.decimalSeparator;\r\n\tvar thousand = params.thousandSeparator;\r\n\tvar emptyAlign = 0;\r\n\r\n\ta = String(a);\r\n\tb = String(b);\r\n\r\n\tif(thousand){\r\n\t\ta = a.split(thousand).join(\"\");\r\n\t\tb = b.split(thousand).join(\"\");\r\n\t}\r\n\r\n\tif(decimal){\r\n\t\ta = a.split(decimal).join(\".\");\r\n\t\tb = b.split(decimal).join(\".\");\r\n\t}\r\n\r\n\ta = parseFloat(a);\r\n\tb = parseFloat(b);\r\n\r\n\t//handle non numeric values\r\n\tif(isNaN(a)){\r\n\t\temptyAlign =  isNaN(b) ? 0 : -1;\r\n\t}else if(isNaN(b)){\r\n\t\temptyAlign =  1;\r\n\t}else{\r\n\t\t//compare valid values\r\n\t\treturn a - b;\r\n\t}\r\n\r\n\t//fix empty values in position\r\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\temptyAlign *= -1;\r\n\t}\r\n\r\n\treturn emptyAlign;\r\n}","//sort strings\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar alignEmptyValues = params.alignEmptyValues;\r\n\tvar emptyAlign = 0;\r\n\tvar locale;\r\n\r\n\t//handle empty values\r\n\tif(!a){\r\n\t\temptyAlign =  !b ? 0 : -1;\r\n\t}else if(!b){\r\n\t\temptyAlign =  1;\r\n\t}else{\r\n\t\t//compare valid values\r\n\t\tswitch(typeof params.locale){\r\n\t\t\tcase \"boolean\":\r\n\t\t\t\tif(params.locale){\r\n\t\t\t\t\tlocale = this.langLocale();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"string\":\r\n\t\t\t\tlocale = params.locale;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\r\n\t}\r\n\r\n\t//fix empty values in position\r\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\temptyAlign *= -1;\r\n\t}\r\n\r\n\treturn emptyAlign;\r\n}","//sort datetime\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar DT = window.DateTime || luxon.DateTime;\r\n\tvar format = params.format || \"dd/MM/yyyy HH:mm:ss\",\r\n\talignEmptyValues = params.alignEmptyValues,\r\n\temptyAlign = 0;\r\n\r\n\tif(typeof DT != \"undefined\"){\r\n\t\tif(!DT.isDateTime(a)){\r\n\t\t\tif(format === \"iso\"){\r\n\t\t\t\ta = DT.fromISO(String(a));\r\n\t\t\t}else{\r\n\t\t\t\ta = DT.fromFormat(String(a), format);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(!DT.isDateTime(b)){\r\n\t\t\tif(format === \"iso\"){\r\n\t\t\t\tb = DT.fromISO(String(b));\r\n\t\t\t}else{\r\n\t\t\t\tb = DT.fromFormat(String(b), format);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(!a.isValid){\r\n\t\t\temptyAlign = !b.isValid ? 0 : -1;\r\n\t\t}else if(!b.isValid){\r\n\t\t\temptyAlign =  1;\r\n\t\t}else{\r\n\t\t\t//compare valid values\r\n\t\t\treturn a - b;\r\n\t\t}\r\n\r\n\t\t//fix empty values in position\r\n\t\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\t\temptyAlign *= -1;\r\n\t\t}\r\n\r\n\t\treturn emptyAlign;\r\n\r\n\t}else{\r\n\t\tconsole.error(\"Sort Error - 'datetime' sorter is dependant on luxon.js\");\r\n\t}\r\n}","import datetime from './datetime.js';\r\n\r\n//sort date\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tif(!params.format){\r\n\t\tparams.format = \"dd/MM/yyyy\";\r\n\t}\r\n\r\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\r\n}","import datetime from './datetime.js';\r\n\r\n//sort times\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tif(!params.format){\r\n\t\tparams.format = \"HH:mm\";\r\n\t}\r\n\r\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\r\n}","//sort booleans\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\r\n\tvar el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\r\n\r\n\treturn el1 - el2;\r\n}","//sort if element contains any data\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar type = params.type || \"length\",\r\n\talignEmptyValues = params.alignEmptyValues,\r\n\temptyAlign = 0;\r\n\r\n\tfunction calc(value){\r\n\t\tvar result;\r\n\r\n\t\tswitch(type){\r\n\t\t\tcase \"length\":\r\n\t\t\t\tresult = value.length;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"sum\":\r\n\t\t\t\tresult = value.reduce(function(c, d){\r\n\t\t\t\t\treturn c + d;\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"max\":\r\n\t\t\t\tresult = Math.max.apply(null, value) ;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"min\":\r\n\t\t\t\tresult = Math.min.apply(null, value) ;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"avg\":\r\n\t\t\t\tresult = value.reduce(function(c, d){\r\n\t\t\t\t\treturn c + d;\r\n\t\t\t\t}) / value.length;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\t//handle non array values\r\n\tif(!Array.isArray(a)){\r\n\t\temptyAlign = !Array.isArray(b) ? 0 : -1;\r\n\t}else if(!Array.isArray(b)){\r\n\t\temptyAlign = 1;\r\n\t}else{\r\n\t\treturn calc(b) - calc(a);\r\n\t}\r\n\r\n\t//fix empty values in position\r\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\temptyAlign *= -1;\r\n\t}\r\n\r\n\treturn emptyAlign;\r\n}","//sort if element contains any data\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar el1 = typeof a == \"undefined\" ? 0 : 1;\r\n\tvar el2 = typeof b == \"undefined\" ? 0 : 1;\r\n\r\n\treturn el1 - el2;\r\n}","//sort alpha numeric strings\r\nexport default function(as, bs, aRow, bRow, column, dir, params){\r\n\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\r\n\tvar alignEmptyValues = params.alignEmptyValues;\r\n\tvar emptyAlign = 0;\r\n\r\n\t//handle empty values\r\n\tif(!as && as!== 0){\r\n\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\r\n\t}else if(!bs && bs!== 0){\r\n\t\temptyAlign =  1;\r\n\t}else{\r\n\r\n\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\r\n\t\ta = String(as).toLowerCase();\r\n\t\tb = String(bs).toLowerCase();\r\n\t\tif(a === b) return 0;\r\n\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\r\n\t\ta = a.match(rx);\r\n\t\tb = b.match(rx);\r\n\t\tL = a.length > b.length ? b.length : a.length;\r\n\t\twhile(i < L){\r\n\t\t\ta1= a[i];\r\n\t\t\tb1= b[i++];\r\n\t\t\tif(a1 !== b1){\r\n\t\t\t\tif(isFinite(a1) && isFinite(b1)){\r\n\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\r\n\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\r\n\t\t\t\t\treturn a1 - b1;\r\n\t\t\t\t}\r\n\t\t\t\telse return a1 > b1 ? 1 : -1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn a.length > b.length;\r\n\t}\r\n\r\n\t//fix empty values in position\r\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\temptyAlign *= -1;\r\n\t}\r\n\r\n\treturn emptyAlign;\r\n}","import number from './sorters/number.js';\r\nimport string from './sorters/string.js';\r\nimport date from './sorters/date.js';\r\nimport time from './sorters/time.js';\r\nimport datetime from './sorters/datetime.js';\r\nimport boolean from './sorters/boolean.js';\r\nimport array from './sorters/array.js';\r\nimport exists from './sorters/exists.js';\r\nimport alphanum from './sorters/alphanum.js';\r\n\r\nexport default {\r\n\tnumber:number,\r\n\tstring:string,\r\n\tdate:date,\r\n\ttime:time,\r\n\tdatetime:datetime,\r\n\tboolean:boolean,\r\n\tarray:array,\r\n\texists:exists,\r\n\talphanum:alphanum\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultSorters from './defaults/sorters.js';\r\n\r\nclass Sort extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.sortList = []; //holder current sort\r\n\t\tthis.changed = false; //has the sort changed since last render\r\n\r\n\t\tthis.registerTableOption(\"sortMode\", \"local\"); //local or remote sorting\r\n\r\n\t\tthis.registerTableOption(\"initialSort\", false); //initial sorting criteria\r\n\t\tthis.registerTableOption(\"columnHeaderSortMulti\", true); //multiple or single column sorting\r\n\t\tthis.registerTableOption(\"sortOrderReverse\", false); //reverse internal sort ordering\r\n\t\tthis.registerTableOption(\"headerSortElement\", \"<div class='tabulator-arrow'></div>\"); //header sort element\r\n\r\n\t\tthis.registerColumnOption(\"sorter\");\r\n\t\tthis.registerColumnOption(\"sorterParams\");\r\n\r\n\t\tthis.registerColumnOption(\"headerSort\", true);\r\n\t\tthis.registerColumnOption(\"headerSortStartingDir\");\r\n\t\tthis.registerColumnOption(\"headerSortTristate\");\r\n\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\r\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\r\n\t\tthis.registerDataHandler(this.sort.bind(this), 20);\r\n\r\n\t\tthis.registerTableFunction(\"setSort\", this.userSetSort.bind(this));\r\n\t\tthis.registerTableFunction(\"getSorters\", this.getSort.bind(this));\r\n\t\tthis.registerTableFunction(\"clearSort\", this.clearSort.bind(this));\r\n\r\n\t\tif(this.table.options.sortMode === \"remote\"){\r\n\t\t\tthis.subscribe(\"data-params\", this.remoteSortParams.bind(this));\r\n\t\t}\r\n\t}\r\n\r\n\ttableBuilt(){\r\n\t\tif(this.table.options.initialSort){\r\n\t\t\tthis.setSort(this.table.options.initialSort);\r\n\t\t}\r\n\t}\r\n\r\n\tremoteSortParams(data, config, silent, params){\r\n\t\tvar sorters = this.getSort();\r\n\r\n\t\tsorters.forEach((item) => {\r\n\t\t\tdelete item.column;\r\n\t\t});\r\n\r\n\t\tparams.sort = sorters;\r\n\r\n\t\treturn params;\r\n\t}\r\n\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\tuserSetSort(sortList, dir){\r\n\t\tthis.setSort(sortList, dir);\r\n\t\t// this.table.rowManager.sorterRefresh();\r\n\t\tthis.refreshSort();\r\n\t}\r\n\r\n\tclearSort(){\r\n\t\tthis.clear();\r\n\t\t// this.table.rowManager.sorterRefresh();\r\n\t\tthis.refreshSort();\r\n\t}\r\n\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\t//initialize column header for sorting\r\n\tinitializeColumn(column){\r\n\t\tvar sorter = false,\r\n\t\tcolEl,\r\n\t\tarrowEl;\r\n\r\n\t\tswitch(typeof column.definition.sorter){\r\n\t\t\tcase \"string\":\r\n\t\t\t\tif(Sort.sorters[column.definition.sorter]){\r\n\t\t\t\t\tsorter = Sort.sorters[column.definition.sorter];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\t\tsorter = column.definition.sorter;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tcolumn.modules.sort = {\r\n\t\t\tsorter:sorter, dir:\"none\",\r\n\t\t\tparams:column.definition.sorterParams || {},\r\n\t\t\tstartingDir:column.definition.headerSortStartingDir || \"asc\",\r\n\t\t\ttristate: column.definition.headerSortTristate,\r\n\t\t};\r\n\r\n\t\tif(column.definition.headerSort !== false){\r\n\r\n\t\t\tcolEl = column.getElement();\r\n\r\n\t\t\tcolEl.classList.add(\"tabulator-sortable\");\r\n\r\n\r\n\t\t\tarrowEl = document.createElement(\"div\");\r\n\t\t\tarrowEl.classList.add(\"tabulator-col-sorter\");\r\n\r\n\t\t\tswitch(this.table.options.headerSortElement){\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\t\t//do nothing\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"object\":\r\n\t\t\t\t\tarrowEl.appendChild(this.table.options.headerSortElement);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tarrowEl.innerHTML = this.table.options.headerSortElement;\r\n\t\t\t}\r\n\r\n\t\t\t//create sorter arrow\r\n\t\t\tcolumn.titleHolderElement.appendChild(arrowEl);\r\n\r\n\t\t\tcolumn.modules.sort.element = arrowEl;\r\n\r\n\t\t\tthis.setColumnHeaderSortIcon(column, \"none\");\r\n\r\n\t\t\t//sort on click\r\n\t\t\tcolEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\tvar dir = \"\",\r\n\t\t\t\tsorters=[],\r\n\t\t\t\tmatch = false;\r\n\r\n\t\t\t\tif(column.modules.sort){\r\n\t\t\t\t\tif(column.modules.sort.tristate){\r\n\t\t\t\t\t\tif(column.modules.sort.dir == \"none\"){\r\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(column.modules.sort.dir == column.modules.sort.startingDir){\r\n\t\t\t\t\t\t\t\tdir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tdir = \"none\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tswitch(column.modules.sort.dir){\r\n\t\t\t\t\t\t\tcase \"asc\":\r\n\t\t\t\t\t\t\t\tdir = \"desc\";\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase \"desc\":\r\n\t\t\t\t\t\t\t\tdir = \"asc\";\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (this.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\r\n\t\t\t\t\t\tsorters = this.getSort();\r\n\r\n\t\t\t\t\t\tmatch = sorters.findIndex((sorter) => {\r\n\t\t\t\t\t\t\treturn sorter.field === column.getField();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif(match > -1){\r\n\t\t\t\t\t\t\tsorters[match].dir = dir;\r\n\r\n\t\t\t\t\t\t\tif(match != sorters.length -1){\r\n\t\t\t\t\t\t\t\tmatch = sorters.splice(match, 1)[0];\r\n\t\t\t\t\t\t\t\tif(dir != \"none\"){\r\n\t\t\t\t\t\t\t\t\tsorters.push(match);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(dir != \"none\"){\r\n\t\t\t\t\t\t\t\tsorters.push({column:column, dir:dir});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//add to existing sort\r\n\t\t\t\t\t\tthis.setSort(sorters);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(dir == \"none\"){\r\n\t\t\t\t\t\t\tthis.clear();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t//sort by column only\r\n\t\t\t\t\t\t\tthis.setSort(column, dir);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// this.table.rowManager.sorterRefresh(!this.sortList.length);\r\n\t\t\t\t\tthis.refreshSort();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trefreshSort(){\r\n\t\tif(this.table.options.sortMode === \"remote\"){\r\n\t\t\tthis.reloadData(null, false, false);\r\n\t\t}else{\r\n\t\t\tthis.refreshData(true);\r\n\t\t}\r\n\r\n\t\t//TODO - Persist left position of row manager\r\n\t\t// left = this.scrollLeft;\r\n\t\t// this.scrollHorizontal(left);\r\n\t}\r\n\r\n\t//check if the sorters have changed since last use\r\n\thasChanged(){\r\n\t\tvar changed = this.changed;\r\n\t\tthis.changed = false;\r\n\t\treturn changed;\r\n\t}\r\n\r\n\t//return current sorters\r\n\tgetSort(){\r\n\t\tvar self = this,\r\n\t\tsorters = [];\r\n\r\n\t\tself.sortList.forEach(function(item){\r\n\t\t\tif(item.column){\r\n\t\t\t\tsorters.push({column:item.column.getComponent(), field:item.column.getField(), dir:item.dir});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn sorters;\r\n\t}\r\n\r\n\t//change sort list and trigger sort\r\n\tsetSort(sortList, dir){\r\n\t\tvar self = this,\r\n\t\tnewSortList = [];\r\n\r\n\t\tif(!Array.isArray(sortList)){\r\n\t\t\tsortList = [{column: sortList, dir:dir}];\r\n\t\t}\r\n\r\n\t\tsortList.forEach(function(item){\r\n\t\t\tvar column;\r\n\r\n\t\t\tcolumn = self.table.columnManager.findColumn(item.column);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\titem.column = column;\r\n\t\t\t\tnewSortList.push(item);\r\n\t\t\t\tself.changed = true;\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tself.sortList = newSortList;\r\n\r\n\t\tthis.dispatch(\"sort-changed\");\r\n\t}\r\n\r\n\t//clear sorters\r\n\tclear(){\r\n\t\tthis.setSort([]);\r\n\t}\r\n\r\n\t//find appropriate sorter for column\r\n\tfindSorter(column){\r\n\t\tvar row = this.table.rowManager.activeRows[0],\r\n\t\tsorter = \"string\",\r\n\t\tfield, value;\r\n\r\n\t\tif(row){\r\n\t\t\trow = row.getData();\r\n\t\t\tfield = column.getField();\r\n\r\n\t\t\tif(field){\r\n\r\n\t\t\t\tvalue = column.getFieldValue(row);\r\n\r\n\t\t\t\tswitch(typeof value){\r\n\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\t\tsorter = \"string\";\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"boolean\":\r\n\t\t\t\t\t\tsorter = \"boolean\";\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\r\n\t\t\t\t\t\t\tsorter = \"number\";\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\r\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Sort.sorters[sorter];\r\n\t}\r\n\r\n\t//work through sort list sorting data\r\n\tsort(data){\r\n\t\tvar self = this,\r\n\t\tsortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\r\n\t\tsortListActual = [],\r\n\t\trowComponents = [];\r\n\r\n\t\tif(this.subscribedExternal(\"dataSorting\")){\r\n\t\t\tthis.dispatchExternal(\"dataSorting\", self.getSort());\r\n\t\t}\r\n\r\n\t\tself.clearColumnHeaders();\r\n\r\n\t\tif(this.table.options.sortMode !== \"remote\"){\r\n\r\n\t\t\t//build list of valid sorters and trigger column specific callbacks before sort begins\r\n\t\t\tsortList.forEach(function(item, i){\r\n\t\t\t\tvar sortObj;\r\n\r\n\t\t\t\tif(item.column){\r\n\t\t\t\t\tsortObj = item.column.modules.sort;\r\n\r\n\t\t\t\t\tif(sortObj){\r\n\r\n\t\t\t\t\t\t//if no sorter has been defined, take a guess\r\n\t\t\t\t\t\tif(!sortObj.sorter){\r\n\t\t\t\t\t\t\tsortObj.sorter = self.findSorter(item.column);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\titem.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\r\n\r\n\t\t\t\t\t\tsortListActual.push(item);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tself.setColumnHeader(item.column, item.dir);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//sort data\r\n\t\t\tif (sortListActual.length) {\r\n\t\t\t\tself._sortItems(data, sortListActual);\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tsortList.forEach(function(item, i){\r\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.subscribedExternal(\"dataSorted\")){\r\n\t\t\tdata.forEach((row) => {\r\n\t\t\t\trowComponents.push(row.getComponent());\r\n\t\t\t});\r\n\r\n\t\t\tthis.dispatchExternal(\"dataSorted\", self.getSort(), rowComponents);\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\t//clear sort arrows on columns\r\n\tclearColumnHeaders(){\r\n\t\tthis.table.columnManager.getRealColumns().forEach((column) => {\r\n\t\t\tif(column.modules.sort){\r\n\t\t\t\tcolumn.modules.sort.dir = \"none\";\r\n\t\t\t\tcolumn.getElement().setAttribute(\"aria-sort\", \"none\");\r\n\t\t\t\tthis.setColumnHeaderSortIcon(column, \"none\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//set the column header sort direction\r\n\tsetColumnHeader(column, dir){\r\n\t\tcolumn.modules.sort.dir = dir;\r\n\t\tcolumn.getElement().setAttribute(\"aria-sort\", dir === \"asc\" ? \"ascending\" : \"descending\");\r\n\t\tthis.setColumnHeaderSortIcon(column, dir);\r\n\t}\r\n\r\n\tsetColumnHeaderSortIcon(column, dir){\r\n\t\tvar sortEl = column.modules.sort.element,\r\n\t\tarrowEl;\r\n\r\n\t\tif(typeof this.table.options.headerSortElement === \"function\"){\r\n\t\t\twhile(sortEl.firstChild) sortEl.removeChild(sortEl.firstChild);\r\n\r\n\t\t\tarrowEl = this.table.options.headerSortElement.call(this.table, column.getComponent(), dir);\r\n\t\t\t\r\n\t\t\tif(typeof arrowEl === \"object\"){\r\n\t\t\t\tsortEl.appendChild(arrowEl);\r\n\t\t\t}else{\r\n\t\t\t\tsortEl.innerHTML = arrowEl;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//sort each item in sort list\r\n\t_sortItems(data, sortList){\r\n\t\tvar sorterCount = sortList.length - 1;\r\n\r\n\t\tdata.sort((a, b) => {\r\n\t\t\tvar result;\r\n\r\n\t\t\tfor(var i = sorterCount; i>= 0; i--){\r\n\t\t\t\tlet sortItem = sortList[i];\r\n\r\n\t\t\t\tresult = this._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\r\n\r\n\t\t\t\tif(result !== 0){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t});\r\n\t}\r\n\r\n\t//process individual rows for a sort function on active data\r\n\t_sortRow(a, b, column, dir, params){\r\n\t\tvar el1Comp, el2Comp;\r\n\r\n\t\t//switch elements depending on search direction\r\n\t\tvar el1 = dir == \"asc\" ? a : b;\r\n\t\tvar el2 = dir == \"asc\" ? b : a;\r\n\r\n\t\ta = column.getFieldValue(el1.getData());\r\n\t\tb = column.getFieldValue(el2.getData());\r\n\r\n\t\ta = typeof a !== \"undefined\" ? a : \"\";\r\n\t\tb = typeof b !== \"undefined\" ? b : \"\";\r\n\r\n\t\tel1Comp = el1.getComponent();\r\n\t\tel2Comp = el2.getComponent();\r\n\r\n\t\treturn column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\r\n\t}\r\n}\r\n\r\nSort.moduleName = \"sort\";\r\n\r\n//load defaults\r\nSort.sorters = defaultSorters;\r\n\r\nexport default Sort;","import Module from '../../core/Module.js';\r\nimport Cell from '../../core/cell/Cell.js';\r\n\r\nclass Tooltip extends Module{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.tooltipSubscriber = null,\r\n\t\tthis.headerSubscriber = null,\r\n\t\t\r\n\t\tthis.timeout = null;\r\n\t\tthis.popupInstance = null;\r\n\t\t\r\n\t\tthis.registerTableOption(\"tooltipGenerationMode\", undefined);  //deprecated\r\n\t\tthis.registerTableOption(\"tooltipDelay\", 300); \r\n\t\t\r\n\t\tthis.registerColumnOption(\"tooltip\");\r\n\t\tthis.registerColumnOption(\"headerTooltip\");\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tthis.deprecatedOptionsCheck();\r\n\t\t\r\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\r\n\t}\r\n\t\r\n\tdeprecatedOptionsCheck(){\r\n\t\tthis.deprecationCheckMsg(\"tooltipGenerationMode\", \"This option is no longer needed as tooltips are always generated on hover now\");\r\n\t}\t\r\n\t\r\n\tinitializeColumn(column){\r\n\t\tif(column.definition.headerTooltip && !this.headerSubscriber){\r\n\t\t\tthis.headerSubscriber = true;\r\n\t\t\t\r\n\t\t\tthis.subscribe(\"column-mousemove\", this.mousemoveCheck.bind(this, \"headerTooltip\"));\r\n\t\t\tthis.subscribe(\"column-mouseout\", this.mouseoutCheck.bind(this, \"headerTooltip\"));\r\n\t\t}\r\n\t\t\r\n\t\tif(column.definition.tooltip && !this.tooltipSubscriber){\r\n\t\t\tthis.tooltipSubscriber = true;\r\n\t\t\t\r\n\t\t\tthis.subscribe(\"cell-mousemove\", this.mousemoveCheck.bind(this, \"tooltip\"));\r\n\t\t\tthis.subscribe(\"cell-mouseout\", this.mouseoutCheck.bind(this, \"tooltip\"));\r\n\t\t}\r\n\t}\r\n\t\r\n\tmousemoveCheck(action, e, component){\r\n\t\tvar tooltip = action === \"tooltip\" ? component.column.definition.tooltip : component.definition.headerTooltip;\r\n\t\t\r\n\t\tif(tooltip){\r\n\t\t\tthis.clearPopup();\r\n\t\t\tthis.timeout = setTimeout(this.loadTooltip.bind(this, e, component, tooltip), this.table.options.tooltipDelay);\r\n\t\t}\r\n\t}\r\n\r\n\tmouseoutCheck(action, e, component){\r\n\t\tif(!this.popupInstance){\r\n\t\t\tthis.clearPopup();\r\n\t\t}\r\n\t}\r\n\t\r\n\tclearPopup(action, e, component){\r\n\t\tclearTimeout(this.timeout);\r\n\t\tthis.timeout = null;\r\n\t\t\r\n\t\tif(this.popupInstance){\r\n\t\t\tthis.popupInstance.hide();\r\n\t\t}\r\n\t}\r\n\t\r\n\tloadTooltip(e, component, tooltip){\r\n\t\tvar contentsEl, renderedCallback, coords;\r\n\r\n\t\tfunction onRendered(callback){\r\n\t\t\trenderedCallback = callback;\r\n\t\t}\r\n\t\t\r\n\t\tif(typeof tooltip === \"function\"){\r\n\t\t\ttooltip = tooltip(e, component.getComponent(), onRendered);\r\n\t\t}\r\n\t\t\r\n\t\tif(tooltip instanceof HTMLElement){\r\n\t\t\tcontentsEl = tooltip;\r\n\t\t}else{\r\n\t\t\tcontentsEl = document.createElement(\"div\");\r\n\t\t\t\r\n\t\t\tif(tooltip === true){\r\n\t\t\t\tif(component instanceof Cell){\r\n\t\t\t\t\ttooltip = component.value;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(component.definition.field){\r\n\t\t\t\t\t\tthis.langBind(\"columns|\" + component.definition.field, (value) => {\r\n\t\t\t\t\t\t\tcontentsEl.innerHTML = tooltip = value || component.definition.title;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\ttooltip = component.definition.title;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcontentsEl.innerHTML = tooltip;\r\n\t\t}\r\n\t\t\r\n\t\tif(tooltip || tooltip === 0 || tooltip === false){\r\n\t\t\tcontentsEl.classList.add(\"tabulator-tooltip\");\r\n\r\n\t\t\tcontentsEl.addEventListener(\"mousemove\", e => e.preventDefault());\r\n\t\t\t\r\n\t\t\tthis.popupInstance = this.popup(contentsEl);\r\n\t\t\t\r\n\t\t\tif(typeof renderedCallback === \"function\"){\r\n\t\t\t\tthis.popupInstance.renderCallback(renderedCallback);\r\n\t\t\t}\r\n\r\n\t\t\tcoords = this.popupInstance.containerEventCoords(e);\r\n\t\t\t\r\n\t\t\tthis.popupInstance.show(coords.x + 15, coords.y + 15).hideOnBlur(() => {\r\n\t\t\t\tthis.dispatchExternal(\"TooltipClosed\", component.getComponent());\r\n\t\t\t\tthis.popupInstance = null;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.dispatchExternal(\"TooltipOpened\", component.getComponent());\r\n\t\t}\r\n\t}\r\n}\r\n\r\nTooltip.moduleName = \"tooltip\";\r\n\r\nexport default Tooltip;\r\n","export default {\r\n\t//is integer\r\n\tinteger: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tvalue = Number(value);\r\n\r\n\t\treturn !isNaN(value) && isFinite(value) && Math.floor(value) === value;\r\n\t},\r\n\r\n\t//is float\r\n\tfloat: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\tvalue = Number(value);\r\n\r\n\t\treturn !isNaN(value) && isFinite(value) && value % 1 !== 0;\r\n\t},\r\n\r\n\t//must be a number\r\n\tnumeric: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn !isNaN(value);\r\n\t},\r\n\r\n\t//must be a string\r\n\tstring: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn isNaN(value);\r\n\t},\r\n\r\n\t//maximum value\r\n\tmax: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn parseFloat(value) <= parameters;\r\n\t},\r\n\r\n\t//minimum value\r\n\tmin: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn parseFloat(value) >= parameters;\r\n\t},\r\n\r\n\t//starts with  value\r\n\tstarts: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\r\n\t},\r\n\r\n\t//ends with  value\r\n\tends: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\r\n\t},\r\n\r\n\r\n\t//minimum string length\r\n\tminLength: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn String(value).length >= parameters;\r\n\t},\r\n\r\n\t//maximum string length\r\n\tmaxLength: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn String(value).length <= parameters;\r\n\t},\r\n\r\n\t//in provided value list\r\n\tin: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif(typeof parameters == \"string\"){\r\n\t\t\tparameters = parameters.split(\"|\");\r\n\t\t}\r\n\r\n\t\treturn parameters.indexOf(value) > -1;\r\n\t},\r\n\r\n\t//must match provided regex\r\n\tregex: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar reg = new RegExp(parameters);\r\n\r\n\t\treturn reg.test(value);\r\n\t},\r\n\r\n\t//value must be unique in this column\r\n\tunique: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar unique = true;\r\n\r\n\t\tvar cellData = cell.getData();\r\n\t\tvar column = cell.getColumn()._getSelf();\r\n\r\n\t\tthis.table.rowManager.rows.forEach(function(row){\r\n\t\t\tvar data = row.getData();\r\n\r\n\t\t\tif(data !== cellData){\r\n\t\t\t\tif(value == column.getFieldValue(data)){\r\n\t\t\t\t\tunique = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn unique;\r\n\t},\r\n\r\n\t//must have a value\r\n\trequired:function(cell, value, parameters){\r\n\t\treturn value !== \"\" && value !== null && typeof value !== \"undefined\";\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultValidators from './defaults/validators.js';\r\n\r\nclass Validate extends Module{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.invalidCells = [];\r\n\t\t\r\n\t\tthis.registerTableOption(\"validationMode\", \"blocking\");\r\n\t\t\r\n\t\tthis.registerColumnOption(\"validator\");\r\n\t\t\r\n\t\tthis.registerTableFunction(\"getInvalidCells\", this.getInvalidCells.bind(this));\r\n\t\tthis.registerTableFunction(\"clearCellValidation\", this.userClearCellValidation.bind(this));\r\n\t\tthis.registerTableFunction(\"validate\", this.userValidate.bind(this));\r\n\t\t\r\n\t\tthis.registerComponentFunction(\"cell\", \"isValid\", this.cellIsValid.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"clearValidation\", this.clearValidation.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"validate\", this.cellValidate.bind(this));\r\n\t\t\r\n\t\tthis.registerComponentFunction(\"column\", \"validate\", this.columnValidate.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"validate\", this.rowValidate.bind(this));\r\n\t}\r\n\t\r\n\t\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"cell-delete\", this.clearValidation.bind(this));\r\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\r\n\t\t\r\n\t\tthis.subscribe(\"edit-success\", this.editValidate.bind(this));\r\n\t\tthis.subscribe(\"edit-editor-clear\", this.editorClear.bind(this));\r\n\t\tthis.subscribe(\"edit-edited-clear\", this.editedClear.bind(this));\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t///////// Event Handling //////////\r\n\t///////////////////////////////////\r\n\t\r\n\teditValidate(cell, value, previousValue){\r\n\t\tvar valid = this.table.options.validationMode !== \"manual\" ? this.validate(cell.column.modules.validate, cell, value) : true;\r\n\t\t\r\n\t\t// allow time for editor to make render changes then style cell\r\n\t\tif(valid !== true){\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\r\n\t\t\t\tthis.dispatchExternal(\"validationFailed\", cell.getComponent(), value, valid);\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\treturn valid;\r\n\t}\r\n\t\r\n\teditorClear(cell, cancelled){\r\n\t\tif(cancelled){\r\n\t\t\tif(cell.column.modules.validate){\r\n\t\t\t\tthis.cellValidate(cell);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\r\n\t}\r\n\t\r\n\teditedClear(cell){\r\n\t\tif(cell.modules.validate){\r\n\t\t\tcell.modules.validate.invalid = false;\r\n\t\t}\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t////////// Cell Functions /////////\r\n\t///////////////////////////////////\r\n\t\r\n\tcellIsValid(cell){\r\n\t\treturn cell.modules.validate ? (cell.modules.validate.invalid || true) : true;\r\n\t}\r\n\t\r\n\tcellValidate(cell){\r\n\t\treturn this.validate(cell.column.modules.validate, cell, cell.getValue());\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t///////// Column Functions ////////\r\n\t///////////////////////////////////\r\n\t\r\n\tcolumnValidate(column){\r\n\t\tvar invalid = [];\r\n\t\t\r\n\t\tcolumn.cells.forEach((cell) => {\r\n\t\t\tif(this.cellValidate(cell) !== true){\r\n\t\t\t\tinvalid.push(cell.getComponent());\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn invalid.length ? invalid : true;\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t////////// Row Functions //////////\r\n\t///////////////////////////////////\r\n\t\r\n\trowValidate(row){\r\n\t\tvar invalid = [];\r\n\t\t\r\n\t\trow.cells.forEach((cell) => {\r\n\t\t\tif(this.cellValidate(cell) !== true){\r\n\t\t\t\tinvalid.push(cell.getComponent());\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn invalid.length ? invalid : true;\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\t\r\n\t\r\n\tuserClearCellValidation(cells){\r\n\t\tif(!cells){\r\n\t\t\tcells = this.getInvalidCells();\r\n\t\t}\r\n\t\t\r\n\t\tif(!Array.isArray(cells)){\r\n\t\t\tcells = [cells];\r\n\t\t}\r\n\t\t\r\n\t\tcells.forEach((cell) => {\r\n\t\t\tthis.clearValidation(cell._getSelf());\r\n\t\t});\r\n\t}\r\n\t\r\n\tuserValidate(cells){\r\n\t\tvar output = [];\r\n\t\t\r\n\t\t//clear row data\r\n\t\tthis.table.rowManager.rows.forEach((row) => {\r\n\t\t\trow = row.getComponent();\r\n\t\t\t\r\n\t\t\tvar valid = row.validate();\r\n\t\t\t\r\n\t\t\tif(valid !== true){\r\n\t\t\t\toutput = output.concat(valid);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn output.length ? output : true;\r\n\t}\r\n\t\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\t\r\n\tinitializeColumnCheck(column){\r\n\t\tif(typeof column.definition.validator !== \"undefined\"){\r\n\t\t\tthis.initializeColumn(column);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//validate\r\n\tinitializeColumn(column){\r\n\t\tvar self = this,\r\n\t\tconfig = [],\r\n\t\tvalidator;\r\n\t\t\r\n\t\tif(column.definition.validator){\r\n\t\t\t\r\n\t\t\tif(Array.isArray(column.definition.validator)){\r\n\t\t\t\tcolumn.definition.validator.forEach((item) => {\r\n\t\t\t\t\tvalidator = self._extractValidator(item);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(validator){\r\n\t\t\t\t\t\tconfig.push(validator);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tvalidator = this._extractValidator(column.definition.validator);\r\n\t\t\t\t\r\n\t\t\t\tif(validator){\r\n\t\t\t\t\tconfig.push(validator);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcolumn.modules.validate = config.length ? config : false;\r\n\t\t}\r\n\t}\r\n\t\r\n\t_extractValidator(value){\r\n\t\tvar type, params, pos;\r\n\t\t\r\n\t\tswitch(typeof value){\r\n\t\t\tcase \"string\":\r\n\t\t\t\tpos = value.indexOf(':');\r\n\t\t\t\r\n\t\t\t\tif(pos > -1){\r\n\t\t\t\t\ttype = value.substring(0,pos);\r\n\t\t\t\t\tparams = value.substring(pos+1);\r\n\t\t\t\t}else{\r\n\t\t\t\t\ttype = value;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\treturn this._buildValidator(type, params);\r\n\t\t\t\r\n\t\t\tcase \"function\":\r\n\t\t\t\treturn this._buildValidator(value);\r\n\t\t\t\r\n\t\t\tcase \"object\":\r\n\t\t\t\treturn this._buildValidator(value.type, value.parameters);\r\n\t\t}\r\n\t}\r\n\t\r\n\t_buildValidator(type, params){\r\n\t\t\r\n\t\tvar func = typeof type == \"function\" ? type : Validate.validators[type];\r\n\t\t\r\n\t\tif(!func){\r\n\t\t\tconsole.warn(\"Validator Setup Error - No matching validator found:\", type);\r\n\t\t\treturn false;\r\n\t\t}else{\r\n\t\t\treturn {\r\n\t\t\t\ttype:typeof type == \"function\" ? \"function\" : type,\r\n\t\t\t\tfunc:func,\r\n\t\t\t\tparams:params,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\t\r\n\tvalidate(validators, cell, value){\r\n\t\tvar self = this,\r\n\t\tfailedValidators = [],\r\n\t\tinvalidIndex = this.invalidCells.indexOf(cell);\r\n\t\t\r\n\t\tif(validators){\r\n\t\t\tvalidators.forEach((item) => {\r\n\t\t\t\tif(!item.func.call(self, cell.getComponent(), value, item.params)){\r\n\t\t\t\t\tfailedValidators.push({\r\n\t\t\t\t\t\ttype:item.type,\r\n\t\t\t\t\t\tparameters:item.params\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tif(!cell.modules.validate){\r\n\t\t\tcell.modules.validate = {};\r\n\t\t}\r\n\t\t\r\n\t\tif(!failedValidators.length){\r\n\t\t\tcell.modules.validate.invalid = false;\r\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\r\n\t\t\t\r\n\t\t\tif(invalidIndex > -1){\r\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcell.modules.validate.invalid = failedValidators;\r\n\t\t\t\r\n\t\t\tif(this.table.options.validationMode !== \"manual\"){\r\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(invalidIndex == -1){\r\n\t\t\t\tthis.invalidCells.push(cell);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn failedValidators.length ? failedValidators : true;\r\n\t}\r\n\t\r\n\tgetInvalidCells(){\r\n\t\tvar output = [];\r\n\t\t\r\n\t\tthis.invalidCells.forEach((cell) => {\r\n\t\t\toutput.push(cell.getComponent());\r\n\t\t});\r\n\t\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tclearValidation(cell){\r\n\t\tvar invalidIndex;\r\n\t\t\r\n\t\tif(cell.modules.validate && cell.modules.validate.invalid){\r\n\t\t\t\r\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\r\n\t\t\tcell.modules.validate.invalid = false;\r\n\t\t\t\r\n\t\t\tinvalidIndex = this.invalidCells.indexOf(cell);\r\n\t\t\t\r\n\t\t\tif(invalidIndex > -1){\r\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nValidate.moduleName = \"validate\";\r\n\r\n//load defaults\r\nValidate.validators = defaultValidators;\r\n\r\nexport default Validate;\r\n","export default {\r\n\r\n\tdebugEventsExternal:false, //flag to console log events\r\n\tdebugEventsInternal:false, //flag to console log events\r\n\tdebugInvalidOptions:true, //allow toggling of invalid option warnings\r\n\tdebugInvalidComponentFuncs:true, //allow toggling of invalid component warnings\r\n\tdebugInitialization:true, //allow toggling of pre initialization function call warnings\r\n\tdebugDeprecation:true, //allow toggling of deprecation warnings\r\n\r\n\theight:false, //height of tabulator\r\n\tminHeight:false, //minimum height of tabulator\r\n\tmaxHeight:false, //maximum height of tabulator\r\n\r\n\tcolumnHeaderVertAlign:\"top\", //vertical alignment of column headers\r\n\r\n\tpopupContainer:false,\r\n\r\n\tcolumns:[],//store for colum header info\r\n\tcolumnDefaults:{}, //store column default props\r\n\r\n\tdata:false, //default starting data\r\n\r\n\tautoColumns:false, //build columns from data row structure\r\n\tautoColumnsDefinitions:false,\r\n\r\n\tnestedFieldSeparator:\".\", //separator for nested data\r\n\r\n\tfooterElement:false, //hold footer element\r\n\r\n\tindex:\"id\", //filed for row index\r\n\r\n\ttextDirection:\"auto\",\r\n\r\n\taddRowPos:\"bottom\", //position to insert blank rows, top|bottom\r\n\r\n\theaderVisible:true, //hide header\r\n\r\n\trenderVertical:\"virtual\",\r\n\trenderHorizontal:\"basic\",\r\n\trenderVerticalBuffer:0, // set virtual DOM buffer size\r\n\r\n\tscrollToRowPosition:\"top\",\r\n\tscrollToRowIfVisible:true,\r\n\r\n\tscrollToColumnPosition:\"left\",\r\n\tscrollToColumnIfVisible:true,\r\n\r\n\trowFormatter:false,\r\n\trowFormatterPrint:null,\r\n\trowFormatterClipboard:null,\r\n\trowFormatterHtmlOutput:null,\r\n\r\n\trowHeight:null,\r\n\r\n\tplaceholder:false,\r\n\r\n\tdataLoader:true,\r\n\tdataLoaderLoading:false,\r\n\tdataLoaderError:false,\r\n\tdataLoaderErrorTimeout:3000,\r\n\r\n\tdataSendParams:{},\r\n\r\n\tdataReceiveParams:{},\r\n};\r\n","export default class OptionsList {\r\n\tconstructor(table, msgType, defaults = {}){\r\n\t\tthis.table = table;\r\n\t\tthis.msgType = msgType;\r\n\t\tthis.registeredDefaults = Object.assign({}, defaults);\r\n\t}\r\n\r\n\tregister(option, value){\r\n\t\tthis.registeredDefaults[option] = value;\r\n\t}\r\n\r\n\tgenerate(defaultOptions, userOptions = {}){\r\n\t\tvar output = Object.assign({}, this.registeredDefaults);\r\n\r\n\t\tObject.assign(output, defaultOptions);\r\n\r\n\t\tif(userOptions.debugInvalidOptions !== false || this.table.options.debugInvalidOptions){\r\n\t\t\tfor (let key in userOptions){\r\n\t\t\t\tif(!output.hasOwnProperty(key)){\r\n\t\t\t\t\tconsole.warn(\"Invalid \" + this.msgType + \" option:\", key);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let key in output){\r\n\t\t\tif(key in userOptions){\r\n\t\t\t\toutput[key] = userOptions[key];\r\n\t\t\t}else{\r\n\t\t\t\tif(Array.isArray(output[key])){\r\n\t\t\t\t\toutput[key] = Object.assign([], output[key]);\r\n\t\t\t\t}else if(typeof output[key] === \"object\" && output[key] !== null){\r\n\t\t\t\t\toutput[key] = Object.assign({}, output[key]);\r\n\t\t\t\t}else if (typeof output[key] === \"undefined\"){\r\n\t\t\t\t\tdelete output[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n}","import CoreFeature from '../CoreFeature.js';\r\nimport Helpers from '../tools/Helpers.js';\r\n\r\nexport default class Renderer extends CoreFeature{\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.elementVertical = table.rowManager.element;\r\n\t\tthis.elementHorizontal = table.columnManager.element;\r\n\t\tthis.tableElement =  table.rowManager.tableElement;\r\n\r\n\t\tthis.verticalFillMode = \"fit\"; // used by row manager to determine how to size the render area (\"fit\" - fits container to the contents, \"fill\" - fills the container without resizing it)\r\n\t}\r\n\r\n\r\n\t///////////////////////////////////\r\n\t/////// Internal Bindings /////////\r\n\t///////////////////////////////////\r\n\r\n\tinitialize(){\r\n\t\t//initialize core functionality\r\n\t}\r\n\r\n\tclearRows(){\r\n\t\t//clear down existing rows layout\r\n\t}\r\n\r\n\tclearColumns(){\r\n\t\t//clear down existing columns layout\r\n\t}\r\n\r\n\r\n\treinitializeColumnWidths(columns){\r\n\t\t//resize columns to fit data\r\n\t}\r\n\r\n\r\n\trenderRows(){\r\n\t\t//render rows from a clean slate\r\n\t}\r\n\r\n\trenderColumns(){\r\n\t\t//render columns from a clean slate\r\n\t}\r\n\r\n\trerenderRows(callback){\r\n\t\t// rerender rows and keep position\r\n\t\tif(callback){\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n\trerenderColumns(update, blockRedraw){\r\n\t\t//rerender columns\r\n\t}\r\n\r\n\trenderRowCells(row){\r\n\t\t//render the cells in a row\r\n\t}\r\n\r\n\trerenderRowCells(row, force){\r\n\t\t//rerender the cells in a row\r\n\t}\r\n\r\n\tscrollColumns(left, dir){\r\n\t\t//handle horizontal scrolling\r\n\t}\r\n\r\n\tscrollRows(top, dir){\r\n\t\t//handle vertical scrolling\r\n\t}\r\n\r\n\tresize(){\r\n\t\t//container has resized, carry out any needed recalculations (DO NOT RERENDER IN THIS FUNCTION)\r\n\t}\r\n\r\n\tscrollToRow(row){\r\n\t\t//scroll to a specific row\r\n\t}\r\n\r\n\tscrollToRowNearestTop(row){\r\n\t\t//determine weather the row is nearest the top or bottom of the table, return true for top or false for bottom\r\n\t}\r\n\r\n\tvisibleRows(includingBuffer){\r\n\t\t//return the visible rows\r\n\t\treturn [];\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t//////// Helper Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\trows(){\r\n\t\treturn this.table.rowManager.getDisplayRows();\r\n\t}\r\n\r\n\tstyleRow(row, index){\r\n\t\tvar rowEl = row.getElement();\r\n\r\n\t\tif(index % 2){\r\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\r\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\r\n\t\t}else{\r\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\r\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t/////// External Triggers /////////\r\n\t/////// (DO NOT OVERRIDE) /////////\r\n\t///////////////////////////////////\r\n\r\n\tclear(){\r\n\t\t//clear down existing layout\r\n\t\tthis.clearRows();\r\n\t\tthis.clearColumns();\r\n\t}\r\n\r\n\trender(){\r\n\t\t//render from a clean slate\r\n\t\tthis.renderRows();\r\n\t\tthis.renderColumns();\r\n\t}\r\n\r\n\trerender(callback){\r\n\t\t// rerender and keep position\r\n\t\tthis.rerenderRows();\r\n\t\tthis.rerenderColumns();\r\n\t}\r\n\r\n\tscrollToRowPosition(row, position, ifVisible){\r\n\t\tvar rowIndex = this.rows().indexOf(row),\r\n\t\trowEl = row.getElement(),\r\n\t\toffset = 0;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(rowIndex > -1){\r\n\r\n\t\t\t\tif(typeof ifVisible === \"undefined\"){\r\n\t\t\t\t\tifVisible = this.table.options.scrollToRowIfVisible;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//check row visibility\r\n\t\t\t\tif(!ifVisible){\r\n\t\t\t\t\tif(Helpers.elVisible(rowEl)){\r\n\t\t\t\t\t\toffset = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(offset > 0 && offset < this.elementVertical.clientHeight - rowEl.offsetHeight){\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof position === \"undefined\"){\r\n\t\t\t\t\tposition = this.table.options.scrollToRowPosition;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(position === \"nearest\"){\r\n\t\t\t\t\tposition = this.scrollToRowNearestTop(row) ? \"top\" : \"bottom\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//scroll to row\r\n\t\t\t\tthis.scrollToRow(row);\r\n\r\n\t\t\t\t//align to correct position\r\n\t\t\t\tswitch(position){\r\n\t\t\t\t\tcase \"middle\":\r\n\t\t\t\t\tcase \"center\":\r\n\r\n\t\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\r\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop + (rowEl.offsetTop - this.elementVertical.scrollTop) - ((this.elementVertical.scrollHeight - rowEl.offsetTop) / 2);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.clientHeight / 2);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"bottom\":\r\n\r\n\t\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\r\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight + rowEl.offsetHeight;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"top\":\r\n\t\t\t\t\t\tthis.elementVertical.scrollTop = rowEl.offsetTop;\t\t\t\t\t\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresolve();\r\n\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Scroll Error - Row not visible\");\r\n\t\t\t\treject(\"Scroll Error - Row not visible\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}","import Renderer from '../Renderer.js';\r\n\r\nexport default class BasicHorizontal extends Renderer{\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t}\r\n\r\n\trenderRowCells(row){\r\n\t\trow.cells.forEach((cell) => {\r\n\t\t\trow.element.appendChild(cell.getElement());\r\n\t\t\tcell.cellRendered();\r\n\t\t});\r\n\t}\r\n\r\n\treinitializeColumnWidths(columns){\r\n\t\tcolumns.forEach(function(column){\r\n\t\t\tcolumn.reinitializeWidth();\r\n\t\t});\r\n\t}\r\n}","import Renderer from '../Renderer.js';\r\n\r\nexport default class VirtualDomHorizontal extends Renderer{\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.leftCol = 0;\r\n\t\tthis.rightCol = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\t\t\r\n\t\tthis.vDomScrollPosLeft = 0;\r\n\t\tthis.vDomScrollPosRight = 0;\r\n\t\t\r\n\t\tthis.vDomPadLeft = 0;\r\n\t\tthis.vDomPadRight = 0;\r\n\t\t\r\n\t\tthis.fitDataColAvg = 0;\r\n\t\t\r\n\t\tthis.windowBuffer = 200; //pixel margin to make column visible before it is shown on screen\r\n\t\t\r\n\t\tthis.visibleRows = null;\r\n\r\n\t\tthis.initialized = false;\r\n\t\tthis.isFitData = false;\r\n\t\t\r\n\t\tthis.columns = [];\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tthis.compatibilityCheck();\r\n\t\tthis.layoutCheck();\r\n\t\tthis.vertScrollListen();\r\n\t}\r\n\t\r\n\tcompatibilityCheck(){\r\n\t\tvar columns = this.options(\"columns\"),\r\n\t\tfrozen = false,\r\n\t\tok = true;\r\n\t\t\r\n\t\tif(this.options(\"layout\") == \"fitDataTable\"){\r\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with fitDataTable layout mode\");\r\n\t\t\tok = false;\r\n\t\t}\r\n\t\t\r\n\t\tif(this.options(\"responsiveLayout\")){\r\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with responsive columns\");\r\n\t\t\tok = false;\r\n\t\t}\r\n\t\t\r\n\t\tif(this.options(\"rtl\")){\r\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not currently compatible with RTL text direction\");\r\n\t\t\tok = false;\r\n\t\t}\r\n\t\t\r\n\t\tif(columns){\r\n\t\t\tfrozen = columns.find((col) => {\r\n\t\t\t\treturn col.frozen;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif(frozen){\r\n\t\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with frozen columns\");\r\n\t\t\t\tok = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// if(!ok){\r\n\t\t// \toptions.virtualDomHoz = false;\r\n\t\t// }\r\n\t\t\r\n\t\treturn ok;\r\n\t}\r\n\t\r\n\tlayoutCheck(){\r\n\t\tthis.isFitData = this.options(\"layout\").startsWith('fitData');\r\n\t}\r\n\r\n\tvertScrollListen(){\r\n\t\tthis.subscribe(\"scroll-vertical\", this.clearVisRowCache.bind(this));\r\n\t\tthis.subscribe(\"data-refreshed\", this.clearVisRowCache.bind(this));\r\n\t}\r\n\r\n\tclearVisRowCache(){\r\n\t\tthis.visibleRows = null;\r\n\t}\r\n\t\r\n\t//////////////////////////////////////\r\n\t///////// Public Functions ///////////\r\n\t//////////////////////////////////////\r\n\t\r\n\trenderColumns(row, force){\r\n\t\tthis.dataChange();\r\n\t}\r\n\r\n\t\r\n\tscrollColumns(left, dir){\r\n\t\tif(this.scrollLeft != left){\r\n\t\t\tthis.scrollLeft = left;\r\n\t\t\t\r\n\t\t\tthis.scroll(left - (this.vDomScrollPosLeft + this.windowBuffer));\r\n\t\t}\r\n\t}\r\n\t\r\n\tcalcWindowBuffer(){\r\n\t\tvar buffer = this.elementVertical.clientWidth;\r\n\t\t\r\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\t\t\tif(column.visible){\r\n\t\t\t\tvar width = column.getWidth();\r\n\t\t\t\t\r\n\t\t\t\tif(width > buffer){\r\n\t\t\t\t\tbuffer = width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tthis.windowBuffer = buffer * 2;\r\n\t}\r\n\t\r\n\trerenderColumns(update, blockRedraw){\t\t\r\n\t\tvar old = {\r\n\t\t\tcols:this.columns,\r\n\t\t\tleftCol:this.leftCol,\r\n\t\t\trightCol:this.rightCol,\r\n\t\t},\r\n\t\tcolPos = 0;\r\n\t\t\r\n\t\t\r\n\t\tif(update && !this.initialized){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis.clear();\r\n\t\t\r\n\t\tthis.calcWindowBuffer();\r\n\t\t\r\n\t\tthis.scrollLeft = this.elementVertical.scrollLeft;\r\n\t\t\r\n\t\tthis.vDomScrollPosLeft = this.scrollLeft - this.windowBuffer;\r\n\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\r\n\t\t\r\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\t\t\tvar config = {};\r\n\t\t\t\r\n\t\t\tif(column.visible){\r\n\t\t\t\tvar width = column.getWidth();\r\n\t\t\t\t\r\n\t\t\t\tconfig.leftPos = colPos;\r\n\t\t\t\tconfig.rightPos = colPos + width;\r\n\t\t\t\t\r\n\t\t\t\tconfig.width = width;\r\n\t\t\t\t\r\n\t\t\t\tif (this.isFitData) {\r\n\t\t\t\t\tconfig.fitDataCheck = column.modules.vdomHoz ? column.modules.vdomHoz.fitDataCheck : true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif((colPos + width > this.vDomScrollPosLeft) && (colPos < this.vDomScrollPosRight)){\r\n\t\t\t\t\t//column is visible\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.leftCol == -1){\r\n\t\t\t\t\t\tthis.leftCol = this.columns.length;\r\n\t\t\t\t\t\tthis.vDomPadLeft = colPos;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.rightCol = this.columns.length;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// column is hidden\r\n\t\t\t\t\tif(this.leftCol !== -1){\r\n\t\t\t\t\t\tthis.vDomPadRight += width;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.columns.push(column);\r\n\t\t\t\t\r\n\t\t\t\tcolumn.modules.vdomHoz = config;\r\n\t\t\t\t\r\n\t\t\t\tcolPos += width;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\r\n\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\r\n\t\t\r\n\t\tthis.initialized = true;\r\n\t\t\r\n\t\tif(!blockRedraw){\r\n\t\t\tif(!update || this.reinitChanged(old)){\r\n\t\t\t\tthis.reinitializeRows();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.elementVertical.scrollLeft = this.scrollLeft;\r\n\t}\r\n\t\r\n\trenderRowCells(row){\r\n\t\tif(this.initialized){\r\n\t\t\tthis.initializeRow(row);\r\n\t\t}else{\r\n\t\t\trow.cells.forEach((cell) => {\r\n\t\t\t\trow.element.appendChild(cell.getElement());\r\n\t\t\t\tcell.cellRendered();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\trerenderRowCells(row, force){\r\n\t\tthis.reinitializeRow(row, force);\r\n\t}\r\n\t\r\n\treinitializeColumnWidths(columns){\r\n\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\r\n\t\t\tthis.columns[i].reinitializeWidth();\r\n\t\t}\r\n\t}\r\n\t\r\n\t//////////////////////////////////////\r\n\t//////// Internal Rendering //////////\r\n\t//////////////////////////////////////\r\n\t\r\n\tdeinitialize(){\r\n\t\tthis.initialized = false;\r\n\t}\r\n\t\r\n\tclear(){\r\n\t\tthis.columns = [];\r\n\t\t\r\n\t\tthis.leftCol = -1;\r\n\t\tthis.rightCol = 0;\r\n\t\t\r\n\t\tthis.vDomScrollPosLeft = 0;\r\n\t\tthis.vDomScrollPosRight = 0;\r\n\t\tthis.vDomPadLeft = 0;\r\n\t\tthis.vDomPadRight = 0;\r\n\t}\r\n\t\r\n\tdataChange(){\r\n\t\tvar change = false,\r\n\t\trow, rowEl;\r\n\t\t\r\n\t\tif(this.isFitData){\r\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\t\t\t\tif(!column.definition.width && column.visible){\r\n\t\t\t\t\tchange = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif(change && this.table.rowManager.getDisplayRows().length){\r\n\t\t\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\r\n\t\t\t\t\r\n\t\t\t\trow = this.chain(\"rows-sample\", [1], [], () => {\r\n\t\t\t\t\treturn this.table.rowManager.getDisplayRows();\r\n\t\t\t\t})[0];\r\n\t\t\t\t\r\n\t\t\t\tif(row){\r\n\t\t\t\t\trowEl = row.getElement();\r\n\t\t\t\t\t\r\n\t\t\t\t\trow.generateCells();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.tableElement.appendChild(rowEl);\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor(let colEnd = 0; colEnd < row.cells.length; colEnd++){\r\n\t\t\t\t\t\tlet cell = row.cells[colEnd];\r\n\t\t\t\t\t\trowEl.appendChild(cell.getElement());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcell.column.reinitializeWidth();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\r\n\t\t\t\t\tthis.rerenderColumns(false, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.options(\"layout\") === \"fitColumns\"){\r\n\t\t\t\tthis.layoutRefresh();\r\n\t\t\t\tthis.rerenderColumns(false, true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treinitChanged(old){\r\n\t\tvar match = true;\r\n\t\t\r\n\t\tif(old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\told.cols.forEach((col, i) => {\r\n\t\t\tif(col !== this.columns[i]){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn !match;\r\n\t}\r\n\t\r\n\treinitializeRows(){\r\n\t\tvar rows = this.getVisibleRows();\r\n\t\trows.forEach((row) => {\r\n\t\t\tthis.reinitializeRow(row, true);\r\n\t\t});\r\n\t}\r\n\t\r\n\tgetVisibleRows(){\r\n\t\tif (!this.visibleRows){\r\n\t\t\tthis.visibleRows = this.table.rowManager.getVisibleRows();\r\n\t\t}\r\n\r\n\t\treturn this.visibleRows;\t\r\n\t}\r\n\t\r\n\tscroll(diff){\r\n\t\tthis.vDomScrollPosLeft += diff;\r\n\t\tthis.vDomScrollPosRight += diff;\r\n\r\n\t\tif(Math.abs(diff) > (this.windowBuffer / 2)){\r\n\t\t\tthis.rerenderColumns();\r\n\t\t}else{\r\n\t\t\tif(diff > 0){\r\n\t\t\t\t//scroll right\r\n\t\t\t\tthis.addColRight();\r\n\t\t\t\tthis.removeColLeft();\r\n\t\t\t}else{\r\n\t\t\t\t//scroll left\r\n\t\t\t\tthis.addColLeft();\r\n\t\t\t\tthis.removeColRight();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tcolPositionAdjust (start, end, diff){\r\n\t\tfor(let i = start; i < end; i++){\r\n\t\t\tlet column = this.columns[i];\r\n\t\t\t\r\n\t\t\tcolumn.modules.vdomHoz.leftPos += diff;\r\n\t\t\tcolumn.modules.vdomHoz.rightPos += diff;\r\n\t\t}\r\n\t}\r\n\t\r\n\taddColRight(){\r\n\t\tvar changes = false,\r\n\t\tworking = true;\r\n\t\t\r\n\t\twhile(working){\r\n\t\t\t\r\n\t\t\tlet column = this.columns[this.rightCol + 1];\r\n\t\t\t\r\n\t\t\tif(column){\r\n\t\t\t\tif(column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight){\r\n\t\t\t\t\tchanges = true;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\r\n\t\t\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\t\t\t\trow.getElement().appendChild(cell.getElement());\r\n\t\t\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.fitDataColActualWidthCheck(column);\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.rightCol++; // Don't move this below the >= check below\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.rightCol >= (this.columns.length - 1)){\r\n\t\t\t\t\t\tthis.vDomPadRight = 0;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.vDomPadRight -= column.getWidth();\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tworking = false;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tworking = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(changes){\r\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\r\n\t\t}\r\n\t}\r\n\t\r\n\taddColLeft(){\r\n\t\tvar changes = false,\r\n\t\tworking = true;\r\n\t\t\r\n\t\twhile(working){\r\n\t\t\tlet column = this.columns[this.leftCol - 1];\r\n\t\t\t\r\n\t\t\tif(column){\r\n\t\t\t\tif(column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft){\r\n\t\t\t\t\tchanges = true;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\r\n\t\t\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\t\t\t\trow.getElement().prepend(cell.getElement());\r\n\t\t\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.leftCol--; // don't move this below the <= check below\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.leftCol <= 0){ // replicating logic in addColRight\r\n\t\t\t\t\t\tthis.vDomPadLeft = 0;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.vDomPadLeft -= column.getWidth();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet diff = this.fitDataColActualWidthCheck(column);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(diff){\r\n\t\t\t\t\t\tthis.scrollLeft = this.elementVertical.scrollLeft = this.elementVertical.scrollLeft + diff;\r\n\t\t\t\t\t\tthis.vDomPadRight -= diff;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tworking = false;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tworking = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(changes){\r\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\r\n\t\t}\r\n\t}\r\n\t\r\n\tremoveColRight(){\r\n\t\tvar changes = false,\r\n\t\tworking = true;\r\n\t\t\r\n\t\twhile(working){\r\n\t\t\tlet column = this.columns[this.rightCol];\r\n\t\t\t\r\n\t\t\tif(column){\r\n\t\t\t\tif(column.modules.vdomHoz.leftPos > this.vDomScrollPosRight){\r\n\t\t\t\t\tchanges = true;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\r\n\t\t\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\r\n\t\t\t\t\t\t\t} catch (ex) {\r\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColRight\", ex.message);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.vDomPadRight += column.getWidth();\r\n\t\t\t\t\tthis.rightCol --;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tworking = false;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tworking = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(changes){\r\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\r\n\t\t}\r\n\t}\r\n\t\r\n\tremoveColLeft(){\r\n\t\tvar changes = false,\r\n\t\tworking = true;\r\n\t\t\r\n\t\twhile(working){\r\n\t\t\tlet column = this.columns[this.leftCol];\r\n\t\t\t\r\n\t\t\tif(column){\r\n\t\t\t\tif(column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft){\r\n\t\t\t\t\tchanges = true;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\t\t\t\t\t\r\n\t\t\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\r\n\t\t\t\t\t\t\t} catch (ex) {\r\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColLeft\", ex.message);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.vDomPadLeft += column.getWidth();\r\n\t\t\t\t\tthis.leftCol ++;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tworking = false;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tworking = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(changes){\r\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\r\n\t\t}\r\n\t}\r\n\t\r\n\tfitDataColActualWidthCheck(column){\r\n\t\tvar newWidth, widthDiff;\r\n\t\t\r\n\t\tif(column.modules.vdomHoz.fitDataCheck){\r\n\t\t\tcolumn.reinitializeWidth();\r\n\t\t\t\r\n\t\t\tnewWidth = column.getWidth();\r\n\t\t\twidthDiff = newWidth - column.modules.vdomHoz.width;\r\n\t\t\t\r\n\t\t\tif(widthDiff){\r\n\t\t\t\tcolumn.modules.vdomHoz.rightPos += widthDiff;\r\n\t\t\t\tcolumn.modules.vdomHoz.width = newWidth;\r\n\t\t\t\tthis.colPositionAdjust(this.columns.indexOf(column) + 1, this.columns.length, widthDiff);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcolumn.modules.vdomHoz.fitDataCheck = false;\r\n\t\t}\r\n\t\t\r\n\t\treturn widthDiff;\r\n\t}\r\n\t\r\n\tinitializeRow(row){\r\n\t\tif(row.type !== \"group\"){\r\n\t\t\trow.modules.vdomHoz = {\r\n\t\t\t\tleftCol:this.leftCol,\r\n\t\t\t\trightCol:this.rightCol,\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\r\n\t\t\t\tlet column = this.columns[i];\r\n\t\t\t\t\r\n\t\t\t\tif(column && column.visible){\r\n\t\t\t\t\tlet cell = row.getCell(column);\r\n\t\t\t\t\t\r\n\t\t\t\t\trow.getElement().appendChild(cell.getElement());\r\n\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treinitializeRow(row, force){\r\n\t\tif(row.type !== \"group\"){\r\n\t\t\tif(force || !row.modules.vdomHoz || row.modules.vdomHoz.leftCol !== this.leftCol || row.modules.vdomHoz.rightCol !== this.rightCol){\r\n\t\t\t\tvar rowEl = row.getElement();\r\n\t\t\t\twhile(rowEl.firstChild) rowEl.removeChild(rowEl.firstChild);\r\n\t\t\t\t\r\n\t\t\t\tthis.initializeRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import CoreFeature from './CoreFeature.js';\r\nimport Column from './column/Column.js';\r\nimport ColumnComponent from './column/ColumnComponent.js';\r\nimport Helpers from './tools/Helpers.js';\r\nimport OptionsList from './tools/OptionsList.js';\r\n\r\nimport RendererBasicHorizontal from './rendering/renderers/BasicHorizontal.js';\r\nimport RendererVirtualDomHorizontal from './rendering/renderers/VirtualDomHorizontal.js';\r\n\r\nimport defaultColumnOptions from './column/defaults/options.js';\r\n\r\nexport default class ColumnManager extends CoreFeature {\r\n\t\r\n\tconstructor (table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.blockHozScrollEvent = false;\r\n\t\tthis.headersElement = null;\r\n\t\tthis.element = null ; //containing element\r\n\t\tthis.columns = []; // column definition object\r\n\t\tthis.columnsByIndex = []; //columns by index\r\n\t\tthis.columnsByField = {}; //columns by field\r\n\t\tthis.scrollLeft = 0;\r\n\t\tthis.optionsList = new OptionsList(this.table, \"column definition\", defaultColumnOptions);\r\n\t\t\r\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\r\n\t\tthis.redrawBlockUpdate = null; //store latest redraw update only status\r\n\t\t\r\n\t\tthis.renderer = null;\r\n\t}\r\n\t\r\n\t////////////// Setup Functions /////////////////\r\n\t\r\n\tinitialize(){\r\n\t\tthis.initializeRenderer();\r\n\t\t\r\n\t\tthis.headersElement = this.createHeadersElement();\r\n\t\tthis.element = this.createHeaderElement();\r\n\t\t\r\n\t\tthis.element.insertBefore(this.headersElement, this.element.firstChild);\r\n\t\t\r\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\r\n\t}\r\n\t\r\n\tinitializeRenderer(){\r\n\t\tvar renderClass;\r\n\t\t\r\n\t\tvar renderers = {\r\n\t\t\t\"virtual\": RendererVirtualDomHorizontal,\r\n\t\t\t\"basic\": RendererBasicHorizontal,\r\n\t\t};\r\n\t\t\r\n\t\tif(typeof this.table.options.renderHorizontal === \"string\"){\r\n\t\t\trenderClass = renderers[this.table.options.renderHorizontal];\r\n\t\t}else{\r\n\t\t\trenderClass = this.table.options.renderHorizontal;\r\n\t\t}\r\n\t\t\r\n\t\tif(renderClass){\r\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\r\n\t\t\tthis.renderer.initialize();\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Unable to find matching renderer:\", this.table.options.renderHorizontal);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tcreateHeadersElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\t\r\n\t\tel.classList.add(\"tabulator-headers\");\r\n\t\tel.setAttribute(\"role\", \"row\");\r\n\t\t\r\n\t\treturn el;\r\n\t}\r\n\t\r\n\tcreateHeaderElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\t\r\n\t\tel.classList.add(\"tabulator-header\");\r\n\t\tel.setAttribute(\"role\", \"rowgroup\");\r\n\t\t\r\n\t\tif(!this.table.options.headerVisible){\r\n\t\t\tel.classList.add(\"tabulator-header-hidden\");\r\n\t\t}\r\n\t\t\r\n\t\treturn el;\r\n\t}\r\n\t\r\n\t//return containing element\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\t\r\n\t//return header containing element\r\n\tgetHeadersElement(){\r\n\t\treturn this.headersElement;\r\n\t}\r\n\t\r\n\t//scroll horizontally to match table body\r\n\tscrollHorizontal(left){\r\n\t\tvar hozAdjust = 0,\r\n\t\tscrollWidth = this.element.scrollWidth - this.table.element.clientWidth;\r\n\t\t\r\n\t\t// this.tempScrollBlock();\r\n\t\tthis.element.scrollLeft = left;\r\n\t\t\r\n\t\t//adjust for vertical scrollbar moving table when present\r\n\t\tif(left > scrollWidth){\r\n\t\t\thozAdjust = left - scrollWidth;\r\n\t\t\tthis.element.style.marginLeft = (-(hozAdjust)) + \"px\";\r\n\t\t}else{\r\n\t\t\tthis.element.style.marginLeft = 0;\r\n\t\t}\r\n\t\t\r\n\t\tthis.scrollLeft = left;\r\n\t\t\r\n\t\tthis.renderer.scrollColumns(left);\r\n\t}\r\n\t\r\n\t///////////// Column Setup Functions /////////////\r\n\tgenerateColumnsFromRowData(data){\r\n\t\tvar cols = [],\r\n\t\tdefinitions = this.table.options.autoColumnsDefinitions,\r\n\t\trow, sorter;\r\n\t\t\r\n\t\tif(data && data.length){\r\n\t\t\t\r\n\t\t\trow = data[0];\r\n\t\t\t\r\n\t\t\tfor(var key in row){\r\n\t\t\t\tlet col = {\r\n\t\t\t\t\tfield:key,\r\n\t\t\t\t\ttitle:key,\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tlet value = row[key];\r\n\t\t\t\t\r\n\t\t\t\tswitch(typeof value){\r\n\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\t\tsorter = \"string\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t\t\tcase \"boolean\":\r\n\t\t\t\t\t\tsorter = \"boolean\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\tif(Array.isArray(value)){\r\n\t\t\t\t\t\t\tsorter = \"array\";\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tsorter = \"string\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\r\n\t\t\t\t\t\t\tsorter = \"number\";\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\r\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tsorter = \"string\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tcol.sorter = sorter;\r\n\t\t\t\t\r\n\t\t\t\tcols.push(col);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(definitions){\r\n\t\t\t\t\r\n\t\t\t\tswitch(typeof definitions){\r\n\t\t\t\t\tcase \"function\":\r\n\t\t\t\t\t\tthis.table.options.columns = definitions.call(this.table, cols);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\tif(Array.isArray(definitions)){\r\n\t\t\t\t\t\t\tcols.forEach((col) => {\r\n\t\t\t\t\t\t\t\tvar match = definitions.find((def) => {\r\n\t\t\t\t\t\t\t\t\treturn def.field === col.field;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(match){\r\n\t\t\t\t\t\t\t\t\tObject.assign(col, match);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tcols.forEach((col) => {\r\n\t\t\t\t\t\t\t\tif(definitions[col.field]){\r\n\t\t\t\t\t\t\t\t\tObject.assign(col, definitions[col.field]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.table.options.columns = cols;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.table.options.columns = cols;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.setColumns(this.table.options.columns);\r\n\t\t}\r\n\t}\r\n\t\r\n\tsetColumns(cols, row){\r\n\t\twhile(this.headersElement.firstChild) this.headersElement.removeChild(this.headersElement.firstChild);\r\n\t\t\r\n\t\tthis.columns = [];\r\n\t\tthis.columnsByIndex = [];\r\n\t\tthis.columnsByField = {};\r\n\t\t\r\n\t\tthis.dispatch(\"columns-loading\");\r\n\t\t\r\n\t\tcols.forEach((def, i) => {\r\n\t\t\tthis._addColumn(def);\r\n\t\t});\r\n\t\t\r\n\t\tthis._reIndexColumns();\r\n\t\t\r\n\t\tthis.dispatch(\"columns-loaded\");\r\n\t\t\r\n\t\tthis.rerenderColumns(false, true);\r\n\t\t\r\n\t\tthis.redraw(true);\r\n\t}\r\n\t\r\n\t_addColumn(definition, before, nextToColumn){\r\n\t\tvar column = new Column(definition, this),\r\n\t\tcolEl = column.getElement(),\r\n\t\tindex = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\r\n\t\t\r\n\t\tif(nextToColumn && index > -1){\r\n\t\t\tvar topColumn = nextToColumn.getTopColumn();\r\n\t\t\tvar parentIndex = this.columns.indexOf(topColumn);\r\n\t\t\tvar nextEl = topColumn.getElement();\r\n\t\t\t\r\n\t\t\tif(before){\r\n\t\t\t\tthis.columns.splice(parentIndex, 0, column);\r\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl);\r\n\t\t\t}else{\r\n\t\t\t\tthis.columns.splice(parentIndex + 1, 0, column);\r\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(before){\r\n\t\t\t\tthis.columns.unshift(column);\r\n\t\t\t\tthis.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\r\n\t\t\t}else{\r\n\t\t\t\tthis.columns.push(column);\r\n\t\t\t\tthis.headersElement.appendChild(column.getElement());\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tcolumn.columnRendered();\r\n\t\t\r\n\t\treturn column;\r\n\t}\r\n\t\r\n\tregisterColumnField(col){\r\n\t\tif(col.definition.field){\r\n\t\t\tthis.columnsByField[col.definition.field] = col;\r\n\t\t}\r\n\t}\r\n\t\r\n\tregisterColumnPosition(col){\r\n\t\tthis.columnsByIndex.push(col);\r\n\t}\r\n\t\r\n\t_reIndexColumns(){\r\n\t\tthis.columnsByIndex = [];\r\n\t\t\r\n\t\tthis.columns.forEach(function(column){\r\n\t\t\tcolumn.reRegisterPosition();\r\n\t\t});\r\n\t}\r\n\t\r\n\t//ensure column headers take up the correct amount of space in column groups\r\n\tverticalAlignHeaders(){\r\n\t\tvar minHeight = 0;\r\n\t\t\r\n\t\tif(!this.redrawBlock){\r\n\t\t\t\r\n\t\t\tthis.columns.forEach((column) => {\r\n\t\t\t\tcolumn.clearVerticalAlign();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.columns.forEach((column) => {\r\n\t\t\t\tvar height = column.getHeight();\r\n\t\t\t\t\r\n\t\t\t\tif(height > minHeight){\r\n\t\t\t\t\tminHeight = height;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.columns.forEach((column) => {\r\n\t\t\t\tcolumn.verticalAlign(this.table.options.columnHeaderVertAlign, minHeight);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\t\t}\r\n\t}\r\n\t\r\n\t//////////////// Column Details /////////////////\r\n\tfindColumn(subject){\r\n\t\tvar columns;\r\n\r\n\t\tif(typeof subject == \"object\"){\r\n\t\t\t\r\n\t\t\tif(subject instanceof Column){\r\n\t\t\t\t//subject is column element\r\n\t\t\t\treturn subject;\r\n\t\t\t}else if(subject instanceof ColumnComponent){\r\n\t\t\t\t//subject is public column component\r\n\t\t\t\treturn subject._getSelf() || false;\r\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\r\n\r\n\t\t\t\tcolumns = [];\r\n\r\n\t\t\t\tthis.columns.forEach((column) => {\r\n\t\t\t\t\tcolumns.push(column);\r\n\t\t\t\t\tcolumns = columns.concat(column.getColumns(true));\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//subject is a HTML element of the column header\r\n\t\t\t\tlet match = columns.find((column) => {\r\n\t\t\t\t\treturn column.element === subject;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\treturn match || false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}else{\r\n\t\t\t//subject should be treated as the field name of the column\r\n\t\t\treturn this.columnsByField[subject] || false;\r\n\t\t}\r\n\t\t\r\n\t\t//catch all for any other type of input\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tgetColumnByField(field){\r\n\t\treturn this.columnsByField[field];\r\n\t}\r\n\t\r\n\tgetColumnsByFieldRoot(root){\r\n\t\tvar matches = [];\r\n\t\t\r\n\t\tObject.keys(this.columnsByField).forEach((field) => {\r\n\t\t\tvar fieldRoot = field.split(\".\")[0];\r\n\t\t\tif(fieldRoot === root){\r\n\t\t\t\tmatches.push(this.columnsByField[field]);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn matches;\r\n\t}\r\n\t\r\n\tgetColumnByIndex(index){\r\n\t\treturn this.columnsByIndex[index];\r\n\t}\r\n\t\r\n\tgetFirstVisibleColumn(){\r\n\t\tvar index = this.columnsByIndex.findIndex((col) => {\r\n\t\t\treturn col.visible;\r\n\t\t});\r\n\t\t\r\n\t\treturn index > -1 ? this.columnsByIndex[index] : false;\r\n\t}\r\n\t\r\n\tgetColumns(){\r\n\t\treturn this.columns;\r\n\t}\r\n\t\r\n\tfindColumnIndex(column){\r\n\t\treturn this.columnsByIndex.findIndex((col) => {\r\n\t\t\treturn column === col;\r\n\t\t});\r\n\t}\r\n\t\r\n\t//return all columns that are not groups\r\n\tgetRealColumns(){\r\n\t\treturn this.columnsByIndex;\r\n\t}\r\n\t\r\n\t//traverse across columns and call action\r\n\ttraverse(callback){\r\n\t\tthis.columnsByIndex.forEach((column,i) =>{\r\n\t\t\tcallback(column, i);\r\n\t\t});\r\n\t}\r\n\t\r\n\t//get definitions of actual columns\r\n\tgetDefinitions(active){\r\n\t\tvar output = [];\r\n\t\t\r\n\t\tthis.columnsByIndex.forEach((column) => {\r\n\t\t\tif(!active || (active && column.visible)){\r\n\t\t\t\toutput.push(column.getDefinition());\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\t//get full nested definition tree\r\n\tgetDefinitionTree(){\r\n\t\tvar output = [];\r\n\t\t\r\n\t\tthis.columns.forEach((column) => {\r\n\t\t\toutput.push(column.getDefinition(true));\r\n\t\t});\r\n\t\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tgetComponents(structured){\r\n\t\tvar output = [],\r\n\t\tcolumns = structured ? this.columns : this.columnsByIndex;\r\n\t\t\r\n\t\tcolumns.forEach((column) => {\r\n\t\t\toutput.push(column.getComponent());\r\n\t\t});\r\n\t\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tgetWidth(){\r\n\t\tvar width = 0;\r\n\t\t\r\n\t\tthis.columnsByIndex.forEach((column) => {\r\n\t\t\tif(column.visible){\r\n\t\t\t\twidth += column.getWidth();\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn width;\r\n\t}\r\n\t\r\n\tmoveColumn(from, to, after){\r\n\t\tthis.moveColumnActual(from, to, after);\r\n\t\t\r\n\t\tto.element.parentNode.insertBefore(from.element, to.element);\r\n\t\t\r\n\t\tif(after){\r\n\t\t\tto.element.parentNode.insertBefore(to.element, from.element);\r\n\t\t}\r\n\t\t\r\n\t\tthis.verticalAlignHeaders();\r\n\t\t\r\n\t\tthis.table.rowManager.reinitialize();\r\n\t}\r\n\t\r\n\tmoveColumnActual(from, to, after){\r\n\t\tif(from.parent.isGroup){\r\n\t\t\tthis._moveColumnInArray(from.parent.columns, from, to, after);\r\n\t\t}else{\r\n\t\t\tthis._moveColumnInArray(this.columns, from, to, after);\r\n\t\t}\r\n\t\t\r\n\t\tthis._moveColumnInArray(this.columnsByIndex, from, to, after, true);\r\n\t\t\r\n\t\tthis.rerenderColumns(true);\r\n\t\t\r\n\t\tthis.dispatch(\"column-moved\", from, to, after);\r\n\t\t\r\n\t\tif(this.subscribedExternal(\"columnMoved\")){\r\n\t\t\tthis.dispatchExternal(\"columnMoved\", from.getComponent(), this.table.columnManager.getComponents());\r\n\t\t}\r\n\t}\r\n\t\r\n\t_moveColumnInArray(columns, from, to, after, updateRows){\r\n\t\tvar\tfromIndex = columns.indexOf(from),\r\n\t\ttoIndex, rows = [];\r\n\t\t\r\n\t\tif (fromIndex > -1) {\r\n\t\t\t\r\n\t\t\tcolumns.splice(fromIndex, 1);\r\n\t\t\t\r\n\t\t\ttoIndex = columns.indexOf(to);\r\n\t\t\t\r\n\t\t\tif (toIndex > -1) {\r\n\t\t\t\t\r\n\t\t\t\tif(after){\r\n\t\t\t\t\ttoIndex = toIndex+1;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\ttoIndex = fromIndex;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcolumns.splice(toIndex, 0, from);\r\n\t\t\t\r\n\t\t\tif(updateRows){\r\n\t\t\t\t\r\n\t\t\t\trows = this.chain(\"column-moving-rows\", [from, to, after], null, []) || [];\r\n\t\t\t\t\r\n\t\t\t\trows = rows.concat(this.table.rowManager.rows);\r\n\t\t\t\t\r\n\t\t\t\trows.forEach(function(row){\r\n\t\t\t\t\tif(row.cells.length){\r\n\t\t\t\t\t\tvar cell = row.cells.splice(fromIndex, 1)[0];\r\n\t\t\t\t\t\trow.cells.splice(toIndex, 0, cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tscrollToColumn(column, position, ifVisible){\r\n\t\tvar left = 0,\r\n\t\toffset = 0,\r\n\t\tadjust = 0,\r\n\t\tcolEl = column.getElement();\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\r\n\t\t\tif(typeof position === \"undefined\"){\r\n\t\t\t\tposition = this.table.options.scrollToColumnPosition;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(typeof ifVisible === \"undefined\"){\r\n\t\t\t\tifVisible = this.table.options.scrollToColumnIfVisible;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(column.visible){\r\n\t\t\t\t\r\n\t\t\t\t//align to correct position\r\n\t\t\t\tswitch(position){\r\n\t\t\t\t\tcase \"middle\":\r\n\t\t\t\t\tcase \"center\":\r\n\t\t\t\t\t\tadjust = -this.element.clientWidth / 2;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\t\tadjust = colEl.clientWidth - this.headersElement.clientWidth;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//check column visibility\r\n\t\t\t\tif(!ifVisible){\r\n\t\t\t\t\t\r\n\t\t\t\t\toffset = colEl.offsetLeft;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(offset > 0 && offset + colEl.offsetWidth < this.element.clientWidth){\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//calculate scroll position\r\n\t\t\t\tleft = colEl.offsetLeft + adjust;\r\n\t\t\t\t\r\n\t\t\t\tleft = Math.max(Math.min(left, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth),0);\r\n\t\t\t\t\r\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\r\n\t\t\t\tthis.scrollHorizontal(left);\r\n\t\t\t\t\r\n\t\t\t\tresolve();\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Scroll Error - Column not visible\");\r\n\t\t\t\treject(\"Scroll Error - Column not visible\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\t}\r\n\t\r\n\t//////////////// Cell Management /////////////////\r\n\tgenerateCells(row){\r\n\t\tvar cells = [];\r\n\t\t\r\n\t\tthis.columnsByIndex.forEach((column) => {\r\n\t\t\tcells.push(column.generateCell(row));\r\n\t\t});\r\n\t\t\r\n\t\treturn cells;\r\n\t}\r\n\t\r\n\t//////////////// Column Management /////////////////\r\n\tgetFlexBaseWidth(){\r\n\t\tvar totalWidth = this.table.element.clientWidth, //table element width\r\n\t\tfixedWidth = 0;\r\n\t\t\r\n\t\t//adjust for vertical scrollbar if present\r\n\t\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\r\n\t\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\r\n\t\t}\r\n\t\t\r\n\t\tthis.columnsByIndex.forEach(function(column){\r\n\t\t\tvar width, minWidth, colWidth;\r\n\t\t\t\r\n\t\t\tif(column.visible){\r\n\t\t\t\t\r\n\t\t\t\twidth = column.definition.width || 0;\r\n\t\t\t\t\r\n\t\t\t\tminWidth = parseInt(column.minWidth);\r\n\t\t\t\t\r\n\t\t\t\tif(typeof(width) == \"string\"){\r\n\t\t\t\t\tif(width.indexOf(\"%\") > -1){\r\n\t\t\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width) ;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tcolWidth = parseInt(width);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcolWidth = width;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn fixedWidth;\r\n\t}\r\n\t\r\n\taddColumn(definition, before, nextToColumn){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar column = this._addColumn(definition, before, nextToColumn);\r\n\t\t\t\r\n\t\t\tthis._reIndexColumns();\r\n\t\t\t\r\n\t\t\tthis.dispatch(\"column-add\", definition, before, nextToColumn);\r\n\t\t\t\r\n\t\t\tif(this.layoutMode() != \"fitColumns\"){\r\n\t\t\t\tcolumn.reinitializeWidth();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.redraw(true);\r\n\t\t\t\r\n\t\t\tthis.table.rowManager.reinitialize();\r\n\t\t\t\r\n\t\t\tthis.rerenderColumns();\r\n\t\t\t\r\n\t\t\tresolve(column);\r\n\t\t});\r\n\t}\r\n\t\r\n\t//remove column from system\r\n\tderegisterColumn(column){\r\n\t\tvar field = column.getField(),\r\n\t\tindex;\r\n\t\t\r\n\t\t//remove from field list\r\n\t\tif(field){\r\n\t\t\tdelete this.columnsByField[field];\r\n\t\t}\r\n\t\t\r\n\t\t//remove from index list\r\n\t\tindex = this.columnsByIndex.indexOf(column);\r\n\t\t\r\n\t\tif(index > -1){\r\n\t\t\tthis.columnsByIndex.splice(index, 1);\r\n\t\t}\r\n\t\t\r\n\t\t//remove from column list\r\n\t\tindex = this.columns.indexOf(column);\r\n\t\t\r\n\t\tif(index > -1){\r\n\t\t\tthis.columns.splice(index, 1);\r\n\t\t}\r\n\t\t\r\n\t\tthis.verticalAlignHeaders();\r\n\t\t\r\n\t\tthis.redraw();\r\n\t}\r\n\t\r\n\trerenderColumns(update, silent){\r\n\t\tif(!this.redrawBlock){\r\n\t\t\tthis.renderer.rerenderColumns(update, silent);\r\n\t\t}else{\r\n\t\t\tif(update === false || (update === true && this.redrawBlockUpdate === null)){\r\n\t\t\t\tthis.redrawBlockUpdate = update;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tblockRedraw(){\r\n\t\tthis.redrawBlock = true;\r\n\t\tthis.redrawBlockUpdate = null;\r\n\t}\r\n\t\r\n\trestoreRedraw(){\r\n\t\tthis.redrawBlock = false;\r\n\t\tthis.verticalAlignHeaders();\r\n\t\tthis.renderer.rerenderColumns(this.redrawBlockUpdate);\r\n\t\t\r\n\t}\r\n\t\r\n\t//redraw columns\r\n\tredraw(force){\r\n\t\tif(Helpers.elVisible(this.element)){\r\n\t\t\tthis.verticalAlignHeaders();\r\n\t\t}\r\n\t\t\r\n\t\tif(force){\r\n\t\t\tthis.table.rowManager.resetScroll();\r\n\t\t\tthis.table.rowManager.reinitialize();\r\n\t\t}\r\n\t\t\r\n\t\tif(!this.confirm(\"table-redrawing\", force)){\r\n\t\t\tthis.layoutRefresh(force);\r\n\t\t}\r\n\t\t\r\n\t\tthis.dispatch(\"table-redraw\", force);\r\n\t\t\r\n\t\tthis.table.footerManager.redraw();\r\n\t}\r\n}","import Renderer from '../Renderer.js';\r\nimport Helpers from '../../tools/Helpers.js';\r\n\r\nexport default class BasicVertical extends Renderer{\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.verticalFillMode = \"fill\";\r\n\r\n\t\tthis.scrollTop = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\r\n\t\tthis.scrollTop = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\t}\r\n\r\n\tclearRows(){\r\n\t\tvar element = this.tableElement;\r\n\r\n\t\t// element.children.detach();\r\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\r\n\t\telement.scrollTop = 0;\r\n\t\telement.scrollLeft = 0;\r\n\r\n\t\telement.style.minWidth = \"\";\r\n\t\telement.style.minHeight = \"\";\r\n\t\telement.style.display = \"\";\r\n\t\telement.style.visibility = \"\";\r\n\t}\r\n\r\n\trenderRows(){\r\n\t\tvar element = this.tableElement,\r\n\t\tonlyGroupHeaders = true;\r\n\r\n\t\tthis.rows().forEach((row, index) => {\r\n\t\t\tthis.styleRow(row, index);\r\n\t\t\telement.appendChild(row.getElement());\r\n\t\t\trow.initialize(true);\r\n\r\n\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\tonlyGroupHeaders = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(onlyGroupHeaders){\r\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\r\n\t\t}else{\r\n\t\t\telement.style.minWidth = \"\";\r\n\t\t}\r\n\t}\r\n\r\n\r\n\trerenderRows(callback){\r\n\t\tthis.clearRows();\r\n\t\tthis.renderRows();\r\n\r\n\t\tif(callback){\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n\tscrollToRowNearestTop(row){\r\n\t\tvar rowTop = Helpers.elOffset(row.getElement()).top;\r\n\r\n\t\treturn !(Math.abs(this.elementVertical.scrollTop - rowTop) > Math.abs(this.elementVertical.scrollTop + this.elementVertical.clientHeight - rowTop));\r\n\t}\r\n\r\n\tscrollToRow(row){\r\n\t\tvar rowEl = row.getElement();\r\n\r\n\t\tthis.elementVertical.scrollTop = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top + this.elementVertical.scrollTop;\r\n\t}\r\n\r\n\tvisibleRows(includingBuffer){\r\n\t\treturn this.rows();\r\n\t}\r\n\r\n}","import Renderer from '../Renderer.js';\r\nimport Helpers from '../../tools/Helpers.js';\r\n\r\nexport default class VirtualDomVertical extends Renderer{\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.verticalFillMode = \"fill\";\r\n\r\n\t\tthis.scrollTop = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\r\n\t\tthis.vDomRowHeight = 20; //approximation of row heights for padding\r\n\r\n\t\tthis.vDomTop = 0; //hold position for first rendered row in the virtual DOM\r\n\t\tthis.vDomBottom = 0; //hold position for last rendered row in the virtual DOM\r\n\r\n\t\tthis.vDomScrollPosTop = 0; //last scroll position of the vDom top;\r\n\t\tthis.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\r\n\r\n\t\tthis.vDomTopPad = 0; //hold value of padding for top of virtual DOM\r\n\t\tthis.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\r\n\r\n\t\tthis.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\r\n\r\n\t\tthis.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\r\n\r\n\t\tthis.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\r\n\t\tthis.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\r\n\r\n\t\tthis.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\r\n\t\tthis.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\r\n\t}\r\n\r\n\t//////////////////////////////////////\r\n\t///////// Public Functions ///////////\r\n\t//////////////////////////////////////\r\n\r\n\tclearRows(){\r\n\t\tvar element = this.tableElement;\r\n\r\n\t\t// element.children.detach();\r\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\r\n\t\telement.style.paddingTop = \"\";\r\n\t\telement.style.paddingBottom = \"\";\r\n\t\t// element.style.minWidth = \"\";\r\n\t\telement.style.minHeight = \"\";\r\n\t\telement.style.display = \"\";\r\n\t\telement.style.visibility = \"\";\r\n\r\n\t\tthis.elementVertical.scrollTop = 0;\r\n\t\tthis.elementVertical.scrollLeft = 0;\r\n\r\n\t\tthis.scrollTop = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\r\n\t\tthis.vDomTop = 0;\r\n\t\tthis.vDomBottom = 0;\r\n\t\tthis.vDomTopPad = 0;\r\n\t\tthis.vDomBottomPad = 0;\r\n\t\tthis.vDomScrollPosTop = 0;\r\n\t\tthis.vDomScrollPosBottom = 0;\r\n\t}\r\n\r\n\trenderRows(){\r\n\t\tthis._virtualRenderFill();\r\n\t}\r\n\r\n\trerenderRows(callback){\r\n\t\tvar scrollTop = this.elementVertical.scrollTop;\r\n\t\tvar topRow = false;\r\n\t\tvar topOffset = false;\r\n\r\n\t\tvar left = this.table.rowManager.scrollLeft;\r\n\r\n\t\tvar rows = this.rows();\r\n\r\n\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\r\n\r\n\t\t\tif(rows[i]){\r\n\t\t\t\tvar diff = scrollTop - rows[i].getElement().offsetTop;\r\n\r\n\t\t\t\tif(topOffset === false || Math.abs(diff) < topOffset){\r\n\t\t\t\t\ttopOffset = diff;\r\n\t\t\t\t\ttopRow = i;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trows.forEach((row) => {\r\n\t\t\trow.deinitializeHeight();\r\n\t\t});\r\n\r\n\t\tif(callback){\r\n\t\t\tcallback();\r\n\t\t}\r\n\r\n\t\tif(this.rows().length){\r\n\t\t\tthis._virtualRenderFill((topRow === false ? this.rows.length - 1 : topRow), true, topOffset || 0);\r\n\t\t}else{\r\n\t\t\tthis.clear();\r\n\t\t\tthis.table.rowManager._showPlaceholder();\r\n\t\t}\r\n\r\n\t\tthis.scrollColumns(left);\r\n\t}\r\n\r\n\tscrollColumns(left){\r\n\t\tthis.table.rowManager.scrollHorizontal(left);\r\n\t}\r\n\r\n\tscrollRows(top, dir){\r\n\t\tvar topDiff = top - this.vDomScrollPosTop;\r\n\t\tvar bottomDiff = top - this.vDomScrollPosBottom;\r\n\t\tvar margin = this.vDomWindowBuffer * 2;\r\n\t\tvar rows = this.rows();\r\n\r\n\t\tthis.scrollTop = top;\r\n\r\n\t\tif(-topDiff > margin || bottomDiff > margin){\r\n\t\t\t//if big scroll redraw table;\r\n\t\t\tvar left = this.table.rowManager.scrollLeft;\r\n\t\t\tthis._virtualRenderFill(Math.floor((this.elementVertical.scrollTop / this.elementVertical.scrollHeight) * rows.length));\r\n\t\t\tthis.scrollColumns(left);\r\n\t\t}else{\r\n\r\n\t\t\tif(dir){\r\n\t\t\t\t//scrolling up\r\n\t\t\t\tif(topDiff < 0){\r\n\t\t\t\t\tthis._addTopRow(rows, -topDiff);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(bottomDiff < 0){\r\n\t\t\t\t\t//hide bottom row if needed\r\n\t\t\t\t\tif(this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer){\r\n\t\t\t\t\t\tthis._removeBottomRow(rows, -bottomDiff);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\r\n\t\t\t\tif(bottomDiff >= 0){\r\n\t\t\t\t\tthis._addBottomRow(rows, bottomDiff);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//scrolling down\r\n\t\t\t\tif(topDiff >= 0){\r\n\t\t\t\t\t//hide top row if needed\r\n\t\t\t\t\tif(this.scrollTop > this.vDomWindowBuffer){\r\n\t\t\t\t\t\tthis._removeTopRow(rows, topDiff);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.vDomScrollPosTop = this.scrollTop;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tresize(){\r\n\t\tthis.vDomWindowBuffer = this.table.options.renderVerticalBuffer || this.elementVertical.clientHeight;\r\n\t}\r\n\r\n\tscrollToRowNearestTop(row){\r\n\t\tvar rowIndex = this.rows().indexOf(row);\r\n\r\n\t\treturn !(Math.abs(this.vDomTop - rowIndex) > Math.abs(this.vDomBottom - rowIndex));\r\n\t}\r\n\r\n\tscrollToRow(row){\r\n\t\tvar index = this.rows().indexOf(row);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis._virtualRenderFill(index, true);\r\n\t\t}\r\n\t}\r\n\r\n\tvisibleRows(includingBuffer){\r\n\t\tvar topEdge = this.elementVertical.scrollTop,\r\n\t\tbottomEdge = this.elementVertical.clientHeight + topEdge,\r\n\t\ttopFound = false,\r\n\t\ttopRow = 0,\r\n\t\tbottomRow = 0,\r\n\t\trows = this.rows();\r\n\r\n\t\tif(includingBuffer){\r\n\t\t\ttopRow = this.vDomTop;\r\n\t\t\tbottomRow = this.vDomBottom;\r\n\t\t}else{\r\n\t\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\r\n\t\t\t\tif(rows[i]){\r\n\t\t\t\t\tif(!topFound){\r\n\t\t\t\t\t\tif((topEdge - rows[i].getElement().offsetTop) >= 0){\r\n\t\t\t\t\t\t\ttopRow = i;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\ttopFound = true;\r\n\r\n\t\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\r\n\t\t\t\t\t\t\t\tbottomRow = i;\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\r\n\t\t\t\t\t\t\tbottomRow = i;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn rows.slice(topRow, bottomRow + 1);\r\n\t}\r\n\r\n\t//////////////////////////////////////\r\n\t//////// Internal Rendering //////////\r\n\t//////////////////////////////////////\r\n\r\n\t//full virtual render\r\n\t_virtualRenderFill(position, forceMove, offset){\r\n\t\tvar\telement = this.tableElement,\r\n\t\tholder = this.elementVertical,\r\n\t\ttopPad = 0,\r\n\t\trowsHeight = 0,\r\n\t\theightOccupied = 0,\r\n\t\ttopPadHeight = 0,\r\n\t\ti = 0,\r\n\t\trows = this.rows(),\r\n\t\trowsCount = rows.length,\r\n\t\tcontainerHeight = this.elementVertical.clientHeight;\r\n\r\n\t\tposition = position || 0;\r\n\r\n\t\toffset = offset || 0;\r\n\r\n\t\tif(!position){\r\n\t\t\tthis.clear();\r\n\t\t}else{\r\n\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\r\n\t\t\t//check if position is too close to bottom of table\r\n\t\t\theightOccupied = (rowsCount - position + 1) * this.vDomRowHeight;\r\n\r\n\t\t\tif(heightOccupied < containerHeight){\r\n\t\t\t\tposition -= Math.ceil((containerHeight - heightOccupied) / this.vDomRowHeight);\r\n\t\t\t\tif(position < 0){\r\n\t\t\t\t\tposition = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//calculate initial pad\r\n\t\t\ttopPad = Math.min(Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight),  this.vDomWindowMinMarginRows), position);\r\n\t\t\tposition -= topPad;\r\n\t\t}\r\n\r\n\t\tif(rowsCount && Helpers.elVisible(this.elementVertical)){\r\n\t\t\tthis.vDomTop = position;\r\n\r\n\t\t\tthis.vDomBottom = position -1;\r\n\r\n\t\t\twhile ((rowsHeight <= containerHeight + this.vDomWindowBuffer || i < this.vDomWindowMinTotalRows) && this.vDomBottom < rowsCount -1){\r\n\t\t\t\tvar index = this.vDomBottom + 1,\r\n\t\t\t\trow = rows[index],\r\n\t\t\t\trowHeight = 0;\r\n\r\n\t\t\t\tthis.styleRow(row, index);\r\n\r\n\t\t\t\telement.appendChild(row.getElement());\r\n\r\n\t\t\t\trow.initialize();\r\n\r\n\t\t\t\tif(!row.heightInitialized){\r\n\t\t\t\t\trow.normalizeHeight(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowHeight = row.getHeight();\r\n\r\n\t\t\t\tif(i < topPad){\r\n\t\t\t\t\ttopPadHeight += rowHeight;\r\n\t\t\t\t}else{\r\n\t\t\t\t\trowsHeight += rowHeight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\r\n\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.vDomBottom ++;\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\r\n\t\t\tif(!position){\r\n\t\t\t\tthis.vDomTopPad = 0;\r\n\t\t\t\t//adjust row height to match average of rendered elements\r\n\t\t\t\tthis.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / i);\r\n\t\t\t\tthis.vDomBottomPad = this.vDomRowHeight * (rowsCount - this.vDomBottom -1);\r\n\r\n\t\t\t\tthis.vDomScrollHeight = topPadHeight + rowsHeight + this.vDomBottomPad - containerHeight;\r\n\t\t\t}else{\r\n\t\t\t\tthis.vDomTopPad = !forceMove ? this.scrollTop - topPadHeight : (this.vDomRowHeight * this.vDomTop) + offset;\r\n\t\t\t\tthis.vDomBottomPad = this.vDomBottom == rowsCount-1 ? 0 : Math.max(this.vDomScrollHeight - this.vDomTopPad - rowsHeight - topPadHeight, 0);\r\n\t\t\t}\r\n\r\n\t\t\telement.style.paddingTop = this.vDomTopPad + \"px\";\r\n\t\t\telement.style.paddingBottom = this.vDomBottomPad + \"px\";\r\n\r\n\t\t\tif(forceMove){\r\n\t\t\t\tthis.scrollTop = this.vDomTopPad + (topPadHeight) + offset - (this.elementVertical.scrollWidth > this.elementVertical.clientWidth ? this.elementVertical.offsetHeight - containerHeight : 0);\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollTop = Math.min(this.scrollTop, this.elementVertical.scrollHeight - containerHeight);\r\n\r\n\t\t\t//adjust for horizontal scrollbar if present (and not at top of table)\r\n\t\t\tif(this.elementVertical.scrollWidth > this.elementVertical.offsetWidth && forceMove){\r\n\t\t\t\tthis.scrollTop += this.elementVertical.offsetHeight - containerHeight;\r\n\t\t\t}\r\n\r\n\t\t\tthis.vDomScrollPosTop = this.scrollTop;\r\n\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\r\n\r\n\t\t\tholder.scrollTop = this.scrollTop;\r\n\r\n\t\t\tthis.dispatch(\"render-virtual-fill\");\r\n\t\t}\r\n\t}\r\n\r\n\t_addTopRow(rows, fillableSpace){\r\n\t\tvar table = this.tableElement,\r\n\t\taddedRows = [],\r\n\t\tpaddingAdjust = 0,\r\n\t\tindex = this.vDomTop -1,\r\n\t\ti = 0,\r\n\t\tworking = true;\r\n\r\n\t\twhile(working){\r\n\t\t\tif(this.vDomTop){\r\n\t\t\t\tlet row = rows[index],\r\n\t\t\t\trowHeight, initialized;\r\n\r\n\t\t\t\tif(row && i < this.vDomMaxRenderChain){\r\n\t\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\r\n\t\t\t\t\tinitialized = row.initialized;\r\n\r\n\t\t\t\t\tif(fillableSpace >= rowHeight){\r\n\r\n\t\t\t\t\t\tthis.styleRow(row, index);\r\n\t\t\t\t\t\ttable.insertBefore(row.getElement(), table.firstChild);\r\n\r\n\t\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\r\n\t\t\t\t\t\t\taddedRows.push(row);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\trow.initialize();\r\n\r\n\t\t\t\t\t\tif(!initialized){\r\n\t\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\r\n\r\n\t\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\r\n\t\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfillableSpace -= rowHeight;\r\n\t\t\t\t\t\tpaddingAdjust += rowHeight;\r\n\r\n\t\t\t\t\t\tthis.vDomTop--;\r\n\t\t\t\t\t\tindex--;\r\n\t\t\t\t\t\ti++;\r\n\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tworking = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\tworking = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tworking = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let row of addedRows){\r\n\t\t\trow.clearCellHeight();\r\n\t\t}\r\n\r\n\t\tthis._quickNormalizeRowHeight(addedRows);\r\n\r\n\t\tif(paddingAdjust){\r\n\t\t\tthis.vDomTopPad -= paddingAdjust;\r\n\r\n\t\t\tif(this.vDomTopPad < 0){\r\n\t\t\t\tthis.vDomTopPad = index * this.vDomRowHeight;\r\n\t\t\t}\r\n\r\n\t\t\tif(index < 1){\r\n\t\t\t\tthis.vDomTopPad = 0;\r\n\t\t\t}\r\n\r\n\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\r\n\t\t\tthis.vDomScrollPosTop -= paddingAdjust;\r\n\t\t}\r\n\t}\r\n\r\n\t_removeTopRow(rows, fillableSpace){\r\n\t\tvar removableRows = [],\r\n\t\tpaddingAdjust = 0,\r\n\t\ti = 0,\r\n\t\tworking = true;\r\n\r\n\t\twhile(working){\r\n\t\t\tlet row = rows[this.vDomTop],\r\n\t\t\trowHeight;\r\n\r\n\t\t\tif(row && i < this.vDomMaxRenderChain){\r\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\r\n\r\n\t\t\t\tif(fillableSpace >= rowHeight){\r\n\t\t\t\t\tthis.vDomTop++;\r\n\r\n\t\t\t\t\tfillableSpace -= rowHeight;\r\n\t\t\t\t\tpaddingAdjust += rowHeight;\r\n\r\n\t\t\t\t\tremovableRows.push(row);\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tworking = false;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tworking = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let row of removableRows){\r\n\t\t\tlet rowEl = row.getElement();\r\n\r\n\t\t\tif(rowEl.parentNode){\r\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(paddingAdjust){\r\n\t\t\tthis.vDomTopPad += paddingAdjust;\r\n\t\t\tthis.tableElement.style.paddingTop = this.vDomTopPad + \"px\";\r\n\t\t\tthis.vDomScrollPosTop += this.vDomTop ? paddingAdjust : paddingAdjust + this.vDomWindowBuffer;\r\n\t\t}\r\n\t}\r\n\r\n\t_addBottomRow(rows, fillableSpace){\r\n\t\tvar table = this.tableElement,\r\n\t\taddedRows = [],\r\n\t\tpaddingAdjust = 0,\r\n\t\tindex = this.vDomBottom + 1,\r\n\t\ti = 0,\r\n\t\tworking = true;\r\n\r\n\t\twhile(working){\r\n\t\t\tlet row = rows[index],\r\n\t\t\trowHeight, initialized;\r\n\r\n\t\t\tif(row && i < this.vDomMaxRenderChain){\r\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\r\n\t\t\t\tinitialized = row.initialized;\r\n\r\n\t\t\t\tif(fillableSpace >= rowHeight){\r\n\r\n\t\t\t\t\tthis.styleRow(row, index);\r\n\t\t\t\t\ttable.appendChild(row.getElement());\r\n\r\n\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\r\n\t\t\t\t\t\taddedRows.push(row);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\trow.initialize();\r\n\r\n\t\t\t\t\tif(!initialized){\r\n\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\r\n\r\n\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\r\n\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfillableSpace -= rowHeight;\r\n\t\t\t\t\tpaddingAdjust += rowHeight;\r\n\r\n\t\t\t\t\tthis.vDomBottom++;\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tworking = false;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tworking = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let row of addedRows){\r\n\t\t\trow.clearCellHeight();\r\n\t\t}\r\n\r\n\t\tthis._quickNormalizeRowHeight(addedRows);\r\n\r\n\t\tif(paddingAdjust){\r\n\t\t\tthis.vDomBottomPad -= paddingAdjust;\r\n\r\n\t\t\tif(this.vDomBottomPad < 0 || index == rows.length -1){\r\n\t\t\t\tthis.vDomBottomPad = 0;\r\n\t\t\t}\r\n\r\n\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\r\n\t\t\tthis.vDomScrollPosBottom += paddingAdjust;\r\n\t\t}\r\n\t}\r\n\r\n\t_removeBottomRow(rows, fillableSpace){\r\n\t\tvar removableRows = [],\r\n\t\tpaddingAdjust = 0,\r\n\t\ti = 0,\r\n\t\tworking = true;\r\n\r\n\t\twhile(working){\r\n\t\t\tlet row = rows[this.vDomBottom],\r\n\t\t\trowHeight;\r\n\r\n\t\t\tif(row && i < this.vDomMaxRenderChain){\r\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\r\n\r\n\t\t\t\tif(fillableSpace >= rowHeight){\r\n\t\t\t\t\tthis.vDomBottom --;\r\n\r\n\t\t\t\t\tfillableSpace -= rowHeight;\r\n\t\t\t\t\tpaddingAdjust += rowHeight;\r\n\r\n\t\t\t\t\tremovableRows.push(row);\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tworking = false;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tworking = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let row of removableRows){\r\n\t\t\tlet rowEl = row.getElement();\r\n\r\n\t\t\tif(rowEl.parentNode){\r\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(paddingAdjust){\r\n\t\t\tthis.vDomBottomPad += paddingAdjust;\r\n\r\n\t\t\tif(this.vDomBottomPad < 0){\r\n\t\t\t\tthis.vDomBottomPad = 0;\r\n\t\t\t}\r\n\r\n\t\t\tthis.tableElement.style.paddingBottom = this.vDomBottomPad + \"px\";\r\n\t\t\tthis.vDomScrollPosBottom -= paddingAdjust;\r\n\t\t}\r\n\t}\r\n\r\n\t_quickNormalizeRowHeight(rows){\r\n\t\tfor(let row of rows){\r\n\t\t\trow.calcHeight();\r\n\t\t}\r\n\r\n\t\tfor(let row of rows){\r\n\t\t\trow.setCellHeight();\r\n\t\t}\r\n\t}\r\n}","import CoreFeature from './CoreFeature.js';\r\nimport Row from './row/Row.js';\r\nimport RowComponent from './row/RowComponent.js';\r\nimport Helpers from './tools/Helpers.js';\r\n\r\nimport RendererBasicVertical from './rendering/renderers/BasicVertical.js';\r\nimport RendererVirtualDomVertical from './rendering/renderers/VirtualDomVertical.js';\r\n\r\nexport default class RowManager extends CoreFeature{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.element = this.createHolderElement(); //containing element\r\n\t\tthis.tableElement = this.createTableElement(); //table element\r\n\t\tthis.heightFixer = this.createTableElement(); //table element\r\n\t\tthis.placeholder = null; //placeholder element\r\n\t\tthis.placeholderContents = null; //placeholder element\r\n\t\t\r\n\t\tthis.firstRender = false; //handle first render\r\n\t\tthis.renderMode = \"virtual\"; //current rendering mode\r\n\t\tthis.fixedHeight = false; //current rendering mode\r\n\t\t\r\n\t\tthis.rows = []; //hold row data objects\r\n\t\tthis.activeRowsPipeline = []; //hold calculation of active rows\r\n\t\tthis.activeRows = []; //rows currently available to on display in the table\r\n\t\tthis.activeRowsCount = 0; //count of active rows\r\n\t\t\r\n\t\tthis.displayRows = []; //rows currently on display in the table\r\n\t\tthis.displayRowsCount = 0; //count of display rows\r\n\t\t\r\n\t\tthis.scrollTop = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\t\t\r\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\r\n\t\tthis.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\r\n\t\tthis.redrawBlockRenderInPosition = false; //store latest redraw function calls for when redraw is needed\r\n\t\t\r\n\t\tthis.dataPipeline = []; //hold data pipeline tasks\r\n\t\tthis.displayPipeline = []; //hold data display pipeline tasks\r\n\t\t\r\n\t\tthis.renderer = null;\r\n\t}\r\n\t\r\n\t//////////////// Setup Functions /////////////////\r\n\t\r\n\tcreateHolderElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\t\r\n\t\tel.classList.add(\"tabulator-tableholder\");\r\n\t\tel.setAttribute(\"tabindex\", 0);\r\n\t\t// el.setAttribute(\"role\", \"rowgroup\");\r\n\t\t\r\n\t\treturn el;\r\n\t}\r\n\t\r\n\tcreateTableElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\t\r\n\t\tel.classList.add(\"tabulator-table\");\r\n\t\tel.setAttribute(\"role\", \"rowgroup\");\r\n\t\t\r\n\t\treturn el;\r\n\t}\r\n\t\r\n\tinitializePlaceholder(){\r\n\t\t//configure placeholder element\r\n\t\tif(typeof this.table.options.placeholder == \"string\"){\r\n\t\t\tlet el = document.createElement(\"div\");\r\n\t\t\tel.classList.add(\"tabulator-placeholder\");\r\n\t\t\t\r\n\t\t\tlet contents = document.createElement(\"div\");\r\n\t\t\tcontents.classList.add(\"tabulator-placeholder-contents\");\r\n\t\t\tcontents.innerHTML = this.table.options.placeholder;\r\n\t\t\t\r\n\t\t\tel.appendChild(contents);\r\n\t\t\t\r\n\t\t\tthis.placeholderContents = contents;\r\n\t\t\tthis.placeholder = el;\r\n\t\t}\r\n\t}\r\n\t\r\n\t//return containing element\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\t\r\n\t//return table element\r\n\tgetTableElement(){\r\n\t\treturn this.tableElement;\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tthis.initializePlaceholder();\r\n\t\tthis.initializeRenderer();\r\n\t\t\r\n\t\t//initialize manager\r\n\t\tthis.element.appendChild(this.tableElement);\r\n\t\t\r\n\t\tthis.firstRender = true;\r\n\t\t\r\n\t\t//scroll header along with table body\r\n\t\tthis.element.addEventListener(\"scroll\", () => {\r\n\t\t\tvar left = this.element.scrollLeft,\r\n\t\t\tleftDir = this.scrollLeft > left,\r\n\t\t\ttop = this.element.scrollTop,\r\n\t\t\ttopDir = this.scrollTop > top;\r\n\t\t\t\r\n\t\t\t//handle horizontal scrolling\r\n\t\t\tif(this.scrollLeft != left){\r\n\t\t\t\tthis.scrollLeft = left;\r\n\t\t\t\t\r\n\t\t\t\tthis.dispatch(\"scroll-horizontal\", left, leftDir);\r\n\t\t\t\tthis.dispatchExternal(\"scrollHorizontal\", left, leftDir);\r\n\t\t\t\t\r\n\t\t\t\tthis._positionPlaceholder();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//handle vertical scrolling\r\n\t\t\tif(this.scrollTop != top){\r\n\t\t\t\tthis.scrollTop = top;\r\n\t\t\t\t\r\n\t\t\t\tthis.renderer.scrollRows(top, topDir);\r\n\t\t\t\t\r\n\t\t\t\tthis.dispatch(\"scroll-vertical\", top, topDir);\r\n\t\t\t\tthis.dispatchExternal(\"scrollVertical\", top, topDir);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t////////////////// Row Manipulation //////////////////\r\n\tfindRow(subject){\r\n\t\tif(typeof subject == \"object\"){\r\n\t\t\tif(subject instanceof Row){\r\n\t\t\t\t//subject is row element\r\n\t\t\t\treturn subject;\r\n\t\t\t}else if(subject instanceof RowComponent){\r\n\t\t\t\t//subject is public row component\r\n\t\t\t\treturn subject._getSelf() || false;\r\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\r\n\t\t\t\t//subject is a HTML element of the row\r\n\t\t\t\tlet match = this.rows.find((row) => {\r\n\t\t\t\t\treturn row.getElement() === subject;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\treturn match || false;\r\n\t\t\t}else if(subject === null){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else if(typeof subject == \"undefined\"){\r\n\t\t\treturn false;\r\n\t\t}else{\r\n\t\t\t//subject should be treated as the index of the row\r\n\t\t\tlet match = this.rows.find((row) => {\r\n\t\t\t\treturn row.data[this.table.options.index] == subject;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\treturn match || false;\r\n\t\t}\r\n\t\t\r\n\t\t//catch all for any other type of input\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tgetRowFromDataObject(data){\r\n\t\tvar match = this.rows.find((row) => {\r\n\t\t\treturn row.data === data;\r\n\t\t});\r\n\t\t\r\n\t\treturn match || false;\r\n\t}\r\n\t\r\n\tgetRowFromPosition(position){\r\n\t\treturn this.getDisplayRows().find((row) => {\r\n\t\t\treturn row.getPosition() === position && row.isDisplayed();\r\n\t\t});\r\n\t}\r\n\t\r\n\tscrollToRow(row, position, ifVisible){\r\n\t\treturn this.renderer.scrollToRowPosition(row, position, ifVisible);\r\n\t}\r\n\t\r\n\t////////////////// Data Handling //////////////////\r\n\tsetData(data, renderInPosition, columnsChanged){\r\n\t\treturn new Promise((resolve, reject)=>{\r\n\t\t\tif(renderInPosition && this.getDisplayRows().length){\r\n\t\t\t\tif(this.table.options.pagination){\r\n\t\t\t\t\tthis._setDataActual(data, true);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.reRenderInPosition(() => {\r\n\t\t\t\t\t\tthis._setDataActual(data);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(this.table.options.autoColumns && columnsChanged && this.table.initialized){\r\n\t\t\t\t\tthis.table.columnManager.generateColumnsFromRowData(data);\r\n\t\t\t\t}\r\n\t\t\t\tthis.resetScroll();\r\n\t\t\t\t\r\n\t\t\t\tthis._setDataActual(data);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\t\r\n\t_setDataActual(data, renderInPosition){\r\n\t\tthis.dispatchExternal(\"dataProcessing\", data);\r\n\t\t\r\n\t\tthis._wipeElements();\r\n\t\t\r\n\t\tif(Array.isArray(data)){\r\n\t\t\tthis.dispatch(\"data-processing\", data);\r\n\t\t\t\r\n\t\t\tdata.forEach((def, i) => {\r\n\t\t\t\tif(def && typeof def === \"object\"){\r\n\t\t\t\t\tvar row = new Row(def, this);\r\n\t\t\t\t\tthis.rows.push(row);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.refreshActiveData(false, false, renderInPosition);\r\n\t\t\t\r\n\t\t\tthis.dispatch(\"data-processed\", data);\r\n\t\t\tthis.dispatchExternal(\"dataProcessed\", data);\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\r\n\t\t}\r\n\t}\r\n\t\r\n\t_wipeElements(){\r\n\t\tthis.dispatch(\"rows-wipe\");\r\n\t\t\r\n\t\tthis.rows.forEach((row) => {\r\n\t\t\trow.wipe();\r\n\t\t});\r\n\t\t\r\n\t\tthis.rows = [];\r\n\t\tthis.activeRows = [];\r\n\t\tthis.activeRowsPipeline = [];\r\n\t\tthis.activeRowsCount = 0;\r\n\t\tthis.displayRows = [];\r\n\t\tthis.displayRowsCount = 0;\r\n\t\t\r\n\t\tthis.adjustTableSize();\r\n\t}\r\n\t\r\n\tdeleteRow(row, blockRedraw){\r\n\t\tvar allIndex = this.rows.indexOf(row),\r\n\t\tactiveIndex = this.activeRows.indexOf(row);\r\n\t\t\r\n\t\tif(activeIndex > -1){\r\n\t\t\tthis.activeRows.splice(activeIndex, 1);\r\n\t\t}\r\n\t\t\r\n\t\tif(allIndex > -1){\r\n\t\t\tthis.rows.splice(allIndex, 1);\r\n\t\t}\r\n\t\t\r\n\t\tthis.setActiveRows(this.activeRows);\r\n\t\t\r\n\t\tthis.displayRowIterator((rows) => {\r\n\t\t\tvar displayIndex = rows.indexOf(row);\r\n\t\t\t\r\n\t\t\tif(displayIndex > -1){\r\n\t\t\t\trows.splice(displayIndex, 1);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tif(!blockRedraw){\r\n\t\t\tthis.reRenderInPosition();\r\n\t\t}\r\n\t\t\r\n\t\tthis.regenerateRowPositions();\r\n\t\t\r\n\t\tthis.dispatchExternal(\"rowDeleted\", row.getComponent());\r\n\t\t\r\n\t\tif(!this.displayRowsCount){\r\n\t\t\tthis._showPlaceholder();\r\n\t\t}\r\n\t\t\r\n\t\tif(this.subscribedExternal(\"dataChanged\")){\r\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.getData());\r\n\t\t}\r\n\t}\r\n\t\r\n\taddRow(data, pos, index, blockRedraw){\r\n\t\tvar row = this.addRowActual(data, pos, index, blockRedraw);\r\n\t\treturn row;\r\n\t}\r\n\t\r\n\t//add multiple rows\r\n\taddRows(data, pos, index){\r\n\t\tvar rows = [];\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tpos = this.findAddRowPos(pos);\r\n\t\t\t\r\n\t\t\tif(!Array.isArray(data)){\r\n\t\t\t\tdata = [data];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif((typeof index == \"undefined\" && pos) || (typeof index !== \"undefined\" && !pos)){\r\n\t\t\t\tdata.reverse();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdata.forEach((item, i) => {\r\n\t\t\t\tvar row = this.addRow(item, pos, index, true);\r\n\t\t\t\trows.push(row);\r\n\t\t\t\tthis.dispatch(\"row-added\", row, data, pos, index);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.refreshActiveData(false, false, true);\r\n\t\t\t\r\n\t\t\tthis.regenerateRowPositions();\r\n\t\t\t\r\n\t\t\tif(rows.length){\r\n\t\t\t\tthis._clearPlaceholder();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tresolve(rows);\r\n\t\t});\r\n\t}\r\n\t\r\n\tfindAddRowPos(pos){\r\n\t\tif(typeof pos === \"undefined\"){\r\n\t\t\tpos = this.table.options.addRowPos;\r\n\t\t}\r\n\t\t\r\n\t\tif(pos === \"pos\"){\r\n\t\t\tpos = true;\r\n\t\t}\r\n\t\t\r\n\t\tif(pos === \"bottom\"){\r\n\t\t\tpos = false;\r\n\t\t}\r\n\t\t\r\n\t\treturn pos;\r\n\t}\r\n\t\r\n\taddRowActual(data, pos, index, blockRedraw){\r\n\t\tvar row = data instanceof Row ? data : new Row(data || {}, this),\r\n\t\ttop = this.findAddRowPos(pos),\r\n\t\tallIndex = -1,\r\n\t\tactiveIndex, chainResult;\r\n\t\t\r\n\t\tif(!index){\r\n\t\t\tchainResult = this.chain(\"row-adding-position\", [row, top], null, {index, top});\r\n\t\t\t\r\n\t\t\tindex = chainResult.index;\r\n\t\t\ttop = chainResult.top;\r\n\t\t}\r\n\t\t\r\n\t\tif(typeof index !== \"undefined\"){\r\n\t\t\tindex = this.findRow(index);\r\n\t\t}\r\n\t\t\r\n\t\tindex = this.chain(\"row-adding-index\", [row, index, top], null, index);\r\n\t\t\r\n\t\tif(index){\r\n\t\t\tallIndex = this.rows.indexOf(index);\r\n\t\t}\r\n\t\t\r\n\t\tif(index && allIndex > -1){\r\n\t\t\tactiveIndex = this.activeRows.indexOf(index);\r\n\t\t\t\r\n\t\t\tthis.displayRowIterator(function(rows){\r\n\t\t\t\tvar displayIndex = rows.indexOf(index);\r\n\t\t\t\t\r\n\t\t\t\tif(displayIndex > -1){\r\n\t\t\t\t\trows.splice((top ? displayIndex : displayIndex + 1), 0, row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif(activeIndex > -1){\r\n\t\t\t\tthis.activeRows.splice((top ? activeIndex : activeIndex + 1), 0, row);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.rows.splice((top ? allIndex : allIndex + 1), 0, row);\r\n\t\t\t\r\n\t\t}else{\r\n\t\t\t\r\n\t\t\tif(top){\r\n\t\t\t\t\r\n\t\t\t\tthis.displayRowIterator(function(rows){\r\n\t\t\t\t\trows.unshift(row);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.activeRows.unshift(row);\r\n\t\t\t\tthis.rows.unshift(row);\r\n\t\t\t}else{\r\n\t\t\t\tthis.displayRowIterator(function(rows){\r\n\t\t\t\t\trows.push(row);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.activeRows.push(row);\r\n\t\t\t\tthis.rows.push(row);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.setActiveRows(this.activeRows);\r\n\t\t\r\n\t\tthis.dispatchExternal(\"rowAdded\", row.getComponent());\r\n\t\t\r\n\t\tif(this.subscribedExternal(\"dataChanged\")){\r\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\r\n\t\t}\r\n\t\t\r\n\t\tif(!blockRedraw){\r\n\t\t\tthis.reRenderInPosition();\r\n\t\t}\r\n\t\t\r\n\t\treturn row;\r\n\t}\r\n\t\r\n\tmoveRow(from, to, after){\r\n\t\tthis.dispatch(\"row-move\", from, to, after);\r\n\t\t\r\n\t\tthis.moveRowActual(from, to, after);\r\n\t\t\r\n\t\tthis.regenerateRowPositions();\r\n\t\t\r\n\t\tthis.dispatch(\"row-moved\", from, to, after);\r\n\t\tthis.dispatchExternal(\"rowMoved\", from.getComponent());\r\n\t}\r\n\t\r\n\tmoveRowActual(from, to, after){\r\n\t\tthis.moveRowInArray(this.rows, from, to, after);\r\n\t\tthis.moveRowInArray(this.activeRows, from, to, after);\r\n\t\t\r\n\t\tthis.displayRowIterator((rows) => {\r\n\t\t\tthis.moveRowInArray(rows, from, to, after);\r\n\t\t});\r\n\t\t\r\n\t\tthis.dispatch(\"row-moving\", from, to, after);\r\n\t}\r\n\t\r\n\tmoveRowInArray(rows, from, to, after){\r\n\t\tvar\tfromIndex, toIndex, start, end;\r\n\t\t\r\n\t\tif(from !== to){\r\n\t\t\t\r\n\t\t\tfromIndex = rows.indexOf(from);\r\n\t\t\t\r\n\t\t\tif (fromIndex > -1) {\r\n\t\t\t\t\r\n\t\t\t\trows.splice(fromIndex, 1);\r\n\t\t\t\t\r\n\t\t\t\ttoIndex = rows.indexOf(to);\r\n\t\t\t\t\r\n\t\t\t\tif (toIndex > -1) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(after){\r\n\t\t\t\t\t\trows.splice(toIndex+1, 0, from);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trows.splice(toIndex, 0, from);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\trows.splice(fromIndex, 0, from);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//restyle rows\r\n\t\t\tif(rows === this.getDisplayRows()){\r\n\t\t\t\t\r\n\t\t\t\tstart = fromIndex < toIndex ? fromIndex : toIndex;\r\n\t\t\t\tend = toIndex > fromIndex ? toIndex : fromIndex +1;\r\n\t\t\t\t\r\n\t\t\t\tfor(let i = start; i <= end; i++){\r\n\t\t\t\t\tif(rows[i]){\r\n\t\t\t\t\t\tthis.styleRow(rows[i], i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tclearData(){\r\n\t\tthis.setData([]);\r\n\t}\r\n\t\r\n\tgetRowIndex(row){\r\n\t\treturn this.findRowIndex(row, this.rows);\r\n\t}\r\n\t\r\n\tgetDisplayRowIndex(row){\r\n\t\tvar index = this.getDisplayRows().indexOf(row);\r\n\t\treturn index > -1 ? index : false;\r\n\t}\r\n\t\r\n\tnextDisplayRow(row, rowOnly){\r\n\t\tvar index = this.getDisplayRowIndex(row),\r\n\t\tnextRow = false;\r\n\t\t\r\n\t\t\r\n\t\tif(index !== false && index < this.displayRowsCount -1){\r\n\t\t\tnextRow = this.getDisplayRows()[index+1];\r\n\t\t}\r\n\t\t\r\n\t\tif(nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")){\r\n\t\t\treturn this.nextDisplayRow(nextRow, rowOnly);\r\n\t\t}\r\n\t\t\r\n\t\treturn nextRow;\r\n\t}\r\n\t\r\n\tprevDisplayRow(row, rowOnly){\r\n\t\tvar index = this.getDisplayRowIndex(row),\r\n\t\tprevRow = false;\r\n\t\t\r\n\t\tif(index){\r\n\t\t\tprevRow = this.getDisplayRows()[index-1];\r\n\t\t}\r\n\t\t\r\n\t\tif(rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")){\r\n\t\t\treturn this.prevDisplayRow(prevRow, rowOnly);\r\n\t\t}\r\n\t\t\r\n\t\treturn prevRow;\r\n\t}\r\n\t\r\n\tfindRowIndex(row, list){\r\n\t\tvar rowIndex;\r\n\t\t\r\n\t\trow = this.findRow(row);\r\n\t\t\r\n\t\tif(row){\r\n\t\t\trowIndex = list.indexOf(row);\r\n\t\t\t\r\n\t\t\tif(rowIndex > -1){\r\n\t\t\t\treturn rowIndex;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tgetData(active, transform){\r\n\t\tvar output = [],\r\n\t\trows = this.getRows(active);\r\n\t\t\r\n\t\trows.forEach(function(row){\r\n\t\t\tif(row.type == \"row\"){\r\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tgetComponents(active){\r\n\t\tvar\toutput = [],\r\n\t\trows = this.getRows(active);\r\n\t\t\r\n\t\trows.forEach(function(row){\r\n\t\t\toutput.push(row.getComponent());\r\n\t\t});\r\n\t\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tgetDataCount(active){\r\n\t\tvar rows = this.getRows(active);\r\n\t\t\r\n\t\treturn rows.length;\r\n\t}\r\n\t\r\n\tscrollHorizontal(left){\r\n\t\tthis.scrollLeft = left;\r\n\t\tthis.element.scrollLeft = left;\r\n\t\t\r\n\t\tthis.dispatch(\"scroll-horizontal\", left);\r\n\t}\r\n\t\r\n\tregisterDataPipelineHandler(handler, priority){\r\n\t\tif(typeof priority !== \"undefined\"){\r\n\t\t\tthis.dataPipeline.push({handler, priority});\r\n\t\t\tthis.dataPipeline.sort((a, b) => {\r\n\t\t\t\treturn a.priority - b.priority;\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Data pipeline handlers must have a priority in order to be registered\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tregisterDisplayPipelineHandler(handler, priority){\r\n\t\tif(typeof priority !== \"undefined\"){\r\n\t\t\tthis.displayPipeline.push({handler, priority});\r\n\t\t\tthis.displayPipeline.sort((a, b) => {\r\n\t\t\t\treturn a.priority - b.priority;\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Display pipeline handlers must have a priority in order to be registered\");\r\n\t\t}\r\n\t}\r\n\t\r\n\t//set active data set\r\n\trefreshActiveData(handler, skipStage, renderInPosition){\r\n\t\tvar table = this.table,\r\n\t\tstage = \"\",\r\n\t\tindex = 0,\r\n\t\tcascadeOrder = [\"all\", \"dataPipeline\", \"display\", \"displayPipeline\", \"end\"];\r\n\t\t\r\n\t\t\r\n\t\tif(typeof handler === \"function\"){\r\n\t\t\tindex = this.dataPipeline.findIndex((item) => {\r\n\t\t\t\treturn item.handler === handler;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif(index > -1){\r\n\t\t\t\tstage = \"dataPipeline\";\r\n\t\t\t\t\r\n\t\t\t\tif(skipStage){\r\n\t\t\t\t\tif(index == this.dataPipeline.length - 1){\r\n\t\t\t\t\t\tstage = \"display\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tindex = this.displayPipeline.findIndex((item) => {\r\n\t\t\t\t\treturn item.handler === handler;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif(index > -1){\r\n\t\t\t\t\tstage = \"displayPipeline\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(skipStage){\r\n\t\t\t\t\t\tif(index == this.displayPipeline.length - 1){\r\n\t\t\t\t\t\t\tstage = \"end\";\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.error(\"Unable to refresh data, invalid handler provided\", handler);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tstage = handler || \"all\";\r\n\t\t\tindex = 0;\r\n\t\t}\r\n\t\t\r\n\t\tif(this.redrawBlock){\r\n\t\t\tif(!this.redrawBlockRestoreConfig || (this.redrawBlockRestoreConfig && ((this.redrawBlockRestoreConfig.stage === stage && index < this.redrawBlockRestoreConfig.index) || (cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage))))){\r\n\t\t\t\tthis.redrawBlockRestoreConfig = {\r\n\t\t\t\t\thandler: handler,\r\n\t\t\t\t\tskipStage: skipStage,\r\n\t\t\t\t\trenderInPosition: renderInPosition,\r\n\t\t\t\t\tstage:stage,\r\n\t\t\t\t\tindex:index,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn;\r\n\t\t}else{\r\n\t\t\tif(Helpers.elVisible(this.element)){\r\n\t\t\t\tif(renderInPosition){\r\n\t\t\t\t\tthis.reRenderInPosition(this.refreshPipelines.bind(this, handler, stage, index, renderInPosition));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(!handler){\r\n\t\t\t\t\t\tthis.table.columnManager.renderer.renderColumns();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.renderTable();\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(table.options.layoutColumnsOnNewData){\r\n\t\t\t\t\t\tthis.table.columnManager.redraw(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.dispatch(\"data-refreshed\");\r\n\t\t}\r\n\t}\r\n\t\r\n\trefreshPipelines(handler, stage, index, renderInPosition){\r\n\t\tthis.dispatch(\"data-refreshing\");\r\n\t\t\r\n\t\tif(!handler){\r\n\t\t\tthis.activeRowsPipeline[0] = this.rows.slice(0);\r\n\t\t}\r\n\t\t\r\n\t\t//cascade through data refresh stages\r\n\t\tswitch(stage){\r\n\t\t\tcase \"all\":\r\n\t\t\t//handle case where all data needs refreshing\r\n\t\t\t\r\n\t\t\tcase \"dataPipeline\":\r\n\t\t\t\r\n\t\t\t\tfor(let i = index; i < this.dataPipeline.length; i++){\r\n\t\t\t\t\tlet result = this.dataPipeline[i].handler(this.activeRowsPipeline[i].slice(0));\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.activeRowsPipeline[i + 1] = result || this.activeRowsPipeline[i].slice(0);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);\r\n\t\t\t\t\r\n\t\t\tcase \"display\":\r\n\t\t\t\tindex = 0;\r\n\t\t\t\tthis.resetDisplayRows();\r\n\t\t\t\t\r\n\t\t\tcase \"displayPipeline\":\r\n\t\t\t\tfor(let i = index; i < this.displayPipeline.length; i++){\r\n\t\t\t\t\tlet result = this.displayPipeline[i].handler((i ? this.getDisplayRows(i - 1) : this.activeRows).slice(0), renderInPosition);\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.setDisplayRows(result || this.getDisplayRows(i - 1).slice(0), i);\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\tcase \"end\":\r\n\t\t\t\t//case to handle scenario when trying to skip past end stage\r\n\t\t\t\tthis.regenerateRowPositions();\r\n\t\t}\r\n\t}\r\n\t\r\n\t//regenerate row positions\r\n\tregenerateRowPositions(){\r\n\t\tvar rows = this.getDisplayRows();\r\n\t\tvar index = 1;\r\n\t\t\r\n\t\trows.forEach((row) => {\r\n\t\t\tif (row.type === \"row\"){\r\n\t\t\t\trow.setPosition(index);\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tsetActiveRows(activeRows){\r\n\t\tthis.activeRows = activeRows;\r\n\t\tthis.activeRowsCount = this.activeRows.length;\r\n\t}\r\n\t\r\n\t//reset display rows array\r\n\tresetDisplayRows(){\r\n\t\tthis.displayRows = [];\r\n\t\t\r\n\t\tthis.displayRows.push(this.activeRows.slice(0));\r\n\t\t\r\n\t\tthis.displayRowsCount = this.displayRows[0].length;\r\n\t}\r\n\t\r\n\tgetNextDisplayIndex(){\r\n\t\treturn this.displayRows.length;\r\n\t}\r\n\t\r\n\t//set display row pipeline data\r\n\tsetDisplayRows(displayRows, index){\r\n\t\t\r\n\t\tvar output = true;\r\n\t\t\r\n\t\tif(index && typeof this.displayRows[index] != \"undefined\"){\r\n\t\t\tthis.displayRows[index] = displayRows;\r\n\t\t\toutput = true;\r\n\t\t}else{\r\n\t\t\tthis.displayRows.push(displayRows);\r\n\t\t\toutput = index = this.displayRows.length -1;\r\n\t\t}\r\n\t\t\r\n\t\tif(index == this.displayRows.length -1){\r\n\t\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\r\n\t\t}\r\n\t\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tgetDisplayRows(index){\r\n\t\tif(typeof index == \"undefined\"){\r\n\t\t\treturn this.displayRows.length ? this.displayRows[this.displayRows.length -1] : [];\r\n\t\t}else{\r\n\t\t\treturn this.displayRows[index] || [];\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetVisibleRows(chain, viewable){\r\n\t\tvar rows =  Object.assign([], this.renderer.visibleRows(!viewable));\r\n\t\t\r\n\t\tif(chain){\r\n\t\t\trows = this.chain(\"rows-visible\", [viewable], rows, rows);\r\n\t\t}\r\n\t\t\r\n\t\treturn rows;\r\n\t}\r\n\t\r\n\t//repeat action across display rows\r\n\tdisplayRowIterator(callback){\r\n\t\tthis.activeRowsPipeline.forEach(callback);\r\n\t\tthis.displayRows.forEach(callback);\r\n\t\t\r\n\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\r\n\t}\r\n\t\r\n\t//return only actual rows (not group headers etc)\r\n\tgetRows(type){\r\n\t\tvar rows;\r\n\t\t\r\n\t\tswitch(type){\r\n\t\t\tcase \"active\":\r\n\t\t\t\trows = this.activeRows;\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase \"display\":\r\n\t\t\t\trows = this.table.rowManager.getDisplayRows();\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase \"visible\":\r\n\t\t\t\trows = this.getVisibleRows(false, true);\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tdefault:\r\n\t\t\t\trows = this.chain(\"rows-retrieve\", type, null, this.rows) || this.rows;\r\n\t\t}\r\n\t\t\r\n\t\treturn rows;\r\n\t}\r\n\t\r\n\t///////////////// Table Rendering /////////////////\r\n\t//trigger rerender of table in current position\r\n\treRenderInPosition(callback){\r\n\t\tif(this.redrawBlock){\r\n\t\t\tif(callback){\r\n\t\t\t\tcallback();\r\n\t\t\t}else{\r\n\t\t\t\tthis.redrawBlockRenderInPosition = true;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.dispatchExternal(\"renderStarted\");\r\n\t\t\t\r\n\t\t\tthis.renderer.rerenderRows(callback);\r\n\r\n\t\t\tif(!this.fixedHeight){\r\n\t\t\t\tthis.adjustTableSize();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.dispatchExternal(\"renderComplete\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tinitializeRenderer(){\r\n\t\tvar renderClass;\r\n\t\t\r\n\t\tvar renderers = {\r\n\t\t\t\"virtual\": RendererVirtualDomVertical,\r\n\t\t\t\"basic\": RendererBasicVertical,\r\n\t\t};\r\n\t\t\r\n\t\tif(typeof this.table.options.renderVertical === \"string\"){\r\n\t\t\trenderClass = renderers[this.table.options.renderVertical];\r\n\t\t}else{\r\n\t\t\trenderClass = this.table.options.renderVertical;\r\n\t\t}\r\n\t\t\r\n\t\tif(renderClass){\r\n\t\t\tthis.renderMode = this.table.options.renderVertical;\r\n\t\t\t\r\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\r\n\t\t\tthis.renderer.initialize();\r\n\t\t\t\r\n\t\t\tif((this.table.element.clientHeight || this.table.options.height)){\r\n\t\t\t\tthis.fixedHeight = true;\r\n\t\t\t}else{\r\n\t\t\t\tthis.fixedHeight = false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Unable to find matching renderer:\", this.table.options.renderVertical);\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetRenderMode(){\r\n\t\treturn this.renderMode;\r\n\t}\r\n\t\r\n\trenderTable(){\r\n\t\tthis.dispatchExternal(\"renderStarted\");\r\n\t\t\r\n\t\tthis.element.scrollTop = 0;\r\n\t\t\r\n\t\tthis._clearTable();\r\n\t\t\r\n\t\tif(this.displayRowsCount){\r\n\t\t\tthis.renderer.renderRows();\r\n\t\t\t\r\n\t\t\tif(this.firstRender){\r\n\t\t\t\tthis.firstRender = false;\r\n\t\t\t\tthis.layoutRefresh(true);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.renderEmptyScroll();\r\n\t\t}\r\n\t\t\r\n\t\tif(!this.fixedHeight){\r\n\t\t\tthis.adjustTableSize();\r\n\t\t}\r\n\t\t\r\n\t\tthis.dispatch(\"table-layout\");\r\n\t\t\r\n\t\tif(!this.displayRowsCount){\r\n\t\t\tthis._showPlaceholder();\r\n\t\t}\r\n\t\t\r\n\t\tthis.dispatchExternal(\"renderComplete\");\r\n\t}\r\n\t\r\n\t//show scrollbars on empty table div\r\n\trenderEmptyScroll(){\r\n\t\tif(this.placeholder){\r\n\t\t\tthis.tableElement.style.display = \"none\";\r\n\t\t}else{\r\n\t\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\r\n\t\t\t// this.tableElement.style.minHeight = \"1px\";\r\n\t\t\t// this.tableElement.style.visibility = \"hidden\";\r\n\t\t}\r\n\t}\r\n\t\r\n\t_clearTable(){\t\r\n\t\tthis._clearPlaceholder();\r\n\t\t\r\n\t\tthis.scrollTop = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\r\n\t\t// clear empty table placeholder min\r\n\t\tthis.tableElement.style.minWidth = \"\";\r\n\t\t\r\n\t\tthis.renderer.clearRows();\r\n\t}\r\n\t\r\n\t_showPlaceholder(){\r\n\t\tif(this.placeholder){\r\n\t\t\tthis.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\r\n\t\t\t\r\n\t\t\tthis.getElement().appendChild(this.placeholder);\r\n\t\t\tthis._positionPlaceholder();\r\n\t\t}\r\n\t}\r\n\t\r\n\t_clearPlaceholder(){\r\n\t\tif(this.placeholder && this.placeholder.parentNode){\r\n\t\t\tthis.placeholder.parentNode.removeChild(this.placeholder);\r\n\t\t}\r\n\t}\r\n\t\r\n\t_positionPlaceholder(){\r\n\t\tif(this.placeholder && this.placeholder.parentNode){\r\n\t\t\tthis.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\r\n\t\t\tthis.placeholderContents.style.width = this.table.rowManager.element.clientWidth + \"px\";\r\n\t\t\tthis.placeholderContents.style.marginLeft = this.scrollLeft + \"px\";\r\n\t\t}\r\n\t}\r\n\t\r\n\tstyleRow(row, index){\r\n\t\tvar rowEl = row.getElement();\r\n\t\t\r\n\t\tif(index % 2){\r\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\r\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\r\n\t\t}else{\r\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\r\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\r\n\t\t}\r\n\t}\r\n\t\r\n\t//normalize height of active rows\r\n\tnormalizeHeight(){\r\n\t\tthis.activeRows.forEach(function(row){\r\n\t\t\trow.normalizeHeight();\r\n\t\t});\r\n\t}\r\n\t\r\n\t//adjust the height of the table holder to fit in the Tabulator element\r\n\tadjustTableSize(){\r\n\t\tvar initialHeight = this.element.clientHeight, minHeight;\r\n\t\t\r\n\t\tif(this.renderer.verticalFillMode === \"fill\"){\r\n\t\t\tlet otherHeight =  Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height + (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external ? this.table.footerManager.getElement().getBoundingClientRect().height : 0));\r\n\t\t\t\r\n\t\t\tif(this.fixedHeight){\r\n\t\t\t\tminHeight = isNaN(this.table.options.minHeight) ? this.table.options.minHeight : this.table.options.minHeight + \"px\";\r\n\t\t\t\t\r\n\t\t\t\tthis.element.style.minHeight = minHeight || \"calc(100% - \" + otherHeight + \"px)\";\r\n\t\t\t\tthis.element.style.height = \"calc(100% - \" + otherHeight + \"px)\";\r\n\t\t\t\tthis.element.style.maxHeight = \"calc(100% - \" + otherHeight + \"px)\";\r\n\t\t\t}else{\r\n\t\t\t\tthis.element.style.height = \"\";\r\n\t\t\t\tthis.element.style.height = (this.table.element.clientHeight - otherHeight) + \"px\";\r\n\t\t\t\tthis.element.scrollTop = this.scrollTop;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.renderer.resize();\r\n\t\t\t\r\n\t\t\t//check if the table has changed size when dealing with variable height tables\r\n\t\t\tif(!this.fixedHeight && initialHeight != this.element.clientHeight){\r\n\t\t\t\tif(this.subscribed(\"table-resize\")){\r\n\t\t\t\t\tthis.dispatch(\"table-resize\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.redraw();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis._positionPlaceholder();\r\n\t}\r\n\t\r\n\t//reinitialize all rows\r\n\treinitialize(){\r\n\t\tthis.rows.forEach(function(row){\r\n\t\t\trow.reinitialize(true);\r\n\t\t});\r\n\t}\r\n\t\r\n\t//prevent table from being redrawn\r\n\tblockRedraw (){\r\n\t\tthis.redrawBlock = true;\r\n\t\tthis.redrawBlockRestoreConfig = false;\r\n\t}\r\n\t\r\n\t//restore table redrawing\r\n\trestoreRedraw (){\r\n\t\tthis.redrawBlock = false;\r\n\t\t\r\n\t\tif(this.redrawBlockRestoreConfig){\r\n\t\t\tthis.refreshActiveData(this.redrawBlockRestoreConfig.handler, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition);\r\n\t\t\t\r\n\t\t\tthis.redrawBlockRestoreConfig = false;\r\n\t\t}else{\r\n\t\t\tif(this.redrawBlockRenderInPosition){\r\n\t\t\t\tthis.reRenderInPosition();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.redrawBlockRenderInPosition = false;\r\n\t}\r\n\t\r\n\t//redraw table\r\n\tredraw (force){\r\n\t\tvar left = this.scrollLeft;\r\n\t\t\r\n\t\tthis.adjustTableSize();\r\n\t\t\r\n\t\tthis.table.tableWidth = this.table.element.clientWidth;\r\n\t\t\r\n\t\tif(!force){\r\n\t\t\tthis.reRenderInPosition();\r\n\t\t\tthis.scrollHorizontal(left);\r\n\t\t}else{\r\n\t\t\tthis.renderTable();\r\n\t\t}\r\n\t}\r\n\t\r\n\tresetScroll(){\r\n\t\tthis.element.scrollLeft = 0;\r\n\t\tthis.element.scrollTop = 0;\r\n\t\t\r\n\t\tif(this.table.browser === \"ie\"){\r\n\t\t\tvar event = document.createEvent(\"Event\");\r\n\t\t\tevent.initEvent(\"scroll\", false, true);\r\n\t\t\tthis.element.dispatchEvent(event);\r\n\t\t}else{\r\n\t\t\tthis.element.dispatchEvent(new Event('scroll'));\r\n\t\t}\r\n\t}\r\n}","import CoreFeature from './CoreFeature.js';\r\n\r\nexport default class FooterManager extends CoreFeature{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.active = false;\r\n\t\tthis.element = this.createElement(); //containing element\r\n\t\tthis.containerElement = this.createContainerElement(); //containing element\r\n\t\tthis.external = false;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.initializeElement();\r\n\t}\r\n\r\n\tcreateElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-footer\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\t\r\n\tcreateContainerElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-footer-contents\");\r\n\r\n\t\tthis.element.appendChild(el);\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tinitializeElement(){\r\n\t\tif(this.table.options.footerElement){\r\n\r\n\t\t\tswitch(typeof this.table.options.footerElement){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\t\tif(this.table.options.footerElement[0] === \"<\"){\r\n\t\t\t\t\t\tthis.containerElement.innerHTML = this.table.options.footerElement;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.external = true;\r\n\t\t\t\t\t\tthis.containerElement = document.querySelector(this.table.options.footerElement);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthis.element = this.table.options.footerElement;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tappend(element){\r\n\t\tthis.activate();\r\n\r\n\t\tthis.containerElement.appendChild(element);\r\n\t\tthis.table.rowManager.adjustTableSize();\r\n\t}\r\n\r\n\tprepend(element){\r\n\t\tthis.activate();\r\n\r\n\t\tthis.element.insertBefore(element, this.element.firstChild);\r\n\t\tthis.table.rowManager.adjustTableSize();\r\n\t}\r\n\r\n\tremove(element){\r\n\t\telement.parentNode.removeChild(element);\r\n\t\tthis.deactivate();\r\n\t}\r\n\r\n\tdeactivate(force){\r\n\t\tif(!this.element.firstChild || force){\r\n\t\t\tif(!this.external){\r\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\t}\r\n\t\t\tthis.active = false;\r\n\t\t}\r\n\t}\r\n\r\n\tactivate(){\r\n\t\tif(!this.active){\r\n\t\t\tthis.active = true;\r\n\t\t\tif(!this.external){\r\n\t\t\t\tthis.table.element.appendChild(this.getElement());\r\n\t\t\t\tthis.table.element.style.display = '';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tredraw(){\r\n\t\tthis.dispatch(\"footer-redraw\");\r\n\t}\r\n}","import CoreFeature from '../CoreFeature.js';\r\nimport Row from '../row/Row.js';\r\n\r\nexport default class InteractionManager extends CoreFeature {\r\n\t\r\n\tconstructor (table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.el = null;\r\n\t\t\r\n\t\tthis.abortClasses = [\"tabulator-headers\", \"tabulator-table\"];\r\n\t\t\r\n\t\tthis.previousTargets = {};\r\n\t\t\r\n\t\tthis.listeners = [\r\n\t\t\t\"click\",\r\n\t\t\t\"dblclick\",\r\n\t\t\t\"contextmenu\",\r\n\t\t\t\"mouseenter\",\r\n\t\t\t\"mouseleave\",\r\n\t\t\t\"mouseover\",\r\n\t\t\t\"mouseout\",\r\n\t\t\t\"mousemove\",\r\n\t\t\t\"touchstart\",\r\n\t\t\t\"touchend\",\r\n\t\t];\r\n\t\t\r\n\t\tthis.componentMap = {\r\n\t\t\t\"tabulator-cell\":\"cell\",\r\n\t\t\t\"tabulator-row\":\"row\",\r\n\t\t\t\"tabulator-group\":\"group\",\r\n\t\t\t\"tabulator-col\":\"column\",\r\n\t\t};\r\n\t\t\r\n\t\tthis.pseudoTrackers = {\r\n\t\t\t\"row\":{\r\n\t\t\t\tsubscriber:null,\r\n\t\t\t\ttarget:null,\r\n\t\t\t},\r\n\t\t\t\"cell\":{\r\n\t\t\t\tsubscriber:null,\r\n\t\t\t\ttarget:null,\r\n\t\t\t},\r\n\t\t\t\"group\":{\r\n\t\t\t\tsubscriber:null,\r\n\t\t\t\ttarget:null,\r\n\t\t\t},\r\n\t\t\t\"column\":{\r\n\t\t\t\tsubscriber:null,\r\n\t\t\t\ttarget:null,\r\n\t\t\t},\r\n\t\t};\r\n\t\t\r\n\t\tthis.pseudoTracking = false;\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tthis.el = this.table.element;\r\n\t\t\r\n\t\tthis.buildListenerMap();\r\n\t\tthis.bindSubscriptionWatchers();\r\n\t}\r\n\t\r\n\tbuildListenerMap(){\r\n\t\tvar listenerMap = {};\r\n\t\t\r\n\t\tthis.listeners.forEach((listener) => {\r\n\t\t\tlistenerMap[listener] = {\r\n\t\t\t\thandler:null,\r\n\t\t\t\tcomponents:[],\r\n\t\t\t};\r\n\t\t});\r\n\t\t\r\n\t\tthis.listeners = listenerMap;\r\n\t}\r\n\t\r\n\tbindPseudoEvents(){\r\n\t\tObject.keys(this.pseudoTrackers).forEach((key) => {\r\n\t\t\tthis.pseudoTrackers[key].subscriber = this.pseudoMouseEnter.bind(this, key);\r\n\t\t\tthis.subscribe(key + \"-mouseover\", this.pseudoTrackers[key].subscriber);\r\n\t\t});\r\n\t\t\r\n\t\tthis.pseudoTracking = true;\r\n\t}\r\n\t\r\n\tpseudoMouseEnter(key, e, target){\r\n\t\tif(this.pseudoTrackers[key].target !== target){\r\n\t\t\t\r\n\t\t\tif(this.pseudoTrackers[key].target){\r\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, this.pseudoTrackers[key].target);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.pseudoMouseLeave(key, e);\r\n\t\t\t\r\n\t\t\tthis.pseudoTrackers[key].target = target;\r\n\t\t\t\r\n\t\t\tthis.dispatch(key + \"-mouseenter\", e, target);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpseudoMouseLeave(key, e){\r\n\t\tvar leaveList = Object.keys(this.pseudoTrackers),\r\n\t\tlinkedKeys = {\r\n\t\t\t\"row\":[\"cell\"],\r\n\t\t\t\"cell\":[\"row\"],\r\n\t\t};\r\n\t\t\r\n\t\tleaveList = leaveList.filter((item) => {\r\n\t\t\tvar links = linkedKeys[key];\r\n\t\t\treturn item !== key && (!links || (links && !links.includes(item)));\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\tleaveList.forEach((key) => {\r\n\t\t\tvar target = this.pseudoTrackers[key].target;\r\n\t\t\t\r\n\t\t\tif(this.pseudoTrackers[key].target){\r\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, target);\r\n\t\t\t\t\r\n\t\t\t\tthis.pseudoTrackers[key].target = null;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t\r\n\tbindSubscriptionWatchers(){\r\n\t\tvar listeners = Object.keys(this.listeners),\r\n\t\tcomponents = Object.values(this.componentMap);\r\n\t\t\r\n\t\tfor(let comp of components){\r\n\t\t\tfor(let listener of listeners){\r\n\t\t\t\tlet key = comp + \"-\" + listener;\r\n\t\t\t\t\r\n\t\t\t\tthis.subscriptionChange(key, this.subscriptionChanged.bind(this, comp, listener));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.subscribe(\"table-destroy\", this.clearWatchers.bind(this));\r\n\t}\r\n\t\r\n\tsubscriptionChanged(component, key, added){\r\n\t\tvar listener = this.listeners[key].components,\r\n\t\tindex = listener.indexOf(component),\r\n\t\tchanged = false;\r\n\t\t\r\n\t\tif(added){\r\n\t\t\tif(index === -1){\r\n\t\t\t\tlistener.push(component);\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(!this.subscribed(component + \"-\" + key)){\r\n\t\t\t\tif(index > -1){\r\n\t\t\t\t\tlistener.splice(index, 1);\r\n\t\t\t\t\tchanged = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif((key === \"mouseenter\" || key === \"mouseleave\") && !this.pseudoTracking){\r\n\t\t\tthis.bindPseudoEvents();\r\n\t\t}\r\n\t\t\r\n\t\tif(changed){\r\n\t\t\tthis.updateEventListeners();\r\n\t\t}\r\n\t}\r\n\t\r\n\tupdateEventListeners(){\r\n\t\tfor(let key in this.listeners){\r\n\t\t\tlet listener = this.listeners[key];\r\n\t\t\t\r\n\t\t\tif(listener.components.length){\r\n\t\t\t\tif(!listener.handler){\r\n\t\t\t\t\tlistener.handler = this.track.bind(this, key);\r\n\t\t\t\t\tthis.el.addEventListener(key, listener.handler);\r\n\t\t\t\t\t// this.el.addEventListener(key, listener.handler, {passive: true})\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(listener.handler){\r\n\t\t\t\t\tthis.el.removeEventListener(key, listener.handler);\r\n\t\t\t\t\tlistener.handler = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\ttrack(type, e){\r\n\t\tvar path = (e.composedPath && e.composedPath()) || e.path;\r\n\t\t\r\n\t\tvar targets = this.findTargets(path);\r\n\t\ttargets = this.bindComponents(type, targets);\r\n\t\t\r\n\t\tthis.triggerEvents(type, e, targets);\r\n\t\t\r\n\t\tif(this.pseudoTracking && (type == \"mouseover\" || type == \"mouseleave\") && !Object.keys(targets).length){\r\n\t\t\tthis.pseudoMouseLeave(\"none\", e);\r\n\t\t}\r\n\t}\r\n\t\r\n\tfindTargets(path){\r\n\t\tvar targets = {};\r\n\t\t\r\n\t\tlet componentMap = Object.keys(this.componentMap);\r\n\t\t\r\n\t\tfor (let el of path) {\r\n\t\t\tlet classList = el.classList ? [...el.classList] : [];\r\n\t\t\t\r\n\t\t\tlet abort = classList.filter((item) => {\r\n\t\t\t\treturn this.abortClasses.includes(item);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif(abort.length){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet elTargets = classList.filter((item) => {\r\n\t\t\t\treturn componentMap.includes(item);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tfor (let target of elTargets) {\r\n\t\t\t\tif(!targets[this.componentMap[target]]){\r\n\t\t\t\t\ttargets[this.componentMap[target]] = el;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(targets.group && targets.group === targets.row){\r\n\t\t\tdelete targets.row;\r\n\t\t}\r\n\t\t\r\n\t\treturn targets;\r\n\t}\r\n\t\r\n\tbindComponents(type, targets){\r\n\t\t//ensure row component is looked up before cell\r\n\t\tvar keys = Object.keys(targets).reverse(),\r\n\t\tlistener = this.listeners[type],\r\n\t\ttargetMatches = {};\r\n\t\t\r\n\t\tfor(let key of keys){\r\n\t\t\tlet component;\r\n\t\t\tlet target = targets[key];\r\n\t\t\tlet previousTarget = this.previousTargets[key];\r\n\t\t\t\r\n\t\t\tif(previousTarget && previousTarget.target === target){\r\n\t\t\t\tcomponent = previousTarget.component;\r\n\t\t\t}else{\r\n\t\t\t\tswitch(key){\r\n\t\t\t\t\tcase \"row\":\r\n\t\t\t\t\tcase \"group\":\r\n\t\t\t\t\t\tif(listener.components.includes(\"row\") || listener.components.includes(\"cell\") || listener.components.includes(\"group\")){\r\n\t\t\t\t\t\t\tlet rows = this.table.rowManager.getVisibleRows(true);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tcomponent = rows.find((row) => {\r\n\t\t\t\t\t\t\t\treturn row.getElement() === target;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(targets[\"row\"] && targets[\"row\"].parentNode && targets[\"row\"].parentNode.closest(\".tabulator-row\")){\r\n\t\t\t\t\t\t\t\ttargets[key] = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t\t\tcase \"column\":\r\n\t\t\t\t\t\tif(listener.components.includes(\"column\")){\r\n\t\t\t\t\t\t\tcomponent = this.table.columnManager.findColumn(target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t\t\tcase \"cell\":\r\n\t\t\t\t\t\tif(listener.components.includes(\"cell\")){\r\n\t\t\t\t\t\t\tif(targets[\"row\"] instanceof Row){\r\n\t\t\t\t\t\t\t\tcomponent = targets[\"row\"].findCell(target);\r\n\t\t\t\t\t\t\t}else{\t\r\n\t\t\t\t\t\t\t\tif(targets[\"row\"]){\r\n\t\t\t\t\t\t\t\t\tconsole.warn(\"Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(component){\r\n\t\t\t\ttargets[key] = component;\r\n\t\t\t\ttargetMatches[key] = {\r\n\t\t\t\t\ttarget:target,\r\n\t\t\t\t\tcomponent:component,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.previousTargets = targetMatches;\r\n\t\t\r\n\t\treturn targets;\r\n\t}\r\n\t\r\n\ttriggerEvents(type, e, targets){\r\n\t\tvar listener = this.listeners[type];\r\n\t\t\r\n\t\tfor(let key in targets){\r\n\t\t\tif(targets[key] && listener.components.includes(key)){\r\n\t\t\t\tthis.dispatch(key + \"-\" + type, e, targets[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tclearWatchers(){\r\n\t\tfor(let key in this.listeners){\r\n\t\t\tlet listener = this.listeners[key];\r\n\t\t\t\r\n\t\t\tif(listener.handler){\r\n\t\t\t\tthis.el.removeEventListener(key, listener.handler);\r\n\t\t\t\tlistener.handler = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","export default class ComponentFunctionBinder{\r\n\r\n\tconstructor(table){\r\n\t\tthis.table = table;\r\n\r\n\t\tthis.bindings = {};\r\n\t}\r\n\r\n\tbind(type, funcName, handler){\r\n\t\tif(!this.bindings[type]){\r\n\t\t\tthis.bindings[type] = {};\r\n\t\t}\r\n\r\n\t\tif(this.bindings[type][funcName]){\r\n\t\t\tconsole.warn(\"Unable to bind component handler, a matching function name is already bound\", type, funcName, handler);\r\n\t\t}else{\r\n\t\t\tthis.bindings[type][funcName] = handler;\r\n\t\t}\r\n\t}\r\n\r\n\thandle(type, component, name){\r\n\t\tif(this.bindings[type] && this.bindings[type][name] && typeof this.bindings[type][name].bind === 'function'){\r\n\t\t\treturn this.bindings[type][name].bind(null, component);\r\n\t\t}else{\r\n\t\t\tif(name !== \"then\" && typeof name === \"string\" && !name.startsWith(\"_\")){\r\n\t\t\t\tif(this.table.options.debugInvalidComponentFuncs){\r\n\t\t\t\t\tconsole.error(\"The \" + type + \" component does not have a \" + name + \" function, have you checked that you have the correct Tabulator module installed?\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import CoreFeature from '../CoreFeature.js';\r\n\r\nexport default class DataLoader extends CoreFeature{\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.requestOrder = 0; //prevent requests coming out of sequence if overridden by another load request\r\n\t\tthis.loading = false;\r\n\t}\r\n\r\n\tinitialize(){}\r\n\r\n\tload(data, params, config, replace, silent, columnsChanged){\r\n\t\tvar requestNo = ++this.requestOrder;\r\n\r\n\t\tthis.dispatchExternal(\"dataLoading\", data);\r\n\r\n\t\t//parse json data to array\r\n\t\tif (data && (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0)){\r\n\t\t\tdata = JSON.parse(data);\r\n\t\t}\r\n\r\n\t\tif(this.confirm(\"data-loading\", [data, params, config, silent])){\r\n\t\t\tthis.loading = true;\r\n\r\n\t\t\tif(!silent){\r\n\t\t\t\tthis.alertLoader();\r\n\t\t\t}\r\n\r\n\t\t\t//get params for request\r\n\t\t\tparams = this.chain(\"data-params\", [data, config, silent], params || {}, params || {});\r\n\r\n\t\t\tparams = this.mapParams(params, this.table.options.dataSendParams);\r\n\r\n\t\t\tvar result = this.chain(\"data-load\", [data, params, config, silent], false, Promise.resolve([]));\r\n\t\t\t\r\n\t\t\treturn result.then((response) => {\r\n\t\t\t\tif(!Array.isArray(response) && typeof response == \"object\"){\r\n\t\t\t\t\tresponse = this.mapParams(response, this.objectInvert(this.table.options.dataReceiveParams));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar rowData = this.chain(\"data-loaded\", response, null, response);\r\n\r\n\t\t\t\tif(requestNo == this.requestOrder){\r\n\t\t\t\t\tthis.clearAlert();\r\n\r\n\t\t\t\t\tif(rowData !== false){\r\n\t\t\t\t\t\tthis.dispatchExternal(\"dataLoaded\", rowData);\r\n\t\t\t\t\t\tthis.table.rowManager.setData(rowData,  replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made\");\r\n\t\t\t\t}\r\n\t\t\t}).catch((error) => {\r\n\t\t\t\tconsole.error(\"Data Load Error: \", error);\r\n\t\t\t\tthis.dispatchExternal(\"dataLoadError\", error);\r\n\r\n\t\t\t\tif(!silent){\r\n\t\t\t\t\tthis.alertError();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.clearAlert();\r\n\t\t\t\t}, this.table.options.dataLoaderErrorTimeout);\r\n\t\t\t})\r\n\t\t\t\t.finally(() => {\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis.dispatchExternal(\"dataLoaded\", data);\r\n\r\n\t\t\tif(!data){\r\n\t\t\t\tdata = [];\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.rowManager.setData(data, replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\t}\r\n\r\n\tmapParams(params, map){\r\n\t\tvar output = {};\r\n\r\n\t\tfor(let key in params){\r\n\t\t\toutput[map.hasOwnProperty(key) ? map[key] : key] = params[key];\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tobjectInvert(obj){\r\n\t\tvar output = {};\r\n\r\n\t\tfor(let key in obj){\r\n\t\t\toutput[obj[key]] = key;\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tblockActiveLoad(){\r\n\t\tthis.requestOrder++;\r\n\t}\r\n\r\n\talertLoader(){\r\n\t\tvar shouldLoad = typeof this.table.options.dataLoader === \"function\" ? this.table.options.dataLoader() : this.table.options.dataLoader;\r\n\r\n\t\tif(shouldLoad){\r\n\t\t\tthis.table.alertManager.alert(this.table.options.dataLoaderLoading || this.langText(\"data|loading\"));\r\n\t\t}\r\n\t}\r\n\r\n\talertError(){\r\n\t\tthis.table.alertManager.alert(this.table.options.dataLoaderError || this.langText(\"data|error\"), \"error\");\r\n\t}\r\n\r\n\tclearAlert(){\r\n\t\tthis.table.alertManager.clear();\r\n\t}\r\n}","export default class ExternalEventBus {\r\n\r\n\tconstructor(table, optionsList, debug){\r\n\t\tthis.table = table;\r\n\t\tthis.events = {};\r\n\t\tthis.optionsList = optionsList || {};\r\n\t\tthis.subscriptionNotifiers = {};\r\n\r\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\r\n\t\tthis.debug = debug;\r\n\t}\r\n\r\n\tsubscriptionChange(key, callback){\r\n\t\tif(!this.subscriptionNotifiers[key]){\r\n\t\t\tthis.subscriptionNotifiers[key] = [];\r\n\t\t}\r\n\r\n\t\tthis.subscriptionNotifiers[key].push(callback);\r\n\r\n\t\tif(this.subscribed(key)){\r\n\t\t\tthis._notifySubscriptionChange(key, true);\r\n\t\t}\r\n\t}\r\n\r\n\tsubscribe(key, callback){\r\n\t\tif(!this.events[key]){\r\n\t\t\tthis.events[key] = [];\r\n\t\t}\r\n\r\n\t\tthis.events[key].push(callback);\r\n\r\n\t\tthis._notifySubscriptionChange(key, true);\r\n\t}\r\n\r\n\tunsubscribe(key, callback){\r\n\t\tvar index;\r\n\r\n\t\tif(this.events[key]){\r\n\t\t\tif(callback){\r\n\t\t\t\tindex = this.events[key].findIndex((item) => {\r\n\t\t\t\t\treturn item === callback;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(index > -1){\r\n\t\t\t\t\tthis.events[key].splice(index, 1);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tdelete this.events[key];\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._notifySubscriptionChange(key, false);\r\n\t}\r\n\r\n\tsubscribed(key){\r\n\t\treturn this.events[key] && this.events[key].length;\r\n\t}\r\n\r\n\t_notifySubscriptionChange(key, subscribed){\r\n\t\tvar notifiers = this.subscriptionNotifiers[key];\r\n\r\n\t\tif(notifiers){\r\n\t\t\tnotifiers.forEach((callback)=>{\r\n\t\t\t\tcallback(subscribed);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_dispatch(){\r\n\t\tvar args = Array.from(arguments),\r\n\t\tkey = args.shift(),\r\n\t\tresult;\r\n\r\n\t\tif(this.events[key]){\r\n\t\t\tthis.events[key].forEach((callback, i) => {\r\n\t\t\t\tlet callResult = callback.apply(this.table, args);\r\n\r\n\t\t\t\tif(!i){\r\n\t\t\t\t\tresult = callResult;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\t_debugDispatch(){\r\n\t\tvar args = Array.from(arguments),\r\n\t\tkey = args[0];\r\n\r\n\t\targs[0] = \"ExternalEvent:\" + args[0];\r\n\r\n\t\tif(this.debug === true || this.debug.includes(key)){\r\n\t\t\tconsole.log(...args);\r\n\t\t}\r\n\r\n\t\treturn this._dispatch(...arguments);\r\n\t}\r\n}","export default class InternalEventBus {\r\n\r\n\tconstructor(debug){\r\n\t\tthis.events = {};\r\n\t\tthis.subscriptionNotifiers = {};\r\n\r\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\r\n\t\tthis.chain = debug ? this._debugChain.bind(this) : this._chain.bind(this);\r\n\t\tthis.confirm = debug ? this._debugConfirm.bind(this) : this._confirm.bind(this);\r\n\t\tthis.debug = debug;\r\n\t}\r\n\r\n\tsubscriptionChange(key, callback){\r\n\t\tif(!this.subscriptionNotifiers[key]){\r\n\t\t\tthis.subscriptionNotifiers[key] = [];\r\n\t\t}\r\n\r\n\t\tthis.subscriptionNotifiers[key].push(callback);\r\n\r\n\t\tif(this.subscribed(key)){\r\n\t\t\tthis._notifySubscriptionChange(key, true);\r\n\t\t}\r\n\t}\r\n\r\n\tsubscribe(key, callback, priority = 10000){\r\n\t\tif(!this.events[key]){\r\n\t\t\tthis.events[key] = [];\r\n\t\t}\r\n\r\n\t\tthis.events[key].push({callback, priority});\r\n\r\n\t\tthis.events[key].sort((a, b) => {\r\n\t\t\treturn a.priority - b.priority;\r\n\t\t});\r\n\r\n\t\tthis._notifySubscriptionChange(key, true);\r\n\t}\r\n\r\n\tunsubscribe(key, callback){\r\n\t\tvar index;\r\n\r\n\t\tif(this.events[key]){\r\n\t\t\tif(callback){\r\n\t\t\t\tindex = this.events[key].findIndex((item) => {\r\n\t\t\t\t\treturn item.callback === callback;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(index > -1){\r\n\t\t\t\t\tthis.events[key].splice(index, 1);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._notifySubscriptionChange(key, false);\r\n\t}\r\n\r\n\tsubscribed(key){\r\n\t\treturn this.events[key] && this.events[key].length;\r\n\t}\r\n\r\n\t_chain(key, args, initialValue, fallback){\r\n\t\tvar value = initialValue;\r\n\r\n\t\tif(!Array.isArray(args)){\r\n\t\t\targs = [args];\r\n\t\t}\r\n\r\n\t\tif(this.subscribed(key)){\r\n\t\t\tthis.events[key].forEach((subscriber, i) => {\r\n\t\t\t\tvalue = subscriber.callback.apply(this, args.concat([value]));\r\n\t\t\t});\r\n\r\n\t\t\treturn value;\r\n\t\t}else{\r\n\t\t\treturn typeof fallback === \"function\" ? fallback() : fallback;\r\n\t\t}\r\n\t}\r\n\r\n\t_confirm(key, args){\r\n\t\tvar confirmed = false;\r\n\r\n\t\tif(!Array.isArray(args)){\r\n\t\t\targs = [args];\r\n\t\t}\r\n\r\n\t\tif(this.subscribed(key)){\r\n\t\t\tthis.events[key].forEach((subscriber, i) => {\r\n\t\t\t\tif(subscriber.callback.apply(this, args)){\r\n\t\t\t\t\tconfirmed = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn confirmed;\r\n\t}\r\n\r\n\t_notifySubscriptionChange(key, subscribed){\r\n\t\tvar notifiers = this.subscriptionNotifiers[key];\r\n\r\n\t\tif(notifiers){\r\n\t\t\tnotifiers.forEach((callback)=>{\r\n\t\t\t\tcallback(subscribed);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_dispatch(){\r\n\t\tvar args = Array.from(arguments),\r\n\t\tkey = args.shift();\r\n\r\n\t\tif(this.events[key]){\r\n\t\t\tthis.events[key].forEach((subscriber) => {\r\n\t\t\t\tsubscriber.callback.apply(this, args);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_debugDispatch(){\r\n\t\tvar args = Array.from(arguments),\r\n\t\tkey = args[0];\r\n\r\n\t\targs[0] = \"InternalEvent:\" + key;\r\n\r\n\t\tif(this.debug === true || this.debug.includes(key)){\r\n\t\t\tconsole.log(...args);\r\n\t\t}\r\n\r\n\t\treturn this._dispatch(...arguments);\r\n\t}\r\n\r\n\t_debugChain(){\r\n\t\tvar args = Array.from(arguments),\r\n\t\tkey = args[0];\r\n\r\n\t\targs[0] = \"InternalEvent:\" + key;\r\n\r\n\t\tif(this.debug === true || this.debug.includes(key)){\r\n\t\t\tconsole.log(...args);\r\n\t\t}\r\n\r\n\t\treturn this._chain(...arguments);\r\n\t}\r\n\r\n\t_debugConfirm(){\r\n\t\tvar args = Array.from(arguments),\r\n\t\tkey = args[0];\r\n\r\n\t\targs[0] = \"InternalEvent:\" + key;\r\n\r\n\t\tif(this.debug === true || this.debug.includes(key)){\r\n\t\t\tconsole.log(...args);\r\n\t\t}\r\n\r\n\t\treturn this._confirm(...arguments);\r\n\t}\r\n}","import CoreFeature from '../CoreFeature.js';\r\n\r\nexport default class DeprecationAdvisor extends CoreFeature{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t}\r\n\t\r\n\t_warnUser(){\r\n\t\tif(this.options(\"debugDeprecation\")){\r\n\t\t\tconsole.warn(...arguments);\r\n\t\t}\r\n\t}\r\n\t\r\n\tcheck(oldOption, newOption){\r\n\t\tvar msg = \"\";\r\n\t\t\r\n\t\tif(typeof this.options(oldOption) !== \"undefined\"){\r\n\t\t\tmsg = \"Deprecated Setup Option - Use of the %c\" + oldOption + \"%c option is now deprecated\";\r\n\t\t\t\r\n\t\t\tif(newOption){\r\n\t\t\t\tmsg = msg + \", Please use the %c\" + newOption + \"%c option instead\";\r\n\t\t\t\tthis._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\r\n\t\t\t}else{\r\n\t\t\t\tthis._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn false;\r\n\t\t}else{\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\t\r\n\tcheckMsg(oldOption, msg){\r\n\t\tif(typeof this.options(oldOption) !== \"undefined\"){\r\n\t\t\tthis._warnUser(\"%cDeprecated Setup Option - Use of the %c\" + oldOption + \" %c option is now deprecated, \" + msg, 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\r\n\t\t\t\r\n\t\t\treturn false;\r\n\t\t}else{\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\t\r\n\tmsg(msg){\r\n\t\tthis._warnUser(msg);\r\n\t}\r\n}","import Tabulator from '../Tabulator.js';\r\n\r\nclass TableRegistry {\r\n\r\n\tstatic register(table){\r\n\t\tTableRegistry.tables.push(table);\r\n\t}\r\n\r\n\tstatic deregister(table){\r\n\t\tvar index = TableRegistry.tables.indexOf(table);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tTableRegistry.tables.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic lookupTable(query, silent){\r\n\t\tvar results = [],\r\n\t\tmatches, match;\r\n\r\n\t\tif(typeof query === \"string\"){\r\n\t\t\tmatches = document.querySelectorAll(query);\r\n\r\n\t\t\tif(matches.length){\r\n\t\t\t\tfor(var i = 0; i < matches.length; i++){\r\n\t\t\t\t\tmatch = TableRegistry.matchElement(matches[i]);\r\n\r\n\t\t\t\t\tif(match){\r\n\t\t\t\t\t\tresults.push(match);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else if((typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement) || query instanceof Tabulator){\r\n\t\t\tmatch = TableRegistry.matchElement(query);\r\n\r\n\t\t\tif(match){\r\n\t\t\t\tresults.push(match);\r\n\t\t\t}\r\n\t\t}else if(Array.isArray(query)){\r\n\t\t\tquery.forEach(function(item){\r\n\t\t\t\tresults = results.concat(TableRegistry.lookupTable(item));\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tif(!silent){\r\n\t\t\t\tconsole.warn(\"Table Connection Error - Invalid Selector\", query);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\n\tstatic matchElement(element){\r\n\t\treturn TableRegistry.tables.find(function(table){\r\n\t\t\treturn element instanceof Tabulator ? table === element : table.element === element;\r\n\t\t});\r\n\t}\r\n}\r\n\r\nTableRegistry.tables = [];\r\n\r\nexport default TableRegistry;","//resize columns to fit data they contain\r\nexport default function(columns, forced){\r\n\tif(forced){\r\n\t\tthis.table.columnManager.renderer.reinitializeColumnWidths(columns);\r\n\t}\r\n\t\r\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\tthis.table.modules.responsiveLayout.update();\r\n\t}\r\n}","//resize columns to fit data they contain and stretch row to fill table, also used for fitDataTable\r\nexport default function(columns, forced){\r\n\tcolumns.forEach(function(column){\r\n\t\tcolumn.reinitializeWidth();\r\n\t});\r\n\r\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\tthis.table.modules.responsiveLayout.update();\r\n\t}\r\n}","//resize columns to fit data the contain and stretch last column to fill table\r\nexport default function(columns, forced){\r\n\tvar colsWidth = 0,\r\n\ttableWidth = this.table.rowManager.element.clientWidth,\r\n\tgap = 0,\r\n\tlastCol = false;\r\n\r\n\tcolumns.forEach((column, i) => {\r\n\t\tif(!column.widthFixed){\r\n\t\t\tcolumn.reinitializeWidth();\r\n\t\t}\r\n\r\n\t\tif(this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible){\r\n\t\t\tlastCol = column;\r\n\t\t}\r\n\r\n\t\tif(column.visible){\r\n\t\t\tcolsWidth += column.getWidth();\r\n\t\t}\r\n\t});\r\n\r\n\tif(lastCol){\r\n\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\r\n\r\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\tlastCol.setWidth(0);\r\n\t\t\tthis.table.modules.responsiveLayout.update();\r\n\t\t}\r\n\r\n\t\tif(gap > 0){\r\n\t\t\tlastCol.setWidth(gap);\r\n\t\t}else{\r\n\t\t\tlastCol.reinitializeWidth();\r\n\t\t}\r\n\t}else{\r\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\tthis.table.modules.responsiveLayout.update();\r\n\t\t}\r\n\t}\r\n}","//resize columns to fit\r\nexport default function(columns, forced){\r\n\tvar totalWidth = this.table.rowManager.element.getBoundingClientRect().width; //table element width\r\n\tvar fixedWidth = 0; //total width of columns with a defined width\r\n\tvar flexWidth = 0; //total width available to flexible columns\r\n\tvar flexGrowUnits = 0; //total number of widthGrow blocks across all columns\r\n\tvar flexColWidth = 0; //desired width of flexible columns\r\n\tvar flexColumns = []; //array of flexible width columns\r\n\tvar fixedShrinkColumns = []; //array of fixed width columns that can shrink\r\n\tvar flexShrinkUnits = 0; //total number of widthShrink blocks across all columns\r\n\tvar overflowWidth = 0; //horizontal overflow width\r\n\tvar gapFill = 0; //number of pixels to be added to final column to close and half pixel gaps\r\n\r\n\tfunction calcWidth(width){\r\n\t\tvar colWidth;\r\n\r\n\t\tif(typeof(width) == \"string\"){\r\n\t\t\tif(width.indexOf(\"%\") > -1){\r\n\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width);\r\n\t\t\t}else{\r\n\t\t\t\tcolWidth = parseInt(width);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcolWidth = width;\r\n\t\t}\r\n\r\n\t\treturn colWidth;\r\n\t}\r\n\r\n\t//ensure columns resize to take up the correct amount of space\r\n\tfunction scaleColumns(columns, freeSpace, colWidth, shrinkCols){\r\n\t\tvar oversizeCols = [],\r\n\t\toversizeSpace = 0,\r\n\t\tremainingSpace = 0,\r\n\t\tnextColWidth = 0,\r\n\t\tremainingFlexGrowUnits = flexGrowUnits,\r\n\t\tgap = 0,\r\n\t\tchangeUnits = 0,\r\n\t\tundersizeCols = [];\r\n\r\n\t\tfunction calcGrow(col){\r\n\t\t\treturn (colWidth * (col.column.definition.widthGrow || 1));\r\n\t\t}\r\n\r\n\t\tfunction calcShrink(col){\r\n\t\t\treturn  (calcWidth(col.width) - (colWidth * (col.column.definition.widthShrink || 0)));\r\n\t\t}\r\n\r\n\t\tcolumns.forEach(function(col, i){\r\n\t\t\tvar width = shrinkCols ? calcShrink(col) : calcGrow(col);\r\n\t\t\tif(col.column.minWidth >= width){\r\n\t\t\t\toversizeCols.push(col);\r\n\t\t\t}else{\r\n\t\t\t\tif(col.column.maxWidth && col.column.maxWidth < width){\r\n\t\t\t\t\tcol.width = col.column.maxWidth;\r\n\t\t\t\t\tfreeSpace -= col.column.maxWidth;\r\n\r\n\t\t\t\t\tremainingFlexGrowUnits -= shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\r\n\r\n\t\t\t\t\tif(remainingFlexGrowUnits){\r\n\t\t\t\t\t\tcolWidth = Math.floor(freeSpace/remainingFlexGrowUnits);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tundersizeCols.push(col);\r\n\t\t\t\t\tchangeUnits += shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(oversizeCols.length){\r\n\t\t\toversizeCols.forEach(function(col){\r\n\t\t\t\toversizeSpace += shrinkCols ?  col.width - col.column.minWidth : col.column.minWidth;\r\n\t\t\t\tcol.width = col.column.minWidth;\r\n\t\t\t});\r\n\r\n\t\t\tremainingSpace = freeSpace - oversizeSpace;\r\n\r\n\t\t\tnextColWidth = changeUnits ? Math.floor(remainingSpace/changeUnits) : remainingSpace;\r\n\r\n\t\t\tgap = scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\r\n\t\t}else{\r\n\t\t\tgap = changeUnits ? freeSpace - (Math.floor(freeSpace/changeUnits) * changeUnits) : freeSpace;\r\n\r\n\t\t\tundersizeCols.forEach(function(column){\r\n\t\t\t\tcolumn.width = shrinkCols ? calcShrink(column) : calcGrow(column);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn gap;\r\n\t}\r\n\r\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\tthis.table.modules.responsiveLayout.update();\r\n\t}\r\n\r\n\t//adjust for vertical scrollbar if present\r\n\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\r\n\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\r\n\t}\r\n\r\n\tcolumns.forEach(function(column){\r\n\t\tvar width, minWidth, colWidth;\r\n\r\n\t\tif(column.visible){\r\n\r\n\t\t\twidth = column.definition.width;\r\n\t\t\tminWidth =  parseInt(column.minWidth);\r\n\r\n\t\t\tif(width){\r\n\r\n\t\t\t\tcolWidth = calcWidth(width);\r\n\r\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\r\n\r\n\t\t\t\tif(column.definition.widthShrink){\r\n\t\t\t\t\tfixedShrinkColumns.push({\r\n\t\t\t\t\t\tcolumn:column,\r\n\t\t\t\t\t\twidth:colWidth > minWidth ? colWidth : minWidth\r\n\t\t\t\t\t});\r\n\t\t\t\t\tflexShrinkUnits += column.definition.widthShrink;\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tflexColumns.push({\r\n\t\t\t\t\tcolumn:column,\r\n\t\t\t\t\twidth:0,\r\n\t\t\t\t});\r\n\t\t\t\tflexGrowUnits += column.definition.widthGrow || 1;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t//calculate available space\r\n\tflexWidth = totalWidth - fixedWidth;\r\n\r\n\t//calculate correct column size\r\n\tflexColWidth = Math.floor(flexWidth / flexGrowUnits);\r\n\r\n\t//generate column widths\r\n\tgapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\r\n\r\n\t//increase width of last column to account for rounding errors\r\n\tif(flexColumns.length && gapFill > 0){\r\n\t\tflexColumns[flexColumns.length-1].width += gapFill;\r\n\t}\r\n\r\n\t//calculate space for columns to be shrunk into\r\n\tflexColumns.forEach(function(col){\r\n\t\tflexWidth -= col.width;\r\n\t});\r\n\r\n\toverflowWidth = Math.abs(gapFill) + flexWidth;\r\n\r\n\t//shrink oversize columns if there is no available space\r\n\tif(overflowWidth > 0 && flexShrinkUnits){\r\n\t\tgapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\r\n\t}\r\n\r\n\t//decrease width of last column to account for rounding errors\r\n\tif(gapFill && fixedShrinkColumns.length){\r\n\t\tfixedShrinkColumns[fixedShrinkColumns.length-1].width -= gapFill;\r\n\t}\r\n\r\n\tflexColumns.forEach(function(col){\r\n\t\tcol.column.setWidth(col.width);\r\n\t});\r\n\r\n\tfixedShrinkColumns.forEach(function(col){\r\n\t\tcol.column.setWidth(col.width);\r\n\t});\r\n}","import fitData from './modes/fitData.js';\r\nimport fitDataGeneral from './modes/fitDataGeneral.js';\r\nimport fitDataStretch from './modes/fitDataStretch.js';\r\nimport fitColumns from './modes/fitColumns.js';\r\n\r\nexport default {\r\n\tfitData:fitData,\r\n\tfitDataFill:fitDataGeneral,\r\n\tfitDataTable:fitDataGeneral,\r\n\tfitDataStretch:fitDataStretch,\r\n\tfitColumns:fitColumns ,\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport defaultModes from './defaults/modes.js';\r\n\r\nclass Layout extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table, \"layout\");\r\n\r\n\t\tthis.mode = null;\r\n\r\n\t\tthis.registerTableOption(\"layout\", \"fitData\"); //layout type\r\n\t\tthis.registerTableOption(\"layoutColumnsOnNewData\", false); //update column widths on setData\r\n\r\n\t\tthis.registerColumnOption(\"widthGrow\");\r\n\t\tthis.registerColumnOption(\"widthShrink\");\r\n\t}\r\n\r\n\t//initialize layout system\r\n\tinitialize(){\r\n\t\tvar layout = this.table.options.layout;\r\n\r\n\t\tif(Layout.modes[layout]){\r\n\t\t\tthis.mode = layout;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\r\n\t\t\tthis.mode = 'fitData';\r\n\t\t}\r\n\r\n\t\tthis.table.element.setAttribute(\"tabulator-layout\", this.mode);\r\n\t}\r\n\r\n\tgetMode(){\r\n\t\treturn this.mode;\r\n\t}\r\n\r\n\t//trigger table layout\r\n\tlayout(dataChanged){\r\n\t\tthis.dispatch(\"layout-refreshing\");\r\n\t\tLayout.modes[this.mode].call(this, this.table.columnManager.columnsByIndex, dataChanged);\r\n\t\tthis.dispatch(\"layout-refreshed\");\r\n\t}\r\n}\r\n\r\nLayout.moduleName = \"layout\";\r\n\r\n//load defaults\r\nLayout.modes = defaultModes;\r\n\r\nexport default Layout;","export default {\r\n\t\"default\":{ //hold default locale text\r\n\t\t\"groups\":{\r\n\t\t\t\"item\":\"item\",\r\n\t\t\t\"items\":\"items\",\r\n\t\t},\r\n\t\t\"columns\":{\r\n\t\t},\r\n\t\t\"data\":{\r\n\t\t\t\"loading\":\"Loading\",\r\n\t\t\t\"error\":\"Error\",\r\n\t\t},\r\n\t\t\"pagination\":{\r\n\t\t\t\"page_size\":\"Page Size\",\r\n\t\t\t\"page_title\":\"Show Page\",\r\n\t\t\t\"first\":\"First\",\r\n\t\t\t\"first_title\":\"First Page\",\r\n\t\t\t\"last\":\"Last\",\r\n\t\t\t\"last_title\":\"Last Page\",\r\n\t\t\t\"prev\":\"Prev\",\r\n\t\t\t\"prev_title\":\"Prev Page\",\r\n\t\t\t\"next\":\"Next\",\r\n\t\t\t\"next_title\":\"Next Page\",\r\n\t\t\t\"all\":\"All\",\r\n\t\t\t\"counter\":{\r\n\t\t\t\t\"showing\": \"Showing\",\r\n\t\t\t\t\"of\": \"of\",\r\n\t\t\t\t\"rows\": \"rows\",\r\n\t\t\t\t\"pages\": \"pages\",\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"headerFilters\":{\r\n\t\t\t\"default\":\"filter column...\",\r\n\t\t\t\"columns\":{}\r\n\t\t}\r\n\t},\r\n};","import Module from '../../core/Module.js';\r\n\r\nimport Helpers from '../../core/tools/Helpers.js';\r\n\r\nimport defaultLangs from './defaults/langs.js';\r\n\r\nclass Localize extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.locale = \"default\"; //current locale\r\n\t\tthis.lang = false; //current language\r\n\t\tthis.bindings = {}; //update events to call when locale is changed\r\n\t\tthis.langList = {};\r\n\r\n\t\tthis.registerTableOption(\"locale\", false); //current system language\r\n\t\tthis.registerTableOption(\"langs\", {});\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.langList = Helpers.deepClone(Localize.langs);\r\n\r\n\t\tif(this.table.options.columnDefaults.headerFilterPlaceholder !== false){\r\n\t\t\tthis.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);\r\n\t\t}\r\n\r\n\t\tfor(let locale in this.table.options.langs){\r\n\t\t\tthis.installLang(locale, this.table.options.langs[locale]);\r\n\t\t}\r\n\r\n\t\tthis.setLocale(this.table.options.locale);\r\n\r\n\t\tthis.registerTableFunction(\"setLocale\", this.setLocale.bind(this));\r\n\t\tthis.registerTableFunction(\"getLocale\", this.getLocale.bind(this));\r\n\t\tthis.registerTableFunction(\"getLang\", this.getLang.bind(this));\r\n\t}\r\n\r\n\t//set header placeholder\r\n\tsetHeaderFilterPlaceholder(placeholder){\r\n\t\tthis.langList.default.headerFilters.default = placeholder;\r\n\t}\r\n\r\n\t//set header filter placeholder by column\r\n\tsetHeaderFilterColumnPlaceholder(column, placeholder){\r\n\t\tthis.langList.default.headerFilters.columns[column] = placeholder;\r\n\r\n\t\tif(this.lang && !this.lang.headerFilters.columns[column]){\r\n\t\t\tthis.lang.headerFilters.columns[column] = placeholder;\r\n\t\t}\r\n\t}\r\n\r\n\t//setup a lang description object\r\n\tinstallLang(locale, lang){\r\n\t\tif(this.langList[locale]){\r\n\t\t\tthis._setLangProp(this.langList[locale], lang);\r\n\t\t}else{\r\n\t\t\tthis.langList[locale] = lang;\r\n\t\t}\r\n\t}\r\n\r\n\t_setLangProp(lang, values){\r\n\t\tfor(let key in values){\r\n\t\t\tif(lang[key] && typeof lang[key] == \"object\"){\r\n\t\t\t\tthis._setLangProp(lang[key], values[key]);\r\n\t\t\t}else{\r\n\t\t\t\tlang[key] = values[key];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//set current locale\r\n\tsetLocale(desiredLocale){\r\n\t\tdesiredLocale = desiredLocale || \"default\";\r\n\r\n\t\t//fill in any matching language values\r\n\t\tfunction traverseLang(trans, path){\r\n\t\t\tfor(var prop in trans){\r\n\t\t\t\tif(typeof trans[prop] == \"object\"){\r\n\t\t\t\t\tif(!path[prop]){\r\n\t\t\t\t\t\tpath[prop] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttraverseLang(trans[prop], path[prop]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tpath[prop] = trans[prop];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//determining correct locale to load\r\n\t\tif(desiredLocale === true && navigator.language){\r\n\t\t\t//get local from system\r\n\t\t\tdesiredLocale = navigator.language.toLowerCase();\r\n\t\t}\r\n\r\n\t\tif(desiredLocale){\r\n\t\t\t//if locale is not set, check for matching top level locale else use default\r\n\t\t\tif(!this.langList[desiredLocale]){\r\n\t\t\t\tlet prefix = desiredLocale.split(\"-\")[0];\r\n\r\n\t\t\t\tif(this.langList[prefix]){\r\n\t\t\t\t\tconsole.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\r\n\t\t\t\t\tdesiredLocale = prefix;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\r\n\t\t\t\t\tdesiredLocale = \"default\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.locale = desiredLocale;\r\n\r\n\t\t//load default lang template\r\n\t\tthis.lang = Helpers.deepClone(this.langList.default || {});\r\n\r\n\t\tif(desiredLocale != \"default\"){\r\n\t\t\ttraverseLang(this.langList[desiredLocale], this.lang);\r\n\t\t}\r\n\r\n\t\tthis.dispatchExternal(\"localized\", this.locale, this.lang);\r\n\r\n\t\tthis._executeBindings();\r\n\t}\r\n\r\n\t//get current locale\r\n\tgetLocale(locale){\r\n\t\treturn this.locale;\r\n\t}\r\n\r\n\t//get lang object for given local or current if none provided\r\n\tgetLang(locale){\r\n\t\treturn locale ? this.langList[locale] : this.lang;\r\n\t}\r\n\r\n\t//get text for current locale\r\n\tgetText(path, value){\r\n\t\tvar fillPath = value ? path + \"|\" + value : path,\r\n\t\tpathArray = fillPath.split(\"|\"),\r\n\t\ttext = this._getLangElement(pathArray, this.locale);\r\n\r\n\t\t// if(text === false){\r\n\t\t// \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\r\n\t\t// }\r\n\r\n\t\treturn text || \"\";\r\n\t}\r\n\r\n\t//traverse langs object and find localized copy\r\n\t_getLangElement(path, locale){\r\n\t\tvar root = this.lang;\r\n\r\n\t\tpath.forEach(function(level){\r\n\t\t\tvar rootPath;\r\n\r\n\t\t\tif(root){\r\n\t\t\t\trootPath = root[level];\r\n\r\n\t\t\t\tif(typeof rootPath != \"undefined\"){\r\n\t\t\t\t\troot = rootPath;\r\n\t\t\t\t}else{\r\n\t\t\t\t\troot = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn root;\r\n\t}\r\n\r\n\t//set update binding\r\n\tbind(path, callback){\r\n\t\tif(!this.bindings[path]){\r\n\t\t\tthis.bindings[path] = [];\r\n\t\t}\r\n\r\n\t\tthis.bindings[path].push(callback);\r\n\r\n\t\tcallback(this.getText(path), this.lang);\r\n\t}\r\n\r\n\t//iterate through bindings and trigger updates\r\n\t_executeBindings(){\r\n\t\tfor(let path in this.bindings){\r\n\t\t\tthis.bindings[path].forEach((binding) => {\r\n\t\t\t\tbinding(this.getText(path), this.lang);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nLocalize.moduleName = \"localize\";\r\n\r\n//load defaults\r\nLocalize.langs = defaultLangs;\r\n\r\nexport default Localize;","import Module from '../../core/Module.js';\r\nimport TableRegistry from '../../core/tools/TableRegistry.js';\r\n\r\nclass Comms extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.registerTableFunction(\"tableComms\", this.receive.bind(this));\r\n\t}\r\n\r\n\tgetConnections(selectors){\r\n\t\tvar connections = [],\r\n\t\tconnection;\r\n\r\n\t\tconnection = TableRegistry.lookupTable(selectors);\r\n\r\n\t\tconnection.forEach((con) =>{\r\n\t\t\tif(this.table !== con){\r\n\t\t\t\tconnections.push(con);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn connections;\r\n\t}\r\n\r\n\tsend(selectors, module, action, data){\r\n\t\tvar connections = this.getConnections(selectors);\r\n\r\n\t\tconnections.forEach((connection) => {\r\n\t\t\tconnection.tableComms(this.table.element, module, action, data);\r\n\t\t});\r\n\r\n\t\tif(!connections.length && selectors){\r\n\t\t\tconsole.warn(\"Table Connection Error - No tables matching selector found\", selectors);\r\n\t\t}\r\n\t}\r\n\r\n\treceive(table, module, action, data){\r\n\t\tif(this.table.modExists(module)){\r\n\t\t\treturn this.table.modules[module].commsReceived(table, action, data);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Inter-table Comms Error - no such module:\", module);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nComms.moduleName = \"comms\";\r\n\r\nexport default Comms;","import * as coreModules from '../modules/core.js';\r\nimport TableRegistry from './TableRegistry.js';\r\n\r\nexport default class ModuleBinder {\r\n\t\r\n\tconstructor(tabulator, modules){\r\n\t\tthis.bindStaticFunctionality(tabulator);\r\n\t\tthis.bindModules(tabulator, coreModules, true);\r\n\t\t\r\n\t\tif(modules){\r\n\t\t\tthis.bindModules(tabulator, modules);\r\n\t\t}\r\n\t}\r\n\t\r\n\tbindStaticFunctionality(tabulator){\r\n\t\ttabulator.moduleBindings = {};\r\n\t\t\r\n\t\ttabulator.extendModule = function(name, property, values){\r\n\t\t\tif(tabulator.moduleBindings[name]){\r\n\t\t\t\tvar source = tabulator.moduleBindings[name][property];\r\n\t\t\t\t\r\n\t\t\t\tif(source){\r\n\t\t\t\t\tif(typeof values == \"object\"){\r\n\t\t\t\t\t\tfor(let key in values){\r\n\t\t\t\t\t\t\tsource[key] = values[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Module Error - Invalid value type, it must be an object\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Module Error - property does not exist:\", property);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Module Error - module does not exist:\", name);\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\ttabulator.registerModule = function(modules){\r\n\t\t\tif(!Array.isArray(modules)){\r\n\t\t\t\tmodules = [modules];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tmodules.forEach((mod) => {\r\n\t\t\t\ttabulator.registerModuleBinding(mod);\r\n\t\t\t});\r\n\t\t};\r\n\t\t\r\n\t\ttabulator.registerModuleBinding = function(mod){\r\n\t\t\ttabulator.moduleBindings[mod.moduleName] = mod;\r\n\t\t};\r\n\t\t\r\n\t\ttabulator.findTable = function(query){\r\n\t\t\tvar results = TableRegistry.lookupTable(query, true);\r\n\t\t\treturn Array.isArray(results) && !results.length ? false : results;\r\n\t\t};\r\n\t\t\r\n\t\t//ensure that module are bound to instantiated function\r\n\t\ttabulator.prototype.bindModules = function(){\r\n\t\t\tvar orderedStartMods = [],\r\n\t\t\torderedEndMods = [],\r\n\t\t\tunOrderedMods = [];\r\n\t\t\t\r\n\t\t\tthis.modules = {};\r\n\t\t\t\r\n\t\t\tfor(var name in tabulator.moduleBindings){\r\n\t\t\t\tlet mod = tabulator.moduleBindings[name];\r\n\t\t\t\tlet module = new mod(this);\r\n\t\t\t\t\r\n\t\t\t\tthis.modules[name] = module;\r\n\t\t\t\t\r\n\t\t\t\tif(mod.prototype.moduleCore){\r\n\t\t\t\t\tthis.modulesCore.push(module);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(mod.moduleInitOrder){\r\n\t\t\t\t\t\tif(mod.moduleInitOrder < 0){\r\n\t\t\t\t\t\t\torderedStartMods.push(module);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\torderedEndMods.push(module);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tunOrderedMods.push(module);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\torderedStartMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\r\n\t\t\torderedEndMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\r\n\t\t\t\r\n\t\t\tthis.modulesRegular = orderedStartMods.concat(unOrderedMods.concat(orderedEndMods));\r\n\t\t};\r\n\t}\r\n\t\r\n\tbindModules(tabulator, modules, core){\r\n\t\tvar mods = Object.values(modules);\r\n\t\t\r\n\t\tif(core){\r\n\t\t\tmods.forEach((mod) => {\r\n\t\t\t\tmod.prototype.moduleCore = true;\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\ttabulator.registerModule(mods);\r\n\t}\r\n}","import CoreFeature from '../CoreFeature.js';\r\n\r\nexport default class Alert extends CoreFeature{\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n        \r\n\t\tthis.element = this._createAlertElement();\r\n\t\tthis.msgElement = this._createMsgElement();\r\n\t\tthis.type = null;\r\n        \r\n\t\tthis.element.appendChild(this.msgElement);\r\n\t}\r\n    \r\n\t_createAlertElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.classList.add(\"tabulator-alert\");\r\n\t\treturn el;\r\n\t}\r\n    \r\n\t_createMsgElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.classList.add(\"tabulator-alert-msg\");\r\n\t\tel.setAttribute(\"role\", \"alert\");\r\n\t\treturn el;\r\n\t}\r\n    \r\n\t_typeClass(){\r\n\t\treturn \"tabulator-alert-state-\" + this.type;\r\n\t}\r\n    \r\n\talert(content, type = \"msg\"){\r\n\t\tif(content){\r\n\t\t\tthis.clear();\r\n            \r\n\t\t\tthis.type = type;\r\n            \r\n\t\t\twhile(this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\r\n            \r\n\t\t\tthis.msgElement.classList.add(this._typeClass());\r\n            \r\n\t\t\tif(typeof content === \"function\"){\r\n\t\t\t\tcontent = content();\r\n\t\t\t}\r\n            \r\n\t\t\tif(content instanceof HTMLElement){\r\n\t\t\t\tthis.msgElement.appendChild(content);\r\n\t\t\t}else{\r\n\t\t\t\tthis.msgElement.innerHTML = content;\r\n\t\t\t}\r\n            \r\n\t\t\tthis.table.element.appendChild(this.element);\r\n\t\t}\r\n\t}\r\n    \r\n\tclear(){\r\n\t\tif(this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n        \r\n\t\tthis.msgElement.classList.remove(this._typeClass());\r\n\t}\r\n}","'use strict';\r\n\r\nimport defaultOptions from './defaults/options.js';\r\n\r\nimport ColumnManager from './ColumnManager.js';\r\nimport RowManager from './RowManager.js';\r\nimport FooterManager from './FooterManager.js';\r\n\r\nimport InteractionMonitor from './tools/InteractionMonitor.js';\r\nimport ComponentFunctionBinder from './tools/ComponentFunctionBinder.js';\r\nimport DataLoader from './tools/DataLoader.js';\r\n\r\nimport ExternalEventBus from './tools/ExternalEventBus.js';\r\nimport InternalEventBus from './tools/InternalEventBus.js';\r\n\r\nimport DeprecationAdvisor from './tools/DeprecationAdvisor.js';\r\n\r\nimport TableRegistry from './tools/TableRegistry.js';\r\nimport ModuleBinder from './tools/ModuleBinder.js';\r\n\r\nimport OptionsList from './tools/OptionsList.js';\r\n\r\nimport Alert from './tools/Alert.js';\r\n\r\nclass Tabulator {\r\n\t\r\n\tconstructor(element, options){\r\n\t\t\r\n\t\tthis.options = {};\r\n\t\t\r\n\t\tthis.columnManager = null; // hold Column Manager\r\n\t\tthis.rowManager = null; //hold Row Manager\r\n\t\tthis.footerManager = null; //holder Footer Manager\r\n\t\tthis.alertManager = null; //hold Alert Manager\r\n\t\tthis.vdomHoz  = null; //holder horizontal virtual dom\r\n\t\tthis.externalEvents = null; //handle external event messaging\r\n\t\tthis.eventBus = null; //handle internal event messaging\r\n\t\tthis.interactionMonitor = false; //track user interaction\r\n\t\tthis.browser = \"\"; //hold current browser type\r\n\t\tthis.browserSlow = false; //handle reduced functionality for slower browsers\r\n\t\tthis.browserMobile = false; //check if running on mobile, prevent resize cancelling edit on keyboard appearance\r\n\t\tthis.rtl = false; //check if the table is in RTL mode\r\n\t\tthis.originalElement = null; //hold original table element if it has been replaced\r\n\t\t\r\n\t\tthis.componentFunctionBinder = new ComponentFunctionBinder(this); //bind component functions\r\n\t\tthis.dataLoader = false; //bind component functions\r\n\t\t\r\n\t\tthis.modules = {}; //hold all modules bound to this table\r\n\t\tthis.modulesCore = []; //hold core modules bound to this table (for initialization purposes)\r\n\t\tthis.modulesRegular = []; //hold regular modules bound to this table (for initialization purposes)\r\n\t\t\r\n\t\tthis.deprecationAdvisor = new DeprecationAdvisor(this);\r\n\t\tthis.optionsList = new OptionsList(this, \"table constructor\");\r\n\t\t\r\n\t\tthis.initialized = false;\r\n\t\tthis.destroyed = false;\r\n\t\t\r\n\t\tif(this.initializeElement(element)){\r\n\t\t\t\r\n\t\t\tthis.initializeCoreSystems(options);\r\n\t\t\t\r\n\t\t\t//delay table creation to allow event bindings immediately after the constructor\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis._create();\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tTableRegistry.register(this); //register table for inter-device communication\r\n\t}\r\n\t\r\n\tinitializeElement(element){\r\n\t\tif(typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement){\r\n\t\t\tthis.element = element;\r\n\t\t\treturn true;\r\n\t\t}else if(typeof element === \"string\"){\r\n\t\t\tthis.element = document.querySelector(element);\r\n\t\t\t\r\n\t\t\tif(this.element){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tconsole.error(\"Tabulator Creation Error - no element found matching selector: \", element);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Tabulator Creation Error - Invalid element provided:\", element);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t\r\n\tinitializeCoreSystems(options){\r\n\t\tthis.columnManager = new ColumnManager(this);\r\n\t\tthis.rowManager = new RowManager(this);\r\n\t\tthis.footerManager = new FooterManager(this);\r\n\t\tthis.dataLoader = new DataLoader(this);\r\n\t\tthis.alertManager = new Alert(this);\r\n\t\t\r\n\t\tthis.bindModules();\r\n\t\t\r\n\t\tthis.options = this.optionsList.generate(Tabulator.defaultOptions, options);\r\n\t\t\r\n\t\tthis._clearObjectPointers();\r\n\t\t\r\n\t\tthis._mapDeprecatedFunctionality();\r\n\t\t\r\n\t\tthis.externalEvents = new ExternalEventBus(this, this.options, this.options.debugEventsExternal);\r\n\t\tthis.eventBus = new InternalEventBus(this.options.debugEventsInternal);\r\n\t\t\r\n\t\tthis.interactionMonitor = new InteractionMonitor(this);\r\n\t\t\r\n\t\tthis.dataLoader.initialize();\r\n\t\t// this.columnManager.initialize();\r\n\t\t// this.rowManager.initialize();\r\n\t\tthis.footerManager.initialize();\r\n\t}\r\n\t\r\n\t//convert deprecated functionality to new functions\r\n\t_mapDeprecatedFunctionality(){\r\n\t\t//all previously deprecated functionality removed in the 5.0 release\r\n\t}\r\n\t\r\n\t_clearSelection(){\r\n\t\t\r\n\t\tthis.element.classList.add(\"tabulator-block-select\");\r\n\t\t\r\n\t\tif (window.getSelection) {\r\n\t\t\tif (window.getSelection().empty) {  // Chrome\r\n\t\t\t\twindow.getSelection().empty();\r\n\t\t\t} else if (window.getSelection().removeAllRanges) {  // Firefox\r\n\t\t\t\twindow.getSelection().removeAllRanges();\r\n\t\t\t}\r\n\t\t} else if (document.selection) {  // IE?\r\n\t\t\tdocument.selection.empty();\r\n\t\t}\r\n\t\t\r\n\t\tthis.element.classList.remove(\"tabulator-block-select\");\r\n\t}\r\n\t\r\n\t//create table\r\n\t_create(){\r\n\t\tthis.externalEvents.dispatch(\"tableBuilding\");\r\n\t\tthis.eventBus.dispatch(\"table-building\");\r\n\t\t\r\n\t\tthis._rtlCheck();\r\n\t\t\r\n\t\tthis._buildElement();\r\n\t\t\r\n\t\tthis._initializeTable();\r\n\t\t\r\n\t\tthis._loadInitialData();\r\n\t\t\r\n\t\tthis.initialized = true;\r\n\t\t\r\n\t\tthis.externalEvents.dispatch(\"tableBuilt\");\r\n\t}\r\n\t\r\n\t_rtlCheck(){\r\n\t\tvar style = window.getComputedStyle(this.element);\r\n\t\t\r\n\t\tswitch(this.options.textDirection){\r\n\t\t\tcase\"auto\":\r\n\t\t\t\tif(style.direction !== \"rtl\"){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\tcase \"rtl\":\r\n\t\t\t\tthis.element.classList.add(\"tabulator-rtl\");\r\n\t\t\t\tthis.rtl = true;\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase \"ltr\":\r\n\t\t\t\tthis.element.classList.add(\"tabulator-ltr\");\r\n\t\t\t\r\n\t\t\tdefault:\r\n\t\t\t\tthis.rtl = false;\r\n\t\t}\r\n\t}\r\n\t\r\n\t//clear pointers to objects in default config object\r\n\t_clearObjectPointers(){\r\n\t\tthis.options.columns = this.options.columns.slice(0);\r\n\t\t\r\n\t\tif(Array.isArray(this.options.data) && !this.options.reactiveData){\r\n\t\t\tthis.options.data = this.options.data.slice(0);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//build tabulator element\r\n\t_buildElement(){\r\n\t\tvar element = this.element,\r\n\t\toptions = this.options,\r\n\t\tnewElement;\r\n\t\t\r\n\t\tif(element.tagName === \"TABLE\"){\r\n\t\t\tthis.originalElement = this.element;\r\n\t\t\tnewElement = document.createElement(\"div\");\r\n\t\t\t\r\n\t\t\t//transfer attributes to new element\r\n\t\t\tvar attributes = element.attributes;\r\n\t\t\t\r\n\t\t\t// loop through attributes and apply them on div\r\n\t\t\tfor(var i in attributes){\r\n\t\t\t\tif(typeof attributes[i] == \"object\"){\r\n\t\t\t\t\tnewElement.setAttribute(attributes[i].name, attributes[i].value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// replace table with div element\r\n\t\t\telement.parentNode.replaceChild(newElement, element);\r\n\t\t\t\r\n\t\t\tthis.element = element = newElement;\r\n\t\t}\r\n\t\t\r\n\t\telement.classList.add(\"tabulator\");\r\n\t\telement.setAttribute(\"role\", \"grid\");\r\n\t\t\r\n\t\t//empty element\r\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\t\t\r\n\t\t//set table height\r\n\t\tif(options.height){\r\n\t\t\toptions.height = isNaN(options.height) ? options.height : options.height + \"px\";\r\n\t\t\telement.style.height = options.height;\r\n\t\t}\r\n\t\t\r\n\t\t//set table min height\r\n\t\tif(options.minHeight !== false){\r\n\t\t\toptions.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\r\n\t\t\telement.style.minHeight = options.minHeight;\r\n\t\t}\r\n\t\t\r\n\t\t//set table maxHeight\r\n\t\tif(options.maxHeight !== false){\r\n\t\t\toptions.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\r\n\t\t\telement.style.maxHeight = options.maxHeight;\r\n\t\t}\r\n\t}\r\n\t\r\n\t//initialize core systems and modules\r\n\t_initializeTable(){\r\n\t\tvar element = this.element,\r\n\t\toptions = this.options;\r\n\t\t\r\n\t\tthis.interactionMonitor.initialize();\r\n\t\t\r\n\t\tthis.columnManager.initialize();\r\n\t\tthis.rowManager.initialize();\r\n\t\t\r\n\t\tthis._detectBrowser();\r\n\t\t\r\n\t\t//initialize core modules\r\n\t\tthis.modulesCore.forEach((mod) => {\r\n\t\t\tmod.initialize();\r\n\t\t});\r\n\t\t\r\n\t\t//build table elements\r\n\t\telement.appendChild(this.columnManager.getElement());\r\n\t\telement.appendChild(this.rowManager.getElement());\r\n\t\t\r\n\t\tif(options.footerElement){\r\n\t\t\tthis.footerManager.activate();\r\n\t\t}\r\n\t\t\r\n\t\tif(options.autoColumns && options.data){\r\n\t\t\t\r\n\t\t\tthis.columnManager.generateColumnsFromRowData(this.options.data);\r\n\t\t}\r\n\t\t\r\n\t\t//initialize regular modules\r\n\t\tthis.modulesRegular.forEach((mod) => {\r\n\t\t\tmod.initialize();\r\n\t\t});\r\n\t\t\r\n\t\tthis.columnManager.setColumns(options.columns);\r\n\t\t\r\n\t\tthis.eventBus.dispatch(\"table-built\");\r\n\t}\r\n\t\r\n\t_loadInitialData(){\r\n\t\tthis.dataLoader.load(this.options.data);\r\n\t}\r\n\t\r\n\t//deconstructor\r\n\tdestroy(){\r\n\t\tvar element = this.element;\r\n\t\t\r\n\t\tthis.destroyed = true;\r\n\t\t\r\n\t\tTableRegistry.deregister(this); //deregister table from inter-device communication\r\n\t\t\r\n\t\tthis.eventBus.dispatch(\"table-destroy\");\r\n\t\t\r\n\t\t//clear row data\r\n\t\tthis.rowManager.rows.forEach(function(row){\r\n\t\t\trow.wipe();\r\n\t\t});\r\n\t\t\r\n\t\tthis.rowManager.rows = [];\r\n\t\tthis.rowManager.activeRows = [];\r\n\t\tthis.rowManager.displayRows = [];\r\n\t\t\r\n\t\t//clear DOM\r\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\t\telement.classList.remove(\"tabulator\");\r\n\r\n\t\tthis.externalEvents.dispatch(\"tableDestroyed\");\r\n\t}\r\n\t\r\n\t_detectBrowser(){\r\n\t\tvar ua = navigator.userAgent||navigator.vendor||window.opera;\r\n\t\t\r\n\t\tif(ua.indexOf(\"Trident\") > -1){\r\n\t\t\tthis.browser = \"ie\";\r\n\t\t\tthis.browserSlow = true;\r\n\t\t}else if(ua.indexOf(\"Edge\") > -1){\r\n\t\t\tthis.browser = \"edge\";\r\n\t\t\tthis.browserSlow = true;\r\n\t\t}else if(ua.indexOf(\"Firefox\") > -1){\r\n\t\t\tthis.browser = \"firefox\";\r\n\t\t\tthis.browserSlow = false;\r\n\t\t}else{\r\n\t\t\tthis.browser = \"other\";\r\n\t\t\tthis.browserSlow = false;\r\n\t\t}\r\n\t\t\r\n\t\tthis.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(ua.slice(0,4));\r\n\t}\r\n\t\r\n\tinitGuard(func, msg){\r\n\t\tvar stack, line;\r\n\t\t\r\n\t\tif(this.options.debugInitialization && !this.initialized){\r\n\t\t\tif(!func){\r\n\t\t\t\tstack = new Error().stack.split(\"\\n\");\r\n\t\t\t\t\r\n\t\t\t\tline = stack[0] == \"Error\" ? stack[2] : stack[1];\r\n\t\t\t\t\r\n\t\t\t\tif(line[0] == \" \"){\r\n\t\t\t\t\tfunc = line.trim().split(\" \")[1].split(\".\")[1];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfunc = line.trim().split(\"@\")[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconsole.warn(\"Table Not Initialized - Calling the \" + func + \" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function.\" + (msg ? \" \" + msg : \"\"));\r\n\t\t}\r\n\t\t\r\n\t\treturn this.initialized;\r\n\t}\r\n\t\r\n\t////////////////// Data Handling //////////////////\r\n\t//block table redrawing\r\n\tblockRedraw(){\r\n\t\tthis.initGuard();\r\n\r\n\t\tthis.eventBus.dispatch(\"redraw-blocking\");\r\n\t\t\r\n\t\tthis.rowManager.blockRedraw();\r\n\t\tthis.columnManager.blockRedraw();\r\n\r\n\t\tthis.eventBus.dispatch(\"redraw-blocked\");\r\n\t}\r\n\t\r\n\t//restore table redrawing\r\n\trestoreRedraw(){\r\n\t\tthis.initGuard();\r\n\r\n\t\tthis.eventBus.dispatch(\"redraw-restoring\");\r\n\r\n\t\tthis.rowManager.restoreRedraw();\r\n\t\tthis.columnManager.restoreRedraw();\r\n\r\n\t\tthis.eventBus.dispatch(\"redraw-restored\");\r\n\t}\r\n\t\r\n\t//load data\r\n\tsetData(data, params, config){\r\n\t\tthis.initGuard(false, \"To set initial data please use the 'data' property in the table constructor.\");\r\n\t\t\r\n\t\treturn this.dataLoader.load(data, params, config, false);\r\n\t}\r\n\t\r\n\t//clear data\r\n\tclearData(){\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\tthis.dataLoader.blockActiveLoad();\r\n\t\tthis.rowManager.clearData();\r\n\t}\r\n\t\r\n\t//get table data array\r\n\tgetData(active){\r\n\t\treturn this.rowManager.getData(active);\r\n\t}\r\n\t\r\n\t//get table data array count\r\n\tgetDataCount(active){\r\n\t\treturn this.rowManager.getDataCount(active);\r\n\t}\r\n\t\r\n\t//replace data, keeping table in position with same sort\r\n\treplaceData(data, params, config){\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\treturn this.dataLoader.load(data, params, config, true, true);\r\n\t}\r\n\t\r\n\t//update table data\r\n\tupdateData(data){\r\n\t\tvar responses = 0;\r\n\t\t\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.dataLoader.blockActiveLoad();\r\n\t\t\t\r\n\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(data){\r\n\t\t\t\tdata.forEach((item) => {\r\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(row){\r\n\t\t\t\t\t\tresponses++;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\trow.updateData(item)\r\n\t\t\t\t\t\t\t.then(()=>{\r\n\t\t\t\t\t\t\t\tresponses--;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(!responses){\r\n\t\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\r\n\t\t\t\treject(\"Update Error - No data provided\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\taddData(data, pos, index){\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.dataLoader.blockActiveLoad();\r\n\t\t\t\r\n\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(data){\r\n\t\t\t\tthis.rowManager.addRows(data, pos, index)\r\n\t\t\t\t\t.then((rows) => {\r\n\t\t\t\t\t\tvar output = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\t\trows.forEach(function(row){\r\n\t\t\t\t\t\t\toutput.push(row.getComponent());\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tresolve(output);\r\n\t\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\r\n\t\t\t\treject(\"Update Error - No data provided\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t//update table data\r\n\tupdateOrAddData(data){\r\n\t\tvar rows = [],\r\n\t\tresponses = 0;\r\n\t\t\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.dataLoader.blockActiveLoad();\r\n\t\t\t\r\n\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(data){\r\n\t\t\t\tdata.forEach((item) => {\r\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\r\n\t\t\t\t\t\r\n\t\t\t\t\tresponses++;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(row){\r\n\t\t\t\t\t\trow.updateData(item)\r\n\t\t\t\t\t\t\t.then(()=>{\r\n\t\t\t\t\t\t\t\tresponses--;\r\n\t\t\t\t\t\t\t\trows.push(row.getComponent());\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(!responses){\r\n\t\t\t\t\t\t\t\t\tresolve(rows);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.rowManager.addRows(item)\r\n\t\t\t\t\t\t\t.then((newRows)=>{\r\n\t\t\t\t\t\t\t\tresponses--;\r\n\t\t\t\t\t\t\t\trows.push(newRows[0].getComponent());\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(!responses){\r\n\t\t\t\t\t\t\t\t\tresolve(rows);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\r\n\t\t\t\treject(\"Update Error - No data provided\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t//get row object\r\n\tgetRow(index){\r\n\t\tvar row = this.rowManager.findRow(index);\r\n\t\t\r\n\t\tif(row){\r\n\t\t\treturn row.getComponent();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", index);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t\r\n\t//get row object\r\n\tgetRowFromPosition(position){\r\n\t\tvar row = this.rowManager.getRowFromPosition(position);\r\n\t\t\r\n\t\tif(row){\r\n\t\t\treturn row.getComponent();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", position);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t\r\n\t//delete row from table\r\n\tdeleteRow(index){\r\n\t\tvar foundRows = [];\r\n\t\t\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\tif(!Array.isArray(index)){\r\n\t\t\tindex = [index];\r\n\t\t}\r\n\t\t\r\n\t\t//find matching rows\r\n\t\tfor(let item of index){\r\n\t\t\tlet row = this.rowManager.findRow(item, true);\r\n\t\t\t\r\n\t\t\tif(row){\r\n\t\t\t\tfoundRows.push(row);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.error(\"Delete Error - No matching row found:\", item);\r\n\t\t\t\treturn Promise.reject(\"Delete Error - No matching row found\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//sort rows into correct order to ensure smooth delete from table\r\n\t\tfoundRows.sort((a, b) => {\r\n\t\t\treturn this.rowManager.rows.indexOf(a) > this.rowManager.rows.indexOf(b) ? 1 : -1;\r\n\t\t});\r\n\t\t\r\n\t\t//delete rows\r\n\t\tfoundRows.forEach((row) =>{\r\n\t\t\trow.delete();\r\n\t\t});\r\n\t\t\r\n\t\tthis.rowManager.reRenderInPosition();\r\n\t\t\r\n\t\treturn Promise.resolve();\r\n\t}\r\n\t\r\n\t//add row to table\r\n\taddRow(data, pos, index){\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\tif(typeof data === \"string\"){\r\n\t\t\tdata = JSON.parse(data);\r\n\t\t}\r\n\t\t\r\n\t\treturn this.rowManager.addRows(data, pos, index)\r\n\t\t\t.then((rows)=>{\r\n\t\t\t\treturn rows[0].getComponent();\r\n\t\t\t});\r\n\t}\r\n\t\r\n\t//update a row if it exists otherwise create it\r\n\tupdateOrAddRow(index, data){\r\n\t\tvar row = this.rowManager.findRow(index);\r\n\t\t\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\tif(typeof data === \"string\"){\r\n\t\t\tdata = JSON.parse(data);\r\n\t\t}\r\n\t\t\r\n\t\tif(row){\r\n\t\t\treturn row.updateData(data)\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\treturn row.getComponent();\r\n\t\t\t\t});\r\n\t\t}else{\r\n\t\t\treturn this.rowManager.addRows(data)\r\n\t\t\t\t.then((rows)=>{\r\n\t\t\t\t\treturn rows[0].getComponent();\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t//update row data\r\n\tupdateRow(index, data){\r\n\t\tvar row = this.rowManager.findRow(index);\r\n\t\t\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\tif(typeof data === \"string\"){\r\n\t\t\tdata = JSON.parse(data);\r\n\t\t}\r\n\t\t\r\n\t\tif(row){\r\n\t\t\treturn row.updateData(data)\r\n\t\t\t\t.then(()=>{\r\n\t\t\t\t\treturn Promise.resolve(row.getComponent());\r\n\t\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Update Error - No matching row found:\", index);\r\n\t\t\treturn Promise.reject(\"Update Error - No matching row found\");\r\n\t\t}\r\n\t}\r\n\t\r\n\t//scroll to row in DOM\r\n\tscrollToRow(index, position, ifVisible){\r\n\t\tvar row = this.rowManager.findRow(index);\r\n\t\t\r\n\t\tif(row){\r\n\t\t\treturn this.rowManager.scrollToRow(row, position, ifVisible);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Scroll Error - No matching row found:\", index);\r\n\t\t\treturn Promise.reject(\"Scroll Error - No matching row found\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tmoveRow(from, to, after){\r\n\t\tvar fromRow = this.rowManager.findRow(from);\r\n\t\t\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\tif(fromRow){\r\n\t\t\tfromRow.moveToRow(to, after);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", from);\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetRows(active){\r\n\t\treturn this.rowManager.getComponents(active);\t\r\n\t}\r\n\t\r\n\t//get position of row in table\r\n\tgetRowPosition(index){\r\n\t\tvar row = this.rowManager.findRow(index);\r\n\t\t\r\n\t\tif(row){\r\n\t\t\treturn row.getPosition();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Position Error - No matching row found:\", index);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/////////////// Column Functions  ///////////////\r\n\tsetColumns(definition){\r\n\t\tthis.initGuard(false, \"To set initial columns please use the 'columns' property in the table constructor\");\r\n\t\t\r\n\t\tthis.columnManager.setColumns(definition);\r\n\t}\r\n\t\r\n\tgetColumns(structured){\r\n\t\treturn this.columnManager.getComponents(structured);\r\n\t}\r\n\t\r\n\tgetColumn(field){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\t\t\r\n\t\tif(column){\r\n\t\t\treturn column.getComponent();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Find Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetColumnDefinitions(){\r\n\t\treturn this.columnManager.getDefinitionTree();\r\n\t}\r\n\t\r\n\tshowColumn(field){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\t\t\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\tif(column){\r\n\t\t\tcolumn.show();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Show Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t\r\n\thideColumn(field){\r\n\t\tvar column = this.columnManager.findColumn(field); \r\n\t\t\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\tif(column){\r\n\t\t\tcolumn.hide();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Hide Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t\r\n\ttoggleColumn(field){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\t\t\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\tif(column){\r\n\t\t\tif(column.visible){\r\n\t\t\t\tcolumn.hide();\r\n\t\t\t}else{\r\n\t\t\t\tcolumn.show();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t\r\n\taddColumn(definition, before, field){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\t\t\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\treturn this.columnManager.addColumn(definition, before, column)\r\n\t\t\t.then((column) => {\r\n\t\t\t\treturn column.getComponent();\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tdeleteColumn(field){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\t\t\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\tif(column){\r\n\t\t\treturn column.delete();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Delete Error - No matching column found:\", field);\r\n\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n\t\r\n\tupdateColumnDefinition(field, definition){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\t\t\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\tif(column){\r\n\t\t\treturn column.updateDefinition(definition);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Update Error - No matching column found:\", field);\r\n\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n\t\r\n\tmoveColumn(from, to, after){\r\n\t\tvar fromColumn = this.columnManager.findColumn(from),\r\n\t\ttoColumn = this.columnManager.findColumn(to);\r\n\t\t\r\n\t\tthis.initGuard();\r\n\t\t\r\n\t\tif(fromColumn){\r\n\t\t\tif(toColumn){\r\n\t\t\t\tthis.columnManager.moveColumn(fromColumn, toColumn, after);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", from);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//scroll to column in DOM\r\n\tscrollToColumn(field, position, ifVisible){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar column = this.columnManager.findColumn(field);\r\n\t\t\t\r\n\t\t\tif(column){\r\n\t\t\t\treturn this.columnManager.scrollToColumn(column, position, ifVisible);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Scroll Error - No matching column found:\", field);\r\n\t\t\t\treturn Promise.reject(\"Scroll Error - No matching column found\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t//////////// General Public Functions ////////////\r\n\t//redraw list without updating data\r\n\tredraw(force){\r\n\t\tthis.initGuard();\r\n\r\n\t\tthis.columnManager.redraw(force);\r\n\t\tthis.rowManager.redraw(force);\r\n\t}\r\n\t\r\n\tsetHeight(height){\r\n\t\tthis.options.height = isNaN(height) ? height : height + \"px\";\r\n\t\tthis.element.style.height = this.options.height;\r\n\t\tthis.rowManager.initializeRenderer();\r\n\t\tthis.rowManager.redraw();\r\n\t}\r\n\t\r\n\t//////////////////// Event Bus ///////////////////\r\n\t\r\n\ton(key, callback){\r\n\t\tthis.externalEvents.subscribe(key, callback);\r\n\t}\r\n\t\r\n\toff(key, callback){\r\n\t\tthis.externalEvents.unsubscribe(key, callback);\r\n\t}\r\n\t\r\n\tdispatchEvent(){\r\n\t\tvar args = Array.from(arguments);\r\n\t\targs.shift();\r\n\t\t\r\n\t\tthis.externalEvents.dispatch(...arguments);\r\n\t}\r\n\r\n\t//////////////////// Alerts ///////////////////\r\n\r\n\talert(contents, type){\r\n\t\tthis.initGuard();\r\n\r\n\t\tthis.alertManager.alert(contents, type);\r\n\t}\r\n\r\n\tclearAlert(){\r\n\t\tthis.initGuard();\r\n\r\n\t\tthis.alertManager.clear();\r\n\t}\r\n\t\r\n\t////////////// Extension Management //////////////\r\n\tmodExists(plugin, required){\r\n\t\tif(this.modules[plugin]){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\tif(required){\r\n\t\t\t\tconsole.error(\"Tabulator Module Not Installed: \" + plugin);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t\r\n\tmodule(key){\r\n\t\tvar mod = this.modules[key];\r\n\t\t\r\n\t\tif(!mod){\r\n\t\t\tconsole.error(\"Tabulator module not installed: \" + key);\r\n\t\t}\r\n\t\t\r\n\t\treturn mod;\r\n\t}\r\n}\r\n\r\n//default setup options\r\nTabulator.defaultOptions = defaultOptions;\r\n\r\n//bind modules and static functionality\r\nnew ModuleBinder(Tabulator);\r\n\r\nexport default Tabulator;\r\n","//tabulator with all modules installed\r\nimport {default as Tabulator} from './Tabulator.js';\r\nimport * as modules from '../core/modules/optional.js';\r\nimport ModuleBinder from './tools/ModuleBinder.js';\r\n\r\nclass TabulatorFull extends Tabulator {}\r\n\r\n//bind modules and static functionality\r\nnew ModuleBinder(TabulatorFull, modules);\r\n\r\nexport default TabulatorFull;","export default class PseudoRow {\r\n\r\n\tconstructor (type){\r\n\t\tthis.type = type;\r\n\t\tthis.element = this._createElement();\r\n\t}\r\n\r\n\t_createElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.classList.add(\"tabulator-row\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tgetComponent(){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetData(){\r\n\t\treturn {};\r\n\t}\r\n\r\n\tgetHeight(){\r\n\t\treturn this.element.outerHeight;\r\n\t}\r\n\r\n\tinitialize(){}\r\n\r\n\treinitialize(){}\r\n\r\n\tnormalizeHeight(){}\r\n\r\n\tgenerateCells(){}\r\n\r\n\treinitializeHeight(){}\r\n\r\n\tcalcHeight(){}\r\n\r\n\tsetCellHeight(){}\r\n\r\n\tclearCellHeight(){}\r\n}","import * as bootstrap from \"bootstrap\";\r\nimport { cp } from \"fs\";\r\nimport { get } from \"http\";\r\nimport { toNamespacedPath } from \"path\";\r\nimport { ColumnCalcsModule, TabulatorFull as Tabulator } from \"tabulator-tables\";\r\nimport { InteractionModule } from \"tabulator-tables\";\r\n\r\n//initial page set up\r\n$(\"#newForm\").hide();\r\n$(\"#newForm2\").hide();\r\n$(\"#searchForm2\").hide();\r\n\r\n//events to happen when user clicks on new customer\r\n$(\"#link1\").on(\"click\", () => {\r\n  $(\"#picture-container\").hide();\r\n  $(\"#searchForm\").hide();\r\n  $(\"#searchForm2\").hide();\r\n  $(\"#newForm\").show();\r\n  $(\"#newForm2\").hide();\r\n  $(\".resultCard\").hide();\r\n  $(\".resultCard2\").hide();\r\n  $(\"#formTitle\").text(\"New Customer Information\");\r\n});\r\n\r\n//events to happen when user clicks on existing customer\r\n$(\"#link2\").on(\"click\", () => {\r\n  $(\"#picture-container\").show();\r\n  $(\"#searchForm\").show();\r\n  $(\"#newForm\").hide();\r\n  $(\"#newForm2\").hide();\r\n  $(\"#searchForm2\").hide();\r\n  $(\".resultCard\").hide();\r\n  $(\".resultCard2\").hide();\r\n});\r\n\r\n$(\"#link3\").on(\"click\", () => {\r\n  $(\"#picture-container\").hide();\r\n  $(\"#searchForm\").hide();\r\n  $(\"#newForm\").hide();\r\n  $(\"#newForm2\").show();\r\n  $(\".resultCard\").hide();\r\n  $(\".resultCard2\").hide();\r\n  $(\"#searchForm2\").hide();\r\n  $(\"#formTitle2\").text(\"New Appointment Information\");\r\n  $('#chooseCustomer').empty();\r\n\r\n  $.get(\"api/lash/\", (data) => {\r\n\r\n    data.forEach((el)=>{\r\n      let identifier = el.customer_id;\r\n      let name = el.first_name + \" \" + el.last_name;\r\n      name = capitalizer(name);\r\n      $('<option></option>').text(name).attr('id', identifier).appendTo($('#chooseCustomer'));\r\n\r\n    })\r\n    \r\n\r\n  })\r\n});\r\n\r\n\r\n  $(\"#link4\").on(\"click\", () => {\r\n    $(\"#picture-container\").hide();\r\n    $(\"#searchForm\").hide();\r\n    $(\"#newForm\").hide();\r\n    $(\"#newForm2\").hide();\r\n    $(\".resultCard\").hide();\r\n    $(\".resultCard2\").hide();\r\n    $(\"#searchForm2\").show();\r\n  })\r\n  \r\n  \r\n\r\n\r\n\r\n//lots of code just to automatically choose brand based on tweezers\r\n$(\"#newTweezers\").on(\"change\", () => {\r\n  var selectedTweezers = $('select[id=\"newTweezers\"]').val();\r\n\r\n  if (selectedTweezers == \"Curved Isolation\" || selectedTweezers == \"M.I.L.F\") {\r\n    $(\"#newBrand\").val(\"Mish Esthetics\");\r\n  } else if (\r\n    selectedTweezers == \"P6 Ultimate Volume\" ||\r\n    selectedTweezers == \"P0 90 Degree Volume\"\r\n  ) {\r\n    $(\"#newBrand\").val(\"Paris Lash Academy\");\r\n  } else if (\r\n    selectedTweezers == \"Blue Magic Mike\" ||\r\n    selectedTweezers == \"Straight Up\" ||\r\n    selectedTweezers == \"Just The Tip\" ||\r\n    selectedTweezers == \"Pink Isolating\"\r\n  ) {\r\n    $(\"#newBrand\").val(\"Liv Bay Lash\");\r\n  } else {\r\n    $(\"#newBrand\").val(\"Invalid\");\r\n  }\r\n});\r\n\r\n//prepares object with data to be sent in post/patch req\r\nlet prepareObj = () => {\r\n  let obj = {};\r\n\r\n  obj.first_name = $('input[id=\"newFirstName\"]').val().toLowerCase();\r\n  obj.last_name = $('input[id=\"newLastName\"]').val().toLowerCase();\r\n  obj.phone_number = $('input[id=\"newPhoneNumber\"]').val();\r\n  obj.eye_shape = $('select[id=\"newEyeShape\"]').val().toLowerCase();\r\n  obj.lash_type = $('select[id=\"newLashType\"]').val().toLowerCase();\r\n  obj.tweezers = $('select[id=\"newTweezers\"]').val()//.toLowerCase();\r\n  obj.brand = $('input[id=\"newBrand\"]').val().toLowerCase();\r\n\r\n  return obj;\r\n};\r\n\r\n//creates req id as global variable because it needs to be accessed in multiple functions\r\nvar reqId = \"\";\r\n\r\n//reassigns req id based on selected row\r\nlet getReqId = (row) => {\r\n  if (row) {\r\n    reqId = row.getData().ID;\r\n  } else {\r\n    return reqId;\r\n  }\r\n};\r\n\r\n//User form sends either post or patch req based on how the form was accessed\r\nconst $userForm = $(\"#newForm\");\r\n$userForm.submit((event) => {\r\n  event.preventDefault();\r\n\r\n  let obj = prepareObj();\r\n\r\n  if ($(\"#formTitle\").text() == \"New Customer Information\") {\r\n    $.ajax({\r\n      type: \"post\",\r\n      url: \"/api/lash\",\r\n      data: JSON.stringify(obj),\r\n      contentType: \"application/json\",\r\n      statusCode: {\r\n        400: function() {\r\n          alert( \"Customer already exists\" );\r\n        },\r\n        201: function() {\r\n          alert( \"Successfully created customer\");\r\n        }\r\n      },\r\n    });\r\n  } else if ($(\"#formTitle\").text() === \"Update Customer Information\") {\r\n    let reqId = getReqId();\r\n\r\n    $.ajax({\r\n      type: \"patch\",\r\n      url: `/api/lash/${reqId}`,\r\n      data: JSON.stringify(obj),\r\n      contentType: \"application/json\",\r\n      statusCode: {\r\n        400: function() {\r\n          alert( \"Update failed, please check input.\" );\r\n        },\r\n        200: function() {\r\n          alert( \"Successfully updated customer\");\r\n        }\r\n      },\r\n    });\r\n  } else {\r\n  }\r\n});\r\n\r\n//capitalizes first letter for display\r\nlet capitalizer = (str) => {\r\n  if (str.includes(\" \")) {\r\n    let str2 = str.split(/\\b\\s+/);\r\n    let result = \"\";\r\n    for (let i = 0; i < str2.length; i++) {\r\n      result += str2[i].charAt(0).toUpperCase() + str2[i].slice(1) + \" \";\r\n    }\r\n    result = result.trim();\r\n    return result;\r\n  }\r\n  return str.charAt(0).toUpperCase() + str.slice(1);\r\n};\r\n\r\n//delete req based on selected customer\r\nlet deleteCustomer = (row) => {\r\n  let obj = {};\r\n\r\n  obj.id = row.getData().ID;\r\n\r\n  $.ajax({\r\n    type: \"delete\",\r\n    url: \"/api/lash\",\r\n    data: JSON.stringify(obj),\r\n    contentType: \"application/json\",\r\n  });\r\n\r\n  row.delete();\r\n};\r\n\r\nlet deleteApp = (row) => {\r\n  let obj = {};\r\n\r\n  obj.id = row.getData().ID;\r\n\r\n  $.ajax({\r\n    type: \"delete\",\r\n    url: \"/api/app\",\r\n    data: JSON.stringify(obj),\r\n    contentType: \"application/json\",\r\n  });\r\n\r\n  row.delete();\r\n};\r\n\r\n//prepares  form for customer update\r\nlet updateCustomer = (row) => {\r\n  $(\"#picture-container\").hide();\r\n  $(\"#searchForm\").hide();\r\n  $(\"#newForm\").show();\r\n  $(\".resultCard\").hide();\r\n  $(\".resultCard2\").hide();\r\n\r\n  $(\"#formTitle\").text(\"Update Customer Information\");\r\n  getReqId(row);\r\n\r\n  $('input[id=\"newFirstName\"]').val(row.getData()[\"First Name\"]);\r\n  $('input[id=\"newLastName\"]').val(row.getData()[\"Last Name\"]);\r\n  $('input[id=\"newPhoneNumber\"]').val(row.getData()[\"Phone Number\"]);\r\n  $('select[id=\"newEyeShape\"]').val(row.getData()[\"Eye Shape\"]);\r\n  $('select[id=\"newLashType\"]').val(row.getData()[\"Lash Type\"]);\r\n  $('select[id=\"newTweezers\"]').val(row.getData()[\"Tweezers\"]);\r\n  $('input[id=\"newBrand\"]').val(row.getData()[\"Brand\"]);\r\n};\r\n\r\nlet updateApp = (row) => {\r\n  $(\"#picture-container\").hide();\r\n  $(\"#searchForm2\").hide();\r\n  $(\"#newForm2\").show();\r\n  $(\".resultCard2\").hide();\r\n  $(\"#searchForm\").hide();\r\n  $(\".resultCard\").hide();\r\n  $(\"#formTitle2\").text(\"Update Appointment Information\");\r\n  $('#chooseCustomer').empty();\r\n  getReqId(row);\r\n\r\n  $.get(\"api/lash/\", (data) => {\r\n\r\n    data.forEach((el)=>{\r\n      let identifier = el.customer_id;\r\n      let name = el.first_name + \" \" + el.last_name;\r\n      name = capitalizer(name);\r\n      $('<option></option>').text(name).attr('id', identifier).appendTo($('#chooseCustomer'));\r\n\r\n    })\r\n  })\r\n\r\n\r\n\r\n  $('select[id=\"chooseCustomer\"]').val(row.getData()[\"First Name\"] + ' ' + row.getData()[\"Last Name\"]);\r\n  $('input[id=\"newDate\"').val(row.getData()[\"Date\"]);\r\n  $('select[id=\"newLashStyle\"]').val(row.getData()[\"Lash Style\"])\r\n  $('select[id=\"newLength\"]').val(row.getData()[\"Length\"]);\r\n  $('select[id=\"newThickness\"]').val(row.getData()[\"Thickness\"]);\r\n  $('select[id=\"newCurl\"]').val(row.getData()[\"Curl\"]);\r\n  $('select[id=\"newGlue\"]').val(row.getData()[\"Glue\"]);\r\n\r\n  if(row.getData()[\"Primer\"] === 'Yes'){\r\n    $('#extraProduct1').prop('checked',true);\r\n   }else if(row.getData()[\"Primer\"] === 'No'){\r\n    $('#extraProduct1').prop('checked',false);\r\n   }\r\n   if(row.getData()[\"Bonder\"] === 'Yes'){\r\n    $('#extraProduct2').prop('checked',true);\r\n   }else if(row.getData()[\"Bonder\"] === 'No'){\r\n    $('#extraProduct2').prop('checked',false);\r\n   }\r\n   if(row.getData()[\"Cleanser\"] === 'Yes'){\r\n    $('#extraProduct3').prop('checked',true);\r\n   }else if(row.getData()[\"Cleanser\"] === 'No'){\r\n    $('#extraProduct3').prop('checked',false);\r\n   }\r\n \r\n\r\n\r\n}\r\n\r\n//table creation function\r\nlet tableCreation = (data) => {\r\n  //define data\r\n  var tabledata = [];\r\n\r\n  if(data.tableChooser === 'customerTable'){\r\n    \r\n    data.forEach((el) => {\r\n      let obj = {};\r\n      obj[\"ID\"] = el.customer_id;\r\n      obj[\"First Name\"] = capitalizer(el.first_name);\r\n      obj[\"Last Name\"] = capitalizer(el.last_name);\r\n      obj[\"Phone Number\"] = el.phone_number;\r\n      obj[\"Eye Shape\"] = capitalizer(el.eye_shape);\r\n      obj[\"Lash Type\"] = capitalizer(el.lash_type);\r\n      obj[\"Tweezers\"] = el.tweezers;\r\n      obj[\"Brand\"] = capitalizer(el.brand);\r\n      tabledata.push(obj);\r\n    });\r\n  \r\n    $(\"<div></div>\").addClass(\"resultCard\").appendTo($(\"body\"));\r\n    $(\".resultCard\").show();\r\n  \r\n    //define table\r\n    var table = new Tabulator(\".resultCard\", {\r\n      data: tabledata,\r\n      columns: [\r\n        { title: \"ID\", field: \"ID\", visible: false },\r\n        { title: \"First Name\", field: \"First Name\" },\r\n        { title: \"Last Name\", field: \"Last Name\" },\r\n        { title: \"Phone Number\", field: \"Phone Number\" },\r\n        { title: \"Eye Shape\", field: \"Eye Shape\" },\r\n        { title: \"Lash Type\", field: \"Lash Type\" },\r\n        { title: \"Tweezers\", field: \"Tweezers\" },\r\n        { title: \"Brand\", field: \"Brand\" },\r\n      ],\r\n      layout: \"fitDataStretch\",\r\n      pagination: true,\r\n      selectable: 1,\r\n      paginationSize: 5,\r\n      paginationInitialPage: 1,\r\n      rowFormatter: function (row) {\r\n        row.getElement().style.textColor = \"#1e3b20\";\r\n      },\r\n      rowContextMenu: [\r\n        {\r\n          label: \"Update\",\r\n          action: function (e, row) {\r\n            if (confirm(\"Are you sure you want to update?\")) {\r\n              updateCustomer(row);\r\n            }\r\n          },\r\n        },\r\n        {\r\n          separator: true,\r\n        },\r\n        {\r\n          label: \"Delete\",\r\n          action: function (e, row) {\r\n            if (confirm(\"Are you sure you want to delete?\")) {\r\n              deleteCustomer(row);\r\n            }\r\n          },\r\n        },\r\n      ],\r\n    });\r\n  }else if(data.tableChooser === 'appTable'){\r\n\r\n    data.forEach((el) => {\r\n      let obj = {};\r\n      obj[\"ID\"] = el.appointment_id;\r\n      obj[\"Date\"] = el.date;\r\n      obj[\"First Name\"] = capitalizer(el.first_name);\r\n      obj[\"Last Name\"] = capitalizer(el.last_name);\r\n      obj[\"Lash Style\"] = capitalizer(el.lash_style);\r\n      obj[\"Curl\"] = capitalizer(el.curl);\r\n      obj[\"Length\"] = el.length;\r\n      obj[\"Thickness\"] = el.thickness;\r\n      obj[\"Glue\"] = capitalizer(el.glue);\r\n      obj[\"Bonder\"] =  (el.bonder === true) ? 'Yes' : 'No';\r\n      obj[\"Primer\"] =  (el.primer === true) ? 'Yes' : 'No';\r\n      obj[\"Cleanser\"] = (el.cleanser === true) ? 'Yes' : 'No';\r\n      tabledata.push(obj);\r\n    });\r\n    \r\n    $(\"<div></div>\").addClass(\"resultCard2\").appendTo($(\"body\"));\r\n    $(\".resultCard2\").show();\r\n\r\n    //define table\r\n    var table2 = new Tabulator(\".resultCard2\", {\r\n      data: tabledata,\r\n      columns: [\r\n        { title: \"ID\", field: \"ID\", visible: false },\r\n        { title: \"First Name\", field: \"First Name\" },\r\n        { title: \"Last Name\", field: \"Last Name\" },\r\n        { title: \"Date\", field: \"Date\"},\r\n        { title: \"Lash Style\", field: \"Lash Style\" },\r\n        { title: \"Curl\", field: \"Curl\" },\r\n        { title: \"Length\", field: \"Length\" },\r\n        { title: \"Thickness\", field: \"Thickness\" },\r\n        { title: \"Glue\" , field: \"Glue\"},\r\n        { title: \"Primer\" , field: \"Primer\"},\r\n        { title: \"Bonder\" , field: \"Bonder\"},\r\n        { title: \"Cleanser\" , field: \"Cleanser\"},\r\n      ],\r\n      layout: \"fitDataStretch\",\r\n      pagination: true,\r\n      paginationSize: 5,\r\n      paginationInitialPage: 1,\r\n      rowFormatter: function (row) {\r\n        row.getElement().style.textColor = \"#1e3b20\";\r\n      },\r\n      rowContextMenu: [\r\n        {\r\n          label: \"Update\",\r\n          action: function (e, row) {\r\n            if (confirm(\"Are you sure you want to update?\")) {\r\n              updateApp(row);\r\n            }\r\n          },\r\n        },\r\n        {\r\n          separator: true,\r\n        },\r\n        {\r\n          label: \"Delete\",\r\n          action: function (e, row) {\r\n            if (confirm(\"Are you sure you want to delete?\")) {\r\n              deleteApp(row);\r\n            }\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n\r\n  }\r\n\r\n  var compare = {};\r\n\r\n  table.on(\"rowClick\", function(e, row){\r\n\r\n    if(row.getData() != compare){\r\n      \r\n      let customId = row.getData().ID;\r\n      \r\n      $.get(`/api/sp/${customId}`, (data) =>{\r\n       \r\n\r\n          data.tableChooser = 'appTable';\r\n    \r\n          tableCreation(data);\r\n\r\n      }).fail(() => {\r\n        alert(\"No appointments found for selected customer.\");\r\n        $(\".resultCard2\").hide();\r\n      })\r\n      \r\n      \r\n      \r\n      \r\n      \r\n      \r\n      compare = row.getData();\r\n    }else{\r\n      $(\".resultCard2\").hide();\r\n      compare = {};\r\n    }\r\n    \r\n    \r\n    \r\n    \r\n   \r\n\r\n  });\r\n};\r\n\r\n//get request from search bar then creates table\r\nconst $searchForm = $(\"#searchForm\");\r\n$searchForm.submit((event) => {\r\n  event.preventDefault();\r\n\r\n  searchText = $('input[id=\"searchText\"]').val();\r\n\r\n  $(\"#picture-container\").hide();\r\n\r\n  $.get(`/api/lash/${searchText}`, (data) => {\r\n      data.tableChooser = 'customerTable';\r\n      tableCreation(data);\r\n  }).fail(() =>{\r\n    alert(\"No customer found.\");\r\n  });\r\n});\r\n\r\nconst $searchForm2 = $(\"#searchForm2\");\r\n$searchForm2.submit((event) => {\r\n  event.preventDefault();\r\n\r\n  searchText = $('input[id=\"searchDate\"]').val();\r\n\r\n  $.get(`/api/app/${searchText}`, (data) => {\r\n\r\n    data.tableChooser = 'appTable';\r\n    \r\n    tableCreation(data);\r\n    \r\n  }).fail(() =>{\r\n    alert(\"No appointment found.\");\r\n    $('.resultCard2').hide();\r\n  });\r\n});\r\n\r\n//User form sends either post or patch req based on how the form was accessed\r\nconst $userForm2 = $(\"#newForm2\");\r\n$userForm2.submit((event) => {\r\n  event.preventDefault();\r\n  \r\n  \r\n  let obj = {};\r\n\r\n\r\n  obj.name = $('select[id=\"chooseCustomer\"]').val().toLowerCase();\r\n  obj.date = $('input[id=\"newDate\"').val();\r\n  obj.lash_style = $('select[id=\"newLashStyle\"]').val().toLowerCase();\r\n  obj.length = $('select[id=\"newLength\"]').val().toLowerCase();\r\n  obj.thickness = $('select[id=\"newThickness\"]').val().toLowerCase();\r\n  obj.curl = $('select[id=\"newCurl\"]').val().toLowerCase();\r\n  obj.glue = $('select[id=\"newGlue\"]').val().toLowerCase();\r\n  \r\n  if($('#extraProduct1').is(':checked')){\r\n    obj.primer = true;\r\n   }else{\r\n    obj.primer = false;\r\n   }\r\n\r\n if($('#extraProduct2').is(':checked')){\r\n  obj.bonder = true;\r\n }else{\r\n  obj.bonder = false;\r\n }\r\n\r\n if($('#extraProduct3').is(':checked')){\r\n  obj.cleanser = true;\r\n }else{\r\n  obj.cleanser = false;\r\n }\r\n \r\nif(obj.date === ''){\r\n  alert('Please enter a date.');\r\n}else{\r\n  \r\n  if($('#formTitle2').text() === 'New Appointment Information'){\r\n    \r\n  $.ajax({\r\n        type: \"post\",\r\n        url: \"/api/app\",\r\n        data: JSON.stringify(obj),\r\n        contentType: \"application/json\",\r\n        statusCode: {\r\n          400: function() {\r\n            alert( \"Appointment creation, please check input.\" );\r\n          },\r\n          201: function() {\r\n            alert( \"Successfully created appointment.\");\r\n          }}\r\n      });\r\n\r\n  }else if($('#formTitle2').text() === 'Update Appointment Information'){\r\n\r\n      let reqId = getReqId();\r\n      \r\n      $.ajax({\r\n        type: \"patch\",\r\n        url: `/api/app/${reqId}`,\r\n        data: JSON.stringify(obj),\r\n        contentType: \"application/json\",\r\n        statusCode: {\r\n          400: function() {\r\n            alert( \"Update failed, please check input.\" );\r\n          },\r\n          200: function() {\r\n            alert( \"Successfully updated appointment.\");\r\n          }\r\n        },\r\n      });\r\n  }\r\n\r\n  \r\n  }\r\n\r\n});"]}